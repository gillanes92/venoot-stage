function _mergeNamespaces(t,r){for(var e=0;e<r.length;e++){const n=r[e];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in t)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(t,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var r=t.default;if(typeof r=="function"){var e=function n(){if(this instanceof n){var o=[null];o.push.apply(o,arguments);var a=Function.bind.apply(r,o);return new a}return r.apply(this,arguments)};e.prototype=r.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var o=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:function(){return t[n]}})}),e}var libExports$1={},lib$2={get exports(){return libExports$1},set exports(t){libExports$1=t}},re$1=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts$1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parseuri$3=function(r){var e=r,n=r.indexOf("["),o=r.indexOf("]");n!=-1&&o!=-1&&(r=r.substring(0,n)+r.substring(n,o).replace(/:/g,";")+r.substring(o,r.length));for(var a=re$1.exec(r||""),c={},u=14;u--;)c[parts$1[u]]=a[u]||"";return n!=-1&&o!=-1&&(c.source=e,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c},browserExports$1={},browser$2={get exports(){return browserExports$1},set exports(t){browserExports$1=t}},ms$1,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms$1;hasRequiredMs=1;var t=1e3,r=t*60,e=r*60,n=e*24,o=n*7,a=n*365.25;ms$1=function(g,v){v=v||{};var b=typeof g;if(b==="string"&&g.length>0)return c(g);if(b==="number"&&isFinite(g))return v.long?l(g):u(g);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(g))};function c(g){if(g=String(g),!(g.length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(g);if(v){var b=parseFloat(v[1]),S=(v[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*o;case"days":case"day":case"d":return b*n;case"hours":case"hour":case"hrs":case"hr":case"h":return b*e;case"minutes":case"minute":case"mins":case"min":case"m":return b*r;case"seconds":case"second":case"secs":case"sec":case"s":return b*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function u(g){var v=Math.abs(g);return v>=n?Math.round(g/n)+"d":v>=e?Math.round(g/e)+"h":v>=r?Math.round(g/r)+"m":v>=t?Math.round(g/t)+"s":g+"ms"}function l(g){var v=Math.abs(g);return v>=n?f(g,v,n,"day"):v>=e?f(g,v,e,"hour"):v>=r?f(g,v,r,"minute"):v>=t?f(g,v,t,"second"):g+" ms"}function f(g,v,b,S){var C=v>=b*1.5;return Math.round(g/b)+" "+S+(C?"s":"")}return ms$1}function setup(t){e.debug=e,e.default=e,e.coerce=f,e.disable=c,e.enable=a,e.enabled=u,e.humanize=requireMs(),Object.keys(t).forEach(g=>{e[g]=t[g]}),e.instances=[],e.names=[],e.skips=[],e.formatters={};function r(g){let v=0;for(let b=0;b<g.length;b++)v=(v<<5)-v+g.charCodeAt(b),v|=0;return e.colors[Math.abs(v)%e.colors.length]}e.selectColor=r;function e(g){let v;function b(...S){if(!b.enabled)return;const C=b,O=Number(new Date),A=O-(v||O);C.diff=A,C.prev=v,C.curr=O,v=O,S[0]=e.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let w=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(k,M)=>{if(k==="%%")return k;w++;const W=e.formatters[M];if(typeof W=="function"){const Y=S[w];k=W.call(C,Y),S.splice(w,1),w--}return k}),e.formatArgs.call(C,S),(C.log||e.log).apply(C,S)}return b.namespace=g,b.enabled=e.enabled(g),b.useColors=e.useColors(),b.color=r(g),b.destroy=n,b.extend=o,typeof e.init=="function"&&e.init(b),e.instances.push(b),b}function n(){const g=e.instances.indexOf(this);return g!==-1?(e.instances.splice(g,1),!0):!1}function o(g,v){const b=e(this.namespace+(typeof v>"u"?":":v)+g);return b.log=this.log,b}function a(g){e.save(g),e.names=[],e.skips=[];let v;const b=(typeof g=="string"?g:"").split(/[\s,]+/),S=b.length;for(v=0;v<S;v++)b[v]&&(g=b[v].replace(/\*/g,".*?"),g[0]==="-"?e.skips.push(new RegExp("^"+g.substr(1)+"$")):e.names.push(new RegExp("^"+g+"$")));for(v=0;v<e.instances.length;v++){const C=e.instances[v];C.enabled=e.enabled(C.namespace)}}function c(){const g=[...e.names.map(l),...e.skips.map(l).map(v=>"-"+v)].join(",");return e.enable(""),g}function u(g){if(g[g.length-1]==="*")return!0;let v,b;for(v=0,b=e.skips.length;v<b;v++)if(e.skips[v].test(g))return!1;for(v=0,b=e.names.length;v<b;v++)if(e.names[v].test(g))return!0;return!1}function l(g){return g.toString().substring(2,g.toString().length-2).replace(/\.\*\?$/,"*")}function f(g){return g instanceof Error?g.stack||g.message:g}return e.enable(e.load()),e}var common=setup;(function(t,r){r.log=o,r.formatArgs=n,r.save=a,r.load=c,r.useColors=e,r.storage=u(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const g="color: "+this.color;f.splice(1,0,g,"color: inherit");let v=0,b=0;f[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(v++,S==="%c"&&(b=v))}),f.splice(b,0,g)}function o(...f){return typeof console=="object"&&console.log&&console.log(...f)}function a(f){try{f?r.storage.setItem("debug",f):r.storage.removeItem("debug")}catch{}}function c(){let f;try{f=r.storage.getItem("debug")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f={}.DEBUG),f}function u(){try{return localStorage}catch{}}t.exports=common(r);const{formatters:l}=t.exports;l.j=function(f){try{return JSON.stringify(f)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}})(browser$2,browserExports$1);var parseuri$2=parseuri$3,debug$6=browserExports$1("socket.io-client:url"),url_1=url;function url(t,r){var e=t;r=r||typeof location<"u"&&location,t==null&&(t=r.protocol+"//"+r.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=r.protocol+t:t=r.host+t),/^(https?|wss?):\/\//.test(t)||(debug$6("protocol-less url %s",t),typeof r<"u"?t=r.protocol+"//"+t:t="https://"+t),debug$6("parse %s",t),e=parseuri$2(t)),e.port||(/^(http|ws)$/.test(e.protocol)?e.port="80":/^(http|ws)s$/.test(e.protocol)&&(e.port="443")),e.path=e.path||"/";var n=e.host.indexOf(":")!==-1,o=n?"["+e.host+"]":e.host;return e.id=e.protocol+"://"+o+":"+e.port,e.href=e.protocol+"://"+o+(r&&r.port===e.port?"":":"+e.port),e}var socket_ioParser={},browserExports={},browser$1={get exports(){return browserExports},set exports(t){browserExports=t}},debugExports={},debug$5={get exports(){return debugExports},set exports(t){debugExports=t}},s=1e3,m=s*60,h$1=m*60,d=h$1*24,y=d*365.25,ms=function(t,r){r=r||{};var e=typeof t;if(e==="string"&&t.length>0)return parse(t);if(e==="number"&&isNaN(t)===!1)return r.long?fmtLong(t):fmtShort(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function parse(t){if(t=String(t),!(t.length>100)){var r=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(r){var e=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return e*y;case"days":case"day":case"d":return e*d;case"hours":case"hour":case"hrs":case"hr":case"h":return e*h$1;case"minutes":case"minute":case"mins":case"min":case"m":return e*m;case"seconds":case"second":case"secs":case"sec":case"s":return e*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return e;default:return}}}}function fmtShort(t){return t>=d?Math.round(t/d)+"d":t>=h$1?Math.round(t/h$1)+"h":t>=m?Math.round(t/m)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function fmtLong(t){return plural(t,d,"day")||plural(t,h$1,"hour")||plural(t,m,"minute")||plural(t,s,"second")||t+" ms"}function plural(t,r,e){if(!(t<r))return t<r*1.5?Math.floor(t/r)+" "+e:Math.ceil(t/r)+" "+e+"s"}(function(t,r){r=t.exports=n.debug=n.default=n,r.coerce=l,r.disable=c,r.enable=a,r.enabled=u,r.humanize=ms,r.instances=[],r.names=[],r.skips=[],r.formatters={};function e(f){var g=0,v;for(v in f)g=(g<<5)-g+f.charCodeAt(v),g|=0;return r.colors[Math.abs(g)%r.colors.length]}function n(f){var g;function v(){if(v.enabled){var b=v,S=+new Date,C=S-(g||S);b.diff=C,b.prev=g,b.curr=S,g=S;for(var O=new Array(arguments.length),A=0;A<O.length;A++)O[A]=arguments[A];O[0]=r.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");var w=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,function(k,M){if(k==="%%")return k;w++;var W=r.formatters[M];if(typeof W=="function"){var Y=O[w];k=W.call(b,Y),O.splice(w,1),w--}return k}),r.formatArgs.call(b,O);var V=v.log||r.log||console.log.bind(console);V.apply(b,O)}}return v.namespace=f,v.enabled=r.enabled(f),v.useColors=r.useColors(),v.color=e(f),v.destroy=o,typeof r.init=="function"&&r.init(v),r.instances.push(v),v}function o(){var f=r.instances.indexOf(this);return f!==-1?(r.instances.splice(f,1),!0):!1}function a(f){r.save(f),r.names=[],r.skips=[];var g,v=(typeof f=="string"?f:"").split(/[\s,]+/),b=v.length;for(g=0;g<b;g++)v[g]&&(f=v[g].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.substr(1)+"$")):r.names.push(new RegExp("^"+f+"$")));for(g=0;g<r.instances.length;g++){var S=r.instances[g];S.enabled=r.enabled(S.namespace)}}function c(){r.enable("")}function u(f){if(f[f.length-1]==="*")return!0;var g,v;for(g=0,v=r.skips.length;g<v;g++)if(r.skips[g].test(f))return!1;for(g=0,v=r.names.length;g<v;g++)if(r.names[g].test(f))return!0;return!1}function l(f){return f instanceof Error?f.stack||f.message:f}})(debug$5,debugExports);(function(t,r){r=t.exports=debugExports,r.log=o,r.formatArgs=n,r.save=a,r.load=c,r.useColors=e,r.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:u(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}r.formatters.j=function(l){try{return JSON.stringify(l)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}};function n(l){var f=this.useColors;if(l[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+l[0]+(f?"%c ":" ")+"+"+r.humanize(this.diff),!!f){var g="color: "+this.color;l.splice(1,0,g,"color: inherit");var v=0,b=0;l[0].replace(/%[a-zA-Z%]/g,function(S){S!=="%%"&&(v++,S==="%c"&&(b=v))}),l.splice(b,0,g)}}function o(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(l){try{l==null?r.storage.removeItem("debug"):r.storage.debug=l}catch{}}function c(){var l;try{l=r.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l={}.DEBUG),l}r.enable(c());function u(){try{return window.localStorage}catch{}}})(browser$1,browserExports);var componentEmitterExports$1={},componentEmitter$1={get exports(){return componentEmitterExports$1},set exports(t){componentEmitterExports$1=t}};(function(t){t.exports=r;function r(n){if(n)return e(n)}function e(n){for(var o in r.prototype)n[o]=r.prototype[o];return n}r.prototype.on=r.prototype.addEventListener=function(n,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(o),this},r.prototype.once=function(n,o){function a(){this.off(n,a),o.apply(this,arguments)}return a.fn=o,this.on(n,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+n];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var c,u=0;u<a.length;u++)if(c=a[u],c===o||c.fn===o){a.splice(u,1);break}return a.length===0&&delete this._callbacks["$"+n],this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var o=new Array(arguments.length-1),a=this._callbacks["$"+n],c=1;c<arguments.length;c++)o[c-1]=arguments[c];if(a){a=a.slice(0);for(var c=0,u=a.length;c<u;++c)a[c].apply(this,o)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(componentEmitter$1);var binary={},toString$2={}.toString,isarray=Array.isArray||function(t){return toString$2.call(t)=="[object Array]"},isBuffer$1=isBuf$1,withNativeBuffer=typeof Buffer=="function"&&typeof Buffer.isBuffer=="function",withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=function(t){return typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer};function isBuf$1(t){return withNativeBuffer&&Buffer.isBuffer(t)||withNativeArrayBuffer&&(t instanceof ArrayBuffer||isView(t))}var isArray$3=isarray,isBuf=isBuffer$1,toString$1=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString$1.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString$1.call(File)==="[object FileConstructor]";binary.deconstructPacket=function(t){var r=[],e=t.data,n=t;return n.data=_deconstructPacket(e,r),n.attachments=r.length,{packet:n,buffers:r}};function _deconstructPacket(t,r){if(!t)return t;if(isBuf(t)){var e={_placeholder:!0,num:r.length};return r.push(t),e}else if(isArray$3(t)){for(var n=new Array(t.length),o=0;o<t.length;o++)n[o]=_deconstructPacket(t[o],r);return n}else if(typeof t=="object"&&!(t instanceof Date)){var n={};for(var a in t)n[a]=_deconstructPacket(t[a],r);return n}return t}binary.reconstructPacket=function(t,r){return t.data=_reconstructPacket(t.data,r),t.attachments=void 0,t};function _reconstructPacket(t,r){if(!t)return t;if(t&&t._placeholder===!0){var e=typeof t.num=="number"&&t.num>=0&&t.num<r.length;if(e)return r[t.num];throw new Error("illegal attachments")}else if(isArray$3(t))for(var n=0;n<t.length;n++)t[n]=_reconstructPacket(t[n],r);else if(typeof t=="object")for(var o in t)t[o]=_reconstructPacket(t[o],r);return t}binary.removeBlobs=function(t,r){function e(a,c,u){if(!a)return a;if(withNativeBlob&&a instanceof Blob||withNativeFile&&a instanceof File){n++;var l=new FileReader;l.onload=function(){u?u[c]=this.result:o=this.result,--n||r(o)},l.readAsArrayBuffer(a)}else if(isArray$3(a))for(var f=0;f<a.length;f++)e(a[f],f,a);else if(typeof a=="object"&&!isBuf(a))for(var g in a)e(a[g],g,a)}var n=0,o=t;e(o),n||r(o)};(function(t){var r=browserExports("socket.io-parser"),e=componentEmitterExports$1,n=binary,o=isarray,a=isBuffer$1;t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=v;function c(){}var u=t.ERROR+'"encode error"';c.prototype.encode=function(A,w){if(r("encoding packet %j",A),t.BINARY_EVENT===A.type||t.BINARY_ACK===A.type)g(A,w);else{var V=l(A);w([V])}};function l(A){var w=""+A.type;if((t.BINARY_EVENT===A.type||t.BINARY_ACK===A.type)&&(w+=A.attachments+"-"),A.nsp&&A.nsp!=="/"&&(w+=A.nsp+","),A.id!=null&&(w+=A.id),A.data!=null){var V=f(A.data);if(V!==!1)w+=V;else return u}return r("encoded %j as %s",A,w),w}function f(A){try{return JSON.stringify(A)}catch{return!1}}function g(A,w){function V(k){var M=n.deconstructPacket(k),W=l(M.packet),Y=M.buffers;Y.unshift(W),w(Y)}n.removeBlobs(A,V)}function v(){this.reconstructor=null}e(v.prototype),v.prototype.add=function(A){var w;if(typeof A=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");w=b(A),t.BINARY_EVENT===w.type||t.BINARY_ACK===w.type?(this.reconstructor=new C(w),this.reconstructor.reconPack.attachments===0&&this.emit("decoded",w)):this.emit("decoded",w)}else if(a(A)||A.base64)if(this.reconstructor)w=this.reconstructor.takeBinaryData(A),w&&(this.reconstructor=null,this.emit("decoded",w));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+A)};function b(A){var w=0,V={type:Number(A.charAt(0))};if(t.types[V.type]==null)return O("unknown packet type "+V.type);if(t.BINARY_EVENT===V.type||t.BINARY_ACK===V.type){for(var k=w+1;A.charAt(++w)!=="-"&&w!=A.length;);var M=A.substring(k,w);if(M!=Number(M)||A.charAt(w)!=="-")throw new Error("Illegal attachments");V.attachments=Number(M)}if(A.charAt(w+1)==="/"){for(var k=w+1;++w;){var W=A.charAt(w);if(W===","||w===A.length)break}V.nsp=A.substring(k,w)}else V.nsp="/";var Y=A.charAt(w+1);if(Y!==""&&Number(Y)==Y){for(var k=w+1;++w;){var W=A.charAt(w);if(W==null||Number(W)!=W){--w;break}if(w===A.length)break}V.id=Number(A.substring(k,w+1))}if(A.charAt(++w)){var H=S(A.substr(w)),P=H!==!1&&(V.type===t.ERROR||o(H));if(P)V.data=H;else return O("invalid payload")}return r("decoded %s as %j",A,V),V}function S(A){try{return JSON.parse(A)}catch{return!1}}v.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};function C(A){this.reconPack=A,this.buffers=[]}C.prototype.takeBinaryData=function(A){if(this.buffers.push(A),this.buffers.length===this.reconPack.attachments){var w=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),w}return null},C.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};function O(A){return{type:t.ERROR,data:"parser error: "+A}}})(socket_ioParser);var libExports={},lib$1={get exports(){return libExports},set exports(t){libExports=t}},transports$1={},hasCorsExports={},hasCors={get exports(){return hasCorsExports},set exports(t){hasCorsExports=t}};try{hasCors.exports=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{hasCors.exports=!1}var globalThis_browser=function(){return typeof self<"u"?self:typeof window<"u"?window:Function("return this")()}(),hasCORS=hasCorsExports,globalThis$3=globalThis_browser,xmlhttprequest=function(t){var r=t.xdomain,e=t.xscheme,n=t.enablesXDR;try{if(typeof XMLHttpRequest<"u"&&(!r||hasCORS))return new XMLHttpRequest}catch{}try{if(typeof XDomainRequest<"u"&&!e&&n)return new XDomainRequest}catch{}if(!r)try{return new globalThis$3[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}},pollingXhrExports={},pollingXhr={get exports(){return pollingXhrExports},set exports(t){pollingXhrExports=t}},browser={},keys=Object.keys||function(r){var e=[],n=Object.prototype.hasOwnProperty;for(var o in r)n.call(r,o)&&e.push(o);return e},hasBinary2,hasRequiredHasBinary2;function requireHasBinary2(){if(hasRequiredHasBinary2)return hasBinary2;hasRequiredHasBinary2=1;var t=isarray,r=Object.prototype.toString,e=typeof Blob=="function"||typeof Blob<"u"&&r.call(Blob)==="[object BlobConstructor]",n=typeof File=="function"||typeof File<"u"&&r.call(File)==="[object FileConstructor]";hasBinary2=o;function o(a){if(!a||typeof a!="object")return!1;if(t(a)){for(var c=0,u=a.length;c<u;c++)if(o(a[c]))return!0;return!1}if(typeof Buffer=="function"&&Buffer.isBuffer&&Buffer.isBuffer(a)||typeof ArrayBuffer=="function"&&a instanceof ArrayBuffer||e&&a instanceof Blob||n&&a instanceof File)return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return o(a.toJSON(),!0);for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)&&o(a[l]))return!0;return!1}return hasBinary2}var arraybuffer_slice=function(t,r,e){var n=t.byteLength;if(r=r||0,e=e||n,t.slice)return t.slice(r,e);if(r<0&&(r+=n),e<0&&(e+=n),e>n&&(e=n),r>=n||r>=e||n===0)return new ArrayBuffer(0);for(var o=new Uint8Array(t),a=new Uint8Array(e-r),c=r,u=0;c<e;c++,u++)a[u]=o[c];return a.buffer},after_1=after;function after(t,r,e){var n=!1;return e=e||noop$4,o.count=t,t===0?r():o;function o(a,c){if(o.count<=0)throw new Error("after called too many times");--o.count,a?(n=!0,r(a),r=e):o.count===0&&!n&&r(null,c)}}function noop$4(){}/*! https://mths.be/utf8js v2.1.2 by @mathias */var stringFromCharCode=String.fromCharCode;function ucs2decode(t){for(var r=[],e=0,n=t.length,o,a;e<n;)o=t.charCodeAt(e++),o>=55296&&o<=56319&&e<n?(a=t.charCodeAt(e++),(a&64512)==56320?r.push(((o&1023)<<10)+(a&1023)+65536):(r.push(o),e--)):r.push(o);return r}function ucs2encode(t){for(var r=t.length,e=-1,n,o="";++e<r;)n=t[e],n>65535&&(n-=65536,o+=stringFromCharCode(n>>>10&1023|55296),n=56320|n&1023),o+=stringFromCharCode(n);return o}function checkScalarValue(t,r){if(t>=55296&&t<=57343){if(r)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function createByte(t,r){return stringFromCharCode(t>>r&63|128)}function encodeCodePoint(t,r){if(!(t&4294967168))return stringFromCharCode(t);var e="";return t&4294965248?t&4294901760?t&4292870144||(e=stringFromCharCode(t>>18&7|240),e+=createByte(t,12),e+=createByte(t,6)):(checkScalarValue(t,r)||(t=65533),e=stringFromCharCode(t>>12&15|224),e+=createByte(t,6)):e=stringFromCharCode(t>>6&31|192),e+=stringFromCharCode(t&63|128),e}function utf8encode(t,r){r=r||{};for(var e=r.strict!==!1,n=ucs2decode(t),o=n.length,a=-1,c,u="";++a<o;)c=n[a],u+=encodeCodePoint(c,e);return u}function readContinuationByte(){if(byteIndex>=byteCount)throw Error("Invalid byte index");var t=byteArray[byteIndex]&255;if(byteIndex++,(t&192)==128)return t&63;throw Error("Invalid continuation byte")}function decodeSymbol(t){var r,e,n,o,a;if(byteIndex>byteCount)throw Error("Invalid byte index");if(byteIndex==byteCount)return!1;if(r=byteArray[byteIndex]&255,byteIndex++,!(r&128))return r;if((r&224)==192){if(e=readContinuationByte(),a=(r&31)<<6|e,a>=128)return a;throw Error("Invalid continuation byte")}if((r&240)==224){if(e=readContinuationByte(),n=readContinuationByte(),a=(r&15)<<12|e<<6|n,a>=2048)return checkScalarValue(a,t)?a:65533;throw Error("Invalid continuation byte")}if((r&248)==240&&(e=readContinuationByte(),n=readContinuationByte(),o=readContinuationByte(),a=(r&7)<<18|e<<12|n<<6|o,a>=65536&&a<=1114111))return a;throw Error("Invalid UTF-8 detected")}var byteArray,byteCount,byteIndex;function utf8decode(t,r){r=r||{};var e=r.strict!==!1;byteArray=ucs2decode(t),byteCount=byteArray.length,byteIndex=0;for(var n=[],o;(o=decodeSymbol(e))!==!1;)n.push(o);return ucs2encode(n)}var utf8={version:"2.1.2",encode:utf8encode,decode:utf8decode},base64Arraybuffer={},hasRequiredBase64Arraybuffer;function requireBase64Arraybuffer(){return hasRequiredBase64Arraybuffer||(hasRequiredBase64Arraybuffer=1,function(t){base64Arraybuffer.encode=function(r){var e=new Uint8Array(r),n,o=e.length,a="";for(n=0;n<o;n+=3)a+=t[e[n]>>2],a+=t[(e[n]&3)<<4|e[n+1]>>4],a+=t[(e[n+1]&15)<<2|e[n+2]>>6],a+=t[e[n+2]&63];return o%3===2?a=a.substring(0,a.length-1)+"=":o%3===1&&(a=a.substring(0,a.length-2)+"=="),a},base64Arraybuffer.decode=function(r){var e=r.length*.75,n=r.length,o,a=0,c,u,l,f;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);var g=new ArrayBuffer(e),v=new Uint8Array(g);for(o=0;o<n;o+=4)c=t.indexOf(r[o]),u=t.indexOf(r[o+1]),l=t.indexOf(r[o+2]),f=t.indexOf(r[o+3]),v[a++]=c<<2|u>>4,v[a++]=(u&15)<<4|l>>2,v[a++]=(l&3)<<6|f&63;return g}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")),base64Arraybuffer}var blob,hasRequiredBlob;function requireBlob(){if(hasRequiredBlob)return blob;hasRequiredBlob=1;var t=typeof t<"u"?t:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:!1,r=function(){try{var u=new Blob(["hi"]);return u.size===2}catch{return!1}}(),e=r&&function(){try{var u=new Blob([new Uint8Array([1,2])]);return u.size===2}catch{return!1}}(),n=t&&t.prototype.append&&t.prototype.getBlob;function o(u){return u.map(function(l){if(l.buffer instanceof ArrayBuffer){var f=l.buffer;if(l.byteLength!==f.byteLength){var g=new Uint8Array(l.byteLength);g.set(new Uint8Array(f,l.byteOffset,l.byteLength)),f=g.buffer}return f}return l})}function a(u,l){l=l||{};var f=new t;return o(u).forEach(function(g){f.append(g)}),l.type?f.getBlob(l.type):f.getBlob()}function c(u,l){return new Blob(o(u),l||{})}return typeof Blob<"u"&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),blob=function(){return r?e?Blob:c:n?a:void 0}(),blob}(function(t){var r=keys,e=requireHasBinary2(),n=arraybuffer_slice,o=after_1,a=utf8,c;typeof ArrayBuffer<"u"&&(c=requireBase64Arraybuffer());var u=typeof navigator<"u"&&/Android/i.test(navigator.userAgent),l=typeof navigator<"u"&&/PhantomJS/i.test(navigator.userAgent),f=u||l;t.protocol=3;var g=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=r(g),b={type:"error",data:"parser error"},S=requireBlob();t.encodePacket=function(M,W,Y,H){typeof W=="function"&&(H=W,W=!1),typeof Y=="function"&&(H=Y,Y=null);var P=M.data===void 0?void 0:M.data.buffer||M.data;if(typeof ArrayBuffer<"u"&&P instanceof ArrayBuffer)return O(M,W,H);if(typeof S<"u"&&P instanceof S)return w(M,W,H);if(P&&P.base64)return C(M,H);var j=g[M.type];return M.data!==void 0&&(j+=Y?a.encode(String(M.data),{strict:!1}):String(M.data)),H(""+j)};function C(M,W){var Y="b"+t.packets[M.type]+M.data.data;return W(Y)}function O(M,W,Y){if(!W)return t.encodeBase64Packet(M,Y);var H=M.data,P=new Uint8Array(H),j=new Uint8Array(1+H.byteLength);j[0]=g[M.type];for(var _=0;_<P.length;_++)j[_+1]=P[_];return Y(j.buffer)}function A(M,W,Y){if(!W)return t.encodeBase64Packet(M,Y);var H=new FileReader;return H.onload=function(){t.encodePacket({type:M.type,data:H.result},W,!0,Y)},H.readAsArrayBuffer(M.data)}function w(M,W,Y){if(!W)return t.encodeBase64Packet(M,Y);if(f)return A(M,W,Y);var H=new Uint8Array(1);H[0]=g[M.type];var P=new S([H.buffer,M.data]);return Y(P)}t.encodeBase64Packet=function(M,W){var Y="b"+t.packets[M.type];if(typeof S<"u"&&M.data instanceof S){var H=new FileReader;return H.onload=function(){var ae=H.result.split(",")[1];W(Y+ae)},H.readAsDataURL(M.data)}var P;try{P=String.fromCharCode.apply(null,new Uint8Array(M.data))}catch{for(var j=new Uint8Array(M.data),_=new Array(j.length),z=0;z<j.length;z++)_[z]=j[z];P=String.fromCharCode.apply(null,_)}return Y+=btoa(P),W(Y)},t.decodePacket=function(M,W,Y){if(M===void 0)return b;if(typeof M=="string"){if(M.charAt(0)==="b")return t.decodeBase64Packet(M.substr(1),W);if(Y&&(M=V(M),M===!1))return b;var P=M.charAt(0);return Number(P)!=P||!v[P]?b:M.length>1?{type:v[P],data:M.substring(1)}:{type:v[P]}}var H=new Uint8Array(M),P=H[0],j=n(M,1);return S&&W==="blob"&&(j=new S([j])),{type:v[P],data:j}};function V(M){try{M=a.decode(M,{strict:!1})}catch{return!1}return M}t.decodeBase64Packet=function(M,W){var Y=v[M.charAt(0)];if(!c)return{type:Y,data:{base64:!0,data:M.substr(1)}};var H=c.decode(M.substr(1));return W==="blob"&&S&&(H=new S([H])),{type:Y,data:H}},t.encodePayload=function(M,W,Y){typeof W=="function"&&(Y=W,W=null);var H=e(M);if(W&&H)return S&&!f?t.encodePayloadAsBlob(M,Y):t.encodePayloadAsArrayBuffer(M,Y);if(!M.length)return Y("0:");function P(_){return _.length+":"+_}function j(_,z){t.encodePacket(_,H?W:!1,!1,function(ae){z(null,P(ae))})}k(M,j,function(_,z){return Y(z.join(""))})};function k(M,W,Y){for(var H=new Array(M.length),P=o(M.length,Y),j=function(z,ae,me){W(ae,function(ye,Pe){H[z]=Pe,me(ye,H)})},_=0;_<M.length;_++)j(_,M[_],P)}t.decodePayload=function(M,W,Y){if(typeof M!="string")return t.decodePayloadAsBinary(M,W,Y);typeof W=="function"&&(Y=W,W=null);var H;if(M==="")return Y(b,0,1);for(var P="",j,_,z=0,ae=M.length;z<ae;z++){var me=M.charAt(z);if(me!==":"){P+=me;continue}if(P===""||P!=(j=Number(P))||(_=M.substr(z+1,j),P!=_.length))return Y(b,0,1);if(_.length){if(H=t.decodePacket(_,W,!1),b.type===H.type&&b.data===H.data)return Y(b,0,1);var ye=Y(H,z+j,ae);if(ye===!1)return}z+=j,P=""}if(P!=="")return Y(b,0,1)},t.encodePayloadAsArrayBuffer=function(M,W){if(!M.length)return W(new ArrayBuffer(0));function Y(H,P){t.encodePacket(H,!0,!0,function(j){return P(null,j)})}k(M,Y,function(H,P){var j=P.reduce(function(ae,me){var ye;return typeof me=="string"?ye=me.length:ye=me.byteLength,ae+ye.toString().length+ye+2},0),_=new Uint8Array(j),z=0;return P.forEach(function(ae){var me=typeof ae=="string",ye=ae;if(me){for(var Ue=new Uint8Array(ae.length),Pe=0;Pe<ae.length;Pe++)Ue[Pe]=ae.charCodeAt(Pe);ye=Ue.buffer}me?_[z++]=0:_[z++]=1;for(var Te=ye.byteLength.toString(),Pe=0;Pe<Te.length;Pe++)_[z++]=parseInt(Te[Pe]);_[z++]=255;for(var Ue=new Uint8Array(ye),Pe=0;Pe<Ue.length;Pe++)_[z++]=Ue[Pe]}),W(_.buffer)})},t.encodePayloadAsBlob=function(M,W){function Y(H,P){t.encodePacket(H,!0,!0,function(j){var _=new Uint8Array(1);if(_[0]=1,typeof j=="string"){for(var z=new Uint8Array(j.length),ae=0;ae<j.length;ae++)z[ae]=j.charCodeAt(ae);j=z.buffer,_[0]=0}for(var me=j instanceof ArrayBuffer?j.byteLength:j.size,ye=me.toString(),Pe=new Uint8Array(ye.length+1),ae=0;ae<ye.length;ae++)Pe[ae]=parseInt(ye[ae]);if(Pe[ye.length]=255,S){var Te=new S([_.buffer,Pe.buffer,j]);P(null,Te)}})}k(M,Y,function(H,P){return W(new S(P))})},t.decodePayloadAsBinary=function(M,W,Y){typeof W=="function"&&(Y=W,W=null);for(var H=M,P=[];H.byteLength>0;){for(var j=new Uint8Array(H),_=j[0]===0,z="",ae=1;j[ae]!==255;ae++){if(z.length>310)return Y(b,0,1);z+=j[ae]}H=n(H,2+z.length),z=parseInt(z);var me=n(H,0,z);if(_)try{me=String.fromCharCode.apply(null,new Uint8Array(me))}catch{var ye=new Uint8Array(me);me="";for(var ae=0;ae<ye.length;ae++)me+=String.fromCharCode(ye[ae])}P.push(me),H=n(H,z)}var Pe=P.length;P.forEach(function(Te,Ue){Y(t.decodePacket(Te,W,!0),Ue,Pe)})}})(browser);var transport,hasRequiredTransport;function requireTransport(){if(hasRequiredTransport)return transport;hasRequiredTransport=1;var t=browser,r=componentEmitterExports$1;transport=e;function e(n){this.path=n.path,this.hostname=n.hostname,this.port=n.port,this.secure=n.secure,this.query=n.query,this.timestampParam=n.timestampParam,this.timestampRequests=n.timestampRequests,this.readyState="",this.agent=n.agent||!1,this.socket=n.socket,this.enablesXDR=n.enablesXDR,this.withCredentials=n.withCredentials,this.pfx=n.pfx,this.key=n.key,this.passphrase=n.passphrase,this.cert=n.cert,this.ca=n.ca,this.ciphers=n.ciphers,this.rejectUnauthorized=n.rejectUnauthorized,this.forceNode=n.forceNode,this.isReactNative=n.isReactNative,this.extraHeaders=n.extraHeaders,this.localAddress=n.localAddress}return r(e.prototype),e.prototype.onError=function(n,o){var a=new Error(n);return a.type="TransportError",a.description=o,this.emit("error",a),this},e.prototype.open=function(){return(this.readyState==="closed"||this.readyState==="")&&(this.readyState="opening",this.doOpen()),this},e.prototype.close=function(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this},e.prototype.send=function(n){if(this.readyState==="open")this.write(n);else throw new Error("Transport not open")},e.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},e.prototype.onData=function(n){var o=t.decodePacket(n,this.socket.binaryType);this.onPacket(o)},e.prototype.onPacket=function(n){this.emit("packet",n)},e.prototype.onClose=function(){this.readyState="closed",this.emit("close")},transport}var parseqs$4={};parseqs$4.encode=function(t){var r="";for(var e in t)t.hasOwnProperty(e)&&(r.length&&(r+="&"),r+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r};parseqs$4.decode=function(t){for(var r={},e=t.split("&"),n=0,o=e.length;n<o;n++){var a=e[n].split("=");r[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return r};var componentInherit=function(t,r){var e=function(){};e.prototype=r.prototype,t.prototype=new e,t.prototype.constructor=t},alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length$1=64,map={},seed=0,i=0,prev;function encode$2(t){var r="";do r=alphabet[t%length$1]+r,t=Math.floor(t/length$1);while(t>0);return r}function decode$1(t){var r=0;for(i=0;i<t.length;i++)r=r*length$1+map[t.charAt(i)];return r}function yeast$2(){var t=encode$2(+new Date);return t!==prev?(seed=0,prev=t):t+"."+encode$2(seed++)}for(;i<length$1;i++)map[alphabet[i]]=i;yeast$2.encode=encode$2;yeast$2.decode=decode$1;var yeast_1=yeast$2,Transport$1=requireTransport(),parseqs$3=parseqs$4,parser$3=browser,inherit$3=componentInherit,yeast$1=yeast_1,debug$4=browserExports("engine.io-client:polling"),polling$1=Polling$2,hasXHR2=function(){var t=xmlhttprequest,r=new t({xdomain:!1});return r.responseType!=null}();function Polling$2(t){var r=t&&t.forceBase64;(!hasXHR2||r)&&(this.supportsBinary=!1),Transport$1.call(this,t)}inherit$3(Polling$2,Transport$1);Polling$2.prototype.name="polling";Polling$2.prototype.doOpen=function(){this.poll()};Polling$2.prototype.pause=function(t){var r=this;this.readyState="pausing";function e(){debug$4("paused"),r.readyState="paused",t()}if(this.polling||!this.writable){var n=0;this.polling&&(debug$4("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){debug$4("pre-pause polling complete"),--n||e()})),this.writable||(debug$4("we are currently writing - waiting to pause"),n++,this.once("drain",function(){debug$4("pre-pause writing complete"),--n||e()}))}else e()};Polling$2.prototype.poll=function(){debug$4("polling"),this.polling=!0,this.doPoll(),this.emit("poll")};Polling$2.prototype.onData=function(t){var r=this;debug$4("polling got data %s",t);var e=function(n,o,a){if(r.readyState==="opening"&&r.onOpen(),n.type==="close")return r.onClose(),!1;r.onPacket(n)};parser$3.decodePayload(t,this.socket.binaryType,e),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"?this.poll():debug$4('ignoring poll - transport state "%s"',this.readyState))};Polling$2.prototype.doClose=function(){var t=this;function r(){debug$4("writing close packet"),t.write([{type:"close"}])}this.readyState==="open"?(debug$4("transport open - closing"),r()):(debug$4("transport not open - deferring close"),this.once("open",r))};Polling$2.prototype.write=function(t){var r=this;this.writable=!1;var e=function(){r.writable=!0,r.emit("drain")};parser$3.encodePayload(t,this.supportsBinary,function(n){r.doWrite(n,e)})};Polling$2.prototype.uri=function(){var t=this.query||{},r=this.secure?"https":"http",e="";this.timestampRequests!==!1&&(t[this.timestampParam]=yeast$1()),!this.supportsBinary&&!t.sid&&(t.b64=1),t=parseqs$3.encode(t),this.port&&(r==="https"&&Number(this.port)!==443||r==="http"&&Number(this.port)!==80)&&(e=":"+this.port),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return r+"://"+(n?"["+this.hostname+"]":this.hostname)+e+this.path+t};var XMLHttpRequest$2=xmlhttprequest,Polling$1=polling$1,Emitter$2=componentEmitterExports$1,inherit$2=componentInherit,debug$3=browserExports("engine.io-client:polling-xhr"),globalThis$2=globalThis_browser;pollingXhr.exports=XHR$1;pollingXhrExports.Request=Request;function empty$1(){}function XHR$1(t){if(Polling$1.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,typeof location<"u"){var r=location.protocol==="https:",e=location.port;e||(e=r?443:80),this.xd=typeof location<"u"&&t.hostname!==location.hostname||e!==t.port,this.xs=t.secure!==r}}inherit$2(XHR$1,Polling$1);XHR$1.prototype.supportsBinary=!0;XHR$1.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.withCredentials=this.withCredentials,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new Request(t)};XHR$1.prototype.doWrite=function(t,r){var e=typeof t!="string"&&t!==void 0,n=this.request({method:"POST",data:t,isBinary:e}),o=this;n.on("success",r),n.on("error",function(a){o.onError("xhr post error",a)}),this.sendXhr=n};XHR$1.prototype.doPoll=function(){debug$3("xhr poll");var t=this.request(),r=this;t.on("data",function(e){r.onData(e)}),t.on("error",function(e){r.onError("xhr poll error",e)}),this.pollXhr=t};function Request(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=t.async!==!1,this.data=t.data!==void 0?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.withCredentials=t.withCredentials,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}Emitter$2(Request.prototype);Request.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var r=this.xhr=new XMLHttpRequest$2(t),e=this;try{debug$3("xhr open %s: %s",this.method,this.uri),r.open(this.method,this.uri,this.async);try{if(this.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.extraHeaders[n])}}catch{}if(this.method==="POST")try{this.isBinary?r.setRequestHeader("Content-type","application/octet-stream"):r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in r&&(r.withCredentials=this.withCredentials),this.requestTimeout&&(r.timeout=this.requestTimeout),this.hasXDR()?(r.onload=function(){e.onLoad()},r.onerror=function(){e.onError(r.responseText)}):r.onreadystatechange=function(){if(r.readyState===2)try{var o=r.getResponseHeader("Content-Type");(e.supportsBinary&&o==="application/octet-stream"||o==="application/octet-stream; charset=UTF-8")&&(r.responseType="arraybuffer")}catch{}r.readyState===4&&(r.status===200||r.status===1223?e.onLoad():setTimeout(function(){e.onError(typeof r.status=="number"?r.status:0)},0))},debug$3("xhr data %s",this.data),r.send(this.data)}catch(o){setTimeout(function(){e.onError(o)},0);return}typeof document<"u"&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)};Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()};Request.prototype.onData=function(t){this.emit("data",t),this.onSuccess()};Request.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)};Request.prototype.cleanup=function(t){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty$1:this.xhr.onreadystatechange=empty$1,t)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Request.requests[this.index],this.xhr=null}};Request.prototype.onLoad=function(){var t;try{var r;try{r=this.xhr.getResponseHeader("Content-Type")}catch{}r==="application/octet-stream"||r==="application/octet-stream; charset=UTF-8"?t=this.xhr.response||this.xhr.responseText:t=this.xhr.responseText}catch(e){this.onError(e)}t!=null&&this.onData(t)};Request.prototype.hasXDR=function(){return typeof XDomainRequest<"u"&&!this.xs&&this.enablesXDR};Request.prototype.abort=function(){this.cleanup()};Request.requestsCount=0;Request.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){var terminationEvent="onpagehide"in globalThis$2?"pagehide":"unload";addEventListener(terminationEvent,unloadHandler,!1)}}function unloadHandler(){for(var t in Request.requests)Request.requests.hasOwnProperty(t)&&Request.requests[t].abort()}var Polling=polling$1,inherit$1=componentInherit,globalThis$1=globalThis_browser,pollingJsonp=JSONPPolling,rNewline=/\n/g,rEscapedNewline=/\\n/g,callbacks;function empty(){}function JSONPPolling(t){Polling.call(this,t),this.query=this.query||{},callbacks||(callbacks=globalThis$1.___eio=globalThis$1.___eio||[]),this.index=callbacks.length;var r=this;callbacks.push(function(e){r.onData(e)}),this.query.j=this.index,typeof addEventListener=="function"&&addEventListener("beforeunload",function(){r.script&&(r.script.onerror=empty)},!1)}inherit$1(JSONPPolling,Polling);JSONPPolling.prototype.supportsBinary=!1;JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)};JSONPPolling.prototype.doPoll=function(){var t=this,r=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),r.async=!0,r.src=this.uri(),r.onerror=function(o){t.onError("jsonp poll error",o)};var e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(r,e):(document.head||document.body).appendChild(r),this.script=r;var n=typeof navigator<"u"&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var o=document.createElement("iframe");document.body.appendChild(o),document.body.removeChild(o)},100)};JSONPPolling.prototype.doWrite=function(t,r){var e=this;if(!this.form){var n=document.createElement("form"),o=document.createElement("textarea"),a=this.iframeId="eio_iframe_"+this.index,c;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=a,n.method="POST",n.setAttribute("accept-charset","utf-8"),o.name="d",n.appendChild(o),document.body.appendChild(n),this.form=n,this.area=o}this.form.action=this.uri();function u(){l(),r()}function l(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(g){e.onError("jsonp polling iframe removal error",g)}try{var f='<iframe src="javascript:0" name="'+e.iframeId+'">';c=document.createElement(f)}catch{c=document.createElement("iframe"),c.name=e.iframeId,c.src="javascript:0"}c.id=e.iframeId,e.form.appendChild(c),e.iframe=c}l(),t=t.replace(rEscapedNewline,`\\
`),this.area.value=t.replace(rNewline,"\\n");try{this.form.submit()}catch{}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){e.iframe.readyState==="complete"&&u()}:this.iframe.onload=u};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(__viteBrowserExternal$1);var Transport=requireTransport(),parser$2=browser,parseqs$2=parseqs$4,inherit=componentInherit,yeast=yeast_1,debug$2=browserExports("engine.io-client:websocket"),BrowserWebSocket,NodeWebSocket;typeof WebSocket<"u"?BrowserWebSocket=WebSocket:typeof self<"u"&&(BrowserWebSocket=self.WebSocket||self.MozWebSocket);if(typeof window>"u")try{NodeWebSocket=require$$6}catch{}var WebSocketImpl=BrowserWebSocket||NodeWebSocket,websocket$1=WS;function WS(t){var r=t&&t.forceBase64;r&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=BrowserWebSocket&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(WebSocketImpl=NodeWebSocket),Transport.call(this,t)}inherit(WS,Transport);WS.prototype.name="websocket";WS.prototype.supportsBinary=!0;WS.prototype.doOpen=function(){if(this.check()){var t=this.uri(),r=this.protocols,e={};this.isReactNative||(e.agent=this.agent,e.perMessageDeflate=this.perMessageDeflate,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?r?new WebSocketImpl(t,r):new WebSocketImpl(t):new WebSocketImpl(t,r,e)}catch(n){return this.emit("error",n)}this.ws.binaryType===void 0&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}};WS.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(r){t.onData(r.data)},this.ws.onerror=function(r){t.onError("websocket error",r)}};WS.prototype.write=function(t){var r=this;this.writable=!1;for(var e=t.length,n=0,o=e;n<o;n++)(function(c){parser$2.encodePacket(c,r.supportsBinary,function(u){if(!r.usingBrowserWebSocket){var l={};if(c.options&&(l.compress=c.options.compress),r.perMessageDeflate){var f=typeof u=="string"?Buffer.byteLength(u):u.length;f<r.perMessageDeflate.threshold&&(l.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(u):r.ws.send(u,l)}catch{debug$2("websocket closed before onclose event")}--e||a()})})(t[n]);function a(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}};WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)};WS.prototype.doClose=function(){typeof this.ws<"u"&&this.ws.close()};WS.prototype.uri=function(){var t=this.query||{},r=this.secure?"wss":"ws",e="";this.port&&(r==="wss"&&Number(this.port)!==443||r==="ws"&&Number(this.port)!==80)&&(e=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=yeast()),this.supportsBinary||(t.b64=1),t=parseqs$2.encode(t),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return r+"://"+(n?"["+this.hostname+"]":this.hostname)+e+this.path+t};WS.prototype.check=function(){return!!WebSocketImpl&&!("__initialize"in WebSocketImpl&&this.name===WS.prototype.name)};var XMLHttpRequest$1=xmlhttprequest,XHR=pollingXhrExports,JSONP=pollingJsonp,websocket=websocket$1;transports$1.polling=polling;transports$1.websocket=websocket;function polling(t){var r,e=!1,n=!1,o=t.jsonp!==!1;if(typeof location<"u"){var a=location.protocol==="https:",c=location.port;c||(c=a?443:80),e=t.hostname!==location.hostname||c!==t.port,n=t.secure!==a}if(t.xdomain=e,t.xscheme=n,r=new XMLHttpRequest$1(t),"open"in r&&!t.forceJSONP)return new XHR(t);if(!o)throw new Error("JSONP disabled");return new JSONP(t)}var indexOf$1=[].indexOf,indexof=function(t,r){if(indexOf$1)return t.indexOf(r);for(var e=0;e<t.length;++e)if(t[e]===r)return e;return-1},re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],parseuri$1=function(r){var e=r,n=r.indexOf("["),o=r.indexOf("]");n!=-1&&o!=-1&&(r=r.substring(0,n)+r.substring(n,o).replace(/:/g,";")+r.substring(o,r.length));for(var a=re.exec(r||""),c={},u=14;u--;)c[parts[u]]=a[u]||"";return n!=-1&&o!=-1&&(c.source=e,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=pathNames(c,c.path),c.queryKey=queryKey(c,c.query),c};function pathNames(t,r){var e=/\/{2,9}/g,n=r.replace(e,"/").split("/");return(r.substr(0,1)=="/"||r.length===0)&&n.splice(0,1),r.substr(r.length-1,1)=="/"&&n.splice(n.length-1,1),n}function queryKey(t,r){var e={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,o,a){o&&(e[o]=a)}),e}var transports=transports$1,Emitter$1=componentEmitterExports$1,debug$1=browserExports("engine.io-client:socket"),index=indexof,parser$1=browser,parseuri=parseuri$1,parseqs$1=parseqs$4,socket$1=Socket$1;function Socket$1(t,r){if(!(this instanceof Socket$1))return new Socket$1(t,r);r=r||{},t&&typeof t=="object"&&(r=t,t=null),t?(t=parseuri(t),r.hostname=t.host,r.secure=t.protocol==="https"||t.protocol==="wss",r.port=t.port,t.query&&(r.query=t.query)):r.host&&(r.hostname=parseuri(r.host).host),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.agent=r.agent||!1,this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?443:80),this.query=r.query||{},typeof this.query=="string"&&(this.query=parseqs$1.decode(this.query)),this.upgrade=r.upgrade!==!1,this.path=(r.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!r.forceJSONP,this.jsonp=r.jsonp!==!1,this.forceBase64=!!r.forceBase64,this.enablesXDR=!!r.enablesXDR,this.withCredentials=r.withCredentials!==!1,this.timestampParam=r.timestampParam||"t",this.timestampRequests=r.timestampRequests,this.transports=r.transports||["polling","websocket"],this.transportOptions=r.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=r.policyPort||843,this.rememberUpgrade=r.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=r.onlyBinaryUpgrades,this.perMessageDeflate=r.perMessageDeflate!==!1?r.perMessageDeflate||{}:!1,this.perMessageDeflate===!0&&(this.perMessageDeflate={}),this.perMessageDeflate&&this.perMessageDeflate.threshold==null&&(this.perMessageDeflate.threshold=1024),this.pfx=r.pfx||null,this.key=r.key||null,this.passphrase=r.passphrase||null,this.cert=r.cert||null,this.ca=r.ca||null,this.ciphers=r.ciphers||null,this.rejectUnauthorized=r.rejectUnauthorized===void 0?!0:r.rejectUnauthorized,this.forceNode=!!r.forceNode,this.isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",(typeof self>"u"||this.isReactNative)&&(r.extraHeaders&&Object.keys(r.extraHeaders).length>0&&(this.extraHeaders=r.extraHeaders),r.localAddress&&(this.localAddress=r.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}Socket$1.priorWebsocketSuccess=!1;Emitter$1(Socket$1.prototype);Socket$1.protocol=parser$1.protocol;Socket$1.Socket=Socket$1;Socket$1.Transport=requireTransport();Socket$1.transports=transports$1;Socket$1.parser=browser;Socket$1.prototype.createTransport=function(t){debug$1('creating transport "%s"',t);var r=clone(this.query);r.EIO=parser$1.protocol,r.transport=t;var e=this.transportOptions[t]||{};this.id&&(r.sid=this.id);var n=new transports[t]({query:r,socket:this,agent:e.agent||this.agent,hostname:e.hostname||this.hostname,port:e.port||this.port,secure:e.secure||this.secure,path:e.path||this.path,forceJSONP:e.forceJSONP||this.forceJSONP,jsonp:e.jsonp||this.jsonp,forceBase64:e.forceBase64||this.forceBase64,enablesXDR:e.enablesXDR||this.enablesXDR,withCredentials:e.withCredentials||this.withCredentials,timestampRequests:e.timestampRequests||this.timestampRequests,timestampParam:e.timestampParam||this.timestampParam,policyPort:e.policyPort||this.policyPort,pfx:e.pfx||this.pfx,key:e.key||this.key,passphrase:e.passphrase||this.passphrase,cert:e.cert||this.cert,ca:e.ca||this.ca,ciphers:e.ciphers||this.ciphers,rejectUnauthorized:e.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:e.perMessageDeflate||this.perMessageDeflate,extraHeaders:e.extraHeaders||this.extraHeaders,forceNode:e.forceNode||this.forceNode,localAddress:e.localAddress||this.localAddress,requestTimeout:e.requestTimeout||this.requestTimeout,protocols:e.protocols||void 0,isReactNative:this.isReactNative});return n};function clone(t){var r={};for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}Socket$1.prototype.open=function(){var t;if(this.rememberUpgrade&&Socket$1.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else if(this.transports.length===0){var r=this;setTimeout(function(){r.emit("error","No transports available")},0);return}else t=this.transports[0];this.readyState="opening";try{t=this.createTransport(t)}catch{this.transports.shift(),this.open();return}t.open(),this.setTransport(t)};Socket$1.prototype.setTransport=function(t){debug$1("setting transport %s",t.name);var r=this;this.transport&&(debug$1("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){r.onDrain()}).on("packet",function(e){r.onPacket(e)}).on("error",function(e){r.onError(e)}).on("close",function(){r.onClose("transport close")})};Socket$1.prototype.probe=function(t){debug$1('probing transport "%s"',t);var r=this.createTransport(t,{probe:1}),e=!1,n=this;Socket$1.priorWebsocketSuccess=!1;function o(){if(n.onlyBinaryUpgrades){var v=!this.supportsBinary&&n.transport.supportsBinary;e=e||v}e||(debug$1('probe transport "%s" opened',t),r.send([{type:"ping",data:"probe"}]),r.once("packet",function(b){if(!e)if(b.type==="pong"&&b.data==="probe"){if(debug$1('probe transport "%s" pong',t),n.upgrading=!0,n.emit("upgrading",r),!r)return;Socket$1.priorWebsocketSuccess=r.name==="websocket",debug$1('pausing current transport "%s"',n.transport.name),n.transport.pause(function(){e||n.readyState!=="closed"&&(debug$1("changing transport and sending upgrade packet"),g(),n.setTransport(r),r.send([{type:"upgrade"}]),n.emit("upgrade",r),r=null,n.upgrading=!1,n.flush())})}else{debug$1('probe transport "%s" failed',t);var S=new Error("probe error");S.transport=r.name,n.emit("upgradeError",S)}}))}function a(){e||(e=!0,g(),r.close(),r=null)}function c(v){var b=new Error("probe error: "+v);b.transport=r.name,a(),debug$1('probe transport "%s" failed because of error: %s',t,v),n.emit("upgradeError",b)}function u(){c("transport closed")}function l(){c("socket closed")}function f(v){r&&v.name!==r.name&&(debug$1('"%s" works - aborting "%s"',v.name,r.name),a())}function g(){r.removeListener("open",o),r.removeListener("error",c),r.removeListener("close",u),n.removeListener("close",l),n.removeListener("upgrading",f)}r.once("open",o),r.once("error",c),r.once("close",u),this.once("close",l),this.once("upgrading",f),r.open()};Socket$1.prototype.onOpen=function(){if(debug$1("socket open"),this.readyState="open",Socket$1.priorWebsocketSuccess=this.transport.name==="websocket",this.emit("open"),this.flush(),this.readyState==="open"&&this.upgrade&&this.transport.pause){debug$1("starting upgrade probes");for(var t=0,r=this.upgrades.length;t<r;t++)this.probe(this.upgrades[t])}};Socket$1.prototype.onPacket=function(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(debug$1('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var r=new Error("server error");r.code=t.data,this.onError(r);break;case"message":this.emit("data",t.data),this.emit("message",t.data);break}else debug$1('packet received with socket readyState "%s"',this.readyState)};Socket$1.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),this.readyState!=="closed"&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))};Socket$1.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var r=this;r.pingTimeoutTimer=setTimeout(function(){r.readyState!=="closed"&&r.onClose("ping timeout")},t||r.pingInterval+r.pingTimeout)};Socket$1.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){debug$1("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)};Socket$1.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})};Socket$1.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emit("drain"):this.flush()};Socket$1.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug$1("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))};Socket$1.prototype.write=Socket$1.prototype.send=function(t,r,e){return this.sendPacket("message",t,r,e),this};Socket$1.prototype.sendPacket=function(t,r,e,n){if(typeof r=="function"&&(n=r,r=void 0),typeof e=="function"&&(n=e,e=null),!(this.readyState==="closing"||this.readyState==="closed")){e=e||{},e.compress=e.compress!==!1;var o={type:t,data:r,options:e};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}};Socket$1.prototype.close=function(){if(this.readyState==="opening"||this.readyState==="open"){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():r()}):this.upgrading?n():r()}function r(){t.onClose("forced close"),debug$1("socket closing - telling transport to close"),t.transport.close()}function e(){t.removeListener("upgrade",e),t.removeListener("upgradeError",e),r()}function n(){t.once("upgrade",e),t.once("upgradeError",e)}return this};Socket$1.prototype.onError=function(t){debug$1("socket error %j",t),Socket$1.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)};Socket$1.prototype.onClose=function(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){debug$1('socket close with reason: "%s"',t);var e=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,r),e.writeBuffer=[],e.prevBufferLen=0}};Socket$1.prototype.filterUpgrades=function(t){for(var r=[],e=0,n=t.length;e<n;e++)~index(this.transports,t[e])&&r.push(t[e]);return r};(function(t){t.exports=socket$1,t.exports.parser=browser})(lib$1);var socketExports={},socket={get exports(){return socketExports},set exports(t){socketExports=t}},componentEmitterExports={},componentEmitter={get exports(){return componentEmitterExports},set exports(t){componentEmitterExports=t}};(function(t){t.exports=r;function r(n){if(n)return e(n)}function e(n){for(var o in r.prototype)n[o]=r.prototype[o];return n}r.prototype.on=r.prototype.addEventListener=function(n,o){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(o),this},r.prototype.once=function(n,o){function a(){this.off(n,a),o.apply(this,arguments)}return a.fn=o,this.on(n,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(n,o){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var a=this._callbacks["$"+n];if(!a)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var c,u=0;u<a.length;u++)if(c=a[u],c===o||c.fn===o){a.splice(u,1);break}return this},r.prototype.emit=function(n){this._callbacks=this._callbacks||{};var o=[].slice.call(arguments,1),a=this._callbacks["$"+n];if(a){a=a.slice(0);for(var c=0,u=a.length;c<u;++c)a[c].apply(this,o)}return this},r.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},r.prototype.hasListeners=function(n){return!!this.listeners(n).length}})(componentEmitter);var toArray_1,hasRequiredToArray;function requireToArray(){if(hasRequiredToArray)return toArray_1;hasRequiredToArray=1,toArray_1=t;function t(r,e){var n=[];e=e||0;for(var o=e||0;o<r.length;o++)n[o-e]=r[o];return n}return toArray_1}var on_1=on$1;function on$1(t,r,e){return t.on(r,e),{destroy:function(){t.removeListener(r,e)}}}var slice=[].slice,componentBind=function(t,r){if(typeof r=="string"&&(r=t[r]),typeof r!="function")throw new Error("bind() requires a function");var e=slice.call(arguments,2);return function(){return r.apply(t,e.concat(slice.call(arguments)))}},parseqs={},hasRequiredParseqs;function requireParseqs(){return hasRequiredParseqs||(hasRequiredParseqs=1,parseqs.encode=function(t){var r="";for(var e in t)t.hasOwnProperty(e)&&(r.length&&(r+="&"),r+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r},parseqs.decode=function(t){for(var r={},e=t.split("&"),n=0,o=e.length;n<o;n++){var a=e[n].split("=");r[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return r}),parseqs}var hasRequiredSocket;function requireSocket(){return hasRequiredSocket||(hasRequiredSocket=1,function(t,r){var e=socket_ioParser,n=componentEmitterExports,o=requireToArray(),a=on_1,c=componentBind,u=browserExports$1("socket.io-client:socket"),l=requireParseqs(),f=requireHasBinary2();t.exports=b;var g={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},v=n.prototype.emit;function b(S,C,O){this.io=S,this.nsp=C,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},O&&O.query&&(this.query=O.query),this.io.autoConnect&&this.open()}n(b.prototype),b.prototype.subEvents=function(){if(!this.subs){var S=this.io;this.subs=[a(S,"open",c(this,"onopen")),a(S,"packet",c(this,"onpacket")),a(S,"close",c(this,"onclose"))]}},b.prototype.open=b.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),this.io.readyState==="open"&&this.onopen(),this.emit("connecting"),this)},b.prototype.send=function(){var S=o(arguments);return S.unshift("message"),this.emit.apply(this,S),this},b.prototype.emit=function(S){if(g.hasOwnProperty(S))return v.apply(this,arguments),this;var C=o(arguments),O={type:(this.flags.binary!==void 0?this.flags.binary:f(C))?e.BINARY_EVENT:e.EVENT,data:C};return O.options={},O.options.compress=!this.flags||this.flags.compress!==!1,typeof C[C.length-1]=="function"&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=C.pop(),O.id=this.ids++),this.connected?this.packet(O):this.sendBuffer.push(O),this.flags={},this},b.prototype.packet=function(S){S.nsp=this.nsp,this.io.packet(S)},b.prototype.onopen=function(){if(u("transport is open - connecting"),this.nsp!=="/")if(this.query){var S=typeof this.query=="object"?l.encode(this.query):this.query;u("sending connect packet with query %s",S),this.packet({type:e.CONNECT,query:S})}else this.packet({type:e.CONNECT})},b.prototype.onclose=function(S){u("close (%s)",S),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",S)},b.prototype.onpacket=function(S){var C=S.nsp===this.nsp,O=S.type===e.ERROR&&S.nsp==="/";if(!(!C&&!O))switch(S.type){case e.CONNECT:this.onconnect();break;case e.EVENT:this.onevent(S);break;case e.BINARY_EVENT:this.onevent(S);break;case e.ACK:this.onack(S);break;case e.BINARY_ACK:this.onack(S);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",S.data);break}},b.prototype.onevent=function(S){var C=S.data||[];u("emitting event %j",C),S.id!=null&&(u("attaching ack callback to event"),C.push(this.ack(S.id))),this.connected?v.apply(this,C):this.receiveBuffer.push(C)},b.prototype.ack=function(S){var C=this,O=!1;return function(){if(!O){O=!0;var A=o(arguments);u("sending ack %j",A),C.packet({type:f(A)?e.BINARY_ACK:e.ACK,id:S,data:A})}}},b.prototype.onack=function(S){var C=this.acks[S.id];typeof C=="function"?(u("calling ack %s with %j",S.id,S.data),C.apply(this,S.data),delete this.acks[S.id]):u("bad ack %s",S.id)},b.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},b.prototype.emitBuffered=function(){var S;for(S=0;S<this.receiveBuffer.length;S++)v.apply(this,this.receiveBuffer[S]);for(this.receiveBuffer=[],S=0;S<this.sendBuffer.length;S++)this.packet(this.sendBuffer[S]);this.sendBuffer=[]},b.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},b.prototype.destroy=function(){if(this.subs){for(var S=0;S<this.subs.length;S++)this.subs[S].destroy();this.subs=null}this.io.destroy(this)},b.prototype.close=b.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},b.prototype.compress=function(S){return this.flags.compress=S,this},b.prototype.binary=function(S){return this.flags.binary=S,this}}(socket)),socketExports}var backo2=Backoff$1;function Backoff$1(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Backoff$1.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),e=Math.floor(r*this.jitter*t);t=Math.floor(r*10)&1?t+e:t-e}return Math.min(t,this.max)|0};Backoff$1.prototype.reset=function(){this.attempts=0};Backoff$1.prototype.setMin=function(t){this.ms=t};Backoff$1.prototype.setMax=function(t){this.max=t};Backoff$1.prototype.setJitter=function(t){this.jitter=t};var eio=libExports,Socket=requireSocket(),Emitter=componentEmitterExports,parser=socket_ioParser,on=on_1,bind$1=componentBind,debug=browserExports$1("socket.io-client:manager"),indexOf=indexof,Backoff=backo2,has$2=Object.prototype.hasOwnProperty,manager=Manager;function Manager(t,r){if(!(this instanceof Manager))return new Manager(t,r);t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.nsps={},this.subs=[],this.opts=r,this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor(r.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var e=r.parser||parser;this.encoder=new e.Encoder,this.decoder=new e.Decoder,this.autoConnect=r.autoConnect!==!1,this.autoConnect&&this.open()}Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)has$2.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)};Manager.prototype.updateSocketIds=function(){for(var t in this.nsps)has$2.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))};Manager.prototype.generateId=function(t){return(t==="/"?"":t+"#")+this.engine.id};Emitter(Manager.prototype);Manager.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection};Manager.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts};Manager.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay};Manager.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor};Manager.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax};Manager.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout};Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()};Manager.prototype.open=Manager.prototype.connect=function(t,r){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=on(e,"open",function(){n.onopen(),t&&t()}),a=on(e,"error",function(l){if(debug("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",l),t){var f=new Error("Connection error");f.data=l,t(f)}else n.maybeReconnectOnOpen()});if(this._timeout!==!1){var c=this._timeout;debug("connect attempt will timeout after %d",c);var u=setTimeout(function(){debug("connect attempt timed out after %d",c),o.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",c)},c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(a),this};Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(on(t,"data",bind$1(this,"ondata"))),this.subs.push(on(t,"ping",bind$1(this,"onping"))),this.subs.push(on(t,"pong",bind$1(this,"onpong"))),this.subs.push(on(t,"error",bind$1(this,"onerror"))),this.subs.push(on(t,"close",bind$1(this,"onclose"))),this.subs.push(on(this.decoder,"decoded",bind$1(this,"ondecoded")))};Manager.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")};Manager.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)};Manager.prototype.ondata=function(t){this.decoder.add(t)};Manager.prototype.ondecoded=function(t){this.emit("packet",t)};Manager.prototype.onerror=function(t){debug("error",t),this.emitAll("error",t)};Manager.prototype.socket=function(t,r){var e=this.nsps[t];if(!e){e=new Socket(this,t,r),this.nsps[t]=e;var n=this;e.on("connecting",o),e.on("connect",function(){e.id=n.generateId(t)}),this.autoConnect&&o()}function o(){~indexOf(n.connecting,e)||n.connecting.push(e)}return e};Manager.prototype.destroy=function(t){var r=indexOf(this.connecting,t);~r&&this.connecting.splice(r,1),!this.connecting.length&&this.close()};Manager.prototype.packet=function(t){debug("writing packet %j",t);var r=this;t.query&&t.type===0&&(t.nsp+="?"+t.query),r.encoding?r.packetBuffer.push(t):(r.encoding=!0,this.encoder.encode(t,function(e){for(var n=0;n<e.length;n++)r.engine.write(e[n],t.options);r.encoding=!1,r.processPacketQueue()}))};Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}};Manager.prototype.cleanup=function(){debug("cleanup");for(var t=this.subs.length,r=0;r<t;r++){var e=this.subs.shift();e.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()};Manager.prototype.close=Manager.prototype.disconnect=function(){debug("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,this.readyState==="opening"&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()};Manager.prototype.onclose=function(t){debug("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()};Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var r=this.backoff.duration();debug("will wait %dms before reconnect attempt",r),this.reconnecting=!0;var e=setTimeout(function(){t.skipReconnect||(debug("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),!t.skipReconnect&&t.open(function(n){n?(debug("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",n.data)):(debug("reconnect success"),t.onreconnect())}))},r);this.subs.push({destroy:function(){clearTimeout(e)}})}};Manager.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)};(function(t,r){var e=url_1,n=socket_ioParser,o=manager,a=browserExports$1("socket.io-client");t.exports=r=u;var c=r.managers={};function u(l,f){typeof l=="object"&&(f=l,l=void 0),f=f||{};var g=e(l),v=g.source,b=g.id,S=g.path,C=c[b]&&S in c[b].nsps,O=f.forceNew||f["force new connection"]||f.multiplex===!1||C,A;return O?(a("ignoring socket cache for %s",v),A=o(v,f)):(c[b]||(a("new io instance for %s",v),c[b]=o(v,f)),A=c[b]),g.query&&!f.query&&(f.query=g.query),A.socket(g.path,f)}r.protocol=n.protocol,r.connect=u,r.Manager=manager,r.Socket=requireSocket()})(lib$2,libExports$1);const lib=libExports$1,__require2import__1__=_mergeNamespaces({__proto__:null,default:lib},[libExports$1]);function makeMap(t,r){const e=Object.create(null),n=t.split(",");for(let o=0;o<n.length;o++)e[n[o]]=!0;return r?o=>!!e[o.toLowerCase()]:o=>!!e[o]}function normalizeStyle(t){if(isArray$2(t)){const r={};for(let e=0;e<t.length;e++){const n=t[e],o=isString$2(n)?parseStringStyle(n):normalizeStyle(n);if(o)for(const a in o)r[a]=o[a]}return r}else{if(isString$2(t))return t;if(isObject$2(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(t){const r={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(r[n[0].trim()]=n[1].trim())}}),r}function normalizeClass(t){let r="";if(isString$2(t))r=t;else if(isArray$2(t))for(let e=0;e<t.length;e++){const n=normalizeClass(t[e]);n&&(r+=n+" ")}else if(isObject$2(t))for(const e in t)t[e]&&(r+=e+" ");return r.trim()}function normalizeProps(t){if(!t)return null;let{class:r,style:e}=t;return r&&!isString$2(r)&&(t.class=normalizeClass(r)),e&&(t.style=normalizeStyle(e)),t}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}function looseCompareArrays(t,r){if(t.length!==r.length)return!1;let e=!0;for(let n=0;e&&n<t.length;n++)e=looseEqual(t[n],r[n]);return e}function looseEqual(t,r){if(t===r)return!0;let e=isDate$1(t),n=isDate$1(r);if(e||n)return e&&n?t.getTime()===r.getTime():!1;if(e=isSymbol(t),n=isSymbol(r),e||n)return t===r;if(e=isArray$2(t),n=isArray$2(r),e||n)return e&&n?looseCompareArrays(t,r):!1;if(e=isObject$2(t),n=isObject$2(r),e||n){if(!e||!n)return!1;const o=Object.keys(t).length,a=Object.keys(r).length;if(o!==a)return!1;for(const c in t){const u=t.hasOwnProperty(c),l=r.hasOwnProperty(c);if(u&&!l||!u&&l||!looseEqual(t[c],r[c]))return!1}}return String(t)===String(r)}function looseIndexOf(t,r){return t.findIndex(e=>looseEqual(e,r))}const toDisplayString=t=>isString$2(t)?t:t==null?"":isArray$2(t)||isObject$2(t)&&(t.toString===objectToString||!isFunction$1(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,r)=>r&&r.__v_isRef?replacer(t,r.value):isMap(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((e,[n,o])=>(e[`${n} =>`]=o,e),{})}:isSet(r)?{[`Set(${r.size})`]:[...r.values()]}:isObject$2(r)&&!isArray$2(r)&&!isPlainObject$2(r)?String(r):r,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend$2=Object.assign,remove$3=(t,r)=>{const e=t.indexOf(r);e>-1&&t.splice(e,1)},hasOwnProperty$2=Object.prototype.hasOwnProperty,hasOwn=(t,r)=>hasOwnProperty$2.call(t,r),isArray$2=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isDate$1=t=>toTypeString(t)==="[object Date]",isFunction$1=t=>typeof t=="function",isString$2=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject$2=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$2(t)&&isFunction$1(t.then)&&isFunction$1(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject$2=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString$2(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const r=Object.create(null);return e=>r[e]||(r[e]=t(e))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(r,e)=>e?e.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,r)=>!Object.is(t,r),invokeArrayFns=(t,r)=>{for(let e=0;e<t.length;e++)t[e](r)},def=(t,r,e)=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value:e})},toNumber=t=>{const r=parseFloat(t);return isNaN(r)?t:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(r){if(this.active){const e=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=e}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this.active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!r){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this.active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,r=activeEffectScope){r&&r.active&&r.effects.push(t)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}const createDep=t=>{const r=new Set(t);return r.w=0,r.n=0,r},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let r=0;r<t.length;r++)t[r].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:r}=t;if(r.length){let e=0;for(let n=0;n<r.length;n++){const o=r[n];wasTracked(o)&&!newTracked(o)?o.delete(t):r[e++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}r.length=e}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(r,e=null,n){this.fn=r,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let r=activeEffect,e=shouldTrack;for(;r;){if(r===this)return;r=r.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:r}=t;if(r.length){for(let e=0;e<r.length;e++)r[e].delete(t);r.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,r,e){if(shouldTrack&&activeEffect){let n=targetMap.get(t);n||targetMap.set(t,n=new Map);let o=n.get(e);o||n.set(e,o=createDep()),trackEffects(o)}}function trackEffects(t,r){let e=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,e=!wasTracked(t)):e=!t.has(activeEffect),e&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,r,e,n,o,a){const c=targetMap.get(t);if(!c)return;let u=[];if(r==="clear")u=[...c.values()];else if(e==="length"&&isArray$2(t)){const l=toNumber(n);c.forEach((f,g)=>{(g==="length"||g>=l)&&u.push(f)})}else switch(e!==void 0&&u.push(c.get(e)),r){case"add":isArray$2(t)?isIntegerKey(e)&&u.push(c.get("length")):(u.push(c.get(ITERATE_KEY)),isMap(t)&&u.push(c.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$2(t)||(u.push(c.get(ITERATE_KEY)),isMap(t)&&u.push(c.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&u.push(c.get(ITERATE_KEY));break}if(u.length===1)u[0]&&triggerEffects(u[0]);else{const l=[];for(const f of u)f&&l.push(...f);triggerEffects(createDep(l))}}function triggerEffects(t,r){const e=isArray$2(t)?t:[...t];for(const n of e)n.computed&&triggerEffect(n);for(const n of e)n.computed||triggerEffect(n)}function triggerEffect(t,r){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get$3=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(r=>{t[r]=function(...e){const n=toRaw(this);for(let a=0,c=this.length;a<c;a++)track(n,"get",a+"");const o=n[r](...e);return o===-1||o===!1?n[r](...e.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(r=>{t[r]=function(...e){pauseTracking();const n=toRaw(this)[r].apply(this,e);return resetTracking(),n}}),t}function createGetter(t=!1,r=!1){return function(n,o,a){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return r;if(o==="__v_raw"&&a===(t?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(n))return n;const c=isArray$2(n);if(!t&&c&&hasOwn(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,a);const u=Reflect.get(n,o,a);return(isSymbol(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(t||track(n,"get",o),r)?u:isRef(u)?c&&isIntegerKey(o)?u:u.value:isObject$2(u)?t?readonly(u):reactive(u):u}}const set$3=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(e,n,o,a){let c=e[n];if(isReadonly(c)&&isRef(c)&&!isRef(o))return!1;if(!t&&(!isShallow(o)&&!isReadonly(o)&&(c=toRaw(c),o=toRaw(o)),!isArray$2(e)&&isRef(c)&&!isRef(o)))return c.value=o,!0;const u=isArray$2(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn(e,n),l=Reflect.set(e,n,o,a);return e===toRaw(a)&&(u?hasChanged(o,c)&&trigger(e,"set",n,o):trigger(e,"add",n,o)),l}}function deleteProperty(t,r){const e=hasOwn(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&e&&trigger(t,"delete",r,void 0),n}function has(t,r){const e=Reflect.has(t,r);return(!isSymbol(r)||!builtInSymbols.has(r))&&track(t,"has",r),e}function ownKeys$1(t){return track(t,"iterate",isArray$2(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$3,set:set$3,deleteProperty,has,ownKeys:ownKeys$1},readonlyHandlers={get:readonlyGet,set(t,r){return!0},deleteProperty(t,r){return!0}},shallowReactiveHandlers=extend$2({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1$1(t,r,e=!1,n=!1){t=t.__v_raw;const o=toRaw(t),a=toRaw(r);e||(r!==a&&track(o,"get",r),track(o,"get",a));const{has:c}=getProto(o),u=n?toShallow:e?toReadonly:toReactive;if(c.call(o,r))return u(t.get(r));if(c.call(o,a))return u(t.get(a));t!==o&&t.get(r)}function has$1(t,r=!1){const e=this.__v_raw,n=toRaw(e),o=toRaw(t);return r||(t!==o&&track(n,"has",t),track(n,"has",o)),t===o?e.has(t):e.has(t)||e.has(o)}function size(t,r=!1){return t=t.__v_raw,!r&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const r=toRaw(this);return getProto(r).has.call(r,t)||(r.add(t),trigger(r,"add",t,t)),this}function set$1$1(t,r){r=toRaw(r);const e=toRaw(this),{has:n,get:o}=getProto(e);let a=n.call(e,t);a||(t=toRaw(t),a=n.call(e,t));const c=o.call(e,t);return e.set(t,r),a?hasChanged(r,c)&&trigger(e,"set",t,r):trigger(e,"add",t,r),this}function deleteEntry(t){const r=toRaw(this),{has:e,get:n}=getProto(r);let o=e.call(r,t);o||(t=toRaw(t),o=e.call(r,t)),n&&n.call(r,t);const a=r.delete(t);return o&&trigger(r,"delete",t,void 0),a}function clear(){const t=toRaw(this),r=t.size!==0,e=t.clear();return r&&trigger(t,"clear",void 0,void 0),e}function createForEach(t,r){return function(n,o){const a=this,c=a.__v_raw,u=toRaw(c),l=r?toShallow:t?toReadonly:toReactive;return!t&&track(u,"iterate",ITERATE_KEY),c.forEach((f,g)=>n.call(o,l(f),l(g),a))}}function createIterableMethod(t,r,e){return function(...n){const o=this.__v_raw,a=toRaw(o),c=isMap(a),u=t==="entries"||t===Symbol.iterator&&c,l=t==="keys"&&c,f=o[t](...n),g=e?toShallow:r?toReadonly:toReactive;return!r&&track(a,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:v,done:b}=f.next();return b?{value:v,done:b}:{value:u?[g(v[0]),g(v[1])]:g(v),done:b}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...r){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(a){return get$1$1(this,a)},get size(){return size(this)},has:has$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},r={get(a){return get$1$1(this,a,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},e={get(a){return get$1$1(this,a,!0)},get size(){return size(this,!0)},has(a){return has$1.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(a){return get$1$1(this,a,!0,!0)},get size(){return size(this,!0)},has(a){return has$1.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{t[a]=createIterableMethod(a,!1,!1),e[a]=createIterableMethod(a,!0,!1),r[a]=createIterableMethod(a,!1,!0),n[a]=createIterableMethod(a,!0,!0)}),[t,e,r,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,r){const e=r?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(n,o,a)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?n:Reflect.get(hasOwn(e,o)&&o in n?e:n,o,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,r,e,n,o){if(!isObject$2(t)||t.__v_raw&&!(r&&t.__v_isReactive))return t;const a=o.get(t);if(a)return a;const c=getTargetType(t);if(c===0)return t;const u=new Proxy(t,c===2?n:e);return o.set(t,u),u}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const r=t&&t.__v_raw;return r?toRaw(r):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$2(t)?reactive(t):t,toReadonly=t=>isObject$2(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,r){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,r){return isRef(t)?t:new RefImpl(t,r)}class RefImpl{constructor(r,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?r:toRaw(r),this._value=e?r:toReactive(r)}get value(){return trackRefValue(this),this._value}set value(r){const e=this.__v_isShallow||isShallow(r)||isReadonly(r);r=e?r:toRaw(r),hasChanged(r,this._rawValue)&&(this._rawValue=r,this._value=e?r:toReactive(r),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,r,e)=>unref(Reflect.get(t,r,e)),set:(t,r,e,n)=>{const o=t[r];return isRef(o)&&!isRef(e)?(o.value=e,!0):Reflect.set(t,r,e,n)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const r=isArray$2(t)?new Array(t.length):{};for(const e in t)r[e]=toRef(t,e);return r}class ObjectRefImpl{constructor(r,e,n){this._object=r,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const r=this._object[this._key];return r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}}function toRef(t,r,e){const n=t[r];return isRef(n)?n:new ObjectRefImpl(t,r,e)}var _a$1;class ComputedRefImpl{constructor(r,e,n,o){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(r,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=n}get value(){const r=toRaw(this);return trackRefValue(r),(r._dirty||!r._cacheable)&&(r._dirty=!1,r._value=r.effect.run()),r._value}set value(r){this._setter(r)}}_a$1="__v_isReadonly";function computed$1(t,r,e=!1){let n,o;const a=isFunction$1(t);return a?(n=t,o=NOOP):(n=t.get,o=t.set),new ComputedRefImpl(n,o,a||!o,e)}function warn(t,...r){}function callWithErrorHandling(t,r,e,n){let o;try{o=n?t(...n):t()}catch(a){handleError(a,r,e)}return o}function callWithAsyncErrorHandling(t,r,e,n){if(isFunction$1(t)){const a=callWithErrorHandling(t,r,e,n);return a&&isPromise(a)&&a.catch(c=>{handleError(c,r,e)}),a}const o=[];for(let a=0;a<t.length;a++)o.push(callWithAsyncErrorHandling(t[a],r,e,n));return o}function handleError(t,r,e,n=!0){const o=r?r.vnode:null;if(r){let a=r.parent;const c=r.proxy,u=e;for(;a;){const f=a.ec;if(f){for(let g=0;g<f.length;g++)if(f[g](t,c,u)===!1)return}a=a.parent}const l=r.appContext.config.errorHandler;if(l){callWithErrorHandling(l,null,10,[t,c,u]);return}}logError(t,e,o,n)}function logError(t,r,e,n=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const r=currentFlushPromise||resolvedPromise;return t?r.then(this?t.bind(this):t):r}function findInsertionIndex(t){let r=flushIndex+1,e=queue.length;for(;r<e;){const n=r+e>>>1;getId(queue[n])<t?r=n+1:e=n}return r}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const r=queue.indexOf(t);r>flushIndex&&queue.splice(r,1)}function queuePostFlushCb(t){isArray$2(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,r=isFlushing?flushIndex+1:0){for(;r<queue.length;r++){const e=queue[r];e&&e.pre&&(queue.splice(r,1),r--,e())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,activePostFlushCbs.sort((e,n)=>getId(e)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,r)=>{const e=getId(t)-getId(r);if(e===0){if(t.pre&&!r.pre)return-1;if(r.pre&&!t.pre)return 1}return e};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const r=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,r,...e){if(t.isUnmounted)return;const n=t.vnode.props||EMPTY_OBJ;let o=e;const a=r.startsWith("update:"),c=a&&r.slice(7);if(c&&c in n){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:v,trim:b}=n[g]||EMPTY_OBJ;b&&(o=e.map(S=>isString$2(S)?S.trim():S)),v&&(o=e.map(toNumber))}let u,l=n[u=toHandlerKey(r)]||n[u=toHandlerKey(camelize(r))];!l&&a&&(l=n[u=toHandlerKey(hyphenate(r))]),l&&callWithAsyncErrorHandling(l,t,6,o);const f=n[u+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,callWithAsyncErrorHandling(f,t,6,o)}}function normalizeEmitsOptions(t,r,e=!1){const n=r.emitsCache,o=n.get(t);if(o!==void 0)return o;const a=t.emits;let c={},u=!1;if(!isFunction$1(t)){const l=f=>{const g=normalizeEmitsOptions(f,r,!0);g&&(u=!0,extend$2(c,g))};!e&&r.mixins.length&&r.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!a&&!u?(isObject$2(t)&&n.set(t,null),null):(isArray$2(a)?a.forEach(l=>c[l]=null):extend$2(c,a),isObject$2(t)&&n.set(t,c),c)}function isEmitListener(t,r){return!t||!isOn(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(t,r[0].toLowerCase()+r.slice(1))||hasOwn(t,hyphenate(r))||hasOwn(t,r))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const r=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,r}function pushScopeId(t){currentScopeId=t}function popScopeId(){currentScopeId=null}function withCtx(t,r=currentRenderingInstance,e){if(!r||t._n)return t;const n=(...o)=>{n._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(r);let c;try{c=t(...o)}finally{setCurrentRenderingInstance(a),n._d&&setBlockTracking(1)}return c};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:r,vnode:e,proxy:n,withProxy:o,props:a,propsOptions:[c],slots:u,attrs:l,emit:f,render:g,renderCache:v,data:b,setupState:S,ctx:C,inheritAttrs:O}=t;let A,w;const V=setCurrentRenderingInstance(t);try{if(e.shapeFlag&4){const M=o||n;A=normalizeVNode(g.call(M,M,v,a,S,b,C)),w=l}else{const M=r;A=normalizeVNode(M.length>1?M(a,{attrs:l,slots:u,emit:f}):M(a,null)),w=r.props?l:getFunctionalFallthrough(l)}}catch(M){blockStack.length=0,handleError(M,t,1),A=createVNode(Comment)}let k=A;if(w&&O!==!1){const M=Object.keys(w),{shapeFlag:W}=k;M.length&&W&7&&(c&&M.some(isModelListener)&&(w=filterModelListeners(w,c)),k=cloneVNode(k,w))}return e.dirs&&(k=cloneVNode(k),k.dirs=k.dirs?k.dirs.concat(e.dirs):e.dirs),e.transition&&(k.transition=e.transition),A=k,setCurrentRenderingInstance(V),A}const getFunctionalFallthrough=t=>{let r;for(const e in t)(e==="class"||e==="style"||isOn(e))&&((r||(r={}))[e]=t[e]);return r},filterModelListeners=(t,r)=>{const e={};for(const n in t)(!isModelListener(n)||!(n.slice(9)in r))&&(e[n]=t[n]);return e};function shouldUpdateComponent(t,r,e){const{props:n,children:o,component:a}=t,{props:c,children:u,patchFlag:l}=r,f=a.emitsOptions;if(r.dirs||r.transition)return!0;if(e&&l>=0){if(l&1024)return!0;if(l&16)return n?hasPropsChanged(n,c,f):!!c;if(l&8){const g=r.dynamicProps;for(let v=0;v<g.length;v++){const b=g[v];if(c[b]!==n[b]&&!isEmitListener(f,b))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:n===c?!1:n?c?hasPropsChanged(n,c,f):!0:!!c;return!1}function hasPropsChanged(t,r,e){const n=Object.keys(r);if(n.length!==Object.keys(t).length)return!0;for(let o=0;o<n.length;o++){const a=n[o];if(r[a]!==t[a]&&!isEmitListener(e,a))return!0}return!1}function updateHOCHostEl({vnode:t,parent:r},e){for(;r&&r.subTree===t;)(t=r.vnode).el=e,r=r.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,r){r&&r.pendingBranch?isArray$2(t)?r.effects.push(...t):r.effects.push(t):queuePostFlushCb(t)}function provide(t,r){if(currentInstance){let e=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===e&&(e=currentInstance.provides=Object.create(n)),e[t]=r}}function inject(t,r,e=!1){const n=currentInstance||currentRenderingInstance;if(n){const o=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return e&&isFunction$1(r)?r.call(n.proxy):r}}const INITIAL_WATCHER_VALUE={};function watch(t,r,e){return doWatch(t,r,e)}function doWatch(t,r,{immediate:e,deep:n,flush:o,onTrack:a,onTrigger:c}=EMPTY_OBJ){const u=currentInstance;let l,f=!1,g=!1;if(isRef(t)?(l=()=>t.value,f=isShallow(t)):isReactive(t)?(l=()=>t,n=!0):isArray$2(t)?(g=!0,f=t.some(k=>isReactive(k)||isShallow(k)),l=()=>t.map(k=>{if(isRef(k))return k.value;if(isReactive(k))return traverse(k);if(isFunction$1(k))return callWithErrorHandling(k,u,2)})):isFunction$1(t)?r?l=()=>callWithErrorHandling(t,u,2):l=()=>{if(!(u&&u.isUnmounted))return v&&v(),callWithAsyncErrorHandling(t,u,3,[b])}:l=NOOP,r&&n){const k=l;l=()=>traverse(k())}let v,b=k=>{v=w.onStop=()=>{callWithErrorHandling(k,u,4)}},S;if(isInSSRComponentSetup)if(b=NOOP,r?e&&callWithAsyncErrorHandling(r,u,3,[l(),g?[]:void 0,b]):l(),o==="sync"){const k=useSSRContext();S=k.__watcherHandles||(k.__watcherHandles=[])}else return NOOP;let C=g?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const O=()=>{if(w.active)if(r){const k=w.run();(n||f||(g?k.some((M,W)=>hasChanged(M,C[W])):hasChanged(k,C)))&&(v&&v(),callWithAsyncErrorHandling(r,u,3,[k,C===INITIAL_WATCHER_VALUE?void 0:g&&C[0]===INITIAL_WATCHER_VALUE?[]:C,b]),C=k)}else w.run()};O.allowRecurse=!!r;let A;o==="sync"?A=O:o==="post"?A=()=>queuePostRenderEffect(O,u&&u.suspense):(O.pre=!0,u&&(O.id=u.uid),A=()=>queueJob(O));const w=new ReactiveEffect(l,A);r?e?O():C=w.run():o==="post"?queuePostRenderEffect(w.run.bind(w),u&&u.suspense):w.run();const V=()=>{w.stop(),u&&u.scope&&remove$3(u.scope.effects,w)};return S&&S.push(V),V}function instanceWatch(t,r,e){const n=this.proxy,o=isString$2(t)?t.includes(".")?createPathGetter(n,t):()=>n[t]:t.bind(n,n);let a;isFunction$1(r)?a=r:(a=r.handler,e=r);const c=currentInstance;setCurrentInstance(this);const u=doWatch(o,a.bind(n),e);return c?setCurrentInstance(c):unsetCurrentInstance(),u}function createPathGetter(t,r){const e=r.split(".");return()=>{let n=t;for(let o=0;o<e.length&&n;o++)n=n[e[o]];return n}}function traverse(t,r){if(!isObject$2(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),isRef(t))traverse(t.value,r);else if(isArray$2(t))for(let e=0;e<t.length;e++)traverse(t[e],r);else if(isSet(t)||isMap(t))t.forEach(e=>{traverse(e,r)});else if(isPlainObject$2(t))for(const e in t)traverse(t[e],r);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:r}){const e=getCurrentInstance(),n=useTransitionState();let o;return()=>{const a=r.default&&getTransitionRawChildren(r.default(),!0);if(!a||!a.length)return;let c=a[0];if(a.length>1){for(const O of a)if(O.type!==Comment){c=O;break}}const u=toRaw(t),{mode:l}=u;if(n.isLeaving)return emptyPlaceholder(c);const f=getKeepAliveChild(c);if(!f)return emptyPlaceholder(c);const g=resolveTransitionHooks(f,u,n,e);setTransitionHooks(f,g);const v=e.subTree,b=v&&getKeepAliveChild(v);let S=!1;const{getTransitionKey:C}=f.type;if(C){const O=C();o===void 0?o=O:O!==o&&(o=O,S=!0)}if(b&&b.type!==Comment&&(!isSameVNodeType(f,b)||S)){const O=resolveTransitionHooks(b,u,n,e);if(setTransitionHooks(b,O),l==="out-in")return n.isLeaving=!0,O.afterLeave=()=>{n.isLeaving=!1,e.update.active!==!1&&e.update()},emptyPlaceholder(c);l==="in-out"&&f.type!==Comment&&(O.delayLeave=(A,w,V)=>{const k=getLeavingNodesForType(n,b);k[String(b.key)]=b,A._leaveCb=()=>{w(),A._leaveCb=void 0,delete g.delayedLeave},g.delayedLeave=V})}return c}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,r){const{leavingVNodes:e}=t;let n=e.get(r.type);return n||(n=Object.create(null),e.set(r.type,n)),n}function resolveTransitionHooks(t,r,e,n){const{appear:o,mode:a,persisted:c=!1,onBeforeEnter:u,onEnter:l,onAfterEnter:f,onEnterCancelled:g,onBeforeLeave:v,onLeave:b,onAfterLeave:S,onLeaveCancelled:C,onBeforeAppear:O,onAppear:A,onAfterAppear:w,onAppearCancelled:V}=r,k=String(t.key),M=getLeavingNodesForType(e,t),W=(P,j)=>{P&&callWithAsyncErrorHandling(P,n,9,j)},Y=(P,j)=>{const _=j[1];W(P,j),isArray$2(P)?P.every(z=>z.length<=1)&&_():P.length<=1&&_()},H={mode:a,persisted:c,beforeEnter(P){let j=u;if(!e.isMounted)if(o)j=O||u;else return;P._leaveCb&&P._leaveCb(!0);const _=M[k];_&&isSameVNodeType(t,_)&&_.el._leaveCb&&_.el._leaveCb(),W(j,[P])},enter(P){let j=l,_=f,z=g;if(!e.isMounted)if(o)j=A||l,_=w||f,z=V||g;else return;let ae=!1;const me=P._enterCb=ye=>{ae||(ae=!0,ye?W(z,[P]):W(_,[P]),H.delayedLeave&&H.delayedLeave(),P._enterCb=void 0)};j?Y(j,[P,me]):me()},leave(P,j){const _=String(t.key);if(P._enterCb&&P._enterCb(!0),e.isUnmounting)return j();W(v,[P]);let z=!1;const ae=P._leaveCb=me=>{z||(z=!0,j(),me?W(C,[P]):W(S,[P]),P._leaveCb=void 0,M[_]===t&&delete M[_])};M[_]=t,b?Y(b,[P,ae]):ae()},clone(P){return resolveTransitionHooks(P,r,e,n)}};return H}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,r){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,r):t.shapeFlag&128?(t.ssContent.transition=r.clone(t.ssContent),t.ssFallback.transition=r.clone(t.ssFallback)):t.transition=r}function getTransitionRawChildren(t,r=!1,e){let n=[],o=0;for(let a=0;a<t.length;a++){let c=t[a];const u=e==null?c.key:String(e)+String(c.key!=null?c.key:a);c.type===Fragment?(c.patchFlag&128&&o++,n=n.concat(getTransitionRawChildren(c.children,r,u))):(r||c.type!==Comment)&&n.push(u!=null?cloneVNode(c,{key:u}):c)}if(o>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function defineComponent(t){return isFunction$1(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,r){registerKeepAliveHook(t,"a",r)}function onDeactivated(t,r){registerKeepAliveHook(t,"da",r)}function registerKeepAliveHook(t,r,e=currentInstance){const n=t.__wdc||(t.__wdc=()=>{let o=e;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(r,n,e),e){let o=e.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(n,r,e,o),o=o.parent}}function injectToKeepAliveRoot(t,r,e,n){const o=injectHook(r,t,n,!0);onUnmounted(()=>{remove$3(n[r],o)},e)}function injectHook(t,r,e=currentInstance,n=!1){if(e){const o=e[t]||(e[t]=[]),a=r.__weh||(r.__weh=(...c)=>{if(e.isUnmounted)return;pauseTracking(),setCurrentInstance(e);const u=callWithAsyncErrorHandling(r,e,t,c);return unsetCurrentInstance(),resetTracking(),u});return n?o.unshift(a):o.push(a),a}}const createHook=t=>(r,e=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...n)=>r(...n),e),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,r=currentInstance){injectHook("ec",t,r)}function withDirectives(t,r){const e=currentRenderingInstance;if(e===null)return t;const n=getExposeProxy(e)||e.proxy,o=t.dirs||(t.dirs=[]);for(let a=0;a<r.length;a++){let[c,u,l,f=EMPTY_OBJ]=r[a];c&&(isFunction$1(c)&&(c={mounted:c,updated:c}),c.deep&&traverse(u),o.push({dir:c,instance:n,value:u,oldValue:void 0,arg:l,modifiers:f}))}return t}function invokeDirectiveHook(t,r,e,n){const o=t.dirs,a=r&&r.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let l=u.dir[n];l&&(pauseTracking(),callWithAsyncErrorHandling(l,e,8,[t.el,u,t,r]),resetTracking())}}const COMPONENTS="components";function resolveComponent(t,r){return resolveAsset(COMPONENTS,t,!0,r)||t}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(t){return isString$2(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveAsset(t,r,e=!0,n=!1){const o=currentRenderingInstance||currentInstance;if(o){const a=o.type;if(t===COMPONENTS){const u=getComponentName(a,!1);if(u&&(u===r||u===camelize(r)||u===capitalize(camelize(r))))return a}const c=resolve(o[t]||a[t],r)||resolve(o.appContext[t],r);return!c&&n?a:c}}function resolve(t,r){return t&&(t[r]||t[camelize(r)]||t[capitalize(camelize(r))])}function renderList(t,r,e,n){let o;const a=e&&e[n];if(isArray$2(t)||isString$2(t)){o=new Array(t.length);for(let c=0,u=t.length;c<u;c++)o[c]=r(t[c],c,void 0,a&&a[c])}else if(typeof t=="number"){o=new Array(t);for(let c=0;c<t;c++)o[c]=r(c+1,c,void 0,a&&a[c])}else if(isObject$2(t))if(t[Symbol.iterator])o=Array.from(t,(c,u)=>r(c,u,void 0,a&&a[u]));else{const c=Object.keys(t);o=new Array(c.length);for(let u=0,l=c.length;u<l;u++){const f=c[u];o[u]=r(t[f],f,u,a&&a[u])}}else o=[];return e&&(e[n]=o),o}function createSlots(t,r){for(let e=0;e<r.length;e++){const n=r[e];if(isArray$2(n))for(let o=0;o<n.length;o++)t[n[o].name]=n[o].fn;else n&&(t[n.name]=n.key?(...o)=>{const a=n.fn(...o);return a&&(a.key=n.key),a}:n.fn)}return t}function renderSlot(t,r,e={},n,o){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return r!=="default"&&(e.name=r),createVNode("slot",e,n&&n());let a=t[r];a&&a._c&&(a._d=!1),openBlock();const c=a&&ensureValidVNode(a(e)),u=createBlock(Fragment,{key:e.key||c&&c.key||`_${r}`},c||(n?n():[]),c&&t._===1?64:-2);return!o&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),a&&a._c&&(a._d=!0),u}function ensureValidVNode(t){return t.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode(r.children)):!0)?t:null}function toHandlers(t,r){const e={};for(const n in t)e[r&&/[A-Z]/.test(n)?`on:${n}`:toHandlerKey(n)]=t[n];return e}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,r)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,r),PublicInstanceProxyHandlers={get({_:t},r){const{ctx:e,setupState:n,data:o,props:a,accessCache:c,type:u,appContext:l}=t;let f;if(r[0]!=="$"){const S=c[r];if(S!==void 0)switch(S){case 1:return n[r];case 2:return o[r];case 4:return e[r];case 3:return a[r]}else{if(hasSetupBinding(n,r))return c[r]=1,n[r];if(o!==EMPTY_OBJ&&hasOwn(o,r))return c[r]=2,o[r];if((f=t.propsOptions[0])&&hasOwn(f,r))return c[r]=3,a[r];if(e!==EMPTY_OBJ&&hasOwn(e,r))return c[r]=4,e[r];shouldCacheAccess&&(c[r]=0)}}const g=publicPropertiesMap[r];let v,b;if(g)return r==="$attrs"&&track(t,"get",r),g(t);if((v=u.__cssModules)&&(v=v[r]))return v;if(e!==EMPTY_OBJ&&hasOwn(e,r))return c[r]=4,e[r];if(b=l.config.globalProperties,hasOwn(b,r))return b[r]},set({_:t},r,e){const{data:n,setupState:o,ctx:a}=t;return hasSetupBinding(o,r)?(o[r]=e,!0):n!==EMPTY_OBJ&&hasOwn(n,r)?(n[r]=e,!0):hasOwn(t.props,r)||r[0]==="$"&&r.slice(1)in t?!1:(a[r]=e,!0)},has({_:{data:t,setupState:r,accessCache:e,ctx:n,appContext:o,propsOptions:a}},c){let u;return!!e[c]||t!==EMPTY_OBJ&&hasOwn(t,c)||hasSetupBinding(r,c)||(u=a[0])&&hasOwn(u,c)||hasOwn(n,c)||hasOwn(publicPropertiesMap,c)||hasOwn(o.config.globalProperties,c)},defineProperty(t,r,e){return e.get!=null?t._.accessCache[r]=0:hasOwn(e,"value")&&this.set(t,r,e.value,null),Reflect.defineProperty(t,r,e)}};let shouldCacheAccess=!0;function applyOptions(t){const r=resolveMergedOptions(t),e=t.proxy,n=t.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,t,"bc");const{data:o,computed:a,methods:c,watch:u,provide:l,inject:f,created:g,beforeMount:v,mounted:b,beforeUpdate:S,updated:C,activated:O,deactivated:A,beforeDestroy:w,beforeUnmount:V,destroyed:k,unmounted:M,render:W,renderTracked:Y,renderTriggered:H,errorCaptured:P,serverPrefetch:j,expose:_,inheritAttrs:z,components:ae,directives:me,filters:ye}=r;if(f&&resolveInjections(f,n,null,t.appContext.config.unwrapInjectedRef),c)for(const Ue in c){const _e=c[Ue];isFunction$1(_e)&&(n[Ue]=_e.bind(e))}if(o){const Ue=o.call(e,e);isObject$2(Ue)&&(t.data=reactive(Ue))}if(shouldCacheAccess=!0,a)for(const Ue in a){const _e=a[Ue],je=isFunction$1(_e)?_e.bind(e,e):isFunction$1(_e.get)?_e.get.bind(e,e):NOOP,Ke=!isFunction$1(_e)&&isFunction$1(_e.set)?_e.set.bind(e):NOOP,De=computed({get:je,set:Ke});Object.defineProperty(n,Ue,{enumerable:!0,configurable:!0,get:()=>De.value,set:Ze=>De.value=Ze})}if(u)for(const Ue in u)createWatcher(u[Ue],n,e,Ue);if(l){const Ue=isFunction$1(l)?l.call(e):l;Reflect.ownKeys(Ue).forEach(_e=>{provide(_e,Ue[_e])})}g&&callHook$1(g,t,"c");function Te(Ue,_e){isArray$2(_e)?_e.forEach(je=>Ue(je.bind(e))):_e&&Ue(_e.bind(e))}if(Te(onBeforeMount,v),Te(onMounted,b),Te(onBeforeUpdate,S),Te(onUpdated,C),Te(onActivated,O),Te(onDeactivated,A),Te(onErrorCaptured,P),Te(onRenderTracked,Y),Te(onRenderTriggered,H),Te(onBeforeUnmount,V),Te(onUnmounted,M),Te(onServerPrefetch,j),isArray$2(_))if(_.length){const Ue=t.exposed||(t.exposed={});_.forEach(_e=>{Object.defineProperty(Ue,_e,{get:()=>e[_e],set:je=>e[_e]=je})})}else t.exposed||(t.exposed={});W&&t.render===NOOP&&(t.render=W),z!=null&&(t.inheritAttrs=z),ae&&(t.components=ae),me&&(t.directives=me)}function resolveInjections(t,r,e=NOOP,n=!1){isArray$2(t)&&(t=normalizeInject(t));for(const o in t){const a=t[o];let c;isObject$2(a)?"default"in a?c=inject(a.from||o,a.default,!0):c=inject(a.from||o):c=inject(a),isRef(c)&&n?Object.defineProperty(r,o,{enumerable:!0,configurable:!0,get:()=>c.value,set:u=>c.value=u}):r[o]=c}}function callHook$1(t,r,e){callWithAsyncErrorHandling(isArray$2(t)?t.map(n=>n.bind(r.proxy)):t.bind(r.proxy),r,e)}function createWatcher(t,r,e,n){const o=n.includes(".")?createPathGetter(e,n):()=>e[n];if(isString$2(t)){const a=r[t];isFunction$1(a)&&watch(o,a)}else if(isFunction$1(t))watch(o,t.bind(e));else if(isObject$2(t))if(isArray$2(t))t.forEach(a=>createWatcher(a,r,e,n));else{const a=isFunction$1(t.handler)?t.handler.bind(e):r[t.handler];isFunction$1(a)&&watch(o,a,t)}}function resolveMergedOptions(t){const r=t.type,{mixins:e,extends:n}=r,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=t.appContext,u=a.get(r);let l;return u?l=u:!o.length&&!e&&!n?l=r:(l={},o.length&&o.forEach(f=>mergeOptions$1(l,f,c,!0)),mergeOptions$1(l,r,c)),isObject$2(r)&&a.set(r,l),l}function mergeOptions$1(t,r,e,n=!1){const{mixins:o,extends:a}=r;a&&mergeOptions$1(t,a,e,!0),o&&o.forEach(c=>mergeOptions$1(t,c,e,!0));for(const c in r)if(!(n&&c==="expose")){const u=internalOptionMergeStrats[c]||e&&e[c];t[c]=u?u(t[c],r[c]):r[c]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,r){return r?t?function(){return extend$2(isFunction$1(t)?t.call(this,this):t,isFunction$1(r)?r.call(this,this):r)}:r:t}function mergeInject(t,r){return mergeObjectOptions(normalizeInject(t),normalizeInject(r))}function normalizeInject(t){if(isArray$2(t)){const r={};for(let e=0;e<t.length;e++)r[t[e]]=t[e];return r}return t}function mergeAsArray(t,r){return t?[...new Set([].concat(t,r))]:r}function mergeObjectOptions(t,r){return t?extend$2(extend$2(Object.create(null),t),r):r}function mergeWatchOptions(t,r){if(!t)return r;if(!r)return t;const e=extend$2(Object.create(null),t);for(const n in r)e[n]=mergeAsArray(t[n],r[n]);return e}function initProps(t,r,e,n=!1){const o={},a={};def(a,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,r,o,a);for(const c in t.propsOptions[0])c in o||(o[c]=void 0);e?t.props=n?o:shallowReactive(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function updateProps(t,r,e,n){const{props:o,attrs:a,vnode:{patchFlag:c}}=t,u=toRaw(o),[l]=t.propsOptions;let f=!1;if((n||c>0)&&!(c&16)){if(c&8){const g=t.vnode.dynamicProps;for(let v=0;v<g.length;v++){let b=g[v];if(isEmitListener(t.emitsOptions,b))continue;const S=r[b];if(l)if(hasOwn(a,b))S!==a[b]&&(a[b]=S,f=!0);else{const C=camelize(b);o[C]=resolvePropValue(l,u,C,S,t,!1)}else S!==a[b]&&(a[b]=S,f=!0)}}}else{setFullProps(t,r,o,a)&&(f=!0);let g;for(const v in u)(!r||!hasOwn(r,v)&&((g=hyphenate(v))===v||!hasOwn(r,g)))&&(l?e&&(e[v]!==void 0||e[g]!==void 0)&&(o[v]=resolvePropValue(l,u,v,void 0,t,!0)):delete o[v]);if(a!==u)for(const v in a)(!r||!hasOwn(r,v))&&(delete a[v],f=!0)}f&&trigger(t,"set","$attrs")}function setFullProps(t,r,e,n){const[o,a]=t.propsOptions;let c=!1,u;if(r)for(let l in r){if(isReservedProp(l))continue;const f=r[l];let g;o&&hasOwn(o,g=camelize(l))?!a||!a.includes(g)?e[g]=f:(u||(u={}))[g]=f:isEmitListener(t.emitsOptions,l)||(!(l in n)||f!==n[l])&&(n[l]=f,c=!0)}if(a){const l=toRaw(e),f=u||EMPTY_OBJ;for(let g=0;g<a.length;g++){const v=a[g];e[v]=resolvePropValue(o,l,v,f[v],t,!hasOwn(f,v))}}return c}function resolvePropValue(t,r,e,n,o,a){const c=t[e];if(c!=null){const u=hasOwn(c,"default");if(u&&n===void 0){const l=c.default;if(c.type!==Function&&isFunction$1(l)){const{propsDefaults:f}=o;e in f?n=f[e]:(setCurrentInstance(o),n=f[e]=l.call(null,r),unsetCurrentInstance())}else n=l}c[0]&&(a&&!u?n=!1:c[1]&&(n===""||n===hyphenate(e))&&(n=!0))}return n}function normalizePropsOptions(t,r,e=!1){const n=r.propsCache,o=n.get(t);if(o)return o;const a=t.props,c={},u=[];let l=!1;if(!isFunction$1(t)){const g=v=>{l=!0;const[b,S]=normalizePropsOptions(v,r,!0);extend$2(c,b),S&&u.push(...S)};!e&&r.mixins.length&&r.mixins.forEach(g),t.extends&&g(t.extends),t.mixins&&t.mixins.forEach(g)}if(!a&&!l)return isObject$2(t)&&n.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$2(a))for(let g=0;g<a.length;g++){const v=camelize(a[g]);validatePropName(v)&&(c[v]=EMPTY_OBJ)}else if(a)for(const g in a){const v=camelize(g);if(validatePropName(v)){const b=a[g],S=c[v]=isArray$2(b)||isFunction$1(b)?{type:b}:Object.assign({},b);if(S){const C=getTypeIndex(Boolean,S.type),O=getTypeIndex(String,S.type);S[0]=C>-1,S[1]=O<0||C<O,(C>-1||hasOwn(S,"default"))&&u.push(v)}}}const f=[c,u];return isObject$2(t)&&n.set(t,f),f}function validatePropName(t){return t[0]!=="$"}function getType(t){const r=t&&t.toString().match(/^\s*function (\w+)/);return r?r[1]:t===null?"null":""}function isSameType(t,r){return getType(t)===getType(r)}function getTypeIndex(t,r){return isArray$2(r)?r.findIndex(e=>isSameType(e,t)):isFunction$1(r)&&isSameType(r,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$2(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,r,e)=>{if(r._n)return r;const n=withCtx((...o)=>normalizeSlotValue(r(...o)),e);return n._c=!1,n},normalizeObjectSlots=(t,r,e)=>{const n=t._ctx;for(const o in t){if(isInternalKey(o))continue;const a=t[o];if(isFunction$1(a))r[o]=normalizeSlot$1(o,a,n);else if(a!=null){const c=normalizeSlotValue(a);r[o]=()=>c}}},normalizeVNodeSlots=(t,r)=>{const e=normalizeSlotValue(r);t.slots.default=()=>e},initSlots=(t,r)=>{if(t.vnode.shapeFlag&32){const e=r._;e?(t.slots=toRaw(r),def(r,"_",e)):normalizeObjectSlots(r,t.slots={})}else t.slots={},r&&normalizeVNodeSlots(t,r);def(t.slots,InternalObjectKey,1)},updateSlots=(t,r,e)=>{const{vnode:n,slots:o}=t;let a=!0,c=EMPTY_OBJ;if(n.shapeFlag&32){const u=r._;u?e&&u===1?a=!1:(extend$2(o,r),!e&&u===1&&delete o._):(a=!r.$stable,normalizeObjectSlots(r,o)),c=r}else r&&(normalizeVNodeSlots(t,r),c={default:1});if(a)for(const u in o)!isInternalKey(u)&&!(u in c)&&delete o[u]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(t,r){return function(n,o=null){isFunction$1(n)||(n=Object.assign({},n)),o!=null&&!isObject$2(o)&&(o=null);const a=createAppContext(),c=new Set;let u=!1;const l=a.app={_uid:uid++,_component:n,_props:o,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(f){},use(f,...g){return c.has(f)||(f&&isFunction$1(f.install)?(c.add(f),f.install(l,...g)):isFunction$1(f)&&(c.add(f),f(l,...g))),l},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),l},component(f,g){return g?(a.components[f]=g,l):a.components[f]},directive(f,g){return g?(a.directives[f]=g,l):a.directives[f]},mount(f,g,v){if(!u){const b=createVNode(n,o);return b.appContext=a,g&&r?r(b,f):t(b,f,v),u=!0,l._container=f,f.__vue_app__=l,getExposeProxy(b.component)||b.component.proxy}},unmount(){u&&(t(null,l._container),delete l._container.__vue_app__)},provide(f,g){return a.provides[f]=g,l}};return l}}function setRef(t,r,e,n,o=!1){if(isArray$2(t)){t.forEach((b,S)=>setRef(b,r&&(isArray$2(r)?r[S]:r),e,n,o));return}if(isAsyncWrapper(n)&&!o)return;const a=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,c=o?null:a,{i:u,r:l}=t,f=r&&r.r,g=u.refs===EMPTY_OBJ?u.refs={}:u.refs,v=u.setupState;if(f!=null&&f!==l&&(isString$2(f)?(g[f]=null,hasOwn(v,f)&&(v[f]=null)):isRef(f)&&(f.value=null)),isFunction$1(l))callWithErrorHandling(l,u,12,[c,g]);else{const b=isString$2(l),S=isRef(l);if(b||S){const C=()=>{if(t.f){const O=b?hasOwn(v,l)?v[l]:g[l]:l.value;o?isArray$2(O)&&remove$3(O,a):isArray$2(O)?O.includes(a)||O.push(a):b?(g[l]=[a],hasOwn(v,l)&&(v[l]=g[l])):(l.value=[a],t.k&&(g[t.k]=l.value))}else b?(g[l]=c,hasOwn(v,l)&&(v[l]=c)):S&&(l.value=c,t.k&&(g[t.k]=c))};c?(C.id=-1,queuePostRenderEffect(C,e)):C()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,r){const e=getGlobalThis();e.__VUE__=!0;const{insert:n,remove:o,patchProp:a,createElement:c,createText:u,createComment:l,setText:f,setElementText:g,parentNode:v,nextSibling:b,setScopeId:S=NOOP,insertStaticContent:C}=t,O=(Ge,Qe,Et,Tt=null,Zt=null,$t=null,pt=!1,ft=null,et=!!Qe.dynamicChildren)=>{if(Ge===Qe)return;Ge&&!isSameVNodeType(Ge,Qe)&&(Tt=We(Ge),Ze(Ge,Zt,$t,!0),Ge=null),Qe.patchFlag===-2&&(et=!1,Qe.dynamicChildren=null);const{type:it,ref:Pt,shapeFlag:nn}=Qe;switch(it){case Text:A(Ge,Qe,Et,Tt);break;case Comment:w(Ge,Qe,Et,Tt);break;case Static:Ge==null&&V(Qe,Et,Tt,pt);break;case Fragment:ae(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et);break;default:nn&1?W(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et):nn&6?me(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et):(nn&64||nn&128)&&it.process(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et,bt)}Pt!=null&&Zt&&setRef(Pt,Ge&&Ge.ref,$t,Qe||Ge,!Qe)},A=(Ge,Qe,Et,Tt)=>{if(Ge==null)n(Qe.el=u(Qe.children),Et,Tt);else{const Zt=Qe.el=Ge.el;Qe.children!==Ge.children&&f(Zt,Qe.children)}},w=(Ge,Qe,Et,Tt)=>{Ge==null?n(Qe.el=l(Qe.children||""),Et,Tt):Qe.el=Ge.el},V=(Ge,Qe,Et,Tt)=>{[Ge.el,Ge.anchor]=C(Ge.children,Qe,Et,Tt,Ge.el,Ge.anchor)},k=({el:Ge,anchor:Qe},Et,Tt)=>{let Zt;for(;Ge&&Ge!==Qe;)Zt=b(Ge),n(Ge,Et,Tt),Ge=Zt;n(Qe,Et,Tt)},M=({el:Ge,anchor:Qe})=>{let Et;for(;Ge&&Ge!==Qe;)Et=b(Ge),o(Ge),Ge=Et;o(Qe)},W=(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et)=>{pt=pt||Qe.type==="svg",Ge==null?Y(Qe,Et,Tt,Zt,$t,pt,ft,et):j(Ge,Qe,Zt,$t,pt,ft,et)},Y=(Ge,Qe,Et,Tt,Zt,$t,pt,ft)=>{let et,it;const{type:Pt,props:nn,shapeFlag:Ut,transition:xt,dirs:Wt}=Ge;if(et=Ge.el=c(Ge.type,$t,nn&&nn.is,nn),Ut&8?g(et,Ge.children):Ut&16&&P(Ge.children,et,null,Tt,Zt,$t&&Pt!=="foreignObject",pt,ft),Wt&&invokeDirectiveHook(Ge,null,Tt,"created"),nn){for(const mn in nn)mn!=="value"&&!isReservedProp(mn)&&a(et,mn,null,nn[mn],$t,Ge.children,Tt,Zt,Le);"value"in nn&&a(et,"value",null,nn.value),(it=nn.onVnodeBeforeMount)&&invokeVNodeHook(it,Tt,Ge)}H(et,Ge,Ge.scopeId,pt,Tt),Wt&&invokeDirectiveHook(Ge,null,Tt,"beforeMount");const tn=(!Zt||Zt&&!Zt.pendingBranch)&&xt&&!xt.persisted;tn&&xt.beforeEnter(et),n(et,Qe,Et),((it=nn&&nn.onVnodeMounted)||tn||Wt)&&queuePostRenderEffect(()=>{it&&invokeVNodeHook(it,Tt,Ge),tn&&xt.enter(et),Wt&&invokeDirectiveHook(Ge,null,Tt,"mounted")},Zt)},H=(Ge,Qe,Et,Tt,Zt)=>{if(Et&&S(Ge,Et),Tt)for(let $t=0;$t<Tt.length;$t++)S(Ge,Tt[$t]);if(Zt){let $t=Zt.subTree;if(Qe===$t){const pt=Zt.vnode;H(Ge,pt,pt.scopeId,pt.slotScopeIds,Zt.parent)}}},P=(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et=0)=>{for(let it=et;it<Ge.length;it++){const Pt=Ge[it]=ft?cloneIfMounted(Ge[it]):normalizeVNode(Ge[it]);O(null,Pt,Qe,Et,Tt,Zt,$t,pt,ft)}},j=(Ge,Qe,Et,Tt,Zt,$t,pt)=>{const ft=Qe.el=Ge.el;let{patchFlag:et,dynamicChildren:it,dirs:Pt}=Qe;et|=Ge.patchFlag&16;const nn=Ge.props||EMPTY_OBJ,Ut=Qe.props||EMPTY_OBJ;let xt;Et&&toggleRecurse(Et,!1),(xt=Ut.onVnodeBeforeUpdate)&&invokeVNodeHook(xt,Et,Qe,Ge),Pt&&invokeDirectiveHook(Qe,Ge,Et,"beforeUpdate"),Et&&toggleRecurse(Et,!0);const Wt=Zt&&Qe.type!=="foreignObject";if(it?_(Ge.dynamicChildren,it,ft,Et,Tt,Wt,$t):pt||_e(Ge,Qe,ft,null,Et,Tt,Wt,$t,!1),et>0){if(et&16)z(ft,Qe,nn,Ut,Et,Tt,Zt);else if(et&2&&nn.class!==Ut.class&&a(ft,"class",null,Ut.class,Zt),et&4&&a(ft,"style",nn.style,Ut.style,Zt),et&8){const tn=Qe.dynamicProps;for(let mn=0;mn<tn.length;mn++){const Dn=tn[mn],er=nn[Dn],Zn=Ut[Dn];(Zn!==er||Dn==="value")&&a(ft,Dn,er,Zn,Zt,Ge.children,Et,Tt,Le)}}et&1&&Ge.children!==Qe.children&&g(ft,Qe.children)}else!pt&&it==null&&z(ft,Qe,nn,Ut,Et,Tt,Zt);((xt=Ut.onVnodeUpdated)||Pt)&&queuePostRenderEffect(()=>{xt&&invokeVNodeHook(xt,Et,Qe,Ge),Pt&&invokeDirectiveHook(Qe,Ge,Et,"updated")},Tt)},_=(Ge,Qe,Et,Tt,Zt,$t,pt)=>{for(let ft=0;ft<Qe.length;ft++){const et=Ge[ft],it=Qe[ft],Pt=et.el&&(et.type===Fragment||!isSameVNodeType(et,it)||et.shapeFlag&70)?v(et.el):Et;O(et,it,Pt,null,Tt,Zt,$t,pt,!0)}},z=(Ge,Qe,Et,Tt,Zt,$t,pt)=>{if(Et!==Tt){if(Et!==EMPTY_OBJ)for(const ft in Et)!isReservedProp(ft)&&!(ft in Tt)&&a(Ge,ft,Et[ft],null,pt,Qe.children,Zt,$t,Le);for(const ft in Tt){if(isReservedProp(ft))continue;const et=Tt[ft],it=Et[ft];et!==it&&ft!=="value"&&a(Ge,ft,it,et,pt,Qe.children,Zt,$t,Le)}"value"in Tt&&a(Ge,"value",Et.value,Tt.value)}},ae=(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et)=>{const it=Qe.el=Ge?Ge.el:u(""),Pt=Qe.anchor=Ge?Ge.anchor:u("");let{patchFlag:nn,dynamicChildren:Ut,slotScopeIds:xt}=Qe;xt&&(ft=ft?ft.concat(xt):xt),Ge==null?(n(it,Et,Tt),n(Pt,Et,Tt),P(Qe.children,Et,Pt,Zt,$t,pt,ft,et)):nn>0&&nn&64&&Ut&&Ge.dynamicChildren?(_(Ge.dynamicChildren,Ut,Et,Zt,$t,pt,ft),(Qe.key!=null||Zt&&Qe===Zt.subTree)&&traverseStaticChildren(Ge,Qe,!0)):_e(Ge,Qe,Et,Pt,Zt,$t,pt,ft,et)},me=(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et)=>{Qe.slotScopeIds=ft,Ge==null?Qe.shapeFlag&512?Zt.ctx.activate(Qe,Et,Tt,pt,et):ye(Qe,Et,Tt,Zt,$t,pt,et):Pe(Ge,Qe,et)},ye=(Ge,Qe,Et,Tt,Zt,$t,pt)=>{const ft=Ge.component=createComponentInstance(Ge,Tt,Zt);if(isKeepAlive(Ge)&&(ft.ctx.renderer=bt),setupComponent(ft),ft.asyncDep){if(Zt&&Zt.registerDep(ft,Te),!Ge.el){const et=ft.subTree=createVNode(Comment);w(null,et,Qe,Et)}return}Te(ft,Ge,Qe,Et,Zt,$t,pt)},Pe=(Ge,Qe,Et)=>{const Tt=Qe.component=Ge.component;if(shouldUpdateComponent(Ge,Qe,Et))if(Tt.asyncDep&&!Tt.asyncResolved){Ue(Tt,Qe,Et);return}else Tt.next=Qe,invalidateJob(Tt.update),Tt.update();else Qe.el=Ge.el,Tt.vnode=Qe},Te=(Ge,Qe,Et,Tt,Zt,$t,pt)=>{const ft=()=>{if(Ge.isMounted){let{next:Pt,bu:nn,u:Ut,parent:xt,vnode:Wt}=Ge,tn=Pt,mn;toggleRecurse(Ge,!1),Pt?(Pt.el=Wt.el,Ue(Ge,Pt,pt)):Pt=Wt,nn&&invokeArrayFns(nn),(mn=Pt.props&&Pt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(mn,xt,Pt,Wt),toggleRecurse(Ge,!0);const Dn=renderComponentRoot(Ge),er=Ge.subTree;Ge.subTree=Dn,O(er,Dn,v(er.el),We(er),Ge,Zt,$t),Pt.el=Dn.el,tn===null&&updateHOCHostEl(Ge,Dn.el),Ut&&queuePostRenderEffect(Ut,Zt),(mn=Pt.props&&Pt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(mn,xt,Pt,Wt),Zt)}else{let Pt;const{el:nn,props:Ut}=Qe,{bm:xt,m:Wt,parent:tn}=Ge,mn=isAsyncWrapper(Qe);if(toggleRecurse(Ge,!1),xt&&invokeArrayFns(xt),!mn&&(Pt=Ut&&Ut.onVnodeBeforeMount)&&invokeVNodeHook(Pt,tn,Qe),toggleRecurse(Ge,!0),nn&&It){const Dn=()=>{Ge.subTree=renderComponentRoot(Ge),It(nn,Ge.subTree,Ge,Zt,null)};mn?Qe.type.__asyncLoader().then(()=>!Ge.isUnmounted&&Dn()):Dn()}else{const Dn=Ge.subTree=renderComponentRoot(Ge);O(null,Dn,Et,Tt,Ge,Zt,$t),Qe.el=Dn.el}if(Wt&&queuePostRenderEffect(Wt,Zt),!mn&&(Pt=Ut&&Ut.onVnodeMounted)){const Dn=Qe;queuePostRenderEffect(()=>invokeVNodeHook(Pt,tn,Dn),Zt)}(Qe.shapeFlag&256||tn&&isAsyncWrapper(tn.vnode)&&tn.vnode.shapeFlag&256)&&Ge.a&&queuePostRenderEffect(Ge.a,Zt),Ge.isMounted=!0,Qe=Et=Tt=null}},et=Ge.effect=new ReactiveEffect(ft,()=>queueJob(it),Ge.scope),it=Ge.update=()=>et.run();it.id=Ge.uid,toggleRecurse(Ge,!0),it()},Ue=(Ge,Qe,Et)=>{Qe.component=Ge;const Tt=Ge.vnode.props;Ge.vnode=Qe,Ge.next=null,updateProps(Ge,Qe.props,Tt,Et),updateSlots(Ge,Qe.children,Et),pauseTracking(),flushPreFlushCbs(),resetTracking()},_e=(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et=!1)=>{const it=Ge&&Ge.children,Pt=Ge?Ge.shapeFlag:0,nn=Qe.children,{patchFlag:Ut,shapeFlag:xt}=Qe;if(Ut>0){if(Ut&128){Ke(it,nn,Et,Tt,Zt,$t,pt,ft,et);return}else if(Ut&256){je(it,nn,Et,Tt,Zt,$t,pt,ft,et);return}}xt&8?(Pt&16&&Le(it,Zt,$t),nn!==it&&g(Et,nn)):Pt&16?xt&16?Ke(it,nn,Et,Tt,Zt,$t,pt,ft,et):Le(it,Zt,$t,!0):(Pt&8&&g(Et,""),xt&16&&P(nn,Et,Tt,Zt,$t,pt,ft,et))},je=(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et)=>{Ge=Ge||EMPTY_ARR,Qe=Qe||EMPTY_ARR;const it=Ge.length,Pt=Qe.length,nn=Math.min(it,Pt);let Ut;for(Ut=0;Ut<nn;Ut++){const xt=Qe[Ut]=et?cloneIfMounted(Qe[Ut]):normalizeVNode(Qe[Ut]);O(Ge[Ut],xt,Et,null,Zt,$t,pt,ft,et)}it>Pt?Le(Ge,Zt,$t,!0,!1,nn):P(Qe,Et,Tt,Zt,$t,pt,ft,et,nn)},Ke=(Ge,Qe,Et,Tt,Zt,$t,pt,ft,et)=>{let it=0;const Pt=Qe.length;let nn=Ge.length-1,Ut=Pt-1;for(;it<=nn&&it<=Ut;){const xt=Ge[it],Wt=Qe[it]=et?cloneIfMounted(Qe[it]):normalizeVNode(Qe[it]);if(isSameVNodeType(xt,Wt))O(xt,Wt,Et,null,Zt,$t,pt,ft,et);else break;it++}for(;it<=nn&&it<=Ut;){const xt=Ge[nn],Wt=Qe[Ut]=et?cloneIfMounted(Qe[Ut]):normalizeVNode(Qe[Ut]);if(isSameVNodeType(xt,Wt))O(xt,Wt,Et,null,Zt,$t,pt,ft,et);else break;nn--,Ut--}if(it>nn){if(it<=Ut){const xt=Ut+1,Wt=xt<Pt?Qe[xt].el:Tt;for(;it<=Ut;)O(null,Qe[it]=et?cloneIfMounted(Qe[it]):normalizeVNode(Qe[it]),Et,Wt,Zt,$t,pt,ft,et),it++}}else if(it>Ut)for(;it<=nn;)Ze(Ge[it],Zt,$t,!0),it++;else{const xt=it,Wt=it,tn=new Map;for(it=Wt;it<=Ut;it++){const Jn=Qe[it]=et?cloneIfMounted(Qe[it]):normalizeVNode(Qe[it]);Jn.key!=null&&tn.set(Jn.key,it)}let mn,Dn=0;const er=Ut-Wt+1;let Zn=!1,dr=0;const pr=new Array(er);for(it=0;it<er;it++)pr[it]=0;for(it=xt;it<=nn;it++){const Jn=Ge[it];if(Dn>=er){Ze(Jn,Zt,$t,!0);continue}let Dt;if(Jn.key!=null)Dt=tn.get(Jn.key);else for(mn=Wt;mn<=Ut;mn++)if(pr[mn-Wt]===0&&isSameVNodeType(Jn,Qe[mn])){Dt=mn;break}Dt===void 0?Ze(Jn,Zt,$t,!0):(pr[Dt-Wt]=it+1,Dt>=dr?dr=Dt:Zn=!0,O(Jn,Qe[Dt],Et,null,Zt,$t,pt,ft,et),Dn++)}const Bn=Zn?getSequence(pr):EMPTY_ARR;for(mn=Bn.length-1,it=er-1;it>=0;it--){const Jn=Wt+it,Dt=Qe[Jn],Ii=Jn+1<Pt?Qe[Jn+1].el:Tt;pr[it]===0?O(null,Dt,Et,Ii,Zt,$t,pt,ft,et):Zn&&(mn<0||it!==Bn[mn]?De(Dt,Et,Ii,2):mn--)}}},De=(Ge,Qe,Et,Tt,Zt=null)=>{const{el:$t,type:pt,transition:ft,children:et,shapeFlag:it}=Ge;if(it&6){De(Ge.component.subTree,Qe,Et,Tt);return}if(it&128){Ge.suspense.move(Qe,Et,Tt);return}if(it&64){pt.move(Ge,Qe,Et,bt);return}if(pt===Fragment){n($t,Qe,Et);for(let nn=0;nn<et.length;nn++)De(et[nn],Qe,Et,Tt);n(Ge.anchor,Qe,Et);return}if(pt===Static){k(Ge,Qe,Et);return}if(Tt!==2&&it&1&&ft)if(Tt===0)ft.beforeEnter($t),n($t,Qe,Et),queuePostRenderEffect(()=>ft.enter($t),Zt);else{const{leave:nn,delayLeave:Ut,afterLeave:xt}=ft,Wt=()=>n($t,Qe,Et),tn=()=>{nn($t,()=>{Wt(),xt&&xt()})};Ut?Ut($t,Wt,tn):tn()}else n($t,Qe,Et)},Ze=(Ge,Qe,Et,Tt=!1,Zt=!1)=>{const{type:$t,props:pt,ref:ft,children:et,dynamicChildren:it,shapeFlag:Pt,patchFlag:nn,dirs:Ut}=Ge;if(ft!=null&&setRef(ft,null,Et,Ge,!0),Pt&256){Qe.ctx.deactivate(Ge);return}const xt=Pt&1&&Ut,Wt=!isAsyncWrapper(Ge);let tn;if(Wt&&(tn=pt&&pt.onVnodeBeforeUnmount)&&invokeVNodeHook(tn,Qe,Ge),Pt&6)Ee(Ge.component,Et,Tt);else{if(Pt&128){Ge.suspense.unmount(Et,Tt);return}xt&&invokeDirectiveHook(Ge,null,Qe,"beforeUnmount"),Pt&64?Ge.type.remove(Ge,Qe,Et,Zt,bt,Tt):it&&($t!==Fragment||nn>0&&nn&64)?Le(it,Qe,Et,!1,!0):($t===Fragment&&nn&384||!Zt&&Pt&16)&&Le(et,Qe,Et),Tt&&tt(Ge)}(Wt&&(tn=pt&&pt.onVnodeUnmounted)||xt)&&queuePostRenderEffect(()=>{tn&&invokeVNodeHook(tn,Qe,Ge),xt&&invokeDirectiveHook(Ge,null,Qe,"unmounted")},Et)},tt=Ge=>{const{type:Qe,el:Et,anchor:Tt,transition:Zt}=Ge;if(Qe===Fragment){gt(Et,Tt);return}if(Qe===Static){M(Ge);return}const $t=()=>{o(Et),Zt&&!Zt.persisted&&Zt.afterLeave&&Zt.afterLeave()};if(Ge.shapeFlag&1&&Zt&&!Zt.persisted){const{leave:pt,delayLeave:ft}=Zt,et=()=>pt(Et,$t);ft?ft(Ge.el,$t,et):et()}else $t()},gt=(Ge,Qe)=>{let Et;for(;Ge!==Qe;)Et=b(Ge),o(Ge),Ge=Et;o(Qe)},Ee=(Ge,Qe,Et)=>{const{bum:Tt,scope:Zt,update:$t,subTree:pt,um:ft}=Ge;Tt&&invokeArrayFns(Tt),Zt.stop(),$t&&($t.active=!1,Ze(pt,Ge,Qe,Et)),ft&&queuePostRenderEffect(ft,Qe),queuePostRenderEffect(()=>{Ge.isUnmounted=!0},Qe),Qe&&Qe.pendingBranch&&!Qe.isUnmounted&&Ge.asyncDep&&!Ge.asyncResolved&&Ge.suspenseId===Qe.pendingId&&(Qe.deps--,Qe.deps===0&&Qe.resolve())},Le=(Ge,Qe,Et,Tt=!1,Zt=!1,$t=0)=>{for(let pt=$t;pt<Ge.length;pt++)Ze(Ge[pt],Qe,Et,Tt,Zt)},We=Ge=>Ge.shapeFlag&6?We(Ge.component.subTree):Ge.shapeFlag&128?Ge.suspense.next():b(Ge.anchor||Ge.el),ut=(Ge,Qe,Et)=>{Ge==null?Qe._vnode&&Ze(Qe._vnode,null,null,!0):O(Qe._vnode||null,Ge,Qe,null,null,null,Et),flushPreFlushCbs(),flushPostFlushCbs(),Qe._vnode=Ge},bt={p:O,um:Ze,m:De,r:tt,mt:ye,mc:P,pc:_e,pbc:_,n:We,o:t};let mt,It;return r&&([mt,It]=r(bt)),{render:ut,hydrate:mt,createApp:createAppAPI(ut,mt)}}function toggleRecurse({effect:t,update:r},e){t.allowRecurse=r.allowRecurse=e}function traverseStaticChildren(t,r,e=!1){const n=t.children,o=r.children;if(isArray$2(n)&&isArray$2(o))for(let a=0;a<n.length;a++){const c=n[a];let u=o[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[a]=cloneIfMounted(o[a]),u.el=c.el),e||traverseStaticChildren(c,u)),u.type===Text&&(u.el=c.el)}}function getSequence(t){const r=t.slice(),e=[0];let n,o,a,c,u;const l=t.length;for(n=0;n<l;n++){const f=t[n];if(f!==0){if(o=e[e.length-1],t[o]<f){r[n]=o,e.push(n);continue}for(a=0,c=e.length-1;a<c;)u=a+c>>1,t[e[u]]<f?a=u+1:c=u;f<t[e[a]]&&(a>0&&(r[n]=e[a-1]),e[a]=n)}}for(a=e.length,c=e[a-1];a-- >0;)e[a]=c,c=r[c];return e}const isTeleport=t=>t.__isTeleport,isTeleportDisabled=t=>t&&(t.disabled||t.disabled===""),isTargetSVG=t=>typeof SVGElement<"u"&&t instanceof SVGElement,resolveTarget=(t,r)=>{const e=t&&t.to;return isString$2(e)?r?r(e):null:e},TeleportImpl={__isTeleport:!0,process(t,r,e,n,o,a,c,u,l,f){const{mc:g,pc:v,pbc:b,o:{insert:S,querySelector:C,createText:O,createComment:A}}=f,w=isTeleportDisabled(r.props);let{shapeFlag:V,children:k,dynamicChildren:M}=r;if(t==null){const W=r.el=O(""),Y=r.anchor=O("");S(W,e,n),S(Y,e,n);const H=r.target=resolveTarget(r.props,C),P=r.targetAnchor=O("");H&&(S(P,H),c=c||isTargetSVG(H));const j=(_,z)=>{V&16&&g(k,_,z,o,a,c,u,l)};w?j(e,Y):H&&j(H,P)}else{r.el=t.el;const W=r.anchor=t.anchor,Y=r.target=t.target,H=r.targetAnchor=t.targetAnchor,P=isTeleportDisabled(t.props),j=P?e:Y,_=P?W:H;if(c=c||isTargetSVG(Y),M?(b(t.dynamicChildren,M,j,o,a,c,u),traverseStaticChildren(t,r,!0)):l||v(t,r,j,_,o,a,c,u,!1),w)P||moveTeleport(r,e,W,f,1);else if((r.props&&r.props.to)!==(t.props&&t.props.to)){const z=r.target=resolveTarget(r.props,C);z&&moveTeleport(r,z,null,f,0)}else P&&moveTeleport(r,Y,H,f,1)}updateCssVars(r)},remove(t,r,e,n,{um:o,o:{remove:a}},c){const{shapeFlag:u,children:l,anchor:f,targetAnchor:g,target:v,props:b}=t;if(v&&a(g),(c||!isTeleportDisabled(b))&&(a(f),u&16))for(let S=0;S<l.length;S++){const C=l[S];o(C,r,e,!0,!!C.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(t,r,e,{o:{insert:n},m:o},a=2){a===0&&n(t.targetAnchor,r,e);const{el:c,anchor:u,shapeFlag:l,children:f,props:g}=t,v=a===2;if(v&&n(c,r,e),(!v||isTeleportDisabled(g))&&l&16)for(let b=0;b<f.length;b++)o(f[b],r,e,2);v&&n(u,r,e)}function hydrateTeleport(t,r,e,n,o,a,{o:{nextSibling:c,parentNode:u,querySelector:l}},f){const g=r.target=resolveTarget(r.props,l);if(g){const v=g._lpa||g.firstChild;if(r.shapeFlag&16)if(isTeleportDisabled(r.props))r.anchor=f(c(t),r,u(t),e,n,o,a),r.targetAnchor=v;else{r.anchor=c(t);let b=v;for(;b;)if(b=c(b),b&&b.nodeType===8&&b.data==="teleport anchor"){r.targetAnchor=b,g._lpa=r.targetAnchor&&c(r.targetAnchor);break}f(v,r,g,e,n,o,a)}updateCssVars(r)}return r.anchor&&c(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(t){const r=t.ctx;if(r&&r.ut){let e=t.children[0].el;for(;e!==t.targetAnchor;)e.nodeType===1&&e.setAttribute("data-v-owner",r.uid),e=e.nextSibling;r.ut()}}const Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,r,e,n,o,a){return setupBlock(createBaseVNode(t,r,e,n,o,a,!0))}function createBlock(t,r,e,n,o){return setupBlock(createVNode(t,r,e,n,o,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,r){return t.type===r.type&&t.key===r.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:r,ref_for:e})=>t!=null?isString$2(t)||isRef(t)||isFunction$1(t)?{i:currentRenderingInstance,r:t,k:r,f:!!e}:t:null;function createBaseVNode(t,r=null,e=null,n=0,o=null,a=t===Fragment?0:1,c=!1,u=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return u?(normalizeChildren(l,e),a&128&&t.normalize(l)):e&&(l.shapeFlag|=isString$2(e)?8:16),isBlockTreeEnabled>0&&!c&&currentBlock&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(t,r=null,e=null,n=0,o=null,a=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const u=cloneVNode(t,r,!0);return e&&normalizeChildren(u,e),isBlockTreeEnabled>0&&!a&&currentBlock&&(u.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=u:currentBlock.push(u)),u.patchFlag|=-2,u}if(isClassComponent(t)&&(t=t.__vccOpts),r){r=guardReactiveProps(r);let{class:u,style:l}=r;u&&!isString$2(u)&&(r.class=normalizeClass(u)),isObject$2(l)&&(isProxy(l)&&!isArray$2(l)&&(l=extend$2({},l)),r.style=normalizeStyle(l))}const c=isString$2(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$2(t)?4:isFunction$1(t)?2:0;return createBaseVNode(t,r,e,n,o,c,a,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$2({},t):t:null}function cloneVNode(t,r,e=!1){const{props:n,ref:o,patchFlag:a,children:c}=t,u=r?mergeProps(n||{},r):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&normalizeKey(u),ref:r&&r.ref?e&&o?isArray$2(o)?o.concat(normalizeRef(r)):[o,normalizeRef(r)]:normalizeRef(r):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:c,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:r&&t.type!==Fragment?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function createTextVNode(t=" ",r=0){return createVNode(Text,null,t,r)}function createCommentVNode(t="",r=!1){return r?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$2(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,r){let e=0;const{shapeFlag:n}=t;if(r==null)r=null;else if(isArray$2(r))e=16;else if(typeof r=="object")if(n&65){const o=r.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{e=32;const o=r._;!o&&!(InternalObjectKey in r)?r._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,t.patchFlag|=1024))}else isFunction$1(r)?(r={default:r,_ctx:currentRenderingInstance},e=32):(r=String(r),n&64?(e=16,r=[createTextVNode(r)]):e=8);t.children=r,t.shapeFlag|=e}function mergeProps(...t){const r={};for(let e=0;e<t.length;e++){const n=t[e];for(const o in n)if(o==="class")r.class!==n.class&&(r.class=normalizeClass([r.class,n.class]));else if(o==="style")r.style=normalizeStyle([r.style,n.style]);else if(isOn(o)){const a=r[o],c=n[o];c&&a!==c&&!(isArray$2(a)&&a.includes(c))&&(r[o]=a?[].concat(a,c):c)}else o!==""&&(r[o]=n[o])}return r}function invokeVNodeHook(t,r,e,n=null){callWithAsyncErrorHandling(t,r,7,[e,n])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(t,r,e){const n=t.type,o=(r?r.appContext:t.appContext)||emptyAppContext,a={uid:uid$1++,vnode:t,type:n,parent:r,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,o),emitsOptions:normalizeEmitsOptions(n,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=r?r.root:a,a.emit=emit$1.bind(null,a),t.ce&&t.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,r=!1){isInSSRComponentSetup=r;const{props:e,children:n}=t.vnode,o=isStatefulComponent(t);initProps(t,e,o,r),initSlots(t,n);const a=o?setupStatefulComponent(t,r):void 0;return isInSSRComponentSetup=!1,a}function setupStatefulComponent(t,r){const e=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:n}=e;if(n){const o=t.setupContext=n.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const a=callWithErrorHandling(n,t,0,[t.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(a)){if(a.then(unsetCurrentInstance,unsetCurrentInstance),r)return a.then(c=>{handleSetupResult(t,c,r)}).catch(c=>{handleError(c,t,0)});t.asyncDep=a}else handleSetupResult(t,a,r)}else finishComponentSetup(t,r)}function handleSetupResult(t,r,e){isFunction$1(r)?t.type.__ssrInlineRender?t.ssrRender=r:t.render=r:isObject$2(r)&&(t.setupState=proxyRefs(r)),finishComponentSetup(t,e)}let compile;function finishComponentSetup(t,r,e){const n=t.type;if(!t.render){if(!r&&compile&&!n.render){const o=n.template||resolveMergedOptions(t).template;if(o){const{isCustomElement:a,compilerOptions:c}=t.appContext.config,{delimiters:u,compilerOptions:l}=n,f=extend$2(extend$2({isCustomElement:a,delimiters:u},c),l);n.render=compile(o,f)}}t.render=n.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(r,e){return track(t,"get","$attrs"),r[e]}})}function createSetupContext(t){const r=n=>{t.exposed=n||{}};let e;return{get attrs(){return e||(e=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:r}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(r,e){if(e in r)return r[e];if(e in publicPropertiesMap)return publicPropertiesMap[e](t)},has(r,e){return e in r||e in publicPropertiesMap}}))}function getComponentName(t,r=!0){return isFunction$1(t)?t.displayName||t.name:t.name||r&&t.__name}function isClassComponent(t){return isFunction$1(t)&&"__vccOpts"in t}const computed=(t,r)=>computed$1(t,r,isInSSRComponentSetup);function useAttrs(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function h(t,r,e){const n=arguments.length;return n===2?isObject$2(r)&&!isArray$2(r)?isVNode(r)?createVNode(t,null,[r]):createVNode(t,r):createVNode(t,null,r):(n>3?e=Array.prototype.slice.call(arguments,2):n===3&&isVNode(e)&&(e=[e]),createVNode(t,r,e))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,r,e)=>{r.insertBefore(t,e||null)},remove:t=>{const r=t.parentNode;r&&r.removeChild(t)},createElement:(t,r,e,n)=>{const o=r?doc.createElementNS(svgNS,t):doc.createElement(t,e?{is:e}:void 0);return t==="select"&&n&&n.multiple!=null&&o.setAttribute("multiple",n.multiple),o},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,r)=>{t.nodeValue=r},setElementText:(t,r)=>{t.textContent=r},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,r){t.setAttribute(r,"")},insertStaticContent(t,r,e,n,o,a){const c=e?e.previousSibling:r.lastChild;if(o&&(o===a||o.nextSibling))for(;r.insertBefore(o.cloneNode(!0),e),!(o===a||!(o=o.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${t}</svg>`:t;const u=templateContainer.content;if(n){const l=u.firstChild;for(;l.firstChild;)u.appendChild(l.firstChild);u.removeChild(l)}r.insertBefore(u,e)}return[c?c.nextSibling:r.firstChild,e?e.previousSibling:r.lastChild]}};function patchClass(t,r,e){const n=t._vtc;n&&(r=(r?[r,...n]:[...n]).join(" ")),r==null?t.removeAttribute("class"):e?t.setAttribute("class",r):t.className=r}function patchStyle(t,r,e){const n=t.style,o=isString$2(e);if(e&&!o){for(const a in e)setStyle(n,a,e[a]);if(r&&!isString$2(r))for(const a in r)e[a]==null&&setStyle(n,a,"")}else{const a=n.display;o?r!==e&&(n.cssText=e):r&&t.removeAttribute("style"),"_vod"in t&&(n.display=a)}}const importantRE=/\s*!important$/;function setStyle(t,r,e){if(isArray$2(e))e.forEach(n=>setStyle(t,r,n));else if(e==null&&(e=""),r.startsWith("--"))t.setProperty(r,e);else{const n=autoPrefix(t,r);importantRE.test(e)?t.setProperty(hyphenate(n),e.replace(importantRE,""),"important"):t[n]=e}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,r){const e=prefixCache[r];if(e)return e;let n=camelize(r);if(n!=="filter"&&n in t)return prefixCache[r]=n;n=capitalize(n);for(let o=0;o<prefixes.length;o++){const a=prefixes[o]+n;if(a in t)return prefixCache[r]=a}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,r,e,n,o){if(n&&r.startsWith("xlink:"))e==null?t.removeAttributeNS(xlinkNS,r.slice(6,r.length)):t.setAttributeNS(xlinkNS,r,e);else{const a=isSpecialBooleanAttr(r);e==null||a&&!includeBooleanAttr(e)?t.removeAttribute(r):t.setAttribute(r,a?"":e)}}function patchDOMProp(t,r,e,n,o,a,c){if(r==="innerHTML"||r==="textContent"){n&&c(n,o,a),t[r]=e??"";return}if(r==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=e;const l=e??"";(t.value!==l||t.tagName==="OPTION")&&(t.value=l),e==null&&t.removeAttribute(r);return}let u=!1;if(e===""||e==null){const l=typeof t[r];l==="boolean"?e=includeBooleanAttr(e):e==null&&l==="string"?(e="",u=!0):l==="number"&&(e=0,u=!0)}try{t[r]=e}catch{}u&&t.removeAttribute(r)}function addEventListener$1(t,r,e,n){t.addEventListener(r,e,n)}function removeEventListener(t,r,e,n){t.removeEventListener(r,e,n)}function patchEvent(t,r,e,n,o=null){const a=t._vei||(t._vei={}),c=a[r];if(n&&c)c.value=n;else{const[u,l]=parseName(r);if(n){const f=a[r]=createInvoker(n,o);addEventListener$1(t,u,f,l)}else c&&(removeEventListener(t,u,c,l),a[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let r;if(optionsModifierRE.test(t)){r={};let n;for(;n=t.match(optionsModifierRE);)t=t.slice(0,t.length-n[0].length),r[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),r]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,r){const e=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=e.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,e.value),r,5,[n])};return e.value=t,e.attached=getNow(),e}function patchStopImmediatePropagation(t,r){if(isArray$2(r)){const e=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{e.call(t),t._stopped=!0},r.map(n=>o=>!o._stopped&&n&&n(o))}else return r}const nativeOnRE=/^on[a-z]/,patchProp=(t,r,e,n,o=!1,a,c,u,l)=>{r==="class"?patchClass(t,n,o):r==="style"?patchStyle(t,e,n):isOn(r)?isModelListener(r)||patchEvent(t,r,e,n,c):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(t,r,n,o))?patchDOMProp(t,r,n,a,c,u,l):(r==="true-value"?t._trueValue=n:r==="false-value"&&(t._falseValue=n),patchAttr(t,r,n,o))};function shouldSetAsProp(t,r,e,n){return n?!!(r==="innerHTML"||r==="textContent"||r in t&&nativeOnRE.test(r)&&isFunction$1(e)):r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&t.tagName==="INPUT"||r==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(r)&&isString$2(e)?!1:r in t}const TRANSITION="transition",ANIMATION="animation",Transition=(t,{slots:r})=>h(BaseTransition,resolveTransitionProps(t),r);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Transition.props=extend$2({},BaseTransition.props,DOMTransitionPropsValidators);const callHook=(t,r=[])=>{isArray$2(t)?t.forEach(e=>e(...r)):t&&t(...r)},hasExplicitCallback=t=>t?isArray$2(t)?t.some(r=>r.length>1):t.length>1:!1;function resolveTransitionProps(t){const r={};for(const ae in t)ae in DOMTransitionPropsValidators||(r[ae]=t[ae]);if(t.css===!1)return r;const{name:e="v",type:n,duration:o,enterFromClass:a=`${e}-enter-from`,enterActiveClass:c=`${e}-enter-active`,enterToClass:u=`${e}-enter-to`,appearFromClass:l=a,appearActiveClass:f=c,appearToClass:g=u,leaveFromClass:v=`${e}-leave-from`,leaveActiveClass:b=`${e}-leave-active`,leaveToClass:S=`${e}-leave-to`}=t,C=normalizeDuration(o),O=C&&C[0],A=C&&C[1],{onBeforeEnter:w,onEnter:V,onEnterCancelled:k,onLeave:M,onLeaveCancelled:W,onBeforeAppear:Y=w,onAppear:H=V,onAppearCancelled:P=k}=r,j=(ae,me,ye)=>{removeTransitionClass(ae,me?g:u),removeTransitionClass(ae,me?f:c),ye&&ye()},_=(ae,me)=>{ae._isLeaving=!1,removeTransitionClass(ae,v),removeTransitionClass(ae,S),removeTransitionClass(ae,b),me&&me()},z=ae=>(me,ye)=>{const Pe=ae?H:V,Te=()=>j(me,ae,ye);callHook(Pe,[me,Te]),nextFrame(()=>{removeTransitionClass(me,ae?l:a),addTransitionClass(me,ae?g:u),hasExplicitCallback(Pe)||whenTransitionEnds(me,n,O,Te)})};return extend$2(r,{onBeforeEnter(ae){callHook(w,[ae]),addTransitionClass(ae,a),addTransitionClass(ae,c)},onBeforeAppear(ae){callHook(Y,[ae]),addTransitionClass(ae,l),addTransitionClass(ae,f)},onEnter:z(!1),onAppear:z(!0),onLeave(ae,me){ae._isLeaving=!0;const ye=()=>_(ae,me);addTransitionClass(ae,v),forceReflow(),addTransitionClass(ae,b),nextFrame(()=>{ae._isLeaving&&(removeTransitionClass(ae,v),addTransitionClass(ae,S),hasExplicitCallback(M)||whenTransitionEnds(ae,n,A,ye))}),callHook(M,[ae,ye])},onEnterCancelled(ae){j(ae,!1),callHook(k,[ae])},onAppearCancelled(ae){j(ae,!0),callHook(P,[ae])},onLeaveCancelled(ae){_(ae),callHook(W,[ae])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$2(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const r=NumberOf(t);return[r,r]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,r){r.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(t._vtc||(t._vtc=new Set)).add(r)}function removeTransitionClass(t,r){r.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const{_vtc:e}=t;e&&(e.delete(r),e.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,r,e,n){const o=t._endId=++endId,a=()=>{o===t._endId&&n()};if(e)return setTimeout(a,e);const{type:c,timeout:u,propCount:l}=getTransitionInfo(t,r);if(!c)return n();const f=c+"end";let g=0;const v=()=>{t.removeEventListener(f,b),a()},b=S=>{S.target===t&&++g>=l&&v()};setTimeout(()=>{g<l&&v()},u+1),t.addEventListener(f,b)}function getTransitionInfo(t,r){const e=window.getComputedStyle(t),n=C=>(e[C]||"").split(", "),o=n(`${TRANSITION}Delay`),a=n(`${TRANSITION}Duration`),c=getTimeout(o,a),u=n(`${ANIMATION}Delay`),l=n(`${ANIMATION}Duration`),f=getTimeout(u,l);let g=null,v=0,b=0;r===TRANSITION?c>0&&(g=TRANSITION,v=c,b=a.length):r===ANIMATION?f>0&&(g=ANIMATION,v=f,b=l.length):(v=Math.max(c,f),g=v>0?c>f?TRANSITION:ANIMATION:null,b=g?g===TRANSITION?a.length:l.length:0);const S=g===TRANSITION&&/\b(transform|all)(,|$)/.test(n(`${TRANSITION}Property`).toString());return{type:g,timeout:v,propCount:b,hasTransform:S}}function getTimeout(t,r){for(;t.length<r.length;)t=t.concat(t);return Math.max(...r.map((e,n)=>toMs(e)+toMs(t[n])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const getModelAssigner=t=>{const r=t.props["onUpdate:modelValue"]||!1;return isArray$2(r)?e=>invokeArrayFns(r,e):r};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const r=t.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const vModelText={created(t,{modifiers:{lazy:r,trim:e,number:n}},o){t._assign=getModelAssigner(o);const a=n||o.props&&o.props.type==="number";addEventListener$1(t,r?"change":"input",c=>{if(c.target.composing)return;let u=t.value;e&&(u=u.trim()),a&&(u=toNumber(u)),t._assign(u)}),e&&addEventListener$1(t,"change",()=>{t.value=t.value.trim()}),r||(addEventListener$1(t,"compositionstart",onCompositionStart),addEventListener$1(t,"compositionend",onCompositionEnd),addEventListener$1(t,"change",onCompositionEnd))},mounted(t,{value:r}){t.value=r??""},beforeUpdate(t,{value:r,modifiers:{lazy:e,trim:n,number:o}},a){if(t._assign=getModelAssigner(a),t.composing||document.activeElement===t&&t.type!=="range"&&(e||n&&t.value.trim()===r||(o||t.type==="number")&&toNumber(t.value)===r))return;const c=r??"";t.value!==c&&(t.value=c)}},vModelCheckbox={deep:!0,created(t,r,e){t._assign=getModelAssigner(e),addEventListener$1(t,"change",()=>{const n=t._modelValue,o=getValue(t),a=t.checked,c=t._assign;if(isArray$2(n)){const u=looseIndexOf(n,o),l=u!==-1;if(a&&!l)c(n.concat(o));else if(!a&&l){const f=[...n];f.splice(u,1),c(f)}}else if(isSet(n)){const u=new Set(n);a?u.add(o):u.delete(o),c(u)}else c(getCheckboxValue(t,a))})},mounted:setChecked,beforeUpdate(t,r,e){t._assign=getModelAssigner(e),setChecked(t,r,e)}};function setChecked(t,{value:r,oldValue:e},n){t._modelValue=r,isArray$2(r)?t.checked=looseIndexOf(r,n.props.value)>-1:isSet(r)?t.checked=r.has(n.props.value):r!==e&&(t.checked=looseEqual(r,getCheckboxValue(t,!0)))}const vModelRadio={created(t,{value:r},e){t.checked=looseEqual(r,e.props.value),t._assign=getModelAssigner(e),addEventListener$1(t,"change",()=>{t._assign(getValue(t))})},beforeUpdate(t,{value:r,oldValue:e},n){t._assign=getModelAssigner(n),r!==e&&(t.checked=looseEqual(r,n.props.value))}};function getValue(t){return"_value"in t?t._value:t.value}function getCheckboxValue(t,r){const e=r?"_trueValue":"_falseValue";return e in t?t[e]:r}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,r)=>systemModifiers.some(e=>t[`${e}Key`]&&!r.includes(e))},withModifiers=(t,r)=>(e,...n)=>{for(let o=0;o<r.length;o++){const a=modifierGuards[r[o]];if(a&&a(e,r))return}return t(e,...n)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,r)=>e=>{if(!("key"in e))return;const n=hyphenate(e.key);if(r.some(o=>o===n||keyNames[o]===n))return t(e)},vShow={beforeMount(t,{value:r},{transition:e}){t._vod=t.style.display==="none"?"":t.style.display,e&&r?e.beforeEnter(t):setDisplay(t,r)},mounted(t,{value:r},{transition:e}){e&&r&&e.enter(t)},updated(t,{value:r,oldValue:e},{transition:n}){!r!=!e&&(n?r?(n.beforeEnter(t),setDisplay(t,!0),n.enter(t)):n.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,r))},beforeUnmount(t,{value:r}){setDisplay(t,r)}};function setDisplay(t,r){t.style.display=r?t._vod:"none"}const rendererOptions=extend$2({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const r=ensureRenderer().createApp(...t),{mount:e}=r;return r.mount=n=>{const o=normalizeContainer(n);if(!o)return;const a=r._component;!isFunction$1(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.innerHTML="";const c=e(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},r};function normalizeContainer(t){return isString$2(t)?document.querySelector(t):t}const style$1="";/*!
 * @websanova/vue-auth v4.2.1
 * https://websanova.com/docs/vue-auth
 * Released under the MIT License.
 */function isObject$1(t){return t!==null&&typeof t=="object"&&t.constructor!==Array}function toArray$1(t){return typeof t=="string"||typeof t=="number"?[t]:t}function extend$1(t,r){var e,n,o,a={};r=r||{};for(o in t)isObject$1(t[o])&&t[o].constructor.name!=="FormData"?a[o]=extend$1(t[o],{}):a[o]=t[o];for(r.constructor!==Array&&(r=[r]),e=0,n=r.length;e<n;e++)for(o in r[e])isObject$1(r[e][o])&&r[e][o].constructor.name!=="FormData"?a[o]=extend$1(t[o]||{},[r[e][o]]):a[o]=r[e][o];return a}function compare(t,r){var e,n,o;if(Object.prototype.toString.call(t)==="[object Object]"&&Object.prototype.toString.call(r)==="[object Object]"){for(o in t)if(compare(t[o],r[o]))return!0;return!1}if(t=toArray$1(t),r=toArray$1(r),!t||!r||t.constructor!==Array||r.constructor!==Array)return!1;for(e=0,n=t.length;e<n;e++)if(r.indexOf(t[e])>=0)return!0;return!1}function isLocalStorage(){try{if(!window.localStorage)throw"exception";return localStorage.setItem("storage_test",1),localStorage.removeItem("storage_test"),!0}catch{return!1}}function isSessionStorage(){try{if(!window.sessionStorage)throw"exception";return sessionStorage.setItem("storage_test",1),sessionStorage.removeItem("storage_test"),!0}catch{return!1}}function isCookieStorage(){return!0}function getProperty(t,r){for(var e=r.split(".");e.length;)t=t[e.shift()];return t}function setCookie(t,r,e){var n,o=t+"="+r+";";for(n in e)e[n]===!1||e[n]===void 0||(e[n]===null?this.options["getCookie"+n]&&(o+=" "+n+"="+this.options["getCookie"+n]()+";"):e[n]===!0?o+=" "+n+";":o+=" "+n+"="+e[n]+";");document.cookie=o}function getDate(t){return typeof t=="string"?t:t!=null?new Date(new Date().getTime()+t).toUTCString():t}function set(t,r,e){var n=this.options.cookie;n.Expires=e===!0?"":getDate(n.Expires),setCookie.call(this,t,r,n)}function get(t){var r,e,n=document.cookie;for(n=n.replace(/;\s+/g,";").split(";").map(function(o){return o.replace(/\s+=\s+/g,"=").split("=")}),r=0,e=n.length;r<e;r++)if(n[r][0]&&n[r][0]===t)return n[r][1];return null}function remove(t){var r=Object.assign({},this.options.cookie);r.Expires=getDate(-12096e5),setCookie.call(this,t,"",r)}var __cookie=Object.freeze({get,set,remove});function set$1(t,r,e){e?sessionStorage.setItem(t,r):localStorage.setItem(t,r)}function get$1(t){return sessionStorage.getItem(t)||localStorage.getItem(t)}function remove$1(t){localStorage.removeItem(t),sessionStorage.removeItem(t)}var __storage=Object.freeze({get:get$1,set:set$1,remove:remove$1});function getTokenKey(t){return t=t||this.currentToken,t||(this.impersonating()?this.options.tokenImpersonateKey:this.options.tokenDefaultKey)}function processToken(t,r,e,n){var o=0,a=this.options.stores,c=a.length,u=[getTokenKey.call(this,r)];for(t==="set"&&(u.push(e),u.push(n===!0));o<c;o++){if(typeof a[o][t]=="function")return a[o][t].apply(this,u);if(a[o]==="storage"&&isLocalStorage()&&isSessionStorage())return __storage[t].apply(this,u);if(a[o]==="cookie"&&isCookieStorage())return __cookie[t].apply(this,u)}}function get$2(t){return processToken.call(this,"get",t)}function set$2(t,r,e){return processToken.call(this,"set",t,r,e)}function remove$2(t){return processToken.call(this,"remove",t)}var __auth=null,__defaultOptions={rolesKey:"roles",rememberKey:"auth_remember",staySignedInKey:"auth_stay_signed_in",tokenDefaultKey:"auth_token_default",tokenImpersonateKey:"auth_token_impersonate",stores:["storage","cookie"],cookie:{Path:"/",Domain:null,Secure:!0,Expires:12096e5,SameSite:"None"},authRedirect:{path:"/login"},forbiddenRedirect:{path:"/403"},notFoundRedirect:{path:"/404"},registerData:{url:"auth/register",method:"POST",redirect:"/login",autoLogin:!1},loginData:{url:"auth/login",method:"POST",redirect:"/",fetchUser:!0,staySignedIn:!0},logoutData:{url:"auth/logout",method:"POST",redirect:"/",makeRequest:!1},fetchData:{url:"auth/user",method:"GET",enabled:!0},refreshData:{url:"auth/refresh",method:"GET",enabled:!0,interval:30},impersonateData:{url:"auth/impersonate",method:"POST",redirect:"/",fetchUser:!0},unimpersonateData:{url:"auth/unimpersonate",method:"POST",redirect:"/admin",fetchUser:!0,makeRequest:!1},oauth2Data:{url:"auth/social",method:"POST",redirect:"/",fetchUser:!0},getUrl:_getUrl,getCookieDomain:_getCookieDomain,parseUserData:_parseUserData};function _isAccess(t,r){return __auth.$vm.state.authenticated===!0?t?compare(t,getProperty(__auth.$vm.state.data||{},r||__auth.options.rolesKey)):!0:!1}function _isTokenExpired(){return!get$2.call(__auth)}function _getAuthMeta(t){var r,e;return t.to?r=t.to.auth:(e=t.matched.filter(function(n){return Object.prototype.hasOwnProperty.call(n.meta,"auth")}),e.length&&(r=e[e.length-1].meta.auth)),r}function _getCookieDomain(){return window.location.hostname}function _getUrl(){var t=window.location.port;return window.location.protocol+"//"+window.location.hostname+(t?":"+t:"")}function _getRemember(){return get$2.call(__auth,__auth.options.rememberKey)}function _setUser(t){__auth.$vm.state.data=t}function _setLoaded(t){__auth.$vm.state.loaded=t}function _setAuthenticated(t){__auth.$vm.state.loaded=!0,__auth.$vm.state.authenticated=t}function _setStaySignedIn(t){t===!0?set$2.call(__auth,__auth.options.staySignedInKey,"true",!1):remove$2.call(__auth,__auth.options.staySignedInKey)}function _setRemember(t){t?(set$2.call(__auth,__auth.options.rememberKey,t,!1),__auth.$vm.state.remember=t):(remove$2.call(__auth,__auth.options.rememberKey),__auth.$vm.state.remember=null)}function _setTransitions(t){__auth.transitionPrev=__auth.transitionThis,__auth.transitionThis=t}function _parseUserData(t){return t.data||{}}function _parseUserResponseData(t){return __auth.options.parseUserData(__auth.drivers.http.httpData(t))}function _parseRedirectUri(t){return t=t||"",/^https?:\/\//.test(t)?t:_getUrl()+"/"+t.replace(/^\/|\/$/g,"")}function _parseRequestIntercept(t){var r,e;return t&&t.ignoreVueAuth||(t.impersonating===!1&&__auth.impersonating()&&(e=__auth.options.tokenDefaultKey),r=get$2.call(__auth,e),r&&__auth.drivers.auth.request.call(__auth,t,r)),t}function _parseResponseIntercept(t,r){var e;r&&r.ignoreVueAuth||(_processInvalidToken(t,__auth.transitionThis),e=__auth.drivers.auth.response.call(__auth,t),e&&set$2.call(__auth,null,e,!get$2.call(__auth,__auth.options.staySignedInKey)))}function _processInvalidToken(t,r){var e,n;!__auth.drivers.http.invalidToken||!__auth.drivers.http.invalidToken.call(__auth,t)||(r&&(e=_getAuthMeta(r)),e&&(n=e.redirect||__auth.options.authRedirect),_processLogout(n))}function _processRouterBeforeEach(t){var r=_isTokenExpired();if(r&&__auth.$vm.state.authenticated&&_processLogout(),!r&&!__auth.$vm.state.loaded&&__auth.options.refreshData.enabled){__auth.refresh().then(function(){_processAuthenticated(t)},function(){_processAuthenticated(t)});return}_processAuthenticated(t)}function _processAuthenticated(t){if(__auth.$vm.state.authenticated===null&&get$2.call(__auth))if(__auth.options.fetchData.enabled)__auth.fetch().then(t,t);else return _processFetch({}),t.call(__auth);else return _setLoaded(!0),t.call(__auth)}function _processTransitionEach(t,r,e){var n=(r||"").redirect||__auth.options.authRedirect,o=(r||"").forbiddenRedirect||(r||"").redirect||__auth.options.forbiddenRedirect,a=(r||"").notFoundRedirect||(r||"").redirect||__auth.options.notFoundRedirect,c=(r||"").rolesKey||__auth.options.rolesKey;if(r=toArray$1((r||"").roles!==void 0?r.roles:r),r&&(r===!0||r.constructor===Array||isObject$1(r)))if(!__auth.check())__auth.transitionRedirectType=401,typeof n=="function"&&(n=n(t)),e.call(__auth,n);else if((r.constructor===Array||isObject$1(r))&&!compare(r,getProperty(__auth.$vm.state.data||{},c)))__auth.transitionRedirectType=403,typeof o=="function"&&(o=o(t)),e.call(__auth,o);else return(__auth.transitionPrev||{}).path!==__auth.transitionThis.path&&(__auth.$vm.state.redirect=__auth.transitionRedirectType?{type:__auth.transitionRedirectType,from:__auth.transitionPrev,to:__auth.transitionThis}:null,__auth.transitionRedirectType=null),e();else if(r===!1&&__auth.check())__auth.transitionRedirectType=404,typeof a=="function"&&(a=a(t)),e.call(__auth,a);else return(__auth.transitionPrev||{}).path!==__auth.transitionThis.path&&(__auth.$vm.state.redirect=__auth.transitionRedirectType?{type:__auth.transitionRedirectType,from:__auth.transitionPrev,to:__auth.transitionThis}:null,__auth.transitionRedirectType=null),e()}function _processFetch(t,r){_setUser(t),_setAuthenticated(!0),_processRedirect(r)}function _processLogout(t){remove.call(__auth,__auth.options.tokenImpersonateKey),remove.call(__auth,__auth.options.tokenDefaultKey),remove$2.call(__auth,__auth.options.tokenImpersonateKey),remove$2.call(__auth,__auth.options.tokenDefaultKey),remove$2.call(__auth,__auth.options.staySignedInKey),__auth.$vm.state.loaded=!0,__auth.$vm.state.authenticated=!1,__auth.$vm.state.data=null,_processRedirect(t)}function _processImpersonate(t,r){set$2.call(__auth,__auth.options.tokenImpersonateKey,__auth.token(),!get$2.call(__auth,__auth.options.staySignedInKey)),set$2.call(__auth,__auth.options.tokenDefaultKey,t,!get$2.call(__auth,__auth.options.staySignedInKey)),__auth.$vm.state.impersonating=!0,_processRedirect(r)}function _processUnimpersonate(t){remove$2.call(__auth,__auth.options.tokenImpersonateKey),__auth.$vm.state.impersonating=!1,_processRedirect(t)}function _processRedirect(t){t&&__auth.drivers.router.routerGo.call(__auth,t)}function _initVm(t){__auth.$vm=new t({data:function(){return{state:{data:null,loaded:!1,redirect:null,authenticated:null,impersonating:void 0,remember:void 0}}}})}function _initDriverCheck(){var t,r,e,n=["auth","http","router"];for(r=0,e=n.length;r<e;r++){if(!__auth.drivers[n[r]])return console.error('Error (@websanova/vue-auth): "'+n[r]+'" driver must be set.'),!1;if(__auth.drivers[n[r]].init&&(t=__auth.drivers[n[r]].init.call(__auth),t))return console.error("Error (@websanova/vue-auth): "+t),!1}}function _initRefreshInterval(){__auth.options.refreshData.enabled&&__auth.options.refreshData.interval>0&&setInterval(function(){__auth.options.refreshData.enabled&&!_isTokenExpired()&&__auth.refresh()},__auth.options.refreshData.interval*1e3*60)}function _initInterceptors(){__auth.drivers.http.interceptor.call(__auth,_parseRequestIntercept,_parseResponseIntercept),__auth.drivers.router.beforeEach.call(__auth,_processRouterBeforeEach,_processTransitionEach,_setTransitions,_getAuthMeta)}function Auth(t,r){__auth=this,r=r||{},this.plugins=r.plugins,this.drivers=r.drivers,this.options=extend$1(__defaultOptions,r.options),delete r.plugins,delete r.drivers,delete r.options,this.currentToken=null,this.transitionPrev=null,this.transitionThis=null,this.transitionRedirectType=null,_initDriverCheck(),_initVm(t),_initRefreshInterval(),_initInterceptors()}Auth.prototype.ready=function(){return __auth.$vm.state.loaded};Auth.prototype.load=function(){return new Promise(function(t){var r=null;r=setInterval(function(){__auth.$vm.state.loaded&&(clearInterval(r),t())},50)})};Auth.prototype.redirect=function(){return __auth.$vm.state.redirect};Auth.prototype.user=function(t){return t!==void 0&&_processFetch(t),__auth.$vm.state.data};Auth.prototype.check=function(t,r){return _isAccess(t,r)};Auth.prototype.impersonating=function(){var t=!!get$2.call(__auth,__auth.options.tokenImpersonateKey);return __auth.$vm.state.impersonating===void 0&&(__auth.$vm.state.impersonating=t),__auth.$vm.state.impersonating};Auth.prototype.token=function(t,r,e){return r!==void 0&&(r===null?remove$2.call(__auth,t):(e=e===!0||e===!1?e:!get$2.call(__auth,__auth.options.staySignedInKey),set$2.call(__auth,t,r,e))),get$2.call(__auth,t)};Auth.prototype.fetch=function(t){return t=extend$1(__auth.options.fetchData,t),new Promise(function(r,e){__auth.drivers.http.http.call(__auth,t).then(function(n){_processFetch(_parseUserResponseData(n),t.redirect),r(n)},e)})};Auth.prototype.refresh=function(t){return t=extend$1(__auth.options.refreshData,t),__auth.drivers.http.http.call(__auth,t)};Auth.prototype.register=function(t){var r=extend$1(__auth.options.registerData,t);return r.autoLogin!==!0&&(_setRemember(r.remember),_setStaySignedIn(r.staySignedIn)),new Promise(function(e,n){__auth.drivers.http.http.call(__auth,r).then(function(o){var a;r.autoLogin?(a=extend$1(__auth.options.loginData,t),__auth.login(a).then(e,n)):(e(o),_processRedirect(r.redirect))},n)})};Auth.prototype.login=function(t){return t=extend$1(__auth.options.loginData,t),_setRemember(t.remember),_setStaySignedIn(t.staySignedIn),new Promise(function(r,e){__auth.drivers.http.http.call(__auth,t).then(function(n){t.fetchUser||t.fetchUser===void 0&&__auth.options.fetchData.enabled?__auth.fetch({redirect:t.redirect}).then(r,e):(_processFetch(_parseUserResponseData(n),t.redirect),r(n))},function(n){_setAuthenticated(!1),e(n)})})};Auth.prototype.remember=function(t){t&&_setRemember(t);var r=_getRemember();return __auth.$vm.state.remember===void 0&&(__auth.$vm.state.remember=r),__auth.$vm.state.remember};Auth.prototype.unremember=function(){_setRemember(null)};Auth.prototype.logout=function(t){return t=extend$1(__auth.options.logoutData,t),new Promise(function(r,e){t.makeRequest?__auth.drivers.http.http.call(__auth,t).then(function(n){_processLogout(t.redirect),r(n)},e):(_processLogout(t.redirect),r())})};Auth.prototype.impersonate=function(t){return t=extend$1(__auth.options.impersonateData,t),new Promise(function(r,e){var n=__auth.token();__auth.drivers.http.http.call(__auth,t).then(function(o){_processImpersonate(n),t.fetchUser||t.fetchUser===void 0&&__auth.options.fetchData.enabled?__auth.fetch({redirect:t.redirect}).then(r,e):(_processRedirect(t.redirect),r(o))},e)})};Auth.prototype.unimpersonate=function(t){return t=extend$1(__auth.options.unimpersonateData,t),new Promise(function(r,e){t.makeRequest?__auth.drivers.http.http.call(__auth,t).then(r,e):r()}).then(function(){return new Promise(function(r,e){_processUnimpersonate(),t.fetchUser||t.fetchUser===void 0&&__auth.options.fetchData.enabled?__auth.fetch({redirect:t.redirect}).then(r,e):(_processRedirect(t.redirect),r())})})};Auth.prototype.oauth2=function(t,r){var e=[];if(r.code){try{r.state&&(r.state=JSON.parse(decodeURIComponent(r.state)))}catch{console.error("vue-auth:error There was an issue retrieving the state data."),r.state=r.state||{}}return r=extend$1(__auth.options.oauth2Data,[r.state,r]),delete r.code,delete r.state,delete r.params,__auth.login(r)}r=extend$1(__auth.drivers.oauth2[t],r),r.params.state=JSON.stringify(r.params.state||{}),r.params.redirect_uri=_parseRedirectUri(r.params.redirect_uri),Object.keys(r.params).forEach(n=>{e.push(n+"="+encodeURIComponent(r.params[n]))}),window.open(r.url+"?"+e.join("&"),(r.window||{}).name||"_self",(r.window||{}).specs||{},(r.window||{}).replace!==!1)};Auth.prototype.enableImpersonate=function(){__auth.impersonating()&&(__auth.currentToken=null)};Auth.prototype.disableImpersonate=function(){__auth.impersonating()&&(__auth.currentToken=__auth.options.tokenDefaultKey)};const authKey="auth";function Vue$1(t){var r=t.data();this.state=reactive(r.state)}Auth.prototype.install=function(t,r){t.provide(r||authKey,this),t.config.globalProperties.$auth=this};function createAuth(t){return new Auth(Vue$1,t)}function useAuth(t){return inject(t||authKey)}var isVue2=!1;/*!
  * pinia v2.0.29
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let activePinia;const setActivePinia=t=>activePinia=t,piniaSymbol=Symbol();function isPlainObject$1(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var MutationType;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const t=effectScope(!0),r=t.run(()=>ref({}));let e=[],n=[];const o=markRaw({install(a){setActivePinia(o),o._a=a,a.provide(piniaSymbol,o),a.config.globalProperties.$pinia=o,n.forEach(c=>e.push(c)),n=[]},use(a){return!this._a&&!isVue2?n.push(a):e.push(a),this},_p:e,_a:null,_e:t,_s:new Map,state:r});return o}const noop$3=()=>{};function addSubscription(t,r,e,n=noop$3){t.push(r);const o=()=>{const a=t.indexOf(r);a>-1&&(t.splice(a,1),n())};return!e&&getCurrentScope()&&onScopeDispose(o),o}function triggerSubscriptions(t,...r){t.slice().forEach(e=>{e(...r)})}function mergeReactiveObjects(t,r){t instanceof Map&&r instanceof Map&&r.forEach((e,n)=>t.set(n,e)),t instanceof Set&&r instanceof Set&&r.forEach(t.add,t);for(const e in r){if(!r.hasOwnProperty(e))continue;const n=r[e],o=t[e];isPlainObject$1(o)&&isPlainObject$1(n)&&t.hasOwnProperty(e)&&!isRef(n)&&!isReactive(n)?t[e]=mergeReactiveObjects(o,n):t[e]=n}return t}const skipHydrateSymbol=Symbol();function shouldHydrate(t){return!isPlainObject$1(t)||!t.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(t){return!!(isRef(t)&&t.effect)}function createOptionsStore(t,r,e,n){const{state:o,actions:a,getters:c}=r,u=e.state.value[t];let l;function f(){u||(e.state.value[t]=o?o():{});const g=toRefs(e.state.value[t]);return assign$1(g,a,Object.keys(c||{}).reduce((v,b)=>(v[b]=markRaw(computed(()=>{setActivePinia(e);const S=e._s.get(t);return c[b].call(S,S)})),v),{}))}return l=createSetupStore(t,f,r,e,n,!0),l.$reset=function(){const v=o?o():{};this.$patch(b=>{assign$1(b,v)})},l}function createSetupStore(t,r,e={},n,o,a){let c;const u=assign$1({actions:{}},e),l={deep:!0};let f,g,v=markRaw([]),b=markRaw([]),S;const C=n.state.value[t];!a&&!C&&(n.state.value[t]={}),ref({});let O;function A(H){let P;f=g=!1,typeof H=="function"?(H(n.state.value[t]),P={type:MutationType.patchFunction,storeId:t,events:S}):(mergeReactiveObjects(n.state.value[t],H),P={type:MutationType.patchObject,payload:H,storeId:t,events:S});const j=O=Symbol();nextTick().then(()=>{O===j&&(f=!0)}),g=!0,triggerSubscriptions(v,P,n.state.value[t])}const w=noop$3;function V(){c.stop(),v=[],b=[],n._s.delete(t)}function k(H,P){return function(){setActivePinia(n);const j=Array.from(arguments),_=[],z=[];function ae(Pe){_.push(Pe)}function me(Pe){z.push(Pe)}triggerSubscriptions(b,{args:j,name:H,store:W,after:ae,onError:me});let ye;try{ye=P.apply(this&&this.$id===t?this:W,j)}catch(Pe){throw triggerSubscriptions(z,Pe),Pe}return ye instanceof Promise?ye.then(Pe=>(triggerSubscriptions(_,Pe),Pe)).catch(Pe=>(triggerSubscriptions(z,Pe),Promise.reject(Pe))):(triggerSubscriptions(_,ye),ye)}}const M={_p:n,$id:t,$onAction:addSubscription.bind(null,b),$patch:A,$reset:w,$subscribe(H,P={}){const j=addSubscription(v,H,P.detached,()=>_()),_=c.run(()=>watch(()=>n.state.value[t],z=>{(P.flush==="sync"?g:f)&&H({storeId:t,type:MutationType.direct,events:S},z)},assign$1({},l,P)));return j},$dispose:V},W=reactive(M);n._s.set(t,W);const Y=n._e.run(()=>(c=effectScope(),c.run(()=>r())));for(const H in Y){const P=Y[H];if(isRef(P)&&!isComputed(P)||isReactive(P))a||(C&&shouldHydrate(P)&&(isRef(P)?P.value=C[H]:mergeReactiveObjects(P,C[H])),n.state.value[t][H]=P);else if(typeof P=="function"){const j=k(H,P);Y[H]=j,u.actions[H]=P}}return assign$1(W,Y),assign$1(toRaw(W),Y),Object.defineProperty(W,"$state",{get:()=>n.state.value[t],set:H=>{A(P=>{assign$1(P,H)})}}),n._p.forEach(H=>{assign$1(W,c.run(()=>H({store:W,app:n._a,pinia:n,options:u})))}),C&&a&&e.hydrate&&e.hydrate(W.$state,C),f=!0,g=!0,W}function defineStore(t,r,e){let n,o;const a=typeof r=="function";typeof t=="string"?(n=t,o=a?e:r):(o=t,n=t.id);function c(u,l){const f=getCurrentInstance();return u=u||f&&inject(piniaSymbol,null),u&&setActivePinia(u),u=activePinia,u._s.has(n)||(a?createSetupStore(n,r,o,u):createOptionsStore(n,o,u)),u._s.get(n)}return c.$id=n,c}const useStore=defineStore("main",{state:()=>({originalURL:window.location.href,vonage:{apiKey:"47584861",sessionID:"2_MX40NzU4NDg2MX5-MTY3ODY5ODg1NDA2MH5PbUhxbi9SU0REYXA2UFRZMktUektMZVV-fn4",publisherToken:"T1==cGFydG5lcl9pZD00NzU4NDg2MSZzaWc9YzIwYmVhZGVlMjYyNDg5MTM0ZTQ4ODg1MTRmODU1ZDQ1ZGQ2NGY4NzpzZXNzaW9uX2lkPTJfTVg0ME56VTRORGcyTVg1LU1UWTNPRFk1T0RnMU5EQTJNSDVQYlVoeGJpOVNVMFJFWVhBMlVGUlpNa3RVZWt0TVpWVi1mbjQmY3JlYXRlX3RpbWU9MTY3OTYwMjc4NSZub25jZT0wLjc3NTEyODYxMzAwMjM2NDcmcm9sZT1wdWJsaXNoZXImZXhwaXJlX3RpbWU9MTY4MjE5ODM4NSZpbml0aWFsX2xheW91dF9jbGFzc19saXN0PQ==",moderatorToken:"T1==cGFydG5lcl9pZD00NzU4NDg2MSZzaWc9YjBhZDRlM2ViYTliMzZhNjhjODk4NzdkOGNhYmVhOWIwZmJhMmQ2NjpzZXNzaW9uX2lkPTJfTVg0ME56VTRORGcyTVg1LU1UWTNPRFk1T0RnMU5EQTJNSDVQYlVoeGJpOVNVMFJFWVhBMlVGUlpNa3RVZWt0TVpWVi1mbjQmY3JlYXRlX3RpbWU9MTY3OTYwMjgzMyZub25jZT0wLjMxMjkzMzcyMzc1MjIwODc0JnJvbGU9bW9kZXJhdG9yJmV4cGlyZV90aW1lPTE2ODIxOTg0MzMmaW5pdGlhbF9sYXlvdXRfY2xhc3NfbGlzdD0=",session:null,publisher:null,screenPublisher:null,localAudio:!0,localVideo:!0,layout:"default",focusedSpeaker:null,screenSharing:!1,activeScreen:null},name:localStorage.getItem("userName"),loading:!0,loadingText:"Cargando",ready:!1,mode:null,user:null,eventID:null,eventName:null,ams:null,streams:[],banners:[{title:"Lorem ipsum dolor",text:"Some really long description",type:"box",shown:!1},{title:"Lorem ipsum",text:"Other banner test",type:"box",shown:!1}],showBanner:!1,showLastBanner:!1,banner:null,lastBanner:null,logos:["logo.png"],overlays:["overlay.png"],bgs:["background.png"],buttonTheme:"default",color:"#DC2626",logo:null,overlay:null,bg:null,layout:"default",onAir:!1,tab:"chat",brand:"venoot",brands:[{name:"default",logos:["logo.png"],overlays:["overlay.png"],bgs:["background.png"],buttonTheme:"default",color:"#DC2626",logo:null,overlay:null,bg:null},{name:"venoot",logos:["logo.png"],overlays:["overlay.png"],bgs:["background.png"],buttonTheme:"rounded",color:"#1A56DB",logo:null,overlay:null,bg:null}],chatMessages:[],questions:[{title:"Color Favorito",options:[{text:"Azul",selected:0},{text:"Blanco",selected:0},{text:"Rojo",selected:0},{text:"Transparente",selected:0}],status:"idle"}]}),getters:{isHost(t){return t.mode==="host"}},actions:{setName(t){this.name=t,localStorage.setItem("userName",t.value)},changeLayout(t,r=!1){switch(t){case"default":this.vonage.layout="default",r||this.session.signal({type:"change-layout",data:"default"});break;case"focused-speaker":this.vonage.focusedSpeaker===null&&(this.vonage.focusedSpeaker=this.streams[0].stream.id,r||this.session.signal({type:"focused-speaker",data:this.vonage.focusedSpeaker})),this.streams.filter(e=>e.stream.videoType==="camera").length===1?(this.vonage.layout="default",r||this.session.signal({type:"change-layout",data:"default"})):(this.vonage.layout="focused-speaker",r||(this.session.signal({type:"focused-speaker",data:this.vonage.focusedSpeaker}),this.session.signal({type:"change-layout",data:"focused-speaker"})));break;case"vertical-sharing":this.vonage.activeScreen?(this.vonage.layout="vertical-sharing",r||this.session.signal({type:"change-layout",data:"vertical-sharing"})):(this.vonage.layout="default",r||this.session.signal({type:"change-layout",data:"default"}));break;case"full-screen":this.vonage.activeScreen?(this.vonage.layout="full-screen",r||this.session.signal({type:"change-layout",data:"full-screen"})):(this.vonage.layout="default",r||this.session.signal({type:"change-layout",data:"default"}));break}}}});var _a;const isClient=typeof window<"u",isString$1=t=>typeof t=="string",noop$2=()=>{};isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(t){return typeof t=="function"?t():unref(t)}function identity(t){return t}function tryOnScopeDispose(t){return getCurrentScope()?(onScopeDispose(t),!0):!1}function unrefElement(t){var r;const e=resolveUnref(t);return(r=e==null?void 0:e.$el)!=null?r:e}const defaultWindow=isClient?window:void 0;isClient&&window.document;isClient&&window.navigator;isClient&&window.location;function useEventListener(...t){let r,e,n,o;if(isString$1(t[0])||Array.isArray(t[0])?([e,n,o]=t,r=defaultWindow):[r,e,n,o]=t,!r)return noop$2;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);const a=[],c=()=>{a.forEach(g=>g()),a.length=0},u=(g,v,b,S)=>(g.addEventListener(v,b,S),()=>g.removeEventListener(v,b,S)),l=watch(()=>[unrefElement(r),resolveUnref(o)],([g,v])=>{c(),g&&a.push(...e.flatMap(b=>n.map(S=>u(g,b,S,v))))},{immediate:!0,flush:"post"}),f=()=>{l(),c()};return tryOnScopeDispose(f),f}const _global$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global$1[globalKey]=_global$1[globalKey]||{};_global$1[globalKey];var SwipeDirection;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp$1=Object.defineProperty,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(t,r,e)=>r in t?__defProp$1(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues$1=(t,r)=>{for(var e in r||(r={}))__hasOwnProp$1.call(r,e)&&__defNormalProp$1(t,e,r[e]);if(__getOwnPropSymbols$1)for(var e of __getOwnPropSymbols$1(r))__propIsEnum$1.call(r,e)&&__defNormalProp$1(t,e,r[e]);return t};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues$1({linear:identity},_TransitionPresets);/*!
* tabbable 6.1.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var candidateSelectors=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],candidateSelector=candidateSelectors.join(","),NoElement=typeof Element>"u",matches=NoElement?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,getRootNode=!NoElement&&Element.prototype.getRootNode?function(t){var r;return t==null||(r=t.getRootNode)===null||r===void 0?void 0:r.call(t)}:function(t){return t==null?void 0:t.ownerDocument},isInert=function t(r,e){var n;e===void 0&&(e=!0);var o=r==null||(n=r.getAttribute)===null||n===void 0?void 0:n.call(r,"inert"),a=o===""||o==="true",c=a||e&&r&&t(r.parentNode);return c},isContentEditable=function(r){var e,n=r==null||(e=r.getAttribute)===null||e===void 0?void 0:e.call(r,"contenteditable");return n===""||n==="true"},getCandidates=function(r,e,n){if(isInert(r))return[];var o=Array.prototype.slice.apply(r.querySelectorAll(candidateSelector));return e&&matches.call(r,candidateSelector)&&o.unshift(r),o=o.filter(n),o},getCandidatesIteratively=function t(r,e,n){for(var o=[],a=Array.from(r);a.length;){var c=a.shift();if(!isInert(c,!1))if(c.tagName==="SLOT"){var u=c.assignedElements(),l=u.length?u:c.children,f=t(l,!0,n);n.flatten?o.push.apply(o,f):o.push({scopeParent:c,candidates:f})}else{var g=matches.call(c,candidateSelector);g&&n.filter(c)&&(e||!r.includes(c))&&o.push(c);var v=c.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(c),b=!isInert(v,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(c));if(v&&b){var S=t(v===!0?c.children:v.children,!0,n);n.flatten?o.push.apply(o,S):o.push({scopeParent:c,candidates:S})}else a.unshift.apply(a,c.children)}}return o},getTabindex=function(r,e){return r.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(r.tagName)||isContentEditable(r))&&isNaN(parseInt(r.getAttribute("tabindex"),10))?0:r.tabIndex},sortOrderedTabbables=function(r,e){return r.tabIndex===e.tabIndex?r.documentOrder-e.documentOrder:r.tabIndex-e.tabIndex},isInput=function(r){return r.tagName==="INPUT"},isHiddenInput=function(r){return isInput(r)&&r.type==="hidden"},isDetailsWithSummary=function(r){var e=r.tagName==="DETAILS"&&Array.prototype.slice.apply(r.children).some(function(n){return n.tagName==="SUMMARY"});return e},getCheckedRadio=function(r,e){for(var n=0;n<r.length;n++)if(r[n].checked&&r[n].form===e)return r[n]},isTabbableRadio=function(r){if(!r.name)return!0;var e=r.form||getRootNode(r),n=function(u){return e.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=n(window.CSS.escape(r.name));else try{o=n(r.name)}catch(c){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",c.message),!1}var a=getCheckedRadio(o,r.form);return!a||a===r},isRadio=function(r){return isInput(r)&&r.type==="radio"},isNonTabbableRadio=function(r){return isRadio(r)&&!isTabbableRadio(r)},isNodeAttached=function(r){var e,n=r&&getRootNode(r),o=(e=n)===null||e===void 0?void 0:e.host,a=!1;if(n&&n!==r){var c,u,l;for(a=!!((c=o)!==null&&c!==void 0&&(u=c.ownerDocument)!==null&&u!==void 0&&u.contains(o)||r!=null&&(l=r.ownerDocument)!==null&&l!==void 0&&l.contains(r));!a&&o;){var f,g,v;n=getRootNode(o),o=(f=n)===null||f===void 0?void 0:f.host,a=!!((g=o)!==null&&g!==void 0&&(v=g.ownerDocument)!==null&&v!==void 0&&v.contains(o))}}return a},isZeroArea=function(r){var e=r.getBoundingClientRect(),n=e.width,o=e.height;return n===0&&o===0},isHidden=function(r,e){var n=e.displayCheck,o=e.getShadowRoot;if(getComputedStyle(r).visibility==="hidden")return!0;var a=matches.call(r,"details>summary:first-of-type"),c=a?r.parentElement:r;if(matches.call(c,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof o=="function"){for(var u=r;r;){var l=r.parentElement,f=getRootNode(r);if(l&&!l.shadowRoot&&o(l)===!0)return isZeroArea(r);r.assignedSlot?r=r.assignedSlot:!l&&f!==r.ownerDocument?r=f.host:r=l}r=u}if(isNodeAttached(r))return!r.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return isZeroArea(r);return!1},isDisabledFromFieldset=function(r){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(r.tagName))for(var e=r.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var n=0;n<e.children.length;n++){var o=e.children.item(n);if(o.tagName==="LEGEND")return matches.call(e,"fieldset[disabled] *")?!0:!o.contains(r)}return!0}e=e.parentElement}return!1},isNodeMatchingSelectorFocusable=function(r,e){return!(e.disabled||isInert(e)||isHiddenInput(e)||isHidden(e,r)||isDetailsWithSummary(e)||isDisabledFromFieldset(e))},isNodeMatchingSelectorTabbable=function(r,e){return!(isNonTabbableRadio(e)||getTabindex(e)<0||!isNodeMatchingSelectorFocusable(r,e))},isValidShadowRootTabbable=function(r){var e=parseInt(r.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},sortByOrder=function t(r){var e=[],n=[];return r.forEach(function(o,a){var c=!!o.scopeParent,u=c?o.scopeParent:o,l=getTabindex(u,c),f=c?t(o.candidates):u;l===0?c?e.push.apply(e,f):e.push(u):n.push({documentOrder:a,tabIndex:l,item:o,isScope:c,content:f})}),n.sort(sortOrderedTabbables).reduce(function(o,a){return a.isScope?o.push.apply(o,a.content):o.push(a.content),o},[]).concat(e)},tabbable=function(r,e){e=e||{};var n;return e.getShadowRoot?n=getCandidatesIteratively([r],e.includeContainer,{filter:isNodeMatchingSelectorTabbable.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:isValidShadowRootTabbable}):n=getCandidates(r,e.includeContainer,isNodeMatchingSelectorTabbable.bind(null,e)),sortByOrder(n)},focusable=function(r,e){e=e||{};var n;return e.getShadowRoot?n=getCandidatesIteratively([r],e.includeContainer,{filter:isNodeMatchingSelectorFocusable.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):n=getCandidates(r,e.includeContainer,isNodeMatchingSelectorFocusable.bind(null,e)),n},isTabbable=function(r,e){if(e=e||{},!r)throw new Error("No node provided");return matches.call(r,candidateSelector)===!1?!1:isNodeMatchingSelectorTabbable(e,r)},focusableCandidateSelector=candidateSelectors.concat("iframe").join(","),isFocusable=function(r,e){if(e=e||{},!r)throw new Error("No node provided");return matches.call(r,focusableCandidateSelector)===!1?!1:isNodeMatchingSelectorFocusable(e,r)};/*!
* focus-trap 7.3.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ownKeys(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function _objectSpread2(t){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ownKeys(Object(e),!0).forEach(function(n){_defineProperty(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ownKeys(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function _defineProperty(t,r,e){return r=_toPropertyKey(r),r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function _toPrimitive(t,r){if(typeof t!="object"||t===null)return t;var e=t[Symbol.toPrimitive];if(e!==void 0){var n=e.call(t,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function _toPropertyKey(t){var r=_toPrimitive(t,"string");return typeof r=="symbol"?r:String(r)}var activeFocusTraps={activateTrap:function(r,e){if(r.length>0){var n=r[r.length-1];n!==e&&n.pause()}var o=r.indexOf(e);o===-1||r.splice(o,1),r.push(e)},deactivateTrap:function(r,e){var n=r.indexOf(e);n!==-1&&r.splice(n,1),r.length>0&&r[r.length-1].unpause()}},isSelectableInput=function(r){return r.tagName&&r.tagName.toLowerCase()==="input"&&typeof r.select=="function"},isEscapeEvent=function(r){return r.key==="Escape"||r.key==="Esc"||r.keyCode===27},isTabEvent=function(r){return r.key==="Tab"||r.keyCode===9},isKeyForward=function(r){return isTabEvent(r)&&!r.shiftKey},isKeyBackward=function(r){return isTabEvent(r)&&r.shiftKey},delay=function(r){return setTimeout(r,0)},findIndex=function(r,e){var n=-1;return r.every(function(o,a){return e(o)?(n=a,!1):!0}),n},valueOrHandler=function(r){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];return typeof r=="function"?r.apply(void 0,n):r},getActualTarget=function(r){return r.target.shadowRoot&&typeof r.composedPath=="function"?r.composedPath()[0]:r.target},internalTrapStack=[],createFocusTrap=function(r,e){var n=(e==null?void 0:e.document)||document,o=(e==null?void 0:e.trapStack)||internalTrapStack,a=_objectSpread2({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward,isKeyBackward},e),c={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},u,l=function(H,P,j){return H&&H[P]!==void 0?H[P]:a[j||P]},f=function(H){return c.containerGroups.findIndex(function(P){var j=P.container,_=P.tabbableNodes;return j.contains(H)||_.find(function(z){return z===H})})},g=function(H){var P=a[H];if(typeof P=="function"){for(var j=arguments.length,_=new Array(j>1?j-1:0),z=1;z<j;z++)_[z-1]=arguments[z];P=P.apply(void 0,_)}if(P===!0&&(P=void 0),!P){if(P===void 0||P===!1)return P;throw new Error("`".concat(H,"` was specified but was not a node, or did not return a node"))}var ae=P;if(typeof P=="string"&&(ae=n.querySelector(P),!ae))throw new Error("`".concat(H,"` as selector refers to no known node"));return ae},v=function(){var H=g("initialFocus");if(H===!1)return!1;if(H===void 0)if(f(n.activeElement)>=0)H=n.activeElement;else{var P=c.tabbableGroups[0],j=P&&P.firstTabbableNode;H=j||g("fallbackFocus")}if(!H)throw new Error("Your focus-trap needs to have at least one focusable element");return H},b=function(){if(c.containerGroups=c.containers.map(function(H){var P=tabbable(H,a.tabbableOptions),j=focusable(H,a.tabbableOptions);return{container:H,tabbableNodes:P,focusableNodes:j,firstTabbableNode:P.length>0?P[0]:null,lastTabbableNode:P.length>0?P[P.length-1]:null,nextTabbableNode:function(z){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,me=j.findIndex(function(ye){return ye===z});if(!(me<0))return ae?j.slice(me+1).find(function(ye){return isTabbable(ye,a.tabbableOptions)}):j.slice(0,me).reverse().find(function(ye){return isTabbable(ye,a.tabbableOptions)})}}}),c.tabbableGroups=c.containerGroups.filter(function(H){return H.tabbableNodes.length>0}),c.tabbableGroups.length<=0&&!g("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},S=function Y(H){if(H!==!1&&H!==n.activeElement){if(!H||!H.focus){Y(v());return}H.focus({preventScroll:!!a.preventScroll}),c.mostRecentlyFocusedNode=H,isSelectableInput(H)&&H.select()}},C=function(H){var P=g("setReturnFocus",H);return P||(P===!1?!1:H)},O=function(H){var P=getActualTarget(H);if(!(f(P)>=0)){if(valueOrHandler(a.clickOutsideDeactivates,H)){u.deactivate({returnFocus:a.returnFocusOnDeactivate});return}valueOrHandler(a.allowOutsideClick,H)||H.preventDefault()}},A=function(H){var P=getActualTarget(H),j=f(P)>=0;j||P instanceof Document?j&&(c.mostRecentlyFocusedNode=P):(H.stopImmediatePropagation(),S(c.mostRecentlyFocusedNode||v()))},w=function(H){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=getActualTarget(H);b();var _=null;if(c.tabbableGroups.length>0){var z=f(j),ae=z>=0?c.containerGroups[z]:void 0;if(z<0)P?_=c.tabbableGroups[c.tabbableGroups.length-1].lastTabbableNode:_=c.tabbableGroups[0].firstTabbableNode;else if(P){var me=findIndex(c.tabbableGroups,function(je){var Ke=je.firstTabbableNode;return j===Ke});if(me<0&&(ae.container===j||isFocusable(j,a.tabbableOptions)&&!isTabbable(j,a.tabbableOptions)&&!ae.nextTabbableNode(j,!1))&&(me=z),me>=0){var ye=me===0?c.tabbableGroups.length-1:me-1,Pe=c.tabbableGroups[ye];_=Pe.lastTabbableNode}else isTabEvent(H)||(_=ae.nextTabbableNode(j,!1))}else{var Te=findIndex(c.tabbableGroups,function(je){var Ke=je.lastTabbableNode;return j===Ke});if(Te<0&&(ae.container===j||isFocusable(j,a.tabbableOptions)&&!isTabbable(j,a.tabbableOptions)&&!ae.nextTabbableNode(j))&&(Te=z),Te>=0){var Ue=Te===c.tabbableGroups.length-1?0:Te+1,_e=c.tabbableGroups[Ue];_=_e.firstTabbableNode}else isTabEvent(H)||(_=ae.nextTabbableNode(j))}}else _=g("fallbackFocus");_&&(isTabEvent(H)&&H.preventDefault(),S(_))},V=function(H){if(isEscapeEvent(H)&&valueOrHandler(a.escapeDeactivates,H)!==!1){H.preventDefault(),u.deactivate();return}(a.isKeyForward(H)||a.isKeyBackward(H))&&w(H,a.isKeyBackward(H))},k=function(H){var P=getActualTarget(H);f(P)>=0||valueOrHandler(a.clickOutsideDeactivates,H)||valueOrHandler(a.allowOutsideClick,H)||(H.preventDefault(),H.stopImmediatePropagation())},M=function(){if(c.active)return activeFocusTraps.activateTrap(o,u),c.delayInitialFocusTimer=a.delayInitialFocus?delay(function(){S(v())}):S(v()),n.addEventListener("focusin",A,!0),n.addEventListener("mousedown",O,{capture:!0,passive:!1}),n.addEventListener("touchstart",O,{capture:!0,passive:!1}),n.addEventListener("click",k,{capture:!0,passive:!1}),n.addEventListener("keydown",V,{capture:!0,passive:!1}),u},W=function(){if(c.active)return n.removeEventListener("focusin",A,!0),n.removeEventListener("mousedown",O,!0),n.removeEventListener("touchstart",O,!0),n.removeEventListener("click",k,!0),n.removeEventListener("keydown",V,!0),u};return u={get active(){return c.active},get paused(){return c.paused},activate:function(H){if(c.active)return this;var P=l(H,"onActivate"),j=l(H,"onPostActivate"),_=l(H,"checkCanFocusTrap");_||b(),c.active=!0,c.paused=!1,c.nodeFocusedBeforeActivation=n.activeElement,P&&P();var z=function(){_&&b(),M(),j&&j()};return _?(_(c.containers.concat()).then(z,z),this):(z(),this)},deactivate:function(H){if(!c.active)return this;var P=_objectSpread2({onDeactivate:a.onDeactivate,onPostDeactivate:a.onPostDeactivate,checkCanReturnFocus:a.checkCanReturnFocus},H);clearTimeout(c.delayInitialFocusTimer),c.delayInitialFocusTimer=void 0,W(),c.active=!1,c.paused=!1,activeFocusTraps.deactivateTrap(o,u);var j=l(P,"onDeactivate"),_=l(P,"onPostDeactivate"),z=l(P,"checkCanReturnFocus"),ae=l(P,"returnFocus","returnFocusOnDeactivate");j&&j();var me=function(){delay(function(){ae&&S(C(c.nodeFocusedBeforeActivation)),_&&_()})};return ae&&z?(z(C(c.nodeFocusedBeforeActivation)).then(me,me),this):(me(),this)},pause:function(){return c.paused||!c.active?this:(c.paused=!0,W(),this)},unpause:function(){return!c.paused||!c.active?this:(c.paused=!1,b(),M(),this)},updateContainerElements:function(H){var P=[].concat(H).filter(Boolean);return c.containers=P.map(function(j){return typeof j=="string"?n.querySelector(j):j}),c.active&&b(),this}},u.updateContainerElements(r),u},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(t,r,e)=>r in t?__defProp(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,__spreadValues=(t,r)=>{for(var e in r||(r={}))__hasOwnProp.call(r,e)&&__defNormalProp(t,e,r[e]);if(__getOwnPropSymbols)for(var e of __getOwnPropSymbols(r))__propIsEnum.call(r,e)&&__defNormalProp(t,e,r[e]);return t},__spreadProps=(t,r)=>__defProps(t,__getOwnPropDescs(r)),__objRest=(t,r)=>{var e={};for(var n in t)__hasOwnProp.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&__getOwnPropSymbols)for(var n of __getOwnPropSymbols(t))r.indexOf(n)<0&&__propIsEnum.call(t,n)&&(e[n]=t[n]);return e};function useFocusTrap(t,r={}){let e;const n=r,{immediate:o}=n,a=__objRest(n,["immediate"]),c=ref(!1),u=ref(!1),l=b=>e&&e.activate(b),f=b=>e&&e.deactivate(b),g=()=>{e&&(e.pause(),u.value=!0)},v=()=>{e&&(e.unpause(),u.value=!1)};return watch(()=>unrefElement(t),b=>{b&&(e=createFocusTrap(b,__spreadProps(__spreadValues({},a),{onActivate(){c.value=!0,r.onActivate&&r.onActivate()},onDeactivate(){c.value=!1,r.onDeactivate&&r.onDeactivate()}})),o&&l())},{flush:"post"}),tryOnScopeDispose(()=>f()),{hasFocus:c,isPaused:u,activate:l,deactivate:f,pause:g,unpause:v}}const ue={modalId:{type:[String,Number,Symbol],default:void 0},modelValue:{type:Boolean,default:void 0},displayDirective:{type:String,default:"if",validator:t=>["if","show"].includes(t)},hideOverlay:{type:Boolean,default:void 0},overlayTransition:{type:[String,Object],default:void 0},contentTransition:{type:[String,Object],default:void 0},overlayClass:{type:void 0,default:void 0},contentClass:{type:void 0,default:void 0},overlayStyle:{type:[String,Object,Array],default:void 0},contentStyle:{type:[String,Object,Array],default:void 0},clickToClose:{type:Boolean,default:!0},escToClose:{type:Boolean,default:!0},background:{type:String,default:"non-interactive",validator:t=>["interactive","non-interactive"].includes(t)},focusTrap:{type:[Boolean,Object],default:()=>({allowOutsideClick:!0})},lockScroll:{type:Boolean,default:!0},zIndexFn:{type:Function,default:({index:t})=>1e3+2*t},swipeToClose:{type:String,default:"none",validator:t=>["none","up","right","down","left"].includes(t)},threshold:{type:Number,default:0},showSwipeBanner:{type:Boolean,default:void 0},preventNavigationGestures:{type:Boolean,default:void 0}};function Oe(t=!1){const r=ref(t),e=ref(r.value?0:void 0);return[r,e,{beforeEnter(){e.value=1},afterEnter(){e.value=0},beforeLeave(){e.value=3},afterLeave(){e.value=2}}]}function oo(t,r){const{modelValueLocal:e,onEntering:n,onEnter:o,onLeaving:a,onLeave:c}=r,u=ref(e.value),[l,f,g]=Oe(u.value),[v,b,S]=Oe(u.value),C=computed(()=>typeof t.contentTransition=="string"?{name:t.contentTransition}:{...t.contentTransition}),O=computed(()=>typeof t.overlayTransition=="string"?{name:t.overlayTransition}:{...t.overlayTransition}),A=computed(()=>(t.hideOverlay||b.value===2)&&f.value===2);watch(A,k=>{k&&(u.value=!1)}),watch(f,k=>{switch(k){case 1:return n();case 0:return o();case 3:return a();case 2:return c()}});async function w(){u.value=!0,await nextTick(),l.value=!0,v.value=!0}function V(){l.value=!1,v.value=!1}return{visible:u,contentVisible:l,contentListeners:g,contentTransition:C,overlayVisible:v,overlayListeners:S,overlayTransition:O,enterTransition:w,leaveTransition:V}}function no(t,r,e){const{vfmRootEl:n,visible:o,modelValueLocal:a}=e,c=ref();function u(){o.value&&t.escToClose&&(a.value=!1)}function l(g){c.value=g==null?void 0:g.target}function f(){c.value===n.value&&(t.clickToClose?a.value=!1:r("clickOutside"))}return{onEsc:u,onMouseupRoot:f,onMousedown:l}}function to(t,r){const e=ref(!!t.modelValue);return watch(()=>t.modelValue,n=>{e.value=!!n}),watch(e,n=>{n!==t.modelValue&&r("update:modelValue",n)}),{modelValueLocal:e}}function lo(t,r){if(t.focusTrap===!1)return{focus(){},focusLast(){},blur(){}};const{focusEl:e,openedModals:n}=r,{hasFocus:o,activate:a,deactivate:c}=useFocusTrap(e,t.focusTrap);function u(){requestAnimationFrame(()=>{a()})}function l(){n.length<=0||nextTick(()=>{const g=n[n.length-1];g==null||g.value.focus()})}function f(){o.value&&c()}return{focus:u,focusLast:l,blur:f}}let ce=!1;if(typeof window<"u"){const t={get passive(){ce=!0}};window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}const xe=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let R=[],Q=!1,q=0,Ae=-1,G,U;const so=t=>{if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const r=window.getComputedStyle(t);return["auto","scroll"].includes(r.overflowY)&&t.scrollHeight>t.clientHeight},ro=(t,r)=>!(t.scrollTop===0&&r<0||t.scrollTop+t.clientHeight+r>=t.scrollHeight&&r>0),ao=t=>{const r=[];for(;t;){if(r.push(t),t.classList.contains("vfm"))return r;t=t.parentElement}return r},io$1=(t,r)=>{let e=!1;return ao(t).forEach(n=>{so(n)&&ro(n,r)&&(e=!0)}),e},Fe=t=>R.some(()=>io$1(t,-q)),ee=t=>{const r=t||window.event;return Fe(r.target)||r.touches.length>1?!0:(r.preventDefault&&r.preventDefault(),!1)},uo=t=>{if(U===void 0){const r=!!t&&t.reserveScrollBarGap===!0,e=window.innerWidth-document.documentElement.clientWidth;if(r&&e>0){const n=parseInt(getComputedStyle(document.body).getPropertyValue("padding-right"),10);U=document.body.style.paddingRight,document.body.style.paddingRight=`${n+e}px`}}G===void 0&&(G=document.body.style.overflow,document.body.style.overflow="hidden")},co=()=>{U!==void 0&&(document.body.style.paddingRight=U,U=void 0),G!==void 0&&(document.body.style.overflow=G,G=void 0)},fo=t=>t?t.scrollHeight-t.scrollTop<=t.clientHeight:!1,vo=(t,r)=>(q=t.targetTouches[0].clientY-Ae,Fe(t.target)?!1:r&&r.scrollTop===0&&q>0||fo(r)&&q<0?ee(t):(t.stopPropagation(),!0)),po=(t,r)=>{if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(R.some(n=>n.targetElement===t))return;const e={targetElement:t,options:r||{}};R=[...R,e],xe?(t.ontouchstart=n=>{n.targetTouches.length===1&&(Ae=n.targetTouches[0].clientY)},t.ontouchmove=n=>{n.targetTouches.length===1&&vo(n,t)},Q||(document.addEventListener("touchmove",ee,ce?{passive:!1}:void 0),Q=!0)):uo(r)},mo=t=>{if(!t){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}R=R.filter(r=>r.targetElement!==t),xe?(t.ontouchstart=null,t.ontouchmove=null,Q&&R.length===0&&(document.removeEventListener("touchmove",ee,ce?{passive:!1}:void 0),Q=!1)):R.length||co()};function yo(t,r){const{lockScrollEl:e}=r;watch(()=>t.lockScroll,a=>{a?o():n()}),onBeforeUnmount(()=>{n()});function n(){e.value&&mo(e.value)}function o(){t.lockScroll&&e.value&&po(e.value,{reserveScrollBarGap:!0,allowTouchMove:a=>{for(;a&&a!==document.body;){if(a.getAttribute("vfm-scroll-lock-ignore")!==null)return!0;a=a.parentElement}return!1}})}return{enableBodyScroll:n,disableBodyScroll:o}}function ho(t){function r(e){switch(e){case"beforeOpen":t(e);break;case"beforeClose":t(e);break;case"opened":t(e);break;case"closed":t(e);break}}return{emitEvent:r}}function wo(t,r){const{openedModals:e}=r,n=ref();function o(){var a;n.value=(a=t.zIndexFn)==null?void 0:a.call(t,{index:e.length})}return{zIndex:n,refreshZIndex:o}}const bo=t=>(...r)=>{t&&(t==null||t(...r),t=null)},F=()=>{};function Z(t,r,e){return t>e?e:t<r?r:t}const Ve=t=>{if(t instanceof MouseEvent){const{clientX:r,clientY:e}=t;return{x:r,y:e}}else{const{clientX:r,clientY:e}=t.targetTouches[0];return{x:r,y:e}}};function To(t){if(!t)return!1;let r=!1;const e={get passive(){return r=!0,!1}};return t.addEventListener("x",F,e),t.removeEventListener("x",F),r}function So(t,{threshold:r=0,onSwipeStart:e,onSwipe:n,onSwipeEnd:o,passive:a=!0}){const c=reactive({x:0,y:0}),u=reactive({x:0,y:0}),l=computed(()=>c.x-u.x),f=computed(()=>c.y-u.y),{max:g,abs:v}=Math,b=computed(()=>g(v(l.value),v(f.value))>=r),S=ref(!1),C=computed(()=>b.value?v(l.value)>v(f.value)?l.value>0?"left":"right":f.value>0?"up":"down":"none"),O=(H,P)=>{c.x=H,c.y=P},A=(H,P)=>{u.x=H,u.y=P};let w,V;function k(H){w.capture&&!w.passive&&H.preventDefault();const{x:P,y:j}=Ve(H);O(P,j),A(P,j),e==null||e(H),V=[useEventListener(t,"mousemove",M,w),useEventListener(t,"touchmove",M,w),useEventListener(t,"mouseup",W,w),useEventListener(t,"touchend",W,w),useEventListener(t,"touchcancel",W,w)]}function M(H){const{x:P,y:j}=Ve(H);A(P,j),!S.value&&b.value&&(S.value=!0),S.value&&(n==null||n(H))}function W(H){S.value&&(o==null||o(H,C.value)),S.value=!1,V.forEach(P=>P())}let Y=[];return onMounted(()=>{const H=To(window==null?void 0:window.document);a?w=H?{passive:!0}:{capture:!1}:w=H?{passive:!1,capture:!0}:{capture:!0},Y=[useEventListener(t,"mousedown",k,w),useEventListener(t,"touchstart",k,w)]}),{isSwiping:S,direction:C,coordsStart:c,coordsEnd:u,lengthX:l,lengthY:f,stop:()=>{Y.forEach(H=>H()),V.forEach(H=>H())}}}function Mo(t,r){const{modelValueLocal:e}=r,n=.1,o=300,a=ref(),c=ref(),u=computed(()=>{if(!(t.swipeToClose===void 0||t.swipeToClose==="none"))return t.showSwipeBanner?c.value:a.value}),l=ref(0),f=ref(!0);let g=F,v=!0,b,S=!1;const{lengthX:C,lengthY:O,direction:A,isSwiping:w}=So(u,{threshold:t.threshold,onSwipeStart(W){g=useEventListener(document,"selectionchange",()=>{var Y;f.value=(Y=window.getSelection())==null?void 0:Y.isCollapsed}),b=new Date().getTime(),S=V(W==null?void 0:W.target)},onSwipe(){var W,Y,H,P;if(S&&f.value&&A.value===t.swipeToClose){if(A.value==="up"){const j=Z(Math.abs(O.value||0),0,((W=u.value)==null?void 0:W.offsetHeight)||0)-(t.threshold||0);l.value=j}else if(A.value==="down"){const j=Z(Math.abs(O.value||0),0,((Y=u.value)==null?void 0:Y.offsetHeight)||0)-(t.threshold||0);l.value=-j}else if(A.value==="right"){const j=Z(Math.abs(C.value||0),0,((H=u.value)==null?void 0:H.offsetWidth)||0)-(t.threshold||0);l.value=-j}else if(A.value==="left"){const j=Z(Math.abs(C.value||0),0,((P=u.value)==null?void 0:P.offsetWidth)||0)-(t.threshold||0);l.value=j}}},onSwipeEnd(W,Y){if(g(),!f.value){f.value=!0;return}const H=new Date().getTime(),P=Y===t.swipeToClose,j=(()=>{var z,ae;if(Y==="up"||Y==="down")return Math.abs((O==null?void 0:O.value)||0)>n*(((z=u.value)==null?void 0:z.offsetHeight)||0);if(Y==="left"||Y==="right")return Math.abs((C==null?void 0:C.value)||0)>n*(((ae=u.value)==null?void 0:ae.offsetWidth)||0)})(),_=H-b<=o;if(v&&S&&P&&(j||_)){l.value=0,e.value=!1;return}l.value=0}});watch(()=>f.value,W=>{W||(l.value=0)}),watch(()=>l.value,(W,Y)=>{switch(t.swipeToClose){case"down":case"right":v=W<Y;break;case"up":case"left":v=W>Y;break}});function V(W){const Y=W==null?void 0:W.tagName;if(!Y||["INPUT","TEXTAREA"].includes(Y))return!1;const H=(()=>{switch(t.swipeToClose){case"up":return(W==null?void 0:W.scrollTop)+(W==null?void 0:W.clientHeight)===(W==null?void 0:W.scrollHeight);case"left":return(W==null?void 0:W.scrollLeft)+(W==null?void 0:W.clientWidth)===(W==null?void 0:W.scrollWidth);case"down":return(W==null?void 0:W.scrollTop)===0;case"right":return(W==null?void 0:W.scrollLeft)===0;default:return!1}})();return W===u.value?H:H&&V(W==null?void 0:W.parentElement)}watch(()=>e.value,W=>{W&&(l.value=0)});const k=computed(()=>{if(t.swipeToClose==="none")return;const W=(()=>{switch(t.swipeToClose){case"up":case"down":return"translateY";case"left":case"right":return"translateX"}})();return{class:{"vfm-bounce-back":!w.value},style:w.value?{transform:`${W}(${-l.value}px)`}:""}});function M(W){t.preventNavigationGestures&&W.preventDefault()}return{vfmContentEl:a,swipeBannerEl:c,bindSwipe:k,onTouchStartSwipeBanner:M}}const de=Symbol("vfm"),fe=Symbol("internalVfm"),go=defineComponent({__name:"CoreModal",props:ue,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(t,{emit:r}){const e=t,{modals:n,openedModals:o}=inject(de,{modals:[],openedModals:[]}),{moveToLastOpenedModals:a,openLastOverlay:c,deleteFromOpenedModals:u,deleteFromModals:l}=inject(fe,{moveToLastOpenedModals:F,openLastOverlay:F,deleteFromOpenedModals:F,deleteFromModals:F}),f=ref(),{zIndex:g,refreshZIndex:v}=wo(e,{openedModals:o}),{focus:b,focusLast:S,blur:C}=lo(e,{focusEl:f,openedModals:o}),{enableBodyScroll:O,disableBodyScroll:A}=yo(e,{lockScrollEl:f}),{modelValueLocal:w}=to(e,r),{emitEvent:V}=ho(r);let k=F;const{visible:M,contentVisible:W,contentListeners:Y,contentTransition:H,overlayVisible:P,overlayListeners:j,overlayTransition:_,enterTransition:z,leaveTransition:ae}=oo(e,{modelValueLocal:w,async onEntering(){b(),await nextTick(),A()},onEnter(){V("opened"),k("opened")},onLeaving(){C()},onLeave(){V("closed"),k("closed")}}),{onEsc:me,onMouseupRoot:ye,onMousedown:Pe}=no(e,r,{vfmRootEl:f,visible:M,modelValueLocal:w}),{vfmContentEl:Te,swipeBannerEl:Ue,bindSwipe:_e,onTouchStartSwipeBanner:je}=Mo(e,{modelValueLocal:w}),Ke=toRef(e,"hideOverlay"),De=computed(()=>({modalId:e.modalId,hideOverlay:Ke,overlayVisible:P,focus:b,toggle(gt){return new Promise(Ee=>{k=bo(We=>Ee(We));const Le=typeof gt=="boolean"?gt:!w.value;w.value=Le,r("update:modelValue",Le)})}}));onMounted(()=>{n.push(De)}),w.value&&Ze(),watch(w,gt=>{gt?Ze():tt()});async function Ze(){V("beforeOpen"),v(),a(De),c(),z()}function tt(){V("beforeClose"),O(),u(De),S(),c(),ae()}return onBeforeUnmount(()=>{O(),l(De),u(De),S(),c()}),(gt,Ee)=>gt.displayDirective!=="if"||unref(M)?withDirectives((openBlock(),createElementBlock("div",{key:0,ref_key:"vfmRootEl",ref:f,class:normalizeClass(["vfm vfm--fixed vfm--inset",{"vfm--prevent-none":gt.background==="interactive"}]),style:normalizeStyle({zIndex:unref(g)}),role:"dialog","aria-modal":"true",onKeydown:Ee[7]||(Ee[7]=withKeys((...Le)=>unref(me)&&unref(me)(...Le),["esc"])),onMouseup:Ee[8]||(Ee[8]=withModifiers(()=>unref(ye)(),["self"])),onMousedown:Ee[9]||(Ee[9]=withModifiers(Le=>unref(Pe)(Le),["self"]))},[unref(Ke)?createCommentVNode("",!0):(openBlock(),createBlock(Transition,mergeProps({key:0},unref(_),{appear:""},toHandlers(unref(j))),{default:withCtx(()=>[unref(P)?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["vfm__overlay vfm--overlay vfm--absolute vfm--inset vfm--prevent-none",gt.overlayClass]),style:normalizeStyle([{"z-index":"-1"},gt.overlayStyle]),"aria-hidden":"true"},null,6)):createCommentVNode("",!0)]),_:1},16)),createVNode(Transition,mergeProps(unref(H),{appear:""},toHandlers(unref(Y))),{default:withCtx(()=>[withDirectives(createBaseVNode("div",mergeProps({ref_key:"vfmContentEl",ref:Te,class:["vfm__content vfm--outline-none",[gt.contentClass,{"vfm--prevent-auto":gt.background==="interactive"}]],style:gt.contentStyle,tabindex:"0"},unref(_e),{onMousedown:Ee[6]||(Ee[6]=()=>unref(Pe)())}),[renderSlot(gt.$slots,"default"),gt.showSwipeBanner?(openBlock(),createElementBlock("div",{key:0,ref_key:"swipeBannerEl",ref:Ue,class:"vfm-swipe-banner-container",onTouchstart:Ee[2]||(Ee[2]=Le=>unref(je)(Le))},[renderSlot(gt.$slots,"swipe-banner",{},()=>[createBaseVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:Ee[0]||(Ee[0]=Le=>gt.swipeToClose==="left"&&Le.preventDefault())},null,32),createBaseVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:Ee[1]||(Ee[1]=Le=>gt.swipeToClose==="right"&&Le.preventDefault())},null,32)])],544)):!gt.showSwipeBanner&&gt.preventNavigationGestures?(openBlock(),createElementBlock("div",{key:1,class:"vfm-swipe-banner-container",onTouchstart:Ee[5]||(Ee[5]=Le=>unref(je)(Le))},[createBaseVNode("div",{class:"vfm-swipe-banner-back",onTouchstart:Ee[3]||(Ee[3]=Le=>gt.swipeToClose==="left"&&Le.preventDefault())},null,32),createBaseVNode("div",{class:"vfm-swipe-banner-forward",onTouchstart:Ee[4]||(Ee[4]=Le=>gt.swipeToClose==="right"&&Le.preventDefault())},null,32)],32)):createCommentVNode("",!0)],16),[[vShow,unref(W)]])]),_:3},16)],38)),[[vShow,gt.displayDirective!=="show"||unref(M)]]):createCommentVNode("",!0)}}),Co={...ue,teleportTo:{type:[String,null,Boolean,Object],default:"body"}},Eo=defineComponent({inheritAttrs:!1}),Oo=defineComponent({...Eo,__name:"VueFinalModal",props:Co,emits:["update:modelValue","beforeOpen","opened","beforeClose","closed","clickOutside"],setup(t,{emit:r}){const e=Po({props:t,modalProps:ue,emit:r});return(n,o)=>(openBlock(),createBlock(Teleport,{to:n.teleportTo?n.teleportTo:void 0,disabled:!n.teleportTo},[createVNode(go,normalizeProps(guardReactiveProps(unref(e))),{default:withCtx(()=>[renderSlot(n.$slots,"default")]),_:3},16)],8,["to","disabled"]))}});function Re(){return inject(de)}function Vo(){return inject(fe)}function Bo(t,r){return Object.keys(r).reduce((e,n)=>(e[n]=t[n],e),{})}function Lo(t){return t?{"onUpdate:modelValue":r=>t("update:modelValue",r),onBeforeClose:()=>t("beforeClose"),onClosed:()=>t("closed"),onBeforeOpen:()=>t("beforeOpen"),onOpened:()=>t("opened"),onClickOutside:()=>t("clickOutside")}:{}}function Po(t){const{props:r,modalProps:e,emit:n}=t,o=computed(()=>Bo(r,e)),a=Lo(n),c=useAttrs();return computed(()=>({...o.value,...a,...c}))}const Io=["innerHTML"],No=defineComponent({__name:"ModalsContainer",setup(t){const r=Re(),e=Vo(),n=Symbol("ModalsContainer"),o=computed(()=>{var l;return n===((l=r.modalsContainers.value)==null?void 0:l[0])}),a=shallowRef([]);function c(){a.value=r.dynamicModals.filter(l=>l.modelValue)}function u(l){l==null||l(),c()}return watch(()=>{var l;return(l=r.dynamicModals)==null?void 0:l.map(f=>f.modelValue)},(l,f)=>{if(!f||l.length!==f.length){c();return}let g=l.length,v=!1;for(;!v&&g--;)l[g]===!0&&f[g]===!1&&(v=!0);v&&c()},{immediate:!0}),r.modalsContainers.value.push(n),onBeforeUnmount(()=>{r.modalsContainers.value=r.modalsContainers.value.filter(l=>l!==n)}),(l,f)=>unref(o)?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(a),(g,v)=>(openBlock(),createBlock(resolveDynamicComponent(g.component),mergeProps({key:g.id},g.attrs,{modelValue:g.modelValue,"onUpdate:modelValue":b=>g.modelValue=b,onClosed:b=>u(()=>{var S,C;return(C=(S=unref(e)).resolvedClosed)==null?void 0:C.call(S,v)}),onOpened:()=>{var b,S;return(S=(b=unref(e)).resolvedOpened)==null?void 0:S.call(b,v)}}),createSlots({_:2},[renderList(g.slots,(b,S)=>({name:S,fn:withCtx(()=>[unref(isString$1)(b)?(openBlock(),createElementBlock("div",{key:0,innerHTML:b},null,8,Io)):"component"in b?(openBlock(),createBlock(resolveDynamicComponent(b.component),normalizeProps(mergeProps({key:1},b.attrs)),null,16)):(openBlock(),createBlock(resolveDynamicComponent(b),{key:2}))])}))]),1040,["modelValue","onUpdate:modelValue","onClosed","onOpened"]))),128)):createCommentVNode("",!0)}});function jo(){const t=shallowReactive([]),r=shallowReactive([]),e=shallowReactive([]),n=ref([]),o=markRaw({install(a){a.provide(de,o),a.config.globalProperties.$vfm=o;const c=Do(o);a.provide(fe,c)},modals:t,openedModals:r,dynamicModals:e,modalsContainers:n,get(a){return t.find(c=>c.value.modalId&&a===c.value.modalId)},toggle(a,c){const u=o.get(a);return u==null?void 0:u.value.toggle(c)},open(a){return o.toggle(a,!0)},close(a){return o.toggle(a,!1)},closeAll(){return Promise.allSettled([r.map(a=>a.value.toggle(!1))])}});return o}function Do(t){const{modals:r,openedModals:e,dynamicModals:n}=t,o={deleteFromModals(a){const c=r.findIndex(u=>u.value===a.value);c!==-1&&r.splice(c,1)},moveToLastOpenedModals(a){o.deleteFromOpenedModals(a),e.push(a)},deleteFromOpenedModals(a){const c=e.findIndex(u=>u.value===a.value);c!==-1&&e.splice(c,1)},async openLastOverlay(){var a;if(await nextTick(),e.forEach(c=>c.value.overlayVisible.value=!1),e.length>0){const c=e[e.length-1];!((a=c.value.hideOverlay)!=null&&a.value)&&(c.value.overlayVisible.value=!0)}},resolvedClosed(a){var c,u;(u=(c=n[a])==null?void 0:c.resolveClosed)==null||u.call(c)},resolvedOpened(a){var c,u;(u=(c=n[a])==null?void 0:c.resolveOpened)==null||u.call(c)}};return o}const _hoisted_1$h={class:"min-w-[100vw] min-h-screen max-h-[100vh] max-w-[100vw] overflow-hidden"},_hoisted_2$c={key:1,class:"w-screen h-screen flex justify-center items-center"},_hoisted_3$a={class:"flex gap-2 justify-center items-center min-w-[20%] px-20 py-10 rounded-lg border-2 bg-red-700 text-white font-bold"},_hoisted_4$8=createBaseVNode("div",{role:"status"},[createBaseVNode("svg",{"aria-hidden":"true",class:"w-6 h-6 text-gray-600 animate-spin fill-white",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),createBaseVNode("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})])],-1),_hoisted_5$7={key:0},_hoisted_6$6={class:"flex flex-col rounded-2xl bg-red-700 border-2 px-8 py-10 gap-4 max-w-lg max-h-min"},_hoisted_7$6=createBaseVNode("h1",null,"Ingrese Su Nombre",-1),_sfc_main$j={__name:"App",setup(t){const r=useAuth(),e=useStore(),n=new Proxy(new URLSearchParams(window.location.search),{get:(u,l)=>u.get(l)});e.token=n.token,e.mode=n.mode;const o=ref(!e.name),a=ref(e.name),c=()=>{r.login({data:{token:e.token,type:e.mode}}).then(u=>{u.status==200&&(e.loadingText="Credenciales Aceptadas",e.eventName=u.data.data.eventName,e.mode==="participant"&&(e.ams=u.data.data.ams_streamId),window.history.pushState({},"",e.originalURL),e.ready=!0)}).catch(u=>{e.loadingText="Credenciales Erroneas"}).finally(()=>{e.loading=!1})};return r.load().then(()=>{e.token&&e.mode?(console.log("Revisando Credenciales"),e.loadingText="Revisando Credenciales",r.check()&&r.user().token===e.token?(console.log("Token is present and same as before"),r.refresh({url:"chatter/auth/refresh",enabled:!0,interval:1}).then(()=>{e.loadingText="Ingresando Credenciales",e.eventName=r.user().eventName,e.mode=r.user().type,e.eventID=r.user().event_id,window.history.pushState({},"",e.originalURL),e.ready=!0}).catch(u=>{e.loadingText="Limpiando Credenciales",r.logout().then(()=>{e.loadingText="Ingresando Credenciales",c()})})):(console.log("Token is not present or not same as before"),e.loadingText="Ingresando Credenciales",c())):r.check()?(e.loadingText="Ingresando Credenciales",e.eventName=r.user().eventName,e.mode=r.user().type,e.eventID=r.user().event_id,window.history.pushState({},"",e.originalURL),e.ready=!0):(e.loadingText="Credenciales Erroneas",e.loading=!1)}),(u,l)=>{const f=resolveComponent("RouterView");return openBlock(),createElementBlock("div",_hoisted_1$h,[unref(r).ready()&&unref(e).ready&&unref(e).name?(openBlock(),createBlock(f,{key:0,onNameChange:l[0]||(l[0]=g=>o.value=!0)})):(openBlock(),createElementBlock("div",_hoisted_2$c,[createBaseVNode("div",_hoisted_3$a,[_hoisted_4$8,unref(e).loadingText?(openBlock(),createElementBlock("div",_hoisted_5$7,toDisplayString(unref(e).loadingText),1)):createCommentVNode("",!0)])])),createVNode(unref(Oo),{modelValue:o.value,"onUpdate:modelValue":l[3]||(l[3]=g=>o.value=g),class:"text-white flex justify-center items-center","click-to-close":!1,"esc-to-close":!1},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6$6,[_hoisted_7$6,withDirectives(createBaseVNode("input",{"onUpdate:modelValue":l[1]||(l[1]=g=>a.value=g),class:"rounded h-10 w-96 text-black font-bold px-2"},null,512),[[vModelText,a.value]]),createBaseVNode("button",{onClick:l[2]||(l[2]=(...g)=>u.setName&&u.setName(...g)),class:"self-end bg-white text-red-700 px-4 py-2 font-bold"}," CONFIRMAR ")])]),_:1},8,["modelValue"]),createVNode(unref(No))])}}};/*!
 * @websanova/vue-auth v4.2.1
 * https://websanova.com/docs/vue-auth
 * Released under the MIT License.
 */var bearer={request:function(t,r){this.drivers.http.setHeaders.call(this,t,{Authorization:"Bearer "+r})},response:function(t){var r=this.drivers.http.getHeaders.call(this,t),e=r.Authorization||r.authorization;if(e)return e=e.split(/Bearer:?\s?/i),e[e.length>1?1:0].trim()}};/*!
 * @websanova/vue-auth v4.2.1
 * https://websanova.com/docs/vue-auth
 * Released under the MIT License.
 */var axios_1_x={init:function(){if(!this.plugins.http)return"drivers/http/axios.js: http plugin has not been set."},interceptor:function(t,r){var e=this;t&&this.plugins.http.interceptors.request.use(function(n){return t.call(e,n),n},function(n){return t.call(e,n.request),Promise.reject(n)}),r&&this.plugins.http.interceptors.response.use(function(n){return r.call(e,n),n},function(n){return n&&n.response&&r.call(e,n.response),Promise.reject(n)})},invalidToken:function(t){if(t.status===401)return!0},httpData:function(t){return t.data||{}},http:function(t){return this.plugins.http(t)},getHeaders:function(t){return t.headers},setHeaders:function(t,r){t.headers=Object.assign({},t.headers,r)}};/*!
 * @websanova/vue-auth v4.2.1
 * https://websanova.com/docs/vue-auth
 * Released under the MIT License.
 */var vueRouter_2_x={init:function(){if(!this.plugins.router)return"drivers/router/vue-router.2.x.js: router plugin has not been set."},beforeEach:function(t,r,e,n){var o=this;this.plugins.router.beforeEach(function(a,c,u){e(a),t.call(o,function(){var l=n(a);r.call(o,a,l,function(f){if(!f){(u||a.next)();return}u?u(f):this.router._routerReplace.call(this,f)})})})},routerReplace:function(t){this.plugins.router.replace.call(router,t)},routerGo:function(t){var r=this.plugins.router;(r.push||r.go).call(r,t).catch(function(e){})}};function bind(t,r){return function(){return t.apply(r,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>r=>{const e=toString.call(r);return t[e]||(t[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),r=>kindOf(r)===t),typeOfTest=t=>r=>typeof r===t,{isArray:isArray$1}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(t):r=t&&t.buffer&&isArrayBuffer(t.buffer),r}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=t=>t!==null&&typeof t=="object",isBoolean=t=>t===!0||t===!1,isPlainObject=t=>{if(kindOf(t)!=="object")return!1;const r=getPrototypeOf(t);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject(t)&&isFunction(t.pipe),isFormData=t=>{const r="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString.call(t)===r||isFunction(t.toString)&&t.toString()===r)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,r,{allOwnKeys:e=!1}={}){if(t===null||typeof t>"u")return;let n,o;if(typeof t!="object"&&(t=[t]),isArray$1(t))for(n=0,o=t.length;n<o;n++)r.call(null,t[n],n,t);else{const a=e?Object.getOwnPropertyNames(t):Object.keys(t),c=a.length;let u;for(n=0;n<c;n++)u=a[n],r.call(null,t[u],u,t)}}function findKey(t,r){r=r.toLowerCase();const e=Object.keys(t);let n=e.length,o;for(;n-- >0;)if(o=e[n],r===o.toLowerCase())return o;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge(){const{caseless:t}=isContextDefined(this)&&this||{},r={},e=(n,o)=>{const a=t&&findKey(r,o)||o;isPlainObject(r[a])&&isPlainObject(n)?r[a]=merge(r[a],n):isPlainObject(n)?r[a]=merge({},n):isArray$1(n)?r[a]=n.slice():r[a]=n};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&forEach(arguments[n],e);return r}const extend=(t,r,e,{allOwnKeys:n}={})=>(forEach(r,(o,a)=>{e&&isFunction(o)?t[a]=bind(o,e):t[a]=o},{allOwnKeys:n}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,r,e,n)=>{t.prototype=Object.create(r.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:r.prototype}),e&&Object.assign(t.prototype,e)},toFlatObject=(t,r,e,n)=>{let o,a,c;const u={};if(r=r||{},t==null)return r;do{for(o=Object.getOwnPropertyNames(t),a=o.length;a-- >0;)c=o[a],(!n||n(c,t,r))&&!u[c]&&(r[c]=t[c],u[c]=!0);t=e!==!1&&getPrototypeOf(t)}while(t&&(!e||e(t,r))&&t!==Object.prototype);return r},endsWith=(t,r,e)=>{t=String(t),(e===void 0||e>t.length)&&(e=t.length),e-=r.length;const n=t.indexOf(r,e);return n!==-1&&n===e},toArray=t=>{if(!t)return null;if(isArray$1(t))return t;let r=t.length;if(!isNumber(r))return null;const e=new Array(r);for(;r-- >0;)e[r]=t[r];return e},isTypedArray=(t=>r=>t&&r instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,r)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const a=o.value;r.call(t,a[0],a[1])}},matchAll=(t,r)=>{let e;const n=[];for(;(e=t.exec(r))!==null;)n.push(e);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,o){return n.toUpperCase()+o}),hasOwnProperty$1=(({hasOwnProperty:t})=>(r,e)=>t.call(r,e))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(t,r)=>{const e=Object.getOwnPropertyDescriptors(t),n={};forEach(e,(o,a)=>{r(o,a,t)!==!1&&(n[a]=o)}),Object.defineProperties(t,n)},freezeMethods=t=>{reduceDescriptors(t,(r,e)=>{if(isFunction(t)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=t[e];if(isFunction(n)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},toObjectSet=(t,r)=>{const e={},n=o=>{o.forEach(a=>{e[a]=!0})};return isArray$1(t)?n(t):n(String(t).split(r)),e},noop$1=()=>{},toFiniteNumber=(t,r)=>(t=+t,Number.isFinite(t)?t:r),ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(t=16,r=ALPHABET.ALPHA_DIGIT)=>{let e="";const{length:n}=r;for(;t--;)e+=r[Math.random()*n|0];return e};function isSpecCompliantForm(t){return!!(t&&isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const toJSONObject=t=>{const r=new Array(10),e=(n,o)=>{if(isObject(n)){if(r.indexOf(n)>=0)return;if(!("toJSON"in n)){r[o]=n;const a=isArray$1(n)?[]:{};return forEach(n,(c,u)=>{const l=e(c,o+1);!isUndefined(l)&&(a[u]=l)}),r[o]=void 0,a}}return n};return e(t,0)},utils={isArray:isArray$1,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject};function AxiosError(t,r,e,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",r&&(this.code=r),e&&(this.config=e),n&&(this.request=n),o&&(this.response=o)}utils.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,r,e,n,o,a)=>{const c=Object.create(prototype$1);return utils.toFlatObject(t,c,function(l){return l!==Error.prototype},u=>u!=="isAxiosError"),AxiosError.call(c,t.message,r,e,n,o),c.cause=t,c.name=t.name,a&&Object.assign(c,a),c};const httpAdapter=null;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,r,e){return t?t.concat(r).map(function(o,a){return o=removeBrackets(o),!e&&a?"["+o+"]":o}).join(e?".":""):r}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData(t,r,e){if(!utils.isObject(t))throw new TypeError("target must be an object");r=r||new FormData,e=utils.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,A){return!utils.isUndefined(A[O])});const n=e.metaTokens,o=e.visitor||g,a=e.dots,c=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&utils.isSpecCompliantForm(r);if(!utils.isFunction(o))throw new TypeError("visitor must be a function");function f(C){if(C===null)return"";if(utils.isDate(C))return C.toISOString();if(!l&&utils.isBlob(C))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(C)||utils.isTypedArray(C)?l&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function g(C,O,A){let w=C;if(C&&!A&&typeof C=="object"){if(utils.endsWith(O,"{}"))O=n?O:O.slice(0,-2),C=JSON.stringify(C);else if(utils.isArray(C)&&isFlatArray(C)||(utils.isFileList(C)||utils.endsWith(O,"[]"))&&(w=utils.toArray(C)))return O=removeBrackets(O),w.forEach(function(k,M){!(utils.isUndefined(k)||k===null)&&r.append(c===!0?renderKey([O],M,a):c===null?O:O+"[]",f(k))}),!1}return isVisitable(C)?!0:(r.append(renderKey(A,O,a),f(C)),!1)}const v=[],b=Object.assign(predicates,{defaultVisitor:g,convertValue:f,isVisitable});function S(C,O){if(!utils.isUndefined(C)){if(v.indexOf(C)!==-1)throw Error("Circular reference detected in "+O.join("."));v.push(C),utils.forEach(C,function(w,V){(!(utils.isUndefined(w)||w===null)&&o.call(r,w,utils.isString(V)?V.trim():V,O,b))===!0&&S(w,O?O.concat(V):[V])}),v.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return S(t),r}function encode$1(t){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return r[n]})}function AxiosURLSearchParams(t,r){this._pairs=[],t&&toFormData(t,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,e){this._pairs.push([r,e])};prototype.toString=function(r){const e=r?function(n){return r.call(this,n,encode$1)}:encode$1;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function encode(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,r,e){if(!r)return t;const n=e&&e.encode||encode,o=e&&e.serialize;let a;if(o?a=o(r,e):a=utils.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,e).toString(n),a){const c=t.indexOf("#");c!==-1&&(t=t.slice(0,c)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class InterceptorManager{constructor(){this.handlers=[]}use(r,e,n){return this.handlers.push({fulfilled:r,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils.forEach(this.handlers,function(n){n!==null&&r(n)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,r){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,n,o,a){return platform.isNode&&utils.isBuffer(e)?(this.append(n,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(t){const r={},e=Object.keys(t);let n;const o=e.length;let a;for(n=0;n<o;n++)a=e[n],r[a]=t[a];return r}function formDataToJSON(t){function r(e,n,o,a){let c=e[a++];const u=Number.isFinite(+c),l=a>=e.length;return c=!c&&utils.isArray(o)?o.length:c,l?(utils.hasOwnProp(o,c)?o[c]=[o[c],n]:o[c]=n,!u):((!o[c]||!utils.isObject(o[c]))&&(o[c]=[]),r(e,n,o[c],a)&&utils.isArray(o[c])&&(o[c]=arrayToObject(o[c])),!u)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const e={};return utils.forEachEntry(t,(n,o)=>{r(parsePropPath(n),o,e,0)}),e}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(t,r,e){if(utils.isString(t))try{return(r||JSON.parse)(t),utils.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(t)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function(r,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,a=utils.isObject(r);if(a&&utils.isHTMLForm(r)&&(r=new FormData(r)),utils.isFormData(r))return o&&o?JSON.stringify(formDataToJSON(r)):r;if(utils.isArrayBuffer(r)||utils.isBuffer(r)||utils.isStream(r)||utils.isFile(r)||utils.isBlob(r))return r;if(utils.isArrayBufferView(r))return r.buffer;if(utils.isURLSearchParams(r))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let u;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((u=utils.isFileList(r))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return toFormData(u?{"files[]":r}:r,l&&new l,this.formSerializer)}}return a||o?(e.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const e=this.transitional||defaults.transitional,n=e&&e.forcedJSONParsing,o=this.responseType==="json";if(r&&utils.isString(r)&&(n&&!this.responseType||o)){const c=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(r)}catch(u){if(c)throw u.name==="SyntaxError"?AxiosError.from(u,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):u}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(r){defaults.headers[r]={}});utils.forEach(["post","put","patch"],function(r){defaults.headers[r]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$1=defaults,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=t=>{const r={};let e,n,o;return t&&t.split(`
`).forEach(function(c){o=c.indexOf(":"),e=c.substring(0,o).trim().toLowerCase(),n=c.substring(o+1).trim(),!(!e||r[e]&&ignoreDuplicateOf[e])&&(e==="set-cookie"?r[e]?r[e].push(n):r[e]=[n]:r[e]=r[e]?r[e]+", "+n:n)}),r},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const r=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(t);)r[n[1]]=n[2];return r}function isValidHeaderName(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function matchHeaderValue(t,r,e,n,o){if(utils.isFunction(n))return n.call(this,r,e);if(o&&(r=e),!!utils.isString(r)){if(utils.isString(n))return r.indexOf(n)!==-1;if(utils.isRegExp(n))return n.test(r)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,e,n)=>e.toUpperCase()+n)}function buildAccessors(t,r){const e=utils.toCamelCase(" "+r);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+e,{value:function(o,a,c){return this[n].call(this,r,o,a,c)},configurable:!0})})}class AxiosHeaders{constructor(r){r&&this.set(r)}set(r,e,n){const o=this;function a(u,l,f){const g=normalizeHeader(l);if(!g)throw new Error("header name must be a non-empty string");const v=utils.findKey(o,g);(!v||o[v]===void 0||f===!0||f===void 0&&o[v]!==!1)&&(o[v||l]=normalizeValue(u))}const c=(u,l)=>utils.forEach(u,(f,g)=>a(f,g,l));return utils.isPlainObject(r)||r instanceof this.constructor?c(r,e):utils.isString(r)&&(r=r.trim())&&!isValidHeaderName(r)?c(parseHeaders(r),e):r!=null&&a(e,r,n),this}get(r,e){if(r=normalizeHeader(r),r){const n=utils.findKey(this,r);if(n){const o=this[n];if(!e)return o;if(e===!0)return parseTokens(o);if(utils.isFunction(e))return e.call(this,o,n);if(utils.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,e){if(r=normalizeHeader(r),r){const n=utils.findKey(this,r);return!!(n&&this[n]!==void 0&&(!e||matchHeaderValue(this,this[n],n,e)))}return!1}delete(r,e){const n=this;let o=!1;function a(c){if(c=normalizeHeader(c),c){const u=utils.findKey(n,c);u&&(!e||matchHeaderValue(n,n[u],u,e))&&(delete n[u],o=!0)}}return utils.isArray(r)?r.forEach(a):a(r),o}clear(r){const e=Object.keys(this);let n=e.length,o=!1;for(;n--;){const a=e[n];(!r||matchHeaderValue(this,this[a],a,r,!0))&&(delete this[a],o=!0)}return o}normalize(r){const e=this,n={};return utils.forEach(this,(o,a)=>{const c=utils.findKey(n,a);if(c){e[c]=normalizeValue(o),delete e[a];return}const u=r?formatHeader(a):String(a).trim();u!==a&&delete e[a],e[u]=normalizeValue(o),n[u]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const e=Object.create(null);return utils.forEach(this,(n,o)=>{n!=null&&n!==!1&&(e[o]=r&&utils.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,e])=>r+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...e){const n=new this(r);return e.forEach(o=>n.set(o)),n}static accessor(r){const n=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function a(c){const u=normalizeHeader(c);n[u]||(buildAccessors(o,c),n[u]=!0)}return utils.isArray(r)?r.forEach(a):a(r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,r){const e=this||defaults$1,n=r||e,o=AxiosHeaders$1.from(n.headers);let a=n.data;return utils.forEach(t,function(u){a=u.call(e,a,o.normalize(),r?r.status:void 0)}),o.normalize(),a}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,r,e){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,r,e),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(t,r,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?t(e):r(new AxiosError("Request failed with status code "+e.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}const cookies=platform.isStandardBrowserEnv?function(){return{write:function(e,n,o,a,c,u){const l=[];l.push(e+"="+encodeURIComponent(n)),utils.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),utils.isString(a)&&l.push("path="+a),utils.isString(c)&&l.push("domain="+c),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}function buildFullPath(t,r){return t&&!isAbsoluteURL(r)?combineURLs(t,r):r}const isURLSameOrigin=platform.isStandardBrowserEnv?function(){const r=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(a){let c=a;return r&&(e.setAttribute("href",c),c=e.href),e.setAttribute("href",c),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(c){const u=utils.isString(c)?o(c):c;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function parseProtocol(t){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}function speedometer(t,r){t=t||10;const e=new Array(t),n=new Array(t);let o=0,a=0,c;return r=r!==void 0?r:1e3,function(l){const f=Date.now(),g=n[a];c||(c=f),e[o]=l,n[o]=f;let v=a,b=0;for(;v!==o;)b+=e[v++],v=v%t;if(o=(o+1)%t,o===a&&(a=(a+1)%t),f-c<r)return;const S=g&&f-g;return S?Math.round(b*1e3/S):void 0}}function progressEventReducer(t,r){let e=0;const n=speedometer(50,250);return o=>{const a=o.loaded,c=o.lengthComputable?o.total:void 0,u=a-e,l=n(u),f=a<=c;e=a;const g={loaded:a,total:c,progress:c?a/c:void 0,bytes:u,rate:l||void 0,estimated:l&&c&&f?(c-a)/l:void 0,event:o};g[r?"download":"upload"]=!0,t(g)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(e,n){let o=t.data;const a=AxiosHeaders$1.from(t.headers).normalize(),c=t.responseType;let u;function l(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}utils.isFormData(o)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&a.setContentType(!1);let f=new XMLHttpRequest;if(t.auth){const S=t.auth.username||"",C=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.set("Authorization","Basic "+btoa(S+":"+C))}const g=buildFullPath(t.baseURL,t.url);f.open(t.method.toUpperCase(),buildURL(g,t.params,t.paramsSerializer),!0),f.timeout=t.timeout;function v(){if(!f)return;const S=AxiosHeaders$1.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),O={data:!c||c==="text"||c==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:S,config:t,request:f};settle(function(w){e(w),l()},function(w){n(w),l()},O),f=null}if("onloadend"in f?f.onloadend=v:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(v)},f.onabort=function(){f&&(n(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,f)),f=null)},f.onerror=function(){n(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,f)),f=null},f.ontimeout=function(){let C=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const O=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(C=t.timeoutErrorMessage),n(new AxiosError(C,O.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,f)),f=null},platform.isStandardBrowserEnv){const S=(t.withCredentials||isURLSameOrigin(g))&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);S&&a.set(t.xsrfHeaderName,S)}o===void 0&&a.setContentType(null),"setRequestHeader"in f&&utils.forEach(a.toJSON(),function(C,O){f.setRequestHeader(O,C)}),utils.isUndefined(t.withCredentials)||(f.withCredentials=!!t.withCredentials),c&&c!=="json"&&(f.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&f.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=S=>{f&&(n(!S||S.type?new CanceledError(null,t,f):S),f.abort(),f=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const b=parseProtocol(g);if(b&&platform.protocols.indexOf(b)===-1){n(new AxiosError("Unsupported protocol "+b+":",AxiosError.ERR_BAD_REQUEST,t));return}f.send(o||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,r)=>{if(t){try{Object.defineProperty(t,"name",{value:r})}catch{}Object.defineProperty(t,"adapterName",{value:r})}});const adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:r}=t;let e,n;for(let o=0;o<r&&(e=t[o],!(n=utils.isString(e)?knownAdapters[e.toLowerCase()]:e));o++);if(!n)throw n===!1?new AxiosError(`Adapter ${e} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,e)?`Adapter '${e}' is not available in the build`:`Unknown adapter '${e}'`);if(!utils.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$1.adapter)(t).then(function(n){return throwIfCancellationRequested(t),n.data=transformData.call(t,t.transformResponse,n),n.headers=AxiosHeaders$1.from(n.headers),n},function(n){return isCancel(n)||(throwIfCancellationRequested(t),n&&n.response&&(n.response.data=transformData.call(t,t.transformResponse,n.response),n.response.headers=AxiosHeaders$1.from(n.response.headers))),Promise.reject(n)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,r){r=r||{};const e={};function n(f,g,v){return utils.isPlainObject(f)&&utils.isPlainObject(g)?utils.merge.call({caseless:v},f,g):utils.isPlainObject(g)?utils.merge({},g):utils.isArray(g)?g.slice():g}function o(f,g,v){if(utils.isUndefined(g)){if(!utils.isUndefined(f))return n(void 0,f,v)}else return n(f,g,v)}function a(f,g){if(!utils.isUndefined(g))return n(void 0,g)}function c(f,g){if(utils.isUndefined(g)){if(!utils.isUndefined(f))return n(void 0,f)}else return n(void 0,g)}function u(f,g,v){if(v in r)return n(f,g);if(v in t)return n(void 0,f)}const l={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(f,g)=>o(headersToObject(f),headersToObject(g),!0)};return utils.forEach(Object.keys(t).concat(Object.keys(r)),function(g){const v=l[g]||o,b=v(t[g],r[g],g);utils.isUndefined(b)&&v!==u||(e[g]=b)}),e}const VERSION="1.3.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{validators$1[t]=function(n){return typeof n===t||"a"+(r<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function(r,e,n){function o(a,c){return"[Axios v"+VERSION+"] Transitional option '"+a+"'"+c+(n?". "+n:"")}return(a,c,u)=>{if(r===!1)throw new AxiosError(o(c," has been removed"+(e?" in "+e:"")),AxiosError.ERR_DEPRECATED);return e&&!deprecatedWarnings[c]&&(deprecatedWarnings[c]=!0,console.warn(o(c," has been deprecated since v"+e+" and will be removed in the near future"))),r?r(a,c,u):!0}};function assertOptions(t,r,e){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let o=n.length;for(;o-- >0;){const a=n[o],c=r[a];if(c){const u=t[a],l=u===void 0||c(u,a,t);if(l!==!0)throw new AxiosError("option "+a+" must be "+l,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new AxiosError("Unknown option "+a,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(r,e){typeof r=="string"?(e=e||{},e.url=r):e=r||{},e=mergeConfig(this.defaults,e);const{transitional:n,paramsSerializer:o,headers:a}=e;n!==void 0&&validator.assertOptions(n,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!==void 0&&validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let c;c=a&&utils.merge(a.common,a[e.method]),c&&utils.forEach(["delete","get","head","post","put","patch","common"],C=>{delete a[C]}),e.headers=AxiosHeaders$1.concat(c,a);const u=[];let l=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(e)===!1||(l=l&&O.synchronous,u.unshift(O.fulfilled,O.rejected))});const f=[];this.interceptors.response.forEach(function(O){f.push(O.fulfilled,O.rejected)});let g,v=0,b;if(!l){const C=[dispatchRequest.bind(this),void 0];for(C.unshift.apply(C,u),C.push.apply(C,f),b=C.length,g=Promise.resolve(e);v<b;)g=g.then(C[v++],C[v++]);return g}b=u.length;let S=e;for(v=0;v<b;){const C=u[v++],O=u[v++];try{S=C(S)}catch(A){O.call(this,A);break}}try{g=dispatchRequest.call(this,S)}catch(C){return Promise.reject(C)}for(v=0,b=f.length;v<b;)g=g.then(f[v++],f[v++]);return g}getUri(r){r=mergeConfig(this.defaults,r);const e=buildFullPath(r.baseURL,r.url);return buildURL(e,r.params,r.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,n){return this.request(mergeConfig(n||{},{method:r,url:e,data:(n||{}).data}))}});utils.forEach(["post","put","patch"],function(r){function e(n){return function(a,c,u){return this.request(mergeConfig(u||{},{method:r,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:c}))}}Axios.prototype[r]=e(),Axios.prototype[r+"Form"]=e(!0)});const Axios$1=Axios;class CancelToken{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(a){e=a});const n=this;this.promise.then(o=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](o);n._listeners=null}),this.promise.then=o=>{let a;const c=new Promise(u=>{n.subscribe(u),a=u}).then(o);return c.cancel=function(){n.unsubscribe(a)},c},r(function(a,c,u){n.reason||(n.reason=new CanceledError(a,c,u),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const e=this._listeners.indexOf(r);e!==-1&&this._listeners.splice(e,1)}static source(){let r;return{token:new CancelToken(function(o){r=o}),cancel:r}}}const CancelToken$1=CancelToken;function spread(t){return function(e){return t.apply(null,e)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,r])=>{HttpStatusCode[r]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const r=new Axios$1(t),e=bind(Axios$1.prototype.request,r);return utils.extend(e,Axios$1.prototype,r,{allOwnKeys:!0}),utils.extend(e,r,null,{allOwnKeys:!0}),e.create=function(o){return createInstance(mergeConfig(t,o))},e}const axios$1=createInstance(defaults$1);axios$1.Axios=Axios$1;axios$1.CanceledError=CanceledError;axios$1.CancelToken=CancelToken$1;axios$1.isCancel=isCancel;axios$1.VERSION=VERSION;axios$1.toFormData=toFormData;axios$1.AxiosError=AxiosError;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(r){return Promise.all(r)};axios$1.spread=spread;axios$1.isAxiosError=isAxiosError;axios$1.mergeConfig=mergeConfig;axios$1.AxiosHeaders=AxiosHeaders$1;axios$1.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios$1.HttpStatusCode=HttpStatusCode$1;axios$1.default=axios$1;const axios$2=axios$1,baseURL=window.location.protocol+"//"+window.location.host.split(":")[0],instance=axios$2.create({baseURL});/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,r){const e={};for(const n in r){const o=r[n];e[n]=isArray(o)?o.map(t):t(o)}return e}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,r,e="/"){let n,o={},a="",c="";const u=r.indexOf("#");let l=r.indexOf("?");return u<l&&u>=0&&(l=-1),l>-1&&(n=r.slice(0,l),a=r.slice(l+1,u>-1?u:r.length),o=t(a)),u>-1&&(n=n||r.slice(0,u),c=r.slice(u,r.length)),n=resolveRelativePath(n??r,e),{fullPath:n+(a&&"?")+a+c,path:n,query:o,hash:c}}function stringifyURL(t,r){const e=r.query?t(r.query):"";return r.path+(e&&"?")+e+(r.hash||"")}function stripBase(t,r){return!r||!t.toLowerCase().startsWith(r.toLowerCase())?t:t.slice(r.length)||"/"}function isSameRouteLocation(t,r,e){const n=r.matched.length-1,o=e.matched.length-1;return n>-1&&n===o&&isSameRouteRecord(r.matched[n],e.matched[o])&&isSameRouteLocationParams(r.params,e.params)&&t(r.query)===t(e.query)&&r.hash===e.hash}function isSameRouteRecord(t,r){return(t.aliasOf||t)===(r.aliasOf||r)}function isSameRouteLocationParams(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const e in t)if(!isSameRouteLocationParamsValue(t[e],r[e]))return!1;return!0}function isSameRouteLocationParamsValue(t,r){return isArray(t)?isEquivalentArray(t,r):isArray(r)?isEquivalentArray(r,t):t===r}function isEquivalentArray(t,r){return isArray(r)?t.length===r.length&&t.every((e,n)=>e===r[n]):t.length===1&&t[0]===r}function resolveRelativePath(t,r){if(t.startsWith("/"))return t;if(!t)return r;const e=r.split("/"),n=t.split("/");let o=e.length-1,a,c;for(a=0;a<n.length;a++)if(c=n[a],c!==".")if(c==="..")o>1&&o--;else break;return e.slice(0,o).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const r=document.querySelector("base");t=r&&r.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,r){return t.replace(BEFORE_HASH_RE,"#")+r}function getElementPosition(t,r){const e=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:r.behavior,left:n.left-e.left-(r.left||0),top:n.top-e.top-(r.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let r;if("el"in t){const e=t.el,n=typeof e=="string"&&e.startsWith("#"),o=typeof e=="string"?n?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!o)return;r=getElementPosition(o,t)}else r=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.pageXOffset,r.top!=null?r.top:window.pageYOffset)}function getScrollKey(t,r){return(history.state?history.state.position-r:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,r){scrollPositions.set(t,r)}function getSavedScrollPosition(t){const r=scrollPositions.get(t);return scrollPositions.delete(t),r}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,r){const{pathname:e,search:n,hash:o}=r,a=t.indexOf("#");if(a>-1){let u=o.includes(t.slice(a))?t.slice(a).length:1,l=o.slice(u);return l[0]!=="/"&&(l="/"+l),stripBase(l,"")}return stripBase(e,t)+n+o}function useHistoryListeners(t,r,e,n){let o=[],a=[],c=null;const u=({state:b})=>{const S=createCurrentLocation(t,location),C=e.value,O=r.value;let A=0;if(b){if(e.value=S,r.value=b,c&&c===C){c=null;return}A=O?b.position-O.position:0}else n(S);o.forEach(w=>{w(e.value,C,{delta:A,type:NavigationType.pop,direction:A?A>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function l(){c=e.value}function f(b){o.push(b);const S=()=>{const C=o.indexOf(b);C>-1&&o.splice(C,1)};return a.push(S),S}function g(){const{history:b}=window;b.state&&b.replaceState(assign({},b.state,{scroll:computeScrollPosition()}),"")}function v(){for(const b of a)b();a=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",g)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",g),{pauseListeners:l,listen:f,destroy:v}}function buildState(t,r,e,n=!1,o=!1){return{back:t,current:r,forward:e,replaced:n,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:r,location:e}=window,n={value:createCurrentLocation(t,e)},o={value:r.state};o.value||a(n.value,{back:null,current:n.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function a(l,f,g){const v=t.indexOf("#"),b=v>-1?(e.host&&document.querySelector("base")?t:t.slice(v))+l:createBaseLocation()+t+l;try{r[g?"replaceState":"pushState"](f,"",b),o.value=f}catch(S){console.error(S),e[g?"replace":"assign"](b)}}function c(l,f){const g=assign({},r.state,buildState(o.value.back,l,o.value.forward,!0),f,{position:o.value.position});a(l,g,!0),n.value=l}function u(l,f){const g=assign({},o.value,r.state,{forward:l,scroll:computeScrollPosition()});a(g.current,g,!0);const v=assign({},buildState(n.value,l,null),{position:g.position+1},f);a(l,v,!1),n.value=l}return{location:n,state:o,push:u,replace:c}}function createWebHistory(t){t=normalizeBase(t);const r=useHistoryStateNavigation(t),e=useHistoryListeners(t,r.state,r.location,r.replace);function n(a,c=!0){c||e.pauseListeners(),history.go(a)}const o=assign({location:"",base:t,go:n,createHref:createHref.bind(null,t)},r,e);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>r.state.value}),o}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,r){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},r)}function isNavigationFailure(t,r){return t instanceof Error&&NavigationFailureSymbol in t&&(r==null||!!(t.type&r))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,r){const e=assign({},BASE_PATH_PARSER_OPTIONS,r),n=[];let o=e.start?"^":"";const a=[];for(const f of t){const g=f.length?[]:[90];e.strict&&!f.length&&(o+="/");for(let v=0;v<f.length;v++){const b=f[v];let S=40+(e.sensitive?.25:0);if(b.type===0)v||(o+="/"),o+=b.value.replace(REGEX_CHARS_RE,"\\$&"),S+=40;else if(b.type===1){const{value:C,repeatable:O,optional:A,regexp:w}=b;a.push({name:C,repeatable:O,optional:A});const V=w||BASE_PARAM_PATTERN;if(V!==BASE_PARAM_PATTERN){S+=10;try{new RegExp(`(${V})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${C}" (${V}): `+M.message)}}let k=O?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;v||(k=A&&f.length<2?`(?:/${k})`:"/"+k),A&&(k+="?"),o+=k,S+=20,A&&(S+=-8),O&&(S+=-20),V===".*"&&(S+=-50)}g.push(S)}n.push(g)}if(e.strict&&e.end){const f=n.length-1;n[f][n[f].length-1]+=.7000000000000001}e.strict||(o+="/?"),e.end?o+="$":e.strict&&(o+="(?:/|$)");const c=new RegExp(o,e.sensitive?"":"i");function u(f){const g=f.match(c),v={};if(!g)return null;for(let b=1;b<g.length;b++){const S=g[b]||"",C=a[b-1];v[C.name]=S&&C.repeatable?S.split("/"):S}return v}function l(f){let g="",v=!1;for(const b of t){(!v||!g.endsWith("/"))&&(g+="/"),v=!1;for(const S of b)if(S.type===0)g+=S.value;else if(S.type===1){const{value:C,repeatable:O,optional:A}=S,w=C in f?f[C]:"";if(isArray(w)&&!O)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const V=isArray(w)?w.join("/"):w;if(!V)if(A)b.length<2&&(g.endsWith("/")?g=g.slice(0,-1):v=!0);else throw new Error(`Missing required param "${C}"`);g+=V}}return g||"/"}return{re:c,score:n,keys:a,parse:u,stringify:l}}function compareScoreArray(t,r){let e=0;for(;e<t.length&&e<r.length;){const n=r[e]-t[e];if(n)return n;e++}return t.length<r.length?t.length===1&&t[0]===40+40?-1:1:t.length>r.length?r.length===1&&r[0]===40+40?1:-1:0}function comparePathParserScore(t,r){let e=0;const n=t.score,o=r.score;for(;e<n.length&&e<o.length;){const a=compareScoreArray(n[e],o[e]);if(a)return a;e++}if(Math.abs(o.length-n.length)===1){if(isLastScoreNegative(n))return 1;if(isLastScoreNegative(o))return-1}return o.length-n.length}function isLastScoreNegative(t){const r=t[t.length-1];return t.length>0&&r[r.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function r(S){throw new Error(`ERR (${e})/"${f}": ${S}`)}let e=0,n=e;const o=[];let a;function c(){a&&o.push(a),a=[]}let u=0,l,f="",g="";function v(){f&&(e===0?a.push({type:0,value:f}):e===1||e===2||e===3?(a.length>1&&(l==="*"||l==="+")&&r(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:f,regexp:g,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):r("Invalid state to consume buffer"),f="")}function b(){f+=l}for(;u<t.length;){if(l=t[u++],l==="\\"&&e!==2){n=e,e=4;continue}switch(e){case 0:l==="/"?(f&&v(),c()):l===":"?(v(),e=1):b();break;case 4:b(),e=n;break;case 1:l==="("?e=2:VALID_PARAM_RE.test(l)?b():(v(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&u--);break;case 2:l===")"?g[g.length-1]=="\\"?g=g.slice(0,-1)+l:e=3:g+=l;break;case 3:v(),e=0,l!=="*"&&l!=="?"&&l!=="+"&&u--,g="";break;default:r("Unknown state");break}}return e===2&&r(`Unfinished custom RegExp for param "${f}"`),v(),c(),o}function createRouteRecordMatcher(t,r,e){const n=tokensToParser(tokenizePath(t.path),e),o=assign(n,{record:t,parent:r,children:[],alias:[]});return r&&!o.record.aliasOf==!r.record.aliasOf&&r.children.push(o),o}function createRouterMatcher(t,r){const e=[],n=new Map;r=mergeOptions({strict:!1,end:!0,sensitive:!1},r);function o(g){return n.get(g)}function a(g,v,b){const S=!b,C=normalizeRouteRecord(g);C.aliasOf=b&&b.record;const O=mergeOptions(r,g),A=[C];if("alias"in g){const k=typeof g.alias=="string"?[g.alias]:g.alias;for(const M of k)A.push(assign({},C,{components:b?b.record.components:C.components,path:M,aliasOf:b?b.record:C}))}let w,V;for(const k of A){const{path:M}=k;if(v&&M[0]!=="/"){const W=v.record.path,Y=W[W.length-1]==="/"?"":"/";k.path=v.record.path+(M&&Y+M)}if(w=createRouteRecordMatcher(k,v,O),b?b.alias.push(w):(V=V||w,V!==w&&V.alias.push(w),S&&g.name&&!isAliasRecord(w)&&c(g.name)),C.children){const W=C.children;for(let Y=0;Y<W.length;Y++)a(W[Y],w,b&&b.children[Y])}b=b||w,(w.record.components&&Object.keys(w.record.components).length||w.record.name||w.record.redirect)&&l(w)}return V?()=>{c(V)}:noop}function c(g){if(isRouteName(g)){const v=n.get(g);v&&(n.delete(g),e.splice(e.indexOf(v),1),v.children.forEach(c),v.alias.forEach(c))}else{const v=e.indexOf(g);v>-1&&(e.splice(v,1),g.record.name&&n.delete(g.record.name),g.children.forEach(c),g.alias.forEach(c))}}function u(){return e}function l(g){let v=0;for(;v<e.length&&comparePathParserScore(g,e[v])>=0&&(g.record.path!==e[v].record.path||!isRecordChildOf(g,e[v]));)v++;e.splice(v,0,g),g.record.name&&!isAliasRecord(g)&&n.set(g.record.name,g)}function f(g,v){let b,S={},C,O;if("name"in g&&g.name){if(b=n.get(g.name),!b)throw createRouterError(1,{location:g});O=b.record.name,S=assign(paramsFromLocation(v.params,b.keys.filter(V=>!V.optional).map(V=>V.name)),g.params&&paramsFromLocation(g.params,b.keys.map(V=>V.name))),C=b.stringify(S)}else if("path"in g)C=g.path,b=e.find(V=>V.re.test(C)),b&&(S=b.parse(C),O=b.record.name);else{if(b=v.name?n.get(v.name):e.find(V=>V.re.test(v.path)),!b)throw createRouterError(1,{location:g,currentLocation:v});O=b.record.name,S=assign({},v.params,g.params),C=b.stringify(S)}const A=[];let w=b;for(;w;)A.unshift(w.record),w=w.parent;return{name:O,path:C,params:S,matched:A,meta:mergeMetaFields(A)}}return t.forEach(g=>a(g)),{addRoute:a,resolve:f,removeRoute:c,getRoutes:u,getRecordMatcher:o}}function paramsFromLocation(t,r){const e={};for(const n of r)n in t&&(e[n]=t[n]);return e}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const r={},e=t.props||!1;if("component"in t)r.default=e;else for(const n in t.components)r[n]=typeof e=="boolean"?e:e[n];return r}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((r,e)=>assign(r,e.meta),{})}function mergeOptions(t,r){const e={};for(const n in t)e[n]=n in r?r[n]:t[n];return e}function isRecordChildOf(t,r){return r.children.some(e=>e===t||isRecordChildOf(t,e))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const r={};if(t===""||t==="?")return r;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<n.length;++o){const a=n[o].replace(PLUS_RE," "),c=a.indexOf("="),u=decode(c<0?a:a.slice(0,c)),l=c<0?null:decode(a.slice(c+1));if(u in r){let f=r[u];isArray(f)||(f=r[u]=[f]),f.push(l)}else r[u]=l}return r}function stringifyQuery(t){let r="";for(let e in t){const n=t[e];if(e=encodeQueryKey(e),n==null){n!==void 0&&(r+=(r.length?"&":"")+e);continue}(isArray(n)?n.map(a=>a&&encodeQueryValue(a)):[n&&encodeQueryValue(n)]).forEach(a=>{a!==void 0&&(r+=(r.length?"&":"")+e,a!=null&&(r+="="+a))})}return r}function normalizeQuery(t){const r={};for(const e in t){const n=t[e];n!==void 0&&(r[e]=isArray(n)?n.map(o=>o==null?null:""+o):n==null?n:""+n)}return r}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function r(n){return t.push(n),()=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)}}function e(){t=[]}return{add:r,list:()=>t,reset:e}}function guardToPromiseFn(t,r,e,n,o){const a=n&&(n.enterCallbacks[o]=n.enterCallbacks[o]||[]);return()=>new Promise((c,u)=>{const l=v=>{v===!1?u(createRouterError(4,{from:e,to:r})):v instanceof Error?u(v):isRouteLocation(v)?u(createRouterError(2,{from:r,to:v})):(a&&n.enterCallbacks[o]===a&&typeof v=="function"&&a.push(v),c())},f=t.call(n&&n.instances[o],r,e,l);let g=Promise.resolve(f);t.length<3&&(g=g.then(l)),g.catch(v=>u(v))})}function extractComponentsGuards(t,r,e,n){const o=[];for(const a of t)for(const c in a.components){let u=a.components[c];if(!(r!=="beforeRouteEnter"&&!a.instances[c]))if(isRouteComponent(u)){const f=(u.__vccOpts||u)[r];f&&o.push(guardToPromiseFn(f,e,n,a,c))}else{let l=u();o.push(()=>l.then(f=>{if(!f)return Promise.reject(new Error(`Couldn't resolve component "${c}" at "${a.path}"`));const g=isESModule(f)?f.default:f;a.components[c]=g;const b=(g.__vccOpts||g)[r];return b&&guardToPromiseFn(b,e,n,a,c)()}))}}return o}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const r=inject(routerKey),e=inject(routeLocationKey),n=computed(()=>r.resolve(unref(t.to))),o=computed(()=>{const{matched:l}=n.value,{length:f}=l,g=l[f-1],v=e.matched;if(!g||!v.length)return-1;const b=v.findIndex(isSameRouteRecord.bind(null,g));if(b>-1)return b;const S=getOriginalPath(l[f-2]);return f>1&&getOriginalPath(g)===S&&v[v.length-1].path!==S?v.findIndex(isSameRouteRecord.bind(null,l[f-2])):b}),a=computed(()=>o.value>-1&&includesParams(e.params,n.value.params)),c=computed(()=>o.value>-1&&o.value===e.matched.length-1&&isSameRouteLocationParams(e.params,n.value.params));function u(l={}){return guardEvent(l)?r[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop):Promise.resolve()}return{route:n,href:computed(()=>n.value.href),isActive:a,isExactActive:c,navigate:u}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:r}){const e=reactive(useLink(t)),{options:n}=inject(routerKey),o=computed(()=>({[getLinkClass(t.activeClass,n.linkActiveClass,"router-link-active")]:e.isActive,[getLinkClass(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const a=r.default&&r.default(e);return t.custom?a:h("a",{"aria-current":e.isExactActive?t.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:o.value},a)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const r=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,r){for(const e in r){const n=r[e],o=t[e];if(typeof n=="string"){if(n!==o)return!1}else if(!isArray(o)||o.length!==n.length||n.some((a,c)=>a!==o[c]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,r,e)=>t??r??e,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:r,slots:e}){const n=inject(routerViewLocationKey),o=computed(()=>t.route||n.value),a=inject(viewDepthKey,0),c=computed(()=>{let f=unref(a);const{matched:g}=o.value;let v;for(;(v=g[f])&&!v.components;)f++;return f}),u=computed(()=>o.value.matched[c.value]);provide(viewDepthKey,computed(()=>c.value+1)),provide(matchedRouteKey,u),provide(routerViewLocationKey,o);const l=ref();return watch(()=>[l.value,u.value,t.name],([f,g,v],[b,S,C])=>{g&&(g.instances[v]=f,S&&S!==g&&f&&f===b&&(g.leaveGuards.size||(g.leaveGuards=S.leaveGuards),g.updateGuards.size||(g.updateGuards=S.updateGuards))),f&&g&&(!S||!isSameRouteRecord(g,S)||!b)&&(g.enterCallbacks[v]||[]).forEach(O=>O(f))},{flush:"post"}),()=>{const f=o.value,g=t.name,v=u.value,b=v&&v.components[g];if(!b)return normalizeSlot(e.default,{Component:b,route:f});const S=v.props[g],C=S?S===!0?f.params:typeof S=="function"?S(f):S:null,A=h(b,assign({},C,r,{onVnodeUnmounted:w=>{w.component.isUnmounted&&(v.instances[g]=null)},ref:l}));return normalizeSlot(e.default,{Component:A,route:f})||A}}});function normalizeSlot(t,r){if(!t)return null;const e=t(r);return e.length===1?e[0]:e}const RouterView=RouterViewImpl;function createRouter(t){const r=createRouterMatcher(t.routes,t),e=t.parseQuery||parseQuery,n=t.stringifyQuery||stringifyQuery,o=t.history,a=useCallbacks(),c=useCallbacks(),u=useCallbacks(),l=shallowRef(START_LOCATION_NORMALIZED);let f=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const g=applyToParams.bind(null,Ee=>""+Ee),v=applyToParams.bind(null,encodeParam),b=applyToParams.bind(null,decode);function S(Ee,Le){let We,ut;return isRouteName(Ee)?(We=r.getRecordMatcher(Ee),ut=Le):ut=Ee,r.addRoute(ut,We)}function C(Ee){const Le=r.getRecordMatcher(Ee);Le&&r.removeRoute(Le)}function O(){return r.getRoutes().map(Ee=>Ee.record)}function A(Ee){return!!r.getRecordMatcher(Ee)}function w(Ee,Le){if(Le=assign({},Le||l.value),typeof Ee=="string"){const Ge=parseURL(e,Ee,Le.path),Qe=r.resolve({path:Ge.path},Le),Et=o.createHref(Ge.fullPath);return assign(Ge,Qe,{params:b(Qe.params),hash:decode(Ge.hash),redirectedFrom:void 0,href:Et})}let We;if("path"in Ee)We=assign({},Ee,{path:parseURL(e,Ee.path,Le.path).path});else{const Ge=assign({},Ee.params);for(const Qe in Ge)Ge[Qe]==null&&delete Ge[Qe];We=assign({},Ee,{params:v(Ee.params)}),Le.params=v(Le.params)}const ut=r.resolve(We,Le),bt=Ee.hash||"";ut.params=g(b(ut.params));const mt=stringifyURL(n,assign({},Ee,{hash:encodeHash(bt),path:ut.path})),It=o.createHref(mt);return assign({fullPath:mt,hash:bt,query:n===stringifyQuery?normalizeQuery(Ee.query):Ee.query||{}},ut,{redirectedFrom:void 0,href:It})}function V(Ee){return typeof Ee=="string"?parseURL(e,Ee,l.value.path):assign({},Ee)}function k(Ee,Le){if(f!==Ee)return createRouterError(8,{from:Le,to:Ee})}function M(Ee){return H(Ee)}function W(Ee){return M(assign(V(Ee),{replace:!0}))}function Y(Ee){const Le=Ee.matched[Ee.matched.length-1];if(Le&&Le.redirect){const{redirect:We}=Le;let ut=typeof We=="function"?We(Ee):We;return typeof ut=="string"&&(ut=ut.includes("?")||ut.includes("#")?ut=V(ut):{path:ut},ut.params={}),assign({query:Ee.query,hash:Ee.hash,params:"path"in ut?{}:Ee.params},ut)}}function H(Ee,Le){const We=f=w(Ee),ut=l.value,bt=Ee.state,mt=Ee.force,It=Ee.replace===!0,Ge=Y(We);if(Ge)return H(assign(V(Ge),{state:typeof Ge=="object"?assign({},bt,Ge.state):bt,force:mt,replace:It}),Le||We);const Qe=We;Qe.redirectedFrom=Le;let Et;return!mt&&isSameRouteLocation(n,ut,We)&&(Et=createRouterError(16,{to:Qe,from:ut}),Ke(ut,ut,!0,!1)),(Et?Promise.resolve(Et):j(Qe,ut)).catch(Tt=>isNavigationFailure(Tt)?isNavigationFailure(Tt,2)?Tt:je(Tt):Ue(Tt,Qe,ut)).then(Tt=>{if(Tt){if(isNavigationFailure(Tt,2))return H(assign({replace:It},V(Tt.to),{state:typeof Tt.to=="object"?assign({},bt,Tt.to.state):bt,force:mt}),Le||Qe)}else Tt=z(Qe,ut,!0,It,bt);return _(Qe,ut,Tt),Tt})}function P(Ee,Le){const We=k(Ee,Le);return We?Promise.reject(We):Promise.resolve()}function j(Ee,Le){let We;const[ut,bt,mt]=extractChangingRecords(Ee,Le);We=extractComponentsGuards(ut.reverse(),"beforeRouteLeave",Ee,Le);for(const Ge of ut)Ge.leaveGuards.forEach(Qe=>{We.push(guardToPromiseFn(Qe,Ee,Le))});const It=P.bind(null,Ee,Le);return We.push(It),runGuardQueue(We).then(()=>{We=[];for(const Ge of a.list())We.push(guardToPromiseFn(Ge,Ee,Le));return We.push(It),runGuardQueue(We)}).then(()=>{We=extractComponentsGuards(bt,"beforeRouteUpdate",Ee,Le);for(const Ge of bt)Ge.updateGuards.forEach(Qe=>{We.push(guardToPromiseFn(Qe,Ee,Le))});return We.push(It),runGuardQueue(We)}).then(()=>{We=[];for(const Ge of Ee.matched)if(Ge.beforeEnter&&!Le.matched.includes(Ge))if(isArray(Ge.beforeEnter))for(const Qe of Ge.beforeEnter)We.push(guardToPromiseFn(Qe,Ee,Le));else We.push(guardToPromiseFn(Ge.beforeEnter,Ee,Le));return We.push(It),runGuardQueue(We)}).then(()=>(Ee.matched.forEach(Ge=>Ge.enterCallbacks={}),We=extractComponentsGuards(mt,"beforeRouteEnter",Ee,Le),We.push(It),runGuardQueue(We))).then(()=>{We=[];for(const Ge of c.list())We.push(guardToPromiseFn(Ge,Ee,Le));return We.push(It),runGuardQueue(We)}).catch(Ge=>isNavigationFailure(Ge,8)?Ge:Promise.reject(Ge))}function _(Ee,Le,We){for(const ut of u.list())ut(Ee,Le,We)}function z(Ee,Le,We,ut,bt){const mt=k(Ee,Le);if(mt)return mt;const It=Le===START_LOCATION_NORMALIZED,Ge=isBrowser?history.state:{};We&&(ut||It?o.replace(Ee.fullPath,assign({scroll:It&&Ge&&Ge.scroll},bt)):o.push(Ee.fullPath,bt)),l.value=Ee,Ke(Ee,Le,We,It),je()}let ae;function me(){ae||(ae=o.listen((Ee,Le,We)=>{if(!gt.listening)return;const ut=w(Ee),bt=Y(ut);if(bt){H(assign(bt,{replace:!0}),ut).catch(noop);return}f=ut;const mt=l.value;isBrowser&&saveScrollPosition(getScrollKey(mt.fullPath,We.delta),computeScrollPosition()),j(ut,mt).catch(It=>isNavigationFailure(It,12)?It:isNavigationFailure(It,2)?(H(It.to,ut).then(Ge=>{isNavigationFailure(Ge,20)&&!We.delta&&We.type===NavigationType.pop&&o.go(-1,!1)}).catch(noop),Promise.reject()):(We.delta&&o.go(-We.delta,!1),Ue(It,ut,mt))).then(It=>{It=It||z(ut,mt,!1),It&&(We.delta&&!isNavigationFailure(It,8)?o.go(-We.delta,!1):We.type===NavigationType.pop&&isNavigationFailure(It,20)&&o.go(-1,!1)),_(ut,mt,It)}).catch(noop)}))}let ye=useCallbacks(),Pe=useCallbacks(),Te;function Ue(Ee,Le,We){je(Ee);const ut=Pe.list();return ut.length?ut.forEach(bt=>bt(Ee,Le,We)):console.error(Ee),Promise.reject(Ee)}function _e(){return Te&&l.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Ee,Le)=>{ye.add([Ee,Le])})}function je(Ee){return Te||(Te=!Ee,me(),ye.list().forEach(([Le,We])=>Ee?We(Ee):Le()),ye.reset()),Ee}function Ke(Ee,Le,We,ut){const{scrollBehavior:bt}=t;if(!isBrowser||!bt)return Promise.resolve();const mt=!We&&getSavedScrollPosition(getScrollKey(Ee.fullPath,0))||(ut||!We)&&history.state&&history.state.scroll||null;return nextTick().then(()=>bt(Ee,Le,mt)).then(It=>It&&scrollToPosition(It)).catch(It=>Ue(It,Ee,Le))}const De=Ee=>o.go(Ee);let Ze;const tt=new Set,gt={currentRoute:l,listening:!0,addRoute:S,removeRoute:C,hasRoute:A,getRoutes:O,resolve:w,options:t,push:M,replace:W,go:De,back:()=>De(-1),forward:()=>De(1),beforeEach:a.add,beforeResolve:c.add,afterEach:u.add,onError:Pe.add,isReady:_e,install(Ee){const Le=this;Ee.component("RouterLink",RouterLink),Ee.component("RouterView",RouterView),Ee.config.globalProperties.$router=Le,Object.defineProperty(Ee.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(l)}),isBrowser&&!Ze&&l.value===START_LOCATION_NORMALIZED&&(Ze=!0,M(o.location).catch(bt=>{}));const We={};for(const bt in START_LOCATION_NORMALIZED)We[bt]=computed(()=>l.value[bt]);Ee.provide(routerKey,Le),Ee.provide(routeLocationKey,reactive(We)),Ee.provide(routerViewLocationKey,l);const ut=Ee.unmount;tt.add(Ee),Ee.unmount=function(){tt.delete(Ee),tt.size<1&&(f=START_LOCATION_NORMALIZED,ae&&ae(),ae=null,l.value=START_LOCATION_NORMALIZED,Ze=!1,Te=!1),ut()}}};return gt}function runGuardQueue(t){return t.reduce((r,e)=>r.then(()=>e()),Promise.resolve())}function extractChangingRecords(t,r){const e=[],n=[],o=[],a=Math.max(r.matched.length,t.matched.length);for(let c=0;c<a;c++){const u=r.matched[c];u&&(t.matched.find(f=>isSameRouteRecord(f,u))?n.push(u):e.push(u));const l=t.matched[c];l&&(r.matched.find(f=>isSameRouteRecord(f,l))||o.push(l))}return[e,n,o]}var opentokExports={},opentok={get exports(){return opentokExports},set exports(t){opentokExports=t}};/**
 * @license OpenTok.js 2.24.6 50f07872f
 *
 * Copyright (c) 2010-2023 TokBox, Inc.
 * Subject to the applicable Software Development Kit (SDK) License Agreement:
 * https://www.vonage.com/legal/communications-apis/terms-of-use/
 *
 * Date: Mon, 23 Jan 2023 22:25:12 GMT
 */(function(module,exports){(function(r,e){module.exports=e()})(window,function(){return function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(n,o,a){e.o(n,o)||Object.defineProperty(n,o,{enumerable:!0,get:a})},e.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,o){if(o&1&&(n=e(n)),o&8||o&4&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),o&2&&typeof n!="string")for(var c in n)e.d(a,c,function(u){return n[u]}.bind(null,c));return a},e.n=function(n){var o=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(o,"a",o),o},e.o=function(n,o){return Object.prototype.hasOwnProperty.call(n,o)},e.p="",e(e.s=332)}([function(t,r){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e},function(t,r,e){(function(n){/*!
* @overview es6-promise - a tiny implementation of Promises/A+.
* @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
* @license   Licensed under MIT license
*            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
* @version   v4.2.8+1e68dce6
*/(function(o,a){t.exports=a()})(this,function(){function o(xt){var Wt=typeof xt;return xt!==null&&(Wt==="object"||Wt==="function")}function a(xt){return typeof xt=="function"}var c=void 0;Array.isArray?c=Array.isArray:c=function(xt){return Object.prototype.toString.call(xt)==="[object Array]"};var u=c,l=0,f=void 0,g=void 0,v=function(Wt,tn){P[l]=Wt,P[l+1]=tn,l+=2,l===2&&(g?g(j):z())};function b(xt){g=xt}function S(xt){v=xt}var C=typeof window<"u"?window:void 0,O=C||{},A=O.MutationObserver||O.WebKitMutationObserver,w=typeof self>"u"&&typeof n<"u"&&{}.toString.call(n)==="[object process]",V=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function k(){return function(){return n.nextTick(j)}}function M(){return typeof f<"u"?function(){f(j)}:H()}function W(){var xt=0,Wt=new A(j),tn=document.createTextNode("");return Wt.observe(tn,{characterData:!0}),function(){tn.data=xt=++xt%2}}function Y(){var xt=new MessageChannel;return xt.port1.onmessage=j,function(){return xt.port2.postMessage(0)}}function H(){var xt=setTimeout;return function(){return xt(j,1)}}var P=new Array(1e3);function j(){for(var xt=0;xt<l;xt+=2){var Wt=P[xt],tn=P[xt+1];Wt(tn),P[xt]=void 0,P[xt+1]=void 0}l=0}function _(){try{var xt=Function("return this")().require("vertx");return f=xt.runOnLoop||xt.runOnContext,M()}catch{return H()}}var z=void 0;w?z=k():A?z=W():V?z=Y():C===void 0?z=_():z=H();function ae(xt,Wt){var tn=this,mn=new this.constructor(Pe);mn[ye]===void 0&&Tt(mn);var Dn=tn._state;if(Dn){var er=arguments[Dn-1];v(function(){return It(Dn,mn,er,tn._result)})}else bt(tn,mn,xt,Wt);return mn}function me(xt){var Wt=this;if(xt&&typeof xt=="object"&&xt.constructor===Wt)return xt;var tn=new Wt(Pe);return Ee(tn,xt),tn}var ye=Math.random().toString(36).substring(2);function Pe(){}var Te=void 0,Ue=1,_e=2;function je(){return new TypeError("You cannot resolve a promise with itself")}function Ke(){return new TypeError("A promises callback cannot return that same promise.")}function De(xt,Wt,tn,mn){try{xt.call(Wt,tn,mn)}catch(Dn){return Dn}}function Ze(xt,Wt,tn){v(function(mn){var Dn=!1,er=De(tn,Wt,function(Zn){Dn||(Dn=!0,Wt!==Zn?Ee(mn,Zn):We(mn,Zn))},function(Zn){Dn||(Dn=!0,ut(mn,Zn))},"Settle: "+(mn._label||" unknown promise"));!Dn&&er&&(Dn=!0,ut(mn,er))},xt)}function tt(xt,Wt){Wt._state===Ue?We(xt,Wt._result):Wt._state===_e?ut(xt,Wt._result):bt(Wt,void 0,function(tn){return Ee(xt,tn)},function(tn){return ut(xt,tn)})}function gt(xt,Wt,tn){Wt.constructor===xt.constructor&&tn===ae&&Wt.constructor.resolve===me?tt(xt,Wt):tn===void 0?We(xt,Wt):a(tn)?Ze(xt,Wt,tn):We(xt,Wt)}function Ee(xt,Wt){if(xt===Wt)ut(xt,je());else if(o(Wt)){var tn=void 0;try{tn=Wt.then}catch(mn){ut(xt,mn);return}gt(xt,Wt,tn)}else We(xt,Wt)}function Le(xt){xt._onerror&&xt._onerror(xt._result),mt(xt)}function We(xt,Wt){xt._state===Te&&(xt._result=Wt,xt._state=Ue,xt._subscribers.length!==0&&v(mt,xt))}function ut(xt,Wt){xt._state===Te&&(xt._state=_e,xt._result=Wt,v(Le,xt))}function bt(xt,Wt,tn,mn){var Dn=xt._subscribers,er=Dn.length;xt._onerror=null,Dn[er]=Wt,Dn[er+Ue]=tn,Dn[er+_e]=mn,er===0&&xt._state&&v(mt,xt)}function mt(xt){var Wt=xt._subscribers,tn=xt._state;if(Wt.length!==0){for(var mn=void 0,Dn=void 0,er=xt._result,Zn=0;Zn<Wt.length;Zn+=3)mn=Wt[Zn],Dn=Wt[Zn+tn],mn?It(tn,mn,Dn,er):Dn(er);xt._subscribers.length=0}}function It(xt,Wt,tn,mn){var Dn=a(tn),er=void 0,Zn=void 0,dr=!0;if(Dn){try{er=tn(mn)}catch(pr){dr=!1,Zn=pr}if(Wt===er){ut(Wt,Ke());return}}else er=mn;Wt._state!==Te||(Dn&&dr?Ee(Wt,er):dr===!1?ut(Wt,Zn):xt===Ue?We(Wt,er):xt===_e&&ut(Wt,er))}function Ge(xt,Wt){try{Wt(function(mn){Ee(xt,mn)},function(mn){ut(xt,mn)})}catch(tn){ut(xt,tn)}}var Qe=0;function Et(){return Qe++}function Tt(xt){xt[ye]=Qe++,xt._state=void 0,xt._result=void 0,xt._subscribers=[]}function Zt(){return new Error("Array Methods must be provided an Array")}var $t=function(){function xt(Wt,tn){this._instanceConstructor=Wt,this.promise=new Wt(Pe),this.promise[ye]||Tt(this.promise),u(tn)?(this.length=tn.length,this._remaining=tn.length,this._result=new Array(this.length),this.length===0?We(this.promise,this._result):(this.length=this.length||0,this._enumerate(tn),this._remaining===0&&We(this.promise,this._result))):ut(this.promise,Zt())}return xt.prototype._enumerate=function(tn){for(var mn=0;this._state===Te&&mn<tn.length;mn++)this._eachEntry(tn[mn],mn)},xt.prototype._eachEntry=function(tn,mn){var Dn=this._instanceConstructor,er=Dn.resolve;if(er===me){var Zn=void 0,dr=void 0,pr=!1;try{Zn=tn.then}catch(Jn){pr=!0,dr=Jn}if(Zn===ae&&tn._state!==Te)this._settledAt(tn._state,mn,tn._result);else if(typeof Zn!="function")this._remaining--,this._result[mn]=tn;else if(Dn===nn){var Bn=new Dn(Pe);pr?ut(Bn,dr):gt(Bn,tn,Zn),this._willSettleAt(Bn,mn)}else this._willSettleAt(new Dn(function(Jn){return Jn(tn)}),mn)}else this._willSettleAt(er(tn),mn)},xt.prototype._settledAt=function(tn,mn,Dn){var er=this.promise;er._state===Te&&(this._remaining--,tn===_e?ut(er,Dn):this._result[mn]=Dn),this._remaining===0&&We(er,this._result)},xt.prototype._willSettleAt=function(tn,mn){var Dn=this;bt(tn,void 0,function(er){return Dn._settledAt(Ue,mn,er)},function(er){return Dn._settledAt(_e,mn,er)})},xt}();function pt(xt){return new $t(this,xt).promise}function ft(xt){var Wt=this;return u(xt)?new Wt(function(tn,mn){for(var Dn=xt.length,er=0;er<Dn;er++)Wt.resolve(xt[er]).then(tn,mn)}):new Wt(function(tn,mn){return mn(new TypeError("You must pass an array to race."))})}function et(xt){var Wt=this,tn=new Wt(Pe);return ut(tn,xt),tn}function it(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Pt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var nn=function(){function xt(Wt){this[ye]=Et(),this._result=this._state=void 0,this._subscribers=[],Pe!==Wt&&(typeof Wt!="function"&&it(),this instanceof xt?Ge(this,Wt):Pt())}return xt.prototype.catch=function(tn){return this.then(null,tn)},xt.prototype.finally=function(tn){var mn=this,Dn=mn.constructor;return a(tn)?mn.then(function(er){return Dn.resolve(tn()).then(function(){return er})},function(er){return Dn.resolve(tn()).then(function(){throw er})}):mn.then(tn,tn)},xt}();nn.prototype.then=ae,nn.all=pt,nn.race=ft,nn.resolve=me,nn.reject=et,nn._setScheduler=b,nn._setAsap=S,nn._asap=v;function Ut(){var xt=void 0;if(typeof(typeof window!==void 0?window:commonjsGlobal)<"u")xt=typeof window!==void 0?window:commonjsGlobal;else if(typeof self<"u")xt=self;else try{xt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Wt=xt.Promise;if(Wt){var tn=null;try{tn=Object.prototype.toString.call(Wt.resolve())}catch{}if(tn==="[object Promise]"&&!Wt.cast)return}xt.Promise=nn}return nn.polyfill=Ut,nn.Promise=nn,nn})}).call(this,e(44))},function(t,r,e){const n=e(400),o=e(191),a=e(123),c=o(u=>{const l={};return(()=>{Object.keys(a).forEach(g=>{const v=a[g].method,b=n(`OpenTok:${u}:${g.toLowerCase()}`);b.log=console[v].bind(console),l[g.toLowerCase()]=b})})(),l});c.setLogLevel=u=>{let l;try{l=(typeof window!==void 0?window:commonjsGlobal).localStorage.debug}catch{l=""}const g=[...Object.keys(a).map(v=>`${u>=a[v].priority?"":"-"}(autogen)?OpenTok:*:${v.toLowerCase()}`),...(l||"").split(/[\s,]/).filter(v=>v.indexOf("(autogen)?")===-1)].filter(v=>v).join(",");n.enable(g)},t.exports=c},function(t,r,e){const o=e(542).parse();t.exports=o},function(t,r,e){t.exports=e(534)},function(t,r,e){(function(n){function o(c,u,l,f,g,v,b){try{var S=c[v](b),C=S.value}catch(O){l(O);return}S.done?u(C):n.resolve(C).then(f,g)}function a(c){return function(){var u=this,l=arguments;return new n(function(f,g){var v=c.apply(u,l);function b(C){o(v,f,g,b,S,"next",C)}function S(C){o(v,f,g,b,S,"throw",C)}b(void 0)})}}t.exports=a}).call(this,e(1))},function(t,r,e){const n=e(28),o=e(18),a=e(2)("Events"),c=e(9),u=e(405);t.exports=function(f){const g=new n;return g.on("newListener",b=>{g.emit(`${b}:added`)}),g.on("removeListener",b=>{g.emit(`${b}:removed`)}),c(f,{on(b,S,C){return typeof b=="string"&&S?b.split(" ").forEach(O=>{g.on(O,u(S,C))}):Object.keys(b).forEach(O=>{g.on(O,u(b[O],S))}),this},off(b,S,C){return typeof b=="string"?this.off(b.split(" "),S,C):Array.isArray(b)?b.forEach(O=>{S&&o(S)?g.removeListener(O,u(S,C)):g.removeAllListeners(O)}):b?Object.keys(b).forEach(O=>{g.removeListener(O,u(b[O],S))}):g.removeAllListeners(),this},once(b,S,C){return typeof b=="string"&&S?b.split(" ").forEach(O=>{g.once(O,u(S,C))}):Object.keys(b).forEach(O=>{g.once(O,u(b[O],S))}),this},dispatchEvent(b){if(!b.type)throw new Error("dispatchEvent: Event has no type");return b.target||(b.target=this),this.trigger(b.type,b),this},trigger(b){try{for(var S=arguments.length,C=new Array(S>1?S-1:0),O=1;O<S;O++)C[O-1]=arguments[O];g.emit(b,...C)}catch(A){a.error("An error occurred in an event handler",A)}return this},emit(){return f.trigger(...arguments)},addEventListener(b,S,C){return a.warn("The addEventListener() method is deprecated. Use on() or once() instead."),f.on(b,S,C)},removeEventListener(b,S,C){return a.warn("The removeEventListener() method is deprecated. Use off() instead."),f.off(b,S,C)},listenerCount(b){return g.listenerCount(b)}})}},function(t,r,e){t.exports={AUTHENTICATION_ERROR:"OT_AUTHENTICATION_ERROR",BADLY_FORMED_RESPONSE:"OT_BADLY_FORMED_RESPONSE",CHROME_MICROPHONE_ACQUISITION_ERROR:"OT_CHROME_MICROPHONE_ACQUISITION_ERROR",CONNECT_FAILED:"OT_CONNECT_FAILED",CONNECTION_LIMIT_EXCEEDED:"OT_CONNECTION_LIMIT_EXCEEDED",CONSTRAINTS_NOT_SATISFIED:"OT_CONSTRAINTS_NOT_SATISFIED",CREATE_PEER_CONNECTION_FAILED:"OT_CREATE_PEER_CONNECTION_FAILED",DISCONNECTED:"OT_DISCONNECTED",EMPTY_RESPONSE_BODY:"OT_EMPTY_RESPONSE_BODY",GET_RTC_STATS_REPORT_NOT_SUPPORTED:"OT_GET_RTC_STATS_REPORT_NOT_SUPPORTED",HARDWARE_UNAVAILABLE:"OT_HARDWARE_UNAVAILABLE",ICE_WORKFLOW_FAILED:"OT_ICE_WORKFLOW_FAILED",INVALID_HTTP_STATUS:"OT_INVALID_HTTP_STATUS",INVALID_PARAMETER:"OT_INVALID_PARAMETER",INVALID_SESSION_ID:"OT_INVALID_SESSION_ID",MEDIA_ERR_ABORTED:"OT_MEDIA_ERR_ABORTED",MEDIA_ERR_DECODE:"OT_MEDIA_ERR_DECODE",MEDIA_ERR_NETWORK:"OT_MEDIA_ERR_NETWORK",MEDIA_ERR_SRC_NOT_SUPPORTED:"OT_MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ENDED:"OT_MEDIA_ENDED",NO_DEVICES_FOUND:"OT_NO_DEVICES_FOUND",NO_VALID_CONSTRAINTS:"OT_NO_VALID_CONSTRAINTS",NOT_CONNECTED:"OT_NOT_CONNECTED",NOT_FOUND:"OT_NOT_FOUND",NOT_SUPPORTED:"OT_NOT_SUPPORTED",PEER_CONNECTION_NOT_CONNECTED:"OT_PEER_CONNECTION_NOT_CONNECTED",PERMISSION_DENIED:"OT_PERMISSION_DENIED",RATE_LIMIT_EXCEEDED:"OT_RATE_LIMIT_EXCEEDED",REPORT_ISSUE_FAILED:"OT_REPORT_ISSUE_FAILED",SCREEN_SHARING_EXTENSION_NOT_INSTALLED:"OT_SCREEN_SHARING_EXTENSION_NOT_INSTALLED",SCREEN_SHARING_EXTENSION_NOT_REGISTERED:"OT_SCREEN_SHARING_EXTENSION_NOT_REGISTERED",SCREEN_SHARING_NOT_SUPPORTED:"OT_SCREEN_SHARING_NOT_SUPPORTED",SET_REMOTE_DESCRIPTION_FAILED:"OT_SET_REMOTE_DESCRIPTION_FAILED",FAILED_SET_CONFIGURATION:"OT_FAILED_SET_CONFIGURATION",SOCKET_ALREADY_CONNECTED_CONNECTING:"OT_SOCKET_ALREADY_CONNECTED_CONNECTING",SOCKET_CLOSE_ABNORMAL:"OT_SOCKET_CLOSE_ABNORMAL",SOCKET_CLOSE_CONNECT_EXCEPTION:"OT_SOCKET_CLOSE_CONNECT_EXCEPTION",SOCKET_CLOSE_CONNECTIVITY_LOSS:"OT_SOCKET_CLOSE_CONNECTIVITY_LOSS",SOCKET_CLOSE_FALLBACK_CODE:"OT_SOCKET_CLOSE_FALLBACK_CODE",SOCKET_CLOSE_INCONSISTENT_DATA:"OT_SOCKET_CLOSE_INCONSISTENT_DATA",SOCKET_CLOSE_NO_STATUS:"OT_SOCKET_CLOSE_NO_STATUS",SOCKET_CLOSE_POLICY_VIOLATION:"OT_SOCKET_CLOSE_POLICY_VIOLATION",SOCKET_CLOSE_GOING_AWAY:"OT_SOCKET_CLOSE_GOING_AWAY",SOCKET_CLOSE_PROTOCOL_ERROR:"OT_SOCKET_CLOSE_PROTOCOL_ERROR",SOCKET_CLOSE_TIMEOUT:"OT_SOCKET_CLOSE_TIMEOUT",SOCKET_CLOSE_TOO_LARGE:"OT_SOCKET_CLOSE_TOO_LARGE",SOCKET_CLOSE_UNEXPECTED_CONDITION:"OT_SOCKET_CLOSE_UNEXPECTED_CONDITION",SOCKET_CLOSE_UNSUPPORTED:"OT_SOCKET_CLOSE_UNSUPPORTED",STREAM_CREATE_FAILED:"OT_STREAM_CREATE_FAILED",STREAM_DESTROYED:"OT_STREAM_DESTROYED",STREAM_LIMIT_EXCEEDED:"OT_STREAM_LIMIT_EXCEEDED",STREAM_NOT_FOUND:"OT_STREAM_NOT_FOUND",UNABLE_TO_SUBSCRIBE:"OT_UNABLE_TO_SUBSCRIBE",TERMS_OF_SERVICE_FAILURE:"OT_TERMS_OF_SERVICE_FAILURE",TIMEOUT:"OT_TIMEOUT",CANCEL:"OT_CANCEL",UNABLE_TO_CAPTURE_MEDIA:"OT_UNABLE_TO_CAPTURE_MEDIA",UNABLE_TO_CAPTURE_SCREEN:"OT_UNABLE_TO_CAPTURE_SCREEN",UNEXPECTED_ERROR_CODE:"OT_UNEXPECTED_ERROR_CODE",UNEXPECTED_HTTP_STATUS:"OT_UNEXPECTED_HTTP_STATUS",UNEXPECTED_SERVER_RESPONSE:"OT_UNEXPECTED_SERVER_RESPONSE",UNKNOWN_HTTP_ERROR:"OT_UNKNOWN_HTTP_ERROR",UNSUPPORTED_BROWSER:"OT_UNSUPPORTED_BROWSER",USER_MEDIA_ACCESS_DENIED:"OT_USER_MEDIA_ACCESS_DENIED",XDOMAIN_OR_PARSING_ERROR:"OT_XDOMAIN_OR_PARSING_ERROR",API_KEY_DISABLED:"OT_API_KEY_DISABLED",UNABLE_TO_ACCESS_MEDIA_ENGINE:"OT_UNABLE_TO_ACCESS_MEDIA_ENGINE",SET_PROXY_URL_TIMING_ERROR:"OT_SET_PROXY_URL_TIMING_ERROR",PROXY_URL_ALREADY_SET_ERROR:"OT_PROXY_URL_ALREADY_SET_ERROR",SET_VIDEO_SOURCE_FAILURE:"OT_SET_VIDEO_SOURCE_FAILURE",INVALID_VIDEO_SOURCE:"OT_INVALID_VIDEO_SOURCE",REQUESTED_DEVICE_PERMISSION_DENIED:"OT_REQUESTED_DEVICE_PERMISSION_DENIED",INVALID_AUDIO_OUTPUT_SOURCE:"OT_INVALID_AUDIO_OUTPUT_SOURCE",INVALID_ENCRYPTION_SECRET:"OT_INVALID_ENCRYPTION_SECRET"}},function(t,r,e){const n=e(245),o=e(249),a=e(6),c=e(2);n.logging=c("OT.$"),n.ElementCollection=e(246),n.env=e(3),n.ajax=e(244),n.statable=e(551),n.Analytics=e(26),n.Collection=e(248),n.domExtras=e(552),n.Error=e(250),o(n,"useLogHelpers",{value(u){const l=c("useLogHelpersDeprecatedMixin");return Object.keys(l).forEach(f=>{u[f]=l[f]}),u},name:"OT.useLogHelpers",getWarning:"Please use an external library for your debugging needs"}),n.defaults=e(142),o(n,"eventing",{value:a,name:"OT.$.eventing",getWarning:"Please use an external library to create an event emitter."}),Object.keys(n).forEach(u=>{const f=n[u]._attachToOTHelpers||{};Object.keys(f).forEach(g=>{Object.hasOwnProperty.call(n,g)&&!(u==="util"&&g==="bind")&&console.warn(`More than one module is trying to define ${g} on OTHelpers.`),n[g]=f[g]})}),t.exports=n},function(t,r,e){var n=e(84),o=e(42),a=e(192),c=e(25),u=e(69),l=e(31),f=Object.prototype,g=f.hasOwnProperty,v=a(function(b,S){if(u(S)||c(S)){o(S,l(S),b);return}for(var C in S)g.call(S,C)&&n(b,C,S[C])});t.exports=v},function(t,r,e){t.exports={JS_EXCEPTION:2e3,AUTHENTICATION_ERROR:1004,INVALID_SESSION_ID:1005,CONNECT_FAILED:1006,CONNECT_REJECTED:1007,CONNECTION_TIMEOUT:1008,NOT_CONNECTED:1010,INVALID_PARAMETER:1011,P2P_CONNECTION_FAILED:1013,API_RESPONSE_FAILURE:1014,PEER_CONNECTION_NOT_CONNECTED:1015,TERMS_OF_SERVICE_FAILURE:1026,CONNECTION_LIMIT_EXCEEDED:1027,UNABLE_TO_PUBLISH:1500,UNABLE_TO_SUBSCRIBE:1501,UNSUPPORTED_VIDEO_CODEC:1502,UNABLE_TO_FORCE_DISCONNECT:1520,UNABLE_TO_FORCE_UNPUBLISH:1530,UNABLE_TO_FORCE_MUTE:1540,PUBLISHER_ICE_WORKFLOW_FAILED:1553,SUBSCRIBER_ICE_WORKFLOW_FAILED:1554,STREAM_LIMIT_EXCEEDED:1605,UNEXPECTED_SERVER_RESPONSE:2001,REPORT_ISSUE_ERROR:2011,SET_PROXY_URL_TIMING_ERROR:2021,PROXY_URL_ALREADY_SET_ERROR:2022,GET_RTC_STATS_REPORT_NOT_SUPPORTED:2031,ANVIL_BADLY_FORMED_RESPONSE:3001,ANVIL_INVALID_HTTP_STATUS:3002,ANVIL_XDOMAIN_OR_PARSING_ERROR:3003,ANVIL_UNKNOWN_HTTP_ERROR:3004,ANVIL_UNEXPECTED_ERROR_CODE:3005,ANVIL_EMPTY_RESPONSE_BODY:3006,ANVIL_CONNECT_FAILED:3007,UNABLE_TO_ACCESS_MEDIA_ENGINE:5001}},function(t,r){function e(n){var o=typeof n;return n!=null&&(o=="object"||o=="function")}t.exports=e},function(t,r){var e=Array.isArray;t.exports=e},function(t,r,e){t.exports=function(o){o===void 0&&(o={});const a=o.Errors||e(7),c=o.OTErrorClass||e(22),u=Object.keys(a).map(l=>a[l]);return function(f,g,v){if(u.indexOf(f)===-1)return new Error(`Attempt to use invalid error name (${f}). Original message: ${g.message}`);if(!(g instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(g))))return new Error(`Did not pass Error as second argument: ${g}`);const b=new c(void 0,g.message);if(b.name=f,!g.stack)try{throw g}catch{}return b.stack=g.stack,v&&(b.code=v),b}}},function(t,r){function e(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}t.exports=e},function(t,r,e){var n=e(174),o=typeof self=="object"&&self&&self.Object===Object&&self,a=n||o||Function("return this")();t.exports=a},function(t,r){function e(){return t.exports=e=Object.assign||function(n){for(var o=1;o<arguments.length;o++){var a=arguments[o];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(n[c]=a[c])}return n},e.apply(this,arguments)}t.exports=e},function(t,r,e){var n=e(536),o=e(537),a=o;a.v1=n,a.v4=o,t.exports=a},function(t,r,e){var n=e(30),o=e(11),a="[object AsyncFunction]",c="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";function f(g){if(!o(g))return!1;var v=n(g);return v==c||v==u||v==a||v==l}t.exports=f},function(t,r){function e(n){return n!=null&&typeof n=="object"}t.exports=e},function(t,r,e){var n=e(208),o=Object.prototype.toString;function a(z){return o.call(z)==="[object Array]"}function c(z){return typeof z>"u"}function u(z){return z!==null&&!c(z)&&z.constructor!==null&&!c(z.constructor)&&typeof z.constructor.isBuffer=="function"&&z.constructor.isBuffer(z)}function l(z){return o.call(z)==="[object ArrayBuffer]"}function f(z){return typeof FormData<"u"&&z instanceof FormData}function g(z){var ae;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ae=ArrayBuffer.isView(z):ae=z&&z.buffer&&z.buffer instanceof ArrayBuffer,ae}function v(z){return typeof z=="string"}function b(z){return typeof z=="number"}function S(z){return z!==null&&typeof z=="object"}function C(z){if(o.call(z)!=="[object Object]")return!1;var ae=Object.getPrototypeOf(z);return ae===null||ae===Object.prototype}function O(z){return o.call(z)==="[object Date]"}function A(z){return o.call(z)==="[object File]"}function w(z){return o.call(z)==="[object Blob]"}function V(z){return o.call(z)==="[object Function]"}function k(z){return S(z)&&V(z.pipe)}function M(z){return typeof URLSearchParams<"u"&&z instanceof URLSearchParams}function W(z){return z.replace(/^\s*/,"").replace(/\s*$/,"")}function Y(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function H(z,ae){if(!(z===null||typeof z>"u"))if(typeof z!="object"&&(z=[z]),a(z))for(var me=0,ye=z.length;me<ye;me++)ae.call(null,z[me],me,z);else for(var Pe in z)Object.prototype.hasOwnProperty.call(z,Pe)&&ae.call(null,z[Pe],Pe,z)}function P(){var z={};function ae(Pe,Te){C(z[Te])&&C(Pe)?z[Te]=P(z[Te],Pe):C(Pe)?z[Te]=P({},Pe):a(Pe)?z[Te]=Pe.slice():z[Te]=Pe}for(var me=0,ye=arguments.length;me<ye;me++)H(arguments[me],ae);return z}function j(z,ae,me){return H(ae,function(Pe,Te){me&&typeof Pe=="function"?z[Te]=n(Pe,me):z[Te]=Pe}),z}function _(z){return z.charCodeAt(0)===65279&&(z=z.slice(1)),z}t.exports={isArray:a,isArrayBuffer:l,isBuffer:u,isFormData:f,isArrayBufferView:g,isString:v,isNumber:b,isObject:S,isPlainObject:C,isUndefined:c,isDate:O,isFile:A,isBlob:w,isFunction:V,isStream:k,isURLSearchParams:M,isStandardBrowserEnv:Y,forEach:H,merge:P,extend:j,trim:W,stripBOM:_}},function(t,r,e){const n=e(248),o={publishers:new n("guid"),subscribers:new n("widgetId"),sessions:new n};t.exports=o},function(t,r,e){const n=e(2)("GlobalExceptionHandler"),o=e(6),a=e(27),c=e(550),u=e(23)(),l=function(g,v){Error.call(this),this.code=g,this.message=v};l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,t.exports=l,o(l),l.getTitleByCode=function(f){return c[+f]},l.handleJsException=f=>{let g=f.error,v=f.errorMsg,b=f.code,S=f.target,C=f.analytics;if(!S)throw new Error("handleJsException requires target");const O=()=>b!==void 0?b:g&&g.code,A=()=>v!==void 0?v:g&&g.message,w=l.getTitleByCode(O());n.error(`OT.exception :: title: ${w} (${O()}) msg: ${A()}`);try{const V={partnerId:S.session?S.session.apiKey:S.apiKey,sessionId:S.session?S.session.sessionId:S.sessionId};C.logError(O(),"tb.exception",w,{details:A()},V);const k=new u.ExceptionEvent(a.EXCEPTION,A(),w,O(),S,S,g);if(g)k.stack=g.stack;else try{throw new Error}catch(M){k.stack=M.stack}l.dispatchEvent(k)}catch(V){n.error(`OT.exception :: Failed to dispatch exception - ${V.toString()}`)}}},function(t,r,e){var n=e(0),o=n(e(47)),a=n(e(37));const c=e(130),u=e(27);t.exports=function(f){f===void 0&&(f={});const g=f.logging||e(2)("Events"),v={};v.ExceptionEvent=function(V,k,M,W,Y,H,P){return new c(V,!1,{error:P,message:k,title:M,code:W,component:Y,target:H})},v.IssueReportedEvent=function(V,k){return new c(V,!1,{issueId:k})},v.EnvLoadedEvent=function(V){return new c(V,!1)};let b=!1;v.ConnectionEvent=function(w){(0,a.default)(V,w);function V(k,M,W){return w.call(this,k,!1,{connection:M,reason:W})||this}return(0,o.default)(V,[{key:"connections",get:function(){return b||(g.warn("OT.ConnectionEvent connections property is deprecated, use connection instead."),b=!0),[this.connection]}}]),V}(c);let S=!1;v.StreamEvent=function(w){(0,a.default)(V,w);function V(k,M,W,Y){return w.call(this,k,Y,{stream:M,reason:W})||this}return(0,o.default)(V,[{key:"streams",get:function(){return S||(g.warn("OT.StreamEvent streams property is deprecated, use stream instead."),S=!0),[this.stream]}}]),V}(c);let C=!1,O=!1,A=!1;return v.SessionConnectEvent=function(w){(0,a.default)(V,w);function V(k){return w.call(this,k,!1)||this}return(0,o.default)(V,[{key:"connections",get:function(){return C||(g.warn("OT.SessionConnectedEvent no longer includes connections. Listen for connectionCreated events instead."),C=!0),[]}},{key:"streams",get:function(){return O||(g.warn("OT.SessionConnectedEvent no longer includes streams. Listen for streamCreated events instead."),O=!0),[]}},{key:"archives",get:function(){return A||(g.warn("OT.SessionConnectedEvent no longer includes archives. Listen for archiveStarted events instead."),A=!0),[]}}]),V}(c),v.SessionReconnectingEvent=function(){return new c(u.SESSION_RECONNECTING,!1)},v.SessionReconnectedEvent=function(){return new c(u.SESSION_RECONNECTED)},v.SessionDisconnectEvent=function(V,k,M){return new c(V,M,{reason:k})},v.StreamPropertyChangedEvent=function(V,k,M,W,Y){return new c(V,!1,{stream:k,changedProperty:M,oldValue:W,newValue:Y})},v.VideoDimensionsChangedEvent=function(V,k,M){return new c("videoDimensionsChanged",!1,{target:V,oldValue:k,newValue:M})},v.ArchiveEvent=function(V,k){return new c(V,!1,{id:k.id,name:k.name,status:k.status,archive:k})},v.ArchiveUpdatedEvent=function(V,k,M,W){return new c("updated",!1,{target:V,changedProperty:k,oldValue:M,newValue:W})},v.SignalEvent=function(V,k,M){return new c(V?`signal:${V}`:u.SIGNAL,!1,{data:k,from:M})},v.CaptionReceivedEvent=function(V,k,M){return new c("caption",!1,{caption:V,streamId:k,isFinal:M})},v.StreamUpdatedEvent=function(V,k,M,W){return new c("updated",!1,{target:V,changedProperty:k,oldValue:M,newValue:W})},v.DestroyedEvent=function(V,k,M){return new c(V,!1,{target:k,reason:M})},v.ConnectionStateChangedEvent=function(V,k){return new c(V,!1,{target:k})},v.VideoEnabledChangedEvent=function(V,k){return new c(V,!1,{reason:k.reason})},v.VideoDisableWarningEvent=function(V){return new c(V,!1)},v.AudioLevelUpdatedEvent=function(V){return new c(u.AUDIO_LEVEL_UPDATED,!1,{audioLevel:V})},v.MediaStoppedEvent=function(V,k){return new c(u.MEDIA_STOPPED,!0,{target:V,track:k})},v.MuteForcedEvent=function(V){return new c(u.MUTE_FORCED,!1,V)},v.VideoElementCreatedEvent=function(V){return new c(u.VIDEO_ELEMENT_CREATED,!1,{element:V})},v}},function(t,r,e){(function(n){var o=e(0),a=o(e(4)),c=o(e(5));t.exports=function(u){u===void 0&&(u={});const l=u.getNativeEnumerateDevices||e(288)(),f=u.getNativeMediaDevices||e(642)(),g=u.currentAudioOutputDevice||e(108),v=g.getCurrentAudioOutputDeviceId,b=u.env||e(3),S=u.global||(typeof window!==void 0?window:commonjsGlobal),C={},O={audio:"audioInput",video:"videoInput",audioinput:"audioInput",videoinput:"videoInput",audiooutput:"audioOutput",audioInput:"audioInput",videoInput:"videoInput",audioOutput:"audioOutput"},A=()=>l()();return C.getNativeMediaDevices=()=>f(),C.hasEnumerateDevicesCapability=()=>typeof l()=="function",C.hasDeviceChangeCapability=()=>{const w=f();return!!(w&&"ondevicechange"in w)},C.hasSetSinkIdCapability=()=>"setSinkId"in(S==null?void 0:S.HTMLMediaElement.prototype),C.hasAudioOutputApiSupport=()=>C.hasSetSinkIdCapability()&&C.hasDeviceChangeCapability(),C.hasEnumerateDevicesBug=()=>b.isSafari&&b.version===13.1,C.getMediaDevices=()=>C.hasEnumerateDevicesCapability()?A().then(w=>w.map(V=>({deviceId:V.deviceId||V.id,label:V.label,kind:O[V.kind]}))):n.reject(new Error("This browser does not support enumerateDevices APIs")),C.getInputMediaDevices=()=>C.getMediaDevices().then(w=>w.filter(V=>/^(audio|video)Input$/.test(V.kind))),C.getAudioOutputMediaDevices=()=>C.getMediaDevices().then(w=>w.filter(V=>V.kind==="audioOutput").map(V=>{let k=V.deviceId,M=V.label;return{deviceId:k,label:M}})),C.shouldAskForDevices=()=>C.hasEnumerateDevicesCapability()?C.getInputMediaDevices().then(w=>{if(w.length===0)return{video:!0,audio:!0};const V=w.filter(M=>M.kind==="audioInput"),k=w.filter(M=>M.kind==="videoInput");return C.hasEnumerateDevicesBug()&&k.length===0?{audio:!0,video:!0}:{video:k.length>0,audio:V.length>0,videoDevices:k,audioDevices:V}}).catch(()=>({video:!0,audio:!0})):n.resolve({video:!0,audio:!0}),C.getDefaultAudioOutputDeviceId=w=>!Array.isArray(w)||w.length===0?"":(w.find(M=>M.deviceId==="default")||w[0]).deviceId,C.hasDevice=(w,V)=>{let k=w;return Array.isArray(k)||(k=[]),k.some(M=>M.deviceId===V)},C.getActiveAudioOutputDevice=(0,c.default)(a.default.mark(function w(){var V,k,M;return a.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,C.getAudioOutputMediaDevices();case 3:V=Y.sent,Y.next=9;break;case 6:throw Y.prev=6,Y.t0=Y.catch(0),Y.t0;case 9:if(V.length!==0){Y.next=11;break}return Y.abrupt("return",{deviceId:null,label:null});case 11:return k=V.find(H=>H.deviceId===v()),k||(M=C.getDefaultAudioOutputDeviceId(V),k=V.find(H=>H.deviceId===M)),Y.abrupt("return",k);case 14:case"end":return Y.stop()}},w,null,[[0,6]])})),C}}).call(this,e(1))},function(t,r,e){var n=e(18),o=e(116);function a(c){return c!=null&&o(c.length)&&!n(c)}t.exports=a},function(t,r,e){var n=e(0),o=n(e(16)),a=n(e(4)),c=n(e(5)),u=n(e(47)),l=n(e(14));const f=e(241),g=e(538),v=e(143),b=e(35)(),S=e(553),C=e(6),O=e(555),A=e(558),w="2";let V=function(){function k(W){let Y=W===void 0?{}:W,H=Y.staticConfig,P=H===void 0?b.onlyLocal():H,j=Y.sessionInfo,_=j===void 0?new v:j,z=Y.ajax,ae=Y.queue,me=Y.getUserAgentClientHintData,ye=me===void 0?A:me,Pe=Y.userAgentData,Te=Pe===void 0?typeof navigator<"u"&&navigator.userAgentData:Pe;(0,l.default)(this,"getTurnServerName",Ue=>{let _e,je;return!Ue||typeof Ue!="object"?_e:((Array.isArray(Ue)?Ue:[Ue]).forEach(De=>{const Ze=De.urls||De.url;(Array.isArray(Ze)?Ze:[Ze]).forEach(gt=>{const Ee=gt.indexOf(":")+1,Le=gt.lastIndexOf(":");gt.includes("turns")?je=gt.substring(Ee,Le):_e=gt.substring(Ee,Le)})}),je||_e)}),this.ajax=z,this.queue=ae,this.sessionInfo=_,this.getUserAgentClientHintData=ye,this.userAgentData=Te,this.staticConfig=P}var M=k.prototype;return M._getCachedUserAgentData=function(){var W=(0,c.default)(a.default.mark(function H(){return a.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(this.cachedUserAgentData){j.next=4;break}return j.next=3,this.getUserAgentClientHintData(this.userAgentData);case 3:this.cachedUserAgentData=j.sent;case 4:return j.abrupt("return",this.cachedUserAgentData);case 5:case"end":return j.stop()}},H,this)}));function Y(){return W.apply(this,arguments)}return Y}(),M.commonQoSFields=function(){const Y=this._analytics.proxyUrl,H=this.sessionInfo.messagingURL;return{clientVersion:this.staticConfig.clientVersion,buildHash:this.staticConfig.buildHash,source:(typeof window!==void 0?window:commonjsGlobal).location&&(typeof window!==void 0?window:commonjsGlobal).location.href,logVersion:w,apiServer:this.staticConfig.apiUrl,clientSystemTime:new Date().getTime(),sessionId:this.sessionInfo.sessionId,mediaServerName:this.sessionInfo.mediaServerName,relayServer:this.getTurnServerName(this.sessionInfo.iceServers),p2p:this.sessionInfo.p2pEnabled,messagingServer:this.sessionInfo.messagingServer,messagingUrl:S(Y,H),version:this.staticConfig.version,partnerId:this.sessionInfo.partnerId}},M._getCommonDataFields=function(){var W=(0,c.default)(a.default.mark(function H(){var P,j;return a.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,f.getAsync();case 2:return P=z.sent,z.next=5,this._getCachedUserAgentData();case 5:return j=z.sent,z.abrupt("return",(0,o.default)({guid:P},this.commonQoSFields(),j));case 7:case"end":return z.stop()}},H,this)}));function Y(){return W.apply(this,arguments)}return Y}(),M.logError=function(Y,H,P,j,_){_===void 0&&(_={}),this._getCommonDataFields().then(z=>{const ae=[Y,H,P,j,(0,o.default)({},z,_)];k.emit("logError",...ae),this._analytics.logError(...ae)})},M.logEvent=function(Y,H,P){Y===void 0&&(Y={}),this._getCommonDataFields().then(j=>{const _=(0,o.default)({},j,Y);k.emit("logEvent",_),this._analytics.logEvent(_,!1,H,P)})},M.logQOS=function(Y){Y===void 0&&(Y={}),this._getCommonDataFields().then(H=>{const P=(0,o.default)({duration:0},H,Y);O(P),k.emit("logQOS",P),this._analytics.logQOS(P)})},(0,u.default)(k,[{key:"staticConfig",get:function(){return this._staticConfig},set:function(Y){this._staticConfig=Y,this._analytics=new g({loggingUrl:this.staticConfig.loggingUrl,ajax:this.ajax,queue:this.queue})}}]),k}();C(V),t.exports=V},function(t,r,e){t.exports={ACTIVE:"active",INACTIVE:"inactive",UNKNOWN:"unknown",PER_SESSION:"perSession",PER_STREAM:"perStream",EXCEPTION:"exception",ISSUE_REPORTED:"issueReported",SESSION_CONNECTED:"sessionConnected",SESSION_RECONNECTING:"sessionReconnecting",SESSION_RECONNECTED:"sessionReconnected",SESSION_DISCONNECTED:"sessionDisconnected",STREAM_CREATED:"streamCreated",STREAM_DESTROYED:"streamDestroyed",CONNECTION_CREATED:"connectionCreated",CONNECTION_DESTROYED:"connectionDestroyed",SIGNAL:"signal",STREAM_PROPERTY_CHANGED:"streamPropertyChanged",MICROPHONE_LEVEL_CHANGED:"microphoneLevelChanged",RESIZE:"resize",SETTINGS_BUTTON_CLICK:"settingsButtonClick",DEVICE_INACTIVE:"deviceInactive",INVALID_DEVICE_NAME:"invalidDeviceName",ACCESS_ALLOWED:"accessAllowed",ACCESS_DENIED:"accessDenied",ACCESS_DIALOG_OPENED:"accessDialogOpened",ACCESS_DIALOG_CLOSED:"accessDialogClosed",ECHO_CANCELLATION_MODE_CHANGED:"echoCancellationModeChanged",MEDIA_STOPPED:"mediaStopped",PUBLISHER_DESTROYED:"destroyed",MUTE_FORCED:"muteForced",SUBSCRIBER_DESTROYED:"destroyed",SUBSCRIBER_CONNECTED:"connected",SUBSCRIBER_DISCONNECTED:"disconnected",SUBSCRIBER_CAPTION_RECEIVED:"captionReceived",DEVICES_DETECTED:"devicesDetected",DEVICES_SELECTED:"devicesSelected",CLOSE_BUTTON_CLICK:"closeButtonClick",MICLEVEL:"microphoneActivityLevel",MICGAINCHANGED:"microphoneGainChanged",ENV_LOADED:"envLoaded",ENV_UNLOADED:"envUnloaded",AUDIO_LEVEL_UPDATED:"audioLevelUpdated",VIDEO_ELEMENT_CREATED:"videoElementCreated"}},function(t,r,e){(function(n){var o=typeof Reflect=="object"?Reflect:null,a=o&&typeof o.apply=="function"?o.apply:function(H,P,j){return Function.prototype.apply.call(H,P,j)},c;o&&typeof o.ownKeys=="function"?c=o.ownKeys:Object.getOwnPropertySymbols?c=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:c=function(H){return Object.getOwnPropertyNames(H)};function u(Y){console&&console.warn&&console.warn(Y)}var l=Number.isNaN||function(H){return H!==H};function f(){f.init.call(this)}t.exports=f,t.exports.once=W,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var g=10;function v(Y){if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return g},set:function(Y){if(typeof Y!="number"||Y<0||l(Y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Y+".");g=Y}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||l(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function b(Y){return Y._maxListeners===void 0?f.defaultMaxListeners:Y._maxListeners}f.prototype.getMaxListeners=function(){return b(this)},f.prototype.emit=function(H){for(var P=[],j=1;j<arguments.length;j++)P.push(arguments[j]);var _=H==="error",z=this._events;if(z!==void 0)_=_&&z.error===void 0;else if(!_)return!1;if(_){var ae;if(P.length>0&&(ae=P[0]),ae instanceof Error)throw ae;var me=new Error("Unhandled error."+(ae?" ("+ae.message+")":""));throw me.context=ae,me}var ye=z[H];if(ye===void 0)return!1;if(typeof ye=="function")a(ye,this,P);else for(var Pe=ye.length,Te=V(ye,Pe),j=0;j<Pe;++j)a(Te[j],this,P);return!0};function S(Y,H,P,j){var _,z,ae;if(v(P),z=Y._events,z===void 0?(z=Y._events=Object.create(null),Y._eventsCount=0):(z.newListener!==void 0&&(Y.emit("newListener",H,P.listener?P.listener:P),z=Y._events),ae=z[H]),ae===void 0)ae=z[H]=P,++Y._eventsCount;else if(typeof ae=="function"?ae=z[H]=j?[P,ae]:[ae,P]:j?ae.unshift(P):ae.push(P),_=b(Y),_>0&&ae.length>_&&!ae.warned){ae.warned=!0;var me=new Error("Possible EventEmitter memory leak detected. "+ae.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");me.name="MaxListenersExceededWarning",me.emitter=Y,me.type=H,me.count=ae.length,u(me)}return Y}f.prototype.addListener=function(H,P){return S(this,H,P,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(H,P){return S(this,H,P,!0)};function C(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function O(Y,H,P){var j={fired:!1,wrapFn:void 0,target:Y,type:H,listener:P},_=C.bind(j);return _.listener=P,j.wrapFn=_,_}f.prototype.once=function(H,P){return v(P),this.on(H,O(this,H,P)),this},f.prototype.prependOnceListener=function(H,P){return v(P),this.prependListener(H,O(this,H,P)),this},f.prototype.removeListener=function(H,P){var j,_,z,ae,me;if(v(P),_=this._events,_===void 0)return this;if(j=_[H],j===void 0)return this;if(j===P||j.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete _[H],_.removeListener&&this.emit("removeListener",H,j.listener||P));else if(typeof j!="function"){for(z=-1,ae=j.length-1;ae>=0;ae--)if(j[ae]===P||j[ae].listener===P){me=j[ae].listener,z=ae;break}if(z<0)return this;z===0?j.shift():k(j,z),j.length===1&&(_[H]=j[0]),_.removeListener!==void 0&&this.emit("removeListener",H,me||P)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(H){var P,j,_;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[H]),this;if(arguments.length===0){var z=Object.keys(j),ae;for(_=0;_<z.length;++_)ae=z[_],ae!=="removeListener"&&this.removeAllListeners(ae);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=j[H],typeof P=="function")this.removeListener(H,P);else if(P!==void 0)for(_=P.length-1;_>=0;_--)this.removeListener(H,P[_]);return this};function A(Y,H,P){var j=Y._events;if(j===void 0)return[];var _=j[H];return _===void 0?[]:typeof _=="function"?P?[_.listener||_]:[_]:P?M(_):V(_,_.length)}f.prototype.listeners=function(H){return A(this,H,!0)},f.prototype.rawListeners=function(H){return A(this,H,!1)},f.listenerCount=function(Y,H){return typeof Y.listenerCount=="function"?Y.listenerCount(H):w.call(Y,H)},f.prototype.listenerCount=w;function w(Y){var H=this._events;if(H!==void 0){var P=H[Y];if(typeof P=="function")return 1;if(P!==void 0)return P.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?c(this._events):[]};function V(Y,H){for(var P=new Array(H),j=0;j<H;++j)P[j]=Y[j];return P}function k(Y,H){for(;H+1<Y.length;H++)Y[H]=Y[H+1];Y.pop()}function M(Y){for(var H=new Array(Y.length),P=0;P<H.length;++P)H[P]=Y[P].listener||Y[P];return H}function W(Y,H){return new n(function(P,j){function _(){z!==void 0&&Y.removeListener("error",z),P([].slice.call(arguments))}var z;H!=="error"&&(z=function(me){Y.removeListener(H,_),j(me)},Y.once("error",z)),Y.once(H,_)})}}).call(this,e(1))},function(t,r,e){var n=!0,o=!0;function a(u,l,f){var g=u.match(l);return g&&g.length>=f&&parseInt(g[f],10)}function c(u,l,f){if(u.RTCPeerConnection){var g=u.RTCPeerConnection.prototype,v=g.addEventListener;g.addEventListener=function(S,C){if(S!==l)return v.apply(this,arguments);var O=function(A){var w=f(A);w&&C(w)};return this._eventMap=this._eventMap||{},this._eventMap[C]=O,v.apply(this,[S,O])};var b=g.removeEventListener;g.removeEventListener=function(S,C){if(S!==l||!this._eventMap||!this._eventMap[C])return b.apply(this,arguments);var O=this._eventMap[C];return delete this._eventMap[C],b.apply(this,[S,O])},Object.defineProperty(g,"on"+l,{get:function(){return this["_on"+l]},set:function(S){this["_on"+l]&&(this.removeEventListener(l,this["_on"+l]),delete this["_on"+l]),S&&this.addEventListener(l,this["_on"+l]=S)},enumerable:!0,configurable:!0})}}t.exports={extractVersion:a,wrapPeerConnectionEvent:c,disableLog:function(u){return typeof u!="boolean"?new Error("Argument type: "+typeof u+". Please use a boolean."):(n=u,u?"adapter.js logging disabled":"adapter.js logging enabled")},disableWarnings:function(u){return typeof u!="boolean"?new Error("Argument type: "+typeof u+". Please use a boolean."):(o=!u,"adapter.js deprecation warnings "+(u?"disabled":"enabled"))},log:function(){if(typeof window=="object"){if(n)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}},deprecated:function(u,l){o&&console.warn(u+" is deprecated, please use "+l+" instead.")},detectBrowser:function(u){var l=u&&u.navigator,f={};if(f.browser=null,f.version=null,typeof u>"u"||!u.navigator)return f.browser="Not a browser.",f;if(l.mozGetUserMedia)f.browser="firefox",f.version=a(l.userAgent,/Firefox\/(\d+)\./,1);else if(l.webkitGetUserMedia)f.browser="chrome",f.version=a(l.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(l.mediaDevices&&l.userAgent.match(/Edge\/(\d+).(\d+)$/))f.browser="edge",f.version=a(l.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(u.RTCPeerConnection&&l.userAgent.match(/AppleWebKit\/(\d+)\./))f.browser="safari",f.version=a(l.userAgent,/AppleWebKit\/(\d+)\./,1);else return f.browser="Not a supported browser.",f;return f}}},function(t,r,e){var n=e(41),o=e(361),a=e(362),c="[object Null]",u="[object Undefined]",l=n?n.toStringTag:void 0;function f(g){return g==null?g===void 0?u:c:l&&l in Object(g)?o(g):a(g)}t.exports=f},function(t,r,e){var n=e(178),o=e(118),a=e(25);function c(u){return a(u)?n(u):o(u)}t.exports=c},function(t,r,e){var n=e(45);t.exports=function(o){if(!n(o))throw new TypeError("Cannot use null or undefined");return o}},function(t,r,e){var n=e(57),o=e(199),a=e(129),c=e(200),u=e(201),l=t.exports=function(f,g){var v,b,S,C,O;return arguments.length<2||typeof f!="string"?(C=g,g=f,f=null):C=arguments[2],n(f)?(v=u.call(f,"c"),b=u.call(f,"e"),S=u.call(f,"w")):(v=S=!0,b=!1),O={value:g,configurable:v,enumerable:b,writable:S},C?a(c(C),O):O};l.gs=function(f,g,v){var b,S,C,O;return typeof f!="string"?(C=v,v=g,g=f,f=null):C=arguments[3],n(g)?o(g)?n(v)?o(v)||(C=v,v=void 0):v=void 0:(C=g,g=v=void 0):g=void 0,n(f)?(b=u.call(f,"c"),S=u.call(f,"e")):(b=!0,S=!1),O={get:g,set:v,configurable:b,enumerable:S},C?a(c(C),O):O}},function(t,r){function e(n,o){for(var a=-1,c=n==null?0:n.length,u=Array(c);++a<c;)u[a]=o(n[a],a,n);return u}t.exports=e},function(t,r,e){(function(n){var o=e(0),a=o(e(16)),c=o(e(47));const u=e(207),l=e(58),f=e(479),g=e(526),v=e(2)("StaticConfig"),b=e(101),S=b.prependProxyToUrlIfNeeded,C=l({version:"v2.24.6",buildHash:"50f07872f",minimumVersion:{firefox:52,chrome:49},debug:"false",websiteURL:"http://www.tokbox.com",configURL:"https://config.opentok.com",ipWhitelistConfigURL:"",cdnURL:"https://static.opentok.com",loggingURL:"https://hlg.tokbox.com/prod",apiURL:"https://anvil.opentok.com"}),O=f(["apiURL","assetURL","cdnURL","sessionInfoOverrides","loggingURL"]),A={apiUrl:"apiURL",loggingUrl:"loggingURL"},w=g(k=>A[k]);function V(k){let M=k===void 0?{}:k,W=M.axios,Y=W===void 0?u:W;return function(){P.onlyLocal=function(){const _=l((typeof window!==void 0?window:commonjsGlobal).OTProperties);return new P((0,a.default)({},C,O(_)))},P.get=function(_){let z=_.partnerId,ae=_.token,me=_.useIpWhitelistConfigUrl,ye=_.proxyUrl;return(()=>{const Te=this.onlyLocal();if(!Te.configUrl)return n.resolve({});if(me===!0&&!Te.ipWhitelistConfigUrl)return n.resolve({});let Ue=me===!0?Te.ipWhitelistConfigUrl:Te.configUrl;return Ue=S(Ue,ye),Y.get(`${Ue}/project/${z}/config.json`,{headers:{"X-TB-TOKEN-AUTH":ae}}).then(_e=>_e.data)})().catch(Te=>(v.error("could not reach live config service",Te),{})).then(Te=>{const Ue=l((typeof window!==void 0?window:commonjsGlobal).OTProperties),_e=(0,a.default)({},C,O(Ue),w(Te));return new P(_e)})};function P(j){Object.defineProperty(this,"config",{value:Object.freeze(l(j))})}return(0,c.default)(P,[{key:"configUrl",get:function(){return this.config.configURL}},{key:"ipWhitelistConfigUrl",get:function(){return this.config.ipWhitelistConfigURL}},{key:"apiUrl",get:function(){return this.config.apiURL}},{key:"loggingUrl",get:function(){return this.config.loggingURL}},{key:"apiEnabled",get:function(){return typeof this.config.apiEnabled<"u"?this.config.apiEnabled:!0}},{key:"version",get:function(){return this.config.version}},{key:"clientVersion",get:function(){return`js-${(this.version||"unknown").replace("v","")}`}},{key:"buildHash",get:function(){return this.config.buildHash}},{key:"minimumVersion",get:function(){return this.config.minimumVersion}},{key:"websiteUrl",get:function(){return this.config.websiteURL}},{key:"debug",get:function(){return this.config.debug==="true"||this.config.debug===!0}},{key:"sessionInfoOverrides",get:function(){return this.config.sessionInfoOverrides}},{key:"cdnUrl",get:function(){return this.config.cdnURL||`${(typeof window!==void 0?window:commonjsGlobal).location.protocol}//${(typeof window!==void 0?window:commonjsGlobal).location.host}`}},{key:"assetUrl",get:function(){return this.config.assetURL||`${this.cdnUrl}/webrtc/${this.version}`}}]),P}()}t.exports=V}).call(this,e(1))},function(t,r,e){var n=e(505),o=e(511),a=e(89),c=e(12),u=e(516);function l(f){return typeof f=="function"?f:f==null?a:typeof f=="object"?c(f)?o(f[0],f[1]):n(f):u(f)}t.exports=l},function(t,r){function e(n,o){n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o}t.exports=e},function(t,r,e){const n=e(8);t.exports=function(a,c){let u;const l=c||{};a.setDisplayMode=function(f){const g=f||"auto";u!==g&&(n.removeClass(this.domElement,`OT_mode-${u}`),n.addClass(this.domElement,`OT_mode-${g}`),u=g)},a.getDisplayMode=function(){return u},a.showAfterLoading=function(){n.removeClass(this.domElement,"OT_hide-forced")},a.hideWhileLoading=function(){n.addClass(this.domElement,"OT_hide-forced")},a.destroy=function(){return l.onDestroy&&l.onDestroy(this.domElement),this.domElement&&n.removeElement(this.domElement),a},a.appendTo=function(f){return this.domElement=n.createElement(l.nodeName||"div",l.htmlAttributes,l.htmlContent),l.onCreate&&l.onCreate(this.domElement),a.setDisplayMode(l.mode),l.mode==="auto"&&(n.addClass(a.domElement,"OT_mode-on-hold"),setTimeout(()=>{n.removeClass(a.domElement,"OT_mode-on-hold")},2e3)),f.appendChild(this.domElement),a}}},function(t,r,e){var n=e(78),o=4;function a(c){return n(c,o)}t.exports=a},function(t,r,e){var n=e(360),o=e(365);function a(c,u){var l=o(c,u);return n(l)?l:void 0}t.exports=a},function(t,r,e){var n=e(15),o=n.Symbol;t.exports=o},function(t,r,e){var n=e(84),o=e(64);function a(c,u,l,f){var g=!l;l||(l={});for(var v=-1,b=u.length;++v<b;){var S=u[v],C=f?f(l[S],c[S],S,l,c):void 0;C===void 0&&(C=c[S]),g?o(l,S,C):n(l,S,C)}return l}t.exports=a},function(t,r,e){var n=e(389),o=e(113),a=e(390),c=e(186),u=e(187),l=e(30),f=e(175),g="[object Map]",v="[object Object]",b="[object Promise]",S="[object Set]",C="[object WeakMap]",O="[object DataView]",A=f(n),w=f(o),V=f(a),k=f(c),M=f(u),W=l;(n&&W(new n(new ArrayBuffer(1)))!=O||o&&W(new o)!=g||a&&W(a.resolve())!=b||c&&W(new c)!=S||u&&W(new u)!=C)&&(W=function(Y){var H=l(Y),P=H==v?Y.constructor:void 0,j=P?f(P):"";if(j)switch(j){case A:return O;case w:return g;case V:return b;case k:return S;case M:return C}return H}),t.exports=W},function(t,r){var e=t.exports={},n,o;function a(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=a}catch{n=a}try{typeof clearTimeout=="function"?o=clearTimeout:o=c}catch{o=c}})();function u(w){if(n===setTimeout)return setTimeout(w,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(w,0);try{return n(w,0)}catch{try{return n.call(null,w,0)}catch{return n.call(this,w,0)}}}function l(w){if(o===clearTimeout)return clearTimeout(w);if((o===c||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(w);try{return o(w)}catch{try{return o.call(null,w)}catch{return o.call(this,w)}}}var f=[],g=!1,v,b=-1;function S(){!g||!v||(g=!1,v.length?f=v.concat(f):b=-1,f.length&&C())}function C(){if(!g){var w=u(S);g=!0;for(var V=f.length;V;){for(v=f,f=[];++b<V;)v&&v[b].run();b=-1,V=f.length}v=null,g=!1,l(w)}}e.nextTick=function(w){var V=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)V[k-1]=arguments[k];f.push(new O(w,V)),f.length===1&&!g&&u(C)};function O(w,V){this.fun=w,this.array=V}O.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function A(){}e.on=A,e.addListener=A,e.once=A,e.off=A,e.removeListener=A,e.removeAllListeners=A,e.emit=A,e.prependListener=A,e.prependOnceListener=A,e.listeners=function(w){return[]},e.binding=function(w){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(w){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(t,r,e){var n=e(408)();t.exports=function(o){return o!==n&&o!==null}},function(t,r,e){t.exports=e(422)()?e(92).Symbol:e(425)},function(t,r){function e(o,a){for(var c=0;c<a.length;c++){var u=a[c];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(o,u.key,u)}}function n(o,a,c){return a&&e(o.prototype,a),c&&e(o,c),o}t.exports=n},function(t,r,e){var n=e(71),o=1/0;function a(c){if(typeof c=="string"||n(c))return c;var u=c+"";return u=="0"&&1/c==-o?"-0":u}t.exports=a},function(t,r,e){var n=e(523),o=e(141),a=o(function(c,u){return c==null?{}:n(c,u)});t.exports=a},function(t,r,e){const n=(typeof window!==void 0?window:commonjsGlobal).performance||{};t.exports=function(){return n.now?n.timing.navigationStart+n.now():Date.now()}},function(t,r,e){var n=e(589);function o(a){return n(2,a)}t.exports=o},function(t,r,e){const n=e(51),o=e(35)();r.check=function(a){a===void 0&&(a={});const c=a.env||e(3),u=a.hasGetUserMediaCapability||e(597),l=a.hasPeerConnectionCapability||e(598),f=a.logging||e(2)("hasOpenTokSupport"),b=((a.staticConfig||o.onlyLocal()).minimumVersion||{})[c.name.toLowerCase()];return b&&b>c.version?(f.debug("Support for",c.name,"is disabled because we require",b,"but this is",c.version),!1):c.name==="Node"?!0:u()&&l()},r.once=n(()=>r.check())},function(t,r,e){function n(w,V){var k;if(typeof Symbol>"u"||w[Symbol.iterator]==null){if(Array.isArray(w)||(k=o(w))||V&&w&&typeof w.length=="number"){k&&(w=k);var M=0;return function(){return M>=w.length?{done:!0}:{done:!1,value:w[M++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return k=w[Symbol.iterator](),k.next.bind(k)}function o(w,V){if(w){if(typeof w=="string")return a(w,V);var k=Object.prototype.toString.call(w).slice(8,-1);if(k==="Object"&&w.constructor&&(k=w.constructor.name),k==="Map"||k==="Set")return Array.from(w);if(k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k))return a(w,V)}}function a(w,V){(V==null||V>w.length)&&(V=w.length);for(var k=0,M=new Array(V);k<V;k++)M[k]=w[k];return M}const c=e(9),u=e(62),l=e(273),f=e(131),g=e(274),v=e(2)("SDPHelpers"),b=1e4,S=2e4,C={getSections(w){return w.split(/\r\n|\r|\n/).reduce((V,k)=>{const M=k.match(/^m=(\w+) \d+/);return M&&(V.sections[V.section=M[1]]=[]),V.sections[V.section].push(k),V},{sections:{header:[]},section:"header"}).sections},getCodecsAndCodecMap(w,V){const k=C.getSections(w)[V];if(!k)throw new Error(`no mediaType ${V}`);const M=k[0].match(/m=\w+ \d+ [A-Z/]+ ([\d ]+)$/)[1].split(" "),W=c(...k.filter(Y=>Y.match(/^a=rtpmap:\d+/)).map(Y=>Y.match(/^a=rtpmap:(\d+) ([\w-]+)/).splice(1)).map(Y=>{let H=Y[0],P=Y[1];return{[H]:P}}));return{codecs:M,codecMap:W}},getCodecs(w,V){const k=C.getCodecsAndCodecMap(w,V);return k.codecs.map(M=>k.codecMap[M]||"Unknown codec")},mediaDirections:{INACTIVE:"inactive",RECVONLY:"recvonly"}};t.exports=C,C.getMLineIndex=function(V,k){const M=`m=${k}`;return l(V,W=>W.indexOf(M)!==-1)},C.getMLine=function(V,k){const M=C.getMLineIndex(V,k);return M>-1?V[M]:void 0},C.hasMediaType=(w,V)=>{const k=new RegExp(`^m=${V}`),M=w.split(`\r
`);return l(M,W=>k.test(W))>=0},C.hasMLinePayloadType=function(V,k,M){const W=C.getMLine(V,k);return C.getMLinePayloadTypes(W,k).indexOf(M)>-1},C.getMLinePayloadTypes=function(V,k){const M=new RegExp(`^m=${k} \\d+(/\\d+)? [a-zA-Z0-9/]+(( [a-zA-Z0-9/]+)+)$`,"i"),W=V.match(M);return!W||W.length<2?[]:W[2].trim().split(" ")},C.splitSections=function(V){return V.split(`
m=`).map((M,W)=>(W>0?"m="+M:M).trim()+`\r
`)},C.changeMediaDirection=function(V,k){const M=P=>{const j=k===C.mediaDirections.RECVONLY?"a=inactive":"a=recvonly",_=new RegExp(j,"g");return P.replace(_,`a=${k}`)},W=C.splitSections(V);let H=W.shift();return W.forEach(P=>{const j=P.includes("m=video")?M(P):P;H+=j}),H},C.removeTypesFromMLine=function(V,k){const M=/[0-9 ]*$/.exec(V)[0],W=M.split(" ").filter(Y=>Y!==""&&k.indexOf(Y)===-1);return V.replace(M,` ${W.join(" ")}`)},C.removeMediaEncoding=function(V,k,M){let W,Y,H,P,j=V.split(`\r
`);const _=C.getMLineIndex(j,k),z=_>-1?j[_]:void 0,ae=[];if(_===-1||(W=C.getMLinePayloadTypes(z,k),W.length===0))return j.join(`\r
`);for(Y=_;Y<j.length;Y++){const me=new RegExp(M,"i");j[Y].indexOf("a=rtpmap:")===0&&(P=j[Y].split(" "),P.length===2&&me.test(P[1])&&ae.push(P[0].substr(9)))}if(!ae.length)return j.join(`\r
`);for(Y=_;Y<j.length;Y++)if(j[Y].indexOf("a=fmtp:")===0)for(P=j[Y].split(" "),H=0;H<ae.length;H++)P.length===2&&P[1]===`apt=${ae[H]}`&&ae.push(P[0].substr(7));return j=j.filter(me=>{for(let ye=0;ye<ae.length;ye++)if(me.indexOf(`a=rtpmap:${ae[ye]} `)===0||me.indexOf(`a=fmtp:${ae[ye]} `)===0||me.indexOf(`a=rtcp-fb:${ae[ye]} `)===0)return!1;return!0}),ae.length>0&&_>-1&&(j[_]=C.removeTypesFromMLine(z,ae)),j.join(`\r
`)},C.disableMediaType=function(V,k){const M=V.split(`\r
`),W=[];let Y;M.forEach(j=>{let _=j;/^m=/.test(_)&&(Y=void 0),Y||(Y=[],W.push(Y)),Y.push(_)});const H=new RegExp(`^m=${k} \\d+ ([^ ]+) [0-9 ]+$`),P=W.map(j=>{const _=j[0].match(H);return _?[`m=${k} 0 ${_[1]} 0`,"a=inactive",...j.filter(z=>/^c=/.test(z)||/^a=mid:/.test(z)||z==="")]:j});return[].concat(...P).join(`\r
`)},C.removeVideoCodec=function(V,k){return C.removeMediaEncoding(V,"video",k)};const O=function(V,k){let M=k.filterByName("ssrc-group:FID");switch(M.length===0?M=[]:M=M[0].value.split(" "),M.length){case 0:case 1:var Y=k.find(P=>P.name.indexOf("rtpmap:")===0&&P.value.indexOf("rtx/90000")>-1);if(!Y)return!1;var H=Y.name.split(":")[1];return H.indexOf("/")>-1&&(H=H.split("/")[0]),C.hasMLinePayloadType(V,"video",H);default:return v.debug("SDP Helpers: There are more than two FIDs, RTX is definitely enabled"),!0}};C.getAttributesForMediaType=function(V,k){let M,W,Y,H,P,j,_,z,ae,me;const ye=C.getMLineIndex(V,k),Pe=new RegExp(`m=(?!${k}).+ `,"i"),Te=new RegExp("a=ssrc:\\d+ .*","i"),Ue=new RegExp("a=ssrc-group:(SIM|FID) (\\d+).*?","i"),_e=new RegExp("a=([a-z0-9:/-]+) (.*)","i"),je=[];for(let Ke=ye+1;Ke<V.length;Ke++){if(Pe.test(V[Ke])){M!==void 0&&(W=Ke-1);break}P=V[Ke].match(Ue),j=V[Ke].match(Te),M===void 0&&(P||j)&&(M=Ke,P&&(H=/^(FID|SIM)$/.test(P[1])?P[2]:P[1])),_=V[Ke].match(`a=ssrc:${H} msid:(.+)`),_&&(z=_[1]);const De=Te.test(V[Ke]),Ze=Ue.test(V[Ke]);M!==void 0&&(W===void 0&&!De&&!Ze?W=Ke-1:Ke===V.length-1&&(W=Ke));const tt=V[Ke].match(/a=mid:(.+)/);tt&&(ae=tt[1],me=Ke),Y=_e.exec(V[Ke]),Y&&Y.length===3&&je.push({lineIndex:Ke,name:Y[1],value:Y[2]})}return je.ssrcStartIndex=M,je.ssrcEndIndex=W,je.msid=z,je.mid=ae,je.midIndex=me,je.isUsingRTX=O.bind(null,V,je),je.filterByName=function(De){return this.filter(Ze=>Ze.name===De)},je.getRtpNumber=Ke=>{const De=new RegExp("rtpmap:(.+)");return u(je.map(Ze=>{const tt=Ze.name.match(De);return tt&&Ze.value.indexOf(Ke)>=0?tt[1]:null}),Ze=>Ze!==null)},je},C.modifyDtx=(w,V)=>{const k=w.split(`\r
`);if(!C.getMLine(k,"audio"))return v.debug("No audio m-line, not enabling dtx."),w;const M=C.getAttributesForMediaType(k,"audio"),W=M.getRtpNumber("opus");if(!W)return v.debug("Could not find rtp number for opus, not enabling dtx."),w;const Y=M.find(j=>j.name===`fmtp:${W}`);if(!Y)return v.debug("Could not find a=fmtp line for opus, not enabling dtx."),w;let H=k[Y.lineIndex];const P=/usedtx=\d+([\s;]*)/;return P.test(Y.value)?H=H.replace(P,V?"usedtx=1$1":""):V&&(H+="; usedtx=1"),H=H.replace(/[;\s]*$/,""),k[Y.lineIndex]=H,k.join(`\r
`)};const A=(w,V,k)=>{const M=V.split(`\r
`);if(!C.getMLine(M,"audio"))return v.debug("No audio m-line, not enabling stereo."),V;const W=C.getAttributesForMediaType(M,"audio"),Y=W.getRtpNumber("opus");if(!Y)return v.debug("Could not find rtp number for opus, not enabling stereo."),V;const H=W.find(_=>_.name===`fmtp:${Y}`);if(!H)return v.debug("Could not find a=fmtp line for opus, not enabling stereo."),V;let P=M[H.lineIndex],j;switch(w){case"send":j=/sprop-stereo=\d+([\s;]*)/,j.test(H.value)?P=P.replace(j,k?"sprop-stereo=1$1":""):k&&(P+="; sprop-stereo=1");break;case"receive":j=/([^-])stereo=\d+([\s;]*)/,j.test(H.value)?P=P.replace(j,k?"$1stereo=1$2":"$1"):k&&(P+="; stereo=1");break;default:throw new Error(`Invalid type ${w} passed into enableStereo`)}return P=P.replace(/[;\s]*$/,""),M[H.lineIndex]=P,M.join(`\r
`)};C.modifySendStereo=A.bind(null,"send"),C.modifyReceiveStereo=A.bind(null,"receive"),C.setAudioBitrate=(w,V)=>{const k=C.getAudioBitrate(w);if(k!==void 0)return v.debug(`Audio bitrate already set to ${k}, not setting audio bitrate`),w;const M=w.split(`\r
`);if(!C.getMLine(M,"audio"))return v.debug("No audio m-line, not setting audio bitrate"),w;const W=C.getAttributesForMediaType(M,"audio"),Y=W.getRtpNumber("opus");if(!Y)return v.debug("Could not find rtp number for opus, not setting audio bitrate."),w;const H=W.find(j=>j.name===`fmtp:${Y}`);if(!H)return v.debug("Could not find a=fmtp line for opus, not setting audio bitrate."),w;let P=M[H.lineIndex];return P+=`; maxaveragebitrate=${V}`,P=P.replace(/[;\s]*$/,""),M[H.lineIndex]=P,M.join(`\r
`)},C.removeVideoOrientation=w=>{let V=w.split(`\r
`);return V=V.filter(k=>!k.includes("urn:3gpp:video-orientation")),V.join(`\r
`)},C.hasSendStereo=w=>/[\s;]sprop-stereo=1/.test(w),C.hasSendDtx=w=>/[\s;]usedtx=1/.test(w),C.getAudioBitrate=w=>{const V=w.match(/[\s;]maxaveragebitrate=(\d+)/);if(V)return Number(V[1])},C.MAX_SSRCS=10,C.getSSRCGroupType=w=>["SIM","FID"].find(k=>w.filterByName(`ssrc-group:${k}`)[0]),C.getSSRCGroup=w=>{const V=C.getSSRCGroupType(w);return w.filterByName(`ssrc-group:${V}`)[0]},C.getSSRCGroupSSRCs=w=>{const V=C.getSSRCGroup(w);return V?V.value.split(" ").slice(0,C.MAX_SSRCS):[]},C.getAllowedSSRCs=(w,V)=>{const k=V.slice();return w.filterByName("ssrc-group:FID").forEach(M=>{const W=M.value.split(" ");f(k,W).length&&Array.prototype.push.apply(k,W)}),g(k)},C.filterExcessSSRCs=w=>{const V=w.split(`\r
`),k=C.getAttributesForMediaType(V,"video"),M=C.getSSRCGroupType(k),W=k.ssrcStartIndex;if(W===void 0)return w;let Y;const H=j=>{let _=null;return j.match(/^a=ssrc:(\d+)/)&&(_=RegExp.$1),_};if(M){const j=C.getSSRCGroupSSRCs(k),_=[`a=ssrc-group:${M}`,...j].join(" "),z=k.find(ae=>ae.name.startsWith("ssrc-group:")).lineIndex;V[z]=_,Y=C.getAllowedSSRCs(k,j)}else Y=[],k.ssrcStartIndex&&Y.push(H(V[k.ssrcStartIndex]));return V.filter((j,_)=>{if(_<W||_>k.ssrcEndIndex)return!0;if(_===W){if(!M){const ae=H(j);return ae?Y.includes(ae):!/^a=ssrc:(\d+)/.test(j)}return!0}const z=H(j);if(z)return Y.includes(z);if(j.match(/^a=ssrc-group:FID (\d+)/)){const ae=RegExp.$1;return Y.includes(ae)}return!j.match(/^a=ssrc-group:SIM /)}).join(`\r
`)},C.enableSimulcast=function(V,k){let M,W;const Y=V.split(`\r
`);if(!C.getMLine(Y,"video"))return v.debug("No video m-line, not enabling simulcast."),V;const H=C.getAttributesForMediaType(Y,"video");if(H.filterByName("ssrc-group:SIM").length>0)return v.debug("Simulcast is already enabled in this SDP, not attempting to enable again."),C.filterExcessSSRCs(V);if(!H.msid)return v.debug("No local stream attached, not enabling simulcast."),V;const P=H.isUsingRTX(),j=[],_=[];for(W=0;W<k;++W)j.push(b+W),P&&_.push(S+W);if(M=[`a=ssrc-group:SIM ${j.join(" ")}`],P)for(W=0;W<k;++W)M.push(`a=ssrc-group:FID ${j[W]} ${_[W]}`);for(W=0;W<k;++W)M.push(`a=ssrc:${j[W]} cname:localCname`,`a=ssrc:${j[W]} msid:${H.msid}`);if(P)for(W=0;W<k;++W)M.push(`a=ssrc:${_[W]} cname:localCname`,`a=ssrc:${_[W]} msid:${H.msid}`);return M.unshift(H.ssrcStartIndex,H.ssrcEndIndex-H.ssrcStartIndex+1),Y.splice(...M),Y.join(`\r
`)},C.reprioritizeVideoCodec=function(V,k,M){const W=V.split(`\r
`),Y=C.getMLineIndex(W,"video");if(Y===-1)return V;const H=C.getMLinePayloadTypes(W[Y],"video"),P=new RegExp(`^a=rtpmap:(\\d+).* ${k}`,"i"),j=W.map(me=>me.match(P)).filter(me=>me!==null);if(j.length===0)return V;const _=j.map(me=>me[1]);let z=H.filter(me=>_.indexOf(me)===-1);M==="top"?z.unshift(..._):M==="bottom"?z.push(..._):(v.error(`Unexpected location param: ${M}; not changing ${k} priority`),z=H);const ae=W[Y].replace(H.join(" "),z.join(" "));return W[Y]=ae,W.join(`\r
`)},C.getSetupRole=w=>{for(var V=n(w.split(/\r\n|\r|\n/)),k;!(k=V()).done;){const W=k.value.match(/^a=setup:(\w+)/);if(W)return W[1]}return""},C.setSetupRole=(w,V)=>w.split(/\r\n|\r|\n/).map(k=>k.match(/^a=setup:(\w+)/)?`a=setup:${V}`:k).join(`\r
`)},function(t,r){function e(n,o){return n===o||n!==n&&o!==o}t.exports=e},function(t,r,e){var n=e(178),o=e(384),a=e(25);function c(u){return a(u)?n(u,!0):o(u)}t.exports=c},function(t,r){function e(n,o){var a=-1,c=n.length;for(o||(o=Array(c));++a<c;)o[a]=n[a];return o}t.exports=e},function(t,r,e){var n=void 0;t.exports=function(o){return o!==n&&o!==null}},function(t,r,e){var n=e(78),o=1,a=4;function c(u){return n(u,o|a)}t.exports=c},function(t,r,e){var n=e(99);function o(a,c,u){var l=a==null?void 0:n(a,c);return l===void 0?u:l}t.exports=o},function(t,r,e){var n=e(12),o=e(140),a=e(236),c=e(61);function u(l,f){return n(l)?l:o(l,f)?[l]:a(c(l))}t.exports=u},function(t,r,e){var n=e(513);function o(a){return a==null?"":n(a)}t.exports=o},function(t,r,e){var n=e(612),o=e(273),a=n(o);t.exports=a},function(t,r,e){t.exports=function(o){const a=[];return{on(c,u){for(var l=arguments.length,f=new Array(l>2?l-2:0),g=2;g<l;g++)f[g-2]=arguments[g];if(a.push({eventName:c,handler:u,args:f}),o.on)o.on(c,u);else if(o.addEventListener)o.addEventListener(c,u,...f);else throw new Error("Object does not support events",o)},off(c,u){if(o.off)o.off(c,u);else if(o.removeEventListener){for(var l=arguments.length,f=new Array(l>2?l-2:0),g=2;g<l;g++)f[g-2]=arguments[g];o.removeEventListener(c,u,...f)}else throw new Error("Object does not support events",o)},once(c,u){for(var l=arguments.length,f=new Array(l>2?l-2:0),g=2;g<l;g++)f[g-2]=arguments[g];a.push({eventName:c,handler:u,args:f}),o.once(c,u)},removeAll(){a.forEach(c=>{let u=c.eventName,l=c.handler,f=c.args;this.off(u,l,...f)}),a.splice(0,a.length)}}}},function(t,r,e){var n=e(176);function o(a,c,u){c=="__proto__"&&n?n(a,c,{configurable:!0,enumerable:!0,value:u,writable:!0}):a[c]=u}t.exports=o},function(t,r,e){var n=e(379),o=e(19),a=Object.prototype,c=a.hasOwnProperty,u=a.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(f){return o(f)&&c.call(f,"callee")&&!u.call(f,"callee")};t.exports=l},function(t,r,e){(function(n){var o=e(15),a=e(380),c=r&&!r.nodeType&&r,u=c&&typeof n=="object"&&n&&!n.nodeType&&n,l=u&&u.exports===c,f=l?o.Buffer:void 0,g=f?f.isBuffer:void 0,v=g||a;n.exports=v}).call(this,e(85)(t))},function(t,r){var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function o(a,c){var u=typeof a;return c=c??e,!!c&&(u=="number"||u!="symbol"&&n.test(a))&&a>-1&&a%1==0&&a<c}t.exports=o},function(t,r){function e(n){return function(o){return n(o)}}t.exports=e},function(t,r){var e=Object.prototype;function n(o){var a=o&&o.constructor,c=typeof a=="function"&&a.prototype||e;return o===c}t.exports=n},function(t,r,e){t.exports=function(n){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}},function(t,r,e){var n=e(30),o=e(19),a="[object Symbol]";function c(u){return typeof u=="symbol"||o(u)&&n(u)==a}t.exports=c},function(t,r,e){if(e(8).env.name==="Node")t.exports={value:""};else{var o,a;const c=(o=Array.prototype.slice.call(document.getElementsByTagName("script")))==null||(a=o.pop())==null?void 0:a.getAttribute("src"),u=c&&c.match(/[?&]apikey=([^&]+)/i)||[],l=u[1];t.exports={value:l||""}}},function(t,r,e){(function(n){var o=e(0),a=o(e(4)),c=o(e(5));const u=e(155),l=e(50),f=e(9),g=e(58),v=e(131),b=e(272),S=e(17),C=e(6),O=e(250),A=e(156),w=e(53),V=e(74),k=e(615);t.exports=function(W){W===void 0&&(W={});const Y=W.hasValidPeerConnection||e(616),H=W.applySdpTransform||e(157),P=W.createPeerConnection||e(617),j=W.env||e(3),_=W.sdpTransformDefaults||e(619),z=W.getStatsAdapter||e(275),ae=W.getRtcStatsReportAdapter||e(278),me=W.getSynchronizationSources||e(623),ye=W.IceCandidateProcessor||e(624),Pe=W.logging||e(2),Te=W.offerProcessor||e(626),Ue=W.PeerConnectionChannels||e(628),_e=W.subscribeProcessor||e(630),je=e(631),Ke=W.changeMediaDirection||e(633),De=Ke.changeMediaDirectionToInactive,Ze=Ke.changeMediaDirectionToRecvOnly,tt=W.Qos||e(279).default,gt=W.global||(typeof window!==void 0?window:commonjsGlobal),Ee=W.debounce||e(637),Le=W.needsToSwapH264Profiles||e(639).once,We=()=>Y(gt.RTCPeerConnection),ut=W.NativeRTCIceCandidate||gt.RTCIceCandidate,bt=W.NativeRTCSessionDescription||gt.RTCSessionDescription,mt=W.Errors||e(7),It=W.OTErrorClass||e(22),Ge=W.ExceptionCodes||e(10),Qe=W.hasPictureInPictureBug||e(640),Et=1e4,Tt=$t=>{let pt=$t.sendMessage,ft=$t.logging;const et={};return it=>{it.candidate?(et[it.candidate.sdpMid]=it.candidate.sdpMLineIndex,pt("candidate",{candidate:it.candidate.candidate,sdpMid:it.candidate.sdpMid||"",sdpMLineIndex:it.candidate.sdpMLineIndex||0})):ft.debug("IceCandidateForwarder: No more ICE candidates.")}},Zt=()=>{};return function(pt){pt===void 0&&(pt={});let ft=!1;const et=pt,it=et.iceConfig,Pt=it===void 0?{servers:[]}:it,nn=et.sendMessage,Ut=et.isPublisher,xt=et.offerOverrides,Wt=et.answerOverrides,tn=et.p2p,mn=et.codecFlags,Dn=et.sourceStreamId,er=et.keyStore,Zn=et.sFrameClientStore,dr=et.isE2ee;let pr=pt,Bn=pr.logAnalyticsEvent,Jn=Bn===void 0?Zt:Bn,Dt=pr.remoteConnectionId,Ii=!1,ti;const ci=Le();let Rr=0,Vr=!1,ui,Vi,Os;const ii=new je(Jn),xo=A();function Ws(un,yn){ft||["candidate","offer","answer","pranswer"].indexOf(un)>-1&&(ft=(un==="candidate"?yn.candidate:yn.sdp).indexOf("typ relay")!==-1),nn(un,yn)}const ga=l();Jn("createPeerConnection","Attempt");const Kn={};Kn.id=S();const mi=Pe(`PeerConnection:${Kn.id}`);mi.debug("construct",{id:Kn.id,options:pt});const ya=_,ki=un=>Pt.transportPolicy==="relay"&&un!=null&&un.candidate.indexOf("typ relay")===-1,Ao=b(pt,["isPublisher","logAnalyticsEvent","offerOverrides","answerOverrides","sendMessage"]);let Ln,Uo,Xr,bs,Xs,rr=[];const oi=(()=>{let un=Ao.overrideSimulcastEnabled||!1;return{get(){return un},set(yn){const En=Boolean(yn)&&Ao.capableSimulcastStreams>1;En!==un&&Ao.overrideSimulcastEnabled===void 0&&(un=En,Kn.generateOffer())}}})(),Ds=(()=>{let un=!1;return{get(){return un},set(yn){const En=Boolean(yn);En!==un&&(un=En,un&&!Kn.iceConnectionStateIsConnected()?Kn.generateOffer():mi.debug("iceRestart is going to wait until we disconnect and then restart ice"))}}})(),ea={clean(){delete this.promise,delete this.resolve,delete this.reject}};ea.promise=new n((un,yn)=>{ea.resolve=un,ea.reject=yn});let Ji=new ye,mr="new";Object.defineProperty(Kn,"signalingState",{get(){return Ln.signalingState},set(un){return Ln.signalingState=un,un}}),C(Kn),Kn.addOptions=un=>{Dt=un.remoteConnectionId,Jn=un.logAnalyticsEvent},Kn.startEncryption=function(){var un=(0,c.default)(a.default.mark(function yn(En){var Sn;return a.default.wrap(function(li){for(;;)switch(li.prev=li.next){case 0:if(dr){li.next=2;break}return li.abrupt("return");case 2:return Os=k(En),li.next=5,Zn.createSender(Os);case 5:return Vi=li.sent,li.next=8,er.get();case 8:return Sn=li.sent,li.next=11,Vi.setSenderEncryptionKey(Sn);case 11:er.on("keyChanged",At=>{Vi.setSenderEncryptionKey(At)}),Ln.getTransceivers().forEach(At=>Vi.encrypt(At.mid,At.sender));case 13:case"end":return li.stop()}},yn)}));return function(yn){return un.apply(this,arguments)}}(),Kn.once("iceConnected",(0,c.default)(a.default.mark(function un(){var yn,En;return a.default.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:yn="",En={pcc:parseInt(l()-ga,10),hasRelayCandidates:ft,proxyInfo:yn},Ln&&Ln.proxyInfo&&(En.proxyInfo=Ln.proxyInfo),Jn("createPeerConnection","Success",En);case 4:case"end":return xr.stop()}},un)}))),ea.resolve();const Da=function(){var un=(0,c.default)(a.default.mark(function yn(){var En;return a.default.wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return xr.next=2,er.get();case 2:if(En=xr.sent,Os=k(Dt),ui=Zn.getReceiver(Os),ui){xr.next=14;break}return xr.next=8,Zn.createReceiver(Os);case 8:ui=xr.sent,ui.addReceiver(Os),ui.setReceiverEncryptionKey(Os,En),er.on("keyChanged",li=>{ui.setReceiverEncryptionKey(Os,li)}),ui.addEventListener("decryptFailed",()=>{Kn.trigger("decryptFailed")}),ui.addEventListener("decryptionRestored",()=>{Kn.trigger("decryptRestored")});case 14:case"end":return xr.stop()}},yn)}));return function(){return un.apply(this,arguments)}}(),ca=un=>{if(mi.debug("internalCreatePeerConnection: called"),Ln){mi.debug("internalCreatePeerConnection: resolving synchronously"),un.call(null,null,Ln);return}if(rr.push(un),!(rr.length>1)){if(mi.debug(`Creating peer connection config "${JSON.stringify(Ao)}".`),Pt.servers.length===0&&(mi.error("No ice servers present"),Jn("Error","noIceServers")),Pt.transportPolicy==="relay"){const yn=En=>En&&En.indexOf("turn")===0;Pt.servers=Pt.servers.map(En=>{const Sn=g(En);return Array.isArray(Sn.urls)||(Sn.urls=[Sn.urls]),Sn.urls=Sn.urls.filter(yn),Sn.urls.length===0?void 0:Sn}).filter(En=>En!==void 0)}Ao.iceTransportPolicy=Pt.transportPolicy,Ao.iceServers=Pt.servers,dr&&(Ao.forceEncodedVideoInsertableStreams=!0,Ao.forceEncodedAudioInsertableStreams=!0,Ao.encodedInsertableStreams=!0),We().then(yn=>{if(!yn)throw mi.error("createPeerConnection: Invalid RTCPeerConnection object"),new Error("Failed to create valid RTCPeerConnection object");return P({window:gt,config:Ao})}).then(function(){var yn=(0,c.default)(a.default.mark(function En(Sn){return a.default.wrap(function(li){for(;;)switch(li.prev=li.next){case 0:if(!(!Ut&&dr)){li.next=3;break}return li.next=3,Da();case 3:Ss(null,Sn);case 4:case"end":return li.stop()}},En)}));return function(En){return yn.apply(this,arguments)}}(),yn=>Ss(yn))}},Ss=(un,yn)=>{if(un){va({reason:`Failed to create PeerConnection, exception: ${un}`,prefix:"NewPeerConnection"}),rr=[];return}mi.debug("OT attachEventsToPeerConnection"),Ln=yn,Ji&&Ji.setPeerConnection(yn),Uo=new Ue(Ln),Ao.channels&&Uo.addMany(Ao.channels);const En=Tt({sendMessage:Ws,logging:mi}),Sn=Jt=>{if(ea.resolve(),ki(Jt.candidate)){mi.debug("Ignore candidate",Jt.candidate.candidate);return}En(Jt)},xr=function(){var Jt=(0,c.default)(a.default.mark(function Cn(On){return a.default.wrap(function(yr){for(;;)switch(yr.prev=yr.next){case 0:Bs(On),!Ut&&ui&&ui.decrypt(On.transceiver.mid,On.receiver);case 2:case"end":return yr.stop()}},Cn)}));return function(On){return Jt.apply(this,arguments)}}();let li=Ln.iceConnectionState;const At=Jt=>{Ln?(mi.debug("iceconnectionstatechange",Ln.iceConnectionState),Ln.iceConnectionState==="connected"?(li==="disconnected"&&Kn.clearFailedTimeout(),Kn.emit("iceConnected"),Ds.set(!1)):Ln.iceConnectionState==="completed"&&j.isLegacyEdge&&setTimeout(()=>ds.startCollecting(Ln),1e3)):mi.debug("iceconnectionstatechange on peerConnection that no longer exists",Kn);const Cn=Jt.target.iceConnectionState;Kn.trigger("iceConnectionStateChange",Cn),Jn("attachEventsToPeerConnection","iceconnectionstatechange",Cn),Cn==="disconnected"&&(Ds.get()?(mi.debug("Restarting ice!"),Kn.generateOffer()):V()||(Xs=setTimeout(()=>{const On="failed";Jn("attachEventsToPeerConnection","iceconnectionstatechange",On),li=On,Kn.trigger("iceConnectionStateChange",On)},Et))),li!=="disconnected"&&Cn==="failed"&&va({reason:"The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",prefix:"ICEWorkflow"}),li=Cn},en=()=>{Jn("peerConnection:negotiationNeeded","Event"),Ut&&Kn.generateOffer(),Kn.trigger("negotiationNeeded")};Ln.addEventListener("track",xr),Ln.addEventListener("icecandidate",Sn),Ln.addEventListener("signalingstatechange",Vn),Ln.addEventListener("negotiationneeded",en),Ln.addEventListener("iceconnectionstatechange",At),xo.add(()=>{Ln&&(Ln.removeEventListener("track",xr),Ln.removeEventListener("icecandidate",Sn),Ln.removeEventListener("signalingstatechange",Vn),Ln.removeEventListener("negotiationneeded",en),Ln.removeEventListener("iceconnectionstatechange",At))}),kr()},kr=()=>{for(;rr.length;)rr.shift().call(null)},zs=()=>{Ji&&(Ji.destroy(),Ji=null),rr=[],ds.stopCollecting(),xo.releaseAll(),ea.clean(),Ln!==null&&(Ln.destroy&&Ln.destroy(),Ln=null,Kn.trigger("close")),Kn.off()},Vn=un=>{const yn=un.target.signalingState;if(Kn.emit("signalingStateChange",yn),yn==="stable"&&Kn.emit("signalingStateStable"),yn&&yn!==mr)switch(mr=yn,mi.debug(`stateChange: ${mr}`),mr){case"closed":zs();break}},Cs=un=>{un.dataChannels=Uo.sampleQos(),Kn.trigger("qos",{parsedStats:un,simulcastEnabled:oi.get()})},$o=()=>{let un;if(Ln.getRemoteStreams)un=Ln.getRemoteStreams();else if(Ln.remoteStreams)un=Ln.remoteStreams;else throw new Error("Invalid Peer Connection object implements no method for retrieving remote streams");return Array.prototype.slice.call(un)},Bs=un=>{var yn;const En=un.track,Sn=un.transceiver,xr=un.stream||((yn=un.streams)==null?void 0:yn[0]);Jn("createPeerConnection","TrackAdded"),Kn.trigger("trackAdded",{stream:xr,track:En,transceiver:Sn})},Zr=(un,yn,En)=>{Ii=!1,va({reason:`PeerConnection.offerProcessor ${un}: ${yn}`,prefix:En})},Ba=un=>{if(Ii){ti=un;return}Ii=!0,Jn("peerConnection:processOffer","Event");const yn=new bt({type:"offer",sdp:un.content.sdp}),En=xr=>{Ii=!1,Ji&&Ji.process(),Ws("answer",xr),j.isLegacyEdge||ds.startCollecting(Ln,Ut),ti&&(Ba(ti),ti=null)},Sn=xr=>Kn.trigger("remoteVideoSupported",xr);ca(()=>{Te(Ln,gt.RTCPeerConnection,gt.RTCSessionDescription,bt,ya,yn,mn,tn,En,Zr,Sn,ci,Dn)})},rc=un=>{Jn("peerConnection:processAnswer","Event");const yn="Failed to parse SessionDescription. a=extmap-allow-mixed Expects at least 2 fields.",En=Sn=>{Sn.includes(yn)&&(Sn="SessionDescription issue has been fixed in Chrome 71 and above. Please update your browser."),va({reason:`Error while setting RemoteDescription ${Sn}`,prefix:"SetRemoteDescription"})};if(!un.content.sdp){En("Weird answer message, no SDP.");return}bs=new bt({type:"answer",sdp:H(ya,"remote","answer",f({replaceBaselineProfile:ci},Wt),un.content.sdp).local}),(()=>{const Sn=()=>{mi.debug("processAnswer: setRemoteDescription Success"),Ji&&Ji.process()};Ln.setRemoteDescription(bs).then(Sn).catch(En),ii.setResolved()})(),j.isLegacyEdge||ds.startCollecting(Ln,Ut)},Js=()=>{var un,yn;if(((un=Ln)==null||(yn=un.signalingState)==null?void 0:yn.toLowerCase())==="closed")return;Jn("peerConnection:processSubscribe","Event"),mi.debug("processSubscribe: Sending offer to subscriber.");let En=oi.get()?Ao.capableSimulcastStreams:1;Dn==="P2P"&&!tn&&(En=1),ca(()=>{_e({peerConnection:Ln,NativeRTCSessionDescription:bt,sdpTransforms:ya,numSimulcastStreams:En,removeVideoOrientation:Qe(),offerOverrides:xt,offerConstraints:{iceRestart:Ds.get()},replaceBaselineProfile:ci}).then(xr=>{mi.debug("processSubscribe: got offer, waiting for _readyToSendOffer"),Xr=xr,ea.promise.then(()=>{mi.debug("processSubscribe: sending offer"),Ws("offer",Xr)})},xr=>{va({reason:`subscribeProcessor ${xr.message}: ${xr.reason}`,prefix:xr.prefix})}),Ds.set(!1)})},Ra=()=>{Vi=null,Os=null};Kn.generateOffer=Ee(()=>{ii.enqueueOfferAnswer(()=>Js())},100);const va=un=>{let yn=un.reason,En=un.prefix;mi.error(yn,"in state",Ln?{connectionState:Ln.connectionState,iceConnectionState:Ln.iceConnectionState,iceGatheringState:Ln.iceGatheringState,signalingState:Ln.signalingState}:"(none)"),Kn.trigger("error",{reason:yn,prefix:En})};Kn.addTrack=(un,yn)=>{const En=new n((Sn,xr)=>{ca(li=>{if(li)return xr(li);Sn()})}).then(()=>{if(Ln.addTrack)return Ln.addTrack(un,yn);const Sn=Ln.getLocalStreams()[0];if(Sn===void 0)throw new Error("PeerConnection has no existing streams, cannot addTrack");Sn.addTrack(un),Kn.generateOffer()}).then(()=>new n(Sn=>{Kn.once("signalingStateStable",()=>{Sn()})}));return u(En,15e3,"Renegotiation timed out")};function za(un){this.track=un}Kn.setIceConfig=un=>{try{j.isFirefox&&(un.certificates=Ln.getConfiguration().certificates),Ln.setConfiguration(un)}catch(yn){throw new O(`A peer connection failed to set configuration with ${yn.message}`,mt.FAILED_SET_CONFIGURATION)}return Ds.set(!0),Ln},Kn.removeTrack=un=>{const yn=n.resolve().then(()=>{if(un instanceof za){Ln.getLocalStreams()[0].removeTrack(un.track),Kn.generateOffer();return}return Ln.removeTrack(un)}).then(()=>new n(En=>{Kn.once("signalingStateStable",()=>{En()})}));return u(yn,15e3,"Renegotiation timed out")},Kn.addLocalStream=un=>new n((yn,En)=>{ca(Sn=>{if(Sn){En(Sn);return}try{un.getTracks&&un.getTracks().forEach(xr=>Ln.addTrack(xr,un))}catch(xr){En(xr);return}yn()})}),Kn.getLocalStreams=()=>Ln.getLocalStreams(),Kn.getSenders=()=>Ln.getSenders?Ln.getSenders():Ln.getLocalStreams()[0].getTracks().map(un=>new za(un)),Kn.disconnect=()=>{var un;Ji&&(Ji.destroy(),Ji=null),(un=Ln)!=null&&un.signalingState&&Ln.signalingState.toLowerCase()!=="closed"&&(Ln.close(),Ra(),setTimeout(zs))},Kn.iceRestart=()=>Ds.set(!0),Kn.clearFailedTimeout=()=>clearTimeout(Xs);const xa=un=>{const yn=un?De:Ze;return new n(Sn=>{ii.enqueueOfferAnswer((0,c.default)(a.default.mark(function xr(){return a.default.wrap(function(At){for(;;)switch(At.prev=At.next){case 0:return At.next=2,yn(Ln);case 2:ii.setResolved(),Sn();case 4:case"end":return At.stop()}},xr)})))})};Kn.changeMediaDirectionToRecvOnly=()=>xa(!1),Kn.changeMediaDirectionToInactive=()=>xa(!0),Kn.processMessage=(un,yn)=>{switch(mi.debug(`processMessage: Received ${un} from ${yn.fromAddress}`,yn),mi.debug(yn),un){case"generateoffer":yn.content&&yn.content.simulcastEnabled!==void 0&&oi.set(yn.content.simulcastEnabled),Kn.generateOffer(),Sn();break;case"offer":Ba(yn),Sn();break;case"answer":case"pranswer":rc(yn);break;case"candidate":var En=new ut(yn.content);if(ki(En))return mi.debug("Ignore candidate",En.candidate),Kn;Ji&&Ji.addIceCandidate(En).catch(xr=>{mi.warn(`Error while adding ICE candidate: ${JSON.stringify(En)}: ${xr.toString()}`)});break;default:mi.debug(`processMessage: Received an unexpected message of type ${un} from ${yn.fromAddress}: ${JSON.stringify(yn)}`)}function Sn(){Rr+=1,ds.handleOfferMessageReceived(),Rr>1&&(Jn("Renegotiation","Attempt"),Vr=!0)}return Kn},Kn.stopTransceivers=un=>{Ln.getTransceivers().forEach(yn=>{un.includes(yn.mid)&&yn.stop()})},Kn.remoteStreams=()=>Ln?$o():[],Kn.remoteTracks=()=>Ln?Ln.getReceivers?Array.prototype.slice.apply(Ln.getReceivers()).map(un=>un.track):Array.prototype.concat.apply([],$o().map(un=>un.getTracks())):[],Kn.remoteDescription=()=>Ln.remoteDescription,Kn.getStats=un=>{if(!Ln){const yn=Ge.PEER_CONNECTION_NOT_CONNECTED;un(new O(It.getTitleByCode(yn),mt.PEER_CONNECTION_NOT_CONNECTED,{code:yn}));return}z(Ln,un)},Kn.getRtcStatsReport=un=>{if(!Ln){const yn=Ge.PEER_CONNECTION_NOT_CONNECTED;un(new O(It.getTitleByCode(yn),mt.PEER_CONNECTION_NOT_CONNECTED,{code:yn}));return}ae(Ln,un)},Kn.getSynchronizationSources=un=>{if(!Ut){if(!Ln){const yn=Ge.PEER_CONNECTION_NOT_CONNECTED;un(new O(It.getTitleByCode(yn),mt.PEER_CONNECTION_NOT_CONNECTED,{code:yn}));return}me(Ln,un)}};const Ua=function un(yn,En,Sn,xr){let li;const At=Uo.get(En,Sn);if(!At){if(yn>0){setTimeout(un.bind(null,yn-1,En,Sn,xr),200);return}li=new O(`A channel with that label and options could not be found. Label:${En}. Options: ${JSON.stringify(Sn)}`)}xr(li,At)};Kn.getDataChannel=(un,yn,En)=>{if(!Ln){En(new O("Cannot create a DataChannel before there is a connection."));return}Ua(100,un,yn,En)},Kn.getSourceStreamId=()=>Dn,Kn.iceConnectionStateIsConnected=()=>Ln&&["connected","completed"].indexOf(Ln.iceConnectionState)>-1,Kn.findAndReplaceTrack=(un,yn)=>n.resolve().then(()=>{const En=Ln.getSenders().filter(Sn=>Sn.track===un)[0];if(!En)return n.resolve();if(typeof En.replaceTrack!="function")throw new Error("Sender does not support replaceTrack");return En.replaceTrack(yn)}),Kn.hasRelayCandidates=()=>ft,Kn.getNegotiatedCodecs=()=>{if(!Ln.localDescription||!Ln.remoteDescription)return null;const un=yn=>v(w.getCodecs(Ln.localDescription.sdp,yn),w.getCodecs(Ln.remoteDescription.sdp,yn));return{audio:un("audio"),video:un("video")}},Kn.on("signalingStateStable",()=>{Vr&&(Vr=!1,Jn("Renegotiation","Success",Kn.getNegotiatedCodecs()))}),Kn.on("error",un=>{let yn=un.prefix;Vr&&["CreateOffer","SetRemoteDescription"].indexOf(yn)!==-1&&(Vr=!1,Jn("Renegotiation","Failure"))}),Kn.on("close",()=>{Vr&&(Vr=!1,Jn("Renegotiation","Cancel"))});const ds=new tt;return ds.on("stats",Cs),Kn}}}).call(this,e(1))},function(t,r,e){const n=e(3),o=()=>(n.isChrome||n.isElectron)&&n.version>=90||n.isOpera&&n.version>=76;t.exports=()=>!o()&&(n.isChrome&&n.version>71||n.isChromiumEdge&&n.version<90||n.isOpera&&n.version>58)},function(t,r,e){function n(o,a,c){c===void 0&&(c=1/0);let u=null,l=!1,f=1;const g=1e3/a,v=()=>{!l||f>c||(f+=1,o(),u=setTimeout(v,g))};this.start=()=>{l||(l=!0,setTimeout(v,g))},this.stop=()=>{(typeof window!==void 0?window:commonjsGlobal).clearTimeout(u),l=!1}}t.exports=n},function(t,r,e){const n=e(49),o=e(659),a=e(11),c=e(158),u={};function l(C){return Number(C.framerateMean||C.googFrameRateSent||C.googFrameRateReceived||C.googFrameRateInput||C.googFrameRateOutput||0)}function f(C){return Number(C.framesEncoded||C.framesDecoded)}function g(C,O){if(l(C))return l(C);if(!f(C))return;let A=0;const w=u[C.id]?u[C.id].frames:0,V=u[C.id]?u[C.id].timestamp:O;return A=c({currentStatFrames:f(C),currentTimestamp:C.timestamp,prevStatFrames:w,prevTimestamp:V}),u[C.id]={frames:f(C),timestamp:C.timestamp},A}function v(C,O){if(!O)return{};const A=O.filter(w=>w.id===C.mediaTrackId);return A.length?A[0]:{}}function b(C,O){return"packetsLost"in O?C+O.packetsLost:C}const S={isVideoStat(C,O){const A=v(C,O);return C.kind==="video"&&["outbound-rtp","inbound-rtp"].includes(C.type)||C.mediaType==="video"||"googFrameWidthReceived"in C||"googFrameWidthInput"in C||C.type==="inbound-rtp"&&C.id.indexOf("Video")!==-1||C.type==="inboundrtp"&&A.frameWidth!==0},isAudioStat(C,O){const A=v(C,O);return C.kind==="audio"&&["outbound-rtp","inbound-rtp"].includes(C.type)||C.mediaType==="audio"||"audioInputLevel"in C||"audioOutputLevel"in C||C.type==="inbound-rtp"&&C.id.indexOf("Audio")!==-1||C.type==="inboundrtp"&&A.frameWidth===0},isInboundStat(C){return"bytesReceived"in C||"packetsReceived"in C},isOutboundStat(C){return"bytesSent"in C||"packetsSent"in C},isVideoTrackStat(C){return C.type==="track"&&(C.frameHeight>0||C.frameWidth>0||C.framesCorrupted>0||C.framesDecoded>0||C.framesPerSecond>0||C.framesSent>0||C.framesReceived>0)},isVideoRemoteInboundRtpStat(C){return C.type==="remote-inbound-rtp"&&C.kind==="video"},isAudioRemoteInboundRtpStat(C){return C.type==="remote-inbound-rtp"&&C.kind==="audio"},isVideoInboundRtpStat(C){return C.type==="inbound-rtp"&&C.kind==="video"},parseStatCategory(C){const O={packetsLost:0,packetsReceived:0,bytesReceived:0};return"packetsReceived"in C&&(O.packetsReceived=parseInt(C.packetsReceived,10)),"packetsLost"in C&&(O.packetsLost=parseInt(C.packetsLost,10)),"bytesReceived"in C&&(O.bytesReceived=parseInt(C.bytesReceived,10)),this.isVideoStat(C)&&("framerateMean"in C?O.frameRate=Number(C.framerateMean):"googFrameRateOutput"in C?O.frameRate=Number(C.googFrameRateOutput):"googFrameRateInput"in C&&(O.frameRate=Number(C.googFrameRateInput))),O},getVideoPacketsLost(C){return C.filter(O=>this.isVideoRemoteInboundRtpStat(O,C)).reduce(b,0)},getAudioPacketsLost(C){return C.filter(O=>this.isAudioRemoteInboundRtpStat(O,C)).reduce(b,0)},normalizeTimestamp(C,O){return O===void 0&&(O=Date.now()),a(C)&&"getTime"in C?C.getTime():Math.abs(C/(1e3*O)-1)<.05?C/1e3:C},normalizeStats(C,O,A){O===void 0&&(O=!0);const w=C.filter(z=>S.isVideoStat(z,C)).filter(z=>S.isInboundStat(z)===O),V=C.filter(z=>this.isAudioStat(z,C)).filter(z=>this.isInboundStat(z)===O)[0],k=w[0];if(!V&&!k)throw new Error("could not find stats for either audio or video");const M=S.normalizeTimestamp(k?k.timestamp:V.timestamp),W={timestamp:M};k&&!O&&k.packetsLost===void 0&&(k.packetsLost=this.getVideoPacketsLost(C)),V&&!O&&V.packetsLost===void 0&&(V.packetsLost=this.getAudioPacketsLost(C));const Y=["packetsSent","packetsLost","bytesSent"],j=O?z=>n(z,["packetsReceived","packetsLost","bytesReceived"]):z=>n(z,Y),_=z=>{const ae=["framerateMean","googFrameRateSent","googFrameRateReceived","googFrameRateInput","googFrameRateOutput","framesEncoded","framesDecoded"],me=Y.concat(ae),ye={timestamp:M,id:k.id};return me.forEach(Pe=>{ye[Pe]=z.map(Te=>Number(Te[Pe]||0)).reduce((Te,Ue)=>Te+Ue,0)}),ye};if(w&&w.length>0){const z=_(w);W.video=Object.assign({frameRate:g(z,A)},o(j(z),Number))}return V&&(W.audio=o(j(V),Number)),W}};t.exports=S},function(t,r,e){r.__esModule=!0,r.codes=r.messages=void 0;const n={1001:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",1002:"The endpoint is terminating the connection due to a protocol error. (CLOSE_PROTOCOL_ERROR)",1003:"The connection is being terminated because the endpoint has indicated that reconnections are not available. (CLOSE_UNSUPPORTED)",1005:"Indicates that no status code was provided even though one was expected. (CLOSE_NO_STATUS)",1006:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected. (CLOSE_ABNORMAL)",1007:"Indicates that an endpoint is terminating the connection because it has received data within a message that was not consistent with the type of the message (e.g., non-UTF-8 [RFC3629] data within a text message)",1008:"Indicates that an endpoint is terminating the connection because it has received a message that violates its policy.  This is a generic status code that can be returned when there is no other more suitable status code (e.g., 1003 or 1009) or if there is a need to hide specific details about the policy",1009:"Indicates that an endpoint is terminating the connection because it has received a message that is too big for it to process (CLOSE_TOO_LARGE)",1011:"Indicates that a server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request",4001:"Connectivity loss was detected as it was too long since the socket received the last PONG message",4010:"Timed out while waiting for the Rumor socket to connect.",4020:"Error code unavailable.",4030:"Exception was thrown during Rumor connection, possibly because of a blocked port."};r.messages=n;const o={CLOSE_NORMAL:1e3,CLOSE_GOING_AWAY:1001,CLOSE_PROTOCOL_ERROR:1002,CLOSE_UNSUPPORTED:1003,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006,CLOSE_INCONSISTENT_DATA:1007,CLOSE_POLICY_VIOLATION:1008,CLOSE_TOO_LARGE:1009,CLOSE_UNEXPECTED_CONDITION:1011,CLOSE_CONNECTIVITY_LOSS:4001,CLOSE_TIMEOUT:4010,CLOSE_FALLBACK_CODE:4020,CLOSE_CONNECT_EXCEPTION:4030,ALREADY_CONNECTED_CONNECTING:null};r.codes=o},function(t,r,e){var n=e(79),o=e(115),a=e(84),c=e(177),u=e(383),l=e(180),f=e(56),g=e(386),v=e(388),b=e(183),S=e(185),C=e(43),O=e(391),A=e(392),w=e(190),V=e(12),k=e(66),M=e(396),W=e(11),Y=e(398),H=e(31),P=e(55),j=1,_=2,z=4,ae="[object Arguments]",me="[object Array]",ye="[object Boolean]",Pe="[object Date]",Te="[object Error]",Ue="[object Function]",_e="[object GeneratorFunction]",je="[object Map]",Ke="[object Number]",De="[object Object]",Ze="[object RegExp]",tt="[object Set]",gt="[object String]",Ee="[object Symbol]",Le="[object WeakMap]",We="[object ArrayBuffer]",ut="[object DataView]",bt="[object Float32Array]",mt="[object Float64Array]",It="[object Int8Array]",Ge="[object Int16Array]",Qe="[object Int32Array]",Et="[object Uint8Array]",Tt="[object Uint8ClampedArray]",Zt="[object Uint16Array]",$t="[object Uint32Array]",pt={};pt[ae]=pt[me]=pt[We]=pt[ut]=pt[ye]=pt[Pe]=pt[bt]=pt[mt]=pt[It]=pt[Ge]=pt[Qe]=pt[je]=pt[Ke]=pt[De]=pt[Ze]=pt[tt]=pt[gt]=pt[Ee]=pt[Et]=pt[Tt]=pt[Zt]=pt[$t]=!0,pt[Te]=pt[Ue]=pt[Le]=!1;function ft(et,it,Pt,nn,Ut,xt){var Wt,tn=it&j,mn=it&_,Dn=it&z;if(Pt&&(Wt=Ut?Pt(et,nn,Ut,xt):Pt(et)),Wt!==void 0)return Wt;if(!W(et))return et;var er=V(et);if(er){if(Wt=O(et),!tn)return f(et,Wt)}else{var Zn=C(et),dr=Zn==Ue||Zn==_e;if(k(et))return l(et,tn);if(Zn==De||Zn==ae||dr&&!Ut){if(Wt=mn||dr?{}:w(et),!tn)return mn?v(et,u(Wt,et)):g(et,c(Wt,et))}else{if(!pt[Zn])return Ut?et:{};Wt=A(et,Zn,tn)}}xt||(xt=new n);var pr=xt.get(et);if(pr)return pr;xt.set(et,Wt),Y(et)?et.forEach(function(Dt){Wt.add(ft(Dt,it,Pt,Dt,et,xt))}):M(et)&&et.forEach(function(Dt,Ii){Wt.set(Ii,ft(Dt,it,Pt,Ii,et,xt))});var Bn=Dn?mn?S:b:mn?P:H,Jn=er?void 0:Bn(et);return o(Jn||et,function(Dt,Ii){Jn&&(Ii=Dt,Dt=et[Ii]),a(Wt,Ii,ft(Dt,it,Pt,Ii,et,xt))}),Wt}t.exports=ft},function(t,r,e){var n=e(80),o=e(355),a=e(356),c=e(357),u=e(358),l=e(359);function f(g){var v=this.__data__=new n(g);this.size=v.size}f.prototype.clear=o,f.prototype.delete=a,f.prototype.get=c,f.prototype.has=u,f.prototype.set=l,t.exports=f},function(t,r,e){var n=e(350),o=e(351),a=e(352),c=e(353),u=e(354);function l(f){var g=-1,v=f==null?0:f.length;for(this.clear();++g<v;){var b=f[g];this.set(b[0],b[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=c,l.prototype.set=u,t.exports=l},function(t,r,e){var n=e(54);function o(a,c){for(var u=a.length;u--;)if(n(a[u][0],c))return u;return-1}t.exports=o},function(t,r,e){var n=e(40),o=n(Object,"create");t.exports=o},function(t,r,e){var n=e(374);function o(a,c){var u=a.__data__;return n(c)?u[typeof c=="string"?"string":"hash"]:u.map}t.exports=o},function(t,r,e){var n=e(64),o=e(54),a=Object.prototype,c=a.hasOwnProperty;function u(l,f,g){var v=l[f];(!(c.call(l,f)&&o(v,g))||g===void 0&&!(f in l))&&n(l,f,g)}t.exports=u},function(t,r){t.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(t,r,e){var n=e(381),o=e(68),a=e(117),c=a&&a.isTypedArray,u=c?o(c):n;t.exports=u},function(t,r,e){var n=e(11),o=Object.create,a=function(){function c(){}return function(u){if(!n(u))return{};if(o)return o(u);c.prototype=u;var l=new c;return c.prototype=void 0,l}}();t.exports=a},function(t,r,e){var n=e(89),o=e(193),a=e(125);function c(u,l){return a(o(u,l,n),u+"")}t.exports=c},function(t,r){function e(n){return n}t.exports=e},function(t,r,e){var n=Object.prototype.toString,o=n.call(function(){return arguments}());t.exports=function(a){return n.call(a)===o}},function(t,r,e){var n=Object.prototype.toString,o=n.call("");t.exports=function(a){return typeof a=="string"||a&&typeof a=="object"&&(a instanceof String||n.call(a)===o)||!1}},function(t,r,e){t.exports=e(423)()?globalThis:e(424)},function(t,r,e){var n=e(114),o=e(456),a=e(457);function c(u){var l=-1,f=u==null?0:u.length;for(this.__data__=new n;++l<f;)this.add(u[l])}c.prototype.add=c.prototype.push=o,c.prototype.has=a,t.exports=c},function(t,r,e){var n=e(458);function o(a,c){var u=a==null?0:a.length;return!!u&&n(a,c,0)>-1}t.exports=o},function(t,r){function e(n,o){return n.has(o)}t.exports=e},function(t,r,e){var n=e(87),o=e(11);function a(c){return function(){var u=arguments;switch(u.length){case 0:return new c;case 1:return new c(u[0]);case 2:return new c(u[0],u[1]);case 3:return new c(u[0],u[1],u[2]);case 4:return new c(u[0],u[1],u[2],u[3]);case 5:return new c(u[0],u[1],u[2],u[3],u[4]);case 6:return new c(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new c(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var l=n(c.prototype),f=c.apply(l,u);return o(f)?f:l}}t.exports=a},function(t,r,e){var n=e(498);function o(a){var c=n(a),u=c%1;return c===c?u?c-u:c:0}t.exports=o},function(t,r){function e(n){var o=-1,a=Array(n.size);return n.forEach(function(c){a[++o]=c}),a}t.exports=e},function(t,r,e){var n=e(60),o=e(48);function a(c,u){u=n(u,c);for(var l=0,f=u.length;c!=null&&l<f;)c=c[o(u[l++])];return l&&l==f?c:void 0}t.exports=a},function(t,r,e){var n=e(239),o=e(31);function a(c,u){return c&&n(c,u,o)}t.exports=a},function(t,r,e){const n=e(240),o=c=>c.replace(/\/$/,""),a=(c,u)=>{if(!u)return c;const l=n.parse(u),f=n.parse(c);if(!l.protocol||!f.protocol)return c;const g=l.protocol.match(/^https/),b=(f.protocol.match(/^ws/i)?"ws":"http")+(g?"s":""),S=o(`${b}://${l.host}${l.pathname}`),C=o(`${f.host}${f.pathname}${f.search||""}`);return`${S}/${C}`};t.exports={prependProxyToUrlIfNeeded:a}},function(t,r,e){const n=e(21),o=e(13),a=e(7),c=e(10),u=e(22);let l;const f={SET_PROXY_URL_TIMING_ERROR:"The proxyUrl was set after a session or publisher was created.",PROXY_URL_ALREADY_SET_ERROR:"The proxyUrl has already been set. Setting it again will not have any effect."};t.exports={errorMessages:f,setProxyUrl:g=>{const v=e(26),b=e(72),S=new v,C=n.sessions.length()>0,O=n.publishers.length()>0;let A;if(C){const V=n.sessions.find(k=>k.currentState==="connected");A=V?V.sessionId:n.sessions.find().sessionId}else A="";const w={sessionId:A,apiKey:b.value};if(O||C){const V=o()(a.SET_PROXY_URL_TIMING_ERROR,new Error(f.SET_PROXY_URL_TIMING_ERROR),c.SET_PROXY_URL_TIMING_ERROR);u.handleJsException({error:V,target:w,analytics:S})}else if(l){const V=o()(a.PROXY_URL_ALREADY_SET_ERROR,new Error(f.PROXY_URL_ALREADY_SET_ERROR),c.PROXY_URL_ALREADY_SET_ERROR);u.handleJsException({error:V,target:w,analytics:S})}else l=g},getProxyUrl:()=>l,clearProxyUrl:()=>{l=null}}},function(t,r,e){r.adaptIceServers=function(o){return o.map(a=>({url:a.url,urls:a.urls||[a.url],username:a.username,credential:a.credential}))},r.parseIceServers=function(o){let a;try{a=JSON.parse(o.data).content.iceServers}catch{return[]}return r.adaptIceServers(a)}},function(t,r,e){const n=e(3);t.exports=()=>n.name==="Chrome"&&n.version>=58||["Firefox","Edge","Safari","Opera"].indexOf(n.name)!==-1},function(t,r){function e(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}t.exports=e},function(t,r,e){t.exports=function(o){let a=null,c=!1;const u=()=>{c&&(o(),a=window.requestAnimationFrame(u))};this.start=()=>{c||(c=!0,window.requestAnimationFrame(u))},this.stop=()=>{window.cancelAnimationFrame(a),c=!1}}},function(t,r,e){const n=e(9),o=(a,c,u)=>c&&!u?()=>c.call(a):c&&u?l=>(l!==void 0&&u.call(a,l),c.call(a)):l=>{l!==void 0&&u.call(a,l)};t.exports=(a,c)=>{const u={};Object.keys(c).forEach(l=>{u[l]=o(a,c[l].get,c[l].set)}),n(a,u)}},function(t,r,e){let n="";const o=c=>{n=c},a=()=>n;t.exports={getCurrentAudioOutputDeviceId:a,setCurrentAudioOutputDeviceId:o}},function(t,r,e){(function(n){t.exports=function(a){return new n(c=>setTimeout(c,a))}}).call(this,e(1))},function(t,r,e){const n=e(295);function o(a){let c=a===void 0?{}:a,u=c.NativeVideoElementWrapper;const f=u===void 0?n():u,g=50;function v(b){let S=b===void 0?{}:b,C=S.fallbackText,O=C===void 0?"Sorry, Web RTC is not available in your browser":C,A=S.fitMode,w=S.muted,V=S._inject,k=S.widgetType;return new f({fallbackText:O,fitMode:A,muted:w,defaultAudioVolume:g,_inject:V,widgetType:k})}return v}t.exports=o},function(t,r,e){const n=!!window.crypto,o=!!RTCRtpSender.prototype.createEncodedStreams||!!RTCRtpSender.prototype.createdEncodedVideoStreams,a=!!window.Worker,c=()=>n&&o&&a;t.exports=function(u){u===void 0&&(u={});const l=u.hasOpenTokSupport||e(52).once,f=u.isE2eeSupported||c;return l()&&f()}},function(t,r){function e(n){if(n&&n.__esModule)return n;var o={};if(n!=null){for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)){var c=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(n,a):{};c.get||c.set?Object.defineProperty(o,a,c):o[a]=n[a]}}return o.default=n,o}t.exports=e},function(t,r,e){var n=e(40),o=e(15),a=n(o,"Map");t.exports=a},function(t,r,e){var n=e(366),o=e(373),a=e(375),c=e(376),u=e(377);function l(f){var g=-1,v=f==null?0:f.length;for(this.clear();++g<v;){var b=f[g];this.set(b[0],b[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=c,l.prototype.set=u,t.exports=l},function(t,r){function e(n,o){for(var a=-1,c=n==null?0:n.length;++a<c&&o(n[a],a,n)!==!1;);return n}t.exports=e},function(t,r){var e=9007199254740991;function n(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=e}t.exports=n},function(t,r,e){(function(n){var o=e(174),a=r&&!r.nodeType&&r,c=a&&typeof n=="object"&&n&&!n.nodeType&&n,u=c&&c.exports===a,l=u&&o.process,f=function(){try{var g=c&&c.require&&c.require("util").types;return g||l&&l.binding&&l.binding("util")}catch{}}();n.exports=f}).call(this,e(85)(t))},function(t,r,e){var n=e(69),o=e(382),a=Object.prototype,c=a.hasOwnProperty;function u(l){if(!n(l))return o(l);var f=[];for(var g in Object(l))c.call(l,g)&&g!="constructor"&&f.push(g);return f}t.exports=u},function(t,r,e){var n=e(387),o=e(181),a=Object.prototype,c=a.propertyIsEnumerable,u=Object.getOwnPropertySymbols,l=u?function(f){return f==null?[]:(f=Object(f),n(u(f),function(g){return c.call(f,g)}))}:o;t.exports=l},function(t,r){function e(n,o){for(var a=-1,c=o.length,u=n.length;++a<c;)n[u+a]=o[a];return n}t.exports=e},function(t,r,e){var n=e(179),o=n(Object.getPrototypeOf,Object);t.exports=o},function(t,r,e){var n=e(188);function o(a){var c=new a.constructor(a.byteLength);return new n(c).set(new n(a)),c}t.exports=o},function(t,r,e){t.exports={error:{priority:1,method:"error"},warn:{priority:2,method:"warn"},info:{priority:3,method:"info"},log:{priority:4,method:"log"},debug:{priority:5,method:"debug"},spam:{priority:6,method:"log"}}},function(t,r){function e(n,o,a){switch(a.length){case 0:return n.call(o);case 1:return n.call(o,a[0]);case 2:return n.call(o,a[0],a[1]);case 3:return n.call(o,a[0],a[1],a[2])}return n.apply(o,a)}t.exports=e},function(t,r,e){var n=e(403),o=e(194),a=o(n);t.exports=a},function(t,r,e){var n=e(54),o=e(25),a=e(67),c=e(11);function u(l,f,g){if(!c(g))return!1;var v=typeof f;return(v=="number"?o(g)&&a(f,g.length):v=="string"&&f in g)?n(g[f],l):!1}t.exports=u},function(t,r,e){t.exports=e(196)()?Object.setPrototypeOf:e(197)},function(t,r,e){var n=e(57),o={object:!0,function:!0,undefined:!0};t.exports=function(a){return n(a)?hasOwnProperty.call(o,typeof a):!1}},function(t,r,e){t.exports=e(414)()?Object.assign:e(415)},function(t,r,e){const n=e(2)("Event"),o=e(9),a=e(131);t.exports=function(){function c(l,f,g){f===void 0&&(f=!0),g===void 0&&(g={}),this.type=l,this.cancelable=f,this._defaultPrevented=!1;const v=a(Object.keys(this),Object.keys(g));if(v.length>0)throw new Error(`Cannot used reserved property names: ${v.join(",")}`);o(this,g)}var u=c.prototype;return u.preventDefault=function(){this.cancelable?this._defaultPrevented=!0:n.warn("Event.preventDefault :: Trying to preventDefault on an event that isn't cancelable")},u.isDefaultPrevented=function(){return this._defaultPrevented},c}()},function(t,r,e){var n=e(34),o=e(455),a=e(88),c=e(461),u=a(function(l){var f=n(l,c);return f.length&&f[0]===l[0]?o(f):[]});t.exports=u},function(t,r){function e(n,o,a){for(var c=-1,u=n==null?0:n.length;++c<u;)if(a(o,n[c]))return!0;return!1}t.exports=e},function(t,r,e){var n=e(25),o=e(19);function a(c){return o(c)&&n(c)}t.exports=a},function(t,r){t.exports={}},function(t,r,e){var n=e(217),o=e(484),a=e(485),c=e(219),u=e(496),l=e(223),f=e(497),g=e(226),v=e(227),b=e(97),S="Expected a function",C=1,O=2,A=8,w=16,V=32,k=64,M=Math.max;function W(Y,H,P,j,_,z,ae,me){var ye=H&O;if(!ye&&typeof Y!="function")throw new TypeError(S);var Pe=j?j.length:0;if(Pe||(H&=~(V|k),j=_=void 0),ae=ae===void 0?ae:M(b(ae),0),me=me===void 0?me:b(me),Pe-=_?_.length:0,H&k){var Te=j,Ue=_;j=_=void 0}var _e=ye?void 0:l(Y),je=[Y,H,P,j,_,Te,Ue,z,ae,me];if(_e&&f(je,_e),Y=je[0],H=je[1],P=je[2],j=je[3],_=je[4],me=je[9]=je[9]===void 0?ye?0:Y.length:M(je[9]-Pe,0),!me&&H&(A|w)&&(H&=~(A|w)),!H||H==C)var Ke=o(Y,H,P);else H==A||H==w?Ke=a(Y,H,me):(H==V||H==(C|V))&&!_.length?Ke=u(Y,H,P,j):Ke=c.apply(void 0,je);var De=_e?n:g;return v(De(Ke,je),Y,H)}t.exports=W},function(t,r,e){var n=e(87),o=e(137),a=4294967295;function c(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=a,this.__views__=[]}c.prototype=n(o.prototype),c.prototype.constructor=c,t.exports=c},function(t,r){function e(){}t.exports=e},function(t,r){var e="__lodash_placeholder__";function n(o,a){for(var c=-1,u=o.length,l=0,f=[];++c<u;){var g=o[c];(g===a||g===e)&&(o[c]=e,f[l++]=c)}return f}t.exports=n},function(t,r,e){var n=e(30),o=e(121),a=e(19),c="[object Object]",u=Function.prototype,l=Object.prototype,f=u.toString,g=l.hasOwnProperty,v=f.call(Object);function b(S){if(!a(S)||n(S)!=c)return!1;var C=o(S);if(C===null)return!0;var O=g.call(C,"constructor")&&C.constructor;return typeof O=="function"&&O instanceof O&&f.call(O)==v}t.exports=b},function(t,r,e){var n=e(12),o=e(71),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/;function u(l,f){if(n(l))return!1;var g=typeof l;return g=="number"||g=="symbol"||g=="boolean"||l==null||o(l)?!0:c.test(l)||!a.test(l)||f!=null&&l in Object(f)}t.exports=u},function(t,r,e){var n=e(520),o=e(193),a=e(125);function c(u){return a(o(u,void 0,n),u+"")}t.exports=c},function(t,r,e){var n=e(88),o=e(54),a=e(126),c=e(55),u=Object.prototype,l=u.hasOwnProperty,f=n(function(g,v){g=Object(g);var b=-1,S=v.length,C=S>2?v[2]:void 0;for(C&&a(v[0],v[1],C)&&(S=1);++b<S;)for(var O=v[b],A=c(O),w=-1,V=A.length;++w<V;){var k=A[w],M=g[k];(M===void 0||o(M,u[k])&&!l.call(g,k))&&(g[k]=O[k])}return g});t.exports=f},function(t,r,e){var n=e(0),o=n(e(47));const a=e(59),c=e(58);let u=function(){function l(f){f===void 0&&(f={}),Object.defineProperty(this,"_rawSessionInfo",{value:c(f)})}return(0,o.default)(l,[{key:"sessionId",get:function(){return this._rawSessionInfo.session_id}},{key:"partnerId",get:function(){return this._rawSessionInfo.partner_id}},{key:"messagingServer",get:function(){return this._rawSessionInfo.messaging_server_url}},{key:"mediaServerName",get:function(){return this._rawSessionInfo.media_server_hostname}},{key:"messagingURL",get:function(){return this._rawSessionInfo.messaging_url}},{key:"symphonyAddress",get:function(){return this._rawSessionInfo.symphony_address}},{key:"iceServers",get:function(){return this._rawSessionInfo.ice_servers}},{key:"simulcast",get:function(){return a(this._rawSessionInfo,"properties.simulcast")}},{key:"e2ee",get:function(){return a(this._rawSessionInfo,"properties.e2ee",!1)}},{key:"reconnection",get:function(){return a(this._rawSessionInfo,"properties.reconnection",!1)}},{key:"renegotiation",get:function(){return a(this._rawSessionInfo,"properties.renegotiation",!1)}},{key:"p2pEnabled",get:function(){return a(this._rawSessionInfo,"properties.p2p.preference.value")==="enabled"}},{key:"hybridSession",get:function(){return a(this._rawSessionInfo,"properties.hybridSession",!1)}},{key:"isAdaptiveEnabled",get:function(){return a(this._rawSessionInfo,"properties.p2p.preference.value")==="adaptive"}},{key:"priorityVideoCodec",get:function(){return a(this._rawSessionInfo,"properties.priorityVideoCodec","")}},{key:"h264",get:function(){return a(this._rawSessionInfo,"properties.h264",!0)}},{key:"vp8",get:function(){return a(this._rawSessionInfo,"properties.vp8",!0)}},{key:"vp9",get:function(){return a(this._rawSessionInfo,"properties.vp9",!0)}},{key:"clientCandidates",get:function(){const g=a(this._rawSessionInfo,"properties.clientCandidates");return g==="relayed"?"relay":g}}]),l}();t.exports=u},function(module,exports,__webpack_require__){const extendES5Native=__webpack_require__(562),webrtcAdapter=__webpack_require__(563),logging=__webpack_require__(2)("createWindowMock"),env=__webpack_require__(3),windowKeys=[{key:"location",type:"object"},{key:"setTimeout",type:"function"},{key:"requestAnimationFrame",type:"function"},{key:"URL",type:"function"},{key:"MediaStream",type:"class"},{key:"webkitMediaStream",type:"class"},{key:"RTCIceCandidate",type:"class"},{key:"mozRTCIceCandidate",type:"class"},{key:"RTCSessionDescription",type:"class"},{key:"mozRTCSessionDescription",type:"class"},{key:"RTCIceGatherer",type:"class"},{key:"RTCIceTransport",type:"class"},{key:"RTCDtlsTransport",type:"class"},{key:"RTCSctpTransport",type:"class"},{key:"RTCRtpReceiver",type:"class"},{key:"HTMLMediaElement",type:"class"},{key:"RTCPeerConnection",type:"class"},{key:"webkitRTCPeerConnection",type:"class"},{key:"mozRTCPeerConnection",type:"class"},{key:"MediaStreamTrack",type:"class"},{key:"RTCRtpSender",type:"class"},{key:"RTCTrackEvent",type:"class"},{key:"RTCTransceiver",type:"class"},{key:"RTCDtmfSender",type:"class"},{key:"RTCDTMFSender",type:"class"},{key:"MediaStreamTrackEvent",type:"class"}],navigatorKeys=[{key:"userAgent",type:"string"},{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"webkitGetUserMedia",type:"function"},{key:"mozGetUserMedia",type:"function"}],mediaDevicesKeys=[{key:"getUserMedia",type:"function"},{key:"getDisplayMedia",type:"function"},{key:"enumerateDevices",type:"function"},{key:"getSupportedConstraints",type:"function"},{key:"addEventListener",type:"function"},{key:"removeEventListener",type:"function"}],bindWithStaticProperties=(t,r)=>{if(typeof r!="function")return logging.warn("Non-function passed into bindWithStaticProperties()"),r;const e=r.bind(t);return Object.keys(r).forEach(n=>{e[n]=r[n]}),e},extendParentClass=ParentClass=>{try{const ChildClass=eval(`
      "use strict"; // Chrome<49 requires strict mode

      const getOwnProperties = (target) => {
        const properties = {};
        Object.getOwnPropertyNames(target).forEach((key) => {
          properties[key] = Object.getOwnPropertyDescriptor(target, key);
        });
        return properties;
      };

      class ChildClass extends ParentClass {
        constructor(...args) {
          super(...args);
          try {
            this.__proto__ = ChildClass.prototype;
          } catch (e) {}
        }
      };

      Object.defineProperties(ChildClass.prototype, getOwnProperties(ParentClass.prototype));
      Object.keys(ParentClass)
        .forEach((staticKey) => {
          ChildClass[staticKey] = ParentClass[staticKey];
        });

      ChildClass; // Ensure the final statement is returned in FF
    `);if(ChildClass&&ChildClass.prototype instanceof ParentClass)return ChildClass}catch(t){}return null},canUseES6Class=t=>{const r=t.RTCPeerConnection||t.webkitRTCPeerConnection||t.mozRTCPeerConnection,e=extendParentClass(r);if(e)try{e.prototype.foo="bar";const n=new e({iceServers:[]}),o=n.foo==="bar";try{n.close()}catch{}return o}catch{}return!1},extendClass=(t,r,e)=>{if(typeof t!="function")return logging.warn("Non-function passed into extendClass()"),t;let n=e&&extendParentClass(t);return n||(n=extendES5Native(t)),n},getCopyProperties=t=>(r,e,n)=>{n.forEach(o=>{let a=o.key,c=o.type,u=e[a];if(u!==void 0){switch(c){case"function":u=bindWithStaticProperties(e,u);break;case"class":u=extendClass(u,a,t);break;case"string":case"object":break;default:throw new Error(`Invalid type of window key: ${c}`)}r[a]=u}})},cloneWindow=t=>{const r={},e=getCopyProperties(canUseES6Class(t));return e(r,t,windowKeys),t.navigator!==void 0&&(r.navigator={},e(r.navigator,t.navigator,navigatorKeys),t.navigator.mediaDevices!==void 0&&(r.navigator.mediaDevices={},e(r.navigator.mediaDevices,t.navigator.mediaDevices,mediaDevicesKeys))),r};module.exports=function t(r){if(r.adapter!==void 0||env.isLegacyEdge)return r;const e=cloneWindow(r);return webrtcAdapter({window:e}),e}},function(t,r,e){t.exports=function(){let o=null;this.transform=a=>{o===null||a>=o?o=a:o=a*.3+o*.7;const c=Math.log(o)/Math.LN10/1.5+1;return Math.min(Math.max(c,0),1)}}},function(t,r,e){const n=e(6),o=c=>Object.keys(c).map(u=>c[u]),a=e(9);t.exports=function(u){const l={},f=(g,v)=>{a(v,{parent:this}),v.appendTo(u.parent),l[g]=v,this[g]=v};u.parent&&(n(this),this.destroy=()=>{this.off(),this.hideWhileLoading(),o(l).forEach(g=>g.destroy())},this.showAfterLoading=()=>{o(l).forEach(g=>g.showAfterLoading())},this.hideWhileLoading=()=>{o(l).forEach(g=>g.hideWhileLoading())},this.set=(g,v)=>(typeof g=="string"&&v?f(g,v):Object.keys(g).forEach(b=>{f(b,g[b])}),this))}},function(t,r,e){var n=e(0),o=n(e(14)),a;t.exports=(a=function(){function c(l){(0,o.default)(this,"_analyser",null),(0,o.default)(this,"_timeDomainData",null),(0,o.default)(this,"_sourceNode",null),this._audioContext=l}var u=c.prototype;return u._initAudioAnalyser=function(f){this._analyser=this._audioContext.createAnalyser(),this._sourceNode=this._audioContext.createMediaStreamSource(f),this._sourceNode.connect(this._analyser),this._timeDomainData=new Uint8Array(this._analyser.frequencyBinCount)},u.webRTCStream=function(f){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._audioContext.state==="suspended"&&this._audioContext.resume(),this._initAudioAnalyser(f)},u.destroy=function(){this._sourceNode&&this._sourceNode.disconnect(this._analyser),this._timeDomainData=null},u.sample=function(f){if(typeof f=="function")throw new Error("sample no longer takes a callback");if(this._analyser&&this._timeDomainData){this._analyser.getByteTimeDomainData(this._timeDomainData);let g=0;for(let v=this._timeDomainData.length-1;v>=0;v-=1)g=Math.max(g,Math.abs(this._timeDomainData[v]-128));return g/128}return null},c}(),a)},function(t,r,e){const n=e(574),o=e(27),a=e(6),c=e(23)();function u(){const l=this;a(l);function f(){return n.isDomLoaded()&&!n.isDomUnloaded()}function g(){f()&&l.dispatchEvent(new c.EnvLoadedEvent(o.ENV_LOADED))}function v(){n.whenUnloaded.then(b),g()}function b(){l.dispatchEvent(new c.EnvLoadedEvent(o.ENV_UNLOADED))}n.whenLoaded.then(v),this.onLoad=function(S,C){if(f()){S.call(C);return}l.on(o.ENV_LOADED,S,C)},this.onUnload=function(S,C){if(this.isUnloaded()){S.call(C);return}l.on(o.ENV_UNLOADED,S,C)},this.isUnloaded=function(){return n.isDomUnloaded()}}t.exports=new u},function(t,r,e){var n=e(579);/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function o(me,ye){if(me===ye)return 0;for(var Pe=me.length,Te=ye.length,Ue=0,_e=Math.min(Pe,Te);Ue<_e;++Ue)if(me[Ue]!==ye[Ue]){Pe=me[Ue],Te=ye[Ue];break}return Pe<Te?-1:Te<Pe?1:0}function a(me){return(typeof window!==void 0?window:commonjsGlobal).Buffer&&typeof(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer=="function"?(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer(me):!!(me!=null&&me._isBuffer)}var c=e(580),u=Object.prototype.hasOwnProperty,l=Array.prototype.slice,f=function(){return function(){}.name==="foo"}();function g(me){return Object.prototype.toString.call(me)}function v(me){return a(me)||typeof(typeof window!==void 0?window:commonjsGlobal).ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(me):me?!!(me instanceof DataView||me.buffer&&me.buffer instanceof ArrayBuffer):!1}var b=t.exports=k,S=/\s*function\s+([^\(\s]*)\s*/;function C(me){if(c.isFunction(me)){if(f)return me.name;var ye=me.toString(),Pe=ye.match(S);return Pe&&Pe[1]}}b.AssertionError=function(ye){this.name="AssertionError",this.actual=ye.actual,this.expected=ye.expected,this.operator=ye.operator,ye.message?(this.message=ye.message,this.generatedMessage=!1):(this.message=w(this),this.generatedMessage=!0);var Pe=ye.stackStartFunction||V;if(Error.captureStackTrace)Error.captureStackTrace(this,Pe);else{var Te=new Error;if(Te.stack){var Ue=Te.stack,_e=C(Pe),je=Ue.indexOf(`
`+_e);if(je>=0){var Ke=Ue.indexOf(`
`,je+1);Ue=Ue.substring(Ke+1)}this.stack=Ue}}},c.inherits(b.AssertionError,Error);function O(me,ye){return typeof me=="string"?me.length<ye?me:me.slice(0,ye):me}function A(me){if(f||!c.isFunction(me))return c.inspect(me);var ye=C(me),Pe=ye?": "+ye:"";return"[Function"+Pe+"]"}function w(me){return O(A(me.actual),128)+" "+me.operator+" "+O(A(me.expected),128)}function V(me,ye,Pe,Te,Ue){throw new b.AssertionError({message:Pe,actual:me,expected:ye,operator:Te,stackStartFunction:Ue})}b.fail=V;function k(me,ye){me||V(me,!0,ye,"==",b.ok)}b.ok=k,b.equal=function(ye,Pe,Te){ye!=Pe&&V(ye,Pe,Te,"==",b.equal)},b.notEqual=function(ye,Pe,Te){ye==Pe&&V(ye,Pe,Te,"!=",b.notEqual)},b.deepEqual=function(ye,Pe,Te){M(ye,Pe,!1)||V(ye,Pe,Te,"deepEqual",b.deepEqual)},b.deepStrictEqual=function(ye,Pe,Te){M(ye,Pe,!0)||V(ye,Pe,Te,"deepStrictEqual",b.deepStrictEqual)};function M(me,ye,Pe,Te){if(me===ye)return!0;if(a(me)&&a(ye))return o(me,ye)===0;if(c.isDate(me)&&c.isDate(ye))return me.getTime()===ye.getTime();if(c.isRegExp(me)&&c.isRegExp(ye))return me.source===ye.source&&me.global===ye.global&&me.multiline===ye.multiline&&me.lastIndex===ye.lastIndex&&me.ignoreCase===ye.ignoreCase;if((me===null||typeof me!="object")&&(ye===null||typeof ye!="object"))return Pe?me===ye:me==ye;if(v(me)&&v(ye)&&g(me)===g(ye)&&!(me instanceof Float32Array||me instanceof Float64Array))return o(new Uint8Array(me.buffer),new Uint8Array(ye.buffer))===0;if(a(me)!==a(ye))return!1;Te=Te||{actual:[],expected:[]};var Ue=Te.actual.indexOf(me);return Ue!==-1&&Ue===Te.expected.indexOf(ye)?!0:(Te.actual.push(me),Te.expected.push(ye),Y(me,ye,Pe,Te))}function W(me){return Object.prototype.toString.call(me)=="[object Arguments]"}function Y(me,ye,Pe,Te){if(me==null||ye===null||ye===void 0)return!1;if(c.isPrimitive(me)||c.isPrimitive(ye))return me===ye;if(Pe&&Object.getPrototypeOf(me)!==Object.getPrototypeOf(ye))return!1;var Ue=W(me),_e=W(ye);if(Ue&&!_e||!Ue&&_e)return!1;if(Ue)return me=l.call(me),ye=l.call(ye),M(me,ye,Pe);var je=ae(me),Ke=ae(ye),De,Ze;if(je.length!==Ke.length)return!1;for(je.sort(),Ke.sort(),Ze=je.length-1;Ze>=0;Ze--)if(je[Ze]!==Ke[Ze])return!1;for(Ze=je.length-1;Ze>=0;Ze--)if(De=je[Ze],!M(me[De],ye[De],Pe,Te))return!1;return!0}b.notDeepEqual=function(ye,Pe,Te){M(ye,Pe,!1)&&V(ye,Pe,Te,"notDeepEqual",b.notDeepEqual)},b.notDeepStrictEqual=H;function H(me,ye,Pe){M(me,ye,!0)&&V(me,ye,Pe,"notDeepStrictEqual",H)}b.strictEqual=function(ye,Pe,Te){ye!==Pe&&V(ye,Pe,Te,"===",b.strictEqual)},b.notStrictEqual=function(ye,Pe,Te){ye===Pe&&V(ye,Pe,Te,"!==",b.notStrictEqual)};function P(me,ye){if(!me||!ye)return!1;if(Object.prototype.toString.call(ye)=="[object RegExp]")return ye.test(me);try{if(me instanceof ye)return!0}catch{}return Error.isPrototypeOf(ye)?!1:ye.call({},me)===!0}function j(me){var ye;try{me()}catch(Pe){ye=Pe}return ye}function _(me,ye,Pe,Te){var Ue;if(typeof ye!="function")throw new TypeError('"block" argument must be a function');typeof Pe=="string"&&(Te=Pe,Pe=null),Ue=j(ye),Te=(Pe&&Pe.name?" ("+Pe.name+").":".")+(Te?" "+Te:"."),me&&!Ue&&V(Ue,Pe,"Missing expected exception"+Te);var _e=typeof Te=="string",je=!me&&c.isError(Ue),Ke=!me&&Ue&&!Pe;if((je&&_e&&P(Ue,Pe)||Ke)&&V(Ue,Pe,"Got unwanted exception"+Te),me&&Ue&&Pe&&!P(Ue,Pe)||!me&&Ue)throw Ue}b.throws=function(me,ye,Pe){_(!0,me,ye,Pe)},b.doesNotThrow=function(me,ye,Pe){_(!1,me,ye,Pe)},b.ifError=function(me){if(me)throw me};function z(me,ye){me||V(me,!0,ye,"==",z)}b.strict=n(z,b,{equal:b.strictEqual,deepEqual:b.deepStrictEqual,notEqual:b.notStrictEqual,notDeepEqual:b.notDeepStrictEqual}),b.strict.strict=b.strict;var ae=Object.keys||function(me){var ye=[];for(var Pe in me)u.call(me,Pe)&&ye.push(Pe);return ye}},function(t,r,e){const n=e(587),o=e(265),a=e(3);t.exports=c=>a.isElectron?c==="screen"?!0:o(c):n.indexOf(c)>-1},function(t,r,e){const n=e(268),o=e(6),a=e(2)("StreamChannel"),c=e(152)();t.exports=function(l){this.id=l.id,this.type=l.type,this.active=n(l.active),this.orientation=l.orientation||c.ROTATED_NORMAL,l.frameRate&&(this.frameRate=parseFloat(l.frameRate)),l.preferredFrameRate&&(this.preferredFrameRate=parseFloat(l.preferredFrameRate)),l.preferredWidth&&(this.preferredWidth=parseInt(l.preferredWidth,10)),l.preferredHeight&&(this.preferredHeight=parseInt(l.preferredHeight,10)),this.width=parseInt(l.width,10),this.height=parseInt(l.height,10),this.source=l.source||"camera",this.fitMode=l.fitMode||"cover",o(this),this.update=function(f){const g={},v={};for(const b in f){if(!f.hasOwnProperty(b))continue;const S=this[b];switch(b){case"active":this.active=n(f[b]);break;case"disableWarning":this.disableWarning=n(f[b]);break;case"frameRate":this.frameRate=parseFloat(f[b],10);break;case"width":case"height":this[b]=parseInt(f[b],10),g[b]=this[b],v[b]=S;break;case"orientation":this[b]=f[b],g[b]=this[b],v[b]=S;break;case"fitMode":this[b]=f[b];break;case"source":this[b]=f[b];break;default:return a.warn(`Tried to update unknown key ${b} on ${this.type} channel ${this.id}`),!1}this.trigger("update",this,b,S,this[b])}return Object.keys(g).length&&this.trigger("update",this,"videoDimensions",v,g),!0}}},function(t,r,e){t.exports=function(){return{ROTATED_NORMAL:0,ROTATED_LEFT:270,ROTATED_RIGHT:90,ROTATED_UPSIDE_DOWN:180}}},function(t,r,e){const n=e(595),o=e(2)("StylableComponent"),a=e(596),c=e(269);t.exports=function(l,f,g,v){if(!l.trigger)throw new Error("OT.StylableComponent is dependent on the eventing mixin. Ensure that this is included in the object before StylableComponent.");v=v||function(){};let b=!1;const S=function(A,w,V){V?l.trigger("styleValueChanged",A,w,V):l.trigger("styleValueChanged",A,w)};g===!1&&(f={buttonDisplayMode:"off",nameDisplayMode:"off",audioLevelDisplayMode:"off",videoDisabledDisplayMode:"off",audioBlockedDisplayMode:"off"},b=!0,v({showControls:!1}));const C=new a(f,S);l.getStyle=function(O){return C.get(O)},l.setStyle=function(O,A,w){if(b)return o.warn("Calling setStyle() has no effect because theshowControls option was set to false"),this;let V;return typeof O!="string"?V=O:(V={},V[O]=A),V.backgroundImageURI&&(V.backgroundImageURI=n(V.backgroundImageURI)),C.setAll(V,w),v(c(V)),this}}},function(t,r,e){const n=e(51),o=e(35)(),a=e(26),c=e(72),u=e(148),l=e(52).once,f=e(599),g=e(8),v=e(2)("systemRequirements"),b=e(600),S=e(601),C=o.onlyLocal(),O=new a,A=n(()=>{O.logEvent({action:"checkSystemRequirements",variation:"notHasRequirements",partnerId:c.value,payload:{userAgent:g.env.userAgent}})}),w=n(()=>{e(602)()});let V=!1;t.exports={check(){v.debug("OT.checkSystemRequirements()");const k=Number(f&&l());return w(),k||A(),k},upgrade(k){let M=k===void 0?{}:k,W=M.isSupportedButOld,Y=W===void 0?g.env.name.toLowerCase()in C.minimumVersion:W,H=M.userAgent,P=H===void 0?navigator.userAgent:H;u.onLoad(()=>{if(V)return;const j=new S(b);V=!0,j.on("close",()=>{V=!1}),j.open();let _;P.match(/(iPad|iPhone|iPod|android|webOS)/i)?_=`${Y?"supported-":""}mobile-browser`:_=`${Y?"upgrade":"normal"}-install`,j.el(`#section-${_}`).style.display="block"})}}},function(t,r,e){(function(n){var o=e(0),a=o(e(37)),c=o(e(603));const u=e(607);let l=function(f){(0,a.default)(g,f);function g(v){var b;return b=f.call(this,v)||this,b.name="TimeoutError",b}return g}((0,c.default)(Error));t.exports=(f,g,v)=>new n((b,S)=>{if(typeof g!="number"||g<0)throw new TypeError("Expected `ms` to be a positive number");const C=setTimeout(()=>{if(typeof v=="function"){try{b(v())}catch(w){S(w)}return}const O=typeof v=="string"?v:`Promise timed out after ${g} milliseconds`,A=v instanceof Error?v:new l(O);typeof f.cancel=="function"&&f.cancel(),S(A)},g);u(f.then(b,S),()=>{clearTimeout(C)})}),t.exports.TimeoutError=l}).call(this,e(1))},function(t,r,e){function n(){const o=[];return{add(a){o.push(a)},remove(a){const c=o.indexOf(a);c>=0&&o.splice(c,1)},releaseAll(){const a=[];for(;o.length>0;){const u=o.pop();try{u()}catch(l){a.push(l)}}const c=a.length;if(c>0)throw new Error(`Failed to complete ${c} cleanup job${c===1?"":"s"}: ${a.map(u=>`<${u}>`).join(", ")}`)}}}t.exports=n},function(t,r,e){const n=e(2)("applySdpTransform");t.exports=(o,a,c,u,l)=>{const f=o[a][c],g=`${a} ${c}`,b=`sdpTransforms (${g==="local offer"||g==="remote answer"?"publisher":"subscriber"}): ${a} ${c}`,S=a==="local"?"created":"received";n.debug(`${b}: ${S}:
${l}`);const C=f(u,l);return C.local===l?n.debug(`${b}: not modified`):n.debug(`${b}: modified to:
${C.local}`),C}},function(t,r,e){const n=function(a){if(a===void 0&&(a={}),!a)return 0;const c=a,u=c.currentStatFrames,l=u===void 0?0:u,f=c.prevStatFrames,g=f===void 0?0:f,v=c.currentTimestamp,b=v===void 0?0:v,S=c.prevTimestamp,C=S===void 0?0:S;if(l>=g&&b>C){const O=(l-g)/((b-C)/1e3);return Math.round(O*100)/100}return 0};t.exports=n},function(t,r,e){let n;t.exports=function(a){a===void 0&&(a={});const c=a.AudioContext||(typeof window!==void 0?window:commonjsGlobal).AudioContext||(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext;return function(){if(n=n||c&&new c,n==null)throw new Error("AudioContext could not be created, hardware limit reached.");return n}}},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(59)),c=typeof(0,o.default)(typeof window!==void 0?window:commonjsGlobal,"navigator.getDisplayMedia",(0,o.default)(typeof window!==void 0?window:commonjsGlobal,"navigator.mediaDevices.getDisplayMedia"))=="function";r.default=c},function(t,r,e){const n=e(39);t.exports=function(){return function(c,u,l){const f=u.slice(),g=n(l),v=function(C){return f.indexOf(C)!==-1},b=function(C,O){return g[C]&&g[C].indexOf(O)!==-1};return function(S){let C=c,O=null;this.current=C;function A(V,k){S({message:V,newState:k,currentState:C,previousState:O})}function w(V){return v(V)?b(C,V)?!0:(A(`'${C}' cannot transition to '${V}'`,V),!1):(A(`'${V}' is not a valid state`,V),!1)}this.set=function(V){w(V)&&(O=C,this.current=V,C=V)}}}}},function(t,r,e){(function(n){const o=e(62);t.exports=function(c){c===void 0&&(c={});const u=c.chromeExtensionHelper||e(281)(),l=c.electronExtensionHelper||e(645)(),f=c.Errors||e(7),g=c.firefoxExtensionHelper||e(647),v=c.getDisplayMediaExtensionHelper||e(289),b=c.otError||e(13)(),S=c.OTHelpers||e(8),C={};C.extensionByKind={},C.extensionClasses={},C.registerExtensionHelper=(w,V)=>{C.extensionClasses[w]=V,V.autoRegisters&&V.isSupportedInThisBrowser&&C.registerExtension(w)},C.registerExtension=function(w){if(C.extensionClasses[w]==null)throw new Error("Unsupported kind passed to OT.registerScreenSharingExtension");for(var V=arguments.length,k=new Array(V>1?V-1:0),M=1;M<V;M++)k[M-1]=arguments[M];const W=C.extensionClasses[w].register(...k);C.extensionByKind[w]=W};const O=()=>{const w=o(Object.keys(C.extensionClasses).sort(V=>V==="electron"?-1:1),V=>C.extensionClasses[V].isSupportedInThisBrowser);return w===void 0?{}:{name:w,proto:C.extensionClasses[w],instance:C.extensionByKind[w]}};C.pickHelper=()=>O(),C.checkCapability=w=>{const V={supported:!1,extensionRequired:void 0,extensionRegistered:void 0,extensionInstalled:void 0,supportedSources:{}},k=O();if(k.name===void 0){setTimeout(w.bind(null,V));return}if(V.supported=!0,V.extensionRequired=k.proto.extensionRequired?k.name:void 0,V.supportedSources={screen:k.proto.sources.screen,application:k.proto.sources.application,window:k.proto.sources.window,browser:k.proto.sources.browser},!k.instance){V.extensionRegistered=!1,V.extensionRequired&&(V.extensionInstalled=!1),setTimeout(w.bind(null,V));return}V.extensionRegistered=V.extensionRequired?!0:void 0,k.instance.isInstalled(M=>{V.extensionInstalled=V.extensionRequired||S.env.name==="Firefox"?M:void 0,w(V)})},C.registerExtensionHelper("electron",l),C.registerExtensionHelper("getDisplayMedia",v),C.registerExtensionHelper("chrome",u),C.registerExtensionHelper("firefox",g);const A=()=>{};return C.getConstraints=w=>{const V=w.onAccessDialogOpened,k=V===void 0?A:V,M=w.onAccessDialogClosed,W=M===void 0?A:M,Y=w.videoSource,H=w.constraints;return new n((P,j)=>{C.checkCapability(_=>{if(_.supported)if(_.extensionRegistered===!1)j(b(f.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,new Error("Screen Sharing support in this browser requires an extension, but one has not been registered.")));else if(_.extensionRequired&&_.extensionInstalled===!1)j(b(f.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Screen Sharing support in this browser requires an extension, but the extension is not installed.")));else{const z=C.pickHelper();z.proto.getConstraintsShowsPermissionUI&&k(),z.instance.getConstraints(Y,H,(ae,me)=>{z.proto.getConstraintsShowsPermissionUI&&W(),ae?j(ae):P(me)})}else{let z="Screen Sharing is not supported in this browser";S.env.isElectron?z="Set the webPreferences.contextIsolation option of the Electron BrowserWindow to false or use a preload script to access the desktop capturer. For more information, see https://tokbox.com/developer/guides/screen-sharing/js/.":S.env.name==="Chrome"&&S.env.version>73&&(typeof window!==void 0?window:commonjsGlobal).location.protocol!=="https:"&&(z="https:// is required for screen sharing"),j(b(f.SCREEN_SHARING_NOT_SUPPORTED,new Error(z)))}})})},C}}).call(this,e(1))},function(t,r,e){t.exports=function(o){o===void 0&&(o={});const a=o.Errors||e(7),c=o.ExceptionCodes||e(10),u=o.otError||e(13)(),l={ICEWorkflow:a.ICE_WORKFLOW_FAILED,NewPeerConnection:a.CREATE_PEER_CONNECTION_FAILED,SetRemoteDescription:a.SET_REMOTE_DESCRIPTION_FAILED,Subscribe:{404:a.STREAM_NOT_FOUND,[c.STREAM_LIMIT_EXCEEDED]:a.STREAM_LIMIT_EXCEEDED}};return function(g,v,b,S,C){const O=`${(b?`${b}: `:"")+C} PeerConnection with connection ${S} failed: ${v}`,A=l[b]||{},w=typeof A=="string"?A:A[g],V=C==="Publisher"?c.UNABLE_TO_PUBLISH:c.UNABLE_TO_SUBSCRIBE;if(!w){const M=new Error(O);return M.code=V,M}const k=(()=>b==="ICEWorkflow"?C==="Publisher"?c.PUBLISHER_ICE_WORKFLOW_FAILED:c.SUBSCRIBER_ICE_WORKFLOW_FAILED:w===a.STREAM_LIMIT_EXCEEDED?c.STREAM_LIMIT_EXCEEDED:V)();return u(w,new Error(O),k)}}},function(t,r,e){t.exports=function(o){o===void 0&&(o={});const a=o.OTHelpers||e(8),u=(o.global||(typeof window!==void 0?window:commonjsGlobal)).RTCPeerConnection;return function(f,g){a.env.name==="Firefox"&&u&&u.generateCertificate?u.generateCertificate({name:"RSASSA-PKCS1-v1_5",hash:"SHA-256",modulusLength:2048,publicExponent:new Uint8Array([1,0,1])}).catch(v=>{g(v)}).then(v=>{f.certificates=[v],g(void 0,f)}):setTimeout(()=>{g(void 0,f)})}}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5)),c=n(e(47)),u=n(e(14));const l=e(6),f=e(664),g=e(2)("WidgetView"),v=e(8),b=e(3),S=e(166),C=S.default,O=S.CancellationError,A=e(167),w=e(666),V=e(667),k=e(668),M=e(669),W=e(670),Y=e(63),H=e(110);H();function P(j){let _=j===void 0?{}:j,z=_.logging,ae=z===void 0?g:z,me=_.OTHelpers,ye=me===void 0?v:me,Pe=_.waitForVideoToBePlaying,Te=Pe===void 0?V:Pe,Ue=_.VideoElementFacade,_e=Ue===void 0?H():Ue,je=_.env,Ke=je===void 0?b:je;const De=f({window:typeof window!==void 0?window:commonjsGlobal}),Ze=gt=>{if(gt.isCanceled())throw ae.debug("bindVideo bailing due to cancellation"),new O("CANCEL")};return function(){function gt(Le,We){let ut=We===void 0?{}:We,bt=ut.insertDefaultUI,mt=bt===void 0?!0:bt,It=ut.width,Ge=It===void 0?264:It,Qe=ut.height,Et=Qe===void 0?198:Qe,Tt=ut.fitMode,Zt=Tt===void 0?"cover":Tt,$t=ut.mirror,pt=$t===void 0?!1:$t,ft=ut.insertMode,et=ut.classNames,it=ut.style,Pt=ut.widgetType;(0,u.default)(this,"_videoElementFacade",void 0),(0,u.default)(this,"_container",void 0),(0,u.default)(this,"_posterContainer",document.createElement("div")),(0,u.default)(this,"_widgetContainer",document.createElement("div")),(0,u.default)(this,"_loading",!0),(0,u.default)(this,"_audioOnly",!1),(0,u.default)(this,"_showPoster",void 0),(0,u.default)(this,"_poster",void 0),(0,u.default)(this,"_cancelBind",void 0),(0,u.default)(this,"MAX_VIDEO_LOADED",5*1e3),l(this),/^(contain|cover)$/.test(Zt)===!1&&ae.warn(`Invalid fit value "${Zt}" passed. Only "contain" and "cover" can be used.`),this._widgetType=Pt,this._fitMode=Zt,this._insertDefaultUI=mt;const nn=Y(this._widgetContainer);if(nn.on("click",this.userGesture.bind(this)),nn.on("touchstart",this.userGesture.bind(this),De?{passive:!0}:!1),this.once("destroy",()=>nn.removeAll()),this._widgetContainer.classList.add("OT_widget-container"),this._widgetContainer.style.width="100%",this._widgetContainer.style.height="100%",mt!==!1){this._container=M(Le,ft),Ke.isSafari&&Ke.isiOS&&Ke.iOSVersion&&Ke.iOSVersion<11.2&&this._container.classList.add("OT_ForceContain"),this._container.style.width=W(Ge),this._container.style.height=W(Et),this._container.style.overflow="hidden",k(this._container),pt&&ye.addClass(this._container,"OT_mirrored"),et&&et.trim().split(/\s+/).forEach(Dn=>this._container.classList.add(Dn)),this._container.classList.add("OT_loading"),this._container.classList.add(`OT_fit-mode-${Zt}`),this._container.appendChild(this._widgetContainer);const Wt=ye(this._container).observeSize(()=>k(this._container)),tn=Wt[0],mn=ye.observeNodeOrChildNodeRemoval(this._container,Dn=>{if(!this._videoElementFacade)return;Dn.some(Zn=>Zn===this._widgetContainer||Zn===this._videoElementFacade.domElement())&&this.destroyVideo()});this.once("destroy",()=>{ae.debug("disconnecting observers"),tn.disconnect(),mn.disconnect()})}this._posterContainer.classList.add("OT_video-poster"),this._widgetContainer.appendChild(this._posterContainer);const Ut=document.createElement("div");Ut.classList.add("OT_video-loading");const xt=document.createElement("div");xt.classList.add("OT_video-loading-spinner"),Ut.appendChild(xt),this._widgetContainer.appendChild(Ut),it&&it.backgroundImageURI&&this.setBackgroundImageURI(it.backgroundImageURI)}var Ee=gt.prototype;return Ee.addError=function(We,ut,bt){this._container&&(this._container.innerHTML=`<p>${We}${ut?` <span class="ot-help-message">${ut}</span>`:""}</p>`,ye.addClass(this._container,bt||"OT_subscriber_error"),this._container.querySelector("p").offsetHeight>this._container.offsetHeight&&(this._container.querySelector("span").style.display="none"))},Ee.destroy=function(){this.emit("destroy"),this.destroyVideo(),this._container&&(ye.removeElement(this._container),this._container=null)},Ee.setBackgroundImageURI=function(We){ye.css(this._posterContainer,"backgroundImage",`url(${We})`),ye.css(this._posterContainer,"backgroundSize","contain"),ye.css(this._posterContainer,"opacity","1.0")},Ee.isAudioBlocked=function(){return Boolean(this._videoElementFacade&&this._videoElementFacade.isAudioBlocked())},Ee.unblockAudio=function(){return this._videoElementFacade.unblockAudio()},Ee.userGesture=function(){this.isAudioBlocked()&&A().then(()=>ae.debug("Successfully unblocked audio"),We=>ae.error("Error retrying audio on user interaction:",We))},Ee.setAudioBlockedUi=function(We){this._container&&(We?this._container.classList.add("OT_container-audio-blocked"):this._container.classList.remove("OT_container-audio-blocked"))},Ee.rebindSrcObject=function(){this._videoElementFacade&&this._videoElementFacade._rebindSrcObject()},Ee.pauseAndPlayVideoElement=function(){this._videoElementFacade&&this._videoElementFacade._pauseAndPlay()},Ee._createBufferVideoElement=function(){var Le=(0,a.default)(o.default.mark(function ut(bt,mt){var It,Ge,Qe;return o.default.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return mt===void 0&&(mt={}),It=mt.createElement?mt:document,Ge=!1,Qe=It.createElement("video"),Qe.srcObject=bt,Tt.prev=5,Qe.play(),Tt.next=9,Te(Qe,this.MAX_VIDEO_LOADED);case 9:return Ge=Tt.sent,Tt.abrupt("return",Ge?Qe:null);case 13:return Tt.prev=13,Tt.t0=Tt.catch(5),Tt.abrupt("return",null);case 16:case"end":return Tt.stop()}},ut,this,[[5,13]])}));function We(ut,bt){return Le.apply(this,arguments)}return We}(),Ee._emitAMREvent=function(We,ut,bt){this.emit("amrLogEvent",We,ut,bt)},Ee._createVideoElementFacade=function(We){let ut=We._inject,bt=We.audioVolume,mt=We.fallbackText,It=We.muted;this._videoElementFacade=new _e({defaultAudioVolume:parseFloat(bt),fallbackText:mt,fitMode:this._fitMode,_inject:ut,muted:It,widgetType:this._widgetType});const Ge=Y(this._videoElementFacade);if(this._videoFacadeEvents=Ge,Ge.on("error",()=>{this.trigger("error")}),Ge.on("videoDimensionsChanged",(Qe,Et)=>{this.trigger("videoDimensionsChanged",Qe,Et)}),Ge.on("mediaStopped",Qe=>{this.trigger("mediaStopped",Qe)}),Ge.on("audioBlocked",()=>this.trigger("audioBlocked")),Ge.on("audioUnblocked",()=>this.trigger("audioUnblocked")),this._videoElementFacade.audioChannelType("telephony"),ae.debug("Appending the video facade"),this._videoElementFacade.appendTo(this._widgetContainer),typeof bt<"u")try{this._videoElementFacade.setAudioVolume(bt)}catch(Qe){ae.warn(`bindVideo ${Qe}`)}},Ee._bindToStream=function(){var Le=(0,a.default)(o.default.mark(function ut(bt,mt){return o.default.wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Ge.prev=0,Ge.next=3,this._videoElementFacade.bindToStream(bt);case 3:Ge.next=14;break;case 5:if(Ge.prev=5,Ge.t0=Ge.catch(0),!mt.isCanceled()){Ge.next=12;break}throw ae.debug("Refusing to destroyVideo as bindVideo was cancelled"),new O("CANCEL");case 12:throw this.destroyVideo(),Ge.t0;case 14:case"end":return Ge.stop()}},ut,this,[[0,5]])}));function We(ut,bt){return Le.apply(this,arguments)}return We}(),Ee._getNewBindCancellation=function(){this._cancelBind&&(ae.debug("Cancelling last bindVideo request"),this._cancelBind.cancel());const We=new C;return this._cancelBind=We,this.once("destroy",()=>We.cancel()),We},Ee._triggerVideoElementCreated=function(){const We=ut=>{this.trigger("videoElementCreated",ut),this._insertDefaultUI&&ye.addClass(ut,"OT_video-element")};this._videoElementFacade.domElement()?We(this._videoElementFacade.domElement()):this._videoFacadeEvents.on("videoElementCreated",ut=>{We(ut)})},Ee._waitForVideoResolution=function(){var Le=(0,a.default)(o.default.mark(function ut(bt){return o.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(!(!this.audioOnly()&&bt.getVideoTracks().length>0)){It.next=5;break}return ae.debug("Waiting for correct resolution"),It.next=4,w(this._videoElementFacade,5e3);case 4:ae.debug(`Resolution: ${this._videoElementFacade.videoWidth()}x${this._videoElementFacade.videoHeight()}`);case 5:case"end":return It.stop()}},ut,this)}));function We(ut){return Le.apply(this,arguments)}return We}(),Ee.bindVideo=function(){var Le=(0,a.default)(o.default.mark(function ut(bt,mt,It){var Ge,Qe,Et,Tt,Zt,$t,pt,ft;return o.default.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(Ge=mt.audioVolume,Qe=mt.muted,Et=mt.fallbackText,Tt=mt._inject,It===void 0&&(It=!1),ae.debug("bindVideo ",{webRTCStream:bt}),Zt=!!this._videoElementFacade,pt=this._getNewBindCancellation(),Zt){it.next=9;break}this._createVideoElementFacade({_inject:Tt,audioVolume:Ge,fallbackText:Et,muted:Qe}),it.next=22;break;case 9:if(!(bt instanceof MediaStream)){it.next=22;break}return this._emitAMREvent("AMRLoadVideoBuffer","Attempt"),it.next=13,this._createBufferVideoElement(bt);case 13:if($t=it.sent,$t){it.next=20;break}if(this._emitAMREvent("AMRLoadVideoBuffer","Failure"),!It){it.next=18;break}throw new Error("bufferFailed: videoBuffer failed to load or timeout");case 18:it.next=21;break;case 20:this._emitAMREvent("AMRLoadVideoBuffer","Success");case 21:this._videoFacadeEvents.on("amrLogEvent",(Pt,nn,Ut)=>{this._emitAMREvent(Pt,nn,Ut)});case 22:return it.next=24,this._bindToStream(bt,pt);case 24:return Zt||this._triggerVideoElementCreated(),Ze(pt),ft=Te(this._videoElementFacade,5e3),it.next=29,this._waitForVideoResolution(bt);case 29:return ae.debug("Waiting for video to be playing"),it.next=32,ft;case 32:ae.debug("Video is playing"),Ze(pt),$t&&($t.remove&&$t.remove(),$t=null);case 35:case"end":return it.stop()}},ut,this)}));function We(ut,bt,mt){return Le.apply(this,arguments)}return We}(),Ee.bindAudioTrackOnly=function(){this._videoElementFacade&&this._videoElementFacade.bindAudioTrackOnly()},Ee.destroyVideo=function(){this._videoElementFacade&&(this._videoElementFacade.destroy(),this._videoElementFacade=null)},Ee.video=function(){return this._videoElementFacade},Ee.showPoster=function(We){return We===void 0?!ye.isDisplayNone(this._posterContainer):(this._showPoster=We,ye[We?"show":"hide"](this._posterContainer),this.showPoster())},Ee.poster=function(We){return We===void 0?ye.css(this._posterContainer,"backgroundImage"):(this._poster=We,ye.css(this._posterContainer,"backgroundImage",`url(${We})`),this.poster())},Ee.loading=function(We){return We===void 0?this._loading:(this._loading=Boolean(We),this._container&&this._container.classList[We?"add":"remove"]("OT_loading"),this.loading())},Ee.audioOnly=function(We){return We===void 0?this._audioOnly:(this._audioOnly=We,this._container&&this._container.classList[We?"add":"remove"]("OT_audio-only"),this.audioOnly())},Ee.domId=function(){return this._container&&this._container.getAttribute("id")},Ee.setSinkId=function(We){if(this._videoElementFacade)return this._videoElementFacade.setSinkId(We)},(0,c.default)(gt,[{key:"domElement",get:function(){return this._container}},{key:"videoElement",get:function(){return this._videoElementFacade&&this._videoElementFacade.domElement()||void 0}},{key:"width",get:function(){return this.videoElement&&this.videoElement.offsetWidth}},{key:"height",get:function(){return this.videoElement&&this.videoElement.offsetHeight}}]),gt}()}t.exports=P},function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.CancellationError=r.default=void 0;var n=e(665),o=u(n),a=e(303),c=u(a);function u(l){return l&&l.__esModule?l:{default:l}}r.default=o.default,r.CancellationError=c.default},function(t,r,e){(function(n){const o=e(21);t.exports=()=>n.all(o.subscribers.where().map(a=>{if(a.isAudioBlocked())return a._.unblockAudio()}))}).call(this,e(1))},function(t,r,e){t.exports=n=>n==="P2P"?"RELAYED":"ROUTED"},function(t,r,e){(function(n){var o=e(0),a=o(e(4)),c=o(e(5)),u=o(e(16));const l=e(59),f=e(149),g=e(9),v=e(58),b=e(62),S=e(276),C=e(49),O=e(51),A=e(683),w=e(17),V=e(259),k=e(195),M=e(166),W=M.CancellationError,Y=M.default,H=e(3),P=e(693),j=e(313),_=e(76),z=e(27),ae=e(6),me=e(109),ye=e(130),Pe=e(26),Te=e(75),Ue=e(156),_e=e(694),je=e(165)(),Ke=e(695),De=e(696),Ze=e(167),tt=e(24)(),gt=tt.getInputMediaDevices,Ee=e(697),Le=e(270),We=e(311),ut=e(698),bt=e(699),mt=e(292),It=mt.setVideoContentHint,Ge=mt.getVideoContentHint,Qe=e(168),Et=e(312),Tt=e(700),Zt=Tt.AudioFallbackStateMachine,$t=Tt.AudioFallbackVideoStates,pt=5*1e3,ft=3*1e3,et=30*1e3;t.exports=function(Pt){Pt===void 0&&(Pt={});let nn=Pt,Ut=(0,u.default)({},nn);["processPubOptions"].forEach(bs=>{f(Ut[bs],`${bs} dependency must be injected into Publisher`)});const xt=Ut.AnalyticsHelper||Pe,Wt=Ut.AudioFallbackStateMachine||Zt,tn=Ut.calculateCapableSimulcastStreams||e(252),mn=Ut.createChromeMixin||e(282)(),Dn=Ut.deviceHelpers||e(24)(),er=Ut.EnvironmentLoader||e(148),Zn=Ut.Errors||e(7),dr=Ut.Events||e(23)(),pr=Ut.ExceptionCodes||e(10),Bn=Ut.interpretPeerConnectionError||e(163)(),Jn=Ut.IntervalRunner||Te,Dt=Ut.logging||e(2)("Publisher"),Ii=Ut.Microphone||e(293)(),ti=Ut.otError||e(13)(),ci=Ut.OTErrorClass||e(22),Rr=Ut.OTHelpers||e(8),Vr=Ut.parseIceServers||e(103).parseIceServers,ui=Ut.PUBLISH_MAX_DELAY||e(267),Vi=Ut.PublisherPeerConnection||e(297)(),Os=Ut.PublishingState||e(302)(),ii=Ut.StreamChannel||e(151),xo=Ut.systemRequirements||e(154),Ws=Ut.VideoOrientation||e(152)(),ga=Ut.WidgetView||je,Kn=Ut.global||(typeof window!==void 0?window:commonjsGlobal),mi=Ut.createSendMethod||e(309),ya=Ut.setEncodersActiveState||P,ki=Ut.MediaProcessor||e(701),Ao=e(706),Ln=Ut.shouldLogMediaProcessorEvents||e(707),Uo=Ut.processPubOptions;return function(Xs){var rr=this;Xs===void 0&&(Xs={});let oi=ae({});const Ds=new k,ea=new Et;let Ji=!1;const mr=nt=>Ds.get(nt),Da=(nt,Je)=>Ds.set(nt,Je);ae(this);const ca=Ue();let Ss=new xt;xo.check()||xo.upgrade();let kr,zs,Vn;const Cs={};let $o,Bs,Zr,Ba,rc,Js,Ra,va,za,xa,Ua=!1,ds,un,yn,En,Sn;const xr={},li={};let At;const en=5e3;let Jt=!1,Cn,On;const Pn=()=>this.session||On||{isConnected(){return!1}},yr=[],Cr=new ki;this.once("publishComplete",nt=>{if(!nt){var Je;Ua=!0,ds=(Je=this.session)!=null&&Je.sessionInfo.p2pEnabled?"P2P":"MANTIS"}}),this.on("sourceStreamIdChanged",nt=>{ds=nt,ea.finishTransitionTo(ds)}),this.on("audioAcquisitionProblem",nt=>{let Je=nt.method;fr("publisher:audioAcquisitionProblem","Event",{didPublishComplete:Ua,method:Je})});function Kr(){return{connectionId:Pn().isConnected()?Pn().connection.connectionId:null,streamId:zs,widgetType:"Publisher"}}const ko=nt=>{const Je=Object.keys(Zn).map(Be=>Zn[Be]),at=ti(Je.indexOf(nt.name)>-1?nt.name:Zn.MEDIA_ERR_ABORTED,nt,pr.UNABLE_TO_PUBLISH);Dt.error(`onStreamAvailableError ${at.name}: ${at.message}`),Zr.set("Failed"),kr&&(kr.destroy(),kr=null);const Se={failureReason:"GetUserMedia",failureCode:pr.UNABLE_TO_PUBLISH,failureMessage:`OT.Publisher failed to access camera/mic: ${at.message}`};Ho("Failure",{},Se),ci.handleJsException({error:at,errorMsg:Se.failureReason,code:Se.failureCode,target:this,analytics:Ss}),this.trigger("publishComplete",at)},Si=nt=>{const Je=v(nt);Je.code=pr.UNABLE_TO_PUBLISH,Dt.error(`OT.Publisher.onScreenSharingError ${Je.message}`),Zr.set("Failed"),Je.message=`Screensharing: ${Je.message}`,this.trigger("publishComplete",Je),Ho("Failure",{},{failureReason:"ScreenSharing",failureMessage:Je.message}),kr&&(kr.destroy(),kr=null)},Ia=nt=>{const Je=v(nt);let at;try{at=window.self!==window.top}catch{}(typeof window!==void 0?window:commonjsGlobal).location.protocol!=="https:"&&(fs?Je.message+=" Note: https:// is required for screen sharing.":Le()&&Rr.env.hostName!=="localhost"&&(Je.message+=` Note: ${Rr.env.name} requires HTTPS for camera and microphone access.`)),at&&!fs&&(Je.message+=" Note: Check that the iframe has the allow attribute for camera and microphone"),Dt.error(Je.message),Zr.set("Failed"),Je.message=`OT.Publisher Access Denied: Permission Denied: ${Je.message}`,Je.code=pr.UNABLE_TO_PUBLISH,kr&&(kr.destroy(),kr=null),Ho("Cancel",{reason:"AccessDenied"}),this.trigger("publishComplete",Je),this.dispatchEvent(new ye(z.ACCESS_DENIED))},Li=nt=>{throw nt instanceof Error||/^\[object .*Error\]$/.test(Object.prototype.toString.call(nt))||(nt=new Error("Unknown error has occurred. Stream is not available.")),nt.name===Zn.USER_MEDIA_ACCESS_DENIED||nt.name===Zn.NOT_SUPPORTED&&nt.originalMessage.match(/Only secure origins/)?Ia(nt):Uo.isScreenSharing?Si(nt):ko(nt),nt},wa=()=>{fr("accessDialog","Opened"),this.dispatchEvent(new ye(z.ACCESS_DIALOG_OPENED,!0))},or=()=>{fr("accessDialog","Closed"),this.dispatchEvent(new ye(z.ACCESS_DIALOG_CLOSED,!1))},As=w(),Ri={};let ua=!1,Zo={},ta=!1,Pi=Uo(Xs,"OT.Publisher",()=>Zr&&Zr.isDestroyed());Pi.on({accessDialogOpened:wa,accessDialogClosed:or});const na=Pi,fs=na.isScreenSharing,Ga=na.isCustomAudioTrack,Fo=na.isCustomVideoTrack,jn=na.shouldAllowAudio,gn=na.properties,ra=na.getUserMedia;Object.defineProperty(this,"loudness",{writable:!1,value:void 0,configurable:!0});function Vs(nt){nt.forEach(Je=>Je())}const Ma=(nt,Je,at)=>nt.addEventListener?(nt.addEventListener(Je,at),()=>nt.removeEventListener(Je,at)):()=>{};(function(){const Je=[];oi.on("streamDestroy",()=>Vs(Je)),oi.on("streamChange",()=>{Vs(Je);const at=Vn.getAudioTracks().map(Se=>Ma(Se,"ended",()=>{ta=!0,this.trigger("audioAcquisitionProblem",{method:"trackEndedEvent"})}));Je.splice(0,Je.length,...at)})}).call(this),function(){const Je=[];oi.on("streamDestroy",()=>Vs(Je)),oi.on("streamChange",()=>{Vs(Je),Ai()||Vn.getTracks().forEach(at=>{at.addEventListener&&(Je.push(Ma(at,"mute",()=>{Pa()})),Je.push(Ma(at,"unmute",()=>{Pa()})))})})}();const Ai=()=>{if(fs)return!0;const Je=["text","detail"].includes(gn.videoContentHint);return Fo&&Je},fr=Xs.logAnalyticsEvent||((nt,Je,at,Se,Be)=>{let Ye=g({action:nt,variation:Je,payload:at},Kr(),Se);Je==="Failure"&&(Ye=g(Zo,Ye)),Zo=C(Ye,"sessionId","connectionId","partnerId"),Ss.logEvent(Ye,Be)}),Oa=()=>{if(!Ln(this.session)){Cr.disableLogging();return}const Je=this.session.apiKey;Cr.enableLogging(Je)},Ho=function(Je,at,Se){at===void 0&&(at={}),Se===void 0&&(Se={}),Se.failureReason!=="Non-fatal"&&(Je==="Attempt"&&(rc=new Date().getTime(),Cn&&(Cn.stop(),Dt.error("_connectivityAttemptPinger should have been cleaned up")),Cn=new Jn(()=>{fr("Publish","Attempting",at,(0,u.default)({},Kr(),Se))},1/5,6)),Je==="Failure"||Je==="Success"||Je==="Cancel"?(Cn?(Cn.stop(),Cn=void 0):Dt.warn(`Received connectivity event: "${Je}" without "Attempt"`),fr("Publish",Je,(0,u.default)({videoInputDevices:Ra,audioInputDevices:Js,videoInputDeviceCount:Ra?Ra.length:void 0,audioInputDeviceCount:Js?Js.length:void 0,selectedVideoInputDeviceId:va,selectedAudioInputDeviceId:za},at),(0,u.default)({attemptDuration:new Date().getTime()-rc},Se))):fr("Publish",Je,at,Se))},la=(nt,Je)=>{fr("ICERestart",nt,Je)},Ja=(nt,Je,at)=>{Je==="Attempt"?(xr[nt]=new Date().getTime(),fr(nt,Je,at)):(Je==="Failure"||Je==="Success")&&fr(nt,Je,at,{attemptDuration:new Date().getTime()-xr[nt]})},ja=function(Je,at){at===void 0&&(at={}),Ja("RoutedToRelayedTransition",Je,at)},Ha=function(Je,at){at===void 0&&(at={}),Ja("RelayedToRoutedTransition",Je,at)},$a=O(()=>{fr("GetStats","Called")}),ic=O(()=>{fr("GetRtcStatsReport","Called")}),Qa=nt=>{let Je=nt.parsedStats,at=nt.simulcastEnabled,Se=nt.remoteConnectionId,Be=nt.peerId,Ye=nt.sourceStreamId;const ht={peerId:Be,widgetType:"Publisher",connectionId:this.session&&this.session.isConnected()?this.session.connection.connectionId:null,streamId:zs,width:kr.width,height:kr.height,audioTrack:Vn&&Vn.getAudioTracks().length>0,hasAudio:ka(),publishAudio:gn.publishAudio,videoTrack:Vn&&Vn.getVideoTracks().length>0,hasVideo:ec(),publishVideo:gn.publishVideo,audioSource:Ga?"Custom":void 0,duration:$o?Math.round((new Date().getTime()-$o.getTime())/1e3):0,remoteConnectionId:Se,scalableVideo:at,sourceStreamId:Qe(Ye)};let Rt=fs&&Fo&&"Screen"||fs&&Xs.videoSource||Fo&&"Custom"||gn.constraints.video&&"Camera"||null;S(Rt)&&(Rt=A(Rt)),ht.videoSource=Rt;const Mt={videoWidth:this.videoWidth(),videoHeight:this.videoHeight()},Ct=g({},ht,Je,Mt);Ss.logQOS(Ct),this.trigger("qos",Ct)},Lr=()=>{var nt,Je;let at=((nt=gn.videoDimensions)==null?void 0:nt.width)||640,Se=((Je=gn.videoDimensions)==null?void 0:Je.height)||480;if(gn.publishVideo){var Be;const Ye=(Be=kr)==null?void 0:Be.video();at=(Ye==null?void 0:Ye.videoWidth())||at,Se=(Ye==null?void 0:Ye.videoHeight())||Se}return{width:at,height:Se}},sr=nt=>{Dt.error("OT.Publisher State Change Failed: ",nt.message),Dt.debug(nt)},Bc=()=>{if(Zr.isDestroyed()){kr&&kr.destroyVideo();return}Dt.debug("OT.Publisher.onLoaded; resolution:",`${this.videoWidth()}x${this.videoHeight()}`),Zr.set("MediaBound"),Ze().catch(Dt.error),kr.loading(this.session?!this.stream:!1),ua=!0},gc=nt=>{const Je=ti(Zn.CONNECT_FAILED,nt,pr.P2P_CONNECTION_FAILED);Je.message=`OT.Publisher PeerConnection Error: ${Je.message}`,Ho("Failure",{},{failureReason:"PeerConnectionError",failureCode:Je.code,failureMessage:Je.message}),Zr.set("Failed"),this.trigger("publishComplete",Je),ci.handleJsException({error:Je,target:this,analytics:Ss})},qa=()=>{Vn&&(oi.emit("streamDestroy"),Kn.MediaStreamTrack&&Kn.MediaStreamTrack.prototype.stop?Vn.getTracks().forEach(nt=>nt.stop()):Vn.stop())},ba=()=>{const nt=H.isiOS&&H.iOSVersion>=15&&H.iOSVersion<15.2,Je=Vn.getVideoTracks()[0];if(!nt||!Je)return;const at=()=>{!document.hidden&&kr&&kr.rebindSrcObject()};document.addEventListener("visibilitychange",at)},_s=()=>{const nt=H.isiOS&&H.iOSVersion>=13.3,Je=Vn.getAudioTracks()[0];nt&&Je&&(Je.onmute=()=>Nc(Je),Je.onunmute=()=>Zc(Je))},dt=function(){var nt=(0,c.default)(a.default.mark(function Je(){var at;return a.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(at={muted:!0},kr){Be.next=3;break}throw new Error("Cannot bind video after widget view has been destroyed");case 3:return Be.abrupt("return",kr.bindVideo(Vn,at));case 4:case"end":return Be.stop()}},Je)}));return function(){return nt.apply(this,arguments)}}(),Ce=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se;return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Dt.debug("OT.Publisher.onStreamAvailable"),Zr.set("BindingMedia"),gn.videoContentHint!==void 0&&It(at,gn.videoContentHint),qa(),Vn=at,!gn.videoFilter){Ye.next=14;break}return Ye.prev=6,Ye.next=9,rr.applyVideoFilter(gn.videoFilter);case 9:Ye.next=14;break;case 11:Ye.prev=11,Ye.t0=Ye.catch(6),Dt.error(`Error applying video filter: ${Ye.t0}`);case 14:oi.emit("streamChange"),_s(),ba(),Se=(ht,Rt)=>{let Mt;return ht.forEach(Ct=>{if(Ct.deviceId)Mt=Ct.deviceId.toString();else if(Ct.label&&Rt){const cn=b(Rt,vr=>vr.label===Ct.label);cn&&(Mt=cn.deviceId)}}),Mt},va=Se(Vn.getVideoTracks(),Ra),za=Se(Vn.getAudioTracks(),Js),Bs=new Ii(Vn,!gn.publishAudio),cc(),lc(),rr.accessAllowed=!0,rr.dispatchEvent(new ye(z.ACCESS_ALLOWED,!1));case 25:case"end":return Ye.stop()}},Je,null,[[6,11]])}));return function(at){return nt.apply(this,arguments)}}(),ct=nt=>{Dt.error("OT.Publisher.onPublishingTimeout");let Je,at;ta?(Je=Zn.CHROME_MICROPHONE_ACQUISITION_ERROR,at="Unable to publish because your browser failed to get access to your microphone. You may need to fully quit and restart your browser to get it to work. See https://bugs.chromium.org/p/webrtc/issues/detail?id=4799 for more details."):(Je=Zn.TIMEOUT,at="Could not publish in a reasonable amount of time");const Se={failureReason:"ICEWorkflow",failureCode:pr.UNABLE_TO_PUBLISH,failureMessage:"OT.Publisher failed to publish in a reasonable amount of time (timeout)"};Ho("Failure",{},Se),ci.handleJsException({errorMsg:Se.failureReason,code:Se.failureCode,target:this,analytics:Ss}),nt.isConnected()&&this.streamId&&nt._.streamDestroy(this.streamId),this.disconnect(),this.session=null,Zr.isDestroyed()||Zr.set("MediaBound"),this.trigger("publishComplete",ti(Je,new Error(at),pr.UNABLE_TO_PUBLISH))},Lt=nt=>{const Je=ti(Zn.MEDIA_ERR_DECODE,nt,pr.UNABLE_TO_PUBLISH);Je.message=`OT.Publisher while playing stream: ${Je.message}`,Dt.error("OT.Publisher.onVideoError:",Je),fr("stream",null,{reason:Je.message});const at=Zr.isAttemptingToPublish();Zr.set("Failed"),at?this.trigger("publishComplete",Je):this.trigger("error",Je.message),ci.handleJsException({error:Je,target:this,analytics:Ss})};this._setWebRTCStream=nt=>{Vn=nt},this._setCurrentVideoFilter=nt=>{js=nt},this._getCurrentVideoFilter=()=>js,this._getMediaProcessor=()=>Cr,this._removePeerConnection=nt=>{if(!nt)return;const Je=mr(nt),at=Je.peerConnectionId;delete Ri[at],nt.destroy()},this._removeSubscriber=nt=>{this.session.sessionInfo.isAdaptiveEnabled&&ds==="P2P"&&this._.startRelayedToRoutedTransition(),da(nt).then(at=>{at.forEach(Se=>this._removePeerConnection(Se))})};const Ft=nt=>{const Je=mr(nt),at=Je.remoteSubscriberId,Se=Je.peerConnectionId;Dt.debug("Subscriber has been disconnected from the Publisher's PeerConnection"),fr("disconnect","PeerConnection",{subscriberConnection:Se}),this._removeSubscriber(at)},Nn=function(){var nt=(0,c.default)(a.default.mark(function Je(at,Se){var Be,Ye,ht,Rt,Mt,Ct,cn,vr,Mn,Rn,gi;return a.default.wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(Be=Se.reason,Ye=Se.prefix,ht=rr.session&&rr.session.sessionInfo,!(Ye==="ICEWorkflow"&&ht&&ht.reconnection&&ua)){$n.next=5;break}return Dt.debug("Ignoring peer connection failure due to possibility of reconnection."),$n.abrupt("return");case 5:return Rt=mr(at)||{},Mt=Rt.remoteConnectionId,Ct=Mt===void 0?"(not found)":Mt,cn=Rt.peerConnectionId,vr=Bn(void 0,Be,Ye,Ct,"Publisher"),Mn={hasRelayCandidates:at&&at.hasRelayCandidates()},Rn={failureReason:Ye||"PeerConnectionError",failureCode:vr.code,failureMessage:vr.message},Zr.isPublishing()?Rn.reason="Non-fatal":rr.trigger("publishComplete",vr),Ho("Failure",Mn,Rn),ci.handleJsException({errorMsg:`OT.Publisher PeerConnection Error: ${Be}`,code:vr.code,target:rr,analytics:Ss}),$n.next=14,Ri[cn];case 14:gi=$n.sent,gi.destroy(),delete Ri[cn];case 17:case"end":return $n.stop()}},Je)}));return function(at,Se){return nt.apply(this,arguments)}}(),Fn=nt=>this.session.sessionInfo.isAdaptiveEnabled&&nt.getSourceStreamId()==="P2P",Hn=nt=>{const Je=mr(nt),at=Je.remoteConnectionId;la("Success",{remoteConnectionId:at})},Un=nt=>{const Je=mr(nt),at=Je.remoteConnectionId;la("Failure",{reason:"ICEWorkflow",message:"OT.Publisher PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall.",remoteConnectionId:at})},Qo=function(){var nt=(0,c.default)(a.default.mark(function Je(at,Se){var Be,Ye,ht,Rt,Mt,Ct,cn;return a.default.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:if(Be=rr.session.sessionInfo.isAdaptiveEnabled,Ye=Se.getSourceStreamId(),li[Ye]=at,at==="disconnected"&&setTimeout(()=>{const Rn=rr.session._.isSocketReconnecting,os=rr.session._.getSocket().is("connected")&&!Rn();if(li[Ye]==="disconnected"&&os){const $n=mr(Se),Go=$n.remoteConnectionId;la("Attempt",{remoteConnectionId:Go}),Se.iceRestart()}},2e3),at!=="connected"){Mn.next=14;break}if(clearTimeout(At),!Be){Mn.next=14;break}return Mn.next=9,Sa();case 9:return ht=Mn.sent.iceConnectionStateIsConnected(),Mn.next=12,ha();case 12:Rt=Mn.sent.iceConnectionStateIsConnected(),ht&&Rt&&yc();case 14:if(at!=="failed"){Mn.next=21;break}if(Mt=rr.session._.isSocketReconnecting,Ct=rr.session._.getSocket(),cn=Ct.is("connected")&&!Mt(),cn){Mn.next=20;break}return Mn.abrupt("return");case 20:Be&&Ye===ds&&Ye==="P2P"?rr._.startRelayedToRoutedTransition():At=setTimeout(()=>{rr.session._.streamDestroy(rr.streamId,Ye)},en);case 21:case"end":return Mn.stop()}},Je)}));return function(at,Se){return nt.apply(this,arguments)}}(),cr=nt=>{nt.setP2PMaxBitrate(),nt.startEncryption(this.session.connection.id),Fn(nt)&&ja("Success")},_i=nt=>{if(Zr.current!=="PublishingToSession")throw new Error("assignStream called when publisher is not successfully publishing");ca.releaseAll(),this.stream=nt,this.stream.on("destroyed",this.disconnect,this),ca.add(()=>{this.stream&&this.stream.off("destroyed",this.disconnect,this)}),Zr.set("Publishing"),kr.loading(!ua),$o=new Date,this.dispatchEvent(new dr.StreamEvent("streamCreated",nt,null,!1)),Ho("Success"),this.trigger("publishComplete",null,this)},Va=nt=>{let Je=nt.peerConnectionId,at=nt.send,Se=nt.log,Be=nt.logQoS,Ye=nt.sourceStreamId;if(fa(Je))return n.reject(new Error("PeerConnection already exists"));const ht=tn({isChromiumEdge:Rr.env.isChromiumEdge,browserName:Rr.env.name,isScreenSharing:fs,isCustomVideoTrack:Fo,sessionInfo:this.session.sessionInfo,constraints:gn.constraints,videoDimensions:Lr(),capableSimulcastScreenshare:gn.capableSimulcastScreenshare});return Ri[Je]=n.all([this.session._.getIceConfig(),this.session._.getVideoCodecsCompatible(Vn)]).then(Rt=>{let Mt=Rt[0],Ct=Rt[1],cn=Vn;if(!Ct){cn=Vn.clone();const Mn=cn.getVideoTracks(),Rn=Mn[0];Rn&&(Rn.stop(),cn.removeTrack(Rn))}const vr=new Vi({iceConfig:Mt,sendMessage:(Mn,Rn)=>{Mn==="offer"&&this.trigger("connected"),at(Mn,Rn)},webRTCStream:cn,channels:gn.channels,capableSimulcastStreams:ht,overrideSimulcastEnabled:Xs._enableSimulcast,logAnalyticsEvent:Se,offerOverrides:{enableDtx:gn.enableDtx,enableStereo:gn.enableStereo,audioBitrate:gn.audioBitrate,priorityVideoCodec:gn._priorityVideoCodec||this.session.sessionInfo.priorityVideoCodec,codecFlags:gn._codecFlags||this.session._.getCodecFlags()},answerOverrides:this.session.sessionInfo.p2pEnabled?void 0:{audioBitrate:gn.audioBitrate},sourceStreamId:Ye,isP2pEnabled:this.session.sessionInfo.p2pEnabled,sessionId:this.session.id,keyStore:this.session.keyStore,sFrameClientStore:this.session.sFrameClientStore,isE2ee:this.session._.isE2ee()});return vr.on({disconnected:()=>Ft(vr),error:Mn=>{let Rn=Mn.reason,gi=Mn.prefix;return Nn(vr,{reason:Rn,prefix:gi})},qos:Be,iceRestartSuccess:()=>Hn(vr),iceRestartFailure:()=>Un(vr),iceConnectionStateChange:Mn=>Qo(Mn,vr),audioAcquisitionProblem:()=>{ta=!0,this.trigger("audioAcquisitionProblem",{method:"getStats"})}}),vr.once("connected",()=>cr(vr)),new n((Mn,Rn)=>{const gi=os=>{Rn(os)};vr.once("error",gi),vr.init(Ba,os=>{if(os)return Rn(os);vr.off("error",gi),Mn(vr)})})}),fa(Je)},wi=()=>n.all(Object.keys(Ri).map(fa)),da=nt=>wi().then(Je=>Je.filter(at=>mr(at).remoteSubscriberId===nt)),fa=nt=>Ri[nt],hs=nt=>{const Je=Object.keys(Ri).find(at=>at.endsWith(`~${nt}`));return Ri[Je]},Sa=()=>hs("MANTIS"),ha=()=>hs("P2P");let qi=mn(this,{name:gn.name,publishAudio:gn.publishAudio,publishVideo:gn.publishVideo,audioSource:gn.audioSource,showControls:gn.showControls,shouldAllowAudio:jn,logAnalyticsEvent:fr});const Ca=()=>{this.off("publishComplete",Pa),qi&&qi.reset(),ca.releaseAll(),this.disconnect(),Bs=null,qa(),Vn=null,kr&&(kr.destroy(),kr=null),this.session&&this._.unpublishFromSession(this.session,"reset"),Cr.getVideoFilter()&&jc(),this.id=null,this.stream=null,ua=!1,this.session=null,Zr.isDestroyed()||Zr.set("NotPublishing")},ec=()=>{if(!Vn||Vn.getVideoTracks().length===0)return!1;const Je=["text","detail"].includes(gn.videoContentHint),at=Fo&&Je,Se=Rr.env.isChromium&&(fs||at);return Vn.getVideoTracks().reduce((Be,Ye)=>Be&&(!Ye.muted||!!Se)&&Ye.enabled&&Ye.readyState!=="ended",gn.publishVideo)},ka=()=>!Vn||Vn.getAudioTracks().length===0?!1:Vn.getAudioTracks().length>0&&Vn.getAudioTracks().reduce((nt,Je)=>nt&&!Je.muted&&Je.enabled&&Je.readyState!=="ended",gn.publishAudio),Pa=nt=>{if(kr&&(kr.audioOnly(!ec()),kr.showPoster(!ec())),qi&&qi.setAudioOnly(!ec()&&ka()),this.stream){let Je;Jt&&(Je="low",Jt=!1),this.stream.setChannelActiveState("audio",ka(),nt),this.stream.setChannelActiveState("video",ec(),nt,Je)}else this.off("publishComplete",Pa),this.once("publishComplete",Pa)},oc=(nt,Je)=>{let at=!1;if(typeof nt=="function"?Je=nt:at=nt==="rtcStatsReport",at?ic():$a(),at&&!We){const Se=pr.GET_RTC_STATS_REPORT_NOT_SUPPORTED;Je(ti(Zn.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error(ci.getTitleByCode(Se)),Se));return}wi().then(Se=>{if(Se.length===0){const Be=pr.PEER_CONNECTION_NOT_CONNECTED;throw ti(Zn.PEER_CONNECTION_NOT_CONNECTED,new Error(ci.getTitleByCode(Be)),Be)}return Se}).then(Se=>this.session.sessionInfo.isAdaptiveEnabled?Se.filter(Ye=>Ye.getSourceStreamId()===ds):Se).then(Se=>n.all(Se.map(Be=>j(at?Be.getRtcStatsReport.bind(Be):Be.getStats.bind(Be))().then(Ye=>({pc:Be,stats:Ye}))))).then(Se=>{const Be=$o?$o.getTime():Date.now(),Ye=Se.map(ht=>{let Rt=ht.pc,Mt=ht.stats;const Ct=mr(Rt),cn=Ct.remoteConnectionId,vr=Ct.remoteSubscriberId;return g(cn.match(/^symphony\./)?{}:{subscriberId:vr,connectionId:cn},at?{rtcStatsReport:Mt}:{stats:_.normalizeStats(Mt,!1,Be)})});Je(null,Ye)}).catch(Je)},Wi=nt=>oc(nt),Uc=nt=>oc("rtcStatsReport",nt),sc=(nt,Je)=>{const at={name:gn.name||"",streamId:this.streamId,subscriberAudioFallbackEnabled:gn.subscriberAudioFallbackEnabled,channels:yr,minBitrate:gn.minVideoBitrate,sourceStreamId:nt,e2ee:this.session._.isE2ee(),publisherAudioFallbackEnabled:gn.publisherAudioFallbackEnabled};this.session._.streamCreate(at,Je)},Cc=nt=>{Ji||(Ji=!0,Vn.getAudioTracks().forEach(function(){var Je=(0,c.default)(a.default.mark(function at(Se){var Be;return a.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return Be=Se.clone(),Be.enabled=!1,ht.prev=2,ht.next=5,nt.findAndReplaceTrack(Se,Be);case 5:ht.next=10;break;case 7:return ht.prev=7,ht.t0=ht.catch(2),ht.abrupt("return");case 10:Cs[Se.id]=Be;case 11:case"end":return ht.stop()}},at,null,[[2,7]])}));return function(at){return Je.apply(this,arguments)}}()))},Us=nt=>{Vn.getAudioTracks().forEach(function(){var Je=(0,c.default)(a.default.mark(function at(Se){return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.prev=0,Ye.next=3,nt.findAndReplaceTrack(Cs[Se.id],Se);case 3:Ye.next=8;break;case 5:return Ye.prev=5,Ye.t0=Ye.catch(0),Ye.abrupt("return");case 8:delete Cs[Se.id];case 9:case"end":return Ye.stop()}},at,null,[[0,5]])}));return function(at){return Je.apply(this,arguments)}}()),Ji=!1},yc=function(){var nt=(0,c.default)(a.default.mark(function Je(){var at;return a.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return yn=!1,Be.next=3,Sa();case 3:if(at=Be.sent,!at){Be.next=17;break}return rr.trigger("sourceStreamIdChanged","P2P"),Be.next=8,me(pt);case 8:if(!yn){Be.next=11;break}return Dt.debug("Cancelling stop sending RTP to MANTIS."),Be.abrupt("return");case 11:return Cc(at),Be.next=14,at.changeMediaDirectionToInactive();case 14:if(!(Rr.env.isFirefox&&Rr.env.version<96)){Be.next=17;break}return Be.next=17,tc();case 17:case"end":return Be.stop()}},Je)}));return function(){return nt.apply(this,arguments)}}(),uc=function(){var nt=(0,c.default)(a.default.mark(function Je(){var at;return a.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return yn=!0,Be.next=3,Sa();case 3:if(at=Be.sent,!at){Be.next=10;break}return Us(at),Be.next=8,at.changeMediaDirectionToRecvOnly();case 8:un&&clearTimeout(un),rr.trigger("sourceStreamIdChanged","MANTIS");case 10:case"end":return Be.stop()}},Je)}));return function(){return nt.apply(this,arguments)}}(),tc=function(){var nt=(0,c.default)(a.default.mark(function Je(){var at;return a.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,Sa();case 2:at=Be.sent,at&&(un=setTimeout((0,c.default)(a.default.mark(function Ye(){return a.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if(ds!=="P2P"){Rt.next=9;break}return Rt.next=3,at.changeMediaDirectionToRecvOnly();case 3:return Rt.next=5,me(ft);case 5:return Rt.next=7,at.changeMediaDirectionToInactive();case 7:return Rt.next=9,tc();case 9:case"end":return Rt.stop()}},Ye)})),et));case 4:case"end":return Be.stop()}},Je)}));return function(){return nt.apply(this,arguments)}}(),Ec=()=>{ja("Attempt");const nt=at=>{const Se=bt(at);this.trigger("streamCreateForP2PComplete",Se),ja("Failure",{reason:Se.message})};if(!this.session){ja("Failure",{reason:"Not connected to the session."});return}const Je=setTimeout(()=>{ja("Failure",{reason:"Timeout"})},ui);this.once("streamCreateForP2PComplete",()=>{clearTimeout(Je)}),Dt.debug(`streamCreateWithSource: send a message to RUMOR for creating the stream with the sourceStreaId P2P and stream ${this.streamId}`),sc("P2P",at=>{at?nt(at):this.trigger("streamCreateForP2PComplete")})},du=function(){var nt=(0,c.default)(a.default.mark(function Je(){return a.default.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:if(ds==="P2P"){Se.next=2;break}return Se.abrupt("return");case 2:if(Ha("Attempt"),rr.session){Se.next=6;break}return Ha("Failure",{reason:"Not connected to the session."}),Se.abrupt("return");case 6:if(rr.streamId){Se.next=9;break}return Ha("Failure",{reason:"No streamId available"}),Se.abrupt("return");case 9:return Se.next=11,uc();case 11:return rr.session._.streamDestroy(rr.streamId,"P2P"),Se.t0=rr,Se.next=15,ha();case 15:Se.t1=Se.sent,Se.t0._removePeerConnection.call(Se.t0,Se.t1),Ha("Success"),rr.trigger("streamDestroyForP2PComplete");case 19:case"end":return Se.stop()}},Je)}));return function(){return nt.apply(this,arguments)}}();this.publish=nt=>(Dt.debug("OT.Publisher: publish"),(Zr.isAttemptingToPublish()||Zr.isPublishing())&&Ca(),Zr.set("GetUserMedia"),gn.style&&this.setStyle(gn.style,null,!0),gn.classNames="OT_root OT_publisher",er.onLoad(()=>{Dt.debug("OT.Publisher: publish: environment loaded"),kr=new ga(nt,(0,u.default)({},gn,{widgetType:"publisher"})),jn&&Ke({publisher:this,widgetView:kr}),kr.on("error",Lt),this.id=kr.domId(),this.element=kr.domElement,this.element&&qi&&qi.init(kr),kr.on("videoDimensionsChanged",(Je,at)=>{gn.publishVideo&&(this.stream&&this.stream.setVideoDimensions(at.width,at.height),this.dispatchEvent(new dr.VideoDimensionsChangedEvent(this,Je,at)))}),kr.on("mediaStopped",Je=>{const at=new dr.MediaStoppedEvent(this,Je);if(this.dispatchEvent(at),!at.isDefaultPrevented()){if(Je){const Se=String(Je.kind).toLowerCase();Se==="audio"?lc():Se==="video"?cc():Dt.warn(`Track with invalid kind has ended: ${Je.kind}`);return}this.session?this._.unpublishFromSession(this.session,"mediaStopped"):this.destroy("mediaStopped")}}),kr.on("videoElementCreated",Je=>{const at=new dr.VideoElementCreatedEvent(Je);this.dispatchEvent(at)}),ra().catch(Li).then(function(){var Je=(0,c.default)(a.default.mark(function at(Se){var Be;return a.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return Js=Pi.audioDevices,Ra=Pi.videoDevices,Be=!!gn.videoFilter,Be&&(Es=ut(Se,Ra)),ht.next=6,Ce(Se);case 6:return gn.publishVideo||rr._toggleVideo(gn.publishVideo,Lr()),!fs&&!Fo&&!Be&&(Es=ut(Se,Ra),gn.publishVideo&&fc(Es)),ht.abrupt("return",dt().catch(Rt=>{if(!(Rt instanceof W))throw Rt}).then(()=>{Bc(),Zr.isDestroyed()||(rr.trigger("initSuccess"),rr.trigger("loaded",rr))},Rt=>{Dt.error(`OT.Publisher.publish failed to bind video: ${Rt}`),gc(Rt)}));case 9:case"end":return ht.stop()}},at)}));return function(at){return Je.apply(this,arguments)}}())}),this),this._setScalableValues=function(){var nt=(0,c.default)(a.default.mark(function Je(at,Se){var Be,Ye,ht;return a.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Mt.next=2,wi().then(Ct=>Ct[0].getSenders().filter(cn=>cn.track.kind==="video"));case 2:return Be=Mt.sent,Ye=Be[0],ht=Ye.getParameters(),ht.encodings.forEach((Ct,cn)=>{Ct[at]=Se[cn]}),Mt.next=8,Ye.setParameters(ht);case 8:case"end":return Mt.stop()}},Je)}));return function(Je,at){return nt.apply(this,arguments)}}(),this._setScalableFramerates=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se;return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Se=Oc(at),!(Se&&tu(Se))){Ye.next=4;break}return Ye.next=4,rr._setScalableValues("maxFramerate",Se);case 4:case"end":return Ye.stop()}},Je)}));return function(Je){return nt.apply(this,arguments)}}(),this._setScalableVideoLayers=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se;return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(Se=Oc(at),!(Se&&nu(Se))){Ye.next=4;break}return Ye.next=4,rr._setScalableValues("scaleResolutionDownBy",Se);case 4:case"end":return Ye.stop()}},Je)}));return function(Je){return nt.apply(this,arguments)}}();const tu=nt=>{let Je=0;return nt.every(at=>at!==15&&at!==30||at<Je?!1:(Je=at,!0))},nu=nt=>{let Je=17;return nt.every(at=>at<1||at>=Je?!1:(Je=at,!0))},Oc=nt=>{let Je;if(typeof nt!="string")return Je;const at=nt.split(":");return at.length===0||at.length>3||!at.every(Se=>!isNaN(Se))||(Je=at.map(Se=>parseInt(Se,10)).reverse()),Je},ac=nt=>Vn&&Vn[`get${V(nt)}Tracks`]().length>0&&Vn[`get${V(nt)}Tracks`]().every(Je=>Je.readyState!=="ended"),lc=nt=>{const Je=ac("audio")&&gn.publishAudio;qi&&qi.setMuted(!Je),Bs&&Bs.muted(!Je),Sn&&Sn.originalTrack&&(Sn.originalTrack.enabled=Je),Pa(nt)};this.publishAudio=nt=>{fr("publishAudio","Attempt",{publishAudio:nt}),gn.publishAudio=nt;try{lc(),fr("publishAudio","Success",{publishAudio:nt})}catch(Je){fr("publishAudio","Failure",{message:Je.message})}return this},this.publishCaptions=nt=>{this.stream.setChannelActiveState("data",nt)};let Tc,nc=!1;const cc=()=>{const nt=ac("video")&&gn.publishVideo;if(H.name==="Chrome"&&H.version>=69&&(0,c.default)(a.default.mark(function Je(){var at,Se;return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Tc&&Tc.cancel(),Tc=new Y,at=Tc,Ye.next=5,wi();case 5:Se=Ye.sent,at.isCanceled()||Se.forEach(ht=>{ya(ht,nt)});case 7:case"end":return Ye.stop()}},Je)}))(),Fo&&Cr){const Je=Cr.getOriginalVideoTrack();Je&&(Je.enabled=nt)}if(Fo&&En){const Je=En.originalTrack;Je&&(Je.enabled=nt)}Vn&&Vn.getVideoTracks().forEach(Je=>{Je.enabled=nt,Je.isCreatedCanvas&&(Je.enabled=!1)}),Pa()},jc=function(){var nt=(0,c.default)(a.default.mark(function Je(){var at;return a.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return at=Cr.getOriginalVideoTrack(),Be.prev=1,Be.next=4,Cr.destroy();case 4:Be.next=9;break;case 6:Be.prev=6,Be.t0=Be.catch(1),Dt.warn(`Error cleaning up mediaProcessor: ${Be.t0}`);case 9:at.stop();case 10:case"end":return Be.stop()}},Je,null,[[1,6]])}));return function(){return nt.apply(this,arguments)}}(),Ac=nt=>!js&&!En&&nt===Kc(),fu=(nt,Je)=>js||En?!0:nt?Es!==Je:Je!==void 0;let Es,js;this._toggleVideo=De(function(){var nt=(0,c.default)(a.default.mark(function Je(at,Se){var Be,Ye,ht,Rt,Mt,Ct,cn,vr;return a.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:if(!(fs||Fo||nc)){Rn.next=2;break}return Rn.abrupt("return");case 2:return Rn.next=4,kc();case 4:if(Ye=Rn.sent,ht=Vc(),ht){Rn.next=8;break}throw ti(Zn.NOT_SUPPORTED,new Error("Publisher._toggleVideo cannot toggleVideo when you have no video source."));case 8:if(Rt=(Be=Ye.find(gi=>gi.label===ht.label))==null?void 0:Be.deviceId,fu(at,Rt)){Rn.next=11;break}return Rn.abrupt("return");case 11:if(ht.readyState!=="ended"){Rn.next=14;break}return nc=!0,Rn.abrupt("return");case 14:if(at&&Rr.env.isAndroid&&Rr.env.isChrome&&ht&&ht.stop&&ht.stop(),at){Rn.next=31;break}Rn.prev=16,Mt=Ee(Se),Rn.next=23;break;case 20:return Rn.prev=20,Rn.t0=Rn.catch(16),Rn.abrupt("return");case 23:if(Rt&&(Es=Rt),fc(Mt.label),Ct=Cr.getVideoFilter(),!Ct){Rn.next=30;break}return js=Ct,Rn.next=30,jc();case 30:En&&(En.destroy(),En.stopOriginalTrack());case 31:if(!(Es&&Ye.findIndex(gi=>gi.deviceId===Es)===-1)){Rn.next=33;break}throw ti(Zn.NO_DEVICES_FOUND,new Error("Previous device no longer available - deviceId not found"));case 33:if(oi.emit("streamDestroy"),!at){Rn.next=64;break}if(!Ac(Es)){Rn.next=37;break}return Rn.abrupt("return");case 37:return Rn.prev=37,Rn.next=40,xc(Es);case 40:Mt=Rn.sent,Rn.next=47;break;case 43:throw Rn.prev=43,Rn.t1=Rn.catch(37),Dt.error(`Error getting new track for current device(${Es}): ${Rn.t1}`),Rn.t1;case 47:if(Mt){Rn.next=50;break}return Dt.error("Failed to enable video. It was not possible to get a new track from the camera"),Rn.abrupt("return");case 50:if(!js){Rn.next=59;break}return cn=Cr.getOriginalVideoTrack(),Rn.next=54,Cr.setVideoFilter(js);case 54:return Rn.next=56,Cr.setMediaStream(Vn);case 56:return Rn.next=58,Cr.setVideoTrack(Mt);case 58:Mt=Rn.sent;case 59:if(!En){Rn.next=64;break}return cn=En.originalTrack,Rn.next=63,En.setTrack(Mt);case 63:Mt=Rn.sent;case 64:return Rn.prev=64,Rn.next=67,dc(ht,Mt);case 67:(vr=cn)==null||vr.stop(),Rn.next=73;break;case 70:throw Rn.prev=70,Rn.t2=Rn.catch(64),Rn.t2;case 73:case"end":return Rn.stop()}},Je,null,[[16,20],[37,43],[64,70]])}));return function(Je,at){return nt.apply(this,arguments)}}());const Hc=()=>{var nt,Je;Rc.reset(),(nt=qi)==null||nt.videoDisabledIndicator.disableVideo(!1),(Je=qi)==null||Je.videoDisabledIndicator.setWarning(!1)},hu=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be,Ye;return a.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if((Se=qi)==null||Se.videoDisabledIndicator.disableVideo(!1),(Be=qi)==null||Be.videoDisabledIndicator.setWarning(!1),!gn.publishVideo){Rt.next=8;break}return Rt.next=5,wi();case 5:Ye=Rt.sent,Ye.forEach(Mt=>{ya(Mt,!0)}),rr.stream.setChannelActiveState("video",!0,"auto","low");case 8:at===$t.SUSPENDED_VIDEO?rr.trigger("videoEnabled"):rr.trigger("videoDisableWarningLifted");case 9:case"end":return Rt.stop()}},Je)}));return function(at){return nt.apply(this,arguments)}}(),Yc=()=>{if(gn.publishVideo){var nt;(nt=qi)==null||nt.videoDisabledIndicator.setWarning(!0),this.stream.setChannelActiveState("video",!0,"auto","medium")}this.trigger("videoDisableWarning")},ru=function(){var nt=(0,c.default)(a.default.mark(function Je(){var at,Se;return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(!gn.publishVideo){Ye.next=7;break}return(at=qi)==null||at.videoDisabledIndicator.disableVideo(!0),Ye.next=4,wi();case 4:Se=Ye.sent,Se.forEach(ht=>{ya(ht,!1)}),rr.stream.setChannelActiveState("video",!1,"auto","critical");case 7:rr.trigger("videoDisabled");case 8:case"end":return Ye.stop()}},Je)}));return function(){return nt.apply(this,arguments)}}();let Rc;if(gn.publisherAudioFallbackEnabled){Rc=new Wt;const nt={[$t.ACTIVE_VIDEO]:hu,[$t.ACTIVE_VIDEO_WITH_WARNING]:Yc,[$t.SUSPENDED_VIDEO]:ru};Rc.on("stateChange",Je=>{let at=Je.previousState,Se=Je.state;try{nt[Se](at)}catch(Be){throw Dt.error(`Audio fallback error: ${Be}`),Be}})}this.publishVideo=nt=>{if(gn.publishVideo===nt)return this;fr("publishVideo","Attempt",{publishVideo:nt});const Je=Lr();gn.publishVideo=nt,gn.publisherAudioFallbackEnabled&&(Hc(),Jt=!0);try{this._toggleVideo(gn.publishVideo,Je),cc(),fr("publishVideo","Success",{publishVideo:nt})}catch(at){fr("publishVideo","Failure",{message:at.message})}return this},this.setVideoContentHint=nt=>It(Vn,nt),this.getVideoContentHint=()=>Ge(Vn),this.destroy=function(nt,Je){return Zr.isAttemptingToPublish()&&this.session&&Ho("Cancel",{reason:"destroy"}),Zr.isDestroyed()?this:(Zr.set("Destroyed"),Ca(),Pi&&(Pi.off(),Pi=null),qi&&(qi.destroy(),qi=null),oi&&(oi.off(),oi=null),Je!==!0&&this.dispatchEvent(new dr.DestroyedEvent(z.PUBLISHER_DESTROYED,this,nt)),this.off(),En&&(En.destroy(),En.stopOriginalTrack()),Sn&&(Sn.destroy(),Sn.stopOriginalTrack()),this)},this.disconnect=()=>{Object.keys(Ri).forEach(nt=>{const Je=fa(nt);delete Ri[nt],Je.then(at=>this._removePeerConnection(at))}),yr.length=0},this.processMessage=(nt,Je,at)=>{const Se=l(at,"params.subscriber",Je).replace(/^INVALID-STREAM$/,Je),Be=l(at,"content.peerId"),Ye=l(at,"content.sourceStreamId","MANTIS"),ht=`${Se}~${Be}~${Ye}`;Dt.debug(`OT.Publisher.processMessage: Received ${nt} from ${Je} for ${ht}`),Dt.debug(at);const Rt=fa(ht),Mt=()=>{const cn=mi({socket:this.session._.getSocket(),uri:at.uri,content:{peerId:Be,sourceStreamId:Ye}});Va({peerConnectionId:ht,send:cn,log:function(gi,os,$n,Go,hc){Go===void 0&&(Go={});const bc=(0,u.default)({peerId:Be,sourceStreamId:Qe(Ye)},Go);return fr(gi,os,$n,bc,hc)},logQoS:Rn=>{Ye===ds&&Qa((0,u.default)({},Rn,{peerId:Be,remoteConnectionId:Je,sourceStreamId:Ye}))},sourceStreamId:Ye}).then(Rn=>(Da(Rn,{remoteConnectionId:Je,remoteSubscriberId:Se,peerId:Be,sourceStreamId:Ye,peerConnectionId:ht}),Rn.processMessage(nt,at),null)).catch(Rn=>{Dt.error("OT.Publisher failed to create a peerConnection",Rn)})},Ct=this.session.sessionInfo.isAdaptiveEnabled;switch(nt){case"unsubscribe":this._removeSubscriber(Se);break;default:if(Rt)Rt.then(cn=>cn.processMessage(nt,at));else{if(Ct&&ha())return;Mt()}break}},this.getImgData=function(){if(!ua)return Dt.error("OT.Publisher.getImgData: Cannot getImgData before the Publisher is publishing."),null;const nt=kr&&kr.video();return nt?nt.imgData():null};const pu=nt=>{qa(),Vn=nt,oi.emit("streamChange"),Bs=new Ii(Vn,!gn.publishAudio)},mu=nt=>{nt.getSenders().forEach(Je=>{if(Je.track.kind==="audio"&&Vn.getAudioTracks().length)return Je.replaceTrack(Vn.getAudioTracks()[0]);if(Je.track.kind==="video"&&Vn.getVideoTracks().length)return Je.replaceTrack(Vn.getVideoTracks()[0])})},gu=function(Je){return Je===void 0&&(Je=mu),wi().then(at=>{const Se=[];return at.map(Je),n.all(Se)})};{let nt=0;const Je=function(){var at=(0,c.default)(a.default.mark(function Se(){var Be,Ye,ht,Rt,Mt;return a.default.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(!(Rr.env.isLegacyEdge||!Kn.RTCRtpSender||typeof Kn.RTCRtpSender.prototype.replaceTrack!="function")){cn.next=2;break}throw ti(Zn.UNSUPPORTED_BROWSER,new Error("Publisher#cycleVideo is not supported in your browser."),pr.UNABLE_TO_PUBLISH);case 2:if(!(Fo||fs)){cn.next=4;break}throw ti(Zn.NOT_SUPPORTED,new Error("Publisher#cycleVideo: The publisher is not using a camera video source"));case 4:if(Be=Vc(),Be){cn.next=7;break}throw ti(Zn.NOT_SUPPORTED,new Error("Publisher#cycleVideo cannot cycleVideo when you have no video source."));case 7:return nt+=1,cn.next=10,kc();case 10:if(Ye=cn.sent,ht=Ye.filter(vr=>vr.deviceId!==Es).length>0,ht){cn.next=14;break}return cn.abrupt("return",Es);case 14:for(;Ye[nt%Ye.length].deviceId===Es;)nt+=1;return oi.emit("streamDestroy"),Rt=Ye[nt%Ye.length],Mt=Rt.deviceId,cn.next=20,Jc(Mt);case 20:return cn.abrupt("return",Es);case 21:case"end":return cn.stop()}},Se)}));return function(){return at.apply(this,arguments)}}();this.cycleVideo=De((0,c.default)(a.default.mark(function at(){var Se;return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.prev=0,Ye.next=3,Je();case 3:Se=Ye.sent,Ye.next=10;break;case 6:throw Ye.prev=6,Ye.t0=Ye.catch(0),Dt.error(`Publisher#cycleVideo: could not cycle video: ${Ye.t0}`),Ye.t0;case 10:return Ye.abrupt("return",{deviceId:Se});case 11:case"end":return Ye.stop()}},at,null,[[0,6]])})))}const dc=function(){var nt=(0,c.default)(a.default.mark(function Je(at,Se){var Be,Ye,ht;return a.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Mt.next=2,wi();case 2:return Be=Mt.sent,Mt.next=5,n.all(Be.map(function(){var Ct=(0,c.default)(a.default.mark(function cn(vr){return a.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return Rn.next=2,vr.findAndReplaceTrack(at,Se);case 2:vr.setP2PMaxBitrate();case 3:case"end":return Rn.stop()}},cn)}));return function(cn){return Ct.apply(this,arguments)}}()));case 5:if(Vn.removeTrack(at),Vn.addTrack(Se),at&&at.stop){try{Ye=Se instanceof MediaStreamTrackGenerator||Object.getPrototypeOf(Se).toString().includes("MediaStreamTrackGenerator")}catch{Ye=!1}Ye||at.stop()}(Rr.env.name==="Firefox"||Rr.env.name==="Safari")&&(rr.videoElement().srcObject=null,rr.videoElement().srcObject=Vn),ht=kr&&kr.video(),ht&&ht.refreshTracks(),oi.emit("streamChange"),cc();case 13:case"end":return Mt.stop()}},Je)}));return function(at,Se){return nt.apply(this,arguments)}}(),xc=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be,Ye,ht,Rt,Mt,Ct,cn;return a.default.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return Be=Kc(),fc(at),Ye=v(Xs),Ye.audioSource=null,Ye.videoSource=at,Pi=Uo(Ye,"OT.Publisher.getTrackFromDeviceId",()=>Zr&&Zr.isDestroyed()),Pi.on({accessDialogOpened:wa,accessDialogClosed:or}),ht=Pi,Rt=ht.getUserMedia,Mn.prev=8,Mn.next=11,Rt();case 11:Mt=Mn.sent,Mn.next=18;break;case 14:throw Mn.prev=14,Mn.t0=Mn.catch(8),Dt.error(Mn.t0),Mn.t0;case 18:return Ct=(Se=Mt)==null?void 0:Se.getVideoTracks(),cn=Ct[0],cn||fc(Be),Mn.abrupt("return",cn);case 21:case"end":return Mn.stop()}},Je,null,[[8,14]])}));return function(at){return nt.apply(this,arguments)}}(),Vc=()=>Vn.getVideoTracks()[0],Kc=()=>xa,fc=nt=>{xa=nt},kc=function(){var nt=(0,c.default)(a.default.mark(function Je(){var at,Se;return a.default.wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,Dn.shouldAskForDevices();case 2:if(at=Ye.sent,Se=at.videoDevices,!(!at.video||!Se||!Se.length)){Ye.next=6;break}throw ti(Zn.NO_DEVICES_FOUND,new Error("No video devices available"),pr.UNABLE_TO_PUBLISH);case 6:return Ye.abrupt("return",Se);case 7:case"end":return Ye.stop()}},Je)}));return function(){return nt.apply(this,arguments)}}(),vc=function(){var nt=(0,c.default)(a.default.mark(function Je(at,Se){var Be,Ye,ht;return a.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Mt.next=2,wi();case 2:return Be=Mt.sent,Mt.next=5,n.all(Be.map(Ct=>Ct.findAndReplaceTrack(at,Se)));case 5:Se&&Vn.addTrack(Se),at&&Vn.removeTrack(at),Ye=kr&&kr.video(),Ye&&Ye.refreshTracks(),qi&&(Se&&!at&&qi.addAudioTrack(),at&&!Se&&qi.removeAudioTrack());try{ht=Se instanceof MediaStreamTrackGenerator||Object.getPrototypeOf(Se).toString().includes("MediaStreamTrackGenerator")}catch{ht=!1}at&&at.stop&&!ht&&at.stop(),Se&&(lc(),Bs=new Ii(Vn,!gn.publishAudio)),oi.emit("streamChange"),Pa();case 15:case"end":return Mt.stop()}},Je)}));return function(at,Se){return nt.apply(this,arguments)}}(),Ic=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be;return a.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return Se=at.getSettings().deviceId,ht.prev=1,ht.next=4,rr.setAudioSource(Se);case 4:Be=Vn.getAudioTracks()[0],Be&&(Be.onmute=()=>Nc(Be),Be.onunmute=()=>Zc(Be)),ht.next=11;break;case 8:ht.prev=8,ht.t0=ht.catch(1),Dt.error(ht.t0);case 11:case"end":return ht.stop()}},Je,null,[[1,8]])}));return function(at){return nt.apply(this,arguments)}}(),Nc=nt=>{let Je=!1;gn.publishVideo&&document.hidden&&(Je=!0,this.publishVideo(!1));const at=function(){var Se=(0,c.default)(a.default.mark(function Be(){return a.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(document.hidden){ht.next=5;break}return ht.next=3,Ic(nt);case 3:Je&&rr.publishVideo(!0),document.removeEventListener("visibilitychange",at);case 5:case"end":return ht.stop()}},Be)}));return function(){return Se.apply(this,arguments)}}();document.addEventListener("visibilitychange",at)},Zc=nt=>{var Je;ka()&&(ec()?this.videoElement().pause():Ic(nt)),this==null||(Je=this.session)==null||Je.trigger("gsmCallEnded")},zc=!(Rr.env.isLegacyEdge||!Kn.RTCRtpSender||typeof Kn.RTCRtpSender.prototype.replaceTrack!="function"),yu=()=>ti(Zn.UNSUPPORTED_BROWSER,new Error("Publisher#setAudioSource is not supported in your browser.")),wc=()=>ti(Zn.CANCEL,new Error("Operation did not succeed due to a new request."));let Lc;const vu=()=>(Lc&&Lc.cancel(),Lc=new Y,Lc),iu=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be,Ye,ht,Rt,Mt,Ct,cn,vr,Mn,Rn,gi;return a.default.wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:if(zc){$n.next=2;break}throw yu();case 2:if(Se=vu(),Be=Go=>{if(Se.isCanceled())throw Go.getTracks(hc=>hc.stop()),wc();return iu(Go.getAudioTracks()[0])},Ye=rr.getAudioSource(),Ye){$n.next=7;break}throw ti(Zn.NOT_SUPPORTED,new Error("Publisher#setAudioSource cannot add an audio source when you started without one."));case 7:if(!(at instanceof MediaStreamTrack)){$n.next=26;break}if(!Se.isCanceled()){$n.next=10;break}throw wc();case 10:if(!Sn){$n.next=23;break}return $n.prev=11,$n.next=14,Sn.setTrack(at);case 14:return ht=$n.sent,$n.next=17,vc(Ye,ht);case 17:return $n.abrupt("return",$n.sent);case 20:$n.prev=20,$n.t0=$n.catch(11),Dt.error(`Error setting track on audioMediaProcessorConnector: ${$n.t0}`);case 23:return $n.abrupt("return",vc(Ye,at));case 26:if(typeof at!="string"){$n.next=73;break}return Rt=v(Xs),Rt.audioSource=at,Rt.videoSource=null,Pi=Uo(Rt,"OT.Publisher.setAudioSource",()=>Se.isCanceled()||Zr&&Zr.isDestroyed()),Pi.on({accessDialogOpened:wa,accessDialogClosed:or}),Mt=Ye.label,Ct=Ye.getConstraints&&Ye.getSettings().deviceId||void 0,Ye&&Ye.stop(),cn=Pi,vr=cn.getUserMedia,$n.prev=36,$n.t1=Be,$n.next=40,vr();case 40:return $n.t2=$n.sent,$n.next=43,(0,$n.t1)($n.t2);case 43:return $n.abrupt("return",$n.sent);case 46:if($n.prev=46,$n.t3=$n.catch(36),!Se.isCanceled()){$n.next=50;break}throw wc();case 50:if(Mn=v(Xs),Mn.videoSource=null,Mn.audioSource=Ct,!(!Mn.audioSource&&Mt)){$n.next=60;break}return $n.next=56,gt();case 56:if(Rn=$n.sent.find(Go=>Go.label===Mt),!Se.isCanceled()){$n.next=59;break}throw wc();case 59:Rn&&(Mn.audioSource=Rn.deviceId);case 60:if(Mn.audioSource){$n.next=63;break}throw $n.t3.message+=" (could not determine previous audio device)",ti(Zn.NOT_FOUND,$n.t3);case 63:return Pi=Uo(Mn,"OT.Publisher.setAudioSource",()=>Se.isCanceled()||Zr&&Zr.isDestroyed()),$n.next=66,Pi.getUserMedia().catch(Go=>{throw Go.message+=" (could not obtain previous audio device)",Go});case 66:return gi=$n.sent,$n.next=69,Be(gi);case 69:throw $n.t3.message+=" (reverted to previous audio device)",$n.t3;case 71:$n.next=74;break;case 73:throw ti(Zn.INVALID_PARAMETER,new Error("Invalid parameter passed to OT.Publisher.setAudioSource(). Expected string or MediaStreamTrack."));case 74:case"end":return $n.stop()}},Je,null,[[11,20],[36,46]])}));return function(at){return nt.apply(this,arguments)}}();this.setAudioSource=iu,this.getAudioSource=()=>Vn&&Vn.getAudioTracks().length>0?Vn.getAudioTracks()[0]:null;const ou=function(){var nt=(0,c.default)(a.default.mark(function at(Se){var Be,Ye,ht,Rt,Mt;return a.default.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(Be=ti(Zn.INVALID_VIDEO_SOURCE,new Error("Invalid video source. Video source must be a valid video input deviceId"),1041),Ye=ti(Zn.SET_VIDEO_SOURCE_FAILURE,new Error("You cannot reset the video source on a publisher that does not currently use a camera source."),1040),!(Rr.env.isLegacyEdge||!Kn.RTCRtpSender||typeof Kn.RTCRtpSender.prototype.replaceTrack!="function")){cn.next=4;break}throw ti(Zn.UNSUPPORTED_BROWSER,new Error("setVideoSource is not supported in your browser."),pr.UNABLE_TO_PUBLISH);case 4:if(typeof Se=="string"){cn.next=6;break}throw Be;case 6:if(ht=!Vn||Vn.getVideoTracks().length===0,!(Fo||fs||ht)){cn.next=9;break}throw Ye;case 9:return cn.next=11,gt();case 11:if(Rt=cn.sent,Mt=Rt.find(vr=>vr.kind==="videoInput"&&vr.deviceId===Se),Mt){cn.next=15;break}throw Be;case 15:return cn.next=17,Jc(Se);case 17:case"end":return cn.stop()}},at)}));function Je(at){return nt.apply(this,arguments)}return Je}();this.setVideoSource=ou;const Jc=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be,Ye,ht,Rt;return a.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(Be=Es,Es=at,gn.publishVideo){Ct.next=4;break}return Ct.abrupt("return");case 4:if(Ye=Vc(),gn.publishVideo&&Rr.env.isAndroid&&(Rr.env.isChrome||Rr.env.isFirefox)&&Ye&&Ye.stop&&Ye.stop(),!Ac(at)){Ct.next=8;break}return Ct.abrupt("return");case 8:return Ct.prev=8,Ct.next=11,xc(at);case 11:ht=Ct.sent,Ct.next=19;break;case 14:throw Ct.prev=14,Ct.t0=Ct.catch(8),Es=Be,Dt.error(Ct.t0),Ct.t0;case 19:if(ht){Ct.next=22;break}return Dt.warn("Unable to aquire video track. Moving to next device."),Ct.abrupt("return");case 22:if(!js){Ct.next=27;break}return Rt=Cr.getOriginalVideoTrack(),Ct.next=26,Cr.setVideoTrack(ht);case 26:ht=Ct.sent;case 27:if(!En){Ct.next=32;break}return Rt=En.originalTrack,Ct.next=31,En.setTrack(ht);case 31:ht=Ct.sent;case 32:return Ct.next=34,dc(Ye,ht);case 34:(Se=Rt)==null||Se.stop(),gn.publishVideo&&(nc=!1);case 36:case"end":return Ct.stop()}},Je,null,[[8,14]])}));return function(at){return nt.apply(this,arguments)}}();this.getVideoSource=()=>{const nt={},Je=!Vn||Vn.getVideoTracks().length===0;return nt.track=Vn&&gn.publishVideo&&Vn.getVideoTracks()[0]||null,nt.deviceId=!fs&&!Fo&&Es?Es:null,Fo?nt.type="custom":fs?nt.type="screen":Je?nt.type=null:nt.type="camera",nt},this._={setIceConfig(nt){return(0,c.default)(a.default.mark(function Je(){var at;return a.default.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:return Be.next=2,wi();case 2:at=Be.sent,at.forEach(Ye=>Ye.setIceConfig(nt));case 4:case"end":return Be.stop()}},Je)}))()},publishToSession:(nt,Je)=>{Je&&(Ss=Je),On=nt,this.session=nt;const at=w();zs=at,this.streamId=at,Ho("Attempt",{dataChannels:gn.channels,properties:_e(gn)});const Se=new n((Rt,Mt)=>{if(ua){Rt();return}this.once("initSuccess",Rt),this.once("destroyed",Ct=>{let cn=Ct.reason,vr="";cn&&(vr=` Reason: ${cn}`),Mt(new Error(`Publisher destroyed before it finished loading.${vr}`))})});Dt.debug("publishToSession: waiting for publishComplete, which is triggered by stream#created from rumor");const Be=new n((Rt,Mt)=>{this.once("publishComplete",Ct=>{if(Ct){Mt(Ct);return}this._setScalableFramerates(gn.scalableFramerates),this._setScalableVideoLayers(gn.scalableVideoLayers),this.stream&&(this.stream.setChannelActiveState("audio",ka()),this.stream.setChannelActiveState("video",ec())),Dt.debug("publishToSession: got publishComplete"),Rt()})}),Ye=Rt=>{const Mt=bt(Rt);throw Ho("Failure",{},{failureReason:"Publish",failureCode:Mt.code,failureMessage:Mt.message}),Zr.isAttemptingToPublish()&&this.trigger("publishComplete",Mt),ci.handleJsException({errorMsg:Rt.message,code:Mt.code,target:this,error:Rt,analytics:Ss}),Mt};Dt.debug("publishToSession: waiting for loaded");const ht=Se.then(()=>nt._.getVideoCodecsCompatible(Vn)).then(Rt=>{if(Dt.debug("publishToSession: loaded"),!this.session)return;const Mt=setTimeout(()=>{ct(nt)},ui);this.once("publishComplete",()=>{clearTimeout(Mt)}),Zr.set("PublishingToSession");const Ct=Rt&&kr&&kr.video(),cn=Vn.getVideoTracks().length>0,vr=gn.videoSource!==null&&gn.videoSource!==!1;Ct&&cn&&vr&&yr.push(new ii({id:"video1",type:"video",active:gn.publishVideo,orientation:Ws.ROTATED_NORMAL,frameRate:gn.frameRate,width:this.videoWidth(),height:this.videoHeight(),e2ee:nt._.isE2ee(),source:(()=>fs?"screen":Fo?"custom":"camera")(),fitMode:gn.fitMode}));const Mn=Vn.getAudioTracks().length>0,Rn=gn.audioSource!==null&&gn.audioSource!==!1;return Rn&&Mn&&yr.push(new ii({id:"audio1",type:"audio",active:gn.publishAudio})),Rn&&Mn&&yr.push(new ii({id:"caption1",type:"data",active:gn.publishCaptions})),this._.streamChannels=yr,Dt.debug("publishToSession: creating rumor stream id"),new n((gi,os)=>{sc(null,($n,Go,hc)=>{if($n){os(Ye($n));return}gi({streamId:Go,message:hc})})})}).then(Rt=>{if(Rt===void 0)return;const Mt=Rt.streamId,Ct=Rt.message;if(Dt.debug("publishToSession: rumor stream id created:",Mt,"(this is different from stream#created, which requires media to actually be flowing for mantis sessions)"),Mt!==at)throw new Error("streamId response does not match request");this.streamId=Mt,Ba=Vr(Ct)}).catch(Rt=>{throw this.trigger("publishComplete",Rt),Rt});return n.all([ht,Be])},unpublishFromSession:(nt,Je)=>{if(!this.session||nt.id!==this.session.id){if(Je==="unpublished"){const at=this.session&&this.session.id||"no session";Dt.warn(`The publisher ${As} is trying to unpublish from a session ${nt.id} it is not attached to (it is attached to ${at})`)}return this}if(nt.isConnected()&&(this.stream||Zr.isAttemptingToPublish())&&nt._.streamDestroy(this.streamId),ca.releaseAll(),this.disconnect(),Zr.isAttemptingToPublish()){Ho("Cancel",{reason:"unpublish"});const at=()=>{switch(Je){case"mediaStopped":return"The video element fired the ended event, indicating there is an issue with the media";case"unpublished":return"The publisher was unpublished before it could be published";case"reset":return"The publisher was reset";default:return`The publisher was destroyed due to ${Je}`}},Se=new Error(at());this.trigger("publishComplete",ti(Je==="mediaStopped"?Zn.MEDIA_ENDED:Zn.CANCEL,Se))}return this.session=null,fr("unpublish","Success"),this._.streamDestroyed(Je),this},unpublishStreamFromSession:(nt,Je,at)=>!zs||nt.id!==zs?(Dt.warn(`The publisher ${As} is trying to destroy a stream ${nt.id} that is not attached to it (it has ${zs||"no stream"} attached to it)`),this):this._.unpublishFromSession(Je,at),streamDestroyed:nt=>{["reset"].indexOf(nt)<0&&(Zr.isDestroyed()||Zr.set("MediaBound"));const Je=new dr.StreamEvent("streamDestroyed",this.stream,nt,!0);this.dispatchEvent(Je),Je.isDefaultPrevented()||this.destroy()},archivingStatus(nt){return qi&&qi.setArchivingStatus(nt),nt},webRtcStream(){return Vn},switchTracks(){return(0,c.default)(a.default.mark(function nt(){var Je;return a.default.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.prev=0,Se.next=3,ra().catch(Li);case 3:Je=Se.sent,Se.next=10;break;case 6:throw Se.prev=6,Se.t0=Se.catch(0),Dt.error(`OT.Publisher.switchTracks failed to getUserMedia: ${Se.t0}`),Se.t0;case 10:pu(Je),Se.prev=11,dt(),Se.next=21;break;case 15:if(Se.prev=15,Se.t1=Se.catch(11),!(Se.t1 instanceof W)){Se.next=19;break}return Se.abrupt("return");case 19:throw Dt.error("Error while binding video",Se.t1),Se.t1;case 21:Se.prev=21,gu(),Se.next=29;break;case 25:throw Se.prev=25,Se.t2=Se.catch(21),Dt.error("Error replacing tracks",Se.t2),Se.t2;case 29:case"end":return Se.stop()}},nt,null,[[0,6],[11,15],[21,25]])}))()},getDataChannel(nt,Je,at){const Se=fa(Object.keys(Ri)[0]);if(!Se){at(new Rr.Error("Cannot create a DataChannel before there is a subscriber."));return}Se.then(Be=>{Be.getDataChannel(nt,Je,at)})},iceRestart(nt){nt===void 0&&(nt=!1),wi().then(Je=>{Je.forEach(at=>{const Se=mr(at),Be=Se.remoteConnectionId;la("Attempt",{remoteConnectionId:Be}),Dt.debug("Publisher: ice restart attempt"),at.iceRestart(),nt&&at.generateOffer()})})},getState(){return Zr},demoOnlyCycleVideo:this.cycleVideo,testOnlyGetFramesEncoded(){return(0,c.default)(a.default.mark(function nt(){var Je;return a.default.wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,wi();case 2:if(Je=Se.sent,Je.length){Se.next=5;break}throw new Error("No established PeerConnections yet");case 5:return Se.abrupt("return",Je[0]._testOnlyGetFramesEncoded());case 6:case"end":return Se.stop()}},nt)}))()},onStreamAvailable:Ce,startRoutedToRelayedTransition:()=>{ea.startTransitionTo("P2P"),Ec()},startRelayedToRoutedTransition:()=>{ea.startTransitionTo("MANTIS",()=>du())},forceMuteAudio:function(){fr("publishAudio","Attempt",{publishAudio:!1}),gn.publishAudio=!1;try{lc("auto"),this.dispatchEvent(new dr.MuteForcedEvent),fr("publishAudio","Success",{publishAudio:!1})}catch(nt){fr("publishAudio","Failure",{message:nt.message})}}.bind(this),setCongestionLevel:nt=>{Rc?Rc.setCongestionLevel(nt):Dt.warn("Audio Fallback is not enabled")}},this.detectDevices=function(){Dt.warn("Publisher.detectDevices() is not implemented.")},this.detectMicActivity=function(){Dt.warn("Publisher.detectMicActivity() is not implemented.")},this.getEchoCancellationMode=function(){return Dt.warn("Publisher.getEchoCancellationMode() is not implemented."),"fullDuplex"},this.setMicrophoneGain=function(){Dt.warn("Publisher.setMicrophoneGain() is not implemented.")},this.getMicrophoneGain=function(){return Dt.warn("Publisher.getMicrophoneGain() is not implemented."),.5},this.setCamera=function(){Dt.warn("Publisher.setCamera() is not implemented.")},this.setMicrophone=function(){Dt.warn("Publisher.setMicrophone() is not implemented.")},this.guid=function(){return As},this.videoElement=function(){const nt=kr&&kr.video();return nt?nt.domElement():null},this.setStream=_i,this.isWebRTC=!0,this.isLoading=function(){return kr&&kr.loading()},this.videoWidth=()=>Lr().width,this.videoHeight=()=>Lr().height,this.getStats=function(Je){Wi((at,Se)=>{at?Je(at):Je(null,Se)})},this.getRtcStatsReport=()=>new n((nt,Je)=>{Uc((at,Se)=>{at?Je(at):nt(Se)})}),Zr=new Os(sr),this.accessAllowed=!1,this.applyVideoFilter=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be,Ye,ht,Rt;return a.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(fr("applyVideoFilter","Attempt",{videoFilter:at}),Ct.prev=1,!En){Ct.next=4;break}throw ti(Zn.NOT_SUPPORTED,new Error("Cannot apply video filter when videoMediaProcessorConnector is set."));case 4:if(Se=ki.isSupported(),Se){Ct.next=7;break}throw ti(Zn.NOT_SUPPORTED,new Error("Browser does not support video filters (Insertable Streams and Worker APIs are required)"));case 7:if(Cr.isValidVideoFilter(at)){Ct.next=9;break}throw ti(Zn.INVALID_PARAMETER,new Error("Video filter has invalid configuration"));case 9:if(Vn){Ct.next=14;break}return Be="Ignoring. No mediaStream",fr("applyVideoFilter","Failure",{message:Be}),Dt.warn(Be),Ct.abrupt("return");case 14:if(!fs){Ct.next=16;break}throw ti(Zn.INVALID_PARAMETER,new Error("Video filters can not be applied to screen share"));case 16:if(Oa(),gn.publishVideo){Ct.next=21;break}return js=at,fr("applyVideoFilter","Success",{videoFilter:at}),Ct.abrupt("return");case 21:if(!Cr.getVideoFilter()){Ct.next=36;break}if(!Cr.canUpdateVideoFilter(at.type)){Ct.next=34;break}return Ct.prev=23,Ct.next=26,Cr.updateVideoFilter(at);case 26:return js=at,fr("applyVideoFilter","Success",{videoFilter:at}),Ct.abrupt("return");case 31:Ct.prev=31,Ct.t0=Ct.catch(23),Dt.warn(`Error updating video filter: ${Ct.t0}`);case 34:return Ct.next=36,rr.clearVideoFilter();case 36:if(Ye=Vn.getVideoTracks(),ht=Ye[0],ht){Ct.next=42;break}return Be="Ignoring. No video",fr("applyVideoFilter","Failure",{message:Be}),Dt.warn(Be),Ct.abrupt("return");case 42:return Ct.next=44,Cr.setVideoFilter(at);case 44:return Ct.next=46,Cr.setMediaStream(Vn);case 46:if(Rt=Ct.sent,!Rt){Ct.next=50;break}return Ct.next=50,dc(ht,Rt);case 50:Ct.next=57;break;case 52:throw Ct.prev=52,Ct.t1=Ct.catch(1),Dt.error(`Error applying video filter: ${Ct.t1}`),fr("applyVideoFilter","Failure",{message:Ct.t1.message}),Ct.t1;case 57:js=at,fr("applyVideoFilter","Success",{videoFilter:at});case 59:case"end":return Ct.stop()}},Je,null,[[1,52],[23,31]])}));return function(Je){return nt.apply(this,arguments)}}(),this.getVideoFilter=()=>(fr("getVideoFilter","Attempt"),fr("getVideoFilter","Success"),js||null),this.setVideoMediaProcessorConnector=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be,Ye,ht,Rt,Mt;return a.default.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:if(fr("setVideoMediaProcessorConnector","Attempt",{message:at?"setting the connector":"clearing the connector"}),!rr.getVideoFilter()){cn.next=4;break}throw fr("setVideoMediaProcessorConnector","Failure",{message:"Tried to set video MediaProcessorConnector when video filter applied."}),ti(Zn.NOT_SUPPORTED,new Error("setVideoMediaProcessorConnector: Cannot use this method when videoFilter is set."));case 4:if(!En){cn.next=14;break}return Se=Vn.getVideoTracks(),Be=Se[0],cn.next=8,xc(Es);case 8:return Ye=cn.sent,cn.next=11,dc(Be,Ye);case 11:En.destroy(),En.stopOriginalTrack(),En=null;case 14:if(at){cn.next=17;break}return fr("setVideoMediaProcessorConnector","Success",{message:"clearing the connector"}),cn.abrupt("return");case 17:if(Ao.isValidConnector(at)){cn.next=20;break}throw fr("setVideoMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),ti(Zn.INVALID_PARAMETER,new Error("setVideoMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 20:if(En=new Ao(at),ht=Vn.getVideoTracks(),Rt=ht[0],Rt){cn.next=28;break}return Mt="Connector not set as no video track is present.",fr("setVideoMediaProcessorConnector","Failure",{message:Mt}),Dt.warn(`setVideoMediaProcessorConnector: ${Mt}`),En=null,cn.abrupt("return");case 28:return cn.prev=28,cn.next=31,En.setTrack(Rt);case 31:return Be=cn.sent,cn.next=34,dc(Rt,Be);case 34:cn.next=42;break;case 36:throw cn.prev=36,cn.t0=cn.catch(28),En=null,Dt.error(`setVideoMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${cn.t0}`),fr("setVideoMediaProcessorConnector","Failure",{message:cn.t0.message}),cn.t0;case 42:fr("setVideoMediaProcessorConnector","Success");case 43:case"end":return cn.stop()}},Je,null,[[28,36]])}));return function(Je){return nt.apply(this,arguments)}}(),this.setAudioMediaProcessorConnector=function(){var nt=(0,c.default)(a.default.mark(function Je(at){var Se,Be,Ye,ht,Rt;return a.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(fr("setAudioMediaProcessorConnector","Attempt",{message:at?"setting the connector":"clearing the connector"}),!Sn){Ct.next=7;break}return Se=Vn.getAudioTracks(),Be=Se[0],Ct.next=5,vc(Be,Sn.originalTrack);case 5:Sn.destroy(),Sn=null;case 7:if(at){Ct.next=10;break}return fr("setAudioMediaProcessorConnector","Success",{message:"clearing the connector"}),Ct.abrupt("return");case 10:if(Ao.isValidConnector(at)){Ct.next=13;break}throw fr("setAudioMediaProcessorConnector","Failure",{message:"Invalid MediaProcessorConnector"}),ti(Zn.INVALID_PARAMETER,new Error("setAudioMediaProcessorConnector:  Tried to set invalid MediaProcessorConnector"));case 13:if(Ye=Vn.getAudioTracks(),ht=Ye[0],ht){Ct.next=20;break}return Rt="Connector not set as no audio track is present.",fr("setAudioMediaProcessorConnector","Failure",{message:Rt}),Dt.warn(`setAudioMediaProcessorConnector: ${Rt}`),Sn=null,Ct.abrupt("return");case 20:return Sn=new Ao(at),Ct.prev=21,Ct.next=24,Sn.setTrack(ht);case 24:return Be=Ct.sent,Ct.next=27,vc(rr.getAudioSource(),Be);case 27:Ct.next=35;break;case 29:throw Ct.prev=29,Ct.t0=Ct.catch(21),Sn=null,Dt.error(`setAudioMediaProcessorConnector: Error getting track from MediaProcessorConnector: ${Ct.t0}`),fr("setAudioMediaProcessorConnector","Failure",{message:Ct.t0.message}),Ct.t0;case 35:fr("setAudioMediaProcessorConnector","Success");case 36:case"end":return Ct.stop()}},Je,null,[[21,29]])}));return function(Je){return nt.apply(this,arguments)}}(),this.clearVideoFilter=(0,c.default)(a.default.mark(function nt(){var Je,at,Se,Be,Ye;return a.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:if(fr("clearVideoFilter","Attempt"),!(!gn.publishVideo&&!Cr.getVideoFilter())){Rt.next=5;break}return js=null,fr("clearVideoFilter","Success"),Rt.abrupt("return");case 5:if(!(!Cr.getVideoFilter()&&!js)){Rt.next=10;break}return Je="Ignoring. No video filter applied",fr("clearVideoFilter","Success",{message:Je}),Dt.debug(Je),Rt.abrupt("return");case 10:if(ki.isSupported()){Rt.next=15;break}return Je='Ignoring. "clearVideoFilter" not supported.',fr("clearVideoFilter","Success",{message:Je}),Dt.warn(Je),Rt.abrupt("return");case 15:if(Vn){Rt.next=20;break}return Je="Ignoring. No mediaStream",fr("clearVideoFilter","Success",{message:Je}),Dt.warn(Je),Rt.abrupt("return");case 20:return at=js,js=null,Se=Vn.getVideoTracks(),Be=Se[0],Rt.prev=23,Rt.next=26,xc(Es);case 26:Ye=Rt.sent,Rt.next=33;break;case 29:return Rt.prev=29,Rt.t0=Rt.catch(23),Dt.error(Rt.t0),Rt.abrupt("return");case 33:if(Ye){Rt.next=36;break}return Dt.warn("Failed to clear filter because there is no video track."),Rt.abrupt("return");case 36:return Rt.prev=36,Rt.next=39,dc(Be,Ye);case 39:return Rt.next=41,jc();case 41:Rt.next=46;break;case 43:Rt.prev=43,Rt.t1=Rt.catch(36),js=at;case 46:fr("clearVideoFilter","Success");case 47:case"end":return Rt.stop()}},nt,null,[[23,29],[36,43]])}))}}}).call(this,e(1))},function(t,r,e){const n=e(52).once;t.exports=function(a,c){c===void 0&&(c={});const u=c.hasE2eeCapability||e(111),l=c.hasOpenTokSupport||n;this.publish=a.indexOf("publish")!==-1?1:0,this.subscribe=a.indexOf("subscribe")!==-1?1:0,this.forceUnpublish=a.indexOf("forceunpublish")!==-1?1:0,this.forceDisconnect=a.indexOf("forcedisconnect")!==-1?1:0,this.forceMute=a.indexOf("forcemute")!==-1?1:0,this.supportsE2ee=u()?1:0,this.supportsWebRTC=l()?1:0,this.permittedTo=f=>Object.prototype.hasOwnProperty.call(this,f)&&this[f]===1}},function(t,r,e){const n=e(2)("Stream"),o=e(8),a=e(21),c=e(6),u=e(23)(),l=["name","archiving"];t.exports=function(g,v,b,S,C,O){const A=this;let w;this.id=g,this.streamId=g,this.name=v,this.creationTime=Number(b),this.connection=S,this.channel=O,this.publisher=a.publishers.find({streamId:this.id}),c(this);const V=function(j,_,z,ae){let me=_;switch(me){case"active":me=j.type==="audio"?"hasAudio":"hasVideo",A[me]=ae;break;case"disableWarning":if(me=j.type==="audio"?"audioDisableWarning":"videoDisableWarning",A[me]=ae,!A[j.type==="audio"?"hasAudio":"hasVideo"])return;break;case"fitMode":me="defaultFitMode",A[me]=ae;break;case"source":me=j.type==="audio"?"audioType":"videoType",A[me]=ae;break;case"videoDimensions":A.videoDimensions=ae;break;case"orientation":case"width":case"height":return}A.dispatchEvent(new u.StreamUpdatedEvent(A,me,z,ae))},k=function(){return A.publisher?A.publisher:a.subscribers.find(j=>j.stream&&j.stream.id===A.id&&j.session.id===C.id)},M=function(){return!A.publisher};this.getChannelsOfType=function(j){return A.channel.filter(_=>_.type===j)},this.getChannel=function(j){for(let _=0;_<A.channel.length;++_)if(A.channel[_].id===j)return A.channel[_];return null};const W=this.getChannelsOfType("audio")[0],Y=this.getChannelsOfType("video")[0];this.hasAudio=W!=null&&W.active,this.hasVideo=Y!=null&&Y.active,this.videoType=Y&&Y.source,this.defaultFitMode=Y&&Y.fitMode,this.videoDimensions={},Y&&(this.videoDimensions.width=Y.width,this.videoDimensions.height=Y.height,this.videoDimensions.orientation=Y.orientation,Y.on("update",V),this.frameRate=Y.frameRate),W&&W.on("update",V),this.setChannelActiveState=function(j,_,z,ae){const me={active:_};z&&(me.activeReason=z),ae&&(me.congestionLevel=ae),H(j,me)},this.setVideoDimensions=function(j,_){H("video",{width:j,height:_,orientation:0})},this.setRestrictFrameRate=function(j){H("video",{restrictFrameRate:j})},this.setPreferredResolution=function(j){if(!M()){n.warn("setPreferredResolution has no affect when called by a publisher");return}if(C.sessionInfo.p2pEnabled){n.warn("Stream.setPreferredResolution will not work in a P2P Session");return}if(j&&j.width===void 0&&j.height===void 0)return;const _=A.getChannelsOfType("video")[0];if(_){if(j&&j.width){if(isNaN(parseInt(j.width,10)))throw new o.Error("stream preferred width must be an integer","Subscriber");_.preferredWidth=parseInt(j.width,10)}else _.preferredWidth=void 0;if(j&&j.height){if(isNaN(parseInt(j.height,10)))throw new o.Error("stream preferred height must be an integer","Subscriber");_.preferredHeight=parseInt(j.height,10)}else _.preferredHeight=void 0;C._.subscriberChannelUpdate(A,k(),_,{preferredWidth:_.preferredWidth||0,preferredHeight:_.preferredHeight||0})}},this.getPreferredResolution=function(){const j=A.getChannelsOfType("video")[0];if(!(!j||!j.preferredWidth&&!j.preferredHeight))return{width:j.preferredWidth,height:j.preferredHeight}},this.setPreferredFrameRate=function(j){if(!M()){n.warn("setPreferredFrameRate has no affect when called by a publisher");return}if(C.sessionInfo.p2pEnabled){n.warn("Stream.setPreferredFrameRate will not work in a P2P Session");return}if(j&&isNaN(parseFloat(j)))throw new o.Error("stream preferred frameRate must be a number","Subscriber");const _=A.getChannelsOfType("video")[0];_&&(_.preferredFrameRate=j?parseFloat(j):null,C._.subscriberChannelUpdate(A,k(),_,{preferredFrameRate:_.preferredFrameRate||0}))},this.getPreferredFrameRate=function(){const j=A.getChannelsOfType("video")[0];return j?j.preferredFrameRate:null};let H=function(j,_){let z;if(A.publisher)z=ae=>C._.streamChannelUpdate(A,ae,_);else{const ae=k();z=me=>C._.subscriberChannelUpdate(A,ae,me,_)}A.getChannelsOfType(j).forEach(z)};this.destroyed=!1,this.destroyedReason=void 0,this.destroy=function(j,_){j===void 0&&(j="clientDisconnected"),w=j,A.destroyed=!0,A.destroyedReason=w,_!==!0&&A.dispatchEvent(new u.DestroyedEvent("destroyed",A,w))},this._={},this._.updateProperty=function(j,_){if(l.indexOf(j)===-1){n.warn(`Unknown stream property "${j}" was modified to "${_}".`);return}const z=A[j],ae=_;switch(j){case"name":A[j]=ae;break;case"archiving":var me=k();A.publisher&&me&&me._.archivingStatus(ae),A[j]=ae;break}const ye=new u.StreamUpdatedEvent(A,j,z,ae);A.dispatchEvent(ye)},this._.update=function(j){for(const _ in j)j.hasOwnProperty(_)&&A._.updateProperty(_,j[_])},this._.forceMute=function(j){j.hasOwnProperty("channels")&&j.channels.includes("audio")&&A.publisher&&A.publisher._.forceMuteAudio()},this._.updateChannel=function(j,_){const z=A.getChannel(j);z&&z.update(_)}}},function(t,r,e){r.__esModule=!0,r.STATUS=r.PONG=r.PING=r.DISCONNECT=r.CONNECT=r.MESSAGE=r.UNSUBSCRIBE=r.SUBSCRIBE=void 0;const n=0;r.SUBSCRIBE=n;const o=1;r.UNSUBSCRIBE=o;const a=2;r.MESSAGE=a;const c=3;r.CONNECT=c;const u=4;r.DISCONNECT=u;const l=7;r.PING=l;const f=8;r.PONG=f;const g=9;r.STATUS=g},function(t,r,e){const n=e(9),o=e(170),a=e(6),c=e(23)(),u=e(740);function l(f,g,v,b,S){let C;this.id=f,this.connectionId=f,this.creationTime=g?Number(g):null,this.data=v,this.capabilities=u(b),this.permissions=new o(S),this.quality=null,a(this),this.destroy=(O,A)=>{C=O||"clientDisconnected",A!==!0&&this.dispatchEvent(new c.DestroyedEvent("destroyed",this,C))},this.destroyed=()=>C!==void 0,this.destroyedReason=()=>C}l.fromHash=f=>{let g=f.id,v=f.creationTime,b=f.data,S=f.capablities,C=f.permissions;return new l(g,v,b,n(S||{},{supportsWebRTC:!0}),C||[])},t.exports=l},function(t,r){var e=typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)&&(typeof window!==void 0?window:commonjsGlobal).Object===Object&&(typeof window!==void 0?window:commonjsGlobal);t.exports=e},function(t,r){var e=Function.prototype,n=e.toString;function o(a){if(a!=null){try{return n.call(a)}catch{}try{return a+""}catch{}}return""}t.exports=o},function(t,r,e){var n=e(40),o=function(){try{var a=n(Object,"defineProperty");return a({},"",{}),a}catch{}}();t.exports=o},function(t,r,e){var n=e(42),o=e(31);function a(c,u){return c&&n(u,o(u),c)}t.exports=a},function(t,r,e){var n=e(378),o=e(65),a=e(12),c=e(66),u=e(67),l=e(86),f=Object.prototype,g=f.hasOwnProperty;function v(b,S){var C=a(b),O=!C&&o(b),A=!C&&!O&&c(b),w=!C&&!O&&!A&&l(b),V=C||O||A||w,k=V?n(b.length,String):[],M=k.length;for(var W in b)(S||g.call(b,W))&&!(V&&(W=="length"||A&&(W=="offset"||W=="parent")||w&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||u(W,M)))&&k.push(W);return k}t.exports=v},function(t,r){function e(n,o){return function(a){return n(o(a))}}t.exports=e},function(t,r,e){(function(n){var o=e(15),a=r&&!r.nodeType&&r,c=a&&typeof n=="object"&&n&&!n.nodeType&&n,u=c&&c.exports===a,l=u?o.Buffer:void 0,f=l?l.allocUnsafe:void 0;function g(v,b){if(b)return v.slice();var S=v.length,C=f?f(S):new v.constructor(S);return v.copy(C),C}n.exports=g}).call(this,e(85)(t))},function(t,r){function e(){return[]}t.exports=e},function(t,r,e){var n=e(120),o=e(121),a=e(119),c=e(181),u=Object.getOwnPropertySymbols,l=u?function(f){for(var g=[];f;)n(g,a(f)),f=o(f);return g}:c;t.exports=l},function(t,r,e){var n=e(184),o=e(119),a=e(31);function c(u){return n(u,a,o)}t.exports=c},function(t,r,e){var n=e(120),o=e(12);function a(c,u,l){var f=u(c);return o(c)?f:n(f,l(c))}t.exports=a},function(t,r,e){var n=e(184),o=e(182),a=e(55);function c(u){return n(u,a,o)}t.exports=c},function(t,r,e){var n=e(40),o=e(15),a=n(o,"Set");t.exports=a},function(t,r,e){var n=e(40),o=e(15),a=n(o,"WeakMap");t.exports=a},function(t,r,e){var n=e(15),o=n.Uint8Array;t.exports=o},function(t,r,e){var n=e(122);function o(a,c){var u=c?n(a.buffer):a.buffer;return new a.constructor(u,a.byteOffset,a.length)}t.exports=o},function(t,r,e){var n=e(87),o=e(121),a=e(69);function c(u){return typeof u.constructor=="function"&&!a(u)?n(o(u)):{}}t.exports=c},function(t,r,e){var n=e(114),o="Expected a function";function a(c,u){if(typeof c!="function"||u!=null&&typeof u!="function")throw new TypeError(o);var l=function(){var f=arguments,g=u?u.apply(this,f):f[0],v=l.cache;if(v.has(g))return v.get(g);var b=c.apply(this,f);return l.cache=v.set(g,b)||v,b};return l.cache=new(a.Cache||n),l}a.Cache=n,t.exports=a},function(t,r,e){var n=e(88),o=e(126);function a(c){return n(function(u,l){var f=-1,g=l.length,v=g>1?l[g-1]:void 0,b=g>2?l[2]:void 0;for(v=c.length>3&&typeof v=="function"?(g--,v):void 0,b&&o(l[0],l[1],b)&&(v=g<3?void 0:v,g=1),u=Object(u);++f<g;){var S=l[f];S&&c(u,S,f,v)}return u})}t.exports=a},function(t,r,e){var n=e(124),o=Math.max;function a(c,u,l){return u=o(u===void 0?c.length-1:u,0),function(){for(var f=arguments,g=-1,v=o(f.length-u,0),b=Array(v);++g<v;)b[g]=f[u+g];g=-1;for(var S=Array(u+1);++g<u;)S[g]=f[g];return S[u]=l(b),n(c,this,S)}}t.exports=a},function(t,r){var e=800,n=16,o=Date.now;function a(c){var u=0,l=0;return function(){var f=o(),g=n-(f-l);if(l=f,g>0){if(++u>=e)return arguments[0]}else u=0;return c.apply(void 0,arguments)}}t.exports=a},function(t,r,e){t.exports=e(406)()?WeakMap:e(407)},function(t,r,e){var n=Object.create,o=Object.getPrototypeOf,a={};t.exports=function(){var c=Object.setPrototypeOf,u=arguments[0]||n;return typeof c!="function"?!1:o(c(u(null),a))===a}},function(t,r,e){var n=e(198),o=e(32),a=Object.prototype.isPrototypeOf,c=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0},l;l=function(f,g){if(o(f),g===null||n(g))return f;throw new TypeError("Prototype must be null or an object")},t.exports=function(f){var g,v;return f?(f.level===2?f.set?(v=f.set,g=function(b,S){return v.call(l(b,S),S),b}):g=function(b,S){return l(b,S).__proto__=S,b}:g=function b(S,C){var O;return l(S,C),O=a.call(b.nullPolyfill,S),O&&delete b.nullPolyfill.__proto__,C===null&&(C=b.nullPolyfill),S.__proto__=C,O&&c(b.nullPolyfill,"__proto__",u),S},Object.defineProperty(g,"level",{configurable:!1,enumerable:!1,writable:!1,value:f.level})):null}(function(){var f=Object.create(null),g={},v,b=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(b){try{v=b.set,v.call(f,g)}catch{}if(Object.getPrototypeOf(f)===g)return{set:v,level:2}}return f.__proto__=g,Object.getPrototypeOf(f)===g?{level:2}:(f={},f.__proto__=g,Object.getPrototypeOf(f)===g?{level:1}:!1)}()),e(409)},function(t,r,e){var n=e(45),o={function:!0,object:!0};t.exports=function(a){return n(a)&&o[typeof a]||!1}},function(t,r,e){var n=e(412),o=/^\s*class[\s{/}]/,a=Function.prototype.toString;t.exports=function(c){return!(!n(c)||o.test(a.call(c)))}},function(t,r,e){var n=e(45),o=Array.prototype.forEach,a=Object.create,c=function(u,l){var f;for(f in u)l[f]=u[f]};t.exports=function(u){var l=a(null);return o.call(arguments,function(f){n(f)&&c(Object(f),l)}),l}},function(t,r,e){t.exports=e(419)()?String.prototype.contains:e(420)},function(t,r,e){var n=e(90),o=e(91),a=e(421),c=e(450),u=e(451),l=e(46).iterator;t.exports=function(f){return typeof u(f)[l]=="function"?f[l]():n(f)?new a(f):o(f)?new c(f):new a(f)}},function(t,r,e){var n=e(426);t.exports=function(o){if(!n(o))throw new TypeError(o+" is not a symbol");return o}},function(t,r,e){var n=e(430),o=e(129),a=e(70),c=e(32),u=e(33),l=e(431),f=e(46),g=Object.defineProperty,v=Object.defineProperties,b;t.exports=b=function(S,C){if(!(this instanceof b))throw new TypeError("Constructor requires 'new'");v(this,{__list__:u("w",c(S)),__context__:u("w",C),__nextIndex__:u("w",0)}),C&&(a(C.on),C.on("_add",this._onAdd),C.on("_delete",this._onDelete),C.on("_clear",this._onClear))},delete b.prototype.constructor,v(b.prototype,o({_next:u(function(){var S;if(this.__list__){if(this.__redo__&&(S=this.__redo__.shift(),S!==void 0))return S;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(S){return S===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(S)}}),_resolve:u(function(S){return this.__list__[S]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[f.toStringTag]||"Object")+"]"})},l({_onAdd:u(function(S){if(!(S>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){g(this,"__redo__",u("c",[S]));return}this.__redo__.forEach(function(C,O){C>=S&&(this.__redo__[O]=++C)},this),this.__redo__.push(S)}}),_onDelete:u(function(S){var C;S>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(C=this.__redo__.indexOf(S),C!==-1&&this.__redo__.splice(C,1),this.__redo__.forEach(function(O,A){O>S&&(this.__redo__[A]=--O)},this)))}),_onClear:u(function(){this.__redo__&&n.call(this.__redo__),this.__nextIndex__=0})}))),g(b.prototype,f.iterator,u(function(){return this}))},function(t,r,e){var n=e(57),o=e(128),a=e(433),c=e(434),u=function(l,f){return l.replace("%v",c(f))};t.exports=function(l,f,g){if(!o(g))throw new TypeError(u(f,l));if(!n(l)){if("default"in g)return g.default;if(g.isOptional)return null}var v=a(g.errorMessage);throw n(v)||(v=f),new TypeError(u(v,l))}},function(t,r){function e(n,o,a,c){for(var u=n.length,l=a+(c?1:-1);c?l--:++l<u;)if(o(n[l],l,n))return l;return-1}t.exports=e},function(t,r,e){t.exports=e(462)},function(t,r,e){t.exports=function(o,a){return function(){for(var u=new Array(arguments.length),l=0;l<u.length;l++)u[l]=arguments[l];return o.apply(a,u)}}},function(t,r,e){var n=e(20);function o(a){return encodeURIComponent(a).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(c,u,l){if(!u)return c;var f;if(l)f=l(u);else if(n.isURLSearchParams(u))f=u.toString();else{var g=[];n.forEach(u,function(S,C){S===null||typeof S>"u"||(n.isArray(S)?C=C+"[]":S=[S],n.forEach(S,function(A){n.isDate(A)?A=A.toISOString():n.isObject(A)&&(A=JSON.stringify(A)),g.push(o(C)+"="+o(A))}))}),f=g.join("&")}if(f){var v=c.indexOf("#");v!==-1&&(c=c.slice(0,v)),c+=(c.indexOf("?")===-1?"?":"&")+f}return c}},function(t,r,e){t.exports=function(o){return!!(o&&o.__CANCEL__)}},function(t,r,e){(function(n){var o=e(20),a=e(467),c={"Content-Type":"application/x-www-form-urlencoded"};function u(g,v){!o.isUndefined(g)&&o.isUndefined(g["Content-Type"])&&(g["Content-Type"]=v)}function l(){var g;return(typeof XMLHttpRequest<"u"||typeof n<"u"&&Object.prototype.toString.call(n)==="[object process]")&&(g=e(212)),g}var f={adapter:l(),transformRequest:[function(v,b){return a(b,"Accept"),a(b,"Content-Type"),o.isFormData(v)||o.isArrayBuffer(v)||o.isBuffer(v)||o.isStream(v)||o.isFile(v)||o.isBlob(v)?v:o.isArrayBufferView(v)?v.buffer:o.isURLSearchParams(v)?(u(b,"application/x-www-form-urlencoded;charset=utf-8"),v.toString()):o.isObject(v)?(u(b,"application/json;charset=utf-8"),JSON.stringify(v)):v}],transformResponse:[function(v){if(typeof v=="string")try{v=JSON.parse(v)}catch{}return v}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(v){return v>=200&&v<300}};f.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(v){f.headers[v]={}}),o.forEach(["post","put","patch"],function(v){f.headers[v]=o.merge(c)}),t.exports=f}).call(this,e(44))},function(t,r,e){(function(n){var o=e(20),a=e(468),c=e(470),u=e(209),l=e(471),f=e(474),g=e(475),v=e(213);t.exports=function(S){return new n(function(O,A){var w=S.data,V=S.headers;o.isFormData(w)&&delete V["Content-Type"];var k=new XMLHttpRequest;if(S.auth){var M=S.auth.username||"",W=S.auth.password?unescape(encodeURIComponent(S.auth.password)):"";V.Authorization="Basic "+btoa(M+":"+W)}var Y=l(S.baseURL,S.url);if(k.open(S.method.toUpperCase(),u(Y,S.params,S.paramsSerializer),!0),k.timeout=S.timeout,k.onreadystatechange=function(){if(!(!k||k.readyState!==4)&&!(k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0))){var j="getAllResponseHeaders"in k?f(k.getAllResponseHeaders()):null,_=!S.responseType||S.responseType==="text"?k.responseText:k.response,z={data:_,status:k.status,statusText:k.statusText,headers:j,config:S,request:k};a(O,A,z),k=null}},k.onabort=function(){k&&(A(v("Request aborted",S,"ECONNABORTED",k)),k=null)},k.onerror=function(){A(v("Network Error",S,null,k)),k=null},k.ontimeout=function(){var j="timeout of "+S.timeout+"ms exceeded";S.timeoutErrorMessage&&(j=S.timeoutErrorMessage),A(v(j,S,"ECONNABORTED",k)),k=null},o.isStandardBrowserEnv()){var H=(S.withCredentials||g(Y))&&S.xsrfCookieName?c.read(S.xsrfCookieName):void 0;H&&(V[S.xsrfHeaderName]=H)}if("setRequestHeader"in k&&o.forEach(V,function(j,_){typeof w>"u"&&_.toLowerCase()==="content-type"?delete V[_]:k.setRequestHeader(_,j)}),o.isUndefined(S.withCredentials)||(k.withCredentials=!!S.withCredentials),S.responseType)try{k.responseType=S.responseType}catch(P){if(S.responseType!=="json")throw P}typeof S.onDownloadProgress=="function"&&k.addEventListener("progress",S.onDownloadProgress),typeof S.onUploadProgress=="function"&&k.upload&&k.upload.addEventListener("progress",S.onUploadProgress),S.cancelToken&&S.cancelToken.promise.then(function(j){k&&(k.abort(),A(j),k=null)}),w||(w=null),k.send(w)})}}).call(this,e(1))},function(t,r,e){var n=e(469);t.exports=function(a,c,u,l,f){var g=new Error(a);return n(g,c,u,l,f)}},function(t,r,e){var n=e(20);t.exports=function(a,c){c=c||{};var u={},l=["url","method","data"],f=["headers","auth","proxy","params"],g=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],v=["validateStatus"];function b(A,w){return n.isPlainObject(A)&&n.isPlainObject(w)?n.merge(A,w):n.isPlainObject(w)?n.merge({},w):n.isArray(w)?w.slice():w}function S(A){n.isUndefined(c[A])?n.isUndefined(a[A])||(u[A]=b(void 0,a[A])):u[A]=b(a[A],c[A])}n.forEach(l,function(w){n.isUndefined(c[w])||(u[w]=b(void 0,c[w]))}),n.forEach(f,S),n.forEach(g,function(w){n.isUndefined(c[w])?n.isUndefined(a[w])||(u[w]=b(void 0,a[w])):u[w]=b(void 0,c[w])}),n.forEach(v,function(w){w in c?u[w]=b(a[w],c[w]):w in a&&(u[w]=b(void 0,a[w]))});var C=l.concat(f).concat(g).concat(v),O=Object.keys(a).concat(Object.keys(c)).filter(function(w){return C.indexOf(w)===-1});return n.forEach(O,S),u}},function(t,r,e){function n(o){this.message=o}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},function(t,r,e){var n=e(480),o=e(482);function a(c,u,l){return n(o,c,u,l)}t.exports=a},function(t,r,e){var n=e(89),o=e(218),a=o?function(c,u){return o.set(c,u),c}:n;t.exports=a},function(t,r,e){var n=e(187),o=n&&new n;t.exports=o},function(t,r,e){var n=e(220),o=e(221),a=e(486),c=e(96),u=e(222),l=e(228),f=e(495),g=e(138),v=e(15),b=1,S=2,C=8,O=16,A=128,w=512;function V(k,M,W,Y,H,P,j,_,z,ae){var me=M&A,ye=M&b,Pe=M&S,Te=M&(C|O),Ue=M&w,_e=Pe?void 0:c(k);function je(){for(var Ke=arguments.length,De=Array(Ke),Ze=Ke;Ze--;)De[Ze]=arguments[Ze];if(Te)var tt=l(je),gt=a(De,tt);if(Y&&(De=n(De,Y,H,Te)),P&&(De=o(De,P,j,Te)),Ke-=gt,Te&&Ke<ae){var Ee=g(De,tt);return u(k,M,V,je.placeholder,W,De,Ee,_,z,ae-Ke)}var Le=ye?W:this,We=Pe?Le[k]:k;return Ke=De.length,_?De=f(De,_):Ue&&Ke>1&&De.reverse(),me&&z<Ke&&(De.length=z),this&&this!==v&&this instanceof je&&(We=_e||c(We)),We.apply(Le,De)}return je}t.exports=V},function(t,r){var e=Math.max;function n(o,a,c,u){for(var l=-1,f=o.length,g=c.length,v=-1,b=a.length,S=e(f-g,0),C=Array(b+S),O=!u;++v<b;)C[v]=a[v];for(;++l<g;)(O||l<f)&&(C[c[l]]=o[l]);for(;S--;)C[v++]=o[l++];return C}t.exports=n},function(t,r){var e=Math.max;function n(o,a,c,u){for(var l=-1,f=o.length,g=-1,v=c.length,b=-1,S=a.length,C=e(f-v,0),O=Array(C+S),A=!u;++l<C;)O[l]=o[l];for(var w=l;++b<S;)O[w+b]=a[b];for(;++g<v;)(A||l<f)&&(O[w+c[g]]=o[l++]);return O}t.exports=n},function(t,r,e){var n=e(487),o=e(226),a=e(227),c=1,u=2,l=4,f=8,g=32,v=64;function b(S,C,O,A,w,V,k,M,W,Y){var H=C&f,P=H?k:void 0,j=H?void 0:k,_=H?V:void 0,z=H?void 0:V;C|=H?g:v,C&=~(H?v:g),C&l||(C&=~(c|u));var ae=[S,C,w,_,P,z,j,M,W,Y],me=O.apply(void 0,ae);return n(S)&&o(me,ae),me.placeholder=A,a(me,S,C)}t.exports=b},function(t,r,e){var n=e(218),o=e(224),a=n?function(c){return n.get(c)}:o;t.exports=a},function(t,r){function e(){}t.exports=e},function(t,r,e){var n=e(87),o=e(137);function a(c,u){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=void 0}a.prototype=n(o.prototype),a.prototype.constructor=a,t.exports=a},function(t,r,e){var n=e(217),o=e(194),a=o(n);t.exports=a},function(t,r,e){var n=e(492),o=e(493),a=e(125),c=e(494);function u(l,f,g){var v=f+"";return a(l,o(v,c(n(v),g)))}t.exports=u},function(t,r){function e(n){var o=n;return o.placeholder}t.exports=e},function(t,r,e){var n=e(499),o=e(11),a=e(71),c=0/0,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,f=/^0o[0-7]+$/i,g=parseInt;function v(b){if(typeof b=="number")return b;if(a(b))return c;if(o(b)){var S=typeof b.valueOf=="function"?b.valueOf():b;b=o(S)?S+"":S}if(typeof b!="string")return b===0?b:+b;b=n(b);var C=l.test(b);return C||f.test(b)?g(b.slice(2),C?2:8):u.test(b)?c:+b}t.exports=v},function(t,r,e){var n=e(507),o=e(19);function a(c,u,l,f,g){return c===u?!0:c==null||u==null||!o(c)&&!o(u)?c!==c&&u!==u:n(c,u,l,f,a,g)}t.exports=a},function(t,r,e){var n=e(93),o=e(232),a=e(95),c=1,u=2;function l(f,g,v,b,S,C){var O=v&c,A=f.length,w=g.length;if(A!=w&&!(O&&w>A))return!1;var V=C.get(f),k=C.get(g);if(V&&k)return V==g&&k==f;var M=-1,W=!0,Y=v&u?new n:void 0;for(C.set(f,g),C.set(g,f);++M<A;){var H=f[M],P=g[M];if(b)var j=O?b(P,H,M,g,f,C):b(H,P,M,f,g,C);if(j!==void 0){if(j)continue;W=!1;break}if(Y){if(!o(g,function(_,z){if(!a(Y,z)&&(H===_||S(H,_,v,b,C)))return Y.push(z)})){W=!1;break}}else if(!(H===P||S(H,P,v,b,C))){W=!1;break}}return C.delete(f),C.delete(g),W}t.exports=l},function(t,r){function e(n,o){for(var a=-1,c=n==null?0:n.length;++a<c;)if(o(n[a],a,n))return!0;return!1}t.exports=e},function(t,r){function e(n){var o=-1,a=Array(n.size);return n.forEach(function(c,u){a[++o]=[u,c]}),a}t.exports=e},function(t,r,e){var n=e(11);function o(a){return a===a&&!n(a)}t.exports=o},function(t,r){function e(n,o){return function(a){return a==null?!1:a[n]===o&&(o!==void 0||n in Object(a))}}t.exports=e},function(t,r,e){var n=e(512),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,c=n(function(u){var l=[];return u.charCodeAt(0)===46&&l.push(""),u.replace(o,function(f,g,v,b){l.push(v?b.replace(a,"$1"):g||f)}),l});t.exports=c},function(t,r,e){var n=e(514),o=e(515);function a(c,u){return c!=null&&o(c,u,n)}t.exports=a},function(t,r,e){var n=e(120),o=e(521);function a(c,u,l,f,g){var v=-1,b=c.length;for(l||(l=o),g||(g=[]);++v<b;){var S=c[v];u>0&&l(S)?u>1?a(S,u-1,l,f,g):n(g,S):f||(g[g.length]=S)}return g}t.exports=a},function(t,r,e){var n=e(528),o=n();t.exports=o},function(t,r,e){var n=e(529),o=e(530);r.parse=W,r.resolve=H,r.resolveObject=P,r.format=Y,r.Url=a;function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var c=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r",`
`,"	"],g=["{","}","|","\\","^","`"].concat(f),v=["'"].concat(g),b=["%","/","?",";","#"].concat(v),S=["/","?","#"],C=255,O=/^[+a-z0-9A-Z_-]{0,63}$/,A=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},V={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},M=e(531);function W(j,_,z){if(j&&o.isObject(j)&&j instanceof a)return j;var ae=new a;return ae.parse(j,_,z),ae}a.prototype.parse=function(j,_,z){if(!o.isString(j))throw new TypeError("Parameter 'url' must be a string, not "+typeof j);var ae=j.indexOf("?"),me=ae!==-1&&ae<j.indexOf("#")?"?":"#",ye=j.split(me),Pe=/\\/g;ye[0]=ye[0].replace(Pe,"/"),j=ye.join(me);var Te=j;if(Te=Te.trim(),!z&&j.split("#").length===1){var Ue=l.exec(Te);if(Ue)return this.path=Te,this.href=Te,this.pathname=Ue[1],Ue[2]?(this.search=Ue[2],_?this.query=M.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var _e=c.exec(Te);if(_e){_e=_e[0];var je=_e.toLowerCase();this.protocol=je,Te=Te.substr(_e.length)}if(z||_e||Te.match(/^\/\/[^@\/]+@[^@\/]+/)){var Ke=Te.substr(0,2)==="//";Ke&&!(_e&&V[_e])&&(Te=Te.substr(2),this.slashes=!0)}if(!V[_e]&&(Ke||_e&&!k[_e])){for(var De=-1,Ze=0;Ze<S.length;Ze++){var tt=Te.indexOf(S[Ze]);tt!==-1&&(De===-1||tt<De)&&(De=tt)}var gt,Ee;De===-1?Ee=Te.lastIndexOf("@"):Ee=Te.lastIndexOf("@",De),Ee!==-1&&(gt=Te.slice(0,Ee),Te=Te.slice(Ee+1),this.auth=decodeURIComponent(gt)),De=-1;for(var Ze=0;Ze<b.length;Ze++){var tt=Te.indexOf(b[Ze]);tt!==-1&&(De===-1||tt<De)&&(De=tt)}De===-1&&(De=Te.length),this.host=Te.slice(0,De),Te=Te.slice(De),this.parseHost(),this.hostname=this.hostname||"";var Le=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!Le)for(var We=this.hostname.split(/\./),Ze=0,ut=We.length;Ze<ut;Ze++){var bt=We[Ze];if(bt&&!bt.match(O)){for(var mt="",It=0,Ge=bt.length;It<Ge;It++)bt.charCodeAt(It)>127?mt+="x":mt+=bt[It];if(!mt.match(O)){var Qe=We.slice(0,Ze),Et=We.slice(Ze+1),Tt=bt.match(A);Tt&&(Qe.push(Tt[1]),Et.unshift(Tt[2])),Et.length&&(Te="/"+Et.join(".")+Te),this.hostname=Qe.join(".");break}}}this.hostname.length>C?this.hostname="":this.hostname=this.hostname.toLowerCase(),Le||(this.hostname=n.toASCII(this.hostname));var Zt=this.port?":"+this.port:"",$t=this.hostname||"";this.host=$t+Zt,this.href+=this.host,Le&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),Te[0]!=="/"&&(Te="/"+Te))}if(!w[je])for(var Ze=0,ut=v.length;Ze<ut;Ze++){var pt=v[Ze];if(Te.indexOf(pt)!==-1){var ft=encodeURIComponent(pt);ft===pt&&(ft=escape(pt)),Te=Te.split(pt).join(ft)}}var et=Te.indexOf("#");et!==-1&&(this.hash=Te.substr(et),Te=Te.slice(0,et));var it=Te.indexOf("?");if(it!==-1?(this.search=Te.substr(it),this.query=Te.substr(it+1),_&&(this.query=M.parse(this.query)),Te=Te.slice(0,it)):_&&(this.search="",this.query={}),Te&&(this.pathname=Te),k[je]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Zt=this.pathname||"",Pt=this.search||"";this.path=Zt+Pt}return this.href=this.format(),this};function Y(j){return o.isString(j)&&(j=W(j)),j instanceof a?j.format():a.prototype.format.call(j)}a.prototype.format=function(){var j=this.auth||"";j&&(j=encodeURIComponent(j),j=j.replace(/%3A/i,":"),j+="@");var _=this.protocol||"",z=this.pathname||"",ae=this.hash||"",me=!1,ye="";this.host?me=j+this.host:this.hostname&&(me=j+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(me+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(ye=M.stringify(this.query));var Pe=this.search||ye&&"?"+ye||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||k[_])&&me!==!1?(me="//"+(me||""),z&&z.charAt(0)!=="/"&&(z="/"+z)):me||(me=""),ae&&ae.charAt(0)!=="#"&&(ae="#"+ae),Pe&&Pe.charAt(0)!=="?"&&(Pe="?"+Pe),z=z.replace(/[?#]/g,function(Te){return encodeURIComponent(Te)}),Pe=Pe.replace("#","%23"),_+me+z+Pe+ae};function H(j,_){return W(j,!1,!0).resolve(_)}a.prototype.resolve=function(j){return this.resolveObject(W(j,!1,!0)).format()};function P(j,_){return j?W(j,!1,!0).resolveObject(_):_}a.prototype.resolveObject=function(j){if(o.isString(j)){var _=new a;_.parse(j,!1,!0),j=_}for(var z=new a,ae=Object.keys(this),me=0;me<ae.length;me++){var ye=ae[me];z[ye]=this[ye]}if(z.hash=j.hash,j.href==="")return z.href=z.format(),z;if(j.slashes&&!j.protocol){for(var Pe=Object.keys(j),Te=0;Te<Pe.length;Te++){var Ue=Pe[Te];Ue!=="protocol"&&(z[Ue]=j[Ue])}return k[z.protocol]&&z.hostname&&!z.pathname&&(z.path=z.pathname="/"),z.href=z.format(),z}if(j.protocol&&j.protocol!==z.protocol){if(!k[j.protocol]){for(var _e=Object.keys(j),je=0;je<_e.length;je++){var Ke=_e[je];z[Ke]=j[Ke]}return z.href=z.format(),z}if(z.protocol=j.protocol,!j.host&&!V[j.protocol]){for(var ut=(j.pathname||"").split("/");ut.length&&!(j.host=ut.shift()););j.host||(j.host=""),j.hostname||(j.hostname=""),ut[0]!==""&&ut.unshift(""),ut.length<2&&ut.unshift(""),z.pathname=ut.join("/")}else z.pathname=j.pathname;if(z.search=j.search,z.query=j.query,z.host=j.host||"",z.auth=j.auth,z.hostname=j.hostname||j.host,z.port=j.port,z.pathname||z.search){var De=z.pathname||"",Ze=z.search||"";z.path=De+Ze}return z.slashes=z.slashes||j.slashes,z.href=z.format(),z}var tt=z.pathname&&z.pathname.charAt(0)==="/",gt=j.host||j.pathname&&j.pathname.charAt(0)==="/",Ee=gt||tt||z.host&&j.pathname,Le=Ee,We=z.pathname&&z.pathname.split("/")||[],ut=j.pathname&&j.pathname.split("/")||[],bt=z.protocol&&!k[z.protocol];if(bt&&(z.hostname="",z.port=null,z.host&&(We[0]===""?We[0]=z.host:We.unshift(z.host)),z.host="",j.protocol&&(j.hostname=null,j.port=null,j.host&&(ut[0]===""?ut[0]=j.host:ut.unshift(j.host)),j.host=null),Ee=Ee&&(ut[0]===""||We[0]==="")),gt)z.host=j.host||j.host===""?j.host:z.host,z.hostname=j.hostname||j.hostname===""?j.hostname:z.hostname,z.search=j.search,z.query=j.query,We=ut;else if(ut.length)We||(We=[]),We.pop(),We=We.concat(ut),z.search=j.search,z.query=j.query;else if(!o.isNullOrUndefined(j.search)){if(bt){z.hostname=z.host=We.shift();var mt=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;mt&&(z.auth=mt.shift(),z.host=z.hostname=mt.shift())}return z.search=j.search,z.query=j.query,(!o.isNull(z.pathname)||!o.isNull(z.search))&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.href=z.format(),z}if(!We.length)return z.pathname=null,z.search?z.path="/"+z.search:z.path=null,z.href=z.format(),z;for(var It=We.slice(-1)[0],Ge=(z.host||j.host||We.length>1)&&(It==="."||It==="..")||It==="",Qe=0,Et=We.length;Et>=0;Et--)It=We[Et],It==="."?We.splice(Et,1):It===".."?(We.splice(Et,1),Qe++):Qe&&(We.splice(Et,1),Qe--);if(!Ee&&!Le)for(;Qe--;Qe)We.unshift("..");Ee&&We[0]!==""&&(!We[0]||We[0].charAt(0)!=="/")&&We.unshift(""),Ge&&We.join("/").substr(-1)!=="/"&&We.push("");var Tt=We[0]===""||We[0]&&We[0].charAt(0)==="/";if(bt){z.hostname=z.host=Tt?"":We.length?We.shift():"";var mt=z.host&&z.host.indexOf("@")>0?z.host.split("@"):!1;mt&&(z.auth=mt.shift(),z.host=z.hostname=mt.shift())}return Ee=Ee||z.host&&We.length,Ee&&!Tt&&We.unshift(""),We.length?z.pathname=We.join("/"):(z.pathname=null,z.path=null),(!o.isNull(z.pathname)||!o.isNull(z.search))&&(z.path=(z.pathname?z.pathname:"")+(z.search?z.search:"")),z.auth=j.auth||z.auth,z.slashes=z.slashes||j.slashes,z.href=z.format(),z},a.prototype.parseHost=function(){var j=this.host,_=u.exec(j);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),j=j.substr(0,j.length-_.length)),j&&(this.hostname=j)}},function(t,r,e){(function(n){const o=e(18),a=e(17),c=e(2)("guidStorage"),u={};t.exports=u;let l,f;const g=function(S){return!(o(S.get)&&o(S.set))},v=function(S){if(f){S(null,f);return}l.get(S)};u.override=b=>{if(g(b))throw new Error("The storageInterface argument does not seem to be valid, it must implement get and set methods");l!==b&&(l=b,f&&l.set(f,S=>{S&&c.error(`Failed to send initial Guid value (${f}) to the newly assigned Guid Storage. The error was: ${S}`)}))},u.get=b=>{v((S,C)=>{if(S){b(S);return}C?f||(f=C):(C=a(),l.set(C,O=>{if(O){b(O);return}f=C})),b(null,f)})},u.getAsync=()=>new n((b,S)=>{u.get((C,O)=>C?S(C):b(O))}),u.override({get(b){let S;try{S=(typeof window!==void 0?window:commonjsGlobal).localStorage.getItem("opentok_client_id")}catch{S||(S=a())}b(null,S)},set(b,S){try{(typeof window!==void 0?window:commonjsGlobal).localStorage.setItem("opentok_client_id",b)}catch{}S(null)}}),u.set=b=>{f=b}}).call(this,e(1))},function(t,r){var e=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(e){var n=new Uint8Array(16);t.exports=function(){return e(n),n}}else{var o=new Array(16);t.exports=function(){for(var c=0,u;c<16;c++)c&3||(u=Math.random()*4294967296),o[c]=u>>>((c&3)<<3)&255;return o}}},function(t,r){for(var e=[],n=0;n<256;++n)e[n]=(n+256).toString(16).substr(1);function o(a,c){var u=c||0,l=e;return[l[a[u++]],l[a[u++]],l[a[u++]],l[a[u++]],"-",l[a[u++]],l[a[u++]],"-",l[a[u++]],l[a[u++]],"-",l[a[u++]],l[a[u++]],"-",l[a[u++]],l[a[u++]],l[a[u++]],l[a[u++]],l[a[u++]],l[a[u++]]].join("")}t.exports=o},function(t,r,e){const n=e(245),o=e(3),a=e(247),c=e(9),u={};t.exports=u;function l(f){if(typeof f=="string")return f;const g=[];return Object.keys(f).forEach(v=>{g.push(`${encodeURIComponent(v)}=${encodeURIComponent(f[v])}`)}),g.join("&").replace(/\+/g,"%20")}o.name!=="Node"&&(u.request=function(f,g,v){const b=new(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest,S=g||{};if(!S.method){v(new Error("No HTTP method specified in options"));return}g.overrideMimeType&&(b.overrideMimeType&&b.overrideMimeType(g.overrideMimeType),delete g.overrideMimeType),v&&(n(b).on("load",O=>{const A=O.target.status;A>=200&&(A<300||A===304)?v(null,O):v(O)}),n(b).on("error",v)),b.open(g.method,f,!0),S.headers||(S.headers={});for(const O in S.headers)Object.prototype.hasOwnProperty.call(S.headers,O)&&b.setRequestHeader(O,S.headers[O]);b.send(g.body&&l(g.body))},u.get=function(f,g,v){const b=c(g||{},{method:"GET"});u.request(f,b,v)},u.post=function(f,g,v){const b=c(g||{},{method:"POST"});u.request(f,b,v)},u.getJSON=function(f,g,v){g=g||{};const b=function(O,A){if(O)v(O,A&&A.target&&A.target.responseText);else{let w;try{w=JSON.parse(A.target.responseText)}catch(V){v(V,A&&A.target&&A.target.responseText);return}v(null,w,A)}},S=c({Accept:"application/json"},g.headers||{});u.get(f,c(g||{},{headers:S}),b)},a(u))},function(t,r,e){const n=e(246);t.exports=function(o,a){return new n(o,a)}},function(t,r,e){const n=e(18),o={attributes:e(540),css:e(541),classNames:e(546),observers:e(548)},a=/^#([\w-]*)$/,c=function(v){return Array.prototype.slice.call(v)},u=function(v,b){let S;if(typeof v>"u")return[];if(typeof v=="string"){S=[];const C=a.exec(v);if(b=b||document,C&&C[1]){const O=b.getElementById(C[1]);O&&S.push(O)}else S=b.querySelectorAll(v)}else v&&(v.nodeType||(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest&&v instanceof(typeof window!==void 0?window:commonjsGlobal).XMLHttpRequest||v===(typeof window!==void 0?window:commonjsGlobal))?(S=[v],b=v):Array.isArray(v)?(S=v.slice(),b=null):S=c(S);return S},l=function(v,b){const S=u(v,b);this.context=b,this.toArray=function(){return S},this.length=S.length,this.first=S[0],this.last=S[S.length-1],this.get=function(C){return C===void 0?S:S[C]}};t.exports=l,l._attachToOTHelpers={},l._attachToOTHelpers.removeElement=function(g){return new l(g).remove()},l.prototype.getAsArray=function(){let g=this.get();return n(g.forEach)||(g=c(g)),g},l.prototype.some=function(g,v){return this.getAsArray().some(g,v)},l.prototype.forEach=function(g,v){return this.getAsArray().forEach(g,v),this},l.prototype.map=function(g,v){return new l(this.getAsArray().map(g,v),this.context)},l.prototype.filter=function(g,v){return new l(this.getAsArray().filter(g,v),this.context)},l.prototype.find=function(g){return new l(g,this.first)},l.prototype.on=function(g,v){return this.forEach(b=>{b.addEventListener(g,v,!1)})},l.prototype.off=function(g,v){return this.forEach(b=>{b.removeEventListener(g,v,!1)})},l.prototype.once=function(g,v){const b=function(){this.off(g,b),v(...arguments)}.bind(this);return this.on(g,b)},l.prototype.appendTo=function(g){if(!g)throw new Error("appendTo requires a DOMElement to append to.");return this.forEach(v=>{g.appendChild(v)})},l.prototype.append=function(){const g=this.first;return g?(Array.prototype.forEach.call(arguments,v=>{g.appendChild(v)}),this):this},l.prototype.prepend=function(){if(arguments.length===0)return this;const g=this.first;let v;return g?(v=Array.prototype.slice.call(arguments),g.firstElementChild||g.appendChild(v.shift()),v.forEach(b=>{g.insertBefore(b,g.firstElementChild)}),this):this},l.prototype.after=function(g){if(!g)throw new Error("after requires a DOMElement to insert after");return this.forEach(v=>{v.parentElement&&(g!==v.parentNode.lastChild?v.parentElement.insertBefore(v,g):v.parentElement.appendChild(v))})},l.prototype.before=function(g){if(!g)throw new Error("before requires a DOMElement to insert before");return this.forEach(v=>{v.parentElement&&v.parentElement.insertBefore(v,g)})},l.prototype.remove=function(){return this.forEach(g=>{g.parentNode&&g.parentNode.removeChild(g)})},l.prototype.empty=function(){return this.forEach(g=>{for(;g.firstChild;)g.removeChild(g.firstChild)})},l.prototype.isDisplayNone=function(){return this.some(g=>(g.offsetWidth===0||g.offsetHeight===0)&&new l(g).css("display")==="none"?!0:g.parentNode&&g.parentNode.style?new l(g.parentNode).isDisplayNone():!1)};const f=function g(v){return(v.offsetWidth===0||v.offsetHeight===0)&&new l(v).css("display")==="none"?v:v.parentNode&&v.parentNode.style?g(v.parentNode):null};l._attachToOTHelpers.emptyElement=function(g){return new l(g).empty()},l._attachToOTHelpers._findElementWithDisplayNone=f,o.css(l,f),o.attributes(l),o.classNames(l),o.observers(l),["on","off","isDisplayNone","show","hide","css","makeVisibleAndYield","addClass","removeClass"].forEach(g=>{l._attachToOTHelpers[g]=function(){const v=Array.prototype.slice.apply(arguments),b=v.shift(),S=new l(b);return l.prototype[g].apply(S,v)}})},function(t,r,e){t.exports=function(n){const o={};Object.keys(n).forEach(a=>{o[a]=n[a]}),n._attachToOTHelpers=o}},function(t,r,e){const n=e(18),o=e(6),a=e(2)("Collection");t.exports=function(u){let l=[],f={};const g=u||"id";o(this);const v=function(O,A){return n(O[A])?O[A]():O[A]},b=function(O){this.trigger("update",O),this.trigger(`update:${O.target.id}`,O)}.bind(this),S=function(O){this.remove(O.target,O.reason)}.bind(this);this.reset=function(){l.forEach(function(C){C.off("updated",b,this),C.off("destroyed",S,this)},this),l=[],f={}},this.destroy=function(C){l.forEach(O=>{O&&typeof O.destroy=="function"&&O.destroy(C,!0)}),this.reset(),this.off()},this.get=function(C){return C&&f[C]!==void 0?l[f[C]]:void 0},this.has=function(C){return C&&f[C]!==void 0},this.toString=function(){return l.toString()},this.where=function(C,O){return n(C)?l.filter(C,O):l.filter(A=>{for(const w in C)if(C.hasOwnProperty(w)&&v(A,w)!==C[w])return!1;return!0})},this.find=function(C,O){let A;n(C)?A=C:A=function(V){for(const k in C)if(C.hasOwnProperty(k)&&v(V,k)!==C[k])return!1;return!0},A=A.bind(O);for(let w=0;w<l.length;++w)if(A(l[w])===!0)return l[w];return null},this.forEach=function(C,O){return l.forEach(C,O),this},this.map=function(C){return l.map(C)},this.add=function(C){const O=v(C,g);return this.has(O)?(a.warn(`Model ${O} is already in the collection`,l),this):(f[O]=l.push(C)-1,C.on("updated",b,this),C.on("destroyed",S,this),this.trigger("add",C),this.trigger(`add:${O}`,C),this)},this.remove=function(C,O){const A=v(C,g);l.splice(f[A],1);for(let w=f[A];w<l.length;++w)f[v(l[w],g)]=w;return delete f[A],C.off("updated",b,this),C.off("destroyed",S,this),this.trigger("remove",C,O),this.trigger(`remove:${A}`,C,O),this},this._triggerAddEvents=function(){this.where.apply(this,arguments).forEach(function(C){this.trigger("add",C),this.trigger(`add:${v(C,g)}`,C)},this)},this.length=function(){return l.length}}},function(t,r,e){const n=e(2)("deprecation");t.exports=function(a,c,u){let l=u===void 0?{}:u,f=l.value,g=l.name,v=g===void 0?`${c}`:g,b=l.getWarning,S=b===void 0?"":b,C=l.setWarning,O=C===void 0?"":C,A=l.canSet,w=A===void 0?!1:A,V=l.warnOnSet,k=V===void 0?!1:V,M=f,W=!1,Y=!k;Object.defineProperty(a,c,{get(){return W||(W=!0,n.warn(`${v} is deprecated, and will be removed in the future. ${S}`.trim())),M},set(P){w&&(M=P),Y||(Y=!0,w?n.warn(`${v} is deprecated. ${O}`.trim()):n.warn(`${v} is deprecated, and will be removed in the future. ${O}`.trim()))}})}},function(t,r,e){const n=e(3),o=e(11);let a;const c=["description","fileName","lineNumber","message","name","number","stack"],u=function(g,v,b){switch(arguments.length){case 1:o(g)&&(b=g,v=void 0,g=void 0);break;case 2:o(v)&&(b=v,v=void 0);break}if(b instanceof Error)for(let S=0,C=c.length;S<C;++S)this[c[S]]=b[c[S]];else if(o(b))for(const S in b)b.hasOwnProperty(S)&&(this[S]=b[S]);if(!(this.fileName&&this.lineNumber&&this.columnNumber&&this.stack)){const S=a();!this.fileName&&S.fileName&&(this.fileName=S.fileName),!this.lineNumber&&S.lineNumber&&(this.lineNumber=S.lineNumber),!this.columnNumber&&S.columnNumber&&(this.columnNumber=S.columnNumber),!this.stack&&S.stack&&(this.stack=S.stack)}!this.message&&g&&(this.message=g),(!this.name||this.name==="Error")&&v&&(this.name=v)};t.exports=u,u.prototype=Object.create(Error.prototype),u.prototype.toString=function(){let f="";return this.fileName&&(f+=` ${this.fileName}`),this.lineNumber&&(f+=` ${this.lineNumber}`,this.columnNumber&&(f+=`:${this.columnNumber}`)),`<${this.name?`${this.name} `:""}${this.message}${f}>`},u.prototype.valueOf=u.prototype.toString;const l=function(g,v){return v.slice(2).map(b=>{const S={fileName:b.getFileName(),linenumber:b.getLineNumber(),columnNumber:b.getColumnNumber()};return b.getFunctionName()&&(S.functionName=b.getFunctionName()),b.getMethodName()&&(S.methodName=b.getMethodName()),b.getThis()&&(S.self=b.getThis()),S})};a=function(){const g={};let v,b,S;switch(n.name){case"Firefox":case"Safari":try{(typeof window!==void 0?window:commonjsGlobal).call.js.is.explody()}catch(A){S=A}v=(S.stack||"").split(`
`),v.shift(),v.shift(),g.stack=v,b=/@(.+?):([0-9]+)(:([0-9]+))?$/.exec(v[0]),b&&(g.fileName=b[1],g.lineNumber=parseInt(b[2],10),b.length>3&&(g.columnNumber=parseInt(b[4],10)));break;case"Chrome":case"Node":case"Opera":var C=Error.prepareStackTrace;Error.prepareStackTrace=l,S=new Error,g.stack=S.stack,Error.prepareStackTrace=C;var O=g.stack[0];g.lineNumber=O.lineNumber,g.columnNumber=O.columnNumber,g.fileName=O.fileName,O.functionName&&(g.functionName=O.functionName),O.methodName&&(g.methodName=O.methodName),O.self&&(g.self=O.self);break;default:S=new Error,S.stack&&(g.stack=S.stack.split(`
`));break}return S.message&&(g.message=S.message),g}},function(t,r,e){var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(o){return o.trim().split(`
`).map(function(a){return a.trim()})},n.splitSections=function(o){var a=o.split(`
m=`);return a.map(function(c,u){return(u>0?"m="+c:c).trim()+`\r
`})},n.getDescription=function(o){var a=n.splitSections(o);return a&&a[0]},n.getMediaSections=function(o){var a=n.splitSections(o);return a.shift(),a},n.matchPrefix=function(o,a){return n.splitLines(o).filter(function(c){return c.indexOf(a)===0})},n.parseCandidate=function(o){var a;o.indexOf("a=candidate:")===0?a=o.substring(12).split(" "):a=o.substring(10).split(" ");for(var c={foundation:a[0],component:parseInt(a[1],10),protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],address:a[4],port:parseInt(a[5],10),type:a[7]},u=8;u<a.length;u+=2)switch(a[u]){case"raddr":c.relatedAddress=a[u+1];break;case"rport":c.relatedPort=parseInt(a[u+1],10);break;case"tcptype":c.tcpType=a[u+1];break;case"ufrag":c.ufrag=a[u+1],c.usernameFragment=a[u+1];break;default:c[a[u]]=a[u+1];break}return c},n.writeCandidate=function(o){var a=[];a.push(o.foundation),a.push(o.component),a.push(o.protocol.toUpperCase()),a.push(o.priority),a.push(o.address||o.ip),a.push(o.port);var c=o.type;return a.push("typ"),a.push(c),c!=="host"&&o.relatedAddress&&o.relatedPort&&(a.push("raddr"),a.push(o.relatedAddress),a.push("rport"),a.push(o.relatedPort)),o.tcpType&&o.protocol.toLowerCase()==="tcp"&&(a.push("tcptype"),a.push(o.tcpType)),(o.usernameFragment||o.ufrag)&&(a.push("ufrag"),a.push(o.usernameFragment||o.ufrag)),"candidate:"+a.join(" ")},n.parseIceOptions=function(o){return o.substr(14).split(" ")},n.parseRtpMap=function(o){var a=o.substr(9).split(" "),c={payloadType:parseInt(a.shift(),10)};return a=a[0].split("/"),c.name=a[0],c.clockRate=parseInt(a[1],10),c.channels=a.length===3?parseInt(a[2],10):1,c.numChannels=c.channels,c},n.writeRtpMap=function(o){var a=o.payloadType;o.preferredPayloadType!==void 0&&(a=o.preferredPayloadType);var c=o.channels||o.numChannels||1;return"a=rtpmap:"+a+" "+o.name+"/"+o.clockRate+(c!==1?"/"+c:"")+`\r
`},n.parseExtmap=function(o){var a=o.substr(9).split(" ");return{id:parseInt(a[0],10),direction:a[0].indexOf("/")>0?a[0].split("/")[1]:"sendrecv",uri:a[1]}},n.writeExtmap=function(o){return"a=extmap:"+(o.id||o.preferredId)+(o.direction&&o.direction!=="sendrecv"?"/"+o.direction:"")+" "+o.uri+`\r
`},n.parseFmtp=function(o){for(var a={},c,u=o.substr(o.indexOf(" ")+1).split(";"),l=0;l<u.length;l++)c=u[l].trim().split("="),a[c[0].trim()]=c[1];return a},n.writeFmtp=function(o){var a="",c=o.payloadType;if(o.preferredPayloadType!==void 0&&(c=o.preferredPayloadType),o.parameters&&Object.keys(o.parameters).length){var u=[];Object.keys(o.parameters).forEach(function(l){o.parameters[l]?u.push(l+"="+o.parameters[l]):u.push(l)}),a+="a=fmtp:"+c+" "+u.join(";")+`\r
`}return a},n.parseRtcpFb=function(o){var a=o.substr(o.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}},n.writeRtcpFb=function(o){var a="",c=o.payloadType;return o.preferredPayloadType!==void 0&&(c=o.preferredPayloadType),o.rtcpFeedback&&o.rtcpFeedback.length&&o.rtcpFeedback.forEach(function(u){a+="a=rtcp-fb:"+c+" "+u.type+(u.parameter&&u.parameter.length?" "+u.parameter:"")+`\r
`}),a},n.parseSsrcMedia=function(o){var a=o.indexOf(" "),c={ssrc:parseInt(o.substr(7,a-7),10)},u=o.indexOf(":",a);return u>-1?(c.attribute=o.substr(a+1,u-a-1),c.value=o.substr(u+1)):c.attribute=o.substr(a+1),c},n.parseSsrcGroup=function(o){var a=o.substr(13).split(" ");return{semantics:a.shift(),ssrcs:a.map(function(c){return parseInt(c,10)})}},n.getMid=function(o){var a=n.matchPrefix(o,"a=mid:")[0];if(a)return a.substr(6)},n.parseFingerprint=function(o){var a=o.substr(14).split(" ");return{algorithm:a[0].toLowerCase(),value:a[1]}},n.getDtlsParameters=function(o,a){var c=n.matchPrefix(o+a,"a=fingerprint:");return{role:"auto",fingerprints:c.map(n.parseFingerprint)}},n.writeDtlsParameters=function(o,a){var c="a=setup:"+a+`\r
`;return o.fingerprints.forEach(function(u){c+="a=fingerprint:"+u.algorithm+" "+u.value+`\r
`}),c},n.parseCryptoLine=function(o){var a=o.substr(9).split(" ");return{tag:parseInt(a[0],10),cryptoSuite:a[1],keyParams:a[2],sessionParams:a.slice(3)}},n.writeCryptoLine=function(o){return"a=crypto:"+o.tag+" "+o.cryptoSuite+" "+(typeof o.keyParams=="object"?n.writeCryptoKeyParams(o.keyParams):o.keyParams)+(o.sessionParams?" "+o.sessionParams.join(" "):"")+`\r
`},n.parseCryptoKeyParams=function(o){if(o.indexOf("inline:")!==0)return null;var a=o.substr(7).split("|");return{keyMethod:"inline",keySalt:a[0],lifeTime:a[1],mkiValue:a[2]?a[2].split(":")[0]:void 0,mkiLength:a[2]?a[2].split(":")[1]:void 0}},n.writeCryptoKeyParams=function(o){return o.keyMethod+":"+o.keySalt+(o.lifeTime?"|"+o.lifeTime:"")+(o.mkiValue&&o.mkiLength?"|"+o.mkiValue+":"+o.mkiLength:"")},n.getCryptoParameters=function(o,a){var c=n.matchPrefix(o+a,"a=crypto:");return c.map(n.parseCryptoLine)},n.getIceParameters=function(o,a){var c=n.matchPrefix(o+a,"a=ice-ufrag:")[0],u=n.matchPrefix(o+a,"a=ice-pwd:")[0];return c&&u?{usernameFragment:c.substr(12),password:u.substr(10)}:null},n.writeIceParameters=function(o){return"a=ice-ufrag:"+o.usernameFragment+`\r
a=ice-pwd:`+o.password+`\r
`},n.parseRtpParameters=function(o){for(var a={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=n.splitLines(o),u=c[0].split(" "),l=3;l<u.length;l++){var f=u[l],g=n.matchPrefix(o,"a=rtpmap:"+f+" ")[0];if(g){var v=n.parseRtpMap(g),b=n.matchPrefix(o,"a=fmtp:"+f+" ");switch(v.parameters=b.length?n.parseFmtp(b[0]):{},v.rtcpFeedback=n.matchPrefix(o,"a=rtcp-fb:"+f+" ").map(n.parseRtcpFb),a.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":a.fecMechanisms.push(v.name.toUpperCase());break}}}return n.matchPrefix(o,"a=extmap:").forEach(function(S){a.headerExtensions.push(n.parseExtmap(S))}),a},n.writeRtpDescription=function(o,a){var c="";c+="m="+o+" ",c+=a.codecs.length>0?"9":"0",c+=" UDP/TLS/RTP/SAVPF ",c+=a.codecs.map(function(l){return l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType}).join(" ")+`\r
`,c+=`c=IN IP4 0.0.0.0\r
`,c+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,a.codecs.forEach(function(l){c+=n.writeRtpMap(l),c+=n.writeFmtp(l),c+=n.writeRtcpFb(l)});var u=0;return a.codecs.forEach(function(l){l.maxptime>u&&(u=l.maxptime)}),u>0&&(c+="a=maxptime:"+u+`\r
`),c+=`a=rtcp-mux\r
`,a.headerExtensions&&a.headerExtensions.forEach(function(l){c+=n.writeExtmap(l)}),c},n.parseRtpEncodingParameters=function(o){var a=[],c=n.parseRtpParameters(o),u=c.fecMechanisms.indexOf("RED")!==-1,l=c.fecMechanisms.indexOf("ULPFEC")!==-1,f=n.matchPrefix(o,"a=ssrc:").map(function(C){return n.parseSsrcMedia(C)}).filter(function(C){return C.attribute==="cname"}),g=f.length>0&&f[0].ssrc,v,b=n.matchPrefix(o,"a=ssrc-group:FID").map(function(C){var O=C.substr(17).split(" ");return O.map(function(A){return parseInt(A,10)})});b.length>0&&b[0].length>1&&b[0][0]===g&&(v=b[0][1]),c.codecs.forEach(function(C){if(C.name.toUpperCase()==="RTX"&&C.parameters.apt){var O={ssrc:g,codecPayloadType:parseInt(C.parameters.apt,10)};g&&v&&(O.rtx={ssrc:v}),a.push(O),u&&(O=JSON.parse(JSON.stringify(O)),O.fec={ssrc:g,mechanism:l?"red+ulpfec":"red"},a.push(O))}}),a.length===0&&g&&a.push({ssrc:g});var S=n.matchPrefix(o,"b=");return S.length&&(S[0].indexOf("b=TIAS:")===0?S=parseInt(S[0].substr(7),10):S[0].indexOf("b=AS:")===0?S=parseInt(S[0].substr(5),10)*1e3*.95-50*40*8:S=void 0,a.forEach(function(C){C.maxBitrate=S})),a},n.parseRtcpParameters=function(o){var a={},c=n.matchPrefix(o,"a=ssrc:").map(function(f){return n.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"})[0];c&&(a.cname=c.value,a.ssrc=c.ssrc);var u=n.matchPrefix(o,"a=rtcp-rsize");a.reducedSize=u.length>0,a.compound=u.length===0;var l=n.matchPrefix(o,"a=rtcp-mux");return a.mux=l.length>0,a},n.parseMsid=function(o){var a,c=n.matchPrefix(o,"a=msid:");if(c.length===1)return a=c[0].substr(7).split(" "),{stream:a[0],track:a[1]};var u=n.matchPrefix(o,"a=ssrc:").map(function(l){return n.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="msid"});if(u.length>0)return a=u[0].value.split(" "),{stream:a[0],track:a[1]}},n.parseSctpDescription=function(o){var a=n.parseMLine(o),c=n.matchPrefix(o,"a=max-message-size:"),u;c.length>0&&(u=parseInt(c[0].substr(19),10)),isNaN(u)&&(u=65536);var l=n.matchPrefix(o,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substr(12),10),protocol:a.fmt,maxMessageSize:u};var f=n.matchPrefix(o,"a=sctpmap:");if(f.length>0){var g=n.matchPrefix(o,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(g[0],10),protocol:g[1],maxMessageSize:u}}},n.writeSctpDescription=function(o,a){var c=[];return o.protocol!=="DTLS/SCTP"?c=["m="+o.kind+" 9 "+o.protocol+" "+a.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+a.port+`\r
`]:c=["m="+o.kind+" 9 "+o.protocol+" "+a.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+a.port+" "+a.protocol+` 65535\r
`],a.maxMessageSize!==void 0&&c.push("a=max-message-size:"+a.maxMessageSize+`\r
`),c.join("")},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(o,a,c){var u,l=a!==void 0?a:2;o?u=o:u=n.generateSessionId();var f=c||"thisisadapterortc";return`v=0\r
o=`+f+" "+u+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},n.writeMediaSection=function(o,a,c,u){var l=n.writeRtpDescription(o.kind,a);if(l+=n.writeIceParameters(o.iceGatherer.getLocalParameters()),l+=n.writeDtlsParameters(o.dtlsTransport.getLocalParameters(),c==="offer"?"actpass":"active"),l+="a=mid:"+o.mid+`\r
`,o.direction?l+="a="+o.direction+`\r
`:o.rtpSender&&o.rtpReceiver?l+=`a=sendrecv\r
`:o.rtpSender?l+=`a=sendonly\r
`:o.rtpReceiver?l+=`a=recvonly\r
`:l+=`a=inactive\r
`,o.rtpSender){var f="msid:"+u.id+" "+o.rtpSender.track.id+`\r
`;l+="a="+f,l+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" "+f,o.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" "+f,l+="a=ssrc-group:FID "+o.sendEncodingParameters[0].ssrc+" "+o.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return l+="a=ssrc:"+o.sendEncodingParameters[0].ssrc+" cname:"+n.localCName+`\r
`,o.rtpSender&&o.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+o.sendEncodingParameters[0].rtx.ssrc+" cname:"+n.localCName+`\r
`),l},n.getDirection=function(o,a){for(var c=n.splitLines(o),u=0;u<c.length;u++)switch(c[u]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return c[u].substr(2)}return a?n.getDirection(a):"sendrecv"},n.getKind=function(o){var a=n.splitLines(o),c=a[0].split(" ");return c[0].substr(2)},n.isRejected=function(o){return o.split(" ",2)[1]==="0"},n.parseMLine=function(o){var a=n.splitLines(o),c=a[0].substr(2).split(" ");return{kind:c[0],port:parseInt(c[1],10),protocol:c[2],fmt:c.slice(3).join(" ")}},n.parseOLine=function(o){var a=n.matchPrefix(o,"o=")[0],c=a.substr(2).split(" ");return{username:c[0],sessionId:c[1],sessionVersion:parseInt(c[2],10),netType:c[3],addressType:c[4],address:c[5]}},n.isValidSDP=function(o){if(typeof o!="string"||o.length===0)return!1;for(var a=n.splitLines(o),c=0;c<a.length;c++)if(a[c].length<2||a[c].charAt(1)!=="=")return!1;return!0},t.exports=n},function(t,r,e){t.exports=function(o){return["Chrome","Safari","Edge","Opera"].indexOf(o.browserName)===-1||o.browserName==="Edge"&&!o.isChromiumEdge||o.isScreenSharing&&!o.capableSimulcastScreenshare||o.sessionInfo.p2pEnabled||!o.constraints.video&&!o.isCustomVideoTrack?1:o.videoDimensions.width>640&&o.videoDimensions.height>480?3:2}},function(t,r,e){var n=e(0),o=n(e(14)),a;const c=e(50);t.exports=(a=function(){function u(f,g){var v;let b=g===void 0?{}:g,S=b.requestAnimationFrame,C=S===void 0?(v=window).requestAnimationFrame.bind(v):S;(0,o.default)(this,"_lastCalled",c()),(0,o.default)(this,"_audioLevel",void 0),(0,o.default)(this,"_running",!1),this._requestAnimationFrame=C,this._getAudioLevel=f,this._startLoop()}var l=u.prototype;return l._startLoop=function(){this._running||(this._running=!0,this._requestAnimationFrame(this._loop.bind(this)))},l._loop=function(){this._getAudioLevel((g,v)=>{let b=null;if(!g){for(let S=0;S<v.length;S+=1){const C=v[S];let O=null;if(C.audioOutputLevel!==void 0){const A=parseFloat(C.audioOutputLevel)/32768;isNaN(A)||(O=A)}else C.audioLevel!==void 0&&(O=C.audioLevel);O!==null&&(b===null||O>b)&&(b=O)}this._audioLevel=b,this._running&&c()-this._lastCalled<1e4?this._requestAnimationFrame(this._loop.bind(this)):this._running=!1}})},l.destroy=function(){this._running=!1},l.sample=function(g){if(typeof g=="function")throw new Error("sample no longer takes a callback");return this._startLoop(),this._lastCalled=c(),this._audioLevel},u}(),a)},function(t,r,e){const n=e(255),o=e(578),a=e(150);function c(g,v,b){return!g.publish&&v?!1:typeof g.source=="boolean"?g.source:b?{mandatory:{sourceId:g.source}}:a(g.source)?{}:{deviceId:{exact:g.source}}}function u(g){let v=c(g.audio,g.enableRenegotiation,g.usingOptionalMandatoryStyle);if(v===!1)return!1;const b=g.usingOptionalMandatoryStyle,S=g.enableStereo,C=g.echoCancellation,O=g.noiseSuppression,A=g.autoGainControl,w=g.disableAudioProcessing,V=k=>{typeof v=="object"&&(b?(n(v,{optional:[]}),v.optional.push(k)):n(v,k))};return(S||w||!C||!O||!A)&&v===!0&&(v={}),S&&V({channelCount:2}),["echoCancellation","autoGainControl","noiseSuppression"].forEach(k=>{const M=!w&&g[k];V({[k]:M})}),v}function l(g){let v=c(g.video,g.enableRenegotiation,g.usingOptionalMandatoryStyle);if(v===!1)return!1;const b=g.videoDimensions,S=g.frameRate,C=g.maxResolution,O=g.facingMode,A=g.usingOptionalMandatoryStyle;if((b||S||C||O)&&v===!0&&(v={}),b){const w=b.width,V=b.height;A?(n(v,{optional:[]}),v.optional.push({minWidth:w},{maxWidth:w},{minHeight:V},{maxHeight:V})):n(v,{width:{ideal:w},height:{ideal:V}})}return S&&(A?(n(v,{optional:[]}),v.optional.push({minFrameRate:S},{maxFrameRate:S})):n(v,{frameRate:{ideal:S}})),C&&(A?n(v,{mandatory:{maxWidth:C.width,maxHeight:C.height}}):n(v,{width:{max:C.width},height:{max:C.height}})),O&&(A?(n(v,{optional:[]}),v.optional.push({facingMode:O})):n(v,{facingMode:{ideal:O}})),v}function f(g){return{audio:u(g),video:l(g)}}t.exports=function(v){const b=o(v);return{constraints:f(b),publishAudio:b.audio.publish,publishVideo:b.video.publish,frameRate:b.frameRate,videoDimensions:b.videoDimensions,audioDeviceId:typeof b.audio.source=="string"?b.audio.source:void 0,videoDeviceId:typeof b.video.source=="string"?b.video.source:void 0}}},function(t,r,e){var n=e(575),o=e(192),a=o(function(c,u,l){n(c,u,l)});t.exports=a},function(t,r,e){var n=e(64),o=e(54);function a(c,u,l){(l!==void 0&&!o(c[u],l)||l===void 0&&!(u in c))&&n(c,u,l)}t.exports=a},function(t,r){function e(n,o){if(!(o==="constructor"&&typeof n[o]=="function")&&o!="__proto__")return n[o]}t.exports=e},function(t,r,e){const n=e(3),o=n.name,a=n.version,c=n.isChromiumEdge;t.exports=c||o==="Chrome"&&a>=72||o==="Firefox"&&a>=66||o==="Opera"&&a>=60||o==="Safari"},function(t,r,e){var n=e(61),o=e(260);function a(c){return o(n(c).toLowerCase())}t.exports=a},function(t,r,e){var n=e(583),o=n("toUpperCase");t.exports=o},function(t,r){function e(n,o,a){var c=-1,u=n.length;o<0&&(o=-o>u?0:u+o),a=a>u?u:a,a<0&&(a+=u),u=o>a?0:a-o>>>0,o>>>=0;for(var l=Array(u);++c<u;)l[c]=n[c+o];return l}t.exports=e},function(t,r){var e="\\ud800-\\udfff",n="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",c=n+o+a,u="\\ufe0e\\ufe0f",l="\\u200d",f=RegExp("["+l+e+c+u+"]");function g(v){return f.test(v)}t.exports=g},function(t,r,e){var n=e(585),o=e(262),a=e(586);function c(u){return o(u)?a(u):n(u)}t.exports=c},function(t,r,e){const n=e(3);t.exports=Boolean(n.isChrome&&n.version>=74||n.isEdge&&n.version>=79)},function(t,r,e){const n=e(3);t.exports=o=>n.isElectron?o instanceof MediaStreamTrack&&o.label==="Screen":!1},function(t,r,e){var n=e(100),o=e(592),a=o(n);t.exports=a},function(t,r,e){t.exports=15e3},function(t,r,e){t.exports=function(n,o){return o===void 0&&(o=!1),n===void 0?o:n==="true"||n===!0}},function(t,r,e){const n=e(58);t.exports=function(a){const c=n(a);if(c.backgroundImageURI){const u=c.backgroundImageURI.split(":")[0];c.backgroundImageURI=["http","https","data"].indexOf(u)!==-1?u:"other"}return c}},function(t,r,e){const n=e(3);t.exports=()=>!n.isNode&&!n.isElectron?(n.isChrome||n.isOpera||n.isChromiumEdge)&&n.version>=74||n.isFirefox&&n.version>=68||n.isSafari&&n.version>=11:!1},function(t,r){function e(n,o){return t.exports=e=Object.setPrototypeOf||function(c,u){return c.__proto__=u,c},e(n,o)}t.exports=e},function(t,r,e){var n=e(34),o=e(78),a=e(608),c=e(60),u=e(42),l=e(611),f=e(141),g=e(185),v=1,b=2,S=4,C=f(function(O,A){var w={};if(O==null)return w;var V=!1;A=n(A,function(M){return M=c(M,O),V||(V=M.length>1),M}),u(O,g(O),w),V&&(w=o(w,v|b|S,l));for(var k=A.length;k--;)a(w,A[k]);return w});t.exports=C},function(t,r,e){var n=e(206),o=e(36),a=e(97),c=Math.max;function u(l,f,g){var v=l==null?0:l.length;if(!v)return-1;var b=g==null?0:a(g);return b<0&&(b=c(v+b,0)),n(l,o(f,3),b)}t.exports=u},function(t,r,e){var n=e(613);function o(a){return a&&a.length?n(a):[]}t.exports=o},function(t,r,e){const n=e(620),o=e(278),a=e(104)();t.exports=(c,u)=>{o(c,(l,f)=>{let g=[];a?typeof f.values=="function"?g=n(f.values()):typeof f.forEach!="function"?g=Object.keys(f).map(v=>f[v]):f.forEach(v=>{g.push(v)}):f.result().forEach(v=>{const b={};v.names().forEach(S=>{b[S]=v.stat(S)}),b.id=v.id,b.type=v.type,b.timestamp=v.timestamp,g.push(b)}),u(null,g)})}},function(t,r,e){var n=e(30),o=e(12),a=e(19),c="[object String]";function u(l){return typeof l=="string"||!o(l)&&a(l)&&n(l)==c}t.exports=u},function(t,r,e){var n=e(622),o=e(31);function a(c){return c==null?[]:n(c,o(c))}t.exports=a},function(t,r,e){const n=e(104)(),o=(u,l)=>{u.getStats(null).then(f=>l(null,f)).catch(l)},a=(u,l)=>{u.getStats(f=>{l(null,f)},l)},c=(u,l)=>{(n?o:a)(u,l)};t.exports=c},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(105)),a=n(e(37)),c=n(e(14)),u=e(28),l=n(e(39)),f=n(e(634)),g=n(e(636)),v=n(e(50)),b=n(e(2));const S=(0,b.default)("QoS");let C=function(A){(0,a.default)(w,A);function w(){for(var k,M=arguments.length,W=new Array(M),Y=0;Y<M;Y++)W[Y]=arguments[Y];return k=A.call(this,...W)||this,(0,c.default)((0,o.default)(k),"_peerConnection",void 0),(0,c.default)((0,o.default)(k),"_isPublisher",void 0),(0,c.default)((0,o.default)(k),"timeoutId",void 0),(0,c.default)((0,o.default)(k),"_creationTime",(0,v.default)()),(0,c.default)((0,o.default)(k),"offerMessagesReceived",0),(0,c.default)((0,o.default)(k),"prevStats",{timeStamp:(0,v.default)()}),(0,c.default)((0,o.default)(k),"changeCounters",{videoCodec:new g.default,audioCodec:new g.default}),k}var V=w.prototype;return V.startCollecting=function(M,W){if(!M||!M.getStats)return;this._isPublisher=W;const Y=Boolean(this._peerConnection);if(this._peerConnection=M,Y)return;const H=P=>{const j=(0,v.default)(),_={timeStamp:j,duration:Math.round((j-this._creationTime)/1e3),period:Math.round((j-this.prevStats.timeStamp)/1e3)};(0,f.default)(this._peerConnection,this.prevStats,_,this._isPublisher,(z,ae)=>{if(z){S.error("Failed to Parse QOS Stats:",z);return}this.handleParsedStats(ae),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>H(w.INTERVAL),P)})};this.timeoutId=setTimeout(()=>H(w.INTERVAL-w.INITIAL_INTERVAL),w.INITIAL_INTERVAL)},V.stopCollecting=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this._peerConnection=null},V.handleOfferMessageReceived=function(){this.offerMessagesReceived+=1},V.handleParsedStats=function(M){Object.keys(this.changeCounters).forEach(H=>{this.changeCounters[H].onValue(M[H]),M[`${H}ChangeCount`]=this.changeCounters[H].changeCount}),M.offerMessagesReceived=this.offerMessagesReceived;const W=(0,l.default)(M);if(["audioSentBytes","audioSentPackets","audioSentPacketsLost","videoSentBytes","videoSentPackets","videoSentPacketsLost","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost"].forEach(H=>{W[H]=this.prevStats&&this.prevStats[H]?M[H]-this.prevStats[H]:M[H]}),this.prevStats&&this.prevStats.videoFramesReceived){const H=M.videoFramesReceived-this.prevStats.videoFramesReceived,P=M.period;W.videoFrameRateReceived=Math.round(H/P)}this.prevStats=M,delete W.framesDecoded,delete W.framesEncoded,this.emit("stats",W)},w}(u.EventEmitter);C.INITIAL_INTERVAL=1e3,C.INTERVAL=3e4;var O=C;r.default=O},function(t,r,e){t.exports=n=>{switch(n>>24){case 0:return"TURN/TLS";case 1:return"TURN/TCP";case 2:return"TURN/UDP";default:return""}}},function(t,r,e){const n=e(17),o=e(160),a=o.default,c=e(7),u=e(13);t.exports=function(f){let g=f===void 0?{}:f,v=g.haveGetDisplayMedia,b=v===void 0?a:v,S=g.global,C=S===void 0?typeof window!==void 0?window:commonjsGlobal:S,O=g.Errors,A=O===void 0?c:O,w=g.otError,V=w===void 0?u():w;const k=!b&&!!C.navigator.webkitGetUserMedia&&!C.navigator.userAgent.match(/android/i)&&typeof C.chrome<"u";return{isSupportedInThisBrowser:k,autoRegisters:!1,extensionRequired:!0,getConstraintsShowsPermissionUI:!0,sources:{screen:!0,application:!1,window:!0,browser:!0},register(M,W){return W===2?this.registerVersion2(M):this.registerVersion1(M)},registerVersion1(M){if(!M)throw new Error("initChromeScreenSharingExtensionHelper: extensionID is required.");const W=k,Y={};let H;const P=`com.tokbox.screenSharing.${M}`,j=function(ye,Pe){const Te={payload:Pe,from:"jsapi"};return Te[P]=ye,Te},_=function(ye,Pe){let Te;const Ue=n();return Y[Ue]=function(){clearTimeout(Te),Te=null,ye(...arguments)},Pe&&(Te=setTimeout(()=>{delete Y[Ue],ye(V(A.TIMEOUT,new Error("Timeout waiting for response to screensharing request.")))},Pe)),Ue},z=function(ye){if(!ye)throw new Error("isAvailable: callback is required.");if(!W){setTimeout(ye.bind(null,!1));return}if(H!==void 0)setTimeout(ye.bind(null,H));else{const Pe=_(Ue=>{H!==!0&&(H=Ue==="extensionLoaded"),ye(H)},2e3),Te=j("isExtensionInstalled",{requestId:Pe});C.postMessage(Te,"*")}},ae=function(ye,Pe,Te){if(!Te)throw new Error("getSourceId: callback is required");z(Ue=>{if(!Ue)return Te(V(A.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));const _e=_((je,Ke)=>{typeof je=="object"&&je.name&&je.stack?Te(je):je==="permissionDenied"?Te(V(A.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):(Pe.video||(Pe.video={}),Pe.video.mandatory||(Pe.video.mandatory={}),Pe.video.mandatory.chromeMediaSource="desktop",Pe.video.mandatory.chromeMediaSourceId=Ke.sourceId,Te(void 0,Pe))});C.postMessage(j("getSourceId",{requestId:_e,source:ye}),"*")})};return C.addEventListener("message",me=>{if(me.origin!==C.location.origin||!(me.data!=null&&typeof me.data=="object")||me.data.from!=="extension")return;const ye=me.data[P],Pe=me.data.payload;if(Pe&&Pe.requestId){const Te=Y[Pe.requestId];delete Y[Pe.requestId],Te&&Te(ye,Pe)}ye==="extensionLoaded"&&(H=!0)}),{extensionAPIVersion:1,extensionID:M,isInstalled:z,getConstraints:ae}},registerVersion2(M){const W=k&&typeof C.chrome.runtime<"u",Y=function(j){if(!j)throw new Error("isAvailable: callback is required.");if(!W){setTimeout(j.bind(null,!1));return}C.chrome.runtime.sendMessage(M,{type:"isInstalled"},null,_=>{setTimeout(j.bind(null,!!_))})};return{extensionAPIVersion:2,extensionID:M,isInstalled:Y,getConstraints:function(j,_,z){if(!z)throw new Error("getSourceId: callback is required");Y(ae=>{if(!ae)return z(V(A.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,new Error("Extension is not installed")));C.chrome.runtime.sendMessage(M,{type:"getSourceId",source:j},null,me=>{me.error==="permissionDenied"?z(V(A.USER_MEDIA_ACCESS_DENIED,new Error("User denied access to screensharing"))):me.error?z(new Error(`UnexpectError: ${me.error}`)):(_.video||(_.video={}),_.video.mandatory||(_.video.mandatory={}),_.video.mandatory.chromeMediaSource="desktop",_.video.mandatory.chromeMediaSourceId=me.sourceId,z(void 0,_))})})}}}}}},function(t,r,e){(function(n){const o=e(156),a=e(106);t.exports=function(u){u===void 0&&(u={});const l=u.Archiving||e(641),f=u.AudioLevelMeter||e(283),g=u.AudioLevelTransformer||e(145),v=u.BackingBar||e(284),b=u.Chrome||e(146),S=u.MuteButton||e(285)(),C=u.NamePanel||e(286),O=u.VideoDisabledIndicator||e(287),A=u.StylableComponent||e(153),w=u.logging||e(2)("createChromeMixin");return function(k,M){let W=M===void 0?{}:M,Y=W.name,H=W.publishAudio,P=W.publishVideo,j=W.audioSource,_=W.showControls,z=W.shouldAllowAudio,ae=W.logAnalyticsEvent,me,ye,Pe;const Te={},Ue=o(),_e=De=>{if(De===!1)return"off";const Ze=k.getStyle("buttonDisplayMode");return Ze===!1?"on":Ze};let je=new n((De,Ze)=>{Te.init=tt=>{k.getStyle("showArchiveStatus")||ae("showArchiveStatus","createChrome",{mode:"off"});const gt={backingBar:new v({nameMode:Y?k.getStyle("nameDisplayMode"):"off",muteMode:_e(k.getStyle("buttonDisplayMode"))}),name:new C({name:Y,mode:k.getStyle("nameDisplayMode")}),archive:new l({show:Boolean(k.getStyle("showArchiveStatus"))&&k.getStyle("archiveStatusDisplayMode")!=="off",archiving:!1}),muteButton:new S({muted:H===!1,mode:_e.call(null,k.getStyle("buttonDisplayMode"))})};me=new f({mode:k.getStyle("audioLevelDisplayMode")});const Ee=new g,Le=new a(()=>{const We=H?Ee.transform(k.loudness):0;me.setValue(We)});me.watchVisibilityChanged(We=>{We?Le.start():Le.stop()}),me.audioOnly(!P&&H),gt.audioLevel=me,gt.videoDisabledIndicator=new O({mode:k.getStyle("videoDisabledDisplayMode")}),tt&&tt.domElement&&(Pe=tt,ye=new b({parent:Pe.domElement}).set(gt).on({muted:()=>k.publishAudio(!1),unmuted:()=>k.publishAudio(!0)}),(j===null||j===!1)&&Te.removeAudioTrack(),De())},Te.reset=()=>{Ze(new Error("Chrome still being created")),ye&&(ye.destroy(),ye=null)},Te.destroy=()=>{Te.reset(),Ue.releaseAll(),je=null}});je.catch(De=>{(!De||De.message!=="Chrome still being created")&&w.error("createChromeMixin failed to setup UI",De)}),Te.setAudioOnly=De=>{me&&me.audioOnly(De)},Te.setArchivingStatus=De=>{ye&&ye.archive.setArchiving(De)},Te.setMuted=De=>{ye&&ye.muteButton&&ye.muteButton.muted(De)},Te.removeAudioTrack=()=>{ye&&ye.muteButton&&ye.muteButton.remove()},Te.addAudioTrack=()=>{ye&&ye.muteButton&&ye.muteButton.add()},Te.videoDisabledIndicator={disableVideo:function(){for(var Ze,tt=arguments.length,gt=new Array(tt),Ee=0;Ee<tt;Ee++)gt[Ee]=arguments[Ee];return(Ze=ye)==null?void 0:Ze.videoDisabledIndicator.disableVideo(...gt)},setWarning:function(){for(var Ze,tt=arguments.length,gt=new Array(tt),Ee=0;Ee<tt;Ee++)gt[Ee]=arguments[Ee];return(Ze=ye)==null?void 0:Ze.videoDisabledIndicator.setWarning(...gt)}},A(k,{showArchiveStatus:!0,nameDisplayMode:"auto",buttonDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioLevelDisplayMode:z?"auto":"off",archiveStatusDisplayMode:"auto",backgroundImageURI:null},_,De=>{ae("SetStyle","Publisher",De,null,.1)});const Ke=(De,Ze)=>{je.then(()=>{switch(De){case"nameDisplayMode":ye.name.setDisplayMode(Ze),ye.backingBar.setNameMode(Ze);break;case"showArchiveStatus":ae("showArchiveStatus","styleChange",{mode:Ze?"on":"off"}),ye.archive.setShowArchiveStatus(Boolean(Ze));break;case"archiveStatusDisplayMode":ye.archive.setShowArchiveStatus(Ze!=="off");break;case"buttonDisplayMode":ye.muteButton.setDisplayMode(Ze),ye.backingBar.setMuteMode(Ze);break;case"audioLevelDisplayMode":ye.audioLevel.setDisplayMode(Ze);break;case"backgroundImageURI":Pe.setBackgroundImageURI(Ze);break}})};return k.on("styleValueChanged",Ke),Ue.add(()=>k.off("styleValueChanged",Ke)),Te}}}).call(this,e(1))},function(t,r,e){(function(n){const o=e(107),a=e(38),c=e(8),u=e(28);t.exports=function(f){const g=this,v=new u;let b,S,C,O,A=!0,w=!1,V="auto";const k=f.maxValue||1,M=f.minValue||0;function W(){S=c.createElement("div",{className:"OT_audio-level-meter__value"},""),b=c.createElement("div",{className:"OT_audio-level-meter__audio-only-img"},"");const _=g.domElement;_.appendChild(b),_.appendChild(S),g.watchVisibilityChanged(z=>{z?c.removeClass(g.domElement,"OT_hide-forced"):c.addClass(g.domElement,"OT_hide-forced")})}function Y(){v.removeAllListeners("visibilityChanged")}function H(){const _=(C-M)/(k-M);S.style.transform=`scale(${Math.sqrt(_)})`}function P(){const _=(w&&V==="auto"||V==="on")&&A;O!==_&&(O=_,v.emit("visibilityChanged",_))}o(g,{audioOnly:{get(){return w},set(_){w=_,P()}}}),g.setValue=function(_){C=_,H()},g.watchVisibilityChanged=function(_){return v.on("visibilityChanged",_),n.resolve().then(()=>{_(O)}),function(){v.removeListener("visibilityChanged",_)}};const j={mode:f?f.mode:"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-level-meter"},onCreate:W,onDestroy:Y};a(this,j),g.setDisplayMode=function(_){V=_,P()},g.getDisplayMode=function(){return V},g.showAfterLoading=function(){A=!0,P()},g.hideWhileLoading=function(){A=!1,P()},P()}}).call(this,e(1))},function(t,r,e){const n=e(38);t.exports=function(a){let c=a.nameMode,u=a.muteMode;function l(){return c==="on"||u==="on"?"on":c==="mini"||u==="mini"?"mini":c==="mini-auto"||u==="mini-auto"?"mini-auto":c==="auto"||u==="auto"?"auto":"off"}n(this,{mode:l(),nodeName:"div",htmlContent:"",htmlAttributes:{className:"OT_bar OT_edge-bar-item"}}),this.setNameMode=function(f){c=f,this.setDisplayMode(l())},this.setMuteMode=function(f){u=f,this.setDisplayMode(l())}}},function(t,r,e){const n=e(8),o=e(38),a=e(107);t.exports=function(u){u===void 0&&(u={});const l=u.OTHelpers||n,f=u.Widget||o;return function(v){let b=v.muted||!1;const S=()=>{b?l.addClass(this.domElement,"OT_active"):l.removeClass(this.domElement,"OT_active ")},C=()=>(b=!b,S(),b?this.parent.trigger("muted",this):this.parent.trigger("unmuted",this),!1),O=k=>{l.on(k,"click",C)},A=k=>{l.off(k,"click",C)};a(this,{muted:{get(){return b},set(k){b=k,S()}}});const w=b?"OT_edge-bar-item OT_mute OT_active":"OT_edge-bar-item OT_mute";f(this,{mode:v.mode,nodeName:"button",htmlContent:"Mute",htmlAttributes:{className:w,type:"button"},onCreate:O,onDestroy:A});let V;this.remove=()=>{this.domElement&&this.domElement.parentNode&&(V=this.domElement.parentNode,this.domElement.parentNode.removeChild(this.domElement))},this.add=()=>{V&&this.domElement&&!this.domElement.parentNode&&V.appendChild(this.domElement)}}}},function(t,r,e){const n=e(38),o=a=>{const c=document.createElement("div");return c.textContent=a,c.innerHTML};t.exports=function(c){let u=c.name;(!u||u.trim().length==="")&&(u=null,c.mode="off"),this.setName=function(l){u||this.setDisplayMode("auto"),u=o(l),this.domElement.innerHTML=u}.bind(this),u=o(u),n(this,{mode:c.mode,nodeName:"h1",htmlContent:u,htmlAttributes:{className:"OT_name OT_edge-bar-item"}})}},function(t,r,e){const n=e(38),o=e(8);t.exports=function(c){let u=!1,l=!1;const f=function(v){const b=["auto","on"].indexOf(this.getDisplayMode())>-1;o.removeClass(v,"OT_video-disabled OT_video-disabled-warning OT_active"),b&&(u?o.addClass(v,"OT_video-disabled"):l&&o.addClass(v,"OT_video-disabled-warning"),o.addClass(v,"OT_active"))}.bind(this);this.disableVideo=function(v){u=v,v===!0&&(l=!1),f(this.domElement)},this.setWarning=function(v){l=v,f(this.domElement)},n(this,{mode:c.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-disabled-indicator"}});const g=this.setDisplayMode.bind(this);this.setDisplayMode=function(v){g(v),f(this.domElement)}}},function(t,r,e){t.exports=function(o){o===void 0&&(o={});const a=o.global||(typeof window!==void 0?window:commonjsGlobal);return function(){if(a.navigator.mediaDevices){const u=a.navigator.mediaDevices;return u.enumerateDevices&&u.enumerateDevices.bind(u)}}}},function(t,r,e){const n=e(3),o=e(160).default,a=()=>!n.isLegacyEdge&&!n.isElectron&&o&&!n.isAndroid;t.exports={isSupportedInThisBrowser:a(),autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:n.name!=="Safari",browser:n.name!=="Safari"},register(){return{isInstalled(c){c(void 0)},getConstraints(c,u,l){l(void 0,{video:u.video,audio:u.audio})}}}}},function(t,r,e){const n=o=>o&&typeof o=="object"&&typeof o.kind=="string"&&typeof o.stop=="function"&&typeof o.enabled=="boolean";r.isMediaStreamTrack=n},function(t,r,e){e.r(r),function(n){var o=function(f,g,v,b){return new(v||(v=n))(function(S,C){function O(V){try{w(b.next(V))}catch(k){C(k)}}function A(V){try{w(b.throw(V))}catch(k){C(k)}}function w(V){V.done?S(V.value):new v(function(k){k(V.value)}).then(O,A)}w((b=b.apply(f,g||[])).next())})},a=function(f,g){var v={label:0,sent:function(){if(C[0]&1)throw C[1];return C[1]},trys:[],ops:[]},b,S,C,O;return O={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function A(V){return function(k){return w([V,k])}}function w(V){if(b)throw new TypeError("Generator is already executing.");for(;v;)try{if(b=1,S&&(C=S[V[0]&2?"return":V[0]?"throw":"next"])&&!(C=C.call(S,V[1])).done)return C;switch(S=0,C&&(V=[0,C.value]),V[0]){case 0:case 1:C=V;break;case 4:return v.label++,{value:V[1],done:!1};case 5:v.label++,S=V[1],V=[0];continue;case 7:V=v.ops.pop(),v.trys.pop();continue;default:if(C=v.trys,!(C=C.length>0&&C[C.length-1])&&(V[0]===6||V[0]===2)){v=0;continue}if(V[0]===3&&(!C||V[1]>C[0]&&V[1]<C[3])){v.label=V[1];break}if(V[0]===6&&v.label<C[1]){v.label=C[1],C=V;break}if(C&&v.label<C[2]){v.label=C[2],v.ops.push(V);break}C[2]&&v.ops.pop(),v.trys.pop();continue}V=g.call(f,v)}catch(k){V=[6,k],S=0}finally{b=C=0}if(V[0]&5)throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}};function c(){return typeof window<"u"||typeof window!==void 0?window:commonjsGlobal}var u="onFailure must return boolean, or delay in ms";function l(f,g,v){return v===void 0&&(v=10),function(){for(var b=[],S=0;S<arguments.length;S++)b[S]=arguments[S];return o(this,void 0,void 0,function(){var C,O,A;return a(this,function(w){switch(w.label){case 0:C=0,O=function(){var V,k,M;return a(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,,6]),V={},[4,f.apply(void 0,b)];case 1:return[2,(V.value=W.sent(),V)];case 2:if(k=W.sent(),M=g(k,C),M===!1||M==null||C>=v)throw k;return typeof M!="number"?[3,4]:[4,new n(function(Y){return c().setTimeout(Y,M)})];case 3:return W.sent(),[3,5];case 4:if(M!==!0)throw new Error(u);W.label=5;case 5:return[3,6];case 6:return[2]}})},w.label=1;case 1:return(C+=1)?[5,O()]:[3,3];case 2:return A=w.sent(),typeof A=="object"?[2,A.value]:[3,1];case 3:return[2]}})})}}r.default=l}.call(this,e(1))},function(t,r,e){const n=e(2)("videoContentHint"),o=["","text","motion","detail"],a=f=>o.includes(f),c=f=>{var g;return f==null||(g=f.getVideoTracks())==null?void 0:g[0]},u=(f,g)=>{if(!a(g)){n.warn('Invalid content hint. Valid content hints are "text", "detail", "motion", or ""');return}const v=c(f);if(!v){n.warn("Tried to set contentHint but no video track is present");return}if(v.contentHint===void 0){n.warn("contentHint not supported by this browser");return}v.contentHint=g},l=f=>{const g=c(f);return(g==null?void 0:g.contentHint)||""};t.exports={isValidVideoContentHint:a,setVideoContentHint:u,getVideoContentHint:l}},function(t,r,e){const n=e(107);t.exports=function(){return function(c,u){let l;n(this,{muted:{get(){return l},set(f){if(l===f)return;l=f;const g=c.getAudioTracks();for(let v=0,b=g.length;v<b;++v)g[v].enabled=!l}}}),u!==void 0?this.muted(u===!0):c.getAudioTracks().length?this.muted(!c.getAudioTracks()[0].enabled):this.muted(!1)}}},function(t,r,e){t.exports=function(o){o===void 0&&(o={});const a=o.Errors||e(7),c=o.otError||e(13)(),u={};return(typeof window!==void 0?window:commonjsGlobal).MediaError&&(u[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_ABORTED]={name:a.MEDIA_ERR_ABORTED,message:"The fetching process for the media resource was aborted by the user agent at the user's request."},u[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_NETWORK]={name:a.MEDIA_ERR_NETWORK,message:"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable."},u[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_DECODE]={name:a.MEDIA_ERR_DECODE,message:"An error of some description occurred while decoding the media resource, after the resource was established to be usable."},u[(typeof window!==void 0?window:commonjsGlobal).MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]={name:a.MEDIA_ERR_SRC_NOT_SUPPORTED,message:"The media resource indicated by the src attribute was not suitable."}),function(f){const g=u[f.code];return g?c(g.name,new Error(`There was an unexpected problem with the Video Stream: ${g.message}`)):new Error(`An unknown error occurred${f.message?`: ${f.message}`:"."}`)}}},function(t,r,e){(function(n){var o=e(0),a=o(e(16)),c=o(e(4)),u=o(e(5)),l=o(e(14));const f=e(6),g=e(63),v=e(652),b=e(653),S=e(654),C=e(109),O=e(3),A=e(24)(),w=A.hasAudioOutputApiSupport,V=e(296),k=e(108),M=k.getCurrentAudioOutputDeviceId;function W(P,j){const _=document.createElement("video");return b(_),_.autoplay=!0,_.playsinline=!0,_.innerHTML=P,_.setAttribute("autoplay",""),_.setAttribute("playsinline",""),j===!0&&(_.muted="true"),_}function Y(){const P=W("");return P.setAttribute("style","display:none"),P}function H(P){P===void 0&&(P={});const j=P.audioContext||e(159)(),_=P.canBeOrientatedMixin||e(655),z=P.document||(typeof window!==void 0?window:commonjsGlobal).document,ae=P.listenForTracksEnded||e(656)(),me=P.logging||e(2),ye=P.OTHelpers||e(8),Pe=P.videoElementErrorMap||e(294)(),Te=P.WebaudioAudioLevelSampler||e(147),Ue=P.global||(typeof window!==void 0?window:commonjsGlobal);let _e=1;return function(){function Ke(Ze,tt){var gt=this;let Ee=Ze._inject,Le=Ee===void 0?{}:Ee,We=Le.createVideoElement,ut=We===void 0?W:We,bt=Le.createAudioOnlyVideoElement,mt=bt===void 0?Y:bt,It=Ze.muted,Ge=Ze.fallbackText,Qe=Ze.widgetType;(0,l.default)(this,"_domElement",void 0),(0,l.default)(this,"_domAudioOnlyVideoElement",void 0),(0,l.default)(this,"_blockedVolume",void 0),(0,l.default)(this,"_mediaStoppedListener",void 0),(0,l.default)(this,"_audioLevelSampler",void 0),(0,l.default)(this,"_playInterrupts",0),(0,l.default)(this,"_isVideoLoadedMetaData",!1),(0,l.default)(this,"_audioOnlyVideoElementWatcher",void 0),(0,l.default)(this,"_blinkStartTime",null),this.logging=me(`NativeVideoElementWrapper:${_e}`),_e+=1,f(this),this._defaultAudioVolume=tt,this._widgetType=Qe,this._emitVideoPlayAttempt=()=>{this._blinkStartTime=new Date().getTime(),this.trigger("amrLogEvent","AMRTransitionVideo","Attempt")},this._emitVideoPlaySuccess=()=>{const $t=new Date().getTime()-this._blinkStartTime;this.trigger("amrLogEvent","AMRTransitionVideo","Success",{attemptDuration:$t}),this._blinkStartTime=null},this._emitVideoPlayFailure=()=>{this.trigger("amrLogEvent","AMRTransitionVideo","Failure")};let Et=!1;const Tt=()=>{Et||(this.logging.warn("Video element paused, auto-resuming. If you intended to do this, use publishVideo(false) or subscribeToVideo(false) instead."),Et=!0),this.play()};this._domElement=ut(Ge,It),this.trigger("videoElementCreated",this._domElement),this._domElementEvents=g(this._domElement),this._domElementEvents.on("loadstart",()=>this._onDomElementLoadStart()),this._domElementEvents.on("timeupdate",function(){for(var $t=arguments.length,pt=new Array($t),ft=0;ft<$t;ft++)pt[ft]=arguments[ft];return gt.trigger("timeupdate",...pt)}),this._domElementEvents.on("loadedmetadata",(0,u.default)(c.default.mark(function $t(){var pt,ft,et,it,Pt=arguments;return c.default.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:for(gt._isVideoLoadedMetaData=!0,pt=Pt.length,ft=new Array(pt),et=0;et<pt;et++)ft[et]=Pt[et];if(gt.trigger("loadedmetadata",...ft),!gt._domAudioOnlyVideoElement){Ut.next=10;break}if(it=gt._domAudioOnlyVideoElement.srcObject,gt._removeAudioOnlyVideoElement(),!it){Ut.next=10;break}return Ut.next=9,V();case 9:gt.play();case 10:case"end":return Ut.stop()}},$t)})));const Zt=$t=>{this.trigger("error",Pe($t.target.error))};this._domElementEvents.on("error",Zt,!1),this._domElementEvents.on("pause",Tt),this.on("destroyed",()=>{this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll()}),_(this,()=>this._domElement),O.isSafari&&this._widgetType==="subscriber"&&(this._domAudioOnlyVideoElement=mt(),this._bindAudioOnlyVideoElementEvents())}var De=Ke.prototype;return De._onDomElementLoadStart=function(){var Ze=(0,u.default)(c.default.mark(function gt(){return c.default.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(!(this._widgetType==="subscriber"&&w())){Le.next=3;break}return Le.next=3,this._setActiveAudioOutputDevice();case 3:case"end":return Le.stop()}},gt,this)}));function tt(){return Ze.apply(this,arguments)}return tt}(),De._setActiveAudioOutputDevice=function(){var Ze=(0,u.default)(c.default.mark(function gt(){var Ee;return c.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(Ee=M(),!(Ee===""||Ee==="default")){We.next=3;break}return We.abrupt("return");case 3:return We.next=5,this.setSinkId(Ee);case 5:case"end":return We.stop()}},gt,this)}));function tt(){return Ze.apply(this,arguments)}return tt}(),De._rebindSrcObject=function(){this._domElement&&(this._domElement.srcObject=this._domElement.srcObject)},De._pauseAndPlay=function(){this._domElement&&(this._domElement.pause(),this._domElement.play())},De._startAudioOnlyVideoElementWatcher=function(){var Ze=(0,u.default)(c.default.mark(function gt(){var Ee,Le;return c.default.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:return Ee=1e3,Le=O.isiOS,this._audioOnlyVideoElementWatcher=setInterval(()=>{this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.paused&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject,Le&&this._domAudioOnlyVideoElement.play())},100),ut.next=5,C(Ee);case 5:clearInterval(this._audioOnlyVideoElementWatcher),this._audioOnlyVideoElementWatcher=null;case 7:case"end":return ut.stop()}},gt,this)}));function tt(){return Ze.apply(this,arguments)}return tt}(),De._removeAudioOnlyVideoElement=function(){var Ze=(0,u.default)(c.default.mark(function gt(){return c.default.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:this._domAudioOnlyVideoElement.srcObject=null,this._domAudioOnlyVideoElement.parentNode.removeChild(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._domAudioOnlyVideoElement=null;case 4:case"end":return Le.stop()}},gt,this)}));function tt(){return Ze.apply(this,arguments)}return tt}(),De.bindAudioTrackOnly=function(){var Ze=(0,u.default)(c.default.mark(function gt(){var Ee,Le,We,ut,bt,mt,It;return c.default.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Ee=this._stream.getVideoTracks(),Le=this._stream.getAudioTracks(),We=Ee[0],ut=We===void 0?{}:We,bt=Le[0],mt=bt===void 0?{}:bt,Qe.next=6,V();case 6:It=!ut.enabled&&mt.enabled,!this._isVideoLoadedMetaData&&It&&this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=new Ue.MediaStream(Le),this._startAudioOnlyVideoElementWatcher());case 8:case"end":return Qe.stop()}},gt,this)}));function tt(){return Ze.apply(this,arguments)}return tt}(),De._bindAudioOnlyVideoElementEvents=function(){var tt=this;this._domAudioOnlyVideoElementEvents=g(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElementEvents.on("pause",()=>this.play()),this._domAudioOnlyVideoElementEvents.on("timeupdate",function(){for(var gt=arguments.length,Ee=new Array(gt),Le=0;Le<gt;Le++)Ee[Le]=arguments[Le];return tt.trigger("timeupdate",...Ee)}),this._domAudioOnlyVideoElementEvents.on("loadedmetadata",function(){for(var gt=arguments.length,Ee=new Array(gt),Le=0;Le<gt;Le++)Ee[Le]=arguments[Le];return tt.trigger("loadedmetadata",...Ee)})},De.whenTimeIncrements=function(tt,gt){this.once("timeupdate",()=>{tt.call(gt,this)})},De.domElement=function(){return this._domElement},De.videoWidth=function(){return this._domElement?Number(this._domElement[`video${this.isRotated()?"Height":"Width"}`]):0},De.videoHeight=function(){return this._domElement?Number(this._domElement[`video${this.isRotated()?"Width":"Height"}`]):0},De.aspectRatio=function(){return this.videoWidth()/this.videoHeight()},De.imgData=function(){const tt=ye.createElement("canvas",{width:this.videoWidth(),height:this.videoHeight(),style:{display:"none"}});z.body.appendChild(tt);let gt=null;try{tt.getContext("2d").drawImage(this._domElement,0,0,tt.width,tt.height),gt=tt.toDataURL("image/png")}catch{}return ye.removeElement(tt),gt===null||gt==="data:,"?(this.logging.warn("Cannot get image data yet"),null):gt.replace("data:image/png;base64,","").trim()},De.appendTo=function(tt){return tt.appendChild(this._domElement),this._domAudioOnlyVideoElement&&tt.appendChild(this._domAudioOnlyVideoElement),this},De.isAudioBlocked=function(){return this._blockedVolume!==void 0},De.unblockAudio=function(){var Ze=(0,u.default)(c.default.mark(function gt(){var Ee;return c.default.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:if(this.isAudioBlocked()){We.next=3;break}return this.logging.warn("Unexpected call to unblockAudio() without blocked audio"),We.abrupt("return");case 3:return Ee=this._blockedVolume,this._blockedVolume=void 0,this.setAudioVolume(Ee),We.prev=6,We.next=9,this.play();case 9:We.next=16;break;case 11:throw We.prev=11,We.t0=We.catch(6),this._blockedVolume=Ee,this._domElement.muted=!0,We.t0;case 16:this.trigger("audioUnblocked");case 17:case"end":return We.stop()}},gt,this,[[6,11]])}));function tt(){return Ze.apply(this,arguments)}return tt}(),De.rebind=function(){var Ze=(0,u.default)(c.default.mark(function gt(){return c.default.wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(this._domElement){Le.next=2;break}throw new Error("Can't rebind because _domElement no longer exists");case 2:this._playInterrupts++,this._domElement.srcObject=this._domElement.srcObject,this._hasAudioOnlyVideoElement()&&(this._domAudioOnlyVideoElement.srcObject=this._domAudioOnlyVideoElement.srcObject);case 5:case"end":return Le.stop()}},gt,this)}));function tt(){return Ze.apply(this,arguments)}return tt}(),De._createAudioLevelSampler=function(){if(this._removeAudioLevelSampler(),this._stream.getAudioTracks().length>0){try{this._audioContext=j()}catch(tt){this.logging.warn("Failed to get AudioContext(), audio level visualisation will not work",tt)}this._audioContext&&(this._audioLevelSampler=new Te(this._audioContext),this._audioLevelSampler.webRTCStream(this._stream))}},De._removeAudioLevelSampler=function(){this._audioContext&&(delete this._audioContext,delete this._audioLevelSampler)},De._toggleVideoTracks=function(){var Ze=(0,u.default)(c.default.mark(function gt(){var Ee,Le,We;return c.default.wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:if(Ee=this._domElement.srcObject.getTracks().filter(mt=>mt.enabled),Le=Ee.length>1,!Le){bt.next=8;break}return We=Ee.filter(mt=>mt.kind==="video"),We.forEach(mt=>{mt.enabled=!1}),bt.next=7,V();case 7:We.forEach(mt=>{mt.enabled=!0});case 8:case"end":return bt.stop()}},gt,this)}));function tt(){return Ze.apply(this,arguments)}return tt}(),De._hasAudioOnlyVideoElement=function(){return this._domAudioOnlyVideoElement&&this._domAudioOnlyVideoElement.srcObject},De.play=function(){var Ze=(0,u.default)(c.default.mark(function gt(){var Ee,Le,We,ut,bt,mt,It,Ge,Qe,Et,Tt,Zt;return c.default.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(Ee=this._playInterrupts,Le=this._hasAudioOnlyVideoElement()?this._domAudioOnlyVideoElement:this._domElement,!O.isSafari){pt.next=5;break}return pt.next=5,V();case 5:if(!(O.isiOS&&O.isSafari)){pt.next=15;break}if(this._widgetType!=="publisher"){pt.next=14;break}if(We=O.iOSVersion>=14&&O.iOSVersion<=14.2,ut=this._stream.getVideoTracks(),bt=ut[0],mt=bt===void 0?{}:bt,It=this._stream.getAudioTracks(),Ge=It[0],Qe=Ge===void 0?{}:Ge,!(We&&!S(Le)&&mt.enabled)){pt.next=12;break}return pt.abrupt("return");case 12:if(!Qe.muted){pt.next=14;break}return pt.abrupt("return");case 14:this._toggleVideoTracks();case 15:return pt.prev=15,this._emitVideoPlayAttempt(),pt.next=19,Le.play();case 19:return this._emitVideoPlaySuccess(),pt.abrupt("return");case 23:if(pt.prev=23,pt.t0=pt.catch(15),this._emitVideoPlayFailure(),Et=pt.t0||{},Tt=Et.name,Zt=Tt==="AbortError",Zt&&this._playInterrupts++,!(this._playInterrupts>Ee)){pt.next=33;break}return pt.next=32,this.play();case 32:return pt.abrupt("return");case 33:throw pt.t0;case 34:case"end":return pt.stop()}},gt,this,[[15,23]])}));function tt(){return Ze.apply(this,arguments)}return tt}(),De._bindToStream=function(tt){this._stream=tt,this._domElement.srcObject=tt,this._domAudioOnlyVideoElement&&this.bindAudioTrackOnly()},De.bindToStream=function(){var Ze=(0,u.default)(c.default.mark(function gt(Ee){var Le=this,We,ut,bt;return c.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(this._domElement){It.next=2;break}throw new Error("Can't bind because _domElement no longer exists");case 2:return this._bindToStream(Ee),(0,u.default)(c.default.mark(function Ge(){var Qe;return c.default.wrap(function(Tt){for(;;)switch(Tt.prev=Tt.next){case 0:return Tt.prev=0,Tt.next=3,Le.play();case 3:Tt.next=26;break;case 5:if(Tt.prev=5,Tt.t0=Tt.catch(0),Qe=!!Ee.getAudioTracks().length,!(Le._hasAudioOnlyVideoElement()&&Tt.t0.name==="NotAllowedError")){Tt.next=15;break}return Le._domAudioOnlyVideoElement.muted=!0,Tt.next=12,Le.play();case 12:Le._domAudioOnlyVideoElement.muted=!1,Tt.next=26;break;case 15:if(!Qe){Tt.next=23;break}return Le._blockedVolume=Le.getAudioVolume(),Le._domElement.muted=!0,Tt.next=20,Le.play();case 20:Le.trigger("audioBlocked"),Tt.next=26;break;case 23:return Le._domElement.muted=!0,Tt.next=26,Le.play();case 26:case"end":return Tt.stop()}},Ge,null,[[0,5]])}))().catch(Ge=>{this.logging.debug(".play() failed: ",Ge)}),We={width:this._domElement.videoWidth,height:this._domElement.videoHeight},this.trigger("videoDimensionsChanged",(0,a.default)({},We),(0,a.default)({},We)),this._domElementEvents.on("resize",()=>{const Ge=this._domElement,Qe=Ge.videoWidth,Et=Ge.videoHeight,Tt=Qe!==We.width,Zt=Et!==We.height;(Tt||Zt)&&(this.trigger("videoDimensionsChanged",(0,a.default)({},We),{width:Qe,height:Et}),We.width=Qe,We.height=Et)}),ut=()=>{this._mediaStoppedListener.stop(),this._domElement&&(this._domElement.onended=null),this.trigger("mediaStopped")},bt=Ge=>{this.trigger("mediaStopped",Ge)},this._domElement.onended=()=>ut(),this._mediaStoppedListener=ae(Ee,ut,bt),this._createAudioLevelSampler(),It.abrupt("return",void 0);case 13:case"end":return It.stop()}},gt,this)}));function tt(gt){return Ze.apply(this,arguments)}return tt}(),De.unbindStream=function(){return this._domElement&&(this._domElement.srcObject=null),this._domAudioOnlyVideoElement&&(this._domAudioOnlyVideoElement.srcObject=null),this._removeAudioLevelSampler(),this},De.setAudioVolume=function(tt){if(this.isAudioBlocked()){this._blockedVolume=tt;return}const gt=parseFloat(tt)/100,Ee=[this.domElement()];this._domAudioOnlyVideoElement&&Ee.push(this._domAudioOnlyVideoElement),Ee.forEach(Le=>{Le&&(Le.volume=gt,Le.muted=gt===0)})},De.getAudioVolume=function(){if(this.isAudioBlocked())return this._blockedVolume;const tt=this.domElement();return tt?tt.muted?0:tt.volume*100:this._defaultAudioVolume},De.audioChannelType=function(tt){const gt=this.domElement();return tt!==void 0&&(gt.mozAudioChannelType=tt),"mozAudioChannelType"in this._domElement?gt.mozAudioChannelType:"unknown"},De.getAudioInputLevel=function(){return this._audioLevelSampler.sample()},De.refreshTracks=function(){this._mediaStoppedListener&&this._mediaStoppedListener.refresh(),this._createAudioLevelSampler()},De.destroy=function(){this._mediaStoppedListener&&this._mediaStoppedListener.stop(),this.logging.debug("removing domElementEvents"),this._domElementEvents.removeAll(),this._domAudioOnlyVideoElementEvents&&this._domAudioOnlyVideoElementEvents.removeAll(),this._audioOnlyVideoElementWatcher&&clearInterval(this._audioOnlyVideoElementWatcher),this.unbindStream(),this._domElement&&(ye.removeElement(this._domElement),this._domElement=null),this._domAudioOnlyVideoElement&&(ye.removeElement(this._domAudioOnlyVideoElement),this._domAudioOnlyVideoElement=null),this.trigger("destroyed"),v("NativeVideoElementWrapper",this)},De.setSinkId=function(tt){const Ee=[this._domElement,this._domAudioOnlyVideoElement].map(Le=>{if(Le)return Le.setSinkId(tt)});return n.all(Ee)},Ke}()}t.exports=H}).call(this,e(1))},function(t,r,e){(function(n){t.exports=()=>new n(o=>setTimeout(o))}).call(this,e(1))},function(t,r,e){(function(n){var o=e(0),a=o(e(4)),c=o(e(5));const u=e(9),l=e(49),f=e(62),g=e(6),v=e(298),b=e(299),S=e(658);t.exports=function(O){O===void 0&&(O={});const A=O.getStatsHelpers||e(76),w=O.OTHelpers||e(8),V=O.PeerConnection||e(73)(),k=O.setCertificates||e(164)(),M=O.watchAudioAcquisition||e(660);return function(Y){var H=this;let P=Y.iceConfig,j=Y.webRTCStream,_=Y.channels,z=Y.sendMessage,ae=Y.capableSimulcastStreams,me=Y.overrideSimulcastEnabled,ye=Y.logAnalyticsEvent,Pe=Y.offerOverrides,Te=Y.answerOverrides,Ue=Y.sourceStreamId,_e=Y.isP2pEnabled,je=Y.sessionId,Ke=Y.keyStore,De=Y.sFrameClientStore,Ze=Y.isE2ee,tt,gt=!1,Ee;const Le=function(){this.destroy(),gt&&(gt=!1,this.trigger("iceRestartFailure")),this.trigger("disconnected")},We=function(mt){let It=mt.reason,Ge=mt.prefix;this.trigger("error",{reason:It,prefix:Ge})},ut=function(mt){gt&&tt.iceConnectionStateIsConnected()&&(gt=!1,this.trigger("iceRestartSuccess")),mt==="connected"&&(w.env.name==="Chrome"&&(Ee&&Ee(),Ee=M(tt.getStats.bind(tt),()=>this.trigger("audioAcquisitionProblem"))),this.trigger("connected")),this.trigger("iceConnectionStateChange",mt)};g(this),this.startEncryption=bt=>{tt&&tt.startEncryption(bt)},this.changeMediaDirectionToInactive=()=>{tt&&tt.changeMediaDirectionToInactive()},this.changeMediaDirectionToRecvOnly=()=>{tt&&tt.changeMediaDirectionToRecvOnly()},this.getDataChannel=function(bt,mt,It){tt.getDataChannel(bt,mt,It)},this.getSourceStreamId=()=>tt.getSourceStreamId(),this.destroy=function(){Ee&&(Ee(),Ee=null),tt&&(tt.disconnect(),tt=null),this.off()},this.processMessage=function(bt,mt){tt.processMessage(bt,mt)},this.addTrack=function(bt,mt,It){return tt.addTrack(bt,mt,It)},this.removeTrack=function(bt){return tt.removeTrack(bt)},this.getLocalStreams=function(){return tt.getLocalStreams()},this.init=function(bt,mt){v(Ue)&&b(P);const It={iceConfig:P.needRumorIceServersFallback?u(P,{servers:[...bt,...P.servers]}):P,channels:_,capableSimulcastStreams:ae,overrideSimulcastEnabled:me};k(It,(Ge,Qe)=>{if(Ge){mt(Ge);return}const Et=u({logAnalyticsEvent:ye,isPublisher:!0,offerOverrides:Pe,answerOverrides:Te,sourceStreamId:Ue,p2p:_e,sessionId:je,keyStore:Ke,sFrameClientStore:De,isE2ee:Ze},Qe);tt=new V(u({sendMessage:z},Et)),tt.on({close:Le,error:We,qos:Tt=>this.trigger("qos",Tt),iceConnectionStateChange:ut},this),tt.addLocalStream(j).then(()=>{mt(void 0)}).catch(mt)})},this.setIceConfig=bt=>{tt.setIceConfig(bt)},this.generateOffer=()=>{tt.generateOffer()},this.getSenders=function(){return tt.getSenders()},this.iceRestart=function(){tt&&(gt=!0,tt.iceRestart())},this.hasRelayCandidates=()=>tt.hasRelayCandidates(),this.iceConnectionStateIsConnected=function(){return tt.iceConnectionStateIsConnected()},this.findAndReplaceTrack=(bt,mt)=>tt.findAndReplaceTrack(bt,mt),this._testOnlyGetFramesEncoded=()=>new n((bt,mt)=>{tt.getStats((It,Ge)=>{if(It){mt(It);return}const Qe=f(Ge,Et=>A.isVideoStat(Et,Ge)&&A.isOutboundStat(Et));if(!Qe){mt(new Error("Could not find framesEncoded in getStats report"));return}bt(l(Qe,["timestamp","framesEncoded"]))})}),this.getStats=bt=>tt.getStats(bt),this.getRtcStatsReport=bt=>tt.getRtcStatsReport(bt),this.setP2PMaxBitrate=(0,c.default)(a.default.mark(function bt(){var mt,It,Ge,Qe,Et,Tt,Zt;return a.default.wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(H.getSourceStreamId()==="P2P"){pt.next=2;break}return pt.abrupt("return");case 2:if(It=H.getSenders().find(ft=>ft.track.kind==="video"),It){pt.next=5;break}return pt.abrupt("return");case 5:return Ge=(It==null||(mt=It.track)==null||mt.getSettings==null?void 0:mt.getSettings())||{},Qe=Ge.width,Et=Ge.height,Tt=S(Qe,Et),Zt=It.getParameters(),Zt.encodings.forEach(ft=>{ft.maxBitrate=Tt}),pt.prev=9,pt.next=12,It.setParameters(Zt);case 12:pt.next=16;break;case 14:pt.prev=14,pt.t0=pt.catch(9);case 16:case"end":return pt.stop()}},bt,null,[[9,14]])}))}}}).call(this,e(1))},function(t,r,e){const n=e(657);t.exports=o=>o!=="P2P"?!1:n()},function(t,r,e){t.exports=n=>{n.transportPolicy="relay",n.customServers=n.customServers||[]}},function(t,r,e){const n=e(9),o=e(6),a=e(298),c=e(299);t.exports=function(l){l===void 0&&(l={});const f=l.OTHelpers||e(8),g=l.PeerConnection||e(73)(),v=l.SinglePeerConnectionAdapter||e(661)(),b=l.setCertificates||e(164)(),S=l.Errors||e(7),C=l.ExceptionCodes||e(10),O=l.OTErrorClass||e(22),A=l.watchSubscriberAudio||e(662);return function(V){let k=V.clientCandidates,M=V.iceConfig,W=V.send,Y=V.logAnalyticsEvent,H=V.p2p,P=V.codecFlags,j=V.sourceStreamId,_=V.remoteConnectionId,z=V._singlePeerConnectionController,ae=V.keyStore,me=V.sFrameClientStore,ye=V.isE2ee;const Pe=this;let Te,Ue=!1,_e=!1,je=null;const Ke=!!z;let De=!1;const Ze=[],tt=[],gt=function(){this.destroy(),_e&&this.trigger("iceRestartFailure",this),this.trigger("disconnected",this)},Ee=et=>{this.trigger("remoteStreamRemoved",et,this)},Le=et=>{const it=et.kind==="video"?Ze:tt,Pt=it.indexOf(et);Pt>-1&&it.splice(Pt,1)},We=et=>{const it=et.kind==="video"?Ze:tt;it.includes(et)||it.push(et)},ut=100,bt=et=>{De||(et.onremovetrack=it=>{Le(it),Ke&&Te&&Te.removeTrack(it),setTimeout(()=>{!Ze.length&&!tt.length&&Ee(et)},ut)},De=!0)},mt=et=>{const it=et.stream,Pt=et.track;We(Pt),bt(it),this.trigger("remoteTrackAdded",et,this)},It=et=>{this.trigger("remoteVideoSupported",et)},Ge=()=>{this.trigger("decryptFailed")},Qe=()=>{this.trigger("decryptRestored")},Et=function(it){let Pt=it.reason,nn=it.prefix;this.trigger("error",null,Pt,this,nn)},Tt=function(it){_e&&(it==="connected"||it==="completed")&&(_e=!1,this.trigger("iceRestartSuccess")),it==="connected"&&this.trigger("connected"),this.trigger("iceConnectionStateChange",it)},Zt=function(it){this.trigger("signalingStateChange",it)},$t=function(it){this.trigger("signalingStateStable",it)},pt=(et,it)=>{(et==="answer"||et==="pranswer")&&this.trigger("connected"),W(et,it)};o(this),this._hasAudioTracks=()=>tt.length>0,this._hasVideoTracks=()=>Ze.length>0,this._getVideoTracks=()=>Ze,this._getAudioTracks=()=>tt,this._getTracks=()=>[...tt,...Ze],this.close=function(){Ue||(Ue=!0,Te&&(Te.disconnect(),Te=null),this.off())},this.destroy=function(){this.stopAudioStatsWatcher(),!Ue&&this.close()},this.getDataChannel=function(et,it,Pt){Te.getDataChannel(et,it,Pt)},this.getSourceStreamId=()=>Te.getSourceStreamId(),this.processMessage=function(et,it){Te.processMessage(et,it)},this.remoteDescription=function(){return Te.remoteDescription()},this.getStats=function(et){if(Te)Te.getStats(et);else{const it=C.PEER_CONNECTION_NOT_CONNECTED;et(new f.Error(O.getTitleByCode(it),S.PEER_CONNECTION_NOT_CONNECTED,{code:it}))}},this.getSynchronizationSources=function(et){if(!Te){const it=C.PEER_CONNECTION_NOT_CONNECTED;et(new f.Error(O.getTitleByCode(it),S.PEER_CONNECTION_NOT_CONNECTED,{code:it}));return}Te.getSynchronizationSources(et)},this.getRtcStatsReport=function(et){if(Te)Te.getRtcStatsReport(et);else{const it=C.PEER_CONNECTION_NOT_CONNECTED;et(new f.Error(O.getTitleByCode(it),S.PEER_CONNECTION_NOT_CONNECTED,{code:it}))}},this.setIceConfig=et=>{Te.setIceConfig(et)},this.generateOffer=()=>{Te.generateOffer()},this.startAudioStatsWatcher=function(et){je||(je=A(Te.getStats.bind(Te),it=>{this.stopAudioStatsWatcher(),this.trigger("audioLevelStuckWarning",it)},et))},this.stopAudioStatsWatcher=function(){je&&je.stop(),je=null};const ft=function(it){return function(Pt){const nn=it==="video"?Ze:tt;Te&&Te.remoteTracks().forEach(Ut=>{Ut.kind===it&&Ut.enabled!==Pt&&nn.includes(Ut)&&(Ut.enabled=Pt)})}};this.subscribeToAudio=ft("audio"),this.subscribeToVideo=ft("video"),this.hasRelayCandidates=function(){return Te.hasRelayCandidates()},this.iceRestart=function(){return _e=!0,Te.iceRestart()},this.iceConnectionStateIsConnected=function(){return Te.iceConnectionStateIsConnected()},this.init=function(et){a(j)&&c(M),b({iceConfig:M},(Pt,nn)=>{if(Pt){et(Pt);return}const Ut=n({logAnalyticsEvent:Y,clientCandidates:k,codecFlags:P,sourceStreamId:j,keyStore:ae,sFrameClientStore:me,isE2ee:ye},nn),xt=n({sendMessage:pt,p2p:H},Ut,{remoteConnectionId:_});Ke?Te=new v(xt,z):Te=new g(xt),Te.on({iceConnected:()=>Pe.emit("iceConnected"),close:gt,trackAdded:mt,signalingStateChange:Zt,signalingStateStable:$t,error:Et,qos:Wt=>this.trigger("qos",Wt),iceConnectionStateChange:Tt,remoteVideoSupported:It,decryptFailed:Ge,decryptRestored:Qe},Pe),!Ke&&Te.remoteTracks().length>0?Te.remoteStreams().forEach(Wt=>{Wt.getTracks().forEach(tn=>mt({stream:Wt,track:tn}))}):et(void 0,Pe)})}}}},function(t,r,e){t.exports=(n,o)=>{n.forEach((a,c)=>{const u=a.id||a,l=o.id||o;u===l&&n.splice(c,1)})}},function(t,r,e){t.exports=function(o){o===void 0&&(o={});const f=(o.generateSimpleStateMachine||e(161)())("NotPublishing",["NotPublishing","GetUserMedia","BindingMedia","MediaBound","PublishingToSession","Publishing","Failed","Destroyed"],{NotPublishing:["NotPublishing","GetUserMedia","Destroyed"],GetUserMedia:["BindingMedia","Failed","NotPublishing","Destroyed"],BindingMedia:["MediaBound","Failed","NotPublishing","Destroyed"],MediaBound:["NotPublishing","PublishingToSession","Failed","Destroyed"],PublishingToSession:["NotPublishing","Publishing","Failed","Destroyed","MediaBound"],Publishing:["NotPublishing","MediaBound","Failed","Destroyed"],Failed:["Destroyed"],Destroyed:[]});return f.prototype.isDestroyed=function(){return this.current==="Destroyed"},f.prototype.isAttemptingToPublish=function(){return["GetUserMedia","BindingMedia","MediaBound","PublishingToSession"].indexOf(this.current)!==-1},f.prototype.isPublishing=function(){return this.current==="Publishing"},f}},function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;function n(o){this.message=o||"Operation has been canceled.",this.name="CancellationError",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}n.prototype=Object.create(Error.prototype),n.prototype.constructor=n},function(t,r,e){var n=e(1);Object.defineProperty(r,"__esModule",{value:!0});function o(a,c){return n.resolve(a).then(u=>n.resolve(c()).then(()=>u),u=>n.resolve(c()).then(()=>n.reject(u)))}r.default=o},function(t,r,e){(function(n){var o=e(0),a=o(e(16)),c=o(e(4)),u=o(e(5));const l=e(142),f=e(255),g=e(9),v=e(277),b=e(59),S=e(51),C=e(166),O=C.CancellationError,A=e(17),w=e(28),V=e(50),k=e(268),M=e(27),W=e(6),Y=e(671),H=e(106),P=e(63),j=e(672),_=e(7),z=e(165)(),ae=e(673),me=e(283),ye=e(145),Pe=e(284),Te=e(146),Ue=e(3),_e=e(7),je=e(23)(),Ke=e(10),De=e(76),Ze=e(306),tt=e(307),gt=e(674),Ee=e(163)(),Le=e(2)("Subscriber"),We=e(285)(),ut=e(286),bt=e(13)(),mt=e(22),It=e(8),Ge=e(153),Qe=e(144)(typeof window!==void 0?window:commonjsGlobal),Et=e(73)({global:Qe}),Tt=e(300)({PeerConnection:Et}),Zt=e(308),$t=e(287),pt=e(677),ft=e(678),et=e(679),it=e(309),Pt=e(103).parseIceServers,nn=e(680),Ut=e(681),xt=e(682),Wt=e(311),tn=e(168),mn=e(312),Dn=100,er=(Bn,Jn)=>Bn.connection.id===Jn.connection.id,Zn=Bn=>{let Jn=Bn.apiKey,Dt=Bn.sessionId,Ii=Bn.streamId,ti=Bn.subscriberId;return["/v2/partner",Jn,"session",Dt,"stream",Ii,"subscriber",ti].join("/")};function dr(Bn){return Math.max(0,Math.min(100,parseInt(Bn,10)))}function pr(Bn){return Bn.audioVolume!==void 0?Bn.audioVolume:Bn.subscribeToAudio===!1?0:Dn}t.exports=function(Jn){let Dt=Jn===void 0?{}:Jn,Ii=Dt.AudioLevelMeter,ti=Ii===void 0?me:Ii,ci=Dt.AudioLevelTransformer,Rr=ci===void 0?ye:ci,Vr=Dt.BackingBar,ui=Vr===void 0?Pe:Vr,Vi=Dt.Chrome,Os=Vi===void 0?Te:Vi,ii=Dt.env,xo=ii===void 0?Ue:ii,Ws=Dt.Errors,ga=Ws===void 0?_e:Ws,Kn=Dt.Events,mi=Kn===void 0?je:Kn,ya=Dt.ExceptionCodes,ki=ya===void 0?Ke:ya,Ao=Dt.audioLevelSampler,Ln=Ao===void 0?gt:Ao,Uo=Dt.getStatsHelpers,Xr=Uo===void 0?De:Uo,bs=Dt.hasAudioOutputLevelStatCapability,Xs=bs===void 0?Ze:bs,rr=Dt.hasRemoteStreamsWithWebAudio,oi=rr===void 0?tt:rr,Ds=Dt.interpretPeerConnectionError,ea=Ds===void 0?Ee:Ds,Ji=Dt.logging,mr=Ji===void 0?Le:Ji,Da=Dt.MuteButton,ca=Da===void 0?We:Da,Ss=Dt.NamePanel,kr=Ss===void 0?ut:Ss,zs=Dt.otError,Vn=zs===void 0?bt:zs,Cs=Dt.OTErrorClass,$o=Cs===void 0?mt:Cs,Bs=Dt.OTHelpers,Zr=Bs===void 0?It:Bs,Ba=Dt.StylableComponent,rc=Ba===void 0?Ge:Ba,Js=Dt.SubscriberPeerConnection,Ra=Js===void 0?Tt:Js,va=Dt.SubscribingState,za=va===void 0?Zt:va,xa=Dt.VideoDisabledIndicator,Ua=xa===void 0?$t:xa,ds=Dt.AudioBlockedIndicator,un=ds===void 0?pt:ds,yn=Dt.VideoUnsupportedIndicator,En=yn===void 0?ft:yn,Sn=Dt.watchFrameRate,xr=Sn===void 0?et:Sn,li=Dt.createSendMethod,At=li===void 0?it:li,en=Dt.parseIceServers,Jt=en===void 0?Pt:en,Cn=Dt.document,On=Cn===void 0?(typeof window!==void 0?window:commonjsGlobal).document:Cn,Pn=Dt.WidgetView,yr=Pn===void 0?z:Pn;const Cr=3e4,Kr=15e3,ko=function Si(Ia,Li,wa){var or=this;if(Li===void 0&&(Li={}),wa===void 0&&(wa=()=>{}),Li.analytics===void 0)throw new Error("Subscriber requires an instance of analytics");const As=Li.analytics,Ri=A(),ua=Si.hasAudioOutputLevelStatCapability()||oi(),Zo=this,ta={},Pi={},na={},fs={},Ga={},Fo=new mn;let jn,gn,ra,Vs,Ma,Ai,fr,Oa,Ho,la,Ja,ja,Ha,$a,ic=!1,Qa=Ia||Ri,Lr=Li.session,sr=Li.stream;const Bc=Li,gc=Bc._singlePeerConnectionController,qa=gc!==void 0;let ba,_s,dt,Ce=!1,ct,Lt={},Ft=null,Nn=!1,Fn=!0,Hn=[],Un=l({},Li,{showControls:!0,testNetwork:!1,fitMode:sr.defaultFitMode||"cover",insertDefaultUI:!0}),Qo;const cr=Lr.sessionInfo.isAdaptiveEnabled,_i={P2P:M.SUBSCRIBER_DISCONNECTED,MANTIS:M.SUBSCRIBER_DISCONNECTED},Va=xo.name==="Chrome"&&xo.version>=58||xo.isChromiumEdge||xo.isOpera,wi=Lr._.getSocket(),da=()=>v(Pi),fa=Se=>Pi[Se],hs=()=>Pi[Qo],Sa=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){var ht;return c.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Mt.next=2,Pi[Ye];case 2:ht=Mt.sent,ht==null||ht.close(),delete Pi[Ye];case 5:case"end":return Mt.stop()}},Be)}));return function(Ye){return Se.apply(this,arguments)}}(),ha=Se=>{delete na[Se]},qi=()=>{da().forEach(function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){return c.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Rt.next=2,Ye;case 2:Rt.sent.destroy();case 3:case"end":return Rt.stop()}},Be)}));return function(Be){return Se.apply(this,arguments)}}()),Object.keys(Pi).forEach(Se=>{delete Pi[Se]})},Ca=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){var ht,Rt;return c.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(Ye){Ct.next=2;break}return Ct.abrupt("return");case 2:return ht={error:cc,audioVolume:_s},Rt=cr&&Qo==="P2P",Ct.prev=4,Ct.next=7,jn.bindVideo(Ye,ht,Rt);case 7:Ct.next=18;break;case 9:if(Ct.prev=9,Ct.t0=Ct.catch(4),!(Ct.t0 instanceof O||Ai.isDestroyed())){Ct.next=13;break}return Ct.abrupt("return");case 13:if(!Ct.t0.message.includes("bufferFailed")){Ct.next=16;break}return or._.startRelayedToRoutedTransition(),Ct.abrupt("return");case 16:throw cc(Ct.t0),Ct.t0;case 18:case"end":return Ct.stop()}},Be,null,[[4,9]])}));return function(Ye){return Se.apply(this,arguments)}}(),ec=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye,ht){var Rt,Mt,Ct,cn;return c.default.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:if(Rt=!1,typeof Ye=="function"?ht=Ye:Rt=Ye==="rtcStatsReport",Rt?vc():kc(),!(Rt&&!Wt)){Mn.next=7;break}return Mt=ki.GET_RTC_STATS_REPORT_NOT_SUPPORTED,ht(Vn(_.GET_RTC_STATS_REPORT_NOT_SUPPORTED,new Error($o.getTitleByCode(Mt)),Mt)),Mn.abrupt("return");case 7:if(hs()){Mn.next=11;break}return Mt=ki.PEER_CONNECTION_NOT_CONNECTED,ht(Vn(ga.PEER_CONNECTION_NOT_CONNECTED,new Error($o.getTitleByCode(Mt)),Mt)),Mn.abrupt("return");case 11:return Mn.next=13,hs();case 13:Ct=Mn.sent,cn=Rt?Ct.getRtcStatsReport:Ct.getStats,cn((Rn,gi)=>{Rn?(Rn.code===ki.PEER_CONNECTION_NOT_CONNECTED&&(Rn=Vn(ga.PEER_CONNECTION_NOT_CONNECTED,Rn,ki.PEER_CONNECTION_NOT_CONNECTED)),ht(Rn)):ht(null,gi)});case 16:case"end":return Mn.stop()}},Be)}));return function(Ye,ht){return Se.apply(this,arguments)}}(),ka=Se=>ec(Se),Pa=Se=>ec("rtcStatsReport",Se),oc=Se=>!Ho||!ba?!1:Se==="video"?Ho.getVideoTracks().length>0&&ba.getVideoTracks().length>0:Ho.getAudioTracks().length>0&&ba.getAudioTracks().length>0,Wi=(Se,Be,Ye,ht,Rt)=>{let Mt=g({action:Se,variation:Be,payload:Ye,streamId:sr?sr.id:null,sessionId:Lr?Lr.sessionId:null,connectionId:Lr&&Lr.isConnected()?Lr.connection.connectionId:null,partnerId:Lr&&Lr.sessionInfo?Lr.sessionInfo.partnerId:null,subscriberId:Ri,widgetType:"Subscriber"},ht);(Be==="Failure"||Be==="iceconnectionstatechange"&&Ye==="closed")&&(Mt=g(Mt,Lt));const Ct=[Mt];Rt&&Ct.push(Rt),As.logEvent(...Ct)},Uc=(Se,Be,Ye)=>{Be==="Attempt"?(fs[Se]=new Date().getTime(),Wi(Se,Be,Ye)):(Be==="Failure"||Be==="Success")&&Wi(Se,Be,Ye,{attemptDuration:new Date().getTime()-fs[Se]})},sc=function(Be,Ye){Ye===void 0&&(Ye={}),Uc("RoutedToRelayedTransition",Be,Ye)},Cc=function(Be,Ye){Ye===void 0&&(Ye={}),Uc("RelayedToRoutedTransition",Be,Ye)},Us=Ut({onInvalidTransition(Se,Be){const Ye=`Invalid state transition: Event '${Se}' not possible in state '${Be}'`;mr.error(Ye),Wi("Subscriber:InvalidStateTransition","Event",{details:Ye})}});{const Se="Unable to subscribe to stream in a reasonable amount of time";nn({connectivityState:Us,onWarning(){uc("Warning",{})},onTimeout:()=>{if(jn&&jn.addError(Se),Ai.isAttemptingToSubscribe()){Ai.set("Failed"),this._disconnect({noStateTransition:!0});const Be=Vn(_.TIMEOUT,new Error(Se),ki.UNABLE_TO_SUBSCRIBE);Us.fail({options:{failureReason:"Subscribe",failureMessage:Se,failureCode:ki.UNABLE_TO_SUBSCRIBE},error:Be})}},warningMs:Kr,timeoutMs:Cr})}if(ta.promise=new n((Se,Be)=>{ta.resolve=Se,ta.reject=Be}),Un.testNetwork&&Lr.sessionInfo.p2pEnabled&&mr.warn("You cannot test your network with a relayed session. Use a routed session."),this.id=Qa,this.widgetId=Ri,this.session=Lr,this.stream=Un.stream,sr=Un.stream,this.streamId=sr.id,!Lr)return $o.handleJsException({errorMsg:"OT.Subscriber must be passed a session option",code:2e3,target:this,analytics:As}),null;W(this),Zo.once("subscribeComplete",function(){try{wa(...arguments)}catch(Se){mr.error("Completion handler threw an exception",Se)}}),Lr.on("captionReceived",Se=>{Se.streamId===Zo.streamId&&(this.dispatchEvent(Se),this.trigger(M.SUBSCRIBER_CAPTION_RECEIVED,Se))});const yc=Se=>{let Be=Se.transition,Ye=Se.from;return Be==="fail"?Ye==="connected"?"Disconnect":"Failure":Be==="disconnect"&&Ye==="connected"?"Disconnect":"Cancel"};Us.observe({onEnterConnecting(){uc("Attempt",null,{})},onEnterConnected(){uc("Success",null,{})},onEnterDisconnected(Se,Be){let Ye=Be===void 0?{}:Be,ht=Ye.options,Rt=ht===void 0?{}:ht,Mt=Ye.payload,Ct=Mt===void 0?null:Mt;uc(yc(Se),Ct,Rt)}}),Us.observe({onEnterConnected:()=>{this.trigger("subscribeComplete",void 0,this)},onEnterDisconnected:function(Be,Ye){let ht=Be.from,Rt=Ye===void 0?{}:Ye,Mt=Rt.error;ht==="connecting"&&or.trigger("subscribeComplete",Mt||new Error("An unknown error occurred"),or)}}),xt({connectivityState:Us,logAttempt(){Wi("Subscribe","Attempting",null,{connectionId:Lr&&Lr.isConnected()?Lr.connection.connectionId:null})}});const uc=(Se,Be,Ye)=>{Se==="Attempt"&&(ja=new Date().getTime()),Se==="Failure"||Se==="Success"||Se==="Cancel"?Wi("Subscribe",Se,Be,(0,a.default)({},Ye,{attemptDuration:new Date().getTime()-ja})):Wi("Subscribe",Se,Be,Ye)},tc=(Se,Be)=>{Wi("ICERestart",Se,Be)},Ec=Se=>{var Be,Ye;let ht=Se.parsedStats,Rt=Se.remoteConnectionId,Mt=Se.peerId,Ct=Se.sourceStreamId;const cn={widgetType:"Subscriber",width:jn.width,height:jn.height,audioTrack:oc("audio"),hasAudio:sr&&sr.hasAudio,subscribeToAudio:$a,audioVolume:this.getAudioVolume(),videoTrack:oc("video"),connectionId:Lr?Lr.connection.connectionId:null,hasVideo:sr&&sr.hasVideo,subscribeToVideo:Un.subscribeToVideo,congestionLevel:Ft,streamId:sr.id,subscriberId:Ri,duration:Math.round((V()-Ma)/1e3),remoteConnectionId:Rt,peerId:Mt,sourceStreamId:tn(Ct),preferredResolutionHeight:(Be=Un.preferredResolution)==null?void 0:Be.height,preferredResolutionWidth:(Ye=Un.preferredResolution)==null?void 0:Ye.width,preferredFrameRate:Un.preferredFrameRate,audioFallback:!la&&Ja==="auto"},vr=g(cn,ht);As.logQOS(vr),this.trigger("qos",(0,a.default)({},As.commonQoSFields(),vr))},du=Se=>{mr.error("OT.Subscriber State Change Failed: ",Se.message),mr.debug(Se)},tu=()=>{Ai.isSubscribing()||!jn||!jn.video()||(ic=!0,Nn||(Us.connect(),Nn=!0),mr.debug("OT.Subscriber.onLoaded"),Ai.set("Subscribing"),Ma=V(),jn.loading(!1),gn&&gn.showAfterLoading(),Ce&&sr.setRestrictFrameRate(!0),Vs&&Vs.audioOnly(jn.audioOnly()),this.setAudioVolume(_s),this.trigger("loaded",this))},nu=()=>sr&&sr.hasAudio&&$a&&this.getAudioVolume()>0&&!this.isAudioBlocked(),Oc=()=>sr&&sr.hasVideo,ac=Se=>{const Be=Se==="audioLevelStuckAt0"&&(!nu()||Oc());let Ye=!1;if(!Be&&(Wi("subscriber:onAudioWarning","Event",{reason:Se}),jn)){if(jn.rebindSrcObject(),Wi("subscriber:rebindSrcObject","Called"),Se==="audioLevelStuck")return;Ye=!0}lc(Ye)},lc=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){var ht;return c.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(Ye===void 0&&(Ye=!1),!Va){Mt.next=6;break}return Mt.next=4,hs();case 4:ht=Mt.sent,ht.startAudioStatsWatcher(Ye);case 6:case"end":return Mt.stop()}},Be)}));return function(Ye){return Se.apply(this,arguments)}}(),Tc=Se=>{cr&&Se.getSourceStreamId()==="P2P"&&sc("Success")},nc=()=>{mr.debug("OT.Subscriber has been disconnected from the Publisher's PeerConnection"),Us.fail({options:{failureReason:"PeerConnectionError",failureCode:ki.UNABLE_TO_PUBLISH,failureMessage:"PeerConnection disconnected"},error:Vn(ga.DISCONNECTED,new Error("ClientDisconnected"))}),this._disconnect({noStateTransition:!0}),(Ai.isAttemptingToSubscribe()||Ai.isSubscribing())&&Ai.set("Failed")},cc=Se=>{const Be=Vn(ga.MEDIA_ERR_DECODE,Se,Se.code||ki.P2P_CONNECTION_FAILED);Be.message=`OT.Subscriber while playing stream: ${Be.message}`,mr.error("OT.Subscriber.onVideoError"),Us.fail({options:{failureReason:"VideoElement",failureMessage:Be.message,failureCode:Be.code||ki.P2P_CONNECTION_FAILED},error:Be});const Ye=Ai.isAttemptingToSubscribe();Ai.set("Failed"),Ye||Zo.trigger("error",Be.message),$o.handleJsException({error:Be,code:ki.UNABLE_TO_SUBSCRIBE,target:Zo,analytics:As})},jc=Se=>{const Be=j(Se);$o.handleJsException({error:Be,code:Be.code,target:Zo,analytics:As}),this._disconnect({noStateTransition:!0});const Ye={failureReason:"Subscribe",failureMessage:`OT.Subscriber PeerConnection Error: ${Be.message}`,failureCode:ki.P2P_CONNECTION_FAILED};Kc(Be.code,Be.message),Us.fail({options:Ye,error:Vn(Be.name,new Error(`Subscribe: Subscriber PeerConnection with connection (not found) failed: ${Be.message}`),Be.code)}),Be.name===_.STREAM_NOT_FOUND&&this._destroy({reason:"streamNotFound",noStateTransition:!0})},Ac=(Se,Be,Ye,ht)=>{if(ht==="SetRemoteDescription"&&!Fn&&Be.match(/Unsupported video without audio for fallback/)){jn&&jn.addError("The stream is unable to be played.","Your browser does not support the video format.");let cn;Zr.env.name==="Safari"?cn=new Error("VP8 is not supported in this version of Safari. You might want to consider switching to an H264 project. See https://tokbox.com/safari for more information."):cn=new Error("Video format not supported in this browser."),cn.code=ki.UNSUPPORTED_VIDEO_CODEC,cc(cn);return}if(ht==="ICEWorkflow"&&Lr.sessionInfo.reconnection&&ic){mr.debug("Ignoring peer connection failure due to possibility of reconnection.");return}let Rt;ht==="ICEWorkflow"?Rt=ki.SUBSCRIBER_ICE_WORKFLOW_FAILED:Se===ki.STREAM_LIMIT_EXCEEDED?Rt=Se:Rt=ki.P2P_CONNECTION_FAILED;const Mt={failureReason:ht||"PeerConnectionError",failureMessage:`OT.Subscriber PeerConnection Error: ${Be}`,failureCode:Rt},Ct=ea(Se,Be,ht,"(not found)","Subscriber");if(Us.fail({options:Mt,error:Ct}),Ai.isAttemptingToSubscribe()){const cn={hasRelayCandidates:Ye&&Ye.hasRelayCandidates()};Wi("createPeerConnection","Failure",cn,Mt),Ai.set("Failed")}else Ai.isSubscribing()&&(Ai.set("Failed"),this.trigger("error",Be));this._disconnect({noStateTransition:!0}),Number(Se)===404&&this._destroy({noStateTransition:!0}),$o.handleJsException({error:Ct,errorMsg:`OT.Subscriber PeerConnection Error: ${Be}`,code:Rt,target:this,analytics:As}),Kc(Se)},fu=Se=>{const Be=Se._hasVideoTracks(),Ye=Se._hasAudioTracks(),ht=sr&&sr.hasVideo&&!Be,Rt=sr&&sr.hasAudio&&!Ye;return!(ht||Rt)},Es=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye,ht){var Rt;return c.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.prev=0,Ct.next=3,Y(()=>fu(ht));case 3:Ct.next=12;break;case 5:if(Ct.prev=5,Ct.t0=Ct.catch(0),Ct.t0.message!=="TIMEOUT"){Ct.next=11;break}mr.error("The expected tracks never arrived"),Ct.next=12;break;case 11:throw Ct.t0;case 12:return Rt=ht.getSourceStreamId(),qa&&Rt==="MANTIS"&&gc.subscriberComplete(),Ct.next=16,js(Ye.stream,ht);case 16:case"end":return Ct.stop()}},Be,null,[[0,5]])}));return function(Ye,ht){return Se.apply(this,arguments)}}(),js=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye,ht){var Rt,Mt,Ct,cn,vr,Mn,Rn,gi;return c.default.wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:return ba=Ye,qa&&(ba=new MediaStream(ht._getTracks())),Rt=Object.keys(na).length===1,Mt=ht==null?void 0:ht.getSourceStreamId(),Ct=Lr,cn=Ct.sessionInfo,Ho=Ye,Mt&&(na[Mt]=Ye),mr.debug("OT.Subscriber.onRemoteStreamAdded with sourceStreamId",Mt),Ai.set("BindingRemoteStream"),or.subscribeToAudio($a),Ja="loading",or.subscribeToVideo(Un.subscribeToVideo,"loading"),!cn.p2pEnabled&&Mt!=="P2P"&&(or.setPreferredResolution(Un.preferredResolution),or.setPreferredFrameRate(Un.preferredFrameRate)),ht&&ht._getVideoTracks().forEach(Go=>{(typeof window!==void 0?window:commonjsGlobal).webkitMediaStream?Go.enabled=!1:Go.enabled=sr.hasVideo&&Un.subscribeToVideo}),$n.next=16,Ca(ba);case 16:if(lc(),!Ai.isDestroyed()){$n.next=19;break}throw new Error("Subscriber destroyed");case 19:return ht&&(typeof window!==void 0?window:commonjsGlobal).webkitMediaStream&&ht._getVideoTracks().forEach(Go=>{Go.enabled=sr.hasVideo&&Un.subscribeToVideo}),vr=jn&&jn.video(),vr&&vr.orientation({width:sr.videoDimensions.width,height:sr.videoDimensions.height,videoOrientation:sr.videoDimensions.orientation}),Mn=gn&&gn.videoUnsupportedIndicator,Mn&&Mn.setVideoUnsupported(!Fn),Rn=new n((Go,hc)=>{const bc=jn&&jn.video();if(bc&&bc.domElement()){Go();return}jn.once("videoElementCreated",Go),Zo.once("destroyed",hc)}),$n.next=27,Rn;case 27:return $n.next=29,ta.promise;case 29:Rt?Ai.set("Subscribing"):tu(),fr&&"webRTCStream"in fr&&ht._hasAudioTracks()&&fr.webRTCStream(Ye),gi=Zr.env,(gi.isSafari||gi.isChromiumEdge||gi.isOpera||gi.name==="Chrome"&&gi.version>=58||gi.isFirefox&&gi.version>=96)&&(ct&&(ct.destroy(),ct=null),ht&&(ct=xr(ht.getStats.bind(ht)))),Rt||or.trigger("streamAdded",or),Fo.finishTransitionTo(Qo);case 35:case"end":return $n.stop()}},Be)}));return function(Ye,ht){return Se.apply(this,arguments)}}(),Hc=Se=>{mr.debug("OT.Subscriber.onStreamRemoved");const Be=jn&&jn.video();Be&&Be.stream===Se&&jn.destroyVideo(),ha(Qo),ba=null,this.trigger("streamRemoved",this)},hu=Se=>{Fn!==Se&&this.dispatchEvent(new mi.VideoEnabledChangedEvent(Se?"videoEnabled":"videoDisabled",{reason:Se?"codecChanged":"codecNotSupported"})),Fn=Se},Yc=Se=>{jn.setAudioBlockedUi(Se);const Be=gn&&gn.audioBlockedIndicator;Be&&Be.setAudioBlocked(Se);const Ye=gn&&gn.videoUnsupportedIndicator;Ye&&Ye.setVideoUnsupported(!Se&&!Fn)};this.on("audioBlocked",()=>{Yc(!0)}),this.on("audioUnblocked",()=>{Yc(!1)});const ru={new:M.SUBSCRIBER_DISCONNECTED,checking:M.SUBSCRIBER_DISCONNECTED,connected:M.SUBSCRIBER_CONNECTED,completed:M.SUBSCRIBER_CONNECTED,disconnected:M.SUBSCRIBER_DISCONNECTED},Rc=(Se,Be)=>{const Ye=ru[Se],ht=Be.getSourceStreamId(),Rt=_i[ht];Ye&&Ye!==Rt&&(_i[ht]=Ye,Se==="disconnected"&&ht!=="P2P"&&setTimeout((0,u.default)(c.default.mark(function Ct(){var cn;return c.default.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:if(cn=Lr._.isSocketReconnecting,!(_i[ht]==="disconnected"&&wi.is("connected")&&!cn())){Mn.next=4;break}return Mn.next=4,or._.iceRestart("peer connection disconnected");case 4:case"end":return Mn.stop()}},Ct)})),2e3),jn&&jn.loading(Ye!==M.SUBSCRIBER_CONNECTED),mr.debug(`OT.Subscriber.connectionStateChanged to ${Se}`),this.dispatchEvent(new mi.ConnectionStateChangedEvent(Ye,this)))},pu=()=>{tc("Success")},mu=()=>{tc("Failure",{reason:"ICEWorkflow",message:"OT.Subscriber PeerConnection Error: The stream was unable to connect due to a network error. Make sure your connection isn't blocked by a firewall."})},gu=Se=>{const Be=jn&&jn.video();switch(Se.changedProperty){case"videoDimensions":if(!Be)break;Be.orientation({width:Se.newValue.width,height:Se.newValue.height,videoOrientation:Se.newValue.orientation}),this.dispatchEvent(new mi.VideoDimensionsChangedEvent(this,Se.oldValue,Se.newValue));break;case"videoDisableWarning":gn&&gn.videoDisabledIndicator.setWarning(Se.newValue),this.dispatchEvent(new mi.VideoDisableWarningEvent(Se.newValue?"videoDisableWarning":"videoDisableWarningLifted")),Ft=Se.newValue?1:null;break;case"hasVideo":fc(!sr.hasVideo||!Un.subscribeToVideo),xo.isSafari&&!sr.hasVideo&&jn&&jn.bindAudioTrackOnly(),this.dispatchEvent(new mi.VideoEnabledChangedEvent(sr.hasVideo?"videoEnabled":"videoDisabled",{reason:"publishVideo"}));break;case"hasAudio":ra.update();break}},dc=()=>sr.getChannelsOfType("audio").length>0;ra={get(){return dc()?Zo.getStyle("buttonDisplayMode"):"off"},update(){const Se=ra.get();gn&&(gn.muteButton.setDisplayMode(Se),gn.backingBar.setMuteMode(Se))}};const xc=(Se,Be)=>{if(gn)switch(Se){case"nameDisplayMode":gn.name.setDisplayMode(Be),gn.backingBar.setNameMode(Be);break;case"videoUnsupportedDisplayMode":gn.videoUnsupportedIndicator.setDisplayMode(Be);break;case"videoDisabledDisplayMode":gn.videoDisabledIndicator.setDisplayMode(Be);break;case"audioBlockedDisplayMode":gn.audioBlockedIndicator.setDisplayMode(Be);break;case"showArchiveStatus":gn.archive.setShowArchiveStatus(Be);break;case"buttonDisplayMode":ra.update();break;case"audioLevelDisplayMode":gn.audioLevel.setDisplayMode(Be);break;case"bugDisplayMode":break;case"backgroundImageURI":jn.setBackgroundImageURI(Be);break}},Vc=()=>{const Se={backingBar:new ui({nameMode:Un.name?this.getStyle("nameDisplayMode"):"off",muteMode:ra.get()}),name:new kr({name:Un.name,mode:this.getStyle("nameDisplayMode")}),muteButton:new ca({muted:_s===0,mode:ra.get()})};if(ua){const Be=new Rr;Vs=new ti({mode:Zo.getStyle("audioLevelDisplayMode")});const Ye=new H(()=>{Vs.setValue(Be.transform(this.loudness))});Vs.watchVisibilityChanged(ht=>{ht?Ye.start():Ye.stop()}),Vs.setDisplayMode(this.getStyle("audioLevelDisplayMode")),Vs.audioOnly(!1),Se.audioLevel=Vs}Se.videoDisabledIndicator=new Ua({mode:this.getStyle("videoDisabledDisplayMode")}),Se.audioBlockedIndicator=new un({mode:this.getStyle("audioBlockedDisplayMode")}),Se.videoUnsupportedIndicator=new En({mode:this.getStyle("videoUnsupportedDisplayMode")}),jn&&jn.domElement&&(gn=new Os({parent:jn.domElement}).set(Se).on({muted(){Zo.setAudioVolume(0)},unmuted(){Zo.setAudioVolume(dt)}},this),gn.hideWhileLoading())},Kc=(Se,Be)=>{let Ye,ht;jn&&(Se===ki.STREAM_LIMIT_EXCEEDED?(Ye="The stream was unable to connect.",ht="The limit for the number of media streams has been reached."):Be==="Tried to subscribe to an encrypted stream without enabling encryption"?(Ye="Unable to subscribe to an encrypted stream without enabling encryption.",ht=""):(Ye="The stream was unable to connect due to a network error.",Nn?ht="Ensure you have a stable connection and try again.":ht="Make sure you have a stable network connection and that it isn't blocked by a firewall."),jn.addError(Ye,ht))};rc(this,{nameDisplayMode:"auto",buttonDisplayMode:"auto",audioLevelDisplayMode:"auto",videoDisabledDisplayMode:"auto",audioBlockedDisplayMode:"auto",backgroundImageURI:null,showArchiveStatus:!0,showMicButton:!0},Un.showControls,Se=>{Wi("SetStyle","Subscriber",Se,null,.1)});function fc(Se){da().forEach(function(){var Ye=(0,u.default)(c.default.mark(function ht(Rt){return c.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.next=2,Rt;case 2:Ct.sent.subscribeToVideo(!Se);case 3:case"end":return Ct.stop()}},ht)}));return function(ht){return Ye.apply(this,arguments)}}());const Be=Se||!ba||!ba.getVideoTracks().length;jn&&(jn.audioOnly(Be),jn.showPoster(Be)),Vs&&Vs.audioOnly(Be)}const kc=S(()=>{Wi("GetStats","Called")}),vc=S(()=>{Wi("GetRtcStatsReport","Called")}),Ic=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){return c.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return Oa&&(Oa.destroy(),Oa=void 0),Rt.prev=1,Rt.next=4,Y(()=>Ye._hasAudioTracks());case 4:Rt.next=9;break;case 6:return Rt.prev=6,Rt.t0=Rt.catch(1),Rt.abrupt("return");case 9:fr=Ln(Ye),fr?Oa=ae({subscriber:or,audioLevelSampler:fr}):Object.prototype.hasOwnProperty.call(or,"loudness")||(Object.defineProperty(or,"loudness",{value:void 0,configurable:!0,writable:!1}),mr.error("No suitable audio level samplers found, audio level visualisation will not work"));case 11:case"end":return Rt.stop()}},Be,null,[[1,6]])}));return function(Ye){return Se.apply(this,arguments)}}(),Nc=(Se,Be)=>{if(Ga[Be]){Ga[Be].removeAll();const ht=()=>{Se.off("error",ht),Se.off("disconnected",ht)};Se.on("error",ht),Se.on("disconnected",ht)}const Ye=P(Se);Ye.once("connected",()=>Tc(Se)),Ye.on("disconnected",nc),Ye.on("error",Ac),Ye.once("remoteTrackAdded",(0,u.default)(c.default.mark(function ht(){var Rt=arguments;return c.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:return Ct.next=2,Ic(Se);case 2:return Ct.prev=2,Ct.next=5,Es(...Rt);case 5:Ct.next=10;break;case 7:Ct.prev=7,Ct.t0=Ct.catch(2),mr.error(Ct.t0);case 10:case"end":return Ct.stop()}},ht,null,[[2,7]])}))),Ye.on("audioLevelStuckWarning",ac),Ye.on("signalingStateStable",(0,u.default)(c.default.mark(function ht(){var Rt;return c.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:Zo.trigger("signalingStateStable"),Rt=jn&&jn.video(),Rt&&Ho&&fr&&"webRTCStream"in fr&&Se._hasAudioTracks()&&fr.webRTCStream(Ho);case 3:case"end":return Ct.stop()}},ht)}))),Ye.on("iceConnectionStateChange",ht=>Rc(ht,Se)),Ye.on("iceRestartSuccess",pu),Ye.on("iceRestartFailure",mu),Ye.on("remoteVideoSupported",hu),Ye.on("remoteStreamRemoved",Hc),Ye.on("decryptFailed",()=>this.trigger("encryptionSecretMismatch")),Ye.on("decryptRestored",()=>this.trigger("encryptionSecretMatch")),Ga[Be]=Ga},Zc=function(){var Se=(0,u.default)(c.default.mark(function Be(){var Ye;return c.default.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:return sc("Attempt"),Rt.next=3,fa("MANTIS");case 3:if(Ye=Rt.sent,Ye!=null&&Ye.iceConnectionStateIsConnected()){Rt.next=7;break}return sc("Failure",{reason:"Attempted to transition to Relayed without being connected in Routed mode."}),Rt.abrupt("return");case 7:wi.subscriberCreate(sr.id,Ri,nt,"P2P",Lr._.isE2ee(),(Mt,Ct)=>{Mt&&!Us.is("disconnected")&&sc("Failure",Mt),mr.debug("message received when created a subscriber with source",Ct)});case 8:case"end":return Rt.stop()}},Be)}));return function(){return Se.apply(this,arguments)}}(),zc=function(){var Se=(0,u.default)(c.default.mark(function Be(){var Ye,ht;return c.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(!(Un.testNetwork||er(sr,Lr)||Qo!=="P2P")){Mt.next=2;break}return Mt.abrupt("return");case 2:if(Cc("Attempt"),Ho=na.MANTIS,ba=Ho,!qa){Mt.next=10;break}return Mt.next=8,fa("MANTIS");case 8:Ye=Mt.sent,ba=new MediaStream(Ye._getTracks());case 10:return Mt.next=12,Ca(ba);case 12:return jn.loading(!1),Sa("P2P"),Qo="MANTIS",ha("P2P"),Mt.next=18,hs();case 18:return ht=Mt.sent,Mt.next=21,Ic(ht);case 21:Cc("Success");case 22:case"end":return Mt.stop()}},Be)}));return function(){return Se.apply(this,arguments)}}();this._destroy=Se=>{let Be=Se.reason,Ye=Be===void 0?"Unknown":Be,ht=Se.quiet,Rt=Se.noStateTransition,Mt=Rt===void 0?!1:Rt;return Ai.isDestroyed()?this:(Ai.set("Destroyed"),ct&&(ct.destroy(),ct=null),Lt={sessionId:Lr.sessionId,connectionId:Lr&&Lr.isConnected()?Lr.connection.connectionId:null,partnerId:Lr&&Lr.sessionInfo?Lr.sessionInfo.partnerId:null,streamId:sr&&!sr.destroyed?sr.id:null},this._disconnect({reason:Ye,noStateTransition:Mt}),gn&&(gn.destroy(),gn=null),jn&&(jn.destroy(),jn.off(),jn=null,this.element=null),sr&&!sr.destroyed&&Wi("unsubscribe",null,{streamId:sr.id}),sr.off(Ha,this),this.id=null,Qa=null,this.stream=null,sr=null,this.streamId=null,this.session=null,Lr=null,Un=null,ht!==!0&&(this.dispatchEvent(new mi.DestroyedEvent(M.SUBSCRIBER_DESTROYED,this,Ye)),this.off()),this)},this.destroy=function(Se,Be){Se===void 0&&(Se="Unsubscribe"),mr.warn("Subscriber#destroy is deprecated and will be removed. Please use Session#unsubscribe instead"),or._destroy({reason:Se,quiet:Be})},this._disconnect=function(Se){let Be=Se===void 0?{}:Se,Ye=Be.reason,ht=Ye===void 0?"Unknown":Ye;if(!Be.noStateTransition&&!Us.is("disconnected")){const Mt=ht==="Unsubscribe"?void 0:Vn(ga.STREAM_DESTROYED,new Error("Stream was destroyed before it could be subscribed to"));Us.disconnect({payload:{reason:ht},error:Mt})}!Ai.isDestroyed()&&!Ai.isFailed()&&Ai.set("NotSubscribing"),jn&&jn.destroyVideo(),wi.is("connected")&&sr&&!sr.destroyed&&wi.subscriberDestroy(sr.id,or.widgetId),qi()},this.disconnect=()=>{mr.warn("Subscriber#disconnect is deprecated and will be removed. Please use Session#unsubscribe instead"),this._disconnect({reason:"Unsubscribe"})};const yu=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){var ht,Rt,Mt,Ct,cn,vr,Mn;return c.default.wrap(function(gi){for(;;)switch(gi.prev=gi.next){case 0:return ht=Ye.peerId,Rt=Ye.fromConnectionId,Mt=Ye.sourceStreamId,Ct=Zn({apiKey:Lr.apiKey,sessionId:Lr.sessionId,streamId:sr.id,subscriberId:or.widgetId}),cn=At({socket:or.session._.getSocket(),uri:Ct,content:{peerId:ht,sourceStreamId:Mt}}),vr=function($n,Go,hc,bc,Yu){bc===void 0&&(bc={});const Ku=(0,a.default)({peerId:ht,sourceStreamId:tn(Mt)},bc);return Wi($n,Go,hc,Ku,Yu)},Mn=os=>{Qo===Mt&&Ec((0,a.default)({},os,{peerId:ht,remoteConnectionId:Rt,sourceStreamId:Mt}))},gi.abrupt("return",or._setupPeerConnection({send:cn,log:vr,logQoS:Mn,sourceStreamId:Mt}));case 6:case"end":return gi.stop()}},Be)}));return function(Ye){return Se.apply(this,arguments)}}();this.processMessage=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye,ht,Rt){var Mt,Ct,cn;return c.default.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:return mr.debug(`OT.Subscriber.processMessage: Received ${Ye} message from ${ht}`),mr.debug(Rt),Mt=b(Rt,"content.peerId"),Ct=b(Rt,"content.sourceStreamId"),Mn.next=6,fa(Ct);case 6:if(cn=Mn.sent,!cn){Mn.next=11;break}cn.processMessage(Ye,Rt),Mn.next=16;break;case 11:if(Ye!=="offer"){Mn.next=16;break}return Mn.next=14,yu({peerId:Mt,fromConnectionId:ht,sourceStreamId:Ct});case 14:cn=Mn.sent,qa?cn.processMessage("offer",Rt):or.session._.addSubscriberToPeerConnectionsQueue(cn,Rt);case 16:case"end":return Mn.stop()}},Be)}));return function(Be,Ye,ht){return Se.apply(this,arguments)}}(),this.disableVideo=Se=>{if(!Se)mr.warn("Due to high packet loss and low bandwidth, video has been disabled");else if(Ja==="auto")mr.info("Video has been re-enabled");else{mr.info("Video was not re-enabled because it was manually disabled");return}this.subscribeToVideo(Se,"auto"),Wi("updateQuality","video",Se?{videoEnabled:!0}:{videoDisabled:!0})},this.getImgData=()=>{if(!this.isSubscribing())return mr.error("OT.Subscriber.getImgData: Cannot getImgData before the Subscriber is subscribing."),null;const Se=jn&&jn.video();return Se?Se.imgData():null},this.getStats=Se=>{ka((Be,Ye)=>{if(Be){Se(Be);return}const ht={timestamp:0};Ye.forEach(Rt=>{if(Xr.isInboundStat(Rt)){const Mt=Xr.isVideoStat(Rt,Ye),Ct=Xr.isAudioStat(Rt,Ye);(Ct||Mt)&&(ht.timestamp=Xr.normalizeTimestamp(Rt.timestamp)),Mt?(f(ht,{video:Xr.parseStatCategory(Rt)}),ct&&f(ht,{video:{frameRate:ct.getFrameRateFromStat(Rt)}})):Ct&&f(ht,{audio:Xr.parseStatCategory(Rt)})}}),Se(null,ht)})},this.getRtcStatsReport=()=>new n((Se,Be)=>{Pa((Ye,ht)=>{Ye?Be(Ye):Se(ht)})});function wc(Se){const Be=jn&&jn.video();if(Be)try{Be.setAudioVolume(Se)}catch(Ye){mr.warn(`setAudioVolume: ${Ye}`),_s===0&&(mr.info("Using subscribeToAudio to mute Audio because setAudioVolume(0) failed"),Zo.subscribeToAudio(!1))}gn&&gn.muteButton.muted(Se===0)}this.setAudioVolume=Se=>{const Be=dr(Se);return Wi("setAudioVolume","Attempt",{audioVolume:Be}),isNaN(Be)?(mr.error("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),Wi("setAudioVolume","Failure",{message:"value should be an integer between 0 and 100"}),this):(Be!==Se&&mr.warn("OT.Subscriber.setAudioVolume: value should be an integer between 0 and 100"),Be===_s?(wc(_s),Wi("setAudioVolume","Success",{audioVolume:_s,message:"Requested volume is same as already set audioVolume"}),this):(_s>0&&(dt=_s),_s=Be,wc(_s),_s>0&&!$a&&(dt=_s,this.subscribeToAudio(!0)),Wi("setAudioVolume","Success",{audioVolume:_s}),this))},this.getAudioVolume=()=>{const Se=jn&&jn.video();if(Se)try{return Se.getAudioVolume()}catch(Be){mr.warn(`getAudioVolume ${Be}`)}return _s},this.subscribeToAudio=Se=>{const Be=k(Se,!0);da().forEach(function(){var ht=(0,u.default)(c.default.mark(function Rt(Mt){return c.default.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:return cn.next=2,Mt;case 2:cn.sent.subscribeToAudio(Be);case 3:case"end":return cn.stop()}},Rt)}));return function(Rt){return ht.apply(this,arguments)}}()),sr&&da().length!==0&&sr.setChannelActiveState("audio",Be);const Ye=$a!==Be;return $a=Be,Ye&&this.setAudioVolume(Be?dt:0),Wi("subscribeToAudio","Event",{subscribeToAudio:Be}),this};const Lc={auto:"quality",publishVideo:"publishVideo",subscribeToVideo:"subscribeToVideo"};if(xo.name==="Safari"){const Se=()=>{!On.hidden&&Un.subscribeToVideo&&(mr.debug("document visibility restored in Safari - resubscribing to video"),this.subscribeToVideo(!1),this.subscribeToVideo(!0))};On.addEventListener("visibilitychange",Se),this.once("destroyed",()=>{On.removeEventListener("visibilitychange",Se)})}if(this.subscribeToVideo=(Se,Be)=>{const Ye=k(Se,!0),ht=!Ye&&Be==="auto";return ht&&(Ft=2),Wi("subscribeToVideo","Attempt",{subscribeToVideo:Ye,reason:Be}),fc(!Ye||!sr.hasVideo||!Ho),sr.hasVideo&&!oc("video")?(Ye&&mr.info("Subscriber is audio-only due to incompatibility, can't subscribeToVideo."),Un.subscribeToVideo=!1,Wi("subscribeToVideo","Failure",{message:"No video tracks available"}),this):(gn&&gn.videoDisabledIndicator&&gn.videoDisabledIndicator.disableVideo(ht),da().length>0&&Lr&&sr&&(Ye!==Un.subscribeToVideo||Be!==Ja)&&sr.setChannelActiveState("video",Ye,Be),Un.subscribeToVideo=Ye,Ja=Be,la=Ye,Wi("subscribeToVideo","Success",{subscribeToVideo:Ye,reason:Be}),Be!=="loading"&&this.dispatchEvent(new mi.VideoEnabledChangedEvent(Ye?"videoEnabled":"videoDisabled",{reason:Lc[Be]||"subscribeToVideo"})),this)},this.setPreferredResolution=Se=>{if(Ai.isDestroyed()||da().length===0&&!Ai.current==="Connecting"){mr.warn("Cannot set the max Resolution when not subscribing to a publisher");return}if(Un.preferredResolution=Se,Lr.sessionInfo.p2pEnabled){mr.warn("OT.Subscriber.setPreferredResolution will not work in a P2P Session");return}if(!Ai.isStreamAdded())return;const Be=sr.getPreferredResolution();Be&&Se&&Be.width===Se.width&&Be.height===Se.height||!Be&&!Se||sr.setPreferredResolution(Se)},this.setPreferredFrameRate=Se=>{if(Ai.isDestroyed()||da().length===0&&!Ai.current==="Connecting"){mr.warn("Cannot set the max frameRate when not subscribing to a publisher");return}if(Un.preferredFrameRate=Se,Lr.sessionInfo.p2pEnabled){mr.warn("OT.Subscriber.setPreferredFrameRate will not work in a P2P Session");return}const Be=sr.getPreferredFrameRate();Se&&Be&&Be===Se||!Be&&!Se||sr.setPreferredFrameRate(Se)},this.isSubscribing=()=>Ai.isSubscribing(),this.isWebRTC=!0,this.isLoading=()=>jn&&jn.loading(),this.isAudioBlocked=()=>Boolean(jn&&jn.isAudioBlocked()),this.videoElement=()=>{const Se=jn&&jn.video();return Se?Se.domElement():null},this.videoWidth=()=>{const Se=jn&&jn.video();return Se?Se.videoWidth():void 0},this.videoHeight=()=>{const Se=jn&&jn.video();return Se?Se.videoHeight():void 0},this._subscribeToSelf=(0,u.default)(c.default.mark(function Se(){var Be;return c.default.wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(Be=Lr.getPublisherForStream(sr),Be&&Be._.webRtcStream()){ht.next=5;break}Us.fail({payload:{reason:"streamNotFound"},error:Vn(ga.STREAM_DESTROYED,new Error("Tried to subscribe to a local publisher, but its stream no longer exists"))}),ht.next=14;break;case 5:return ta.resolve(),ht.prev=6,ht.next=9,js(Be._.webRtcStream());case 9:ht.next=14;break;case 11:ht.prev=11,ht.t0=ht.catch(6),mr.error(ht.t0);case 14:case"end":return ht.stop()}},Se,null,[[6,11]])})),this._setupPeerConnection=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){var ht,Rt,Mt,Ct;return c.default.wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:return ht=Ye.send,Rt=Ye.log,Mt=Ye.logQoS,Ct=Ye.sourceStreamId,Un.testNetwork&&or.setAudioVolume(0),da().length===0&&Ai.set("Connecting"),Qo=Ct,Pi[Ct]=new n((Mn,Rn)=>{Lr._.getIceConfig().then(gi=>{gi.needRumorIceServersFallback&&(gi.servers=[...Hn||[],...gi.servers||[]]);const os={iceConfig:gi,subscriberId:or.widgetId,send:ht,logAnalyticsEvent:Rt,p2p:Lr.sessionInfo.p2pEnabled,sourceStreamId:Ct,remoteConnectionId:sr.connection.id,_singlePeerConnectionController:Ct==="MANTIS"&&gc,keyStore:Lr.keyStore,sFrameClientStore:Lr.sFrameClientStore,isE2ee:Lr._.isE2ee()};Object.prototype.hasOwnProperty.call(Un,"codecFlags")&&(os.codecFlags=Un.codecFlags);const $n=new Si.SubscriberPeerConnection(os);$n.once("iceConnected",ta.resolve),$n.once("error",ta.reject),$n.on("qos",Mt),Nc($n,Ct),$n.init(Go=>{Go?Rn(Go):Mn($n)})})}),vr.abrupt("return",Pi[Ct]);case 6:case"end":return vr.stop()}},Be)}));return function(Be){return Se.apply(this,arguments)}}(),this.restrictFrameRate=Se=>(mr.debug(`OT.Subscriber.restrictFrameRate(${Se})`),Wi("restrictFrameRate",Se.toString(),{streamId:sr.id}),Lr.sessionInfo.p2pEnabled&&mr.warn("OT.Subscriber.restrictFrameRate: Cannot restrictFrameRate on a P2P session"),typeof Se!="boolean"?mr.error(`OT.Subscriber.restrictFrameRate: expected a boolean value got a ${typeof Se}`):(Ce=Se,sr.setRestrictFrameRate(Se)),this),this.on("styleValueChanged",xc,this),this._={getDataChannel(Se,Be,Ye){return(0,u.default)(c.default.mark(function ht(){return c.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:if(hs()){Mt.next=3;break}return Ye(new Zr.Error("Cannot create a DataChannel before there is a publisher connection.")),Mt.abrupt("return");case 3:return Mt.next=5,hs();case 5:Mt.sent.getDataChannel(Se,Be,Ye);case 6:case"end":return Mt.stop()}},ht)}))()},iceRestart(Se,Be){return(0,u.default)(c.default.mark(function Ye(){var ht;return c.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:return Be===void 0&&(Be=!1),Mt.next=3,fa("MANTIS");case 3:ht=Mt.sent,ht?(tc("Attempt",{reason:Se}),mr.debug("Subscriber: iceRestart attempt"),ht.iceRestart(),Be&&ht.generateOffer()):mr.debug("Subscriber: Skipping ice restart, we have no peer connection");case 5:case"end":return Mt.stop()}},Ye)}))()},unblockAudio:()=>jn&&jn.unblockAudio(),webRtcStream:()=>Ho,setIceConfig:function(){var Se=(0,u.default)(c.default.mark(function Ye(ht){return c.default.wrap(function(Mt){for(;;)switch(Mt.prev=Mt.next){case 0:da().forEach(function(){var Ct=(0,u.default)(c.default.mark(function cn(vr){return c.default.wrap(function(Rn){for(;;)switch(Rn.prev=Rn.next){case 0:return Rn.next=2,vr;case 2:return Rn.abrupt("return",Rn.sent.setIceConfig(ht));case 3:case"end":return Rn.stop()}},cn)}));return function(cn){return Ct.apply(this,arguments)}}());case 1:case"end":return Mt.stop()}},Ye)}));function Be(Ye){return Se.apply(this,arguments)}return Be}(),privateEvents:new w,startRoutedToRelayedTransition(){Un.testNetwork||er(sr,Lr)||(Fo.startTransitionTo("P2P"),Zc())},startRelayedToRoutedTransition(){Fo.startTransitionTo("MANTIS",()=>zc())},setSinkId(Se){if(jn&&jn.video())return jn.setSinkId(Se);mr.debug("Called setAudioOutputDevice on a subscriber without a video element")},pauseAndPlayVideoElement(){jn&&jn.pauseAndPlayVideoElement()}},Ai=new za(du),mr.debug(`OT.Subscriber: subscribe to ${sr.id}`),Ai.set("Init"),!sr)return mr.error("OT.Subscriber: No stream parameter."),!1;Ha={updated:gu},sr.on(Ha,this),Un.name=Un.name||sr.name,Un.classNames="OT_root OT_subscriber",Un.style&&this.setStyle(Un.style,null,!0),dt=Dn,Un.subscribeToVideo=k(Un.subscribeToVideo,!0),Un.subscribeToAudio=k(Un.subscribeToAudio,!0),this.subscribeToAudio(Un.subscribeToAudio),this.setAudioVolume(pr(Un)),jn=new Si.WidgetView(Ia,(0,a.default)({},Un,{widgetType:"subscriber"})),jn.on("error",cc),jn.on("audioBlocked",()=>this.trigger("audioBlocked")),jn.on("audioUnblocked",()=>this.trigger("audioUnblocked")),jn.on("amrLogEvent",(Se,Be,Ye)=>{Wi(Se,Be,{},Ye)}),this.id=jn.domId(),Qa=jn.domId(),this.element=jn.domElement,jn.on("videoElementCreated",Se=>{const Be=new mi.VideoElementCreatedEvent(Se),Ye=this;ic?this.dispatchEvent(Be):this.once("loaded",()=>{Ye.dispatchEvent(Be)})}),this.element&&Vc.call(this);const vu=sr.getChannelsOfType("audio"),iu=sr.getChannelsOfType("video"),ou=sr.getChannelsOfType("data");let Jc=ou.some(Se=>Se.id==="caption1"&&Se.active);this.subscribeToCaptions=function(){var Se=(0,u.default)(c.default.mark(function Be(Ye){var ht,Rt;return c.default.wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:ht=k(Ye,!0),Rt={active:ht},Jc=ht,Wi("subscribeToCaptions","Attempt",{subscribeToCaptions:ht}),wi.subscriberChannelUpdate(sr.id,or.widgetId,"caption1",Rt),Wi("subscribeToCaptions","Success",{subscribeToCaptions:ht});case 6:case"end":return Ct.stop()}},Be)}));return function(Be){return Se.apply(this,arguments)}}(),this.isSubscribedToCaptions=()=>Jc;const nt=vu.map(Se=>({id:Se.id,type:Se.type,active:Un.subscribeToAudio})).concat(iu.map(Se=>{const Be={id:Se.id,type:Se.type,active:Un.subscribeToVideo,restrictFrameRate:Un.restrictFrameRate!==void 0?Un.restrictFrameRate:!1};return Un.preferredFrameRate!==void 0&&(Be.preferredFrameRate=parseFloat(Un.preferredFrameRate)),Un.preferredHeight!==void 0&&(Be.preferredHeight=parseInt(Un.preferredHeight,10)),Un.preferredWidth!==void 0&&(Be.preferredWidth=parseInt(Un.preferredWidth,10)),Be})).concat(ou.map(Se=>({id:Se.id,type:Se.type,active:Se.active}))),Je=!Un.testNetwork&&er(sr,Lr);if(Us.beginConnect(),Je)return this._subscribeToSelf(),this;const at=()=>{wi.subscriberCreate(sr.id,Ri,nt,null,Lr._.isE2ee(),(Se,Be)=>{Se&&!Us.is("disconnected")&&jc(Se),Hn=Jt(Be)})};return qa?gc.addSubscriber(at):at(),this};return ko.hasAudioOutputLevelStatCapability=Xs,ko.WidgetView=yr,ko.SubscriberPeerConnection=Ra,ko}}).call(this,e(1))},function(t,r,e){const n=e(3);t.exports=()=>["Chrome","Opera","Safari"].indexOf(n.name)>-1},function(t,r,e){const n=e(3),o=n.name;t.exports=()=>["Firefox","Safari","Edge","Chrome","Opera"].indexOf(o)>-1},function(t,r,e){const u=e(161)()("NotSubscribing",["NotSubscribing","Init","Connecting","BindingRemoteStream","Subscribing","Failed","Destroyed"],{NotSubscribing:["NotSubscribing","Init","Destroyed"],Init:["NotSubscribing","Connecting","BindingRemoteStream","Destroyed"],Connecting:["NotSubscribing","BindingRemoteStream","Failed","Destroyed"],BindingRemoteStream:["NotSubscribing","Subscribing","Failed","Destroyed","BindingRemoteStream"],Subscribing:["NotSubscribing","Failed","Destroyed","BindingRemoteStream"],Failed:["Destroyed"],Destroyed:[]});u.prototype.isDestroyed=function(){return this.current==="Destroyed"},u.prototype.isFailed=function(){return this.current==="Failed"},u.prototype.isSubscribing=function(){return this.current==="Subscribing"},u.prototype.isAttemptingToSubscribe=function(){return["Init","Connecting","BindingRemoteStream"].indexOf(this.current)!==-1},u.prototype.isStreamAdded=function(){return this.current==="BindingRemoteStream"||this.isSubscribing()},t.exports=u},function(t,r,e){var n=e(0),o=n(e(16));t.exports=a=>{let c=a.socket,u=a.uri,l=a.content;return(f,g)=>c.send({uri:u,method:f,content:(0,o.default)({},l,g)})}},function(t,r,e){(function(o,a){t.exports=a()})(this,function(){return function(n){var o={};function a(c){if(o[c])return o[c].exports;var u=o[c]={i:c,l:!1,exports:{}};return n[c].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=n,a.c=o,a.i=function(c){return c},a.d=function(c,u,l){a.o(c,u)||Object.defineProperty(c,u,{configurable:!1,enumerable:!0,get:l})},a.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(u,"a",u),u},a.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},a.p="",a(a.s=5)}([function(n,o,a){n.exports=function(c,u){var l,f,g;for(l=1;l<arguments.length;l++){f=arguments[l];for(g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c}},function(n,o,a){var c=a(0);n.exports={build:function(u,l){var f,g,v,b=l.plugins;for(f=0,g=b.length;f<g;f++)v=b[f],v.methods&&c(u,v.methods),v.properties&&Object.defineProperties(u,v.properties)},hook:function(u,l,f){var g,v,b,S,C=u.config.plugins,O=[u.context];for(f&&(O=O.concat(f)),g=0,v=C.length;g<v;g++)S=C[g],b=C[g][l],b&&b.apply(S,O)}}},function(n,o,a){function c(u){if(u.length===0)return u;var l,f,g=u.split(/[_-]/);if(g.length===1&&g[0][0].toLowerCase()===g[0][0])return u;for(f=g[0].toLowerCase(),l=1;l<g.length;l++)f=f+g[l].charAt(0).toUpperCase()+g[l].substring(1).toLowerCase();return f}c.prepended=function(u,l){return l=c(l),u+l[0].toUpperCase()+l.substring(1)},n.exports=c},function(n,o,a){var c=a(0),u=a(2);function l(f,g){f=f||{},this.options=f,this.defaults=g.defaults,this.states=[],this.transitions=[],this.map={},this.lifecycle=this.configureLifecycle(),this.init=this.configureInitTransition(f.init),this.data=this.configureData(f.data),this.methods=this.configureMethods(f.methods),this.map[this.defaults.wildcard]={},this.configureTransitions(f.transitions||[]),this.plugins=this.configurePlugins(f.plugins,g.plugin)}c(l.prototype,{addState:function(f){this.map[f]||(this.states.push(f),this.addStateLifecycleNames(f),this.map[f]={})},addStateLifecycleNames:function(f){this.lifecycle.onEnter[f]=u.prepended("onEnter",f),this.lifecycle.onLeave[f]=u.prepended("onLeave",f),this.lifecycle.on[f]=u.prepended("on",f)},addTransition:function(f){this.transitions.indexOf(f)<0&&(this.transitions.push(f),this.addTransitionLifecycleNames(f))},addTransitionLifecycleNames:function(f){this.lifecycle.onBefore[f]=u.prepended("onBefore",f),this.lifecycle.onAfter[f]=u.prepended("onAfter",f),this.lifecycle.on[f]=u.prepended("on",f)},mapTransition:function(f){var g=f.name,v=f.from,b=f.to;return this.addState(v),typeof b!="function"&&this.addState(b),this.addTransition(g),this.map[v][g]=f,f},configureLifecycle:function(){return{onBefore:{transition:"onBeforeTransition"},onAfter:{transition:"onAfterTransition"},onEnter:{state:"onEnterState"},onLeave:{state:"onLeaveState"},on:{transition:"onTransition"}}},configureInitTransition:function(f){return typeof f=="string"?this.mapTransition(c({},this.defaults.init,{to:f,active:!0})):typeof f=="object"?this.mapTransition(c({},this.defaults.init,f,{active:!0})):(this.addState(this.defaults.init.from),this.defaults.init)},configureData:function(f){return typeof f=="function"?f:typeof f=="object"?function(){return f}:function(){return{}}},configureMethods:function(f){return f||{}},configurePlugins:function(f,g){f=f||[];var v,b,S;for(v=0,b=f.length;v<b;v++)S=f[v],typeof S=="function"&&(f[v]=S=S()),S.configure&&S.configure(this);return f},configureTransitions:function(f){var g,v,b,S,C,O=this.defaults.wildcard;for(v=0;v<f.length;v++)for(b=f[v],S=Array.isArray(b.from)?b.from:[b.from||O],C=b.to||O,g=0;g<S.length;g++)this.mapTransition({name:b.name,from:S[g],to:C})},transitionFor:function(f,g){var v=this.defaults.wildcard;return this.map[f][g]||this.map[v][g]},transitionsFor:function(f){var g=this.defaults.wildcard;return Object.keys(this.map[f]).concat(Object.keys(this.map[g]))},allStates:function(){return this.states},allTransitions:function(){return this.transitions}}),n.exports=l},function(n,o,a){var c=a(0),u=a(6),l=a(1),f=[null,[]];function g(v,b){this.context=v,this.config=b,this.state=b.init.from,this.observers=[v]}c(g.prototype,{init:function(v){if(c(this.context,this.config.data.apply(this.context,v)),l.hook(this,"init"),this.config.init.active)return this.fire(this.config.init.name,[])},is:function(v){return Array.isArray(v)?v.indexOf(this.state)>=0:this.state===v},isPending:function(){return this.pending},can:function(v){return!this.isPending()&&!!this.seek(v)},cannot:function(v){return!this.can(v)},allStates:function(){return this.config.allStates()},allTransitions:function(){return this.config.allTransitions()},transitions:function(){return this.config.transitionsFor(this.state)},seek:function(v,b){var S=this.config.defaults.wildcard,C=this.config.transitionFor(this.state,v),O=C&&C.to;return typeof O=="function"?O.apply(this.context,b):O===S?this.state:O},fire:function(v,b){return this.transit(v,this.state,this.seek(v,b),b)},transit:function(v,b,S,C){var O=this.config.lifecycle,A=this.config.options.observeUnchangedState||b!==S;return S?this.isPending()?this.context.onPendingTransition(v,b,S):(this.config.addState(S),this.beginTransit(),C.unshift({transition:v,from:b,to:S,fsm:this.context}),this.observeEvents([this.observersForEvent(O.onBefore.transition),this.observersForEvent(O.onBefore[v]),A?this.observersForEvent(O.onLeave.state):f,A?this.observersForEvent(O.onLeave[b]):f,this.observersForEvent(O.on.transition),A?["doTransit",[this]]:f,A?this.observersForEvent(O.onEnter.state):f,A?this.observersForEvent(O.onEnter[S]):f,A?this.observersForEvent(O.on[S]):f,this.observersForEvent(O.onAfter.transition),this.observersForEvent(O.onAfter[v]),this.observersForEvent(O.on[v])],C)):this.context.onInvalidTransition(v,b,S)},beginTransit:function(){this.pending=!0},endTransit:function(v){return this.pending=!1,v},failTransit:function(v){throw this.pending=!1,v},doTransit:function(v){this.state=v.to},observe:function(v){if(v.length===2){var b={};b[v[0]]=v[1],this.observers.push(b)}else this.observers.push(v[0])},observersForEvent:function(v){for(var b=0,S=this.observers.length,C,O=[];b<S;b++)C=this.observers[b],C[v]&&O.push(C);return[v,O,!0]},observeEvents:function(v,b,S,C){if(v.length===0)return this.endTransit(C===void 0?!0:C);var O=v[0][0],A=v[0][1],w=v[0][2];if(b[0].event=O,O&&w&&O!==S&&l.hook(this,"lifecycle",b),A.length===0)return v.shift(),this.observeEvents(v,b,O,C);var V=A.shift(),k=V[O].apply(V,b);return k&&typeof k.then=="function"?k.then(this.observeEvents.bind(this,v,b,O)).catch(this.failTransit.bind(this)):k===!1?this.endTransit(!1):this.observeEvents(v,b,O,k)},onInvalidTransition:function(v,b,S){throw new u("transition is invalid in current state",v,b,S,this.state)},onPendingTransition:function(v,b,S){throw new u("transition is invalid while previous transition is still in progress",v,b,S,this.state)}}),n.exports=g},function(n,o,a){var c=a(0),u=a(2),l=a(1),f=a(3),g=a(4),v={is:function(w){return this._fsm.is(w)},can:function(w){return this._fsm.can(w)},cannot:function(w){return this._fsm.cannot(w)},observe:function(){return this._fsm.observe(arguments)},transitions:function(){return this._fsm.transitions()},allTransitions:function(){return this._fsm.allTransitions()},allStates:function(){return this._fsm.allStates()},onInvalidTransition:function(w,V,k){return this._fsm.onInvalidTransition(w,V,k)},onPendingTransition:function(w,V,k){return this._fsm.onPendingTransition(w,V,k)}},b={state:{configurable:!1,enumerable:!0,get:function(){return this._fsm.state},set:function(w){throw Error("use transitions to change state")}}};function S(w){return O(this||{},w)}function C(){var w,V;typeof arguments[0]=="function"?(w=arguments[0],V=arguments[1]||{}):(w=function(){this._fsm.apply(this,arguments)},V=arguments[0]||{});var k=new f(V,S);return A(w.prototype,k),w.prototype._fsm.config=k,w}function O(w,V){var k=new f(V,S);return A(w,k),w._fsm(),w}function A(w,V){if(typeof w!="object"||Array.isArray(w))throw Error("StateMachine can only be applied to objects");l.build(w,V),Object.defineProperties(w,b),c(w,v),c(w,V.methods),V.allTransitions().forEach(function(k){w[u(k)]=function(){return this._fsm.fire(k,[].slice.call(arguments))}}),w._fsm=function(){this._fsm=new g(this,V),this._fsm.init(arguments)}}S.version="3.0.1",S.factory=C,S.apply=O,S.defaults={wildcard:"*",init:{name:"init",from:"none"}},n.exports=S},function(n,o,a){n.exports=function(c,u,l,f,g){this.message=c,this.transition=u,this.from=l,this.to=f,this.current=g}}])})},function(t,r,e){const n=e(104)();t.exports=n},function(t,r,e){var n=e(0),o=n(e(14));let a=function(){function c(){(0,o.default)(this,"processTransition",()=>{}),this.routedToRelayedOngoing=!1,this.relayedToRoutedPending=!1}var u=c.prototype;return u.startTransitionTo=function(f,g){g===void 0&&(g=()=>{}),f==="P2P"?this.startRoutedToRelayed():f==="MANTIS"&&this.startRelayedToRouted(g)},u.finishTransitionTo=function(f){f==="P2P"&&this.finishRoutedToRelayed()},u.startRoutedToRelayed=function(){this.routedToRelayedOngoing=!0},u.finishRoutedToRelayed=function(){this.routedToRelayedOngoing=!1,this.relayedToRoutedPending&&(this.relayedToRoutedPending=!1,this.processTransition())},u.startRelayedToRouted=function(f){this.routedToRelayedOngoing?(this.relayedToRoutedPending=!0,this.processTransition=f):f()},c}();t.exports=a},function(t,r,e){(function(n){t.exports=function(a){return function(){for(var u=arguments.length,l=new Array(u),f=0;f<u;f++)l[f]=arguments[f];return new n((g,v)=>{a(...l,function(b){if(b){v(b);return}for(var S=arguments.length,C=new Array(S>1?S-1:0),O=1;O<S;O++)C[O-1]=arguments[O];if(C.length===1){g(C[0]);return}g(C)})})}}}).call(this,e(1))},function(t,r,e){const n=e(702),o=n.setVonageMetadata,a=e(315),c=a.createVonageMediaProcessor,l={isSupported:()=>typeof MediaStreamTrackProcessor<"u"&&typeof MediaStreamTrackGenerator<"u",setMetadata:o,createProcessor:c};t.exports=l},function(t,r,e){e.r(r),function(n,o){e.d(r,"BackgroundTransformer",function(){return Fd}),e.d(r,"BlurRadius",function(){return ct}),e.d(r,"ErrorFunction",function(){return Lr}),e.d(r,"MediapipeHelper",function(){return ec}),e.d(r,"PipelineInfoData",function(){return sr}),e.d(r,"SelfieSegmentationType",function(){return Dd}),e.d(r,"VonageMediaProcessor",function(){return Tl}),e.d(r,"WarningType",function(){return Qa}),e.d(r,"createVonageMediaProcessor",function(){return yg}),e.d(r,"getSupportedBrowserFeatures",function(){return _i}),e.d(r,"getVonageFaceDetection",function(){return hg}),e.d(r,"getVonageFaceMash",function(){return pg}),e.d(r,"getVonageHands",function(){return dg}),e.d(r,"getVonageHolistic",function(){return fg}),e.d(r,"getVonageObjectron",function(){return mg}),e.d(r,"getVonagePose",function(){return gg}),e.d(r,"getVonageSelfieSegmentation",function(){return lg}),e.d(r,"isSupported",function(){return cr});var a=Object.defineProperty,c=(I,x,N)=>x in I?a(I,x,{enumerable:!0,configurable:!0,writable:!0,value:N}):I[x]=N,u=(I,x,N)=>(c(I,typeof x!="symbol"?x+"":x,N),N);function l(){return new n((I,x)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?x("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):I()})}class f{}f.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},f.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};var g={exports:{}},v=function(I,x){return function(){for(var N=new Array(arguments.length),ie=0;ie<N.length;ie++)N[ie]=arguments[ie];return I.apply(x,N)}},b=v,S=Object.prototype.toString;function C(I){return Array.isArray(I)}function O(I){return typeof I>"u"}function A(I){return I!==null&&!O(I)&&I.constructor!==null&&!O(I.constructor)&&typeof I.constructor.isBuffer=="function"&&I.constructor.isBuffer(I)}function w(I){return S.call(I)==="[object ArrayBuffer]"}function V(I){return S.call(I)==="[object FormData]"}function k(I){var x;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?x=ArrayBuffer.isView(I):x=I&&I.buffer&&w(I.buffer),x}function M(I){return typeof I=="string"}function W(I){return typeof I=="number"}function Y(I){return I!==null&&typeof I=="object"}function H(I){if(S.call(I)!=="[object Object]")return!1;var x=Object.getPrototypeOf(I);return x===null||x===Object.prototype}function P(I){return S.call(I)==="[object Date]"}function j(I){return S.call(I)==="[object File]"}function _(I){return S.call(I)==="[object Blob]"}function z(I){return S.call(I)==="[object Function]"}function ae(I){return Y(I)&&z(I.pipe)}function me(I){return S.call(I)==="[object URLSearchParams]"}function ye(I){return I.trim?I.trim():I.replace(/^\s+|\s+$/g,"")}function Pe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Te(I,x){if(!(I===null||typeof I>"u"))if(typeof I!="object"&&(I=[I]),C(I))for(var N=0,ie=I.length;N<ie;N++)x.call(null,I[N],N,I);else for(var pe in I)Object.prototype.hasOwnProperty.call(I,pe)&&x.call(null,I[pe],pe,I)}function Ue(){var I={};function x(pe,Xe){H(I[Xe])&&H(pe)?I[Xe]=Ue(I[Xe],pe):H(pe)?I[Xe]=Ue({},pe):C(pe)?I[Xe]=pe.slice():I[Xe]=pe}for(var N=0,ie=arguments.length;N<ie;N++)Te(arguments[N],x);return I}function _e(I,x,N){return Te(x,function(ie,pe){N&&typeof ie=="function"?I[pe]=b(ie,N):I[pe]=ie}),I}function je(I){return I.charCodeAt(0)===65279&&(I=I.slice(1)),I}var Ke={isArray:C,isArrayBuffer:w,isBuffer:A,isFormData:V,isArrayBufferView:k,isString:M,isNumber:W,isObject:Y,isPlainObject:H,isUndefined:O,isDate:P,isFile:j,isBlob:_,isFunction:z,isStream:ae,isURLSearchParams:me,isStandardBrowserEnv:Pe,forEach:Te,merge:Ue,extend:_e,trim:ye,stripBOM:je},De=Ke;function Ze(I){return encodeURIComponent(I).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var tt=function(I,x,N){if(!x)return I;var ie;if(N)ie=N(x);else if(De.isURLSearchParams(x))ie=x.toString();else{var pe=[];De.forEach(x,function(rt,$e){rt===null||typeof rt>"u"||(De.isArray(rt)?$e=$e+"[]":rt=[rt],De.forEach(rt,function(lt){De.isDate(lt)?lt=lt.toISOString():De.isObject(lt)&&(lt=JSON.stringify(lt)),pe.push(Ze($e)+"="+Ze(lt))}))}),ie=pe.join("&")}if(ie){var Xe=I.indexOf("#");Xe!==-1&&(I=I.slice(0,Xe)),I+=(I.indexOf("?")===-1?"?":"&")+ie}return I},gt=Ke;function Ee(){this.handlers=[]}Ee.prototype.use=function(I,x,N){return this.handlers.push({fulfilled:I,rejected:x,synchronous:N?N.synchronous:!1,runWhen:N?N.runWhen:null}),this.handlers.length-1},Ee.prototype.eject=function(I){this.handlers[I]&&(this.handlers[I]=null)},Ee.prototype.forEach=function(I){gt.forEach(this.handlers,function(x){x!==null&&I(x)})};var Le=Ee,We=Ke,ut=function(I,x){We.forEach(I,function(N,ie){ie!==x&&ie.toUpperCase()===x.toUpperCase()&&(I[x]=N,delete I[ie])})},bt=function(I,x,N,ie,pe){return I.config=x,N&&(I.code=N),I.request=ie,I.response=pe,I.isAxiosError=!0,I.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},I},mt=bt,It=function(I,x,N,ie,pe){var Xe=new Error(I);return mt(Xe,x,N,ie,pe)},Ge=It,Qe=function(I,x,N){var ie=N.config.validateStatus;!N.status||!ie||ie(N.status)?I(N):x(Ge("Request failed with status code "+N.status,N.config,null,N.request,N))},Et=Ke,Tt=Et.isStandardBrowserEnv()?function(){return{write:function(I,x,N,ie,pe,Xe){var rt=[];rt.push(I+"="+encodeURIComponent(x)),Et.isNumber(N)&&rt.push("expires="+new Date(N).toGMTString()),Et.isString(ie)&&rt.push("path="+ie),Et.isString(pe)&&rt.push("domain="+pe),Xe===!0&&rt.push("secure"),document.cookie=rt.join("; ")},read:function(I){var x=document.cookie.match(new RegExp("(^|;\\s*)("+I+")=([^;]*)"));return x?decodeURIComponent(x[3]):null},remove:function(I){this.write(I,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Zt=function(I){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(I)},$t=function(I,x){return x?I.replace(/\/+$/,"")+"/"+x.replace(/^\/+/,""):I},pt=Zt,ft=$t,et=function(I,x){return I&&!pt(x)?ft(I,x):x},it=Ke,Pt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],nn=function(I){var x={},N,ie,pe;return I&&it.forEach(I.split(`
`),function(Xe){if(pe=Xe.indexOf(":"),N=it.trim(Xe.substr(0,pe)).toLowerCase(),ie=it.trim(Xe.substr(pe+1)),N){if(x[N]&&Pt.indexOf(N)>=0)return;N==="set-cookie"?x[N]=(x[N]?x[N]:[]).concat([ie]):x[N]=x[N]?x[N]+", "+ie:ie}}),x},Ut=Ke,xt=Ut.isStandardBrowserEnv()?function(){var I=/(msie|trident)/i.test(navigator.userAgent),x=document.createElement("a"),N;function ie(pe){var Xe=pe;return I&&(x.setAttribute("href",Xe),Xe=x.href),x.setAttribute("href",Xe),{href:x.href,protocol:x.protocol?x.protocol.replace(/:$/,""):"",host:x.host,search:x.search?x.search.replace(/^\?/,""):"",hash:x.hash?x.hash.replace(/^#/,""):"",hostname:x.hostname,port:x.port,pathname:x.pathname.charAt(0)==="/"?x.pathname:"/"+x.pathname}}return N=ie(window.location.href),function(pe){var Xe=Ut.isString(pe)?ie(pe):pe;return Xe.protocol===N.protocol&&Xe.host===N.host}}():function(){return function(){return!0}}();function Wt(I){this.message=I}Wt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Wt.prototype.__CANCEL__=!0;var tn=Wt,mn=Ke,Dn=Qe,er=Tt,Zn=tt,dr=et,pr=nn,Bn=xt,Jn=It,Dt=Ws,Ii=tn,ti=function(I){return new n(function(x,N){var ie=I.data,pe=I.headers,Xe=I.responseType,rt;function $e(){I.cancelToken&&I.cancelToken.unsubscribe(rt),I.signal&&I.signal.removeEventListener("abort",rt)}mn.isFormData(ie)&&delete pe["Content-Type"];var lt=new XMLHttpRequest;if(I.auth){var zt=I.auth.username||"",ln=I.auth.password?unescape(encodeURIComponent(I.auth.password)):"";pe.Authorization="Basic "+btoa(zt+":"+ln)}var hn=dr(I.baseURL,I.url);lt.open(I.method.toUpperCase(),Zn(hn,I.params,I.paramsSerializer),!0),lt.timeout=I.timeout;function ir(){if(lt){var vn="getAllResponseHeaders"in lt?pr(lt.getAllResponseHeaders()):null,Tn=!Xe||Xe==="text"||Xe==="json"?lt.responseText:lt.response,Ir={data:Tn,status:lt.status,statusText:lt.statusText,headers:vn,config:I,request:lt};Dn(function(Er){x(Er),$e()},function(Er){N(Er),$e()},Ir),lt=null}}if("onloadend"in lt?lt.onloadend=ir:lt.onreadystatechange=function(){!lt||lt.readyState!==4||lt.status===0&&!(lt.responseURL&&lt.responseURL.indexOf("file:")===0)||setTimeout(ir)},lt.onabort=function(){!lt||(N(Jn("Request aborted",I,"ECONNABORTED",lt)),lt=null)},lt.onerror=function(){N(Jn("Network Error",I,null,lt)),lt=null},lt.ontimeout=function(){var vn=I.timeout?"timeout of "+I.timeout+"ms exceeded":"timeout exceeded",Tn=I.transitional||Dt.transitional;I.timeoutErrorMessage&&(vn=I.timeoutErrorMessage),N(Jn(vn,I,Tn.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",lt)),lt=null},mn.isStandardBrowserEnv()){var ur=(I.withCredentials||Bn(hn))&&I.xsrfCookieName?er.read(I.xsrfCookieName):void 0;ur&&(pe[I.xsrfHeaderName]=ur)}"setRequestHeader"in lt&&mn.forEach(pe,function(vn,Tn){typeof ie>"u"&&Tn.toLowerCase()==="content-type"?delete pe[Tn]:lt.setRequestHeader(Tn,vn)}),mn.isUndefined(I.withCredentials)||(lt.withCredentials=!!I.withCredentials),Xe&&Xe!=="json"&&(lt.responseType=I.responseType),typeof I.onDownloadProgress=="function"&&lt.addEventListener("progress",I.onDownloadProgress),typeof I.onUploadProgress=="function"&&lt.upload&&lt.upload.addEventListener("progress",I.onUploadProgress),(I.cancelToken||I.signal)&&(rt=function(vn){!lt||(N(!vn||vn&&vn.type?new Ii("canceled"):vn),lt.abort(),lt=null)},I.cancelToken&&I.cancelToken.subscribe(rt),I.signal&&(I.signal.aborted?rt():I.signal.addEventListener("abort",rt))),ie||(ie=null),lt.send(ie)})},ci=Ke,Rr=ut,Vr=bt,ui={"Content-Type":"application/x-www-form-urlencoded"};function Vi(I,x){!ci.isUndefined(I)&&ci.isUndefined(I["Content-Type"])&&(I["Content-Type"]=x)}function Os(){var I;return(typeof XMLHttpRequest<"u"||typeof o<"u"&&Object.prototype.toString.call(o)==="[object process]")&&(I=ti),I}function ii(I,x,N){if(ci.isString(I))try{return(x||JSON.parse)(I),ci.trim(I)}catch(ie){if(ie.name!=="SyntaxError")throw ie}return(N||JSON.stringify)(I)}var xo={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Os(),transformRequest:[function(I,x){return Rr(x,"Accept"),Rr(x,"Content-Type"),ci.isFormData(I)||ci.isArrayBuffer(I)||ci.isBuffer(I)||ci.isStream(I)||ci.isFile(I)||ci.isBlob(I)?I:ci.isArrayBufferView(I)?I.buffer:ci.isURLSearchParams(I)?(Vi(x,"application/x-www-form-urlencoded;charset=utf-8"),I.toString()):ci.isObject(I)||x&&x["Content-Type"]==="application/json"?(Vi(x,"application/json"),ii(I)):I}],transformResponse:[function(I){var x=this.transitional||xo.transitional,N=x&&x.silentJSONParsing,ie=x&&x.forcedJSONParsing,pe=!N&&this.responseType==="json";if(pe||ie&&ci.isString(I)&&I.length)try{return JSON.parse(I)}catch(Xe){if(pe)throw Xe.name==="SyntaxError"?Vr(Xe,this,"E_JSON_PARSE"):Xe}return I}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(I){return I>=200&&I<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ci.forEach(["delete","get","head"],function(I){xo.headers[I]={}}),ci.forEach(["post","put","patch"],function(I){xo.headers[I]=ci.merge(ui)});var Ws=xo,ga=Ke,Kn=Ws,mi=function(I,x,N){var ie=this||Kn;return ga.forEach(N,function(pe){I=pe.call(ie,I,x)}),I},ya=function(I){return!!(I&&I.__CANCEL__)},ki=Ke,Ao=mi,Ln=ya,Uo=Ws,Xr=tn;function bs(I){if(I.cancelToken&&I.cancelToken.throwIfRequested(),I.signal&&I.signal.aborted)throw new Xr("canceled")}var Xs=function(I){bs(I),I.headers=I.headers||{},I.data=Ao.call(I,I.data,I.headers,I.transformRequest),I.headers=ki.merge(I.headers.common||{},I.headers[I.method]||{},I.headers),ki.forEach(["delete","get","head","post","put","patch","common"],function(N){delete I.headers[N]});var x=I.adapter||Uo.adapter;return x(I).then(function(N){return bs(I),N.data=Ao.call(I,N.data,N.headers,I.transformResponse),N},function(N){return Ln(N)||(bs(I),N&&N.response&&(N.response.data=Ao.call(I,N.response.data,N.response.headers,I.transformResponse))),n.reject(N)})},rr=Ke,oi=function(I,x){x=x||{};var N={};function ie(zt,ln){return rr.isPlainObject(zt)&&rr.isPlainObject(ln)?rr.merge(zt,ln):rr.isPlainObject(ln)?rr.merge({},ln):rr.isArray(ln)?ln.slice():ln}function pe(zt){if(rr.isUndefined(x[zt])){if(!rr.isUndefined(I[zt]))return ie(void 0,I[zt])}else return ie(I[zt],x[zt])}function Xe(zt){if(!rr.isUndefined(x[zt]))return ie(void 0,x[zt])}function rt(zt){if(rr.isUndefined(x[zt])){if(!rr.isUndefined(I[zt]))return ie(void 0,I[zt])}else return ie(void 0,x[zt])}function $e(zt){if(zt in x)return ie(I[zt],x[zt]);if(zt in I)return ie(void 0,I[zt])}var lt={url:Xe,method:Xe,data:Xe,baseURL:rt,transformRequest:rt,transformResponse:rt,paramsSerializer:rt,timeout:rt,timeoutMessage:rt,withCredentials:rt,adapter:rt,responseType:rt,xsrfCookieName:rt,xsrfHeaderName:rt,onUploadProgress:rt,onDownloadProgress:rt,decompress:rt,maxContentLength:rt,maxBodyLength:rt,transport:rt,httpAgent:rt,httpsAgent:rt,cancelToken:rt,socketPath:rt,responseEncoding:rt,validateStatus:$e};return rr.forEach(Object.keys(I).concat(Object.keys(x)),function(zt){var ln=lt[zt]||pe,hn=ln(zt);rr.isUndefined(hn)&&ln!==$e||(N[zt]=hn)}),N},Ds={version:"0.25.0"},ea=Ds.version,Ji={};["object","boolean","number","function","string","symbol"].forEach(function(I,x){Ji[I]=function(N){return typeof N===I||"a"+(x<1?"n ":" ")+I}});var mr={};Ji.transitional=function(I,x,N){function ie(pe,Xe){return"[Axios v"+ea+"] Transitional option '"+pe+"'"+Xe+(N?". "+N:"")}return function(pe,Xe,rt){if(I===!1)throw new Error(ie(Xe," has been removed"+(x?" in "+x:"")));return x&&!mr[Xe]&&(mr[Xe]=!0,console.warn(ie(Xe," has been deprecated since v"+x+" and will be removed in the near future"))),I?I(pe,Xe,rt):!0}};function Da(I,x,N){if(typeof I!="object")throw new TypeError("options must be an object");for(var ie=Object.keys(I),pe=ie.length;pe-- >0;){var Xe=ie[pe],rt=x[Xe];if(rt){var $e=I[Xe],lt=$e===void 0||rt($e,Xe,I);if(lt!==!0)throw new TypeError("option "+Xe+" must be "+lt);continue}if(N!==!0)throw Error("Unknown option "+Xe)}}var ca={assertOptions:Da,validators:Ji},Ss=Ke,kr=tt,zs=Le,Vn=Xs,Cs=oi,$o=ca,Bs=$o.validators;function Zr(I){this.defaults=I,this.interceptors={request:new zs,response:new zs}}Zr.prototype.request=function(I,x){if(typeof I=="string"?(x=x||{},x.url=I):x=I||{},!x.url)throw new Error("Provided config url is not valid");x=Cs(this.defaults,x),x.method?x.method=x.method.toLowerCase():this.defaults.method?x.method=this.defaults.method.toLowerCase():x.method="get";var N=x.transitional;N!==void 0&&$o.assertOptions(N,{silentJSONParsing:Bs.transitional(Bs.boolean),forcedJSONParsing:Bs.transitional(Bs.boolean),clarifyTimeoutError:Bs.transitional(Bs.boolean)},!1);var ie=[],pe=!0;this.interceptors.request.forEach(function(hn){typeof hn.runWhen=="function"&&hn.runWhen(x)===!1||(pe=pe&&hn.synchronous,ie.unshift(hn.fulfilled,hn.rejected))});var Xe=[];this.interceptors.response.forEach(function(hn){Xe.push(hn.fulfilled,hn.rejected)});var rt;if(!pe){var $e=[Vn,void 0];for(Array.prototype.unshift.apply($e,ie),$e=$e.concat(Xe),rt=n.resolve(x);$e.length;)rt=rt.then($e.shift(),$e.shift());return rt}for(var lt=x;ie.length;){var zt=ie.shift(),ln=ie.shift();try{lt=zt(lt)}catch(hn){ln(hn);break}}try{rt=Vn(lt)}catch(hn){return n.reject(hn)}for(;Xe.length;)rt=rt.then(Xe.shift(),Xe.shift());return rt},Zr.prototype.getUri=function(I){if(!I.url)throw new Error("Provided config url is not valid");return I=Cs(this.defaults,I),kr(I.url,I.params,I.paramsSerializer).replace(/^\?/,"")},Ss.forEach(["delete","get","head","options"],function(I){Zr.prototype[I]=function(x,N){return this.request(Cs(N||{},{method:I,url:x,data:(N||{}).data}))}}),Ss.forEach(["post","put","patch"],function(I){Zr.prototype[I]=function(x,N,ie){return this.request(Cs(ie||{},{method:I,url:x,data:N}))}});var Ba=Zr,rc=tn;function Js(I){if(typeof I!="function")throw new TypeError("executor must be a function.");var x;this.promise=new n(function(ie){x=ie});var N=this;this.promise.then(function(ie){if(N._listeners){var pe,Xe=N._listeners.length;for(pe=0;pe<Xe;pe++)N._listeners[pe](ie);N._listeners=null}}),this.promise.then=function(ie){var pe,Xe=new n(function(rt){N.subscribe(rt),pe=rt}).then(ie);return Xe.cancel=function(){N.unsubscribe(pe)},Xe},I(function(ie){N.reason||(N.reason=new rc(ie),x(N.reason))})}Js.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Js.prototype.subscribe=function(I){if(this.reason){I(this.reason);return}this._listeners?this._listeners.push(I):this._listeners=[I]},Js.prototype.unsubscribe=function(I){if(this._listeners){var x=this._listeners.indexOf(I);x!==-1&&this._listeners.splice(x,1)}},Js.source=function(){var I,x=new Js(function(N){I=N});return{token:x,cancel:I}};var Ra=Js,va=function(I){return function(x){return I.apply(null,x)}},za=Ke,xa=function(I){return za.isObject(I)&&I.isAxiosError===!0},Ua=Ke,ds=v,un=Ba,yn=oi,En=Ws;function Sn(I){var x=new un(I),N=ds(un.prototype.request,x);return Ua.extend(N,un.prototype,x),Ua.extend(N,x),N.create=function(ie){return Sn(yn(I,ie))},N}var xr=Sn(En);xr.Axios=un,xr.Cancel=tn,xr.CancelToken=Ra,xr.isCancel=ya,xr.VERSION=Ds.version,xr.all=function(I){return n.all(I)},xr.spread=va,xr.isAxiosError=xa,g.exports=xr,g.exports.default=xr;var li=g.exports;class At{isEmpty(){return!this.isPresent()}static of(x){if(x!=null)return new en(x);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(x){return At.of(x)}static ofNullable(x){return x!=null?new en(x):new Jt}static empty(){return new Jt}static from(x){switch(x.kind){case"present":return At.of(x.value);case"empty":return At.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class en extends At{constructor(x){super(),this.payload=x}isPresent(){return!0}get(){return this.payload}ifPresent(x){x(this.payload)}ifPresentOrElse(x,N){x(this.payload)}filter(x){return x(this.payload)?this:At.empty()}map(x){const N=x(this.payload);return At.ofNullable(N)}flatMap(x){return x(this.payload)}or(x){return this}orElse(x){return this.payload}orElseGet(x){return this.payload}orElseThrow(x){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(x){return x.present(this.payload)}toJSON(x){return this.payload}}class Jt extends At{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(x){}ifPresentOrElse(x,N){N()}filter(x){return this}map(x){return At.empty()}flatMap(x){return At.empty()}or(x){return x()}orElse(x){return x}orElseGet(x){return this.orElse(x())}orElseThrow(x){throw x()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(x){return x.empty()}toJSON(x){return null}}const Cn="2.0.0";function On(I){globalThis._vonageMediaProcessorMetadata=I}function Pn(){return globalThis._vonageMediaProcessorMetadata}class yr{constructor(){const x=Pn();this._report={action:At.empty(),applicationId:At.ofNullable(x!==void 0&&x!=null?x.appId:null),timestamp:Date.now(),fps:At.empty(),framesTransformed:At.empty(),guid:At.empty(),highestFrameTransformCpu:At.empty(),message:At.empty(),source:At.ofNullable(x!==void 0&&x!=null?x.sourceType:null),transformedFps:At.empty(),transformerType:At.empty(),variation:At.empty(),videoHeight:At.empty(),videoWidth:At.empty(),version:Cn,error:At.empty(),proxyUrl:At.ofNullable(x!==void 0&&x!=null?x.proxyUrl:null)}}action(x){return this._report.action=At.ofNullable(x),this}framesTransformed(x){return this._report.framesTransformed=At.ofNullable(x),this}fps(x){return this._report.fps=At.ofNullable(x),this}guid(x){return this._report.guid=At.ofNullable(x),this}message(x){return this._report.message=At.ofNullable(x),this}transformedFps(x){return this._report.transformedFps=At.ofNullable(x),this}transformerType(x){return this._report.transformerType=At.ofNullable(x),this}variation(x){return this._report.variation=At.ofNullable(x),this}videoHeight(x){return this._report.videoHeight=At.ofNullable(x),this}videoWidth(x){return this._report.videoWidth=At.ofNullable(x),this}error(x){return this._report.error=At.ofNullable(x),this}build(){return this._report}}const Cr=I=>JSON.stringify(I,(x,N)=>{if(N!==null)return N});class Kr{static report(x){return new n((N,ie)=>{if(x.applicationId.isEmpty()||x.source.isEmpty()){N("success");return}let pe=li.create(),Xe={timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}},rt="hlg.tokbox.com/prod/logging/vcp_webrtc";if(x.proxyUrl.isEmpty())rt="https://"+rt;else{let $e;x.proxyUrl.get().slice(x.proxyUrl.get().length-1)!=="/"?$e=x.proxyUrl.get()+"/":$e=x.proxyUrl.get(),rt=$e+rt}pe.post(rt,Cr(x),Xe).then($e=>{console.log($e),N("success")}).catch($e=>{console.log($e),ie($e)})})}}var ko,Si=new Uint8Array(16);function Ia(){if(!ko&&(ko=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ko))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ko(Si)}var Li=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function wa(I){return typeof I=="string"&&Li.test(I)}for(var or=[],As=0;As<256;++As)or.push((As+256).toString(16).substr(1));function Ri(I){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,N=(or[I[x+0]]+or[I[x+1]]+or[I[x+2]]+or[I[x+3]]+"-"+or[I[x+4]]+or[I[x+5]]+"-"+or[I[x+6]]+or[I[x+7]]+"-"+or[I[x+8]]+or[I[x+9]]+"-"+or[I[x+10]]+or[I[x+11]]+or[I[x+12]]+or[I[x+13]]+or[I[x+14]]+or[I[x+15]]).toLowerCase();if(!wa(N))throw TypeError("Stringified UUID is invalid");return N}function ua(I,x,N){I=I||{};var ie=I.random||(I.rng||Ia)();if(ie[6]=ie[6]&15|64,ie[8]=ie[8]&63|128,x){N=N||0;for(var pe=0;pe<16;++pe)x[N+pe]=ie[pe];return x}return Ri(ie)}const Zo=new WeakMap,ta=new WeakMap,Pi=new WeakMap,na=Symbol("anyProducer"),fs=n.resolve(),Ga=Symbol("listenerAdded"),Fo=Symbol("listenerRemoved");let jn=!1;function gn(I){if(typeof I!="string"&&typeof I!="symbol")throw new TypeError("eventName must be a string or a symbol")}function ra(I){if(typeof I!="function")throw new TypeError("listener must be a function")}function Vs(I,x){const N=ta.get(I);return N.has(x)||N.set(x,new Set),N.get(x)}function Ma(I,x){const N=typeof x=="string"||typeof x=="symbol"?x:na,ie=Pi.get(I);return ie.has(N)||ie.set(N,new Set),ie.get(N)}function Ai(I,x,N){const ie=Pi.get(I);if(ie.has(x))for(const pe of ie.get(x))pe.enqueue(N);if(ie.has(na)){const pe=n.all([x,N]);for(const Xe of ie.get(na))Xe.enqueue(pe)}}function fr(I,x){x=Array.isArray(x)?x:[x];let N=!1,ie=()=>{},pe=[];const Xe={enqueue(rt){pe.push(rt),ie()},finish(){N=!0,ie()}};for(const rt of x)Ma(I,rt).add(Xe);return{async next(){return pe?pe.length===0?N?(pe=void 0,this.next()):(await new n(rt=>{ie=rt}),this.next()):{done:!1,value:await pe.shift()}:{done:!0}},async return(rt){pe=void 0;for(const $e of x)Ma(I,$e).delete(Xe);return ie(),arguments.length>0?{done:!0,value:await rt}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Oa(I){if(I===void 0)return Ja;if(!Array.isArray(I))throw new TypeError("`methodNames` must be an array of strings");for(const x of I)if(!Ja.includes(x))throw typeof x!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${x} is not Emittery method`);return I}const Ho=I=>I===Ga||I===Fo;class la{static mixin(x,N){return N=Oa(N),ie=>{if(typeof ie!="function")throw new TypeError("`target` must be function");for(const rt of N)if(ie.prototype[rt]!==void 0)throw new Error(`The property \`${rt}\` already exists on \`target\``);function pe(){return Object.defineProperty(this,x,{enumerable:!1,value:new la}),this[x]}Object.defineProperty(ie.prototype,x,{enumerable:!1,get:pe});const Xe=rt=>function(...$e){return this[x][rt](...$e)};for(const rt of N)Object.defineProperty(ie.prototype,rt,{enumerable:!1,value:Xe(rt)});return ie}}static get isDebugEnabled(){if(typeof o!="object")return jn;const{env:x}=o||{env:{}};return x.DEBUG==="emittery"||x.DEBUG==="*"||jn}static set isDebugEnabled(x){jn=x}constructor(x={}){Zo.set(this,new Set),ta.set(this,new Map),Pi.set(this,new Map),this.debug=x.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(N,ie,pe,Xe)=>{Xe=JSON.stringify(Xe),typeof pe=="symbol"&&(pe=pe.toString());const rt=new Date,$e=`${rt.getHours()}:${rt.getMinutes()}:${rt.getSeconds()}.${rt.getMilliseconds()}`;console.log(`[${$e}][emittery:${N}][${ie}] Event Name: ${pe}
	data: ${Xe}`)})}logIfDebugEnabled(x,N,ie){(la.isDebugEnabled||this.debug.enabled)&&this.debug.logger(x,this.debug.name,N,ie)}on(x,N){ra(N),x=Array.isArray(x)?x:[x];for(const ie of x)gn(ie),Vs(this,ie).add(N),this.logIfDebugEnabled("subscribe",ie,void 0),Ho(ie)||this.emit(Ga,{eventName:ie,listener:N});return this.off.bind(this,x,N)}off(x,N){ra(N),x=Array.isArray(x)?x:[x];for(const ie of x)gn(ie),Vs(this,ie).delete(N),this.logIfDebugEnabled("unsubscribe",ie,void 0),Ho(ie)||this.emit(Fo,{eventName:ie,listener:N})}once(x){return new n(N=>{const ie=this.on(x,pe=>{ie(),N(pe)})})}events(x){x=Array.isArray(x)?x:[x];for(const N of x)gn(N);return fr(this,x)}async emit(x,N){gn(x),this.logIfDebugEnabled("emit",x,N),Ai(this,x,N);const ie=Vs(this,x),pe=Zo.get(this),Xe=[...ie],rt=Ho(x)?[]:[...pe];await fs,await n.all([...Xe.map(async $e=>{if(ie.has($e))return $e(N)}),...rt.map(async $e=>{if(pe.has($e))return $e(x,N)})])}async emitSerial(x,N){gn(x),this.logIfDebugEnabled("emitSerial",x,N);const ie=Vs(this,x),pe=Zo.get(this),Xe=[...ie],rt=[...pe];await fs;for(const $e of Xe)ie.has($e)&&await $e(N);for(const $e of rt)pe.has($e)&&await $e(x,N)}onAny(x){return ra(x),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Zo.get(this).add(x),this.emit(Ga,{listener:x}),this.offAny.bind(this,x)}anyEvent(){return fr(this)}offAny(x){ra(x),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Fo,{listener:x}),Zo.get(this).delete(x)}clearListeners(x){x=Array.isArray(x)?x:[x];for(const N of x)if(this.logIfDebugEnabled("clear",N,void 0),typeof N=="string"||typeof N=="symbol"){Vs(this,N).clear();const ie=Ma(this,N);for(const pe of ie)pe.finish();ie.clear()}else{Zo.get(this).clear();for(const ie of ta.get(this).values())ie.clear();for(const ie of Pi.get(this).values()){for(const pe of ie)pe.finish();ie.clear()}}}listenerCount(x){x=Array.isArray(x)?x:[x];let N=0;for(const ie of x){if(typeof ie=="string"){N+=Zo.get(this).size+Vs(this,ie).size+Ma(this,ie).size+Ma(this).size;continue}typeof ie<"u"&&gn(ie),N+=Zo.get(this).size;for(const pe of ta.get(this).values())N+=pe.size;for(const pe of Pi.get(this).values())N+=pe.size}return N}bindMethods(x,N){if(typeof x!="object"||x===null)throw new TypeError("`target` must be an object");N=Oa(N);for(const ie of N){if(x[ie]!==void 0)throw new Error(`The property \`${ie}\` already exists on \`target\``);Object.defineProperty(x,ie,{enumerable:!1,value:this[ie].bind(this)})}}}const Ja=Object.getOwnPropertyNames(la.prototype).filter(I=>I!=="constructor");Object.defineProperty(la,"listenerAdded",{value:Ga,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(la,"listenerRemoved",{value:Fo,writable:!1,enumerable:!0,configurable:!1});var ja=la;function Ha(I){return typeof I=="object"&&I!==null&&"message"in I&&typeof I.message=="string"}function $a(I){if(Ha(I))return I;try{return new Error(JSON.stringify(I))}catch{return new Error(String(I))}}function ic(I){return $a(I).message}var Qa=(I=>(I.FPS_DROP="fps_drop",I))(Qa||{}),Lr=(I=>(I.start="start",I.transform="transform",I.flush="flush",I))(Lr||{}),sr=(I=>(I.pipeline_ended="pipeline_ended",I.pipeline_ended_with_error="pipeline_ended_with_error",I.pipeline_started="pipeline_started",I.pipeline_started_with_error="pipeline_started_with_error",I.pipeline_restarted="pipeline_restarted",I.pipeline_restarted_with_error="pipeline_restarted_with_error",I))(sr||{});const Bc=500,gc=.8;class qa extends ja{constructor(x,N){super(),this.index_=N,this.uuid_=ua(),this.framesTransformed_=0,this.transformer_=x,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in x&&(this.transformerType_=x.getTransformerType());const ie=new yr().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();Kr.report(ie)}setTrackExpectedRate(x){this.trackExpectedRate_=x}async start(x){if(this.controller_=x,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(x)}catch(N){const ie=new yr().action("MediaTransformer").guid(this.uuid_).message(f.errors.transformer_start).transformerType(this.transformerType_).variation("Error").error(ic(N)).build();Kr.report(ie);const pe={eventMetaData:{transformerIndex:this.index_},error:N,function:"start"};this.emit("error",pe)}}async transform(x,N){var ie,pe,Xe,rt;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),x instanceof VideoFrame&&(this.videoHeight_=(ie=x==null?void 0:x.displayHeight)!=null?ie:0,this.videoWidth_=(pe=x==null?void 0:x.displayWidth)!=null?pe:0),++this.framesFromSource_,this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),x.close(),this.flush(N),N.terminate();else try{await((rt=(Xe=this.transformer_).transform)==null?void 0:rt.call(Xe,x,N)),++this.framesTransformed_,this.framesTransformed_===Bc&&this.mediaTransformerQosReport()}catch($e){const lt=new yr().action("MediaTransformer").guid(this.uuid_).message(f.errors.transformer_transform).transformerType(this.transformerType_).variation("Error").error(ic($e)).build();Kr.report(lt);const zt={eventMetaData:{transformerIndex:this.index_},error:$e,function:"transform"};this.emit("error",zt)}}async flush(x){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(x)}catch(ie){const pe=new yr().action("MediaTransformer").guid(this.uuid_).message(f.errors.transformer_flush).transformerType(this.transformerType_).variation("Error").error(ic(ie)).build();Kr.report(pe);const Xe={eventMetaData:{transformerIndex:this.index_},error:ie,function:"flush"};this.emit("error",Xe)}}this.mediaTransformerQosReport();const N=new yr().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Delete").build();Kr.report(N)}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}mediaTransformerQosReport(){let x=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,N=this.framesFromSource_/x,ie=this.framesTransformed_/x;if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*gc>N){const Xe={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:N}};this.emit("warn",Xe)}const pe=new yr().action("MediaTransformer").fps(N).transformedFps(ie).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();Kr.report(pe),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class ba extends ja{constructor(x){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let N=0;N<x.length;N++){let ie=new qa(x[N],N);ie.on("error",pe=>{this.emit("error",pe)}),ie.on("warn",pe=>{this.emit("warn",pe)}),this.transformers_.push(ie)}}setTrackExpectedRate(x){this.trackExpectedRate_=x;for(let N of this.transformers_)N.setTrackExpectedRate(this.trackExpectedRate_)}async start(x,N){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let ie=x;for(let pe of this.transformers_)x=x.pipeThrough(new TransformStream(pe));x.pipeTo(N).then(async()=>{console.log("[Pipeline] Setup."),await N.abort(),await ie.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async pe=>{x.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(Xe=>{console.error("[Pipeline] Error from stream transform:",Xe)}),await N.abort(pe),await ie.cancel(pe),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let x of this.transformers_)x.stop()}}class _s extends ja{constructor(){super(),this.uuid_=ua(),this.trackExpectedRate_=-1;const x=new yr().action("MediaProcessor").guid(this.uuid_).variation("Create").build();Kr.report(x)}setTrackExpectedRate(x){this.trackExpectedRate_=x,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(x,N){return this.readable_=x,this.writable_=N,this.transformInternal()}transformInternal(){return new n((x,N)=>{if(!this.transformers_||this.transformers_.length===0){const pe=new yr().action("MediaProcessor").guid(this.uuid_).message(f.errors.transformer_none).variation("Error").build();Kr.report(pe),N("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){const pe=new yr().action("MediaProcessor").guid(this.uuid_).message(f.errors.readable_null).variation("Error").build();Kr.report(pe),N("[MediaProcessor] Readable is null.");return}if(!this.writable_){const pe=new yr().action("MediaProcessor").guid(this.uuid_).message(f.errors.writable_null).variation("Error").build();Kr.report(pe),N("[MediaProcessor] Writable is null.");return}let ie=!1;this.pipeline_&&(ie=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new ba(this.transformers_),this.pipeline_.on("warn",pe=>{this.emit("warn",pe)}),this.pipeline_.on("error",pe=>{this.emit("error",pe)}),this.pipeline_.on("pipelineInfo",pe=>{ie&&(pe==="pipeline_started"?pe=sr.pipeline_restarted:pe==="pipeline_started_with_error"&&(pe=sr.pipeline_restarted_with_error)),this.emit("pipelineInfo",pe)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{x()}).catch(pe=>{N(pe)})})}setTransformers(x){const N=new yr().action("MediaProcessor").guid(this.uuid_).message(f.updates.transformer_new).variation("Update").build();return Kr.report(N),this.transformers_=x,this.readable_&&this.writable_?this.transformInternal():n.resolve()}destroy(){return new n(x=>{this.pipeline_&&this.pipeline_.destroy();const N=new yr().action("MediaProcessor").guid(this.uuid_).variation("Delete").build();Kr.report(N),x()})}}class dt{constructor(){this.processor_=null,this.generator_=null}init(x){return new n((N,ie)=>{try{this.processor_=new MediaStreamTrackProcessor(x)}catch(pe){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${pe}`),ie(pe)}try{x.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):x.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):ie("kind not supported")}catch(pe){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${pe}`),ie(pe)}N()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class Ce{constructor(x){this.insertableStreamHelper_=new dt,this.mediaProcessor_=x}setTrack(x){return new n((N,ie)=>{this.insertableStreamHelper_.init(x).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{N(this.insertableStreamHelper_.getProccesorTrack())}).catch(pe=>{ie(pe)})}).catch(pe=>{ie(pe)})})}destroy(){return new n((x,N)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{x()}).catch(ie=>{N(ie)}):N("no processor")})}}var ct=(I=>(I.Low="Low",I.High="High",I))(ct||{});const Lt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]));var Ft=function(){var I=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(x){x=x||{};var N=typeof x<"u"?x:{},ie,pe;N.ready=new n(function(qt,an){ie=qt,pe=an});var Xe={},rt;for(rt in N)N.hasOwnProperty(rt)&&(Xe[rt]=N[rt]);var $e="./this.program",lt=function(qt,an){throw an},zt=!0,ln="";function hn(qt){return N.locateFile?N.locateFile(qt,ln):ln+qt}var ir;typeof document<"u"&&document.currentScript&&(ln=document.currentScript.src),I&&(ln=I),ln.indexOf("blob:")!==0?ln=ln.substr(0,ln.replace(/[?#].*/,"").lastIndexOf("/")+1):ln="";var ur=N.print||console.log.bind(console),vn=N.printErr||console.warn.bind(console);for(rt in Xe)Xe.hasOwnProperty(rt)&&(N[rt]=Xe[rt]);Xe=null,N.arguments&&N.arguments,N.thisProgram&&($e=N.thisProgram),N.quit&&(lt=N.quit);var Tn;N.wasmBinary&&(Tn=N.wasmBinary);var Ir=N.noExitRuntime||!0;typeof WebAssembly!="object"&&di("no native wasm support detected");var Er,zr=!1,jt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Rs(qt,an,bn){for(var Wr=an+bn,si=an;qt[si]&&!(si>=Wr);)++si;if(si-an>16&&qt.subarray&&jt)return jt.decode(qt.subarray(an,si));for(var ni="";an<si;){var nr=qt[an++];if(!(nr&128)){ni+=String.fromCharCode(nr);continue}var hi=qt[an++]&63;if((nr&224)==192){ni+=String.fromCharCode((nr&31)<<6|hi);continue}var Yi=qt[an++]&63;if((nr&240)==224?nr=(nr&15)<<12|hi<<6|Yi:nr=(nr&7)<<18|hi<<12|Yi<<6|qt[an++]&63,nr<65536)ni+=String.fromCharCode(nr);else{var es=nr-65536;ni+=String.fromCharCode(55296|es>>10,56320|es&1023)}}return ni}function ps(qt,an){return qt?Rs(Gn,qt,an):""}function Ni(qt,an,bn){for(var Wr=0;Wr<qt.length;++Wr)ai[an++>>0]=qt.charCodeAt(Wr);bn||(ai[an>>0]=0)}function Ur(qt,an){return qt%an>0&&(qt+=an-qt%an),qt}var Za,ai,Gn,xs;function La(qt){Za=qt,N.HEAP8=ai=new Int8Array(qt),N.HEAP16=new Int16Array(qt),N.HEAP32=xs=new Int32Array(qt),N.HEAPU8=Gn=new Uint8Array(qt),N.HEAPU16=new Uint16Array(qt),N.HEAPU32=new Uint32Array(qt),N.HEAPF32=new Float32Array(qt),N.HEAPF64=new Float64Array(qt)}N.INITIAL_MEMORY;var Zi,br=[],Xi=[],ss=[],Fs=0;function oa(){return Ir||Fs>0}function Hs(){if(N.preRun)for(typeof N.preRun=="function"&&(N.preRun=[N.preRun]);N.preRun.length;)Is(N.preRun.shift());Dr(br)}function pa(){Dr(Xi)}function gs(){if(N.postRun)for(typeof N.postRun=="function"&&(N.postRun=[N.postRun]);N.postRun.length;)sa(N.postRun.shift());Dr(ss)}function Is(qt){br.unshift(qt)}function Ea(qt){Xi.unshift(qt)}function sa(qt){ss.unshift(qt)}var Yo=0,Wo=null;function Ys(qt){Yo++,N.monitorRunDependencies&&N.monitorRunDependencies(Yo)}function Gs(qt){if(Yo--,N.monitorRunDependencies&&N.monitorRunDependencies(Yo),Yo==0&&Wo){var an=Wo;Wo=null,an()}}N.preloadedImages={},N.preloadedAudios={};function di(qt){N.onAbort&&N.onAbort(qt),qt="Aborted("+qt+")",vn(qt),zr=!0,qt+=". Build with -s ASSERTIONS=1 for more info.";var an=new WebAssembly.RuntimeError(qt);throw pe(an),an}var Mi="data:application/octet-stream;base64,";function Ko(qt){return qt.startsWith(Mi)}var Jr;Jr="tflite-simd.wasm",Ko(Jr)||(Jr=hn(Jr));function Oi(qt){try{if(qt==Jr&&Tn)return new Uint8Array(Tn);if(!ir)throw"both async and sync fetching of the wasm failed"}catch(an){di(an)}}function as(){return!Tn&&zt&&typeof fetch=="function"?fetch(Jr,{credentials:"same-origin"}).then(function(qt){if(!qt.ok)throw"failed to load wasm binary file at '"+Jr+"'";return qt.arrayBuffer()}).catch(function(){return Oi(Jr)}):n.resolve().then(function(){return Oi(Jr)})}function eo(){var qt={a:fi};function an(nr,hi){var Yi=nr.exports;N.asm=Yi,Er=N.asm.q,La(Er.buffer),Zi=N.asm.E,Ea(N.asm.r),Gs()}Ys();function bn(nr){an(nr.instance)}function Wr(nr){return as().then(function(hi){return WebAssembly.instantiate(hi,qt)}).then(function(hi){return hi}).then(nr,function(hi){vn("failed to asynchronously prepare wasm: "+hi),di(hi)})}function si(){return!Tn&&typeof WebAssembly.instantiateStreaming=="function"&&!Ko(Jr)&&typeof fetch=="function"?fetch(Jr,{credentials:"same-origin"}).then(function(nr){var hi=WebAssembly.instantiateStreaming(nr,qt);return hi.then(bn,function(Yi){return vn("wasm streaming compile failed: "+Yi),vn("falling back to ArrayBuffer instantiation"),Wr(bn)})}):Wr(bn)}if(N.instantiateWasm)try{var ni=N.instantiateWasm(qt,an);return ni}catch(nr){return vn("Module.instantiateWasm callback failed with error: "+nr),!1}return si().catch(pe),{}}function Dr(qt){for(;qt.length>0;){var an=qt.shift();if(typeof an=="function"){an(N);continue}var bn=an.func;typeof bn=="number"?an.arg===void 0?Zi.get(bn)():Zi.get(bn)(an.arg):bn(an.arg===void 0?null:an.arg)}}function Ci(qt,an,bn,Wr){di("Assertion failed: "+ps(qt)+", at: "+[an?ps(an):"unknown filename",bn,Wr?ps(Wr):"unknown function"])}function Hi(qt,an){di("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function Nr(qt,an){di("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function Fi(){di("")}var Gr;Gr=function(){return performance.now()};var vi=!0;function Di(qt){return xs[gr()>>2]=qt,qt}function qo(qt,an){var bn;if(qt===0)bn=Date.now();else if((qt===1||qt===4)&&vi)bn=Gr();else return Di(28),-1;return xs[an>>2]=bn/1e3|0,xs[an+4>>2]=bn%1e3*1e3*1e3|0,0}function xi(){return 2147483648}function Mr(qt,an,bn){Gn.copyWithin(qt,an,an+bn)}function Xo(qt){try{return Er.grow(qt-Za.byteLength+65535>>>16),La(Er.buffer),1}catch{}}function zo(qt){var an=Gn.length;qt=qt>>>0;var bn=2147483648;if(qt>bn)return!1;for(var Wr=1;Wr<=4;Wr*=2){var si=an*(1+.2/Wr);si=Math.min(si,qt+100663296);var ni=Math.min(bn,Ur(Math.max(qt,si),65536)),nr=Xo(ni);if(nr)return!0}return!1}function Gi(qt){for(var an=Gr();Gr()-an<qt;);}var Ms={};function cs(){return $e||"./this.program"}function Jo(){if(!Jo.strings){var qt=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",an={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:qt,_:cs()};for(var bn in Ms)Ms[bn]===void 0?delete an[bn]:an[bn]=Ms[bn];var Wr=[];for(var bn in an)Wr.push(bn+"="+an[bn]);Jo.strings=Wr}return Jo.strings}var us={mappings:{},buffers:[null,[],[]],printChar:function(qt,an){var bn=us.buffers[qt];an===0||an===10?((qt===1?ur:vn)(Rs(bn,0)),bn.length=0):bn.push(an)},varargs:void 0,get:function(){us.varargs+=4;var qt=xs[us.varargs-4>>2];return qt},getStr:function(qt){var an=ps(qt);return an},get64:function(qt,an){return qt}};function Ei(qt,an){var bn=0;return Jo().forEach(function(Wr,si){var ni=an+bn;xs[qt+si*4>>2]=ni,Ni(Wr,ni),bn+=Wr.length+1}),0}function Bi(qt,an){var bn=Jo();xs[qt>>2]=bn.length;var Wr=0;return bn.forEach(function(si){Wr+=si.length+1}),xs[an>>2]=Wr,0}function Ti(qt){Yr(qt)}function _r(qt){return 0}function _o(qt,an,bn,Wr,si){}function Hr(qt,an,bn,Wr){for(var si=0,ni=0;ni<bn;ni++){for(var nr=xs[an+ni*8>>2],hi=xs[an+(ni*8+4)>>2],Yi=0;Yi<hi;Yi++)us.printChar(qt,Gn[nr+Yi]);si+=hi}return xs[Wr>>2]=si,0}function Pr(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var qt=new Uint8Array(1);return function(){return crypto.getRandomValues(qt),qt[0]}}else return function(){di("randomDevice")}}function ys(qt,an){ys.randomDevice||(ys.randomDevice=Pr());for(var bn=0;bn<an;bn++)ai[qt+bn>>0]=ys.randomDevice();return 0}var fi={a:Ci,e:Hi,d:Nr,b:Fi,n:qo,h:xi,l:Mr,m:zo,p:Gi,f:Ei,g:Bi,j:Ti,i:_r,k:_o,c:Hr,o:ys};eo(),N.___wasm_call_ctors=function(){return(N.___wasm_call_ctors=N.asm.r).apply(null,arguments)},N._getModelBufferMemoryOffset=function(){return(N._getModelBufferMemoryOffset=N.asm.s).apply(null,arguments)},N._getInputMemoryOffset=function(){return(N._getInputMemoryOffset=N.asm.t).apply(null,arguments)},N._getInputHeight=function(){return(N._getInputHeight=N.asm.u).apply(null,arguments)},N._getInputWidth=function(){return(N._getInputWidth=N.asm.v).apply(null,arguments)},N._getInputChannelCount=function(){return(N._getInputChannelCount=N.asm.w).apply(null,arguments)},N._getOutputMemoryOffset=function(){return(N._getOutputMemoryOffset=N.asm.x).apply(null,arguments)},N._getOutputHeight=function(){return(N._getOutputHeight=N.asm.y).apply(null,arguments)},N._getOutputWidth=function(){return(N._getOutputWidth=N.asm.z).apply(null,arguments)},N._getOutputChannelCount=function(){return(N._getOutputChannelCount=N.asm.A).apply(null,arguments)},N._loadModel=function(){return(N._loadModel=N.asm.B).apply(null,arguments)},N._runInference=function(){return(N._runInference=N.asm.C).apply(null,arguments)},N._isGPUEnabled=function(){return(N._isGPUEnabled=N.asm.D).apply(null,arguments)};var gr=N.___errno_location=function(){return(gr=N.___errno_location=N.asm.F).apply(null,arguments)},_n;function $r(qt){this.name="ExitStatus",this.message="Program terminated with exit("+qt+")",this.status=qt}Wo=function qt(){_n||Ui(),_n||(Wo=qt)};function Ui(qt){if(Yo>0||(Hs(),Yo>0))return;function an(){_n||(_n=!0,N.calledRun=!0,!zr&&(pa(),ie(N),N.onRuntimeInitialized&&N.onRuntimeInitialized(),gs()))}N.setStatus?(N.setStatus("Running..."),setTimeout(function(){setTimeout(function(){N.setStatus("")},1),an()},1)):an()}N.run=Ui;function Yr(qt,an){Qr(qt)}function Qr(qt){oa()||(N.onExit&&N.onExit(qt),zr=!0),lt(qt,new $r(qt))}if(N.preInit)for(typeof N.preInit=="function"&&(N.preInit=[N.preInit]);N.preInit.length>0;)N.preInit.pop()();return Ui(),x.ready}}();class Nn{constructor(){u(this,"selectedTFLite"),u(this,"isSIMDSupported",!1),u(this,"isThreadsSupported",!1),u(this,"inputWidth",0),u(this,"inputHeight",0),u(this,"inputChannelCount",0),u(this,"inputMemoryOffset",0),u(this,"outputWidth",0),u(this,"outputHeight",0),u(this,"outputChannelCount",0),u(this,"outputMemoryOffset",0)}}const Fn="https://d3opqjmqzxf057.cloudfront.net/vonage-tensorflow-wasm/tflite-simd-wasm/1.1.3/",Hn="https://d3opqjmqzxf057.cloudfront.net/ml/selfie_segmentation/4.0.0/";async function Un(I=Fn,x=Hn){let N=new Nn;var ie=new n(function(pe,Xe){async function rt(){return Ft({locateFile:function(lt){return I+lt}})}async function $e(lt){return new n(async(zt,ln)=>{const hn=lt;if(typeof hn>"u")return ln("TFLite backend unavailable: wasmSimd");const ir="selfie_segmentation_landscape";console.log("Loading tflite model:",ir);let ur=x+`${ir}.tflite`;console.log("TFLite modelUrl: "+ur);try{const vn=await(await fetch(ur)).arrayBuffer();console.log("Model buffer size:",vn.byteLength);const Tn=hn._getModelBufferMemoryOffset();console.log("Model buffer memory offset:",Tn),console.log("Loading model buffer..."),hn.HEAPU8.set(new Uint8Array(vn),Tn);const Ir=hn._loadModel(vn.byteLength);if(console.log("Load model result:",Ir),Ir!==0){ln("Cannot load model");return}N.inputWidth=hn._getInputWidth(),N.inputHeight=hn._getInputHeight(),N.inputChannelCount=hn._getInputChannelCount(),N.inputMemoryOffset=hn._getInputMemoryOffset(),console.log("Input memory offset:",N.inputMemoryOffset),console.log("Input height:",N.inputHeight),console.log("Input width:",N.inputWidth),console.log("Input channels:",N.inputChannelCount),N.outputMemoryOffset=hn._getOutputMemoryOffset(),N.outputWidth=hn._getOutputWidth(),N.outputHeight=hn._getOutputHeight(),N.outputChannelCount=hn._getOutputChannelCount(),console.log("Output memory offset:",N.outputMemoryOffset),console.log("Output height:",N.outputHeight),console.log("Output width:",N.outputWidth),console.log("Output channels:",N.outputChannelCount),N.selectedTFLite=hn}catch(vn){ln(vn);return}zt()})}rt().then(lt=>{if(lt===null)throw console.error("loadTFLite null"),"loadTFLite null";$e(lt).then(zt=>{pe(N)}).catch(zt=>{console.error("loadTFLiteModel error"),Xe("loadTFLiteModel error")})}).catch(lt=>{console.error("loadTFLite error:",lt),Xe("loadTFLite error:"+lt)})});return ie}class Qo{constructor(){u(this,"canvas",new OffscreenCanvas(0,0)),u(this,"context",this.canvas.getContext("2d",{willReadFrequently:!0})),u(this,"pixelCount",0),u(this,"inputOffset",0),u(this,"outputOffset",0),u(this,"infos"),u(this,"mask")}async init(x,N){await this.initWasm(x,N),this.infos&&(this.canvas.width=this.infos.inputWidth,this.canvas.height=this.infos.inputHeight,this.pixelCount=this.infos.inputWidth*this.infos.inputHeight,this.mask=new ImageData(this.infos.inputWidth,this.infos.inputHeight),this.inputOffset=this.infos.inputMemoryOffset/4,this.outputOffset=this.infos.outputMemoryOffset/4)}async initWasm(x,N){this.infos=await Un(x,N)}getOutputDimensions(){var x,N,ie,pe;return{width:(N=(x=this.infos)==null?void 0:x.outputWidth)!=null?N:0,height:(pe=(ie=this.infos)==null?void 0:ie.outputHeight)!=null?pe:0}}async process(x){if(!this.mask||!this.infos)return;const N=this.infos.inputWidth,ie=this.infos.inputHeight;this.context.drawImage(x,0,0,x.width,x.height,0,0,N,ie);const pe=this.context.getImageData(0,0,N,ie),Xe=this.infos.selectedTFLite.HEAPF32;for(let rt=0;rt<this.pixelCount;rt++){const $e=this.inputOffset+rt*3;Xe[$e]=pe.data[rt*4]/255,Xe[$e+1]=pe.data[rt*4+1]/255,Xe[$e+2]=pe.data[rt*4+2]/255}this.infos.selectedTFLite._runInference();for(let rt=0;rt<this.pixelCount;rt++){const $e=this.infos.selectedTFLite.HEAPF32[this.outputOffset+rt];this.mask.data[rt*4]=this.mask.data[rt*4+3]=255*$e}return createImageBitmap(this.mask)}isGpuSupported(){var x,N,ie;return(ie=(N=(x=this.infos)==null?void 0:x.selectedTFLite)==null?void 0:N._isGPUEnabled())!=null?ie:!1}}async function cr(I,x){const{wasm:N,insertableStreams:ie,simd:pe,webgl:Xe}=await _i(I,x);if(!N.supported)throw N.message;if(!ie.supported)throw ie.message;if(!pe.supported)throw pe.message;if(!Xe.supported)throw Xe.message}async function _i(I,x){const N=new Qo;await N.initWasm(I,x);const ie={wasm:{supported:typeof WebAssembly=="object"&&typeof WebAssembly.instantiate=="function",message:"Your browser does not support WebAssembly features."},simd:{supported:await Lt(),message:"Your browser does not support simd features."},insertableStreams:{supported:!0},gpu:{supported:N.isGpuSupported(),message:"Your browser does not support gpu features."},webgl:Va()};try{await l()}catch(pe){ie.insertableStreams.supported=!1,ie.insertableStreams.message=pe}return ie}function Va(){return OffscreenCanvas?new OffscreenCanvas(0,0).getContext("webgl2")?{supported:!0}:{supported:!1,message:"Your browser does not support webgl 2"}:{supported:!1,message:"Your browser does not support offscreen canvas"}}const wi={};(function(){var I;function x(oe){var Ie=0;return function(){return Ie<oe.length?{done:!1,value:oe[Ie++]}:{done:!0}}}var N=typeof Object.defineProperties=="function"?Object.defineProperty:function(oe,Ie,we){return oe==Array.prototype||oe==Object.prototype||(oe[Ie]=we.value),oe};function ie(oe){oe=[typeof globalThis=="object"&&globalThis,oe,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var Ie=0;Ie<oe.length;++Ie){var we=oe[Ie];if(we&&we.Math==Math)return we}throw Error("Cannot find global object")}var pe=ie(this);function Xe(oe,Ie){if(Ie)e:{var we=pe;oe=oe.split(".");for(var St=0;St<oe.length-1;St++){var Bt=oe[St];if(!(Bt in we))break e;we=we[Bt]}oe=oe[oe.length-1],St=we[oe],Ie=Ie(St),Ie!=St&&Ie!=null&&N(we,oe,{configurable:!0,writable:!0,value:Ie})}}Xe("Symbol",function(oe){function Ie(dn){if(this instanceof Ie)throw new TypeError("Symbol is not a constructor");return new we(St+(dn||"")+"_"+Bt++,dn)}function we(dn,Xt){this.g=dn,N(this,"description",{configurable:!0,writable:!0,value:Xt})}if(oe)return oe;we.prototype.toString=function(){return this.g};var St="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Bt=0;return Ie}),Xe("Symbol.iterator",function(oe){if(oe)return oe;oe=Symbol("Symbol.iterator");for(var Ie="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),we=0;we<Ie.length;we++){var St=pe[Ie[we]];typeof St=="function"&&typeof St.prototype[oe]!="function"&&N(St.prototype,oe,{configurable:!0,writable:!0,value:function(){return rt(x(this))}})}return oe});function rt(oe){return oe={next:oe},oe[Symbol.iterator]=function(){return this},oe}function $e(oe){var Ie=typeof Symbol<"u"&&Symbol.iterator&&oe[Symbol.iterator];return Ie?Ie.call(oe):{next:x(oe)}}function lt(oe){if(!(oe instanceof Array)){oe=$e(oe);for(var Ie,we=[];!(Ie=oe.next()).done;)we.push(Ie.value);oe=we}return oe}var zt=typeof Object.create=="function"?Object.create:function(oe){function Ie(){}return Ie.prototype=oe,new Ie},ln;if(typeof Object.setPrototypeOf=="function")ln=Object.setPrototypeOf;else{var hn;e:{var ir={a:!0},ur={};try{ur.__proto__=ir,hn=ur.a;break e}catch{}hn=!1}ln=hn?function(oe,Ie){if(oe.__proto__=Ie,oe.__proto__!==Ie)throw new TypeError(oe+" is not extensible");return oe}:null}var vn=ln;function Tn(oe,Ie){if(oe.prototype=zt(Ie.prototype),oe.prototype.constructor=oe,vn)vn(oe,Ie);else for(var we in Ie)if(we!="prototype")if(Object.defineProperties){var St=Object.getOwnPropertyDescriptor(Ie,we);St&&Object.defineProperty(oe,we,St)}else oe[we]=Ie[we];oe.ea=Ie.prototype}function Ir(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Er(oe){if(oe.l)throw new TypeError("Generator is already running");oe.l=!0}Ir.prototype.o=function(oe){this.h=oe};function zr(oe,Ie){oe.j={U:Ie,V:!0},oe.g=oe.m||oe.s}Ir.prototype.return=function(oe){this.j={return:oe},this.g=this.s};function jt(oe,Ie,we){return oe.g=we,{value:Ie}}function Rs(oe){this.g=new Ir,this.h=oe}function ps(oe,Ie){Er(oe.g);var we=oe.g.i;return we?Ni(oe,"return"in we?we.return:function(St){return{value:St,done:!0}},Ie,oe.g.return):(oe.g.return(Ie),Ur(oe))}function Ni(oe,Ie,we,St){try{var Bt=Ie.call(oe.g.i,we);if(!(Bt instanceof Object))throw new TypeError("Iterator result "+Bt+" is not an object");if(!Bt.done)return oe.g.l=!1,Bt;var dn=Bt.value}catch(Xt){return oe.g.i=null,zr(oe.g,Xt),Ur(oe)}return oe.g.i=null,St.call(oe.g,dn),Ur(oe)}function Ur(oe){for(;oe.g.g;)try{var Ie=oe.h(oe.g);if(Ie)return oe.g.l=!1,{value:Ie.value,done:!1}}catch(we){oe.g.h=void 0,zr(oe.g,we)}if(oe.g.l=!1,oe.g.j){if(Ie=oe.g.j,oe.g.j=null,Ie.V)throw Ie.U;return{value:Ie.return,done:!0}}return{value:void 0,done:!0}}function Za(oe){this.next=function(Ie){return Er(oe.g),oe.g.i?Ie=Ni(oe,oe.g.i.next,Ie,oe.g.o):(oe.g.o(Ie),Ie=Ur(oe)),Ie},this.throw=function(Ie){return Er(oe.g),oe.g.i?Ie=Ni(oe,oe.g.i.throw,Ie,oe.g.o):(zr(oe.g,Ie),Ie=Ur(oe)),Ie},this.return=function(Ie){return ps(oe,Ie)},this[Symbol.iterator]=function(){return this}}function ai(oe,Ie){return Ie=new Za(new Rs(Ie)),vn&&oe.prototype&&vn(Ie,oe.prototype),Ie}function Gn(oe,Ie){oe instanceof String&&(oe+="");var we=0,St=!1,Bt={next:function(){if(!St&&we<oe.length){var dn=we++;return{value:Ie(dn,oe[dn]),done:!1}}return St=!0,{done:!0,value:void 0}}};return Bt[Symbol.iterator]=function(){return Bt},Bt}var xs=typeof Object.assign=="function"?Object.assign:function(oe,Ie){for(var we=1;we<arguments.length;we++){var St=arguments[we];if(St)for(var Bt in St)Object.prototype.hasOwnProperty.call(St,Bt)&&(oe[Bt]=St[Bt])}return oe};Xe("Object.assign",function(oe){return oe||xs}),Xe("Promise",function(oe){function Ie(Xt){this.h=0,this.i=void 0,this.g=[],this.o=!1;var sn=this.j();try{Xt(sn.resolve,sn.reject)}catch(An){sn.reject(An)}}function we(){this.g=null}function St(Xt){return Xt instanceof Ie?Xt:new Ie(function(sn){sn(Xt)})}if(oe)return oe;we.prototype.h=function(Xt){if(this.g==null){this.g=[];var sn=this;this.i(function(){sn.l()})}this.g.push(Xt)};var Bt=pe.setTimeout;we.prototype.i=function(Xt){Bt(Xt,0)},we.prototype.l=function(){for(;this.g&&this.g.length;){var Xt=this.g;this.g=[];for(var sn=0;sn<Xt.length;++sn){var An=Xt[sn];Xt[sn]=null;try{An()}catch(Qn){this.j(Qn)}}}this.g=null},we.prototype.j=function(Xt){this.i(function(){throw Xt})},Ie.prototype.j=function(){function Xt(Qn){return function(Or){An||(An=!0,Qn.call(sn,Or))}}var sn=this,An=!1;return{resolve:Xt(this.C),reject:Xt(this.l)}},Ie.prototype.C=function(Xt){if(Xt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Xt instanceof Ie)this.F(Xt);else{e:switch(typeof Xt){case"object":var sn=Xt!=null;break e;case"function":sn=!0;break e;default:sn=!1}sn?this.u(Xt):this.m(Xt)}},Ie.prototype.u=function(Xt){var sn=void 0;try{sn=Xt.then}catch(An){this.l(An);return}typeof sn=="function"?this.G(sn,Xt):this.m(Xt)},Ie.prototype.l=function(Xt){this.s(2,Xt)},Ie.prototype.m=function(Xt){this.s(1,Xt)},Ie.prototype.s=function(Xt,sn){if(this.h!=0)throw Error("Cannot settle("+Xt+", "+sn+"): Promise already settled in state"+this.h);this.h=Xt,this.i=sn,this.h===2&&this.D(),this.A()},Ie.prototype.D=function(){var Xt=this;Bt(function(){if(Xt.B()){var sn=pe.console;typeof sn<"u"&&sn.error(Xt.i)}},1)},Ie.prototype.B=function(){if(this.o)return!1;var Xt=pe.CustomEvent,sn=pe.Event,An=pe.dispatchEvent;return typeof An>"u"?!0:(typeof Xt=="function"?Xt=new Xt("unhandledrejection",{cancelable:!0}):typeof sn=="function"?Xt=new sn("unhandledrejection",{cancelable:!0}):(Xt=pe.document.createEvent("CustomEvent"),Xt.initCustomEvent("unhandledrejection",!1,!0,Xt)),Xt.promise=this,Xt.reason=this.i,An(Xt))},Ie.prototype.A=function(){if(this.g!=null){for(var Xt=0;Xt<this.g.length;++Xt)dn.h(this.g[Xt]);this.g=null}};var dn=new we;return Ie.prototype.F=function(Xt){var sn=this.j();Xt.J(sn.resolve,sn.reject)},Ie.prototype.G=function(Xt,sn){var An=this.j();try{Xt.call(sn,An.resolve,An.reject)}catch(Qn){An.reject(Qn)}},Ie.prototype.then=function(Xt,sn){function An(jr,Tr){return typeof jr=="function"?function(ar){try{Qn(jr(ar))}catch(wr){Or(wr)}}:Tr}var Qn,Or,Sr=new Ie(function(jr,Tr){Qn=jr,Or=Tr});return this.J(An(Xt,Qn),An(sn,Or)),Sr},Ie.prototype.catch=function(Xt){return this.then(void 0,Xt)},Ie.prototype.J=function(Xt,sn){function An(){switch(Qn.h){case 1:Xt(Qn.i);break;case 2:sn(Qn.i);break;default:throw Error("Unexpected state: "+Qn.h)}}var Qn=this;this.g==null?dn.h(An):this.g.push(An),this.o=!0},Ie.resolve=St,Ie.reject=function(Xt){return new Ie(function(sn,An){An(Xt)})},Ie.race=function(Xt){return new Ie(function(sn,An){for(var Qn=$e(Xt),Or=Qn.next();!Or.done;Or=Qn.next())St(Or.value).J(sn,An)})},Ie.all=function(Xt){var sn=$e(Xt),An=sn.next();return An.done?St([]):new Ie(function(Qn,Or){function Sr(ar){return function(wr){jr[ar]=wr,Tr--,Tr==0&&Qn(jr)}}var jr=[],Tr=0;do jr.push(void 0),Tr++,St(An.value).J(Sr(jr.length-1),Or),An=sn.next();while(!An.done)})},Ie}),Xe("Object.is",function(oe){return oe||function(Ie,we){return Ie===we?Ie!==0||1/Ie===1/we:Ie!==Ie&&we!==we}}),Xe("Array.prototype.includes",function(oe){return oe||function(Ie,we){var St=this;St instanceof String&&(St=String(St));var Bt=St.length;for(we=we||0,0>we&&(we=Math.max(we+Bt,0));we<Bt;we++){var dn=St[we];if(dn===Ie||Object.is(dn,Ie))return!0}return!1}}),Xe("String.prototype.includes",function(oe){return oe||function(Ie,we){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(Ie instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(Ie,we||0)!==-1}}),Xe("Array.prototype.keys",function(oe){return oe||function(){return Gn(this,function(Ie){return Ie})}});var La=this||self;function Zi(oe,Ie){oe=oe.split(".");var we=La;oe[0]in we||typeof we.execScript>"u"||we.execScript("var "+oe[0]);for(var St;oe.length&&(St=oe.shift());)oe.length||Ie===void 0?we[St]&&we[St]!==Object.prototype[St]?we=we[St]:we=we[St]={}:we[St]=Ie}function br(oe,Ie){return Ie=String.fromCharCode.apply(null,Ie),oe==null?Ie:oe+Ie}var Xi,ss=typeof TextDecoder<"u",Fs,oa=typeof TextEncoder<"u";function Hs(oe){if(oa)oe=(Fs||(Fs=new TextEncoder)).encode(oe);else{var Ie=void 0;Ie=Ie===void 0?!1:Ie;for(var we=0,St=new Uint8Array(3*oe.length),Bt=0;Bt<oe.length;Bt++){var dn=oe.charCodeAt(Bt);if(128>dn)St[we++]=dn;else{if(2048>dn)St[we++]=dn>>6|192;else{if(55296<=dn&&57343>=dn){if(56319>=dn&&Bt<oe.length){var Xt=oe.charCodeAt(++Bt);if(56320<=Xt&&57343>=Xt){dn=1024*(dn-55296)+Xt-56320+65536,St[we++]=dn>>18|240,St[we++]=dn>>12&63|128,St[we++]=dn>>6&63|128,St[we++]=dn&63|128;continue}else Bt--}if(Ie)throw Error("Found an unpaired surrogate");dn=65533}St[we++]=dn>>12|224,St[we++]=dn>>6&63|128}St[we++]=dn&63|128}}oe=St.subarray(0,we)}return oe}var pa={},gs=null;function Is(oe,Ie){Ie===void 0&&(Ie=0),Yo(),Ie=pa[Ie];for(var we=Array(Math.floor(oe.length/3)),St=Ie[64]||"",Bt=0,dn=0;Bt<oe.length-2;Bt+=3){var Xt=oe[Bt],sn=oe[Bt+1],An=oe[Bt+2],Qn=Ie[Xt>>2];Xt=Ie[(Xt&3)<<4|sn>>4],sn=Ie[(sn&15)<<2|An>>6],An=Ie[An&63],we[dn++]=Qn+Xt+sn+An}switch(Qn=0,An=St,oe.length-Bt){case 2:Qn=oe[Bt+1],An=Ie[(Qn&15)<<2]||St;case 1:oe=oe[Bt],we[dn]=Ie[oe>>2]+Ie[(oe&3)<<4|Qn>>4]+An+St}return we.join("")}function Ea(oe){var Ie=oe.length,we=3*Ie/4;we%3?we=Math.floor(we):"=.".indexOf(oe[Ie-1])!=-1&&(we="=.".indexOf(oe[Ie-2])!=-1?we-2:we-1);var St=new Uint8Array(we),Bt=0;return sa(oe,function(dn){St[Bt++]=dn}),St.subarray(0,Bt)}function sa(oe,Ie){function we(An){for(;St<oe.length;){var Qn=oe.charAt(St++),Or=gs[Qn];if(Or!=null)return Or;if(!/^[\s\xa0]*$/.test(Qn))throw Error("Unknown base64 encoding at char: "+Qn)}return An}Yo();for(var St=0;;){var Bt=we(-1),dn=we(0),Xt=we(64),sn=we(64);if(sn===64&&Bt===-1)break;Ie(Bt<<2|dn>>4),Xt!=64&&(Ie(dn<<4&240|Xt>>2),sn!=64&&Ie(Xt<<6&192|sn))}}function Yo(){if(!gs){gs={};for(var oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Ie=["+/=","+/","-_=","-_.","-_"],we=0;5>we;we++){var St=oe.concat(Ie[we].split(""));pa[we]=St;for(var Bt=0;Bt<St.length;Bt++){var dn=St[Bt];gs[dn]===void 0&&(gs[dn]=Bt)}}}}var Wo=typeof Uint8Array.prototype.slice=="function",Ys;function Gs(oe,Ie,we){return Ie===we?Ys||(Ys=new Uint8Array(0)):Wo?oe.slice(Ie,we):new Uint8Array(oe.subarray(Ie,we))}var di=0,Mi=0;function Ko(oe,Ie){Ie=Ie===void 0?{}:Ie,Ie=Ie.v===void 0?!1:Ie.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=Ie,oe&&Jr(this,oe)}function Jr(oe,Ie){Ie=Ie.constructor===Uint8Array?Ie:Ie.constructor===ArrayBuffer?new Uint8Array(Ie):Ie.constructor===Array?new Uint8Array(Ie):Ie.constructor===String?Ea(Ie):Ie instanceof Uint8Array?new Uint8Array(Ie.buffer,Ie.byteOffset,Ie.byteLength):new Uint8Array(0),oe.h=Ie,oe.j=0,oe.i=oe.h.length,oe.g=oe.j}Ko.prototype.reset=function(){this.g=this.j};function Oi(oe){var Ie=oe.h,we=Ie[oe.g],St=we&127;return 128>we?(oe.g+=1,St):(we=Ie[oe.g+1],St|=(we&127)<<7,128>we?(oe.g+=2,St):(we=Ie[oe.g+2],St|=(we&127)<<14,128>we?(oe.g+=3,St):(we=Ie[oe.g+3],St|=(we&127)<<21,128>we?(oe.g+=4,St):(we=Ie[oe.g+4],St|=(we&15)<<28,128>we?(oe.g+=5,St>>>0):(oe.g+=5,128<=Ie[oe.g++]&&128<=Ie[oe.g++]&&128<=Ie[oe.g++]&&128<=Ie[oe.g++]&&oe.g++,St)))))}function as(oe){var Ie=oe.h[oe.g],we=oe.h[oe.g+1],St=oe.h[oe.g+2],Bt=oe.h[oe.g+3];return oe.g+=4,we=(Ie<<0|we<<8|St<<16|Bt<<24)>>>0,oe=2*(we>>31)+1,Ie=we>>>23&255,we&=8388607,Ie==255?we?NaN:1/0*oe:Ie==0?oe*Math.pow(2,-149)*we:oe*Math.pow(2,Ie-150)*(we+Math.pow(2,23))}var eo=[];function Dr(){this.g=new Uint8Array(64),this.h=0}Dr.prototype.push=function(oe){if(!(this.h+1<this.g.length)){var Ie=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(Ie)}this.g[this.h++]=oe},Dr.prototype.length=function(){return this.h},Dr.prototype.end=function(){var oe=this.g,Ie=this.h;return this.h=0,Gs(oe,0,Ie)};function Ci(oe,Ie){for(;127<Ie;)oe.push(Ie&127|128),Ie>>>=7;oe.push(Ie)}function Hi(oe){var Ie={},we=Ie.N===void 0?!1:Ie.N;this.o={v:Ie.v===void 0?!1:Ie.v},this.N=we,Ie=this.o,eo.length?(we=eo.pop(),Ie&&(we.v=Ie.v),oe&&Jr(we,oe),oe=we):oe=new Ko(oe,Ie),this.g=oe,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Hi.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Nr(oe){var Ie=oe.g;if((Ie=Ie.g==Ie.i)||(Ie=oe.j)||(Ie=oe.g,Ie=Ie.l||0>Ie.g||Ie.g>Ie.i),Ie)return!1;oe.m=oe.g.g,Ie=Oi(oe.g);var we=Ie&7;return we!=0&&we!=5&&we!=1&&we!=2&&we!=3&&we!=4?(oe.j=!0,!1):(oe.i=Ie,oe.l=Ie>>>3,oe.h=we,!0)}function Fi(oe){switch(oe.h){case 0:if(oe.h!=0)Fi(oe);else{for(oe=oe.g;oe.h[oe.g]&128;)oe.g++;oe.g++}break;case 1:oe.h!=1?Fi(oe):(oe=oe.g,oe.g+=8);break;case 2:if(oe.h!=2)Fi(oe);else{var Ie=Oi(oe.g);oe=oe.g,oe.g+=Ie}break;case 5:oe.h!=5?Fi(oe):(oe=oe.g,oe.g+=4);break;case 3:Ie=oe.l;do{if(!Nr(oe)){oe.j=!0;break}if(oe.h==4){oe.l!=Ie&&(oe.j=!0);break}Fi(oe)}while(1);break;default:oe.j=!0}}function Gr(oe,Ie,we){var St=oe.g.i,Bt=Oi(oe.g);return Bt=oe.g.g+Bt,oe.g.i=Bt,we(Ie,oe),oe.g.g=Bt,oe.g.i=St,Ie}function vi(oe){var Ie=Oi(oe.g);oe=oe.g;var we=oe.g;oe.g+=Ie,oe=oe.h;var St;if(ss)(St=Xi)||(St=Xi=new TextDecoder("utf-8",{fatal:!1})),St=St.decode(oe.subarray(we,we+Ie));else{Ie=we+Ie;for(var Bt=[],dn=null,Xt,sn,An;we<Ie;)Xt=oe[we++],128>Xt?Bt.push(Xt):224>Xt?we>=Ie?Bt.push(65533):(sn=oe[we++],194>Xt||(sn&192)!==128?(we--,Bt.push(65533)):Bt.push((Xt&31)<<6|sn&63)):240>Xt?we>=Ie-1?Bt.push(65533):(sn=oe[we++],(sn&192)!==128||Xt===224&&160>sn||Xt===237&&160<=sn||((St=oe[we++])&192)!==128?(we--,Bt.push(65533)):Bt.push((Xt&15)<<12|(sn&63)<<6|St&63)):244>=Xt?we>=Ie-2?Bt.push(65533):(sn=oe[we++],(sn&192)!==128||(Xt<<28)+(sn-144)>>30||((St=oe[we++])&192)!==128||((An=oe[we++])&192)!==128?(we--,Bt.push(65533)):(Xt=(Xt&7)<<18|(sn&63)<<12|(St&63)<<6|An&63,Xt-=65536,Bt.push((Xt>>10&1023)+55296,(Xt&1023)+56320))):Bt.push(65533),8192<=Bt.length&&(dn=br(dn,Bt),Bt.length=0);St=br(dn,Bt)}return St}function Di(){this.h=[],this.i=0,this.g=new Dr}function qo(oe,Ie){Ie.length!==0&&(oe.h.push(Ie),oe.i+=Ie.length)}function xi(oe){var Ie=oe.i+oe.g.length();if(Ie===0)return new Uint8Array(0);Ie=new Uint8Array(Ie);for(var we=oe.h,St=we.length,Bt=0,dn=0;dn<St;dn++){var Xt=we[dn];Xt.length!==0&&(Ie.set(Xt,Bt),Bt+=Xt.length)}return we=oe.g,St=we.h,St!==0&&(Ie.set(we.g.subarray(0,St),Bt),we.h=0),oe.h=[Ie],Ie}function Mr(oe,Ie,we){if(we!=null){Ci(oe.g,8*Ie+5),oe=oe.g;var St=we;St=(we=0>St?1:0)?-St:St,St===0?0<1/St?di=Mi=0:(Mi=0,di=2147483648):isNaN(St)?(Mi=0,di=2147483647):34028234663852886e22<St?(Mi=0,di=(we<<31|2139095040)>>>0):11754943508222875e-54>St?(St=Math.round(St/Math.pow(2,-149)),Mi=0,di=(we<<31|St)>>>0):(Ie=Math.floor(Math.log(St)/Math.LN2),St*=Math.pow(2,-Ie),St=Math.round(8388608*St)&8388607,Mi=0,di=(we<<31|Ie+127<<23|St)>>>0),we=di,oe.push(we>>>0&255),oe.push(we>>>8&255),oe.push(we>>>16&255),oe.push(we>>>24&255)}}var Xo=typeof Uint8Array=="function";function zo(oe,Ie,we){if(oe!=null)return typeof oe=="object"?Xo&&oe instanceof Uint8Array?we(oe):Gi(oe,Ie,we):Ie(oe)}function Gi(oe,Ie,we){if(Array.isArray(oe)){for(var St=Array(oe.length),Bt=0;Bt<oe.length;Bt++)St[Bt]=zo(oe[Bt],Ie,we);return Array.isArray(oe)&&oe.W&&Jo(St),St}St={};for(Bt in oe)St[Bt]=zo(oe[Bt],Ie,we);return St}function Ms(oe){return typeof oe=="number"?isFinite(oe)?oe:String(oe):oe}var cs={W:{value:!0,configurable:!0}};function Jo(oe){return Array.isArray(oe)&&!Object.isFrozen(oe)&&Object.defineProperties(oe,cs),oe}var us;function Ei(oe,Ie,we){var St=us;us=null,oe||(oe=St),St=this.constructor.ca,oe||(oe=St?[St]:[]),this.j=St?0:-1,this.i=null,this.g=oe;e:{if(St=this.g.length,oe=St-1,St&&(St=this.g[oe],St!==null&&typeof St=="object"&&St.constructor===Object)){this.l=oe-this.j,this.h=St;break e}Ie!==void 0&&-1<Ie?(this.l=Math.max(Ie,oe+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(we)for(Ie=0;Ie<we.length;Ie++)oe=we[Ie],oe<this.l?(oe+=this.j,(St=this.g[oe])?Jo(St):this.g[oe]=Bi):(Ti(this),(St=this.h[oe])?Jo(St):this.h[oe]=Bi)}var Bi=Object.freeze(Jo([]));function Ti(oe){var Ie=oe.l+oe.j;oe.g[Ie]||(oe.h=oe.g[Ie]={})}function _r(oe,Ie,we){return Ie===-1?null:we!==void 0&&we||Ie>=oe.l?oe.h?oe.h[Ie]:void 0:oe.g[Ie+oe.j]}function _o(oe){var Ie=Ie===void 0?!1:Ie,we=_r(oe,1,Ie);return we==null&&(we=Bi),we===Bi&&(we=Jo([]),Pr(oe,1,we,Ie)),we}function Hr(oe,Ie,we){return oe=_r(oe,Ie),oe=oe==null?oe:+oe,oe??(we===void 0?0:we)}function Pr(oe,Ie,we,St){St!==void 0&&St||Ie>=oe.l?(Ti(oe),oe.h[Ie]=we):oe.g[Ie+oe.j]=we}function ys(oe,Ie){oe.i||(oe.i={});var we=oe.i[1];if(!we){var St=_o(oe);we=[];for(var Bt=0;Bt<St.length;Bt++)we[Bt]=new Ie(St[Bt]);oe.i[1]=we}return we}function fi(oe,Ie,we,St){var Bt=ys(oe,we);Ie=Ie||new we,oe=_o(oe),St!=null?(Bt.splice(St,0,Ie),oe.splice(St,0,gr(Ie))):(Bt.push(Ie),oe.push(gr(Ie)))}Ei.prototype.toJSON=function(){var oe=gr(this);return Gi(oe,Ms,Is)};function gr(oe,Ie){if(oe.i)for(var we in oe.i){var St=oe.i[we];if(Array.isArray(St))for(var Bt=0;Bt<St.length;Bt++)St[Bt]&&gr(St[Bt]);else St&&gr(St)}return oe.g}Ei.prototype.toString=function(){return gr(this).toString()};function _n(oe,Ie){return oe=_r(oe,Ie),oe??0}function $r(oe,Ie){return oe=_r(oe,Ie),oe??""}function Ui(oe,Ie){if(oe=oe.m){qo(Ie,Ie.g.end());for(var we=0;we<oe.length;we++)qo(Ie,oe[we])}}function Yr(oe,Ie){if(Ie.h==4)return!1;var we=Ie.m;return Fi(Ie),Ie.N||(Ie=Gs(Ie.g.h,we,Ie.g.g),(we=oe.m)?we.push(Ie):oe.m=[Ie]),!0}function Qr(oe,Ie){var we=void 0;return new(we||(we=n))(function(St,Bt){function dn(An){try{sn(Ie.next(An))}catch(Qn){Bt(Qn)}}function Xt(An){try{sn(Ie.throw(An))}catch(Qn){Bt(Qn)}}function sn(An){An.done?St(An.value):new we(function(Qn){Qn(An.value)}).then(dn,Xt)}sn((Ie=Ie.apply(oe,void 0)).next())})}function qt(oe){Ei.call(this,oe)}Tn(qt,Ei);function an(oe,Ie){for(;Nr(Ie);)switch(Ie.i){case 8:var we=Oi(Ie.g);Pr(oe,1,we);break;case 21:we=as(Ie.g),Pr(oe,2,we);break;case 26:we=vi(Ie),Pr(oe,3,we);break;case 34:we=vi(Ie),Pr(oe,4,we);break;default:if(!Yr(oe,Ie))return oe}return oe}function bn(oe){Ei.call(this,oe,-1,Wr)}Tn(bn,Ei),bn.prototype.addClassification=function(oe,Ie){fi(this,oe,qt,Ie)};var Wr=[1];function si(oe){Ei.call(this,oe)}Tn(si,Ei);function ni(oe,Ie){for(;Nr(Ie);)switch(Ie.i){case 13:var we=as(Ie.g);Pr(oe,1,we);break;case 21:we=as(Ie.g),Pr(oe,2,we);break;case 29:we=as(Ie.g),Pr(oe,3,we);break;case 37:we=as(Ie.g),Pr(oe,4,we);break;case 45:we=as(Ie.g),Pr(oe,5,we);break;default:if(!Yr(oe,Ie))return oe}return oe}function nr(oe){Ei.call(this,oe,-1,hi)}Tn(nr,Ei);var hi=[1];function Yi(oe){Ei.call(this,oe)}Tn(Yi,Ei);function es(oe,Ie,we){if(we=oe.createShader(we===0?oe.VERTEX_SHADER:oe.FRAGMENT_SHADER),oe.shaderSource(we,Ie),oe.compileShader(we),!oe.getShaderParameter(we,oe.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+oe.getShaderInfoLog(we));return we}function ts(oe){return ys(oe,qt).map(function(Ie){return{index:_n(Ie,1),Y:Hr(Ie,2),label:_r(Ie,3)!=null?$r(Ie,3):void 0,displayName:_r(Ie,4)!=null?$r(Ie,4):void 0}})}function vs(oe){return{x:Hr(oe,1),y:Hr(oe,2),z:Hr(oe,3),visibility:_r(oe,4)!=null?Hr(oe,4):void 0}}function ws(oe,Ie){this.h=oe,this.g=Ie,this.l=0}function ji(oe,Ie,we){return ns(oe,Ie),typeof oe.g.canvas.transferToImageBitmap=="function"?n.resolve(oe.g.canvas.transferToImageBitmap()):we?n.resolve(oe.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(oe.g.canvas):(oe.i===void 0&&(oe.i=document.createElement("canvas")),new n(function(St){oe.i.height=oe.g.canvas.height,oe.i.width=oe.g.canvas.width,oe.i.getContext("2d",{}).drawImage(oe.g.canvas,0,0,oe.g.canvas.width,oe.g.canvas.height),St(oe.i)}))}function ns(oe,Ie){var we=oe.g;if(oe.m===void 0){var St=es(we,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Bt=es(we,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),dn=we.createProgram();if(we.attachShader(dn,St),we.attachShader(dn,Bt),we.linkProgram(dn),!we.getProgramParameter(dn,we.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+we.getProgramInfoLog(dn));St=oe.m=dn,we.useProgram(St),Bt=we.getUniformLocation(St,"sampler0"),oe.j={I:we.getAttribLocation(St,"aVertex"),H:we.getAttribLocation(St,"aTex"),da:Bt},oe.s=we.createBuffer(),we.bindBuffer(we.ARRAY_BUFFER,oe.s),we.enableVertexAttribArray(oe.j.I),we.vertexAttribPointer(oe.j.I,2,we.FLOAT,!1,0,0),we.bufferData(we.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),we.STATIC_DRAW),we.bindBuffer(we.ARRAY_BUFFER,null),oe.o=we.createBuffer(),we.bindBuffer(we.ARRAY_BUFFER,oe.o),we.enableVertexAttribArray(oe.j.H),we.vertexAttribPointer(oe.j.H,2,we.FLOAT,!1,0,0),we.bufferData(we.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),we.STATIC_DRAW),we.bindBuffer(we.ARRAY_BUFFER,null),we.uniform1i(Bt,0)}St=oe.j,we.useProgram(oe.m),we.canvas.width=Ie.width,we.canvas.height=Ie.height,we.viewport(0,0,Ie.width,Ie.height),we.activeTexture(we.TEXTURE0),oe.h.bindTexture2d(Ie.glName),we.enableVertexAttribArray(St.I),we.bindBuffer(we.ARRAY_BUFFER,oe.s),we.vertexAttribPointer(St.I,2,we.FLOAT,!1,0,0),we.enableVertexAttribArray(St.H),we.bindBuffer(we.ARRAY_BUFFER,oe.o),we.vertexAttribPointer(St.H,2,we.FLOAT,!1,0,0),we.bindFramebuffer(we.DRAW_FRAMEBUFFER?we.DRAW_FRAMEBUFFER:we.FRAMEBUFFER,null),we.clearColor(0,0,0,0),we.clear(we.COLOR_BUFFER_BIT),we.colorMask(!0,!0,!0,!0),we.drawArrays(we.TRIANGLE_FAN,0,4),we.disableVertexAttribArray(St.I),we.disableVertexAttribArray(St.H),we.bindBuffer(we.ARRAY_BUFFER,null),oe.h.bindTexture2d(0)}function Fa(oe){this.g=oe}var rs=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ki(oe,Ie){return Ie+oe}function Ns(oe,Ie){window[oe]=Ie}function Ks(oe){var Ie=document.createElement("script");return Ie.setAttribute("src",oe),Ie.setAttribute("crossorigin","anonymous"),new n(function(we){Ie.addEventListener("load",function(){we()},!1),Ie.addEventListener("error",function(){we()},!1),document.body.appendChild(Ie)})}function Ro(){return Qr(this,function oe(){return ai(oe,function(Ie){switch(Ie.g){case 1:return Ie.m=2,jt(Ie,WebAssembly.instantiate(rs),4);case 4:Ie.g=3,Ie.m=0;break;case 2:return Ie.m=0,Ie.j=null,Ie.return(!1);case 3:return Ie.return(!0)}})})}function Ta(oe){if(this.g=oe,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=oe&&oe.locateFile||Ki,typeof window=="object")var Ie=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")Ie=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=Ie,oe.options){Ie=$e(Object.keys(oe.options));for(var we=Ie.next();!we.done;we=Ie.next()){we=we.value;var St=oe.options[we].default;St!==void 0&&(this.j[we]=typeof St=="function"?St():St)}}}I=Ta.prototype,I.close=function(){return this.i&&this.i.delete(),n.resolve()};function is(oe,Ie){return oe.g.files===void 0?[]:typeof oe.g.files=="function"?oe.g.files(Ie):oe.g.files}function Zs(oe){return Qr(oe,function Ie(){var we=this,St,Bt,dn,Xt,sn,An,Qn,Or,Sr,jr,Tr;return ai(Ie,function(ar){switch(ar.g){case 1:return St=we,we.R?(Bt=is(we,we.j),jt(ar,Ro(),2)):ar.return();case 2:if(dn=ar.h,typeof window=="object")return Ns("createMediapipeSolutionsWasm",{locateFile:we.locateFile}),Ns("createMediapipeSolutionsPackedAssets",{locateFile:we.locateFile}),An=Bt.filter(function(wr){return wr.data!==void 0}),Qn=Bt.filter(function(wr){return wr.data===void 0}),Or=n.all(An.map(function(wr){var Br=ls(St,wr.url);if(wr.path!==void 0){var ri=wr.path;Br=Br.then(function(pi){return St.overrideFile(ri,pi),n.resolve(pi)})}return Br})),Sr=n.all(Qn.map(function(wr){return wr.simd===void 0||wr.simd&&dn||!wr.simd&&!dn?Ks(St.locateFile(wr.url,St.S)):n.resolve()})).then(function(){return Qr(St,function wr(){var Br,ri,pi=this;return ai(wr,function(bi){if(bi.g==1)return Br=window.createMediapipeSolutionsWasm,ri=window.createMediapipeSolutionsPackedAssets,jt(bi,Br(ri),2);pi.h=bi.h,bi.g=0})})}),jr=function(){return Qr(St,function wr(){var Br=this;return ai(wr,function(ri){return Br.g.graph&&Br.g.graph.url?ri=jt(ri,ls(Br,Br.g.graph.url),0):(ri.g=0,ri=void 0),ri})})}(),jt(ar,n.all([Sr,Or,jr]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return Xt=Bt.filter(function(wr){return wr.simd===void 0||wr.simd&&dn||!wr.simd&&!dn}).map(function(wr){return St.locateFile(wr.url,St.S)}),importScripts.apply(null,lt(Xt)),jt(ar,createMediapipeSolutionsWasm(Module),6);case 6:we.h=ar.h,we.l=new OffscreenCanvas(1,1),we.h.canvas=we.l,sn=we.h.GL.createContext(we.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),we.h.GL.makeContextCurrent(sn),ar.g=4;break;case 7:if(we.l=document.createElement("canvas"),Tr=we.l.getContext("webgl2",{}),!Tr&&(Tr=we.l.getContext("webgl",{}),!Tr))return alert("Failed to create WebGL canvas context when passing video frame."),ar.return();we.D=Tr,we.h.canvas=we.l,we.h.createContext(we.l,!0,!0,{});case 4:we.i=new we.h.SolutionWasm,we.R=!1,ar.g=0}})})}function $s(oe){return Qr(oe,function Ie(){var we=this,St,Bt,dn,Xt,sn,An,Qn,Or;return ai(Ie,function(Sr){if(Sr.g==1){if(we.g.graph&&we.g.graph.url&&we.P===we.g.graph.url)return Sr.return();if(we.o=!0,!we.g.graph||!we.g.graph.url){Sr.g=2;return}return we.P=we.g.graph.url,jt(Sr,ls(we,we.g.graph.url),3)}for(Sr.g!=2&&(St=Sr.h,we.i.loadGraph(St)),Bt=$e(Object.keys(we.B)),dn=Bt.next();!dn.done;dn=Bt.next())Xt=dn.value,we.i.overrideFile(Xt,we.B[Xt]);if(we.B={},we.g.listeners)for(sn=$e(we.g.listeners),An=sn.next();!An.done;An=sn.next())Qn=An.value,Ka(we,Qn);Or=we.j,we.j={},we.setOptions(Or),Sr.g=0})})}I.reset=function(){return Qr(this,function oe(){var Ie=this;return ai(oe,function(we){Ie.i&&(Ie.i.reset(),Ie.m={},Ie.s={}),we.g=0})})},I.setOptions=function(oe,Ie){var we=this;if(Ie=Ie||this.g.options){for(var St=[],Bt=[],dn={},Xt=$e(Object.keys(oe)),sn=Xt.next();!sn.done;dn={K:dn.K,L:dn.L},sn=Xt.next()){var An=sn.value;An in this.j&&this.j[An]===oe[An]||(this.j[An]=oe[An],sn=Ie[An],sn!==void 0&&(sn.onChange&&(dn.K=sn.onChange,dn.L=oe[An],St.push(function(Qn){return function(){return Qr(we,function Or(){var Sr,jr=this;return ai(Or,function(Tr){if(Tr.g==1)return jt(Tr,Qn.K(Qn.L),2);Sr=Tr.h,Sr===!0&&(jr.o=!0),Tr.g=0})})}}(dn))),sn.graphOptionXref&&(An={valueNumber:sn.type===1?oe[An]:0,valueBoolean:sn.type===0?oe[An]:!1,valueString:sn.type===2?oe[An]:""},sn=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),sn.graphOptionXref),An),Bt.push(sn))))}(St.length!==0||Bt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Bt),this.u=(this.u===void 0?[]:this.u).concat(St))}};function Aa(oe){return Qr(oe,function Ie(){var we=this,St,Bt,dn,Xt,sn,An,Qn;return ai(Ie,function(Or){switch(Or.g){case 1:if(!we.o)return Or.return();if(!we.u){Or.g=2;break}St=$e(we.u),Bt=St.next();case 3:if(Bt.done){Or.g=5;break}return dn=Bt.value,jt(Or,dn(),4);case 4:Bt=St.next(),Or.g=3;break;case 5:we.u=void 0;case 2:if(we.A){for(Xt=new we.h.GraphOptionChangeRequestList,sn=$e(we.A),An=sn.next();!An.done;An=sn.next())Qn=An.value,Xt.push_back(Qn);we.i.changeOptions(Xt),Xt.delete(),we.A=void 0}we.o=!1,Or.g=0}})})}I.initialize=function(){return Qr(this,function oe(){var Ie=this;return ai(oe,function(we){return we.g==1?jt(we,Zs(Ie),2):we.g!=3?jt(we,$s(Ie),3):jt(we,Aa(Ie),0)})})};function ls(oe,Ie){return Qr(oe,function we(){var St=this,Bt,dn;return ai(we,function(Xt){return Ie in St.F?Xt.return(St.F[Ie]):(Bt=St.locateFile(Ie,""),dn=fetch(Bt).then(function(sn){return sn.arrayBuffer()}),St.F[Ie]=dn,Xt.return(dn))})})}I.overrideFile=function(oe,Ie){this.i?this.i.overrideFile(oe,Ie):this.B[oe]=Ie},I.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},I.send=function(oe,Ie){return Qr(this,function we(){var St=this,Bt,dn,Xt,sn,An,Qn,Or,Sr,jr;return ai(we,function(Tr){switch(Tr.g){case 1:return St.g.inputs?(Bt=1e3*(Ie??performance.now()),jt(Tr,St.C,2)):Tr.return();case 2:return jt(Tr,St.initialize(),3);case 3:for(dn=new St.h.PacketDataList,Xt=$e(Object.keys(oe)),sn=Xt.next();!sn.done;sn=Xt.next())if(An=sn.value,Qn=St.g.inputs[An]){e:{var ar=St,wr=oe[An];switch(Qn.type){case"video":var Br=ar.m[Qn.stream];if(Br||(Br=new ws(ar.h,ar.D),ar.m[Qn.stream]=Br),ar=Br,ar.l===0&&(ar.l=ar.h.createTexture()),typeof HTMLVideoElement<"u"&&wr instanceof HTMLVideoElement){var ri=wr.videoWidth;Br=wr.videoHeight}else typeof HTMLImageElement<"u"&&wr instanceof HTMLImageElement?(ri=wr.naturalWidth,Br=wr.naturalHeight):(ri=wr.width,Br=wr.height);Br={glName:ar.l,width:ri,height:Br},ri=ar.g,ri.canvas.width=Br.width,ri.canvas.height=Br.height,ri.activeTexture(ri.TEXTURE0),ar.h.bindTexture2d(ar.l),ri.texImage2D(ri.TEXTURE_2D,0,ri.RGBA,ri.RGBA,ri.UNSIGNED_BYTE,wr),ar.h.bindTexture2d(0),ar=Br;break e;case"detections":for(Br=ar.m[Qn.stream],Br||(Br=new Fa(ar.h),ar.m[Qn.stream]=Br),ar=Br,ar.data||(ar.data=new ar.g.DetectionListData),ar.data.reset(wr.length),Br=0;Br<wr.length;++Br){ri=wr[Br];var pi=ar.data,bi=pi.setBoundingBox,zi=Br,te=ri.T,le=new Yi;Pr(le,1,te.Z),Pr(le,2,te.$),Pr(le,3,te.height),Pr(le,4,te.width),Pr(le,5,te.rotation),Pr(le,6,te.X);var ve=te=new Di;Mr(ve,1,_r(le,1)),Mr(ve,2,_r(le,2)),Mr(ve,3,_r(le,3)),Mr(ve,4,_r(le,4)),Mr(ve,5,_r(le,5));var st=_r(le,6);if(st!=null&&st!=null){Ci(ve.g,48);var Vt=ve.g,Ht=st;st=0>Ht,Ht=Math.abs(Ht);var kt=Ht>>>0;for(Ht=Math.floor((Ht-kt)/4294967296),Ht>>>=0,st&&(Ht=~Ht>>>0,kt=(~kt>>>0)+1,4294967295<kt&&(kt=0,Ht++,4294967295<Ht&&(Ht=0))),di=kt,Mi=Ht,st=di,kt=Mi;0<kt||127<st;)Vt.push(st&127|128),st=(st>>>7|kt<<25)>>>0,kt>>>=7;Vt.push(st)}if(Ui(le,ve),te=xi(te),bi.call(pi,zi,te),ri.O)for(pi=0;pi<ri.O.length;++pi)le=ri.O[pi],ve=!!le.visibility,bi=ar.data,zi=bi.addNormalizedLandmark,te=Br,le=Object.assign(Object.assign({},le),{visibility:ve?le.visibility:0}),ve=new si,Pr(ve,1,le.x),Pr(ve,2,le.y),Pr(ve,3,le.z),le.visibility&&Pr(ve,4,le.visibility),Vt=le=new Di,Mr(Vt,1,_r(ve,1)),Mr(Vt,2,_r(ve,2)),Mr(Vt,3,_r(ve,3)),Mr(Vt,4,_r(ve,4)),Mr(Vt,5,_r(ve,5)),Ui(ve,Vt),le=xi(le),zi.call(bi,te,le);if(ri.M)for(pi=0;pi<ri.M.length;++pi){if(bi=ar.data,zi=bi.addClassification,te=Br,le=ri.M[pi],ve=new qt,Pr(ve,2,le.Y),le.index&&Pr(ve,1,le.index),le.label&&Pr(ve,3,le.label),le.displayName&&Pr(ve,4,le.displayName),Vt=le=new Di,kt=_r(ve,1),kt!=null&&kt!=null)if(Ci(Vt.g,8),st=Vt.g,0<=kt)Ci(st,kt);else{for(Ht=0;9>Ht;Ht++)st.push(kt&127|128),kt>>=7;st.push(1)}Mr(Vt,2,_r(ve,2)),st=_r(ve,3),st!=null&&(st=Hs(st),Ci(Vt.g,26),Ci(Vt.g,st.length),qo(Vt,Vt.g.end()),qo(Vt,st)),st=_r(ve,4),st!=null&&(st=Hs(st),Ci(Vt.g,34),Ci(Vt.g,st.length),qo(Vt,Vt.g.end()),qo(Vt,st)),Ui(ve,Vt),le=xi(le),zi.call(bi,te,le)}}ar=ar.data;break e;default:ar={}}}switch(Or=ar,Sr=Qn.stream,Qn.type){case"video":dn.pushTexture2d(Object.assign(Object.assign({},Or),{stream:Sr,timestamp:Bt}));break;case"detections":jr=Or,jr.stream=Sr,jr.timestamp=Bt,dn.pushDetectionList(jr);break;default:throw Error("Unknown input config type: '"+Qn.type+"'")}}return St.i.send(dn),jt(Tr,St.C,4);case 4:dn.delete(),Tr.g=0}})})};function Qs(oe,Ie,we){return Qr(oe,function St(){var Bt,dn,Xt,sn,An,Qn,Or=this,Sr,jr,Tr,ar,wr,Br,ri,pi;return ai(St,function(bi){switch(bi.g){case 1:if(!we)return bi.return(Ie);for(Bt={},dn=0,Xt=$e(Object.keys(we)),sn=Xt.next();!sn.done;sn=Xt.next())An=sn.value,Qn=we[An],typeof Qn!="string"&&Qn.type==="texture"&&Ie[Qn.stream]!==void 0&&++dn;1<dn&&(Or.G=!1),Sr=$e(Object.keys(we)),sn=Sr.next();case 2:if(sn.done){bi.g=4;break}if(jr=sn.value,Tr=we[jr],typeof Tr=="string")return ri=Bt,pi=jr,jt(bi,Ya(Or,jr,Ie[Tr]),14);if(ar=Ie[Tr.stream],Tr.type==="detection_list"){if(ar){for(var zi=ar.getRectList(),te=ar.getLandmarksList(),le=ar.getClassificationsList(),ve=[],st=0;st<zi.size();++st){var Vt=zi.get(st);e:{var Ht=new Yi;for(Vt=new Hi(Vt);Nr(Vt);)switch(Vt.i){case 13:var kt=as(Vt.g);Pr(Ht,1,kt);break;case 21:kt=as(Vt.g),Pr(Ht,2,kt);break;case 29:kt=as(Vt.g),Pr(Ht,3,kt);break;case 37:kt=as(Vt.g),Pr(Ht,4,kt);break;case 45:kt=as(Vt.g),Pr(Ht,5,kt);break;case 48:for(var Qt=Vt.g,pn=128,X=0,be=kt=0;4>be&&128<=pn;be++)pn=Qt.h[Qt.g++],X|=(pn&127)<<7*be;if(128<=pn&&(pn=Qt.h[Qt.g++],X|=(pn&127)<<28,kt|=(pn&127)>>4),128<=pn)for(be=0;5>be&&128<=pn;be++)pn=Qt.h[Qt.g++],kt|=(pn&127)<<7*be+3;128>pn?(Qt=X>>>0,pn=kt>>>0,(kt=pn&2147483648)&&(Qt=~Qt+1>>>0,pn=~pn>>>0,Qt==0&&(pn=pn+1>>>0)),Qt=4294967296*pn+(Qt>>>0),kt=kt?-Qt:Qt):(Qt.l=!0,kt=void 0),Pr(Ht,6,kt);break;default:if(!Yr(Ht,Vt))break e}}Ht={Z:Hr(Ht,1),$:Hr(Ht,2),height:Hr(Ht,3),width:Hr(Ht,4),rotation:Hr(Ht,5,0),X:_n(Ht,6)},kt=te.get(st);e:for(Vt=new nr,kt=new Hi(kt);Nr(kt);)switch(kt.i){case 10:Qt=Gr(kt,new si,ni),fi(Vt,Qt,si,void 0);break;default:if(!Yr(Vt,kt))break e}Vt=ys(Vt,si).map(vs),Qt=le.get(st);e:for(kt=new bn,Qt=new Hi(Qt);Nr(Qt);)switch(Qt.i){case 10:kt.addClassification(Gr(Qt,new qt,an));break;default:if(!Yr(kt,Qt))break e}Ht={T:Ht,O:Vt,M:ts(kt)},ve.push(Ht)}zi=ve}else zi=[];Bt[jr]=zi,bi.g=7;break}if(Tr.type==="proto_list"){if(ar){for(zi=Array(ar.size()),te=0;te<ar.size();te++)zi[te]=ar.get(te);ar.delete()}else zi=[];Bt[jr]=zi,bi.g=7;break}if(ar===void 0){bi.g=3;break}if(Tr.type==="float_list"){Bt[jr]=ar,bi.g=7;break}if(Tr.type==="proto"){Bt[jr]=ar,bi.g=7;break}if(Tr.type!=="texture")throw Error("Unknown output config type: '"+Tr.type+"'");return wr=Or.s[jr],wr||(wr=new ws(Or.h,Or.D),Or.s[jr]=wr),jt(bi,ji(wr,ar,Or.G),13);case 13:Br=bi.h,Bt[jr]=Br;case 7:Tr.transform&&Bt[jr]&&(Bt[jr]=Tr.transform(Bt[jr])),bi.g=3;break;case 14:ri[pi]=bi.h;case 3:sn=Sr.next(),bi.g=2;break;case 4:return bi.return(Bt)}})})}function Ya(oe,Ie,we){return Qr(oe,function St(){var Bt=this,dn;return ai(St,function(Xt){return typeof we=="number"||we instanceof Uint8Array||we instanceof Bt.h.Uint8BlobList?Xt.return(we):we instanceof Bt.h.Texture2dDataOut?(dn=Bt.s[Ie],dn||(dn=new ws(Bt.h,Bt.D),Bt.s[Ie]=dn),Xt.return(ji(dn,we,Bt.G))):Xt.return(void 0)})})}function Ka(oe,Ie){for(var we=Ie.name||"$",St=[].concat(lt(Ie.wants)),Bt=new oe.h.StringList,dn=$e(Ie.wants),Xt=dn.next();!Xt.done;Xt=dn.next())Bt.push_back(Xt.value);dn=oe.h.PacketListener.implement({onResults:function(sn){for(var An={},Qn=0;Qn<Ie.wants.length;++Qn)An[St[Qn]]=sn.get(Qn);var Or=oe.listeners[we];Or&&(oe.C=Qs(oe,An,Ie.outs).then(function(Sr){Sr=Or(Sr);for(var jr=0;jr<Ie.wants.length;++jr){var Tr=An[St[jr]];typeof Tr=="object"&&Tr.hasOwnProperty&&Tr.hasOwnProperty("delete")&&Tr.delete()}Sr&&(oe.C=Sr)}))}}),oe.i.attachMultiListener(Bt,dn),Bt.delete()}I.onResults=function(oe,Ie){this.listeners[Ie||"$"]=oe},Zi("Solution",Ta),Zi("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function qs(oe){switch(oe===void 0&&(oe=0),oe){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function aa(oe){var Ie=this;oe=oe||{},this.g=new Ta({locateFile:oe.locateFile,files:function(we){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:qs(we.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(we){return Qr(Ie,function St(){var Bt,dn,Xt=this,sn;return ai(St,function(An){return An.g==1?(Bt=qs(we),dn="third_party/mediapipe/modules/selfie_segmentation/"+Bt,jt(An,ls(Xt.g,Bt),2)):(sn=An.h,Xt.g.overrideFile(dn,sn),An.return(!0))})})}}}})}I=aa.prototype,I.close=function(){return this.g.close(),n.resolve()},I.onResults=function(oe){this.g.onResults(oe)},I.initialize=function(){return Qr(this,function oe(){var Ie=this;return ai(oe,function(we){return jt(we,Ie.g.initialize(),0)})})},I.reset=function(){this.g.reset()},I.send=function(oe){return Qr(this,function Ie(){var we=this;return ai(Ie,function(St){return jt(St,we.g.send(oe),0)})})},I.setOptions=function(oe){this.g.setOptions(oe)},Zi("SelfieSegmentation",aa),Zi("VERSION","0.1.1632777926")}).call(wi);const da={};(function(){var I;function x(B){var ge=0;return function(){return ge<B.length?{done:!1,value:B[ge++]}:{done:!0}}}var N=typeof Object.defineProperties=="function"?Object.defineProperty:function(B,ge,Ne){return B==Array.prototype||B==Object.prototype||(B[ge]=Ne.value),B};function ie(B){B=[typeof globalThis=="object"&&globalThis,B,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var ge=0;ge<B.length;++ge){var Ne=B[ge];if(Ne&&Ne.Math==Math)return Ne}throw Error("Cannot find global object")}var pe=ie(this);function Xe(B,ge){if(ge)e:{var Ne=pe;B=B.split(".");for(var He=0;He<B.length-1;He++){var vt=B[He];if(!(vt in Ne))break e;Ne=Ne[vt]}B=B[B.length-1],He=Ne[B],ge=ge(He),ge!=He&&ge!=null&&N(Ne,B,{configurable:!0,writable:!0,value:ge})}}Xe("Symbol",function(B){function ge(L){if(this instanceof ge)throw new TypeError("Symbol is not a constructor");return new Ne(He+(L||"")+"_"+vt++,L)}function Ne(L,$){this.g=L,N(this,"description",{configurable:!0,writable:!0,value:$})}if(B)return B;Ne.prototype.toString=function(){return this.g};var He="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",vt=0;return ge}),Xe("Symbol.iterator",function(B){if(B)return B;B=Symbol("Symbol.iterator");for(var ge="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Ne=0;Ne<ge.length;Ne++){var He=pe[ge[Ne]];typeof He=="function"&&typeof He.prototype[B]!="function"&&N(He.prototype,B,{configurable:!0,writable:!0,value:function(){return rt(x(this))}})}return B});function rt(B){return B={next:B},B[Symbol.iterator]=function(){return this},B}function $e(B){var ge=typeof Symbol<"u"&&Symbol.iterator&&B[Symbol.iterator];return ge?ge.call(B):{next:x(B)}}function lt(B){if(!(B instanceof Array)){B=$e(B);for(var ge,Ne=[];!(ge=B.next()).done;)Ne.push(ge.value);B=Ne}return B}var zt=typeof Object.create=="function"?Object.create:function(B){function ge(){}return ge.prototype=B,new ge},ln;if(typeof Object.setPrototypeOf=="function")ln=Object.setPrototypeOf;else{var hn;e:{var ir={a:!0},ur={};try{ur.__proto__=ir,hn=ur.a;break e}catch{}hn=!1}ln=hn?function(B,ge){if(B.__proto__=ge,B.__proto__!==ge)throw new TypeError(B+" is not extensible");return B}:null}var vn=ln;function Tn(B,ge){if(B.prototype=zt(ge.prototype),B.prototype.constructor=B,vn)vn(B,ge);else for(var Ne in ge)if(Ne!="prototype")if(Object.defineProperties){var He=Object.getOwnPropertyDescriptor(ge,Ne);He&&Object.defineProperty(B,Ne,He)}else B[Ne]=ge[Ne];B.ra=ge.prototype}function Ir(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Er(B){if(B.l)throw new TypeError("Generator is already running");B.l=!0}Ir.prototype.s=function(B){this.h=B};function zr(B,ge){B.j={fa:ge,ga:!0},B.g=B.o||B.u}Ir.prototype.return=function(B){this.j={return:B},this.g=this.u};function jt(B,ge,Ne){return B.g=Ne,{value:ge}}function Rs(B){this.g=new Ir,this.h=B}function ps(B,ge){Er(B.g);var Ne=B.g.i;return Ne?Ni(B,"return"in Ne?Ne.return:function(He){return{value:He,done:!0}},ge,B.g.return):(B.g.return(ge),Ur(B))}function Ni(B,ge,Ne,He){try{var vt=ge.call(B.g.i,Ne);if(!(vt instanceof Object))throw new TypeError("Iterator result "+vt+" is not an object");if(!vt.done)return B.g.l=!1,vt;var L=vt.value}catch($){return B.g.i=null,zr(B.g,$),Ur(B)}return B.g.i=null,He.call(B.g,L),Ur(B)}function Ur(B){for(;B.g.g;)try{var ge=B.h(B.g);if(ge)return B.g.l=!1,{value:ge.value,done:!1}}catch(Ne){B.g.h=void 0,zr(B.g,Ne)}if(B.g.l=!1,B.g.j){if(ge=B.g.j,B.g.j=null,ge.ga)throw ge.fa;return{value:ge.return,done:!0}}return{value:void 0,done:!0}}function Za(B){this.next=function(ge){return Er(B.g),B.g.i?ge=Ni(B,B.g.i.next,ge,B.g.s):(B.g.s(ge),ge=Ur(B)),ge},this.throw=function(ge){return Er(B.g),B.g.i?ge=Ni(B,B.g.i.throw,ge,B.g.s):(zr(B.g,ge),ge=Ur(B)),ge},this.return=function(ge){return ps(B,ge)},this[Symbol.iterator]=function(){return this}}function ai(B){function ge(He){return B.next(He)}function Ne(He){return B.throw(He)}return new n(function(He,vt){function L($){$.done?He($.value):n.resolve($.value).then(ge,Ne).then(L,vt)}L(B.next())})}function Gn(B){return ai(new Za(new Rs(B)))}Xe("Promise",function(B){function ge($){this.h=0,this.i=void 0,this.g=[],this.s=!1;var he=this.j();try{$(he.resolve,he.reject)}catch(T){he.reject(T)}}function Ne(){this.g=null}function He($){return $ instanceof ge?$:new ge(function(he){he($)})}if(B)return B;Ne.prototype.h=function($){if(this.g==null){this.g=[];var he=this;this.i(function(){he.l()})}this.g.push($)};var vt=pe.setTimeout;Ne.prototype.i=function($){vt($,0)},Ne.prototype.l=function(){for(;this.g&&this.g.length;){var $=this.g;this.g=[];for(var he=0;he<$.length;++he){var T=$[he];$[he]=null;try{T()}catch(K){this.j(K)}}}this.g=null},Ne.prototype.j=function($){this.i(function(){throw $})},ge.prototype.j=function(){function $(K){return function(ne){T||(T=!0,K.call(he,ne))}}var he=this,T=!1;return{resolve:$(this.D),reject:$(this.l)}},ge.prototype.D=function($){if($===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if($ instanceof ge)this.H($);else{e:switch(typeof $){case"object":var he=$!=null;break e;case"function":he=!0;break e;default:he=!1}he?this.A($):this.o($)}},ge.prototype.A=function($){var he=void 0;try{he=$.then}catch(T){this.l(T);return}typeof he=="function"?this.I(he,$):this.o($)},ge.prototype.l=function($){this.u(2,$)},ge.prototype.o=function($){this.u(1,$)},ge.prototype.u=function($,he){if(this.h!=0)throw Error("Cannot settle("+$+", "+he+"): Promise already settled in state"+this.h);this.h=$,this.i=he,this.h===2&&this.G(),this.B()},ge.prototype.G=function(){var $=this;vt(function(){if($.C()){var he=pe.console;typeof he<"u"&&he.error($.i)}},1)},ge.prototype.C=function(){if(this.s)return!1;var $=pe.CustomEvent,he=pe.Event,T=pe.dispatchEvent;return typeof T>"u"?!0:(typeof $=="function"?$=new $("unhandledrejection",{cancelable:!0}):typeof he=="function"?$=new he("unhandledrejection",{cancelable:!0}):($=pe.document.createEvent("CustomEvent"),$.initCustomEvent("unhandledrejection",!1,!0,$)),$.promise=this,$.reason=this.i,T($))},ge.prototype.B=function(){if(this.g!=null){for(var $=0;$<this.g.length;++$)L.h(this.g[$]);this.g=null}};var L=new Ne;return ge.prototype.H=function($){var he=this.j();$.M(he.resolve,he.reject)},ge.prototype.I=function($,he){var T=this.j();try{$.call(he,T.resolve,T.reject)}catch(K){T.reject(K)}},ge.prototype.then=function($,he){function T(D,J){return typeof D=="function"?function(se){try{K(D(se))}catch(Me){ne(Me)}}:J}var K,ne,E=new ge(function(D,J){K=D,ne=J});return this.M(T($,K),T(he,ne)),E},ge.prototype.catch=function($){return this.then(void 0,$)},ge.prototype.M=function($,he){function T(){switch(K.h){case 1:$(K.i);break;case 2:he(K.i);break;default:throw Error("Unexpected state: "+K.h)}}var K=this;this.g==null?L.h(T):this.g.push(T),this.s=!0},ge.resolve=He,ge.reject=function($){return new ge(function(he,T){T($)})},ge.race=function($){return new ge(function(he,T){for(var K=$e($),ne=K.next();!ne.done;ne=K.next())He(ne.value).M(he,T)})},ge.all=function($){var he=$e($),T=he.next();return T.done?He([]):new ge(function(K,ne){function E(se){return function(Me){D[se]=Me,J--,J==0&&K(D)}}var D=[],J=0;do D.push(void 0),J++,He(T.value).M(E(D.length-1),ne),T=he.next();while(!T.done)})},ge});function xs(B,ge){B instanceof String&&(B+="");var Ne=0,He=!1,vt={next:function(){if(!He&&Ne<B.length){var L=Ne++;return{value:ge(L,B[L]),done:!1}}return He=!0,{done:!0,value:void 0}}};return vt[Symbol.iterator]=function(){return vt},vt}var La=typeof Object.assign=="function"?Object.assign:function(B,ge){for(var Ne=1;Ne<arguments.length;Ne++){var He=arguments[Ne];if(He)for(var vt in He)Object.prototype.hasOwnProperty.call(He,vt)&&(B[vt]=He[vt])}return B};Xe("Object.assign",function(B){return B||La}),Xe("Object.is",function(B){return B||function(ge,Ne){return ge===Ne?ge!==0||1/ge===1/Ne:ge!==ge&&Ne!==Ne}}),Xe("Array.prototype.includes",function(B){return B||function(ge,Ne){var He=this;He instanceof String&&(He=String(He));var vt=He.length;for(Ne=Ne||0,0>Ne&&(Ne=Math.max(Ne+vt,0));Ne<vt;Ne++){var L=He[Ne];if(L===ge||Object.is(L,ge))return!0}return!1}}),Xe("String.prototype.includes",function(B){return B||function(ge,Ne){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(ge instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(ge,Ne||0)!==-1}}),Xe("Array.prototype.keys",function(B){return B||function(){return xs(this,function(ge){return ge})}});var Zi=this||self;function br(B,ge){B=B.split(".");var Ne=Zi;B[0]in Ne||typeof Ne.execScript>"u"||Ne.execScript("var "+B[0]);for(var He;B.length&&(He=B.shift());)B.length||ge===void 0?Ne[He]&&Ne[He]!==Object.prototype[He]?Ne=Ne[He]:Ne=Ne[He]={}:Ne[He]=ge}function Xi(){throw Error("Invalid UTF8")}function ss(B,ge){return ge=String.fromCharCode.apply(null,ge),B==null?ge:B+ge}var Fs,oa=typeof TextDecoder<"u",Hs,pa=typeof TextEncoder<"u",gs={},Is=null;function Ea(B){var ge;ge===void 0&&(ge=0),Wo(),ge=gs[ge];for(var Ne=Array(Math.floor(B.length/3)),He=ge[64]||"",vt=0,L=0;vt<B.length-2;vt+=3){var $=B[vt],he=B[vt+1],T=B[vt+2],K=ge[$>>2];$=ge[($&3)<<4|he>>4],he=ge[(he&15)<<2|T>>6],T=ge[T&63],Ne[L++]=K+$+he+T}switch(K=0,T=He,B.length-vt){case 2:K=B[vt+1],T=ge[(K&15)<<2]||He;case 1:B=B[vt],Ne[L]=ge[B>>2]+ge[(B&3)<<4|K>>4]+T+He}return Ne.join("")}function sa(B){var ge=B.length,Ne=3*ge/4;Ne%3?Ne=Math.floor(Ne):"=.".indexOf(B[ge-1])!=-1&&(Ne="=.".indexOf(B[ge-2])!=-1?Ne-2:Ne-1);var He=new Uint8Array(Ne),vt=0;return Yo(B,function(L){He[vt++]=L}),vt!==Ne?He.subarray(0,vt):He}function Yo(B,ge){function Ne(T){for(;He<B.length;){var K=B.charAt(He++),ne=Is[K];if(ne!=null)return ne;if(!/^[\s\xa0]*$/.test(K))throw Error("Unknown base64 encoding at char: "+K)}return T}Wo();for(var He=0;;){var vt=Ne(-1),L=Ne(0),$=Ne(64),he=Ne(64);if(he===64&&vt===-1)break;ge(vt<<2|L>>4),$!=64&&(ge(L<<4&240|$>>2),he!=64&&ge($<<6&192|he))}}function Wo(){if(!Is){Is={};for(var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),ge=["+/=","+/","-_=","-_.","-_"],Ne=0;5>Ne;Ne++){var He=B.concat(ge[Ne].split(""));gs[Ne]=He;for(var vt=0;vt<He.length;vt++){var L=He[vt];Is[L]===void 0&&(Is[L]=vt)}}}}var Ys=typeof Uint8Array=="function";function Gs(B){return Ys&&B!=null&&B instanceof Uint8Array}var di;function Mi(B){if(this.L=B,B!==null&&B.length===0)throw Error("ByteString should be constructed with non-empty values")}var Ko=typeof Uint8Array.prototype.slice=="function",Jr=0,Oi=0;function as(B,ge){if(B.constructor===Uint8Array)return B;if(B.constructor===ArrayBuffer)return new Uint8Array(B);if(B.constructor===Array)return new Uint8Array(B);if(B.constructor===String)return sa(B);if(B.constructor===Mi)return!ge&&(ge=B.L)&&ge.constructor===Uint8Array?ge:(ge=B.L,ge=ge==null||Gs(ge)?ge:typeof ge=="string"?sa(ge):null,(B=B.L=ge)?new Uint8Array(B):di||(di=new Uint8Array(0)));if(B instanceof Uint8Array)return new Uint8Array(B.buffer,B.byteOffset,B.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function eo(B,ge){return Error("Invalid wire type: "+B+" (at position "+ge+")")}function Dr(){return Error("Failed to read varint, encoding is invalid.")}function Ci(B,ge){ge=ge===void 0?{}:ge,ge=ge.v===void 0?!1:ge.v,this.h=null,this.g=this.i=this.j=0,this.v=ge,B&&Hi(this,B)}function Hi(B,ge){B.h=as(ge,B.v),B.j=0,B.i=B.h.length,B.g=B.j}Ci.prototype.reset=function(){this.g=this.j};function Nr(B){if(B.g>B.i)throw Error("Tried to read past the end of the data "+B.g+" > "+B.i)}function Fi(B){var ge=B.h,Ne=ge[B.g],He=Ne&127;if(128>Ne)return B.g+=1,Nr(B),He;if(Ne=ge[B.g+1],He|=(Ne&127)<<7,128>Ne)return B.g+=2,Nr(B),He;if(Ne=ge[B.g+2],He|=(Ne&127)<<14,128>Ne)return B.g+=3,Nr(B),He;if(Ne=ge[B.g+3],He|=(Ne&127)<<21,128>Ne)return B.g+=4,Nr(B),He;if(Ne=ge[B.g+4],B.g+=5,He|=(Ne&15)<<28,128>Ne)return Nr(B),He;if(128<=ge[B.g++]&&128<=ge[B.g++]&&128<=ge[B.g++]&&128<=ge[B.g++]&&128<=ge[B.g++])throw Dr();return Nr(B),He}var Gr=[];function vi(){this.g=[]}vi.prototype.length=function(){return this.g.length},vi.prototype.end=function(){var B=this.g;return this.g=[],B};function Di(B,ge){for(;127<ge;)B.g.push(ge&127|128),ge>>>=7;B.g.push(ge)}function qo(B){var ge={},Ne=ge.W===void 0?!1:ge.W;this.l={v:ge.v===void 0?!1:ge.v},this.W=Ne,ge=this.l,Gr.length?(Ne=Gr.pop(),ge&&(Ne.v=ge.v),B&&Hi(Ne,B),B=Ne):B=new Ci(B,ge),this.g=B,this.j=this.g.g,this.h=this.i=-1}qo.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function xi(B){var ge=B.g;if(ge.g==ge.i)return!1;B.j=B.g.g;var Ne=Fi(B.g)>>>0;if(ge=Ne>>>3,Ne&=7,!(0<=Ne&&5>=Ne))throw eo(Ne,B.j);if(1>ge)throw Error("Invalid field number: "+ge+" (at position "+B.j+")");return B.i=ge,B.h=Ne,!0}function Mr(B){switch(B.h){case 0:if(B.h!=0)Mr(B);else e:{B=B.g;for(var ge=B.g,Ne=ge+10;ge<Ne;)if(!(B.h[ge++]&128)){B.g=ge,Nr(B);break e}throw Dr()}break;case 1:B=B.g,B.g+=8,Nr(B);break;case 2:B.h!=2?Mr(B):(ge=Fi(B.g)>>>0,B=B.g,B.g+=ge,Nr(B));break;case 5:B=B.g,B.g+=4,Nr(B);break;case 3:ge=B.i;do{if(!xi(B))throw Error("Unmatched start-group tag: stream EOF");if(B.h==4){if(B.i!=ge)throw Error("Unmatched end-group tag");break}Mr(B)}while(1);break;default:throw eo(B.h,B.j)}}var Xo=[];function zo(){this.i=[],this.h=0,this.g=new vi}function Gi(B,ge){ge.length!==0&&(B.i.push(ge),B.h+=ge.length)}function Ms(B,ge){if(ge=ge.ca){Gi(B,B.g.end());for(var Ne=0;Ne<ge.length;Ne++)Gi(B,ge[Ne])}}var cs=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Jo(B,ge){Object.isFrozen(B)||(cs?B[cs]|=ge:B.N!==void 0?B.N|=ge:Object.defineProperties(B,{N:{value:ge,configurable:!0,writable:!0,enumerable:!1}}))}function us(B){var ge;return cs?ge=B[cs]:ge=B.N,ge??0}function Ei(B){return Jo(B,1),B}function Bi(B){return Array.isArray(B)?!!(us(B)&2):!1}function Ti(B){if(!Array.isArray(B))throw Error("cannot mark non-array as immutable");Jo(B,2)}function _r(B){return B!==null&&typeof B=="object"&&!Array.isArray(B)&&B.constructor===Object}var _o=Object.freeze(Ei([]));function Hr(B){if(Bi(B.m))throw Error("Cannot mutate an immutable Message")}var Pr=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function ys(B){return{value:B,configurable:!1,writable:!1,enumerable:!1}}function fi(B,ge,Ne){return ge===-1?null:ge>=B.i?B.g?B.g[ge]:void 0:Ne!==void 0&&Ne&&B.g&&(Ne=B.g[ge],Ne!=null)?Ne:B.m[ge+B.h]}function gr(B,ge,Ne,He){He=He===void 0?!1:He,Hr(B),ge<B.i&&!He?B.m[ge+B.h]=Ne:(B.g||(B.g=B.m[B.i+B.h]={}))[ge]=Ne}function _n(B,ge,Ne,He){Ne=Ne===void 0?!0:Ne,He=He===void 0?!1:He;var vt=fi(B,ge,He);return vt==null&&(vt=_o),Bi(B.m)?Ne&&(Ti(vt),Object.freeze(vt)):(vt===_o||Bi(vt))&&(vt=Ei(vt.slice()),gr(B,ge,vt,He)),vt}function $r(B,ge,Ne){return B=fi(B,ge),B=B==null?B:+B,B??(Ne===void 0?0:Ne)}function Ui(B,ge,Ne,He){B.j||(B.j={});var vt=Bi(B.m),L=B.j[Ne];if(!L){He=_n(B,Ne,!0,He===void 0?!1:He),L=[],vt=vt||Bi(He);for(var $=0;$<He.length;$++)L[$]=new ge(He[$]),vt&&Ti(L[$].m);vt&&(Ti(L),Object.freeze(L)),B.j[Ne]=L}return L}function Yr(B,ge,Ne,He,vt){var L=L===void 0?!1:L;return Hr(B),L=Ui(B,Ne,ge,L),Ne=He||new Ne,B=_n(B,ge),vt!=null?(L.splice(vt,0,Ne),B.splice(vt,0,Ne.m)):(L.push(Ne),B.push(Ne.m)),Ne}function Qr(B,ge){return B=fi(B,ge),B??0}function qt(B,ge){return B=fi(B,ge),B??""}function an(B){switch(typeof B){case"number":return isFinite(B)?B:String(B);case"object":if(B&&!Array.isArray(B)){if(Gs(B))return Ea(B);if(B instanceof Mi){var ge=B.L;return ge=ge==null||typeof ge=="string"?ge:Ys&&ge instanceof Uint8Array?Ea(ge):null,(B.L=ge)||""}}}return B}function bn(B){var ge=ni;return ge=ge===void 0?nr:ge,si(B,ge)}function Wr(B,ge){if(B!=null){if(Array.isArray(B))B=si(B,ge);else if(_r(B)){var Ne={},He;for(He in B)Ne[He]=Wr(B[He],ge);B=Ne}else B=ge(B);return B}}function si(B,ge){for(var Ne=B.slice(),He=0;He<Ne.length;He++)Ne[He]=Wr(Ne[He],ge);return Array.isArray(B)&&us(B)&1&&Ei(Ne),Ne}function ni(B){return B&&typeof B=="object"&&B.toJSON?B.toJSON():(B=an(B),Array.isArray(B)?bn(B):B)}function nr(B){return Gs(B)?new Uint8Array(B):B}function hi(B,ge,Ne){B||(B=Yi),Yi=null;var He=this.constructor.h;B||(B=He?[He]:[]),this.h=(He?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=B;e:{if(He=this.m.length,B=He-1,He&&(He=this.m[B],_r(He))){this.i=B-this.h,this.g=He;break e}ge!==void 0&&-1<ge?(this.i=Math.max(ge,B+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(Ne)for(ge=0;ge<Ne.length;ge++)if(B=Ne[ge],B<this.i)B+=this.h,(He=this.m[B])?Array.isArray(He)&&Ei(He):this.m[B]=_o;else{He=this.g||(this.g=this.m[this.i+this.h]={});var vt=He[B];vt?Array.isArray(vt)&&Ei(vt):He[B]=_o}}hi.prototype.toJSON=function(){return bn(this.m)},hi.prototype.toString=function(){return this.m.toString()};var Yi;function es(){hi.apply(this,arguments)}if(Tn(es,hi),Pr){var ts={};Object.defineProperties(es,(ts[Symbol.hasInstance]=ys(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),ts))}function vs(B,ge,Ne){if(Ne){var He={},vt;for(vt in Ne){var L=Ne[vt],$=L.ja;$||(He.F=L.pa||L.ha.P,L.ba?(He.U=Ks(L.ba),$=function(he){return function(T,K,ne){return he.F(T,K,ne,he.U)}}(He)):L.da?(He.T=Ro(L.X.g,L.da),$=function(he){return function(T,K,ne){return he.F(T,K,ne,he.T)}}(He)):$=He.F,L.ja=$),$(ge,B,L.X),He={F:He.F,U:He.U,T:He.T}}}Ms(ge,B)}var ws=Symbol();function ji(B,ge,Ne){return B[ws]||(B[ws]=function(He,vt){return ge(He,vt,Ne)})}function ns(B){var ge=B[ws];if(!ge){var Ne=oe(B);ge=function(He,vt){return Ie(He,vt,Ne)},B[ws]=ge}return ge}function Fa(B){var ge=B.ba;if(ge)return ns(ge);if(ge=B.oa)return ji(B.X.g,ge,B.da)}function rs(B){var ge=Fa(B),Ne=B.X,He=B.ha.O;return ge?function(vt,L){return He(vt,L,Ne,ge)}:function(vt,L){return He(vt,L,Ne)}}function Ki(B,ge,Ne,He,vt,L){B=B();var $=0;for(B.length&&typeof B[0]!="number"&&(Ne(ge,B[0]),$++);$<B.length;){Ne=B[$++];for(var he=$+1;he<B.length&&typeof B[he]!="number";)he++;var T=B[$++];switch(he-=$,he){case 0:He(ge,Ne,T);break;case 1:He(ge,Ne,T,B[$++]);break;case 2:vt(ge,Ne,T,B[$++],B[$++]);break;case 3:he=B[$++];var K=B[$++],ne=B[$++];Array.isArray(ne)?vt(ge,Ne,T,he,K,ne):L(ge,Ne,T,he,K,ne);break;case 4:L(ge,Ne,T,B[$++],B[$++],B[$++],B[$++]);break;default:throw Error("unexpected number of binary field arguments: "+he)}}return ge}var Ns=Symbol();function Ks(B){var ge=B[Ns];if(!ge){var Ne=ls(B);ge=function(He,vt){return St(He,vt,Ne)},B[Ns]=ge}return ge}function Ro(B,ge){var Ne=B[Ns];return Ne||(Ne=function(He,vt){return vs(He,vt,ge)},B[Ns]=Ne),Ne}var Ta=Symbol();function is(B,ge){B.push(ge)}function Zs(B,ge,Ne){B.push(ge,Ne.P)}function $s(B,ge,Ne,He,vt){var L=Ks(vt),$=Ne.P;B.push(ge,function(he,T,K){return $(he,T,K,He,L)})}function Aa(B,ge,Ne,He,vt,L){var $=Ro(He,L),he=Ne.P;B.push(ge,function(T,K,ne){return he(T,K,ne,He,$)})}function ls(B){var ge=B[Ta];return ge||Ki(B,B[Ta]=[],is,Zs,$s,Aa)}var Qs=Symbol();function Ya(B,ge){B[0]=ge}function Ka(B,ge,Ne,He){var vt=Ne.O;B[ge]=He?function(L,$,he){return vt(L,$,he,He)}:vt}function qs(B,ge,Ne,He,vt,L){var $=Ne.O,he=ns(vt);B[ge]=function(T,K,ne){return $(T,K,ne,He,he,L)}}function aa(B,ge,Ne,He,vt,L,$){var he=Ne.O,T=ji(He,vt,L);B[ge]=function(K,ne,E){return he(K,ne,E,He,T,$)}}function oe(B){var ge=B[Qs];return ge||Ki(B,B[Qs]={},Ya,Ka,qs,aa)}function Ie(B,ge,Ne){for(;xi(ge)&&ge.h!=4;){var He=ge.i,vt=Ne[He];if(!vt){var L=Ne[0];L&&(L=L[He])&&(vt=Ne[He]=rs(L))}if((!vt||!vt(ge,B,He))&&(vt=ge,He=B,L=vt.j,Mr(vt),!vt.W)){var $=vt.g.h;vt=vt.g.g,vt=L===vt?di||(di=new Uint8Array(0)):Ko?$.slice(L,vt):new Uint8Array($.subarray(L,vt)),(L=He.ca)?L.push(vt):He.ca=[vt]}}return B}function we(B,ge,Ne){if(Xo.length){var He=Xo.pop();B&&(Hi(He.g,B),He.i=-1,He.h=-1),B=He}else B=new qo(B);try{return Ie(new ge,B,oe(Ne))}finally{ge=B.g,ge.h=null,ge.j=0,ge.i=0,ge.g=0,ge.v=!1,B.i=-1,B.h=-1,100>Xo.length&&Xo.push(B)}}function St(B,ge,Ne){for(var He=Ne.length,vt=He%2==1,L=vt?1:0;L<He;L+=2)(0,Ne[L+1])(ge,B,Ne[L]);vs(B,ge,vt?Ne[0]:void 0)}function Bt(B,ge){var Ne=new zo;St(B,Ne,ls(ge)),Gi(Ne,Ne.g.end()),B=new Uint8Array(Ne.h),ge=Ne.i;for(var He=ge.length,vt=0,L=0;L<He;L++){var $=ge[L];B.set($,vt),vt+=$.length}return Ne.i=[B],B}function dn(B,ge){return{O:B,P:ge}}var Xt=dn(function(B,ge,Ne){if(B.h!==5)return!1;B=B.g;var He=B.h[B.g],vt=B.h[B.g+1],L=B.h[B.g+2],$=B.h[B.g+3];return B.g+=4,Nr(B),vt=(He<<0|vt<<8|L<<16|$<<24)>>>0,B=2*(vt>>31)+1,He=vt>>>23&255,vt&=8388607,gr(ge,Ne,He==255?vt?NaN:1/0*B:He==0?B*Math.pow(2,-149)*vt:B*Math.pow(2,He-150)*(vt+Math.pow(2,23))),!0},function(B,ge,Ne){if(ge=fi(ge,Ne),ge!=null){Di(B.g,8*Ne+5),B=B.g;var He=ge;He=(Ne=0>He?1:0)?-He:He,He===0?0<1/He?Jr=Oi=0:(Oi=0,Jr=2147483648):isNaN(He)?(Oi=0,Jr=2147483647):34028234663852886e22<He?(Oi=0,Jr=(Ne<<31|2139095040)>>>0):11754943508222875e-54>He?(He=Math.round(He/Math.pow(2,-149)),Oi=0,Jr=(Ne<<31|He)>>>0):(ge=Math.floor(Math.log(He)/Math.LN2),He*=Math.pow(2,-ge),He=Math.round(8388608*He),16777216<=He&&++ge,Oi=0,Jr=(Ne<<31|ge+127<<23|He&8388607)>>>0),Ne=Jr,B.g.push(Ne>>>0&255),B.g.push(Ne>>>8&255),B.g.push(Ne>>>16&255),B.g.push(Ne>>>24&255)}}),sn=dn(function(B,ge,Ne){if(B.h!==0)return!1;for(var He=B.g,vt=128,L=0,$=B=0;4>$&&128<=vt;$++)vt=He.h[He.g++],Nr(He),L|=(vt&127)<<7*$;if(128<=vt&&(vt=He.h[He.g++],Nr(He),L|=(vt&127)<<28,B|=(vt&127)>>4),128<=vt)for($=0;5>$&&128<=vt;$++)vt=He.h[He.g++],Nr(He),B|=(vt&127)<<7*$+3;if(128>vt)He=L>>>0,vt=B>>>0,(B=vt&2147483648)&&(He=~He+1>>>0,vt=~vt>>>0,He==0&&(vt=vt+1>>>0)),He=4294967296*vt+(He>>>0);else throw Dr();return gr(ge,Ne,B?-He:He),!0},function(B,ge,Ne){if(ge=fi(ge,Ne),ge!=null&&ge!=null){Di(B.g,8*Ne),B=B.g;var He=ge;for(Ne=0>He,He=Math.abs(He),ge=He>>>0,He=Math.floor((He-ge)/4294967296),He>>>=0,Ne&&(He=~He>>>0,ge=(~ge>>>0)+1,4294967295<ge&&(ge=0,He++,4294967295<He&&(He=0))),Jr=ge,Oi=He,Ne=Jr,ge=Oi;0<ge||127<Ne;)B.g.push(Ne&127|128),Ne=(Ne>>>7|ge<<25)>>>0,ge>>>=7;B.g.push(Ne)}}),An=dn(function(B,ge,Ne){return B.h!==0?!1:(gr(ge,Ne,Fi(B.g)),!0)},function(B,ge,Ne){if(ge=fi(ge,Ne),ge!=null&&ge!=null)if(Di(B.g,8*Ne),B=B.g,Ne=ge,0<=Ne)Di(B,Ne);else{for(ge=0;9>ge;ge++)B.g.push(Ne&127|128),Ne>>=7;B.g.push(1)}}),Qn=dn(function(B,ge,Ne){if(B.h!==2)return!1;var He=Fi(B.g)>>>0;B=B.g;var vt=B.g;B.g+=He,Nr(B),B=B.h;var L;if(oa)(L=Fs)||(L=Fs=new TextDecoder("utf-8",{fatal:!0})),L=L.decode(B.subarray(vt,vt+He));else{He=vt+He;for(var $=[],he=null,T,K,ne;vt<He;)T=B[vt++],128>T?$.push(T):224>T?vt>=He?Xi():(K=B[vt++],194>T||(K&192)!==128?(vt--,Xi()):$.push((T&31)<<6|K&63)):240>T?vt>=He-1?Xi():(K=B[vt++],(K&192)!==128||T===224&&160>K||T===237&&160<=K||((L=B[vt++])&192)!==128?(vt--,Xi()):$.push((T&15)<<12|(K&63)<<6|L&63)):244>=T?vt>=He-2?Xi():(K=B[vt++],(K&192)!==128||(T<<28)+(K-144)>>30||((L=B[vt++])&192)!==128||((ne=B[vt++])&192)!==128?(vt--,Xi()):(T=(T&7)<<18|(K&63)<<12|(L&63)<<6|ne&63,T-=65536,$.push((T>>10&1023)+55296,(T&1023)+56320))):Xi(),8192<=$.length&&(he=ss(he,$),$.length=0);L=ss(he,$)}return gr(ge,Ne,L),!0},function(B,ge,Ne){if(ge=fi(ge,Ne),ge!=null){var He=!1;if(He=He===void 0?!1:He,pa){if(He&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(ge))throw Error("Found an unpaired surrogate");ge=(Hs||(Hs=new TextEncoder)).encode(ge)}else{for(var vt=0,L=new Uint8Array(3*ge.length),$=0;$<ge.length;$++){var he=ge.charCodeAt($);if(128>he)L[vt++]=he;else{if(2048>he)L[vt++]=he>>6|192;else{if(55296<=he&&57343>=he){if(56319>=he&&$<ge.length){var T=ge.charCodeAt(++$);if(56320<=T&&57343>=T){he=1024*(he-55296)+T-56320+65536,L[vt++]=he>>18|240,L[vt++]=he>>12&63|128,L[vt++]=he>>6&63|128,L[vt++]=he&63|128;continue}else $--}if(He)throw Error("Found an unpaired surrogate");he=65533}L[vt++]=he>>12|224,L[vt++]=he>>6&63|128}L[vt++]=he&63|128}}ge=L.subarray(0,vt)}Di(B.g,8*Ne+2),Di(B.g,ge.length),Gi(B,B.g.end()),Gi(B,ge)}}),Or=dn(function(B,ge,Ne,He,vt){if(B.h!==2)return!1;ge=Yr(ge,Ne,He),Ne=B.g.i,He=Fi(B.g)>>>0;var L=B.g.g+He,$=L-Ne;if(0>=$&&(B.g.i=L,vt(ge,B),$=L-B.g.g),$)throw Error("Message parsing ended unexpectedly. Expected to read "+(He+" bytes, instead read "+(He-$)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return B.g.g=L,B.g.i=Ne,!0},function(B,ge,Ne,He,vt){if(ge=Ui(ge,He,Ne),ge!=null)for(He=0;He<ge.length;He++){var L=B;Di(L.g,8*Ne+2);var $=L.g.end();Gi(L,$),$.push(L.h),L=$,vt(ge[He],B),$=B;var he=L.pop();for(he=$.h+$.g.length()-he;127<he;)L.push(he&127|128),he>>>=7,$.h++;L.push(he),$.h++}});function Sr(){es.apply(this,arguments)}if(Tn(Sr,es),Pr){var jr={};Object.defineProperties(Sr,(jr[Symbol.hasInstance]=ys(Object[Symbol.hasInstance]),jr))}function Tr(B){Sr.call(this,B)}Tn(Tr,Sr);function ar(){return[1,An,2,Xt,3,Qn,4,Qn]}function wr(B){Sr.call(this,B,-1,ri)}Tn(wr,Sr),wr.prototype.addClassification=function(B,ge){return Yr(this,1,Tr,B,ge),this};function Br(){return[1,Or,Tr,ar]}var ri=[1];function pi(B){Sr.call(this,B)}Tn(pi,Sr);function bi(){return[1,Xt,2,Xt,3,Xt,4,Xt,5,Xt]}function zi(B){Sr.call(this,B,-1,le)}Tn(zi,Sr);function te(){return[1,Or,pi,bi]}var le=[1];function ve(B){Sr.call(this,B)}Tn(ve,Sr);function st(){return[1,Xt,2,Xt,3,Xt,4,Xt,5,Xt,6,sn]}function Vt(B,ge,Ne){if(Ne=B.createShader(Ne===0?B.VERTEX_SHADER:B.FRAGMENT_SHADER),B.shaderSource(Ne,ge),B.compileShader(Ne),!B.getShaderParameter(Ne,B.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+B.getShaderInfoLog(Ne));return Ne}function Ht(B){return Ui(B,Tr,1).map(function(ge){return{index:Qr(ge,1),score:$r(ge,2),label:fi(ge,3)!=null?qt(ge,3):void 0,displayName:fi(ge,4)!=null?qt(ge,4):void 0}})}function kt(B){return{x:$r(B,1),y:$r(B,2),z:$r(B,3),visibility:fi(B,4)!=null?$r(B,4):void 0}}function Qt(B){return B.map(function(ge){return Ui(we(ge,zi,te),pi,1).map(kt)})}function pn(B,ge){this.h=B,this.g=ge,this.l=0}function X(B,ge,Ne){return be(B,ge),typeof B.g.canvas.transferToImageBitmap=="function"?n.resolve(B.g.canvas.transferToImageBitmap()):Ne?n.resolve(B.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(B.g.canvas):(B.i===void 0&&(B.i=document.createElement("canvas")),new n(function(He){B.i.height=B.g.canvas.height,B.i.width=B.g.canvas.width,B.i.getContext("2d",{}).drawImage(B.g.canvas,0,0,B.g.canvas.width,B.g.canvas.height),He(B.i)}))}function be(B,ge){var Ne=B.g;if(B.o===void 0){var He=Vt(Ne,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),vt=Vt(Ne,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),L=Ne.createProgram();if(Ne.attachShader(L,He),Ne.attachShader(L,vt),Ne.linkProgram(L),!Ne.getProgramParameter(L,Ne.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+Ne.getProgramInfoLog(L));He=B.o=L,Ne.useProgram(He),vt=Ne.getUniformLocation(He,"sampler0"),B.j={K:Ne.getAttribLocation(He,"aVertex"),J:Ne.getAttribLocation(He,"aTex"),qa:vt},B.u=Ne.createBuffer(),Ne.bindBuffer(Ne.ARRAY_BUFFER,B.u),Ne.enableVertexAttribArray(B.j.K),Ne.vertexAttribPointer(B.j.K,2,Ne.FLOAT,!1,0,0),Ne.bufferData(Ne.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),Ne.STATIC_DRAW),Ne.bindBuffer(Ne.ARRAY_BUFFER,null),B.s=Ne.createBuffer(),Ne.bindBuffer(Ne.ARRAY_BUFFER,B.s),Ne.enableVertexAttribArray(B.j.J),Ne.vertexAttribPointer(B.j.J,2,Ne.FLOAT,!1,0,0),Ne.bufferData(Ne.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),Ne.STATIC_DRAW),Ne.bindBuffer(Ne.ARRAY_BUFFER,null),Ne.uniform1i(vt,0)}He=B.j,Ne.useProgram(B.o),Ne.canvas.width=ge.width,Ne.canvas.height=ge.height,Ne.viewport(0,0,ge.width,ge.height),Ne.activeTexture(Ne.TEXTURE0),B.h.bindTexture2d(ge.glName),Ne.enableVertexAttribArray(He.K),Ne.bindBuffer(Ne.ARRAY_BUFFER,B.u),Ne.vertexAttribPointer(He.K,2,Ne.FLOAT,!1,0,0),Ne.enableVertexAttribArray(He.J),Ne.bindBuffer(Ne.ARRAY_BUFFER,B.s),Ne.vertexAttribPointer(He.J,2,Ne.FLOAT,!1,0,0),Ne.bindFramebuffer(Ne.DRAW_FRAMEBUFFER?Ne.DRAW_FRAMEBUFFER:Ne.FRAMEBUFFER,null),Ne.clearColor(0,0,0,0),Ne.clear(Ne.COLOR_BUFFER_BIT),Ne.colorMask(!0,!0,!0,!0),Ne.drawArrays(Ne.TRIANGLE_FAN,0,4),Ne.disableVertexAttribArray(He.K),Ne.disableVertexAttribArray(He.J),Ne.bindBuffer(Ne.ARRAY_BUFFER,null),B.h.bindTexture2d(0)}function ke(B){this.g=B}var ze=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function yt(B,ge){return ge+B}function Nt(B,ge){window[B]=ge}function Ot(B){var ge=document.createElement("script");return ge.setAttribute("src",B),ge.setAttribute("crossorigin","anonymous"),new n(function(Ne){ge.addEventListener("load",function(){Ne()},!1),ge.addEventListener("error",function(){Ne()},!1),document.body.appendChild(ge)})}function rn(){return Gn(function(B){switch(B.g){case 1:return B.o=2,jt(B,WebAssembly.instantiate(ze),4);case 4:B.g=3,B.o=0;break;case 2:return B.o=0,B.j=null,B.return(!1);case 3:return B.return(!0)}})}function _t(B){if(this.g=B,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.$=!0,this.D=n.resolve(),this.Z="",this.C={},this.locateFile=B&&B.locateFile||yt,typeof window=="object")var ge=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")ge=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.aa=ge,B.options){ge=$e(Object.keys(B.options));for(var Ne=ge.next();!Ne.done;Ne=ge.next()){Ne=Ne.value;var He=B.options[Ne].default;He!==void 0&&(this.j[Ne]=typeof He=="function"?He():He)}}}I=_t.prototype,I.close=function(){return this.i&&this.i.delete(),n.resolve()};function kn(B){var ge,Ne,He,vt,L,$,he,T,K,ne,E;return Gn(function(D){switch(D.g){case 1:return B.$?(ge=B.g.files===void 0?[]:typeof B.g.files=="function"?B.g.files(B.j):B.g.files,jt(D,rn(),2)):D.return();case 2:if(Ne=D.h,typeof window=="object")return Nt("createMediapipeSolutionsWasm",{locateFile:B.locateFile}),Nt("createMediapipeSolutionsPackedAssets",{locateFile:B.locateFile}),$=ge.filter(function(J){return J.data!==void 0}),he=ge.filter(function(J){return J.data===void 0}),T=n.all($.map(function(J){var se=qn(B,J.url);if(J.path!==void 0){var Me=J.path;se=se.then(function(qe){return B.overrideFile(Me,qe),n.resolve(qe)})}return se})),K=n.all(he.map(function(J){return J.simd===void 0||J.simd&&Ne||!J.simd&&!Ne?Ot(B.locateFile(J.url,B.aa)):n.resolve()})).then(function(){var J,se,Me;return Gn(function(qe){if(qe.g==1)return J=window.createMediapipeSolutionsWasm,se=window.createMediapipeSolutionsPackedAssets,Me=B,jt(qe,J(se),2);Me.h=qe.h,qe.g=0})}),ne=function(){return Gn(function(J){return B.g.graph&&B.g.graph.url?J=jt(J,qn(B,B.g.graph.url),0):(J.g=0,J=void 0),J})}(),jt(D,n.all([K,T,ne]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return He=ge.filter(function(J){return J.simd===void 0||J.simd&&Ne||!J.simd&&!Ne}).map(function(J){return B.locateFile(J.url,B.aa)}),importScripts.apply(null,lt(He)),vt=B,jt(D,createMediapipeSolutionsWasm(Module),6);case 6:vt.h=D.h,B.l=new OffscreenCanvas(1,1),B.h.canvas=B.l,L=B.h.GL.createContext(B.l,{antialias:!1,alpha:!1,na:typeof WebGL2RenderingContext<"u"?2:1}),B.h.GL.makeContextCurrent(L),D.g=4;break;case 7:if(B.l=document.createElement("canvas"),E=B.l.getContext("webgl2",{}),!E&&(E=B.l.getContext("webgl",{}),!E))return alert("Failed to create WebGL canvas context when passing video frame."),D.return();B.G=E,B.h.canvas=B.l,B.h.createContext(B.l,!0,!0,{});case 4:B.i=new B.h.SolutionWasm,B.$=!1,D.g=0}})}function Yn(B){var ge,Ne,He,vt,L,$,he,T;return Gn(function(K){if(K.g==1){if(B.g.graph&&B.g.graph.url&&B.Z===B.g.graph.url)return K.return();if(B.s=!0,!B.g.graph||!B.g.graph.url){K.g=2;return}return B.Z=B.g.graph.url,jt(K,qn(B,B.g.graph.url),3)}for(K.g!=2&&(ge=K.h,B.i.loadGraph(ge)),Ne=$e(Object.keys(B.C)),He=Ne.next();!He.done;He=Ne.next())vt=He.value,B.i.overrideFile(vt,B.C[vt]);if(B.C={},B.g.listeners)for(L=$e(B.g.listeners),$=L.next();!$.done;$=L.next())he=$.value,tr(B,he);T=B.j,B.j={},B.setOptions(T),K.g=0})}I.reset=function(){var B=this;return Gn(function(ge){B.i&&(B.i.reset(),B.o={},B.u={}),ge.g=0})},I.setOptions=function(B,ge){var Ne=this;if(ge=ge||this.g.options){for(var He=[],vt=[],L={},$=$e(Object.keys(B)),he=$.next();!he.done;L={R:L.R,S:L.S},he=$.next()){var T=he.value;T in this.j&&this.j[T]===B[T]||(this.j[T]=B[T],he=ge[T],he!==void 0&&(he.onChange&&(L.R=he.onChange,L.S=B[T],He.push(function(K){return function(){var ne;return Gn(function(E){if(E.g==1)return jt(E,K.R(K.S),2);ne=E.h,ne===!0&&(Ne.s=!0),E.g=0})}}(L))),he.graphOptionXref&&(T={valueNumber:he.type===1?B[T]:0,valueBoolean:he.type===0?B[T]:!1,valueString:he.type===2?B[T]:""},he=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),he.graphOptionXref),T),vt.push(he))))}(He.length!==0||vt.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(vt),this.A=(this.A===void 0?[]:this.A).concat(He))}};function Ar(B){var ge,Ne,He,vt,L,$,he;return Gn(function(T){switch(T.g){case 1:if(!B.s)return T.return();if(!B.A){T.g=2;break}ge=$e(B.A),Ne=ge.next();case 3:if(Ne.done){T.g=5;break}return He=Ne.value,jt(T,He(),4);case 4:Ne=ge.next(),T.g=3;break;case 5:B.A=void 0;case 2:if(B.B){for(vt=new B.h.GraphOptionChangeRequestList,L=$e(B.B),$=L.next();!$.done;$=L.next())he=$.value,vt.push_back(he);B.i.changeOptions(vt),vt.delete(),B.B=void 0}B.s=!1,T.g=0}})}I.initialize=function(){var B=this;return Gn(function(ge){return ge.g==1?jt(ge,kn(B),2):ge.g!=3?jt(ge,Yn(B),3):jt(ge,Ar(B),0)})};function qn(B,ge){var Ne,He;return Gn(function(vt){return ge in B.H?vt.return(B.H[ge]):(Ne=B.locateFile(ge,""),He=fetch(Ne).then(function(L){return L.arrayBuffer()}),B.H[ge]=He,vt.return(He))})}I.overrideFile=function(B,ge){this.i?this.i.overrideFile(B,ge):this.C[B]=ge},I.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},I.send=function(B,ge){var Ne=this,He,vt,L,$,he,T,K,ne,E;return Gn(function(D){switch(D.g){case 1:return Ne.g.inputs?(He=1e3*(ge??performance.now()),jt(D,Ne.D,2)):D.return();case 2:return jt(D,Ne.initialize(),3);case 3:for(vt=new Ne.h.PacketDataList,L=$e(Object.keys(B)),$=L.next();!$.done;$=L.next())if(he=$.value,T=Ne.g.inputs[he]){e:{var J=B[he];switch(T.type){case"video":var se=Ne.o[T.stream];if(se||(se=new pn(Ne.h,Ne.G),Ne.o[T.stream]=se),se.l===0&&(se.l=se.h.createTexture()),typeof HTMLVideoElement<"u"&&J instanceof HTMLVideoElement)var Me=J.videoWidth,qe=J.videoHeight;else typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement?(Me=J.naturalWidth,qe=J.naturalHeight):(Me=J.width,qe=J.height);qe={glName:se.l,width:Me,height:qe},Me=se.g,Me.canvas.width=qe.width,Me.canvas.height=qe.height,Me.activeTexture(Me.TEXTURE0),se.h.bindTexture2d(se.l),Me.texImage2D(Me.TEXTURE_2D,0,Me.RGBA,Me.RGBA,Me.UNSIGNED_BYTE,J),se.h.bindTexture2d(0),se=qe;break e;case"detections":for(se=Ne.o[T.stream],se||(se=new ke(Ne.h),Ne.o[T.stream]=se),se.data||(se.data=new se.g.DetectionListData),se.data.reset(J.length),qe=0;qe<J.length;++qe){Me=J[qe];var ot=se.data,wt=ot.setBoundingBox,Gt=qe,Yt=Me.ea,Kt=new ve;if(gr(Kt,1,Yt.ka),gr(Kt,2,Yt.la),gr(Kt,3,Yt.height),gr(Kt,4,Yt.width),gr(Kt,5,Yt.rotation),gr(Kt,6,Yt.ia),Yt=Bt(Kt,st),wt.call(ot,Gt,Yt),Me.Y)for(ot=0;ot<Me.Y.length;++ot){Kt=Me.Y[ot];var fn=!!Kt.visibility;wt=se.data,Gt=wt.addNormalizedLandmark,Yt=qe,Kt=Object.assign(Object.assign({},Kt),{visibility:fn?Kt.visibility:0}),fn=new pi,gr(fn,1,Kt.x),gr(fn,2,Kt.y),gr(fn,3,Kt.z),Kt.visibility&&gr(fn,4,Kt.visibility),Kt=Bt(fn,bi),Gt.call(wt,Yt,Kt)}if(Me.V)for(ot=0;ot<Me.V.length;++ot)wt=se.data,Gt=wt.addClassification,Yt=qe,Kt=Me.V[ot],fn=new Tr,gr(fn,2,Kt.score),Kt.index&&gr(fn,1,Kt.index),Kt.label&&gr(fn,3,Kt.label),Kt.displayName&&gr(fn,4,Kt.displayName),Kt=Bt(fn,ar),Gt.call(wt,Yt,Kt)}se=se.data;break e;default:se={}}}switch(K=se,ne=T.stream,T.type){case"video":vt.pushTexture2d(Object.assign(Object.assign({},K),{stream:ne,timestamp:He}));break;case"detections":E=K,E.stream=ne,E.timestamp=He,vt.pushDetectionList(E);break;default:throw Error("Unknown input config type: '"+T.type+"'")}}return Ne.i.send(vt),jt(D,Ne.D,4);case 4:vt.delete(),D.g=0}})};function xn(B,ge,Ne){var He,vt,L,$,he,T,K,ne,E,D,J,se,Me,qe;return Gn(function(ot){switch(ot.g){case 1:if(!Ne)return ot.return(ge);for(He={},vt=0,L=$e(Object.keys(Ne)),$=L.next();!$.done;$=L.next())he=$.value,T=Ne[he],typeof T!="string"&&T.type==="texture"&&ge[T.stream]!==void 0&&++vt;1<vt&&(B.I=!1),K=$e(Object.keys(Ne)),$=K.next();case 2:if($.done){ot.g=4;break}if(ne=$.value,E=Ne[ne],typeof E=="string")return Me=He,qe=ne,jt(ot,zn(B,ne,ge[E]),14);if(D=ge[E.stream],E.type==="detection_list"){if(D){for(var wt=D.getRectList(),Gt=D.getLandmarksList(),Yt=D.getClassificationsList(),Kt=[],fn=0;fn<wt.size();++fn){var In=we(wt.get(fn),ve,st);In={ea:{ka:$r(In,1),la:$r(In,2),height:$r(In,3),width:$r(In,4),rotation:$r(In,5,0),ia:Qr(In,6)},Y:Ui(we(Gt.get(fn),zi,te),pi,1).map(kt),V:Ht(we(Yt.get(fn),wr,Br))},Kt.push(In)}wt=Kt}else wt=[];He[ne]=wt,ot.g=7;break}if(E.type==="proto_list"){if(D){for(wt=Array(D.size()),Gt=0;Gt<D.size();Gt++)wt[Gt]=D.get(Gt);D.delete()}else wt=[];He[ne]=wt,ot.g=7;break}if(D===void 0){ot.g=3;break}if(E.type==="float_list"){He[ne]=D,ot.g=7;break}if(E.type==="proto"){He[ne]=D,ot.g=7;break}if(E.type!=="texture")throw Error("Unknown output config type: '"+E.type+"'");return J=B.u[ne],J||(J=new pn(B.h,B.G),B.u[ne]=J),jt(ot,X(J,D,B.I),13);case 13:se=ot.h,He[ne]=se;case 7:E.transform&&He[ne]&&(He[ne]=E.transform(He[ne])),ot.g=3;break;case 14:Me[qe]=ot.h;case 3:$=K.next(),ot.g=2;break;case 4:return ot.return(He)}})}function zn(B,ge,Ne){var He;return Gn(function(vt){return typeof Ne=="number"||Ne instanceof Uint8Array||Ne instanceof B.h.Uint8BlobList?vt.return(Ne):Ne instanceof B.h.Texture2dDataOut?(He=B.u[ge],He||(He=new pn(B.h,B.G),B.u[ge]=He),vt.return(X(He,Ne,B.I))):vt.return(void 0)})}function tr(B,ge){for(var Ne=ge.name||"$",He=[].concat(lt(ge.wants)),vt=new B.h.StringList,L=$e(ge.wants),$=L.next();!$.done;$=L.next())vt.push_back($.value);L=B.h.PacketListener.implement({onResults:function(he){for(var T={},K=0;K<ge.wants.length;++K)T[He[K]]=he.get(K);var ne=B.listeners[Ne];ne&&(B.D=xn(B,T,ge.outs).then(function(E){E=ne(E);for(var D=0;D<ge.wants.length;++D){var J=T[He[D]];typeof J=="object"&&J.hasOwnProperty&&J.hasOwnProperty("delete")&&J.delete()}E&&(B.D=E)}))}}),B.i.attachMultiListener(vt,L),vt.delete()}I.onResults=function(B,ge){this.listeners[ge||"$"]=B},br("Solution",_t),br("OptionType",{BOOL:0,NUMBER:1,ma:2,0:"BOOL",1:"NUMBER",2:"STRING"});function lr(B){return B===void 0&&(B=0),B===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function hr(B){var ge=this;B=B||{},this.g=new _t({locateFile:B.locateFile,files:function(Ne){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:lr(Ne.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Qt},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Qt},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(Ne){return Ne.map(function(He){return Ht(we(He,wr,Br))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(Ne){var He,vt,L;return Gn(function($){return $.g==1?(He=lr(Ne),vt="third_party/mediapipe/modules/hand_landmark/"+He,jt($,qn(ge.g,He),2)):(L=$.h,ge.g.overrideFile(vt,L),$.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}I=hr.prototype,I.close=function(){return this.g.close(),n.resolve()},I.onResults=function(B){this.g.onResults(B)},I.initialize=function(){var B=this;return Gn(function(ge){return jt(ge,B.g.initialize(),0)})},I.reset=function(){this.g.reset()},I.send=function(B){var ge=this;return Gn(function(Ne){return jt(Ne,ge.g.send(B),0)})},I.setOptions=function(B){this.g.setOptions(B)},br("Hands",hr),br("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),br("VERSION","0.4.1646424915")}).call(da);var fa={};(function(){var I;function x(T){var K=0;return function(){return K<T.length?{done:!1,value:T[K++]}:{done:!0}}}var N=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,K,ne){return T==Array.prototype||T==Object.prototype||(T[K]=ne.value),T};function ie(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var K=0;K<T.length;++K){var ne=T[K];if(ne&&ne.Math==Math)return ne}throw Error("Cannot find global object")}var pe=ie(this);function Xe(T,K){if(K)e:{var ne=pe;T=T.split(".");for(var E=0;E<T.length-1;E++){var D=T[E];if(!(D in ne))break e;ne=ne[D]}T=T[T.length-1],E=ne[T],K=K(E),K!=E&&K!=null&&N(ne,T,{configurable:!0,writable:!0,value:K})}}Xe("Symbol",function(T){function K(J){if(this instanceof K)throw new TypeError("Symbol is not a constructor");return new ne(E+(J||"")+"_"+D++,J)}function ne(J,se){this.g=J,N(this,"description",{configurable:!0,writable:!0,value:se})}if(T)return T;ne.prototype.toString=function(){return this.g};var E="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",D=0;return K}),Xe("Symbol.iterator",function(T){if(T)return T;T=Symbol("Symbol.iterator");for(var K="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ne=0;ne<K.length;ne++){var E=pe[K[ne]];typeof E=="function"&&typeof E.prototype[T]!="function"&&N(E.prototype,T,{configurable:!0,writable:!0,value:function(){return rt(x(this))}})}return T});function rt(T){return T={next:T},T[Symbol.iterator]=function(){return this},T}function $e(T){var K=typeof Symbol<"u"&&Symbol.iterator&&T[Symbol.iterator];return K?K.call(T):{next:x(T)}}function lt(T){if(!(T instanceof Array)){T=$e(T);for(var K,ne=[];!(K=T.next()).done;)ne.push(K.value);T=ne}return T}var zt=typeof Object.create=="function"?Object.create:function(T){function K(){}return K.prototype=T,new K},ln;if(typeof Object.setPrototypeOf=="function")ln=Object.setPrototypeOf;else{var hn;e:{var ir={a:!0},ur={};try{ur.__proto__=ir,hn=ur.a;break e}catch{}hn=!1}ln=hn?function(T,K){if(T.__proto__=K,T.__proto__!==K)throw new TypeError(T+" is not extensible");return T}:null}var vn=ln;function Tn(T,K){if(T.prototype=zt(K.prototype),T.prototype.constructor=T,vn)vn(T,K);else for(var ne in K)if(ne!="prototype")if(Object.defineProperties){var E=Object.getOwnPropertyDescriptor(K,ne);E&&Object.defineProperty(T,ne,E)}else T[ne]=K[ne];T.da=K.prototype}function Ir(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Er(T){if(T.l)throw new TypeError("Generator is already running");T.l=!0}Ir.prototype.o=function(T){this.h=T};function zr(T,K){T.j={U:K,V:!0},T.g=T.m||T.s}Ir.prototype.return=function(T){this.j={return:T},this.g=this.s};function jt(T,K,ne){return T.g=ne,{value:K}}function Rs(T){this.g=new Ir,this.h=T}function ps(T,K){Er(T.g);var ne=T.g.i;return ne?Ni(T,"return"in ne?ne.return:function(E){return{value:E,done:!0}},K,T.g.return):(T.g.return(K),Ur(T))}function Ni(T,K,ne,E){try{var D=K.call(T.g.i,ne);if(!(D instanceof Object))throw new TypeError("Iterator result "+D+" is not an object");if(!D.done)return T.g.l=!1,D;var J=D.value}catch(se){return T.g.i=null,zr(T.g,se),Ur(T)}return T.g.i=null,E.call(T.g,J),Ur(T)}function Ur(T){for(;T.g.g;)try{var K=T.h(T.g);if(K)return T.g.l=!1,{value:K.value,done:!1}}catch(ne){T.g.h=void 0,zr(T.g,ne)}if(T.g.l=!1,T.g.j){if(K=T.g.j,T.g.j=null,K.V)throw K.U;return{value:K.return,done:!0}}return{value:void 0,done:!0}}function Za(T){this.next=function(K){return Er(T.g),T.g.i?K=Ni(T,T.g.i.next,K,T.g.o):(T.g.o(K),K=Ur(T)),K},this.throw=function(K){return Er(T.g),T.g.i?K=Ni(T,T.g.i.throw,K,T.g.o):(zr(T.g,K),K=Ur(T)),K},this.return=function(K){return ps(T,K)},this[Symbol.iterator]=function(){return this}}function ai(T){function K(E){return T.next(E)}function ne(E){return T.throw(E)}return new n(function(E,D){function J(se){se.done?E(se.value):n.resolve(se.value).then(K,ne).then(J,D)}J(T.next())})}function Gn(T){return ai(new Za(new Rs(T)))}Xe("Promise",function(T){function K(se){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Me=this.j();try{se(Me.resolve,Me.reject)}catch(qe){Me.reject(qe)}}function ne(){this.g=null}function E(se){return se instanceof K?se:new K(function(Me){Me(se)})}if(T)return T;ne.prototype.h=function(se){if(this.g==null){this.g=[];var Me=this;this.i(function(){Me.l()})}this.g.push(se)};var D=pe.setTimeout;ne.prototype.i=function(se){D(se,0)},ne.prototype.l=function(){for(;this.g&&this.g.length;){var se=this.g;this.g=[];for(var Me=0;Me<se.length;++Me){var qe=se[Me];se[Me]=null;try{qe()}catch(ot){this.j(ot)}}}this.g=null},ne.prototype.j=function(se){this.i(function(){throw se})},K.prototype.j=function(){function se(ot){return function(wt){qe||(qe=!0,ot.call(Me,wt))}}var Me=this,qe=!1;return{resolve:se(this.C),reject:se(this.l)}},K.prototype.C=function(se){if(se===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(se instanceof K)this.F(se);else{e:switch(typeof se){case"object":var Me=se!=null;break e;case"function":Me=!0;break e;default:Me=!1}Me?this.v(se):this.m(se)}},K.prototype.v=function(se){var Me=void 0;try{Me=se.then}catch(qe){this.l(qe);return}typeof Me=="function"?this.G(Me,se):this.m(se)},K.prototype.l=function(se){this.s(2,se)},K.prototype.m=function(se){this.s(1,se)},K.prototype.s=function(se,Me){if(this.h!=0)throw Error("Cannot settle("+se+", "+Me+"): Promise already settled in state"+this.h);this.h=se,this.i=Me,this.h===2&&this.D(),this.A()},K.prototype.D=function(){var se=this;D(function(){if(se.B()){var Me=pe.console;typeof Me<"u"&&Me.error(se.i)}},1)},K.prototype.B=function(){if(this.o)return!1;var se=pe.CustomEvent,Me=pe.Event,qe=pe.dispatchEvent;return typeof qe>"u"?!0:(typeof se=="function"?se=new se("unhandledrejection",{cancelable:!0}):typeof Me=="function"?se=new Me("unhandledrejection",{cancelable:!0}):(se=pe.document.createEvent("CustomEvent"),se.initCustomEvent("unhandledrejection",!1,!0,se)),se.promise=this,se.reason=this.i,qe(se))},K.prototype.A=function(){if(this.g!=null){for(var se=0;se<this.g.length;++se)J.h(this.g[se]);this.g=null}};var J=new ne;return K.prototype.F=function(se){var Me=this.j();se.J(Me.resolve,Me.reject)},K.prototype.G=function(se,Me){var qe=this.j();try{se.call(Me,qe.resolve,qe.reject)}catch(ot){qe.reject(ot)}},K.prototype.then=function(se,Me){function qe(Yt,Kt){return typeof Yt=="function"?function(fn){try{ot(Yt(fn))}catch(In){wt(In)}}:Kt}var ot,wt,Gt=new K(function(Yt,Kt){ot=Yt,wt=Kt});return this.J(qe(se,ot),qe(Me,wt)),Gt},K.prototype.catch=function(se){return this.then(void 0,se)},K.prototype.J=function(se,Me){function qe(){switch(ot.h){case 1:se(ot.i);break;case 2:Me(ot.i);break;default:throw Error("Unexpected state: "+ot.h)}}var ot=this;this.g==null?J.h(qe):this.g.push(qe),this.o=!0},K.resolve=E,K.reject=function(se){return new K(function(Me,qe){qe(se)})},K.race=function(se){return new K(function(Me,qe){for(var ot=$e(se),wt=ot.next();!wt.done;wt=ot.next())E(wt.value).J(Me,qe)})},K.all=function(se){var Me=$e(se),qe=Me.next();return qe.done?E([]):new K(function(ot,wt){function Gt(fn){return function(In){Yt[fn]=In,Kt--,Kt==0&&ot(Yt)}}var Yt=[],Kt=0;do Yt.push(void 0),Kt++,E(qe.value).J(Gt(Yt.length-1),wt),qe=Me.next();while(!qe.done)})},K});function xs(T,K){T instanceof String&&(T+="");var ne=0,E=!1,D={next:function(){if(!E&&ne<T.length){var J=ne++;return{value:K(J,T[J]),done:!1}}return E=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}var La=typeof Object.assign=="function"?Object.assign:function(T,K){for(var ne=1;ne<arguments.length;ne++){var E=arguments[ne];if(E)for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(T[D]=E[D])}return T};Xe("Object.assign",function(T){return T||La}),Xe("Object.is",function(T){return T||function(K,ne){return K===ne?K!==0||1/K===1/ne:K!==K&&ne!==ne}}),Xe("Array.prototype.includes",function(T){return T||function(K,ne){var E=this;E instanceof String&&(E=String(E));var D=E.length;for(ne=ne||0,0>ne&&(ne=Math.max(ne+D,0));ne<D;ne++){var J=E[ne];if(J===K||Object.is(J,K))return!0}return!1}}),Xe("String.prototype.includes",function(T){return T||function(K,ne){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(K instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(K,ne||0)!==-1}}),Xe("Array.prototype.keys",function(T){return T||function(){return xs(this,function(K){return K})}});var Zi=this||self;function br(T,K){T=T.split(".");var ne=Zi;T[0]in ne||typeof ne.execScript>"u"||ne.execScript("var "+T[0]);for(var E;T.length&&(E=T.shift());)T.length||K===void 0?ne[E]&&ne[E]!==Object.prototype[E]?ne=ne[E]:ne=ne[E]={}:ne[E]=K}function Xi(T){Zi.setTimeout(function(){throw T},0)}function ss(T){Xi(T)}function Fs(T,K){ss(Error("Invalid wire type: "+T+" (at position "+K+")"))}function oa(){ss(Error("Failed to read varint, encoding is invalid."))}function Hs(T,K){return K=String.fromCharCode.apply(null,K),T==null?K:T+K}var pa,gs=typeof TextDecoder<"u",Is,Ea=typeof TextEncoder<"u";function sa(T){if(Ea)T=(Is||(Is=new TextEncoder)).encode(T);else{var K=void 0;K=K===void 0?!1:K;for(var ne=0,E=new Uint8Array(3*T.length),D=0;D<T.length;D++){var J=T.charCodeAt(D);if(128>J)E[ne++]=J;else{if(2048>J)E[ne++]=J>>6|192;else{if(55296<=J&&57343>=J){if(56319>=J&&D<T.length){var se=T.charCodeAt(++D);if(56320<=se&&57343>=se){J=1024*(J-55296)+se-56320+65536,E[ne++]=J>>18|240,E[ne++]=J>>12&63|128,E[ne++]=J>>6&63|128,E[ne++]=J&63|128;continue}else D--}if(K)throw Error("Found an unpaired surrogate");J=65533}E[ne++]=J>>12|224,E[ne++]=J>>6&63|128}E[ne++]=J&63|128}}T=E.subarray(0,ne)}return T}var Yo={},Wo=null;function Ys(T){var K;K===void 0&&(K=0),Mi(),K=Yo[K];for(var ne=Array(Math.floor(T.length/3)),E=K[64]||"",D=0,J=0;D<T.length-2;D+=3){var se=T[D],Me=T[D+1],qe=T[D+2],ot=K[se>>2];se=K[(se&3)<<4|Me>>4],Me=K[(Me&15)<<2|qe>>6],qe=K[qe&63],ne[J++]=ot+se+Me+qe}switch(ot=0,qe=E,T.length-D){case 2:ot=T[D+1],qe=K[(ot&15)<<2]||E;case 1:T=T[D],ne[J]=K[T>>2]+K[(T&3)<<4|ot>>4]+qe+E}return ne.join("")}function Gs(T){var K=T.length,ne=3*K/4;ne%3?ne=Math.floor(ne):"=.".indexOf(T[K-1])!=-1&&(ne="=.".indexOf(T[K-2])!=-1?ne-2:ne-1);var E=new Uint8Array(ne),D=0;return di(T,function(J){E[D++]=J}),E.subarray(0,D)}function di(T,K){function ne(qe){for(;E<T.length;){var ot=T.charAt(E++),wt=Wo[ot];if(wt!=null)return wt;if(!/^[\s\xa0]*$/.test(ot))throw Error("Unknown base64 encoding at char: "+ot)}return qe}Mi();for(var E=0;;){var D=ne(-1),J=ne(0),se=ne(64),Me=ne(64);if(Me===64&&D===-1)break;K(D<<2|J>>4),se!=64&&(K(J<<4&240|se>>2),Me!=64&&K(se<<6&192|Me))}}function Mi(){if(!Wo){Wo={};for(var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),K=["+/=","+/","-_=","-_.","-_"],ne=0;5>ne;ne++){var E=T.concat(K[ne].split(""));Yo[ne]=E;for(var D=0;D<E.length;D++){var J=E[D];Wo[J]===void 0&&(Wo[J]=D)}}}}var Ko=typeof Uint8Array=="function",Jr;function Oi(T){if(this.g=T,T!==null&&T.length===0)throw Error("ByteString should be constructed with non-empty values")}Oi.prototype.toJSON=function(){if(this.g==null)var T="";else T=this.g,T=this.g=T==null||typeof T=="string"?T:Ko&&T instanceof Uint8Array?Ys(T):null;return T};var as=typeof Uint8Array.prototype.slice=="function";function eo(T,K,ne){return K===ne?Jr||(Jr=new Uint8Array(0)):as?T.slice(K,ne):new Uint8Array(T.subarray(K,ne))}var Dr=0,Ci=0;function Hi(T){if(T.constructor===Uint8Array)return T;if(T.constructor===ArrayBuffer)return new Uint8Array(T);if(T.constructor===Array)return new Uint8Array(T);if(T.constructor===String)return Gs(T);if(T.constructor===Oi){if(T.g==null)var K=Jr||(Jr=new Uint8Array(0));else{K=Uint8Array;var ne=T.g;ne=ne==null||Ko&&ne!=null&&ne instanceof Uint8Array?ne:typeof ne=="string"?Gs(ne):null,T=T.g=ne,K=new K(T)}return K}if(T instanceof Uint8Array)return new Uint8Array(T.buffer,T.byteOffset,T.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Nr(T,K){K=K===void 0?{}:K,K=K.u===void 0?!1:K.u,this.h=null,this.g=this.i=this.m=0,this.l=!1,this.u=K,T&&Fi(this,T)}function Fi(T,K){T.h=Hi(K),T.m=0,T.i=T.h.length,T.g=T.m}Nr.prototype.reset=function(){this.g=this.m};function Gr(T){for(var K=128,ne=0,E=0,D=0;4>D&&128<=K;D++)K=T.h[T.g++],ne|=(K&127)<<7*D;if(128<=K&&(K=T.h[T.g++],ne|=(K&127)<<28,E|=(K&127)>>4),128<=K)for(D=0;5>D&&128<=K;D++)K=T.h[T.g++],E|=(K&127)<<7*D+3;if(128>K)return T=ne>>>0,K=E>>>0,(E=K&2147483648)&&(T=~T+1>>>0,K=~K>>>0,T==0&&(K=K+1>>>0)),T=4294967296*K+(T>>>0),E?-T:T;T.l=!0,oa()}function vi(T){T.g>T.i&&(T.l=!0,ss(Error("Tried to read past the end of the data "+T.g+" > "+T.i)))}Nr.prototype.j=function(){var T=this.h,K=T[this.g],ne=K&127;return 128>K?(this.g+=1,vi(this),ne):(K=T[this.g+1],ne|=(K&127)<<7,128>K?(this.g+=2,vi(this),ne):(K=T[this.g+2],ne|=(K&127)<<14,128>K?(this.g+=3,vi(this),ne):(K=T[this.g+3],ne|=(K&127)<<21,128>K?(this.g+=4,vi(this),ne):(K=T[this.g+4],ne|=(K&15)<<28,128>K?(this.g+=5,vi(this),ne>>>0):(this.g+=5,128<=T[this.g++]&&128<=T[this.g++]&&128<=T[this.g++]&&128<=T[this.g++]&&128<=T[this.g++]?(this.l=!0,oa(),ne):(vi(this),ne))))))},Nr.prototype.o=function(){var T=this.h[this.g],K=this.h[this.g+1],ne=this.h[this.g+2],E=this.h[this.g+3];return this.g+=4,vi(this),ne=(T<<0|K<<8|ne<<16|E<<24)>>>0,T=2*(ne>>31)+1,K=ne>>>23&255,ne&=8388607,K==255?ne?NaN:1/0*T:K==0?T*Math.pow(2,-149)*ne:T*Math.pow(2,K-150)*(ne+Math.pow(2,23))};var Di=[];function qo(){this.g=new Uint8Array(64),this.h=0}function xi(T,K){if(!(T.h+1<T.g.length)){var ne=T.g;T.g=new Uint8Array(Math.ceil(1+2*T.g.length)),T.g.set(ne)}T.g[T.h++]=K}qo.prototype.length=function(){return this.h},qo.prototype.end=function(){var T=this.g,K=this.h;return this.h=0,eo(T,0,K)};function Mr(T,K){for(;127<K;)xi(T,K&127|128),K>>>=7;xi(T,K)}function Xo(T){var K={},ne=K.N===void 0?!1:K.N;this.m={u:K.u===void 0?!1:K.u},this.N=ne,K=this.m,Di.length?(ne=Di.pop(),K&&(ne.u=K.u),T&&Fi(ne,T),T=ne):T=new Nr(T,K),this.g=T,this.l=this.g.g,this.h=this.i=-1,this.j=!1}Xo.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function zo(T){var K=T.g;if((K=K.g==K.i)||(K=T.j)||(K=T.g,K=K.l||0>K.g||K.g>K.i),K)return!1;T.l=T.g.g;var ne=T.g.j();return K=ne>>>3,ne&=7,0<=ne&&5>=ne?(T.i=K,T.h=ne,!0):(T.j=!0,Fs(ne,T.l),!1)}function Gi(T){switch(T.h){case 0:if(T.h!=0)Gi(T);else e:{T=T.g;for(var K=T.g,ne=0;10>ne;ne++){if(!(T.h[K]&128)){T.g=K+1,vi(T);break e}K++}T.l=!0,oa()}break;case 1:T=T.g,T.g+=8,vi(T);break;case 2:T.h!=2?Gi(T):(K=T.g.j(),T=T.g,T.g+=K,vi(T));break;case 5:T=T.g,T.g+=4,vi(T);break;case 3:K=T.i;do{if(!zo(T)){T.j=!0,ss(Error("Unmatched start-group tag: stream EOF"));break}if(T.h==4){T.i!=K&&(T.j=!0,ss(Error("Unmatched end-group tag")));break}Gi(T)}while(1);break;default:T.j=!0,Fs(T.h,T.l)}}function Ms(T,K,ne){T.N||(T=eo(T.g.h,ne,T.g.g),(ne=K.o)?ne.push(T):K.o=[T])}function cs(T,K,ne){var E=T.g.i,D=T.g.j(),J=T.g.g+D;if(T.g.i=J,ne(K,T),ne=J-T.g.g,ne!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(D+" bytes, instead read "+(D-ne)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return T.g.g=J,T.g.i=E,K}function Jo(T,K,ne){var E=T.g.j();for(E=T.g.g+E;T.g.g<E;)ne.push(K.call(T.g))}var us=[];function Ei(){this.h=[],this.i=0,this.g=new qo}function Bi(T,K){K.length!==0&&(T.h.push(K),T.i+=K.length)}function Ti(T,K,ne){Mr(T.g,8*K+2),Mr(T.g,ne.length),Bi(T,T.g.end()),Bi(T,ne)}var _r=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function _o(T,K){Object.isFrozen(T)||(_r?T[_r]|=K:T.g!==void 0?T.g|=K:Object.defineProperties(T,{g:{value:K,configurable:!0,writable:!0,enumerable:!1}}))}function Hr(T){if(!T)return 0;var K;return _r?K=T[_r]:K=T.g,K??0}function Pr(T){return Array.isArray(T)&&_o(T,1),T}function ys(T){if(!Array.isArray(T))throw Error("cannot mark non-array as immutable");_o(T,2)}function fi(T){return T!==null&&typeof T=="object"&&T.constructor===Object}function gr(T){switch(typeof T){case"number":return isFinite(T)?T:String(T);case"object":return Ko&&T!=null&&T instanceof Uint8Array?Ys(T):T;default:return T}}function _n(T,K){if(T!=null)return Array.isArray(T)||fi(T)?$r(T,K):K(T)}function $r(T,K){if(Array.isArray(T)){for(var ne=Array(T.length),E=0;E<T.length;E++)ne[E]=_n(T[E],K);return Hr(T)&1&&Pr(ne),ne}ne={};for(E in T)ne[E]=_n(T[E],K);return ne}var Ui;function Yr(T,K,ne){var E=Ui;Ui=null,T||(T=E),E=this.constructor.ba,T||(T=E?[E]:[]),this.j=(E?0:-1)-(this.constructor.$||0),this.m=this.g=null,this.h=T;e:{if(E=this.h.length,T=E-1,E&&(E=this.h[T],fi(E))){this.l=T-this.j,this.i=E;break e}K!==void 0&&-1<K?(this.l=Math.max(K,T+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(ne)for(K=0;K<ne.length;K++)T=ne[K],T<this.l?(T+=this.j,(E=this.h[T])?Pr(E):this.h[T]=Qr):(qt(this),(E=this.i[T])?Pr(E):this.i[T]=Qr)}var Qr=Object.freeze(Pr([]));function qt(T){var K=T.l+T.j;T.h[K]||(T.i=T.h[K]={})}function an(T,K,ne){return K===-1?null:ne!==void 0&&ne||K>=T.l?T.i?T.i[K]:void 0:T.h[K+T.j]}function bn(T,K,ne){ne=ne===void 0?!0:ne;var E=E===void 0?!1:E,D=an(T,K,E);return D==null&&(D=Qr),D===Qr?(D=Pr([]),nr(T,K,D,E)):ne&&Array.isArray(D)&&Hr(D)&2&&(D=D.slice(),nr(T,K,D,E)),D}function Wr(T){var K=bn(T,3,!1);if(T.m||(T.m={}),!T.m[3]){for(var ne=0;ne<K.length;ne++)K[ne]=+K[ne];T.m[3]=!0}return K}function si(T,K,ne){return T=an(T,K),T??ne}function ni(T,K,ne){return T=an(T,K),T=T==null?T:+T,T??(ne===void 0?0:ne)}function nr(T,K,ne,E){E!==void 0&&E||K>=T.l?(qt(T),T.i[K]=ne):T.h[K+T.j]=ne}function hi(T,K,ne){if(ne===-1)return null;T.g||(T.g={});var E=T.g[ne];if(E)return E;var D=an(T,ne,!1);return D==null?E:(K=new K(D),T.g[ne]=K)}function Yi(T,K,ne){T.g||(T.g={});var E=T.g[ne];if(!E){var D=bn(T,ne,!1);E=[];for(var J=Array.isArray(D)?!!(Hr(D)&2):!1,se=0;se<D.length;se++)E[se]=new K(D[se]),J&&ys(E[se].h);J&&(ys(E),Object.freeze(E)),T.g[ne]=E}return E}function es(T,K,ne,E,D){var J=Yi(T,E,K);ne=ne||new E,T=bn(T,K),D!=null?(J.splice(D,0,ne),T.splice(D,0,ts(ne))):(J.push(ne),T.push(ts(ne)))}Yr.prototype.toJSON=function(){var T=ts(this);return $r(T,gr)};function ts(T){if(T.g)for(var K in T.g){var ne=T.g[K];if(Array.isArray(ne))for(var E=0;E<ne.length;E++)ne[E]&&ts(ne[E]);else ne&&ts(ne)}return T.h}Yr.prototype.toString=function(){return ts(this).toString()};function vs(T,K){if(T=T.o){Bi(K,K.g.end());for(var ne=0;ne<T.length;ne++)Bi(K,T[ne])}}function ws(T){var K=T[0];switch(T.length){case 2:var ne=T[1];return function(qe,ot,wt){return K(qe,ot,wt,ne)};case 3:var E=T[1],D=T[2];return function(qe,ot,wt){return K(qe,ot,wt,E,D)};case 4:var J=T[1],se=T[2],Me=T[3];return function(qe,ot,wt){return K(qe,ot,wt,J,se,Me)};default:throw Error("unsupported number of parameters, expected [2-4], got "+T.length)}}function ji(T,K,ne){for(;zo(K)&&K.h!=4;){var E=K.i,D=ne[E];if(D){if(Array.isArray(D)&&(D=ne[E]=ws(D)),!D(K,T,E)){E=K,D=T;var J=E.l;Gi(E),Ms(E,D,J)}}else E=K,D=T,J=E.l,Gi(E),Ms(E,D,J)}return T}function ns(T,K){var ne=new Ei;if(K(T,ne),T=ne.i+ne.g.length(),T===0)ne=new Uint8Array(0);else{T=new Uint8Array(T);for(var E=ne.h,D=E.length,J=K=0;J<D;J++){var se=E[J];se.length!==0&&(T.set(se,K),K+=se.length)}E=ne.g,D=E.h,D!==0&&(T.set(E.g.subarray(0,D),K),E.h=0),ne.h=[T],ne=T}return ne}function Fa(T,K,ne){if(us.length){var E=us.pop();T&&(Fi(E.g,T),E.i=-1,E.h=-1),T=E}else T=new Xo(T);try{return ne(new K,T)}finally{K=T.g,K.h=null,K.m=0,K.i=0,K.g=0,K.l=!1,K.u=!1,T.i=-1,T.h=-1,T.j=!1,100>us.length&&us.push(T)}}function rs(T,K,ne){if(K=an(K,ne),K!=null){Mr(T.g,8*ne+5),T=T.g;var E=K;E=(ne=0>E?1:0)?-E:E,E===0?0<1/E?Dr=Ci=0:(Ci=0,Dr=2147483648):isNaN(E)?(Ci=0,Dr=2147483647):34028234663852886e22<E?(Ci=0,Dr=(ne<<31|2139095040)>>>0):11754943508222875e-54>E?(E=Math.round(E/Math.pow(2,-149)),Ci=0,Dr=(ne<<31|E)>>>0):(K=Math.floor(Math.log(E)/Math.LN2),E*=Math.pow(2,-K),E=Math.round(8388608*E),16777216<=E&&++K,Ci=0,Dr=(ne<<31|K+127<<23|E&8388607)>>>0),ne=Dr,xi(T,ne>>>0&255),xi(T,ne>>>8&255),xi(T,ne>>>16&255),xi(T,ne>>>24&255)}}function Ki(T,K,ne){return T.h!==5?!1:(nr(K,ne,T.g.o()),!0)}function Ns(T,K,ne){return T.h!==5&&T.h!==2?!1:(K=bn(K,ne),T.h==2?Jo(T,Nr.prototype.o,K):K.push(T.g.o()),!0)}function Ks(T,K,ne){return T.h!==0?!1:(nr(K,ne,Gr(T.g)),!0)}function Ro(T,K,ne){return T.h!==0?!1:(nr(K,ne,T.g.j()),!0)}function Ta(T,K,ne){if(T.h!==2)return!1;var E=T.g.j();T=T.g;var D=T.g;T.g+=E,vi(T),T=T.h;var J;if(gs)(J=pa)||(J=pa=new TextDecoder("utf-8",{fatal:!1})),J=J.decode(T.subarray(D,D+E));else{E=D+E;for(var se=[],Me=null,qe,ot,wt;D<E;)qe=T[D++],128>qe?se.push(qe):224>qe?D>=E?se.push(65533):(ot=T[D++],194>qe||(ot&192)!==128?(D--,se.push(65533)):se.push((qe&31)<<6|ot&63)):240>qe?D>=E-1?se.push(65533):(ot=T[D++],(ot&192)!==128||qe===224&&160>ot||qe===237&&160<=ot||((J=T[D++])&192)!==128?(D--,se.push(65533)):se.push((qe&15)<<12|(ot&63)<<6|J&63)):244>=qe?D>=E-2?se.push(65533):(ot=T[D++],(ot&192)!==128||(qe<<28)+(ot-144)>>30||((J=T[D++])&192)!==128||((wt=T[D++])&192)!==128?(D--,se.push(65533)):(qe=(qe&7)<<18|(ot&63)<<12|(J&63)<<6|wt&63,qe-=65536,se.push((qe>>10&1023)+55296,(qe&1023)+56320))):se.push(65533),8192<=se.length&&(Me=Hs(Me,se),se.length=0);J=Hs(Me,se)}return nr(K,ne,J),!0}function is(T,K,ne,E,D){if(T.h!==2)return!1;T=cs(T,new E,D);var J=J===void 0?!1:J;return K.g||(K.g={}),E=T&&ts(T),K.g[ne]=T,nr(K,ne,E,J),!0}function Zs(T,K,ne,E,D){return T.h!==2?!1:(T=cs(T,new E,D),es(K,ne,T,E,void 0),!0)}function $s(T,K,ne){return T.h!==0&&T.h!==2?!1:(K=bn(K,ne),T.h==2?Jo(T,Nr.prototype.j,K):K.push(T.g.j()),!0)}function Aa(T,K,ne){return T.h!==0?!1:(nr(K,ne,Gr(T.g)),!0)}function ls(T){Yr.call(this,T,-1,Ka)}var Qs;Tn(ls,Yr),ls.prototype.getRows=function(){return an(this,1)},ls.prototype.getCols=function(){return an(this,2)},ls.prototype.getPackedDataList=function(){return Wr(this)},ls.prototype.getLayout=function(){return si(this,4,0)};function Ya(T,K){return ji(T,K,Qs||(Qs={1:Ro,2:Ro,3:Ns,4:Aa}))}var Ka=[3];function qs(T){Yr.call(this,T)}var aa;Tn(qs,Yr);function oe(T,K){var ne=an(T,1);if(ne!=null&&ne!=null){Mr(K.g,8);var E=K.g;if(0<=ne)Mr(E,ne);else{for(var D=0;9>D;D++)xi(E,ne&127|128),ne>>=7;xi(E,1)}}rs(K,T,2),E=an(T,3),E!=null&&Ti(K,3,sa(E)),E=an(T,4),E!=null&&Ti(K,4,sa(E)),vs(T,K)}function Ie(T,K){return ji(T,K,aa||(aa={1:Ro,2:Ki,3:Ta,4:Ta}))}function we(T){Yr.call(this,T,-1,dn)}var St;Tn(we,Yr),we.prototype.addClassification=function(T,K){return es(this,1,T,qs,K),this};function Bt(T,K){return ji(T,K,St||(St={1:[Zs,qs,Ie]}))}var dn=[1];function Xt(T){Yr.call(this,T)}var sn;Tn(Xt,Yr);function An(T,K){rs(K,T,1),rs(K,T,2),rs(K,T,3),rs(K,T,4),rs(K,T,5),vs(T,K)}function Qn(T,K){return ji(T,K,sn||(sn={1:Ki,2:Ki,3:Ki,4:Ki,5:Ki}))}function Or(T){Yr.call(this,T,-1,Tr)}var Sr;Tn(Or,Yr);function jr(T,K){return ji(T,K,Sr||(Sr={1:[Zs,Xt,Qn]}))}var Tr=[1];function ar(T){Yr.call(this,T)}var wr;Tn(ar,Yr);function Br(T,K){rs(K,T,1),rs(K,T,2),rs(K,T,3),rs(K,T,4),rs(K,T,5);var ne=an(T,6);if(ne!=null&&ne!=null){Mr(K.g,48);var E=K.g,D=ne;ne=0>D,D=Math.abs(D);var J=D>>>0;for(D=Math.floor((D-J)/4294967296),D>>>=0,ne&&(D=~D>>>0,J=(~J>>>0)+1,4294967295<J&&(J=0,D++,4294967295<D&&(D=0))),Dr=J,Ci=D,ne=Dr,J=Ci;0<J||127<ne;)xi(E,ne&127|128),ne=(ne>>>7|J<<25)>>>0,J>>>=7;xi(E,ne)}vs(T,K)}function ri(T,K){return ji(T,K,wr||(wr={1:Ki,2:Ki,3:Ki,4:Ki,5:Ki,6:Ks}))}function pi(T){Yr.call(this,T,-1,te)}var bi;Tn(pi,Yr),pi.prototype.getVertexType=function(){return si(this,1,0)},pi.prototype.getPrimitiveType=function(){return si(this,2,0)},pi.prototype.getVertexBufferList=function(){return Wr(this)},pi.prototype.getIndexBufferList=function(){return bn(this,4)};function zi(T,K){return ji(T,K,bi||(bi={1:Aa,2:Aa,3:Ns,4:$s}))}var te=[3,4];function le(T){Yr.call(this,T)}var ve;Tn(le,Yr),le.prototype.getMesh=function(){return hi(this,pi,1)},le.prototype.getPoseTransformMatrix=function(){return hi(this,ls,2)};function st(T,K){return ji(T,K,ve||(ve={1:[is,pi,zi],2:[is,ls,Ya]}))}var Vt=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Ht=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],kt=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Qt=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],pn=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],X=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],be=[].concat(lt(Vt),lt(Ht),lt(kt),lt(Qt),lt(pn),lt(X));function ke(T,K,ne){if(ne=T.createShader(ne===0?T.VERTEX_SHADER:T.FRAGMENT_SHADER),T.shaderSource(ne,K),T.compileShader(ne),!T.getShaderParameter(ne,T.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+T.getShaderInfoLog(ne));return ne}function ze(T){return Yi(T,qs,1).map(function(K){return{index:si(K,1,0),score:ni(K,2),label:an(K,3)!=null?si(K,3,""):void 0,displayName:an(K,4)!=null?si(K,4,""):void 0}})}function yt(T){return{x:ni(T,1),y:ni(T,2),z:ni(T,3),visibility:an(T,4)!=null?ni(T,4):void 0}}function Nt(T){return Yi(Fa(T,Or,jr),Xt,1).map(yt)}function Ot(T,K){this.h=T,this.g=K,this.l=0}function rn(T,K,ne){return _t(T,K),typeof T.g.canvas.transferToImageBitmap=="function"?n.resolve(T.g.canvas.transferToImageBitmap()):ne?n.resolve(T.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(T.g.canvas):(T.i===void 0&&(T.i=document.createElement("canvas")),new n(function(E){T.i.height=T.g.canvas.height,T.i.width=T.g.canvas.width,T.i.getContext("2d",{}).drawImage(T.g.canvas,0,0,T.g.canvas.width,T.g.canvas.height),E(T.i)}))}function _t(T,K){var ne=T.g;if(T.m===void 0){var E=ke(ne,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),D=ke(ne,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),J=ne.createProgram();if(ne.attachShader(J,E),ne.attachShader(J,D),ne.linkProgram(J),!ne.getProgramParameter(J,ne.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+ne.getProgramInfoLog(J));E=T.m=J,ne.useProgram(E),D=ne.getUniformLocation(E,"sampler0"),T.j={I:ne.getAttribLocation(E,"aVertex"),H:ne.getAttribLocation(E,"aTex"),ca:D},T.s=ne.createBuffer(),ne.bindBuffer(ne.ARRAY_BUFFER,T.s),ne.enableVertexAttribArray(T.j.I),ne.vertexAttribPointer(T.j.I,2,ne.FLOAT,!1,0,0),ne.bufferData(ne.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),ne.STATIC_DRAW),ne.bindBuffer(ne.ARRAY_BUFFER,null),T.o=ne.createBuffer(),ne.bindBuffer(ne.ARRAY_BUFFER,T.o),ne.enableVertexAttribArray(T.j.H),ne.vertexAttribPointer(T.j.H,2,ne.FLOAT,!1,0,0),ne.bufferData(ne.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),ne.STATIC_DRAW),ne.bindBuffer(ne.ARRAY_BUFFER,null),ne.uniform1i(D,0)}E=T.j,ne.useProgram(T.m),ne.canvas.width=K.width,ne.canvas.height=K.height,ne.viewport(0,0,K.width,K.height),ne.activeTexture(ne.TEXTURE0),T.h.bindTexture2d(K.glName),ne.enableVertexAttribArray(E.I),ne.bindBuffer(ne.ARRAY_BUFFER,T.s),ne.vertexAttribPointer(E.I,2,ne.FLOAT,!1,0,0),ne.enableVertexAttribArray(E.H),ne.bindBuffer(ne.ARRAY_BUFFER,T.o),ne.vertexAttribPointer(E.H,2,ne.FLOAT,!1,0,0),ne.bindFramebuffer(ne.DRAW_FRAMEBUFFER?ne.DRAW_FRAMEBUFFER:ne.FRAMEBUFFER,null),ne.clearColor(0,0,0,0),ne.clear(ne.COLOR_BUFFER_BIT),ne.colorMask(!0,!0,!0,!0),ne.drawArrays(ne.TRIANGLE_FAN,0,4),ne.disableVertexAttribArray(E.I),ne.disableVertexAttribArray(E.H),ne.bindBuffer(ne.ARRAY_BUFFER,null),T.h.bindTexture2d(0)}function kn(T){this.g=T}var Yn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ar(T,K){return K+T}function qn(T,K){window[T]=K}function xn(T){var K=document.createElement("script");return K.setAttribute("src",T),K.setAttribute("crossorigin","anonymous"),new n(function(ne){K.addEventListener("load",function(){ne()},!1),K.addEventListener("error",function(){ne()},!1),document.body.appendChild(K)})}function zn(){return Gn(function(T){switch(T.g){case 1:return T.m=2,jt(T,WebAssembly.instantiate(Yn),4);case 4:T.g=3,T.m=0;break;case 2:return T.m=0,T.j=null,T.return(!1);case 3:return T.return(!0)}})}function tr(T){if(this.g=T,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=T&&T.locateFile||Ar,typeof window=="object")var K=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")K=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=K,T.options){K=$e(Object.keys(T.options));for(var ne=K.next();!ne.done;ne=K.next()){ne=ne.value;var E=T.options[ne].default;E!==void 0&&(this.j[ne]=typeof E=="function"?E():E)}}}I=tr.prototype,I.close=function(){return this.i&&this.i.delete(),n.resolve()};function lr(T){var K,ne,E,D,J,se,Me,qe,ot,wt,Gt;return Gn(function(Yt){switch(Yt.g){case 1:return T.R?(K=T.g.files===void 0?[]:typeof T.g.files=="function"?T.g.files(T.j):T.g.files,jt(Yt,zn(),2)):Yt.return();case 2:if(ne=Yt.h,typeof window=="object")return qn("createMediapipeSolutionsWasm",{locateFile:T.locateFile}),qn("createMediapipeSolutionsPackedAssets",{locateFile:T.locateFile}),se=K.filter(function(Kt){return Kt.data!==void 0}),Me=K.filter(function(Kt){return Kt.data===void 0}),qe=n.all(se.map(function(Kt){var fn=ge(T,Kt.url);if(Kt.path!==void 0){var In=Kt.path;fn=fn.then(function(wn){return T.overrideFile(In,wn),n.resolve(wn)})}return fn})),ot=n.all(Me.map(function(Kt){return Kt.simd===void 0||Kt.simd&&ne||!Kt.simd&&!ne?xn(T.locateFile(Kt.url,T.S)):n.resolve()})).then(function(){var Kt,fn,In;return Gn(function(wn){if(wn.g==1)return Kt=window.createMediapipeSolutionsWasm,fn=window.createMediapipeSolutionsPackedAssets,In=T,jt(wn,Kt(fn),2);In.h=wn.h,wn.g=0})}),wt=function(){return Gn(function(Kt){return T.g.graph&&T.g.graph.url?Kt=jt(Kt,ge(T,T.g.graph.url),0):(Kt.g=0,Kt=void 0),Kt})}(),jt(Yt,n.all([ot,qe,wt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return E=K.filter(function(Kt){return Kt.simd===void 0||Kt.simd&&ne||!Kt.simd&&!ne}).map(function(Kt){return T.locateFile(Kt.url,T.S)}),importScripts.apply(null,lt(E)),D=T,jt(Yt,createMediapipeSolutionsWasm(Module),6);case 6:D.h=Yt.h,T.l=new OffscreenCanvas(1,1),T.h.canvas=T.l,J=T.h.GL.createContext(T.l,{antialias:!1,alpha:!1,aa:typeof WebGL2RenderingContext<"u"?2:1}),T.h.GL.makeContextCurrent(J),Yt.g=4;break;case 7:if(T.l=document.createElement("canvas"),Gt=T.l.getContext("webgl2",{}),!Gt&&(Gt=T.l.getContext("webgl",{}),!Gt))return alert("Failed to create WebGL canvas context when passing video frame."),Yt.return();T.D=Gt,T.h.canvas=T.l,T.h.createContext(T.l,!0,!0,{});case 4:T.i=new T.h.SolutionWasm,T.R=!1,Yt.g=0}})}function hr(T){var K,ne,E,D,J,se,Me,qe;return Gn(function(ot){if(ot.g==1){if(T.g.graph&&T.g.graph.url&&T.P===T.g.graph.url)return ot.return();if(T.o=!0,!T.g.graph||!T.g.graph.url){ot.g=2;return}return T.P=T.g.graph.url,jt(ot,ge(T,T.g.graph.url),3)}for(ot.g!=2&&(K=ot.h,T.i.loadGraph(K)),ne=$e(Object.keys(T.B)),E=ne.next();!E.done;E=ne.next())D=E.value,T.i.overrideFile(D,T.B[D]);if(T.B={},T.g.listeners)for(J=$e(T.g.listeners),se=J.next();!se.done;se=J.next())Me=se.value,vt(T,Me);qe=T.j,T.j={},T.setOptions(qe),ot.g=0})}I.reset=function(){var T=this;return Gn(function(K){T.i&&(T.i.reset(),T.m={},T.s={}),K.g=0})},I.setOptions=function(T,K){var ne=this;if(K=K||this.g.options){for(var E=[],D=[],J={},se=$e(Object.keys(T)),Me=se.next();!Me.done;J={K:J.K,L:J.L},Me=se.next()){var qe=Me.value;qe in this.j&&this.j[qe]===T[qe]||(this.j[qe]=T[qe],Me=K[qe],Me!==void 0&&(Me.onChange&&(J.K=Me.onChange,J.L=T[qe],E.push(function(ot){return function(){var wt;return Gn(function(Gt){if(Gt.g==1)return jt(Gt,ot.K(ot.L),2);wt=Gt.h,wt===!0&&(ne.o=!0),Gt.g=0})}}(J))),Me.graphOptionXref&&(qe={valueNumber:Me.type===1?T[qe]:0,valueBoolean:Me.type===0?T[qe]:!1,valueString:Me.type===2?T[qe]:""},Me=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Me.graphOptionXref),qe),D.push(Me))))}(E.length!==0||D.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(D),this.v=(this.v===void 0?[]:this.v).concat(E))}};function B(T){var K,ne,E,D,J,se,Me;return Gn(function(qe){switch(qe.g){case 1:if(!T.o)return qe.return();if(!T.v){qe.g=2;break}K=$e(T.v),ne=K.next();case 3:if(ne.done){qe.g=5;break}return E=ne.value,jt(qe,E(),4);case 4:ne=K.next(),qe.g=3;break;case 5:T.v=void 0;case 2:if(T.A){for(D=new T.h.GraphOptionChangeRequestList,J=$e(T.A),se=J.next();!se.done;se=J.next())Me=se.value,D.push_back(Me);T.i.changeOptions(D),D.delete(),T.A=void 0}T.o=!1,qe.g=0}})}I.initialize=function(){var T=this;return Gn(function(K){return K.g==1?jt(K,lr(T),2):K.g!=3?jt(K,hr(T),3):jt(K,B(T),0)})};function ge(T,K){var ne,E;return Gn(function(D){return K in T.F?D.return(T.F[K]):(ne=T.locateFile(K,""),E=fetch(ne).then(function(J){return J.arrayBuffer()}),T.F[K]=E,D.return(E))})}I.overrideFile=function(T,K){this.i?this.i.overrideFile(T,K):this.B[T]=K},I.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},I.send=function(T,K){var ne=this,E,D,J,se,Me,qe,ot,wt,Gt;return Gn(function(Yt){switch(Yt.g){case 1:return ne.g.inputs?(E=1e3*(K??performance.now()),jt(Yt,ne.C,2)):Yt.return();case 2:return jt(Yt,ne.initialize(),3);case 3:for(D=new ne.h.PacketDataList,J=$e(Object.keys(T)),se=J.next();!se.done;se=J.next())if(Me=se.value,qe=ne.g.inputs[Me]){e:{var Kt=T[Me];switch(qe.type){case"video":var fn=ne.m[qe.stream];if(fn||(fn=new Ot(ne.h,ne.D),ne.m[qe.stream]=fn),fn.l===0&&(fn.l=fn.h.createTexture()),typeof HTMLVideoElement<"u"&&Kt instanceof HTMLVideoElement)var In=Kt.videoWidth,wn=Kt.videoHeight;else typeof HTMLImageElement<"u"&&Kt instanceof HTMLImageElement?(In=Kt.naturalWidth,wn=Kt.naturalHeight):(In=Kt.width,wn=Kt.height);wn={glName:fn.l,width:In,height:wn},In=fn.g,In.canvas.width=wn.width,In.canvas.height=wn.height,In.activeTexture(In.TEXTURE0),fn.h.bindTexture2d(fn.l),In.texImage2D(In.TEXTURE_2D,0,In.RGBA,In.RGBA,In.UNSIGNED_BYTE,Kt),fn.h.bindTexture2d(0),fn=wn;break e;case"detections":for(fn=ne.m[qe.stream],fn||(fn=new kn(ne.h),ne.m[qe.stream]=fn),fn.data||(fn.data=new fn.g.DetectionListData),fn.data.reset(Kt.length),wn=0;wn<Kt.length;++wn){In=Kt[wn];var Xn=fn.data,Wn=Xn.setBoundingBox,Fr=wn,qr=In.T,ei=new ar;if(nr(ei,1,qr.X),nr(ei,2,qr.Y),nr(ei,3,qr.height),nr(ei,4,qr.width),nr(ei,5,qr.rotation),nr(ei,6,qr.W),qr=ns(ei,Br),Wn.call(Xn,Fr,qr),In.O)for(Xn=0;Xn<In.O.length;++Xn){ei=In.O[Xn];var $i=!!ei.visibility;Wn=fn.data,Fr=Wn.addNormalizedLandmark,qr=wn,ei=Object.assign(Object.assign({},ei),{visibility:$i?ei.visibility:0}),$i=new Xt,nr($i,1,ei.x),nr($i,2,ei.y),nr($i,3,ei.z),ei.visibility&&nr($i,4,ei.visibility),ei=ns($i,An),Fr.call(Wn,qr,ei)}if(In.M)for(Xn=0;Xn<In.M.length;++Xn)Wn=fn.data,Fr=Wn.addClassification,qr=wn,ei=In.M[Xn],$i=new qs,nr($i,2,ei.score),ei.index&&nr($i,1,ei.index),ei.label&&nr($i,3,ei.label),ei.displayName&&nr($i,4,ei.displayName),ei=ns($i,oe),Fr.call(Wn,qr,ei)}fn=fn.data;break e;default:fn={}}}switch(ot=fn,wt=qe.stream,qe.type){case"video":D.pushTexture2d(Object.assign(Object.assign({},ot),{stream:wt,timestamp:E}));break;case"detections":Gt=ot,Gt.stream=wt,Gt.timestamp=E,D.pushDetectionList(Gt);break;default:throw Error("Unknown input config type: '"+qe.type+"'")}}return ne.i.send(D),jt(Yt,ne.C,4);case 4:D.delete(),Yt.g=0}})};function Ne(T,K,ne){var E,D,J,se,Me,qe,ot,wt,Gt,Yt,Kt,fn,In,wn;return Gn(function(Xn){switch(Xn.g){case 1:if(!ne)return Xn.return(K);for(E={},D=0,J=$e(Object.keys(ne)),se=J.next();!se.done;se=J.next())Me=se.value,qe=ne[Me],typeof qe!="string"&&qe.type==="texture"&&K[qe.stream]!==void 0&&++D;1<D&&(T.G=!1),ot=$e(Object.keys(ne)),se=ot.next();case 2:if(se.done){Xn.g=4;break}if(wt=se.value,Gt=ne[wt],typeof Gt=="string")return In=E,wn=wt,jt(Xn,He(T,wt,K[Gt]),14);if(Yt=K[Gt.stream],Gt.type==="detection_list"){if(Yt){for(var Wn=Yt.getRectList(),Fr=Yt.getLandmarksList(),qr=Yt.getClassificationsList(),ei=[],$i=0;$i<Wn.size();++$i){var Ps=Fa(Wn.get($i),ar,ri);Ps={T:{X:ni(Ps,1),Y:ni(Ps,2),height:ni(Ps,3),width:ni(Ps,4),rotation:ni(Ps,5,0),W:si(Ps,6,0)},O:Nt(Fr.get($i)),M:ze(Fa(qr.get($i),we,Bt))},ei.push(Ps)}Wn=ei}else Wn=[];E[wt]=Wn,Xn.g=7;break}if(Gt.type==="proto_list"){if(Yt){for(Wn=Array(Yt.size()),Fr=0;Fr<Yt.size();Fr++)Wn[Fr]=Yt.get(Fr);Yt.delete()}else Wn=[];E[wt]=Wn,Xn.g=7;break}if(Yt===void 0){Xn.g=3;break}if(Gt.type==="float_list"){E[wt]=Yt,Xn.g=7;break}if(Gt.type==="proto"){E[wt]=Yt,Xn.g=7;break}if(Gt.type!=="texture")throw Error("Unknown output config type: '"+Gt.type+"'");return Kt=T.s[wt],Kt||(Kt=new Ot(T.h,T.D),T.s[wt]=Kt),jt(Xn,rn(Kt,Yt,T.G),13);case 13:fn=Xn.h,E[wt]=fn;case 7:Gt.transform&&E[wt]&&(E[wt]=Gt.transform(E[wt])),Xn.g=3;break;case 14:In[wn]=Xn.h;case 3:se=ot.next(),Xn.g=2;break;case 4:return Xn.return(E)}})}function He(T,K,ne){var E;return Gn(function(D){return typeof ne=="number"||ne instanceof Uint8Array||ne instanceof T.h.Uint8BlobList?D.return(ne):ne instanceof T.h.Texture2dDataOut?(E=T.s[K],E||(E=new Ot(T.h,T.D),T.s[K]=E),D.return(rn(E,ne,T.G))):D.return(void 0)})}function vt(T,K){for(var ne=K.name||"$",E=[].concat(lt(K.wants)),D=new T.h.StringList,J=$e(K.wants),se=J.next();!se.done;se=J.next())D.push_back(se.value);J=T.h.PacketListener.implement({onResults:function(Me){for(var qe={},ot=0;ot<K.wants.length;++ot)qe[E[ot]]=Me.get(ot);var wt=T.listeners[ne];wt&&(T.C=Ne(T,qe,K.outs).then(function(Gt){Gt=wt(Gt);for(var Yt=0;Yt<K.wants.length;++Yt){var Kt=qe[E[Yt]];typeof Kt=="object"&&Kt.hasOwnProperty&&Kt.hasOwnProperty("delete")&&Kt.delete()}Gt&&(T.C=Gt)}))}}),T.i.attachMultiListener(D,J),D.delete()}I.onResults=function(T,K){this.listeners[K||"$"]=T},br("Solution",tr),br("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"});function L(T){return T.map($)}function $(T){T=Fa(T,le,st);var K=T.getMesh();if(!K)return T;var ne=new Float32Array(K.getVertexBufferList());K.getVertexBufferList=function(){return ne};var E=new Uint32Array(K.getIndexBufferList());return K.getIndexBufferList=function(){return E},T}function he(T){var K=this;T=T||{},this.g=new tr({locateFile:T.locateFile,files:[{url:"holistic_solution_packed_assets_loader.js"},{simd:!1,url:"holistic_solution_wasm_bin.js"},{simd:!0,url:"holistic_solution_simd_wasm_bin.js"}],graph:{url:"holistic.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:"left_hand_landmarks right_hand_landmarks face_landmarks pose_landmarks world_landmarks segmentation_mask image_transformed multi_face_geometry".split(" "),outs:{image:{type:"texture",stream:"image_transformed"},leftHandLandmarks:{type:"proto",stream:"left_hand_landmarks",transform:Nt},rightHandLandmarks:{type:"proto",stream:"right_hand_landmarks",transform:Nt},faceLandmarks:{type:"proto",stream:"face_landmarks",transform:Nt},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Nt},ea:{type:"proto",stream:"world_landmarks",transform:Nt},segmentationMask:{type:"texture",stream:"segmentation_mask"},multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:L}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,default:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(ne){var E,D,J,se;return Gn(function(Me){if(Me.g==1){switch(E="",ne){case 1:E="pose_landmark_full.tflite";break;case 2:E="pose_landmark_heavy.tflite";break;default:E="pose_landmark_lite.tflite"}return D="third_party/mediapipe/modules/pose_landmark/"+E,J=K.g.locateFile(E,""),jt(Me,fetch(J),3)}return Me.g!=2?jt(Me,Me.h.arrayBuffer(),2):(se=Me.h,K.g.overrideFile(D,se),jt(Me,K.g.reset(),0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},refineFaceLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineFaceLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"holisticlandmarkgpu__poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}})}I=he.prototype,I.close=function(){return this.g.close(),n.resolve()},I.onResults=function(T){this.g.onResults(T)},I.initialize=function(){var T=this;return Gn(function(K){return jt(K,T.g.initialize(),0)})},I.reset=function(){this.g.reset()},I.send=function(T){var K=this;return Gn(function(ne){return jt(ne,K.g.send(T),0)})},I.setOptions=function(T){this.g.setOptions(T)},br("Holistic",he),br("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),br("FACEMESH_LIPS",Vt),br("FACEMESH_LEFT_EYE",Ht),br("FACEMESH_LEFT_EYEBROW",kt),br("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),br("FACEMESH_RIGHT_EYE",Qt),br("FACEMESH_RIGHT_EYEBROW",pn),br("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),br("FACEMESH_FACE_OVAL",X),br("FACEMESH_CONTOURS",be),br("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),br("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),br("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),br("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),br("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),br("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),br("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),br("matrixDataToMatrix",function(T){for(var K=T.getCols(),ne=T.getRows(),E=T.getPackedDataList(),D=[],J=0;J<ne;J++)D.push(Array(K));for(J=0;J<ne;J++)for(var se=0;se<K;se++){var Me=T.getLayout()===1?J*K+se:se*ne+J;D[J][se]=E[Me]}return D}),br("VERSION","0.5.1635989137")}).call(fa);const hs={};(function(){var I;function x(L){var $=0;return function(){return $<L.length?{done:!1,value:L[$++]}:{done:!0}}}var N=typeof Object.defineProperties=="function"?Object.defineProperty:function(L,$,he){return L==Array.prototype||L==Object.prototype||(L[$]=he.value),L};function ie(L){L=[typeof globalThis=="object"&&globalThis,L,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var $=0;$<L.length;++$){var he=L[$];if(he&&he.Math==Math)return he}throw Error("Cannot find global object")}var pe=ie(this);function Xe(L,$){if($)e:{var he=pe;L=L.split(".");for(var T=0;T<L.length-1;T++){var K=L[T];if(!(K in he))break e;he=he[K]}L=L[L.length-1],T=he[L],$=$(T),$!=T&&$!=null&&N(he,L,{configurable:!0,writable:!0,value:$})}}Xe("Symbol",function(L){function $(ne){if(this instanceof $)throw new TypeError("Symbol is not a constructor");return new he(T+(ne||"")+"_"+K++,ne)}function he(ne,E){this.g=ne,N(this,"description",{configurable:!0,writable:!0,value:E})}if(L)return L;he.prototype.toString=function(){return this.g};var T="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",K=0;return $}),Xe("Symbol.iterator",function(L){if(L)return L;L=Symbol("Symbol.iterator");for(var $="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),he=0;he<$.length;he++){var T=pe[$[he]];typeof T=="function"&&typeof T.prototype[L]!="function"&&N(T.prototype,L,{configurable:!0,writable:!0,value:function(){return rt(x(this))}})}return L});function rt(L){return L={next:L},L[Symbol.iterator]=function(){return this},L}function $e(L){var $=typeof Symbol<"u"&&Symbol.iterator&&L[Symbol.iterator];return $?$.call(L):{next:x(L)}}function lt(L){if(!(L instanceof Array)){L=$e(L);for(var $,he=[];!($=L.next()).done;)he.push($.value);L=he}return L}var zt=typeof Object.create=="function"?Object.create:function(L){function $(){}return $.prototype=L,new $},ln;if(typeof Object.setPrototypeOf=="function")ln=Object.setPrototypeOf;else{var hn;e:{var ir={a:!0},ur={};try{ur.__proto__=ir,hn=ur.a;break e}catch{}hn=!1}ln=hn?function(L,$){if(L.__proto__=$,L.__proto__!==$)throw new TypeError(L+" is not extensible");return L}:null}var vn=ln;function Tn(L,$){if(L.prototype=zt($.prototype),L.prototype.constructor=L,vn)vn(L,$);else for(var he in $)if(he!="prototype")if(Object.defineProperties){var T=Object.getOwnPropertyDescriptor($,he);T&&Object.defineProperty(L,he,T)}else L[he]=$[he];L.na=$.prototype}function Ir(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.u=this.o=0,this.j=null}function Er(L){if(L.l)throw new TypeError("Generator is already running");L.l=!0}Ir.prototype.s=function(L){this.h=L};function zr(L,$){L.j={da:$,ea:!0},L.g=L.o||L.u}Ir.prototype.return=function(L){this.j={return:L},this.g=this.u};function jt(L,$,he){return L.g=he,{value:$}}function Rs(L){this.g=new Ir,this.h=L}function ps(L,$){Er(L.g);var he=L.g.i;return he?Ni(L,"return"in he?he.return:function(T){return{value:T,done:!0}},$,L.g.return):(L.g.return($),Ur(L))}function Ni(L,$,he,T){try{var K=$.call(L.g.i,he);if(!(K instanceof Object))throw new TypeError("Iterator result "+K+" is not an object");if(!K.done)return L.g.l=!1,K;var ne=K.value}catch(E){return L.g.i=null,zr(L.g,E),Ur(L)}return L.g.i=null,T.call(L.g,ne),Ur(L)}function Ur(L){for(;L.g.g;)try{var $=L.h(L.g);if($)return L.g.l=!1,{value:$.value,done:!1}}catch(he){L.g.h=void 0,zr(L.g,he)}if(L.g.l=!1,L.g.j){if($=L.g.j,L.g.j=null,$.ea)throw $.da;return{value:$.return,done:!0}}return{value:void 0,done:!0}}function Za(L){this.next=function($){return Er(L.g),L.g.i?$=Ni(L,L.g.i.next,$,L.g.s):(L.g.s($),$=Ur(L)),$},this.throw=function($){return Er(L.g),L.g.i?$=Ni(L,L.g.i.throw,$,L.g.s):(zr(L.g,$),$=Ur(L)),$},this.return=function($){return ps(L,$)},this[Symbol.iterator]=function(){return this}}function ai(L){function $(T){return L.next(T)}function he(T){return L.throw(T)}return new n(function(T,K){function ne(E){E.done?T(E.value):n.resolve(E.value).then($,he).then(ne,K)}ne(L.next())})}function Gn(L){return ai(new Za(new Rs(L)))}Xe("Promise",function(L){function $(E){this.h=0,this.i=void 0,this.g=[],this.s=!1;var D=this.j();try{E(D.resolve,D.reject)}catch(J){D.reject(J)}}function he(){this.g=null}function T(E){return E instanceof $?E:new $(function(D){D(E)})}if(L)return L;he.prototype.h=function(E){if(this.g==null){this.g=[];var D=this;this.i(function(){D.l()})}this.g.push(E)};var K=pe.setTimeout;he.prototype.i=function(E){K(E,0)},he.prototype.l=function(){for(;this.g&&this.g.length;){var E=this.g;this.g=[];for(var D=0;D<E.length;++D){var J=E[D];E[D]=null;try{J()}catch(se){this.j(se)}}}this.g=null},he.prototype.j=function(E){this.i(function(){throw E})},$.prototype.j=function(){function E(se){return function(Me){J||(J=!0,se.call(D,Me))}}var D=this,J=!1;return{resolve:E(this.D),reject:E(this.l)}},$.prototype.D=function(E){if(E===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(E instanceof $)this.H(E);else{e:switch(typeof E){case"object":var D=E!=null;break e;case"function":D=!0;break e;default:D=!1}D?this.A(E):this.o(E)}},$.prototype.A=function(E){var D=void 0;try{D=E.then}catch(J){this.l(J);return}typeof D=="function"?this.I(D,E):this.o(E)},$.prototype.l=function(E){this.u(2,E)},$.prototype.o=function(E){this.u(1,E)},$.prototype.u=function(E,D){if(this.h!=0)throw Error("Cannot settle("+E+", "+D+"): Promise already settled in state"+this.h);this.h=E,this.i=D,this.h===2&&this.G(),this.B()},$.prototype.G=function(){var E=this;K(function(){if(E.C()){var D=pe.console;typeof D<"u"&&D.error(E.i)}},1)},$.prototype.C=function(){if(this.s)return!1;var E=pe.CustomEvent,D=pe.Event,J=pe.dispatchEvent;return typeof J>"u"?!0:(typeof E=="function"?E=new E("unhandledrejection",{cancelable:!0}):typeof D=="function"?E=new D("unhandledrejection",{cancelable:!0}):(E=pe.document.createEvent("CustomEvent"),E.initCustomEvent("unhandledrejection",!1,!0,E)),E.promise=this,E.reason=this.i,J(E))},$.prototype.B=function(){if(this.g!=null){for(var E=0;E<this.g.length;++E)ne.h(this.g[E]);this.g=null}};var ne=new he;return $.prototype.H=function(E){var D=this.j();E.M(D.resolve,D.reject)},$.prototype.I=function(E,D){var J=this.j();try{E.call(D,J.resolve,J.reject)}catch(se){J.reject(se)}},$.prototype.then=function(E,D){function J(ot,wt){return typeof ot=="function"?function(Gt){try{se(ot(Gt))}catch(Yt){Me(Yt)}}:wt}var se,Me,qe=new $(function(ot,wt){se=ot,Me=wt});return this.M(J(E,se),J(D,Me)),qe},$.prototype.catch=function(E){return this.then(void 0,E)},$.prototype.M=function(E,D){function J(){switch(se.h){case 1:E(se.i);break;case 2:D(se.i);break;default:throw Error("Unexpected state: "+se.h)}}var se=this;this.g==null?ne.h(J):this.g.push(J),this.s=!0},$.resolve=T,$.reject=function(E){return new $(function(D,J){J(E)})},$.race=function(E){return new $(function(D,J){for(var se=$e(E),Me=se.next();!Me.done;Me=se.next())T(Me.value).M(D,J)})},$.all=function(E){var D=$e(E),J=D.next();return J.done?T([]):new $(function(se,Me){function qe(Gt){return function(Yt){ot[Gt]=Yt,wt--,wt==0&&se(ot)}}var ot=[],wt=0;do ot.push(void 0),wt++,T(J.value).M(qe(ot.length-1),Me),J=D.next();while(!J.done)})},$});function xs(L,$){L instanceof String&&(L+="");var he=0,T=!1,K={next:function(){if(!T&&he<L.length){var ne=he++;return{value:$(ne,L[ne]),done:!1}}return T=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}var La=typeof Object.assign=="function"?Object.assign:function(L,$){for(var he=1;he<arguments.length;he++){var T=arguments[he];if(T)for(var K in T)Object.prototype.hasOwnProperty.call(T,K)&&(L[K]=T[K])}return L};Xe("Object.assign",function(L){return L||La}),Xe("Object.is",function(L){return L||function($,he){return $===he?$!==0||1/$===1/he:$!==$&&he!==he}}),Xe("Array.prototype.includes",function(L){return L||function($,he){var T=this;T instanceof String&&(T=String(T));var K=T.length;for(he=he||0,0>he&&(he=Math.max(he+K,0));he<K;he++){var ne=T[he];if(ne===$||Object.is(ne,$))return!0}return!1}}),Xe("String.prototype.includes",function(L){return L||function($,he){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if($ instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf($,he||0)!==-1}}),Xe("Array.prototype.keys",function(L){return L||function(){return xs(this,function($){return $})}});var Zi=this||self;function br(L,$){L=L.split(".");var he=Zi;L[0]in he||typeof he.execScript>"u"||he.execScript("var "+L[0]);for(var T;L.length&&(T=L.shift());)L.length||$===void 0?he[T]&&he[T]!==Object.prototype[T]?he=he[T]:he=he[T]={}:he[T]=$}function Xi(){throw Error("Invalid UTF8")}function ss(L,$){return $=String.fromCharCode.apply(null,$),L==null?$:L+$}var Fs,oa=typeof TextDecoder<"u",Hs,pa=typeof TextEncoder<"u",gs={},Is=null;function Ea(L){var $;$===void 0&&($=0),Wo(),$=gs[$];for(var he=Array(Math.floor(L.length/3)),T=$[64]||"",K=0,ne=0;K<L.length-2;K+=3){var E=L[K],D=L[K+1],J=L[K+2],se=$[E>>2];E=$[(E&3)<<4|D>>4],D=$[(D&15)<<2|J>>6],J=$[J&63],he[ne++]=se+E+D+J}switch(se=0,J=T,L.length-K){case 2:se=L[K+1],J=$[(se&15)<<2]||T;case 1:L=L[K],he[ne]=$[L>>2]+$[(L&3)<<4|se>>4]+J+T}return he.join("")}function sa(L){var $=L.length,he=3*$/4;he%3?he=Math.floor(he):"=.".indexOf(L[$-1])!=-1&&(he="=.".indexOf(L[$-2])!=-1?he-2:he-1);var T=new Uint8Array(he),K=0;return Yo(L,function(ne){T[K++]=ne}),K!==he?T.subarray(0,K):T}function Yo(L,$){function he(J){for(;T<L.length;){var se=L.charAt(T++),Me=Is[se];if(Me!=null)return Me;if(!/^[\s\xa0]*$/.test(se))throw Error("Unknown base64 encoding at char: "+se)}return J}Wo();for(var T=0;;){var K=he(-1),ne=he(0),E=he(64),D=he(64);if(D===64&&K===-1)break;$(K<<2|ne>>4),E!=64&&($(ne<<4&240|E>>2),D!=64&&$(E<<6&192|D))}}function Wo(){if(!Is){Is={};for(var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),$=["+/=","+/","-_=","-_.","-_"],he=0;5>he;he++){var T=L.concat($[he].split(""));gs[he]=T;for(var K=0;K<T.length;K++){var ne=T[K];Is[ne]===void 0&&(Is[ne]=K)}}}}var Ys=typeof Uint8Array=="function";function Gs(L){return Ys&&L!=null&&L instanceof Uint8Array}var di;function Mi(L){if(this.L=L,L!==null&&L.length===0)throw Error("ByteString should be constructed with non-empty values")}var Ko=typeof Uint8Array.prototype.slice=="function",Jr=0,Oi=0;function as(L,$){if(L.constructor===Uint8Array)return L;if(L.constructor===ArrayBuffer)return new Uint8Array(L);if(L.constructor===Array)return new Uint8Array(L);if(L.constructor===String)return sa(L);if(L.constructor===Mi)return!$&&($=L.L)&&$.constructor===Uint8Array?$:($=L.L,$=$==null||Gs($)?$:typeof $=="string"?sa($):null,(L=L.L=$)?new Uint8Array(L):di||(di=new Uint8Array(0)));if(L instanceof Uint8Array)return new Uint8Array(L.buffer,L.byteOffset,L.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function eo(L,$){return Error("Invalid wire type: "+L+" (at position "+$+")")}function Dr(){return Error("Failed to read varint, encoding is invalid.")}function Ci(L,$){$=$===void 0?{}:$,$=$.v===void 0?!1:$.v,this.h=null,this.g=this.i=this.j=0,this.v=$,L&&Hi(this,L)}function Hi(L,$){L.h=as($,L.v),L.j=0,L.i=L.h.length,L.g=L.j}Ci.prototype.reset=function(){this.g=this.j};function Nr(L){if(L.g>L.i)throw Error("Tried to read past the end of the data "+L.g+" > "+L.i)}function Fi(L){var $=L.h,he=$[L.g],T=he&127;if(128>he)return L.g+=1,Nr(L),T;if(he=$[L.g+1],T|=(he&127)<<7,128>he)return L.g+=2,Nr(L),T;if(he=$[L.g+2],T|=(he&127)<<14,128>he)return L.g+=3,Nr(L),T;if(he=$[L.g+3],T|=(he&127)<<21,128>he)return L.g+=4,Nr(L),T;if(he=$[L.g+4],L.g+=5,T|=(he&15)<<28,128>he)return Nr(L),T;if(128<=$[L.g++]&&128<=$[L.g++]&&128<=$[L.g++]&&128<=$[L.g++]&&128<=$[L.g++])throw Dr();return Nr(L),T}var Gr=[];function vi(){this.g=[]}vi.prototype.length=function(){return this.g.length},vi.prototype.end=function(){var L=this.g;return this.g=[],L};function Di(L,$){for(;127<$;)L.g.push($&127|128),$>>>=7;L.g.push($)}function qo(L){var $={},he=$.W===void 0?!1:$.W;this.l={v:$.v===void 0?!1:$.v},this.W=he,$=this.l,Gr.length?(he=Gr.pop(),$&&(he.v=$.v),L&&Hi(he,L),L=he):L=new Ci(L,$),this.g=L,this.j=this.g.g,this.h=this.i=-1}qo.prototype.reset=function(){this.g.reset(),this.j=this.g.g,this.h=this.i=-1};function xi(L){var $=L.g;if($.g==$.i)return!1;L.j=L.g.g;var he=Fi(L.g)>>>0;if($=he>>>3,he&=7,!(0<=he&&5>=he))throw eo(he,L.j);if(1>$)throw Error("Invalid field number: "+$+" (at position "+L.j+")");return L.i=$,L.h=he,!0}function Mr(L){switch(L.h){case 0:if(L.h!=0)Mr(L);else e:{L=L.g;for(var $=L.g,he=$+10;$<he;)if(!(L.h[$++]&128)){L.g=$,Nr(L);break e}throw Dr()}break;case 1:L=L.g,L.g+=8,Nr(L);break;case 2:L.h!=2?Mr(L):($=Fi(L.g)>>>0,L=L.g,L.g+=$,Nr(L));break;case 5:L=L.g,L.g+=4,Nr(L);break;case 3:$=L.i;do{if(!xi(L))throw Error("Unmatched start-group tag: stream EOF");if(L.h==4){if(L.i!=$)throw Error("Unmatched end-group tag");break}Mr(L)}while(1);break;default:throw eo(L.h,L.j)}}var Xo=[];function zo(){this.i=[],this.h=0,this.g=new vi}function Gi(L,$){$.length!==0&&(L.i.push($),L.h+=$.length)}function Ms(L,$){if($=$.ba){Gi(L,L.g.end());for(var he=0;he<$.length;he++)Gi(L,$[he])}}var cs=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Jo(L,$){Object.isFrozen(L)||(cs?L[cs]|=$:L.N!==void 0?L.N|=$:Object.defineProperties(L,{N:{value:$,configurable:!0,writable:!0,enumerable:!1}}))}function us(L){var $;return cs?$=L[cs]:$=L.N,$??0}function Ei(L){return Jo(L,1),L}function Bi(L){return Array.isArray(L)?!!(us(L)&2):!1}function Ti(L){if(!Array.isArray(L))throw Error("cannot mark non-array as immutable");Jo(L,2)}function _r(L){return L!==null&&typeof L=="object"&&!Array.isArray(L)&&L.constructor===Object}var _o=Object.freeze(Ei([]));function Hr(L){if(Bi(L.m))throw Error("Cannot mutate an immutable Message")}var Pr=typeof Symbol<"u"&&typeof Symbol.hasInstance<"u";function ys(L){return{value:L,configurable:!1,writable:!1,enumerable:!1}}function fi(L,$,he){return $===-1?null:$>=L.i?L.g?L.g[$]:void 0:he!==void 0&&he&&L.g&&(he=L.g[$],he!=null)?he:L.m[$+L.h]}function gr(L,$,he,T){T=T===void 0?!1:T,Hr(L),$<L.i&&!T?L.m[$+L.h]=he:(L.g||(L.g=L.m[L.i+L.h]={}))[$]=he}function _n(L,$,he,T){he=he===void 0?!0:he,T=T===void 0?!1:T;var K=fi(L,$,T);return K==null&&(K=_o),Bi(L.m)?he&&(Ti(K),Object.freeze(K)):(K===_o||Bi(K))&&(K=Ei(K.slice()),gr(L,$,K,T)),K}function $r(L,$,he){return L=fi(L,$),L=L==null?L:+L,L??(he===void 0?0:he)}function Ui(L,$,he,T){L.j||(L.j={});var K=Bi(L.m),ne=L.j[he];if(!ne){T=_n(L,he,!0,T===void 0?!1:T),ne=[],K=K||Bi(T);for(var E=0;E<T.length;E++)ne[E]=new $(T[E]),K&&Ti(ne[E].m);K&&(Ti(ne),Object.freeze(ne)),L.j[he]=ne}return ne}function Yr(L,$,he,T,K){var ne=ne===void 0?!1:ne;return Hr(L),ne=Ui(L,he,$,ne),he=T||new he,L=_n(L,$),K!=null?(ne.splice(K,0,he),L.splice(K,0,he.m)):(ne.push(he),L.push(he.m)),he}function Qr(L,$){return L=fi(L,$),L??0}function qt(L,$){return L=fi(L,$),L??""}function an(L){switch(typeof L){case"number":return isFinite(L)?L:String(L);case"object":if(L&&!Array.isArray(L)){if(Gs(L))return Ea(L);if(L instanceof Mi){var $=L.L;return $=$==null||typeof $=="string"?$:Ys&&$ instanceof Uint8Array?Ea($):null,(L.L=$)||""}}}return L}function bn(L){var $=ni;return $=$===void 0?nr:$,si(L,$)}function Wr(L,$){if(L!=null){if(Array.isArray(L))L=si(L,$);else if(_r(L)){var he={},T;for(T in L)he[T]=Wr(L[T],$);L=he}else L=$(L);return L}}function si(L,$){for(var he=L.slice(),T=0;T<he.length;T++)he[T]=Wr(he[T],$);return Array.isArray(L)&&us(L)&1&&Ei(he),he}function ni(L){return L&&typeof L=="object"&&L.toJSON?L.toJSON():(L=an(L),Array.isArray(L)?bn(L):L)}function nr(L){return Gs(L)?new Uint8Array(L):L}function hi(L,$,he){L||(L=Yi),Yi=null;var T=this.constructor.h;L||(L=T?[T]:[]),this.h=(T?0:-1)-(this.constructor.g||0),this.j=void 0,this.m=L;e:{if(T=this.m.length,L=T-1,T&&(T=this.m[L],_r(T))){this.i=L-this.h,this.g=T;break e}$!==void 0&&-1<$?(this.i=Math.max($,L+1-this.h),this.g=void 0):this.i=Number.MAX_VALUE}if(he)for($=0;$<he.length;$++)if(L=he[$],L<this.i)L+=this.h,(T=this.m[L])?Array.isArray(T)&&Ei(T):this.m[L]=_o;else{T=this.g||(this.g=this.m[this.i+this.h]={});var K=T[L];K?Array.isArray(K)&&Ei(K):T[L]=_o}}hi.prototype.toJSON=function(){return bn(this.m)},hi.prototype.toString=function(){return this.m.toString()};var Yi;function es(){hi.apply(this,arguments)}if(Tn(es,hi),Pr){var ts={};Object.defineProperties(es,(ts[Symbol.hasInstance]=ys(function(){throw Error("Cannot perform instanceof checks for MutableMessage")}),ts))}function vs(L,$,he){if(he){var T={},K;for(K in he){var ne=he[K],E=ne.ha;E||(T.F=ne.la||ne.fa.P,ne.aa?(T.U=Ks(ne.aa),E=function(D){return function(J,se,Me){return D.F(J,se,Me,D.U)}}(T)):ne.ca?(T.T=Ro(ne.X.g,ne.ca),E=function(D){return function(J,se,Me){return D.F(J,se,Me,D.T)}}(T)):E=T.F,ne.ha=E),E($,L,ne.X),T={F:T.F,U:T.U,T:T.T}}}Ms($,L)}var ws=Symbol();function ji(L,$,he){return L[ws]||(L[ws]=function(T,K){return $(T,K,he)})}function ns(L){var $=L[ws];if(!$){var he=oe(L);$=function(T,K){return Ie(T,K,he)},L[ws]=$}return $}function Fa(L){var $=L.aa;if($)return ns($);if($=L.ka)return ji(L.X.g,$,L.ca)}function rs(L){var $=Fa(L),he=L.X,T=L.fa.O;return $?function(K,ne){return T(K,ne,he,$)}:function(K,ne){return T(K,ne,he)}}function Ki(L,$,he,T,K,ne){L=L();var E=0;for(L.length&&typeof L[0]!="number"&&(he($,L[0]),E++);E<L.length;){he=L[E++];for(var D=E+1;D<L.length&&typeof L[D]!="number";)D++;var J=L[E++];switch(D-=E,D){case 0:T($,he,J);break;case 1:T($,he,J,L[E++]);break;case 2:K($,he,J,L[E++],L[E++]);break;case 3:D=L[E++];var se=L[E++],Me=L[E++];Array.isArray(Me)?K($,he,J,D,se,Me):ne($,he,J,D,se,Me);break;case 4:ne($,he,J,L[E++],L[E++],L[E++],L[E++]);break;default:throw Error("unexpected number of binary field arguments: "+D)}}return $}var Ns=Symbol();function Ks(L){var $=L[Ns];if(!$){var he=ls(L);$=function(T,K){return St(T,K,he)},L[Ns]=$}return $}function Ro(L,$){var he=L[Ns];return he||(he=function(T,K){return vs(T,K,$)},L[Ns]=he),he}var Ta=Symbol();function is(L,$){L.push($)}function Zs(L,$,he){L.push($,he.P)}function $s(L,$,he,T,K){var ne=Ks(K),E=he.P;L.push($,function(D,J,se){return E(D,J,se,T,ne)})}function Aa(L,$,he,T,K,ne){var E=Ro(T,ne),D=he.P;L.push($,function(J,se,Me){return D(J,se,Me,T,E)})}function ls(L){var $=L[Ta];return $||Ki(L,L[Ta]=[],is,Zs,$s,Aa)}var Qs=Symbol();function Ya(L,$){L[0]=$}function Ka(L,$,he,T){var K=he.O;L[$]=T?function(ne,E,D){return K(ne,E,D,T)}:K}function qs(L,$,he,T,K,ne){var E=he.O,D=ns(K);L[$]=function(J,se,Me){return E(J,se,Me,T,D,ne)}}function aa(L,$,he,T,K,ne,E){var D=he.O,J=ji(T,K,ne);L[$]=function(se,Me,qe){return D(se,Me,qe,T,J,E)}}function oe(L){var $=L[Qs];return $||Ki(L,L[Qs]={},Ya,Ka,qs,aa)}function Ie(L,$,he){for(;xi($)&&$.h!=4;){var T=$.i,K=he[T];if(!K){var ne=he[0];ne&&(ne=ne[T])&&(K=he[T]=rs(ne))}if((!K||!K($,L,T))&&(K=$,T=L,ne=K.j,Mr(K),!K.W)){var E=K.g.h;K=K.g.g,K=ne===K?di||(di=new Uint8Array(0)):Ko?E.slice(ne,K):new Uint8Array(E.subarray(ne,K)),(ne=T.ba)?ne.push(K):T.ba=[K]}}return L}function we(L,$,he){if(Xo.length){var T=Xo.pop();L&&(Hi(T.g,L),T.i=-1,T.h=-1),L=T}else L=new qo(L);try{return Ie(new $,L,oe(he))}finally{$=L.g,$.h=null,$.j=0,$.i=0,$.g=0,$.v=!1,L.i=-1,L.h=-1,100>Xo.length&&Xo.push(L)}}function St(L,$,he){for(var T=he.length,K=T%2==1,ne=K?1:0;ne<T;ne+=2)(0,he[ne+1])($,L,he[ne]);vs(L,$,K?he[0]:void 0)}function Bt(L,$){var he=new zo;St(L,he,ls($)),Gi(he,he.g.end()),L=new Uint8Array(he.h),$=he.i;for(var T=$.length,K=0,ne=0;ne<T;ne++){var E=$[ne];L.set(E,K),K+=E.length}return he.i=[L],L}function dn(L,$){return{O:L,P:$}}var Xt=dn(function(L,$,he){if(L.h!==5)return!1;L=L.g;var T=L.h[L.g],K=L.h[L.g+1],ne=L.h[L.g+2],E=L.h[L.g+3];return L.g+=4,Nr(L),K=(T<<0|K<<8|ne<<16|E<<24)>>>0,L=2*(K>>31)+1,T=K>>>23&255,K&=8388607,gr($,he,T==255?K?NaN:1/0*L:T==0?L*Math.pow(2,-149)*K:L*Math.pow(2,T-150)*(K+Math.pow(2,23))),!0},function(L,$,he){if($=fi($,he),$!=null){Di(L.g,8*he+5),L=L.g;var T=$;T=(he=0>T?1:0)?-T:T,T===0?0<1/T?Jr=Oi=0:(Oi=0,Jr=2147483648):isNaN(T)?(Oi=0,Jr=2147483647):34028234663852886e22<T?(Oi=0,Jr=(he<<31|2139095040)>>>0):11754943508222875e-54>T?(T=Math.round(T/Math.pow(2,-149)),Oi=0,Jr=(he<<31|T)>>>0):($=Math.floor(Math.log(T)/Math.LN2),T*=Math.pow(2,-$),T=Math.round(8388608*T),16777216<=T&&++$,Oi=0,Jr=(he<<31|$+127<<23|T&8388607)>>>0),he=Jr,L.g.push(he>>>0&255),L.g.push(he>>>8&255),L.g.push(he>>>16&255),L.g.push(he>>>24&255)}}),sn=dn(function(L,$,he){if(L.h!==0)return!1;for(var T=L.g,K=128,ne=0,E=L=0;4>E&&128<=K;E++)K=T.h[T.g++],Nr(T),ne|=(K&127)<<7*E;if(128<=K&&(K=T.h[T.g++],Nr(T),ne|=(K&127)<<28,L|=(K&127)>>4),128<=K)for(E=0;5>E&&128<=K;E++)K=T.h[T.g++],Nr(T),L|=(K&127)<<7*E+3;if(128>K)T=ne>>>0,K=L>>>0,(L=K&2147483648)&&(T=~T+1>>>0,K=~K>>>0,T==0&&(K=K+1>>>0)),T=4294967296*K+(T>>>0);else throw Dr();return gr($,he,L?-T:T),!0},function(L,$,he){if($=fi($,he),$!=null&&$!=null){Di(L.g,8*he),L=L.g;var T=$;for(he=0>T,T=Math.abs(T),$=T>>>0,T=Math.floor((T-$)/4294967296),T>>>=0,he&&(T=~T>>>0,$=(~$>>>0)+1,4294967295<$&&($=0,T++,4294967295<T&&(T=0))),Jr=$,Oi=T,he=Jr,$=Oi;0<$||127<he;)L.g.push(he&127|128),he=(he>>>7|$<<25)>>>0,$>>>=7;L.g.push(he)}}),An=dn(function(L,$,he){return L.h!==0?!1:(gr($,he,Fi(L.g)),!0)},function(L,$,he){if($=fi($,he),$!=null&&$!=null)if(Di(L.g,8*he),L=L.g,he=$,0<=he)Di(L,he);else{for($=0;9>$;$++)L.g.push(he&127|128),he>>=7;L.g.push(1)}}),Qn=dn(function(L,$,he){if(L.h!==2)return!1;var T=Fi(L.g)>>>0;L=L.g;var K=L.g;L.g+=T,Nr(L),L=L.h;var ne;if(oa)(ne=Fs)||(ne=Fs=new TextDecoder("utf-8",{fatal:!0})),ne=ne.decode(L.subarray(K,K+T));else{T=K+T;for(var E=[],D=null,J,se,Me;K<T;)J=L[K++],128>J?E.push(J):224>J?K>=T?Xi():(se=L[K++],194>J||(se&192)!==128?(K--,Xi()):E.push((J&31)<<6|se&63)):240>J?K>=T-1?Xi():(se=L[K++],(se&192)!==128||J===224&&160>se||J===237&&160<=se||((ne=L[K++])&192)!==128?(K--,Xi()):E.push((J&15)<<12|(se&63)<<6|ne&63)):244>=J?K>=T-2?Xi():(se=L[K++],(se&192)!==128||(J<<28)+(se-144)>>30||((ne=L[K++])&192)!==128||((Me=L[K++])&192)!==128?(K--,Xi()):(J=(J&7)<<18|(se&63)<<12|(ne&63)<<6|Me&63,J-=65536,E.push((J>>10&1023)+55296,(J&1023)+56320))):Xi(),8192<=E.length&&(D=ss(D,E),E.length=0);ne=ss(D,E)}return gr($,he,ne),!0},function(L,$,he){if($=fi($,he),$!=null){var T=!1;if(T=T===void 0?!1:T,pa){if(T&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test($))throw Error("Found an unpaired surrogate");$=(Hs||(Hs=new TextEncoder)).encode($)}else{for(var K=0,ne=new Uint8Array(3*$.length),E=0;E<$.length;E++){var D=$.charCodeAt(E);if(128>D)ne[K++]=D;else{if(2048>D)ne[K++]=D>>6|192;else{if(55296<=D&&57343>=D){if(56319>=D&&E<$.length){var J=$.charCodeAt(++E);if(56320<=J&&57343>=J){D=1024*(D-55296)+J-56320+65536,ne[K++]=D>>18|240,ne[K++]=D>>12&63|128,ne[K++]=D>>6&63|128,ne[K++]=D&63|128;continue}else E--}if(T)throw Error("Found an unpaired surrogate");D=65533}ne[K++]=D>>12|224,ne[K++]=D>>6&63|128}ne[K++]=D&63|128}}$=ne.subarray(0,K)}Di(L.g,8*he+2),Di(L.g,$.length),Gi(L,L.g.end()),Gi(L,$)}}),Or=dn(function(L,$,he,T,K){if(L.h!==2)return!1;$=Yr($,he,T),he=L.g.i,T=Fi(L.g)>>>0;var ne=L.g.g+T,E=ne-he;if(0>=E&&(L.g.i=ne,K($,L),E=ne-L.g.g),E)throw Error("Message parsing ended unexpectedly. Expected to read "+(T+" bytes, instead read "+(T-E)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return L.g.g=ne,L.g.i=he,!0},function(L,$,he,T,K){if($=Ui($,T,he),$!=null)for(T=0;T<$.length;T++){var ne=L;Di(ne.g,8*he+2);var E=ne.g.end();Gi(ne,E),E.push(ne.h),ne=E,K($[T],L),E=L;var D=ne.pop();for(D=E.h+E.g.length()-D;127<D;)ne.push(D&127|128),D>>>=7,E.h++;ne.push(D),E.h++}});function Sr(){es.apply(this,arguments)}if(Tn(Sr,es),Pr){var jr={};Object.defineProperties(Sr,(jr[Symbol.hasInstance]=ys(Object[Symbol.hasInstance]),jr))}function Tr(L){Sr.call(this,L)}Tn(Tr,Sr);function ar(){return[1,An,2,Xt,3,Qn,4,Qn]}function wr(L){Sr.call(this,L,-1,ri)}Tn(wr,Sr),wr.prototype.addClassification=function(L,$){return Yr(this,1,Tr,L,$),this};function Br(){return[1,Or,Tr,ar]}var ri=[1];function pi(L){Sr.call(this,L)}Tn(pi,Sr);function bi(){return[1,Xt,2,Xt,3,Xt,4,Xt,5,Xt]}function zi(L){Sr.call(this,L,-1,le)}Tn(zi,Sr);function te(){return[1,Or,pi,bi]}var le=[1];function ve(L){Sr.call(this,L)}Tn(ve,Sr);function st(){return[1,Xt,2,Xt,3,Xt,4,Xt,5,Xt,6,sn]}var Vt=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],Ht=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],kt=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Qt=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],pn=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],X=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],be=[].concat(lt(Vt),lt(Ht),lt(kt),lt(Qt),lt(pn),lt(X));function ke(L,$,he){if(he=L.createShader(he===0?L.VERTEX_SHADER:L.FRAGMENT_SHADER),L.shaderSource(he,$),L.compileShader(he),!L.getShaderParameter(he,L.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+L.getShaderInfoLog(he));return he}function ze(L){return Ui(L,Tr,1).map(function($){return{index:Qr($,1),ga:$r($,2),label:fi($,3)!=null?qt($,3):void 0,displayName:fi($,4)!=null?qt($,4):void 0}})}function yt(L){return{x:$r(L,1),y:$r(L,2),z:$r(L,3),visibility:fi(L,4)!=null?$r(L,4):void 0}}function Nt(L,$){this.h=L,this.g=$,this.l=0}function Ot(L,$,he){return rn(L,$),typeof L.g.canvas.transferToImageBitmap=="function"?n.resolve(L.g.canvas.transferToImageBitmap()):he?n.resolve(L.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(L.g.canvas):(L.i===void 0&&(L.i=document.createElement("canvas")),new n(function(T){L.i.height=L.g.canvas.height,L.i.width=L.g.canvas.width,L.i.getContext("2d",{}).drawImage(L.g.canvas,0,0,L.g.canvas.width,L.g.canvas.height),T(L.i)}))}function rn(L,$){var he=L.g;if(L.o===void 0){var T=ke(he,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),K=ke(he,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),ne=he.createProgram();if(he.attachShader(ne,T),he.attachShader(ne,K),he.linkProgram(ne),!he.getProgramParameter(ne,he.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+he.getProgramInfoLog(ne));T=L.o=ne,he.useProgram(T),K=he.getUniformLocation(T,"sampler0"),L.j={K:he.getAttribLocation(T,"aVertex"),J:he.getAttribLocation(T,"aTex"),ma:K},L.u=he.createBuffer(),he.bindBuffer(he.ARRAY_BUFFER,L.u),he.enableVertexAttribArray(L.j.K),he.vertexAttribPointer(L.j.K,2,he.FLOAT,!1,0,0),he.bufferData(he.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),he.STATIC_DRAW),he.bindBuffer(he.ARRAY_BUFFER,null),L.s=he.createBuffer(),he.bindBuffer(he.ARRAY_BUFFER,L.s),he.enableVertexAttribArray(L.j.J),he.vertexAttribPointer(L.j.J,2,he.FLOAT,!1,0,0),he.bufferData(he.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),he.STATIC_DRAW),he.bindBuffer(he.ARRAY_BUFFER,null),he.uniform1i(K,0)}T=L.j,he.useProgram(L.o),he.canvas.width=$.width,he.canvas.height=$.height,he.viewport(0,0,$.width,$.height),he.activeTexture(he.TEXTURE0),L.h.bindTexture2d($.glName),he.enableVertexAttribArray(T.K),he.bindBuffer(he.ARRAY_BUFFER,L.u),he.vertexAttribPointer(T.K,2,he.FLOAT,!1,0,0),he.enableVertexAttribArray(T.J),he.bindBuffer(he.ARRAY_BUFFER,L.s),he.vertexAttribPointer(T.J,2,he.FLOAT,!1,0,0),he.bindFramebuffer(he.DRAW_FRAMEBUFFER?he.DRAW_FRAMEBUFFER:he.FRAMEBUFFER,null),he.clearColor(0,0,0,0),he.clear(he.COLOR_BUFFER_BIT),he.colorMask(!0,!0,!0,!0),he.drawArrays(he.TRIANGLE_FAN,0,4),he.disableVertexAttribArray(T.K),he.disableVertexAttribArray(T.J),he.bindBuffer(he.ARRAY_BUFFER,null),L.h.bindTexture2d(0)}function _t(L){this.g=L}var kn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Yn(L,$){return $+L}function Ar(L,$){window[L]=$}function qn(L){var $=document.createElement("script");return $.setAttribute("src",L),$.setAttribute("crossorigin","anonymous"),new n(function(he){$.addEventListener("load",function(){he()},!1),$.addEventListener("error",function(){he()},!1),document.body.appendChild($)})}function xn(){return Gn(function(L){switch(L.g){case 1:return L.o=2,jt(L,WebAssembly.instantiate(kn),4);case 4:L.g=3,L.o=0;break;case 2:return L.o=0,L.j=null,L.return(!1);case 3:return L.return(!0)}})}function zn(L){if(this.g=L,this.listeners={},this.j={},this.H={},this.o={},this.u={},this.I=this.s=this.Z=!0,this.D=n.resolve(),this.Y="",this.C={},this.locateFile=L&&L.locateFile||Yn,typeof window=="object")var $=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")$=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.$=$,L.options){$=$e(Object.keys(L.options));for(var he=$.next();!he.done;he=$.next()){he=he.value;var T=L.options[he].default;T!==void 0&&(this.j[he]=typeof T=="function"?T():T)}}}I=zn.prototype,I.close=function(){return this.i&&this.i.delete(),n.resolve()};function tr(L){var $,he,T,K,ne,E,D,J,se,Me,qe;return Gn(function(ot){switch(ot.g){case 1:return L.Z?($=L.g.files===void 0?[]:typeof L.g.files=="function"?L.g.files(L.j):L.g.files,jt(ot,xn(),2)):ot.return();case 2:if(he=ot.h,typeof window=="object")return Ar("createMediapipeSolutionsWasm",{locateFile:L.locateFile}),Ar("createMediapipeSolutionsPackedAssets",{locateFile:L.locateFile}),E=$.filter(function(wt){return wt.data!==void 0}),D=$.filter(function(wt){return wt.data===void 0}),J=n.all(E.map(function(wt){var Gt=B(L,wt.url);if(wt.path!==void 0){var Yt=wt.path;Gt=Gt.then(function(Kt){return L.overrideFile(Yt,Kt),n.resolve(Kt)})}return Gt})),se=n.all(D.map(function(wt){return wt.simd===void 0||wt.simd&&he||!wt.simd&&!he?qn(L.locateFile(wt.url,L.$)):n.resolve()})).then(function(){var wt,Gt,Yt;return Gn(function(Kt){if(Kt.g==1)return wt=window.createMediapipeSolutionsWasm,Gt=window.createMediapipeSolutionsPackedAssets,Yt=L,jt(Kt,wt(Gt),2);Yt.h=Kt.h,Kt.g=0})}),Me=function(){return Gn(function(wt){return L.g.graph&&L.g.graph.url?wt=jt(wt,B(L,L.g.graph.url),0):(wt.g=0,wt=void 0),wt})}(),jt(ot,n.all([se,J,Me]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return T=$.filter(function(wt){return wt.simd===void 0||wt.simd&&he||!wt.simd&&!he}).map(function(wt){return L.locateFile(wt.url,L.$)}),importScripts.apply(null,lt(T)),K=L,jt(ot,createMediapipeSolutionsWasm(Module),6);case 6:K.h=ot.h,L.l=new OffscreenCanvas(1,1),L.h.canvas=L.l,ne=L.h.GL.createContext(L.l,{antialias:!1,alpha:!1,ja:typeof WebGL2RenderingContext<"u"?2:1}),L.h.GL.makeContextCurrent(ne),ot.g=4;break;case 7:if(L.l=document.createElement("canvas"),qe=L.l.getContext("webgl2",{}),!qe&&(qe=L.l.getContext("webgl",{}),!qe))return alert("Failed to create WebGL canvas context when passing video frame."),ot.return();L.G=qe,L.h.canvas=L.l,L.h.createContext(L.l,!0,!0,{});case 4:L.i=new L.h.SolutionWasm,L.Z=!1,ot.g=0}})}function lr(L){var $,he,T,K,ne,E,D,J;return Gn(function(se){if(se.g==1){if(L.g.graph&&L.g.graph.url&&L.Y===L.g.graph.url)return se.return();if(L.s=!0,!L.g.graph||!L.g.graph.url){se.g=2;return}return L.Y=L.g.graph.url,jt(se,B(L,L.g.graph.url),3)}for(se.g!=2&&($=se.h,L.i.loadGraph($)),he=$e(Object.keys(L.C)),T=he.next();!T.done;T=he.next())K=T.value,L.i.overrideFile(K,L.C[K]);if(L.C={},L.g.listeners)for(ne=$e(L.g.listeners),E=ne.next();!E.done;E=ne.next())D=E.value,He(L,D);J=L.j,L.j={},L.setOptions(J),se.g=0})}I.reset=function(){var L=this;return Gn(function($){L.i&&(L.i.reset(),L.o={},L.u={}),$.g=0})},I.setOptions=function(L,$){var he=this;if($=$||this.g.options){for(var T=[],K=[],ne={},E=$e(Object.keys(L)),D=E.next();!D.done;ne={R:ne.R,S:ne.S},D=E.next()){var J=D.value;J in this.j&&this.j[J]===L[J]||(this.j[J]=L[J],D=$[J],D!==void 0&&(D.onChange&&(ne.R=D.onChange,ne.S=L[J],T.push(function(se){return function(){var Me;return Gn(function(qe){if(qe.g==1)return jt(qe,se.R(se.S),2);Me=qe.h,Me===!0&&(he.s=!0),qe.g=0})}}(ne))),D.graphOptionXref&&(J={valueNumber:D.type===1?L[J]:0,valueBoolean:D.type===0?L[J]:!1,valueString:D.type===2?L[J]:""},D=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),D.graphOptionXref),J),K.push(D))))}(T.length!==0||K.length!==0)&&(this.s=!0,this.B=(this.B===void 0?[]:this.B).concat(K),this.A=(this.A===void 0?[]:this.A).concat(T))}};function hr(L){var $,he,T,K,ne,E,D;return Gn(function(J){switch(J.g){case 1:if(!L.s)return J.return();if(!L.A){J.g=2;break}$=$e(L.A),he=$.next();case 3:if(he.done){J.g=5;break}return T=he.value,jt(J,T(),4);case 4:he=$.next(),J.g=3;break;case 5:L.A=void 0;case 2:if(L.B){for(K=new L.h.GraphOptionChangeRequestList,ne=$e(L.B),E=ne.next();!E.done;E=ne.next())D=E.value,K.push_back(D);L.i.changeOptions(K),K.delete(),L.B=void 0}L.s=!1,J.g=0}})}I.initialize=function(){var L=this;return Gn(function($){return $.g==1?jt($,tr(L),2):$.g!=3?jt($,lr(L),3):jt($,hr(L),0)})};function B(L,$){var he,T;return Gn(function(K){return $ in L.H?K.return(L.H[$]):(he=L.locateFile($,""),T=fetch(he).then(function(ne){return ne.arrayBuffer()}),L.H[$]=T,K.return(T))})}I.overrideFile=function(L,$){this.i?this.i.overrideFile(L,$):this.C[L]=$},I.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},I.send=function(L,$){var he=this,T,K,ne,E,D,J,se,Me,qe;return Gn(function(ot){switch(ot.g){case 1:return he.g.inputs?(T=1e3*($??performance.now()),jt(ot,he.D,2)):ot.return();case 2:return jt(ot,he.initialize(),3);case 3:for(K=new he.h.PacketDataList,ne=$e(Object.keys(L)),E=ne.next();!E.done;E=ne.next())if(D=E.value,J=he.g.inputs[D]){e:{var wt=L[D];switch(J.type){case"video":var Gt=he.o[J.stream];if(Gt||(Gt=new Nt(he.h,he.G),he.o[J.stream]=Gt),Gt.l===0&&(Gt.l=Gt.h.createTexture()),typeof HTMLVideoElement<"u"&&wt instanceof HTMLVideoElement)var Yt=wt.videoWidth,Kt=wt.videoHeight;else typeof HTMLImageElement<"u"&&wt instanceof HTMLImageElement?(Yt=wt.naturalWidth,Kt=wt.naturalHeight):(Yt=wt.width,Kt=wt.height);Kt={glName:Gt.l,width:Yt,height:Kt},Yt=Gt.g,Yt.canvas.width=Kt.width,Yt.canvas.height=Kt.height,Yt.activeTexture(Yt.TEXTURE0),Gt.h.bindTexture2d(Gt.l),Yt.texImage2D(Yt.TEXTURE_2D,0,Yt.RGBA,Yt.RGBA,Yt.UNSIGNED_BYTE,wt),Gt.h.bindTexture2d(0),Gt=Kt;break e;case"detections":for(Gt=he.o[J.stream],Gt||(Gt=new _t(he.h),he.o[J.stream]=Gt),Gt.data||(Gt.data=new Gt.g.DetectionListData),Gt.data.reset(wt.length),Kt=0;Kt<wt.length;++Kt){Yt=wt[Kt];var fn=Gt.data,In=fn.setBoundingBox,wn=Kt,Xn=Yt.boundingBox,Wn=new ve;if(gr(Wn,1,Xn.xCenter),gr(Wn,2,Xn.yCenter),gr(Wn,3,Xn.height),gr(Wn,4,Xn.width),gr(Wn,5,Xn.rotation),gr(Wn,6,Xn.rectId),Xn=Bt(Wn,st),In.call(fn,wn,Xn),Yt.landmarks)for(fn=0;fn<Yt.landmarks.length;++fn){Wn=Yt.landmarks[fn];var Fr=!!Wn.visibility;In=Gt.data,wn=In.addNormalizedLandmark,Xn=Kt,Wn=Object.assign(Object.assign({},Wn),{visibility:Fr?Wn.visibility:0}),Fr=new pi,gr(Fr,1,Wn.x),gr(Fr,2,Wn.y),gr(Fr,3,Wn.z),Wn.visibility&&gr(Fr,4,Wn.visibility),Wn=Bt(Fr,bi),wn.call(In,Xn,Wn)}if(Yt.V)for(fn=0;fn<Yt.V.length;++fn)In=Gt.data,wn=In.addClassification,Xn=Kt,Wn=Yt.V[fn],Fr=new Tr,gr(Fr,2,Wn.ga),Wn.index&&gr(Fr,1,Wn.index),Wn.label&&gr(Fr,3,Wn.label),Wn.displayName&&gr(Fr,4,Wn.displayName),Wn=Bt(Fr,ar),wn.call(In,Xn,Wn)}Gt=Gt.data;break e;default:Gt={}}}switch(se=Gt,Me=J.stream,J.type){case"video":K.pushTexture2d(Object.assign(Object.assign({},se),{stream:Me,timestamp:T}));break;case"detections":qe=se,qe.stream=Me,qe.timestamp=T,K.pushDetectionList(qe);break;default:throw Error("Unknown input config type: '"+J.type+"'")}}return he.i.send(K),jt(ot,he.D,4);case 4:K.delete(),ot.g=0}})};function ge(L,$,he){var T,K,ne,E,D,J,se,Me,qe,ot,wt,Gt,Yt,Kt;return Gn(function(fn){switch(fn.g){case 1:if(!he)return fn.return($);for(T={},K=0,ne=$e(Object.keys(he)),E=ne.next();!E.done;E=ne.next())D=E.value,J=he[D],typeof J!="string"&&J.type==="texture"&&$[J.stream]!==void 0&&++K;1<K&&(L.I=!1),se=$e(Object.keys(he)),E=se.next();case 2:if(E.done){fn.g=4;break}if(Me=E.value,qe=he[Me],typeof qe=="string")return Yt=T,Kt=Me,jt(fn,Ne(L,Me,$[qe]),14);if(ot=$[qe.stream],qe.type==="detection_list"){if(ot){for(var In=ot.getRectList(),wn=ot.getLandmarksList(),Xn=ot.getClassificationsList(),Wn=[],Fr=0;Fr<In.size();++Fr){var qr=we(In.get(Fr),ve,st);qr={boundingBox:{xCenter:$r(qr,1),yCenter:$r(qr,2),height:$r(qr,3),width:$r(qr,4),rotation:$r(qr,5,0),rectId:Qr(qr,6)},landmarks:Ui(we(wn.get(Fr),zi,te),pi,1).map(yt),V:ze(we(Xn.get(Fr),wr,Br))},Wn.push(qr)}In=Wn}else In=[];T[Me]=In,fn.g=7;break}if(qe.type==="proto_list"){if(ot){for(In=Array(ot.size()),wn=0;wn<ot.size();wn++)In[wn]=ot.get(wn);ot.delete()}else In=[];T[Me]=In,fn.g=7;break}if(ot===void 0){fn.g=3;break}if(qe.type==="float_list"){T[Me]=ot,fn.g=7;break}if(qe.type==="proto"){T[Me]=ot,fn.g=7;break}if(qe.type!=="texture")throw Error("Unknown output config type: '"+qe.type+"'");return wt=L.u[Me],wt||(wt=new Nt(L.h,L.G),L.u[Me]=wt),jt(fn,Ot(wt,ot,L.I),13);case 13:Gt=fn.h,T[Me]=Gt;case 7:qe.transform&&T[Me]&&(T[Me]=qe.transform(T[Me])),fn.g=3;break;case 14:Yt[Kt]=fn.h;case 3:E=se.next(),fn.g=2;break;case 4:return fn.return(T)}})}function Ne(L,$,he){var T;return Gn(function(K){return typeof he=="number"||he instanceof Uint8Array||he instanceof L.h.Uint8BlobList?K.return(he):he instanceof L.h.Texture2dDataOut?(T=L.u[$],T||(T=new Nt(L.h,L.G),L.u[$]=T),K.return(Ot(T,he,L.I))):K.return(void 0)})}function He(L,$){for(var he=$.name||"$",T=[].concat(lt($.wants)),K=new L.h.StringList,ne=$e($.wants),E=ne.next();!E.done;E=ne.next())K.push_back(E.value);ne=L.h.PacketListener.implement({onResults:function(D){for(var J={},se=0;se<$.wants.length;++se)J[T[se]]=D.get(se);var Me=L.listeners[he];Me&&(L.D=ge(L,J,$.outs).then(function(qe){qe=Me(qe);for(var ot=0;ot<$.wants.length;++ot){var wt=J[T[ot]];typeof wt=="object"&&wt.hasOwnProperty&&wt.hasOwnProperty("delete")&&wt.delete()}qe&&(L.D=qe)}))}}),L.i.attachMultiListener(K,ne),K.delete()}I.onResults=function(L,$){this.listeners[$||"$"]=L},br("Solution",zn),br("OptionType",{BOOL:0,NUMBER:1,ia:2,0:"BOOL",1:"NUMBER",2:"STRING"});function vt(L){var $=this;L=L||{};var he={url:"face_detection_short.binarypb"},T={type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}};this.g=new zn({locateFile:L.locateFile,files:[{data:!0,url:"face_detection_short.binarypb"},{data:!0,url:"face_detection_short_range.tflite"},{simd:!0,url:"face_detection_solution_simd_wasm_bin.js"},{simd:!1,url:"face_detection_solution_wasm_bin.js"}],graph:he,listeners:[{wants:["detections","image_transformed"],outs:{image:"image_transformed",detections:{type:"detection_list",stream:"detections"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},model:{type:0,onChange:function(K){var ne,E,D,J,se,Me;return Gn(function(qe){switch(qe.g){case 1:ne=K==="short"?["face_detection_short_range.tflite"]:["face_detection_full_range_sparse.tflite"],E=$e(ne),D=E.next();case 2:if(D.done){qe.g=4;break}return J=D.value,se="third_party/mediapipe/modules/face_detection/"+J,jt(qe,B($.g,J),5);case 5:Me=qe.h,$.g.overrideFile(se,Me),D=E.next(),qe.g=2;break;case 4:return he.url=K==="short"?"face_detection_short.binarypb":"face_detection_full.binarypb",T.graphOptionXref.calculatorName=K==="short"?"facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator":"facedetectionfullrangegpu__facedetectionfullrangecommon__TensorsToDetectionsCalculator",qe.return(!0)}})}},minDetectionConfidence:T}})}I=vt.prototype,I.close=function(){return this.g.close(),n.resolve()},I.onResults=function(L){this.g.onResults(L)},I.initialize=function(){var L=this;return Gn(function($){return jt($,L.g.initialize(),0)})},I.reset=function(){this.g.reset()},I.send=function(L){var $=this;return Gn(function(he){return jt(he,$.g.send(L),0)})},I.setOptions=function(L){this.g.setOptions(L)},br("FaceDetection",vt),br("FACEDETECTION_LIPS",Vt),br("FACEDETECTION_LEFT_EYE",Ht),br("FACEDETECTION_LEFT_EYEBROW",kt),br("FACEDETECTION_RIGHT_EYE",Qt),br("FACEDETECTION_RIGHT_EYEBROW",pn),br("FACEDETECTION_FACE_OVAL",X),br("FACEDETECTION_CONTOURS",be),br("FACEDETECTION_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),br("VERSION","0.4.1646425229")}).call(hs);const Sa={};(function(){var I;function x(te){var le=0;return function(){return le<te.length?{done:!1,value:te[le++]}:{done:!0}}}var N=typeof Object.defineProperties=="function"?Object.defineProperty:function(te,le,ve){return te==Array.prototype||te==Object.prototype||(te[le]=ve.value),te};function ie(te){te=[typeof globalThis=="object"&&globalThis,te,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var le=0;le<te.length;++le){var ve=te[le];if(ve&&ve.Math==Math)return ve}throw Error("Cannot find global object")}var pe=ie(this);function Xe(te,le){if(le)e:{var ve=pe;te=te.split(".");for(var st=0;st<te.length-1;st++){var Vt=te[st];if(!(Vt in ve))break e;ve=ve[Vt]}te=te[te.length-1],st=ve[te],le=le(st),le!=st&&le!=null&&N(ve,te,{configurable:!0,writable:!0,value:le})}}Xe("Symbol",function(te){function le(Ht){if(this instanceof le)throw new TypeError("Symbol is not a constructor");return new ve(st+(Ht||"")+"_"+Vt++,Ht)}function ve(Ht,kt){this.g=Ht,N(this,"description",{configurable:!0,writable:!0,value:kt})}if(te)return te;ve.prototype.toString=function(){return this.g};var st="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Vt=0;return le}),Xe("Symbol.iterator",function(te){if(te)return te;te=Symbol("Symbol.iterator");for(var le="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ve=0;ve<le.length;ve++){var st=pe[le[ve]];typeof st=="function"&&typeof st.prototype[te]!="function"&&N(st.prototype,te,{configurable:!0,writable:!0,value:function(){return rt(x(this))}})}return te});function rt(te){return te={next:te},te[Symbol.iterator]=function(){return this},te}function $e(te){var le=typeof Symbol<"u"&&Symbol.iterator&&te[Symbol.iterator];return le?le.call(te):{next:x(te)}}function lt(te){if(!(te instanceof Array)){te=$e(te);for(var le,ve=[];!(le=te.next()).done;)ve.push(le.value);te=ve}return te}var zt=typeof Object.create=="function"?Object.create:function(te){function le(){}return le.prototype=te,new le},ln;if(typeof Object.setPrototypeOf=="function")ln=Object.setPrototypeOf;else{var hn;e:{var ir={a:!0},ur={};try{ur.__proto__=ir,hn=ur.a;break e}catch{}hn=!1}ln=hn?function(te,le){if(te.__proto__=le,te.__proto__!==le)throw new TypeError(te+" is not extensible");return te}:null}var vn=ln;function Tn(te,le){if(te.prototype=zt(le.prototype),te.prototype.constructor=te,vn)vn(te,le);else for(var ve in le)if(ve!="prototype")if(Object.defineProperties){var st=Object.getOwnPropertyDescriptor(le,ve);st&&Object.defineProperty(te,ve,st)}else te[ve]=le[ve];te.ea=le.prototype}function Ir(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Er(te){if(te.l)throw new TypeError("Generator is already running");te.l=!0}Ir.prototype.o=function(te){this.h=te};function zr(te,le){te.j={U:le,V:!0},te.g=te.m||te.s}Ir.prototype.return=function(te){this.j={return:te},this.g=this.s};function jt(te,le,ve){return te.g=ve,{value:le}}function Rs(te){this.g=new Ir,this.h=te}function ps(te,le){Er(te.g);var ve=te.g.i;return ve?Ni(te,"return"in ve?ve.return:function(st){return{value:st,done:!0}},le,te.g.return):(te.g.return(le),Ur(te))}function Ni(te,le,ve,st){try{var Vt=le.call(te.g.i,ve);if(!(Vt instanceof Object))throw new TypeError("Iterator result "+Vt+" is not an object");if(!Vt.done)return te.g.l=!1,Vt;var Ht=Vt.value}catch(kt){return te.g.i=null,zr(te.g,kt),Ur(te)}return te.g.i=null,st.call(te.g,Ht),Ur(te)}function Ur(te){for(;te.g.g;)try{var le=te.h(te.g);if(le)return te.g.l=!1,{value:le.value,done:!1}}catch(ve){te.g.h=void 0,zr(te.g,ve)}if(te.g.l=!1,te.g.j){if(le=te.g.j,te.g.j=null,le.V)throw le.U;return{value:le.return,done:!0}}return{value:void 0,done:!0}}function Za(te){this.next=function(le){return Er(te.g),te.g.i?le=Ni(te,te.g.i.next,le,te.g.o):(te.g.o(le),le=Ur(te)),le},this.throw=function(le){return Er(te.g),te.g.i?le=Ni(te,te.g.i.throw,le,te.g.o):(zr(te.g,le),le=Ur(te)),le},this.return=function(le){return ps(te,le)},this[Symbol.iterator]=function(){return this}}function ai(te,le){return le=new Za(new Rs(le)),vn&&te.prototype&&vn(le,te.prototype),le}function Gn(te,le){te instanceof String&&(te+="");var ve=0,st=!1,Vt={next:function(){if(!st&&ve<te.length){var Ht=ve++;return{value:le(Ht,te[Ht]),done:!1}}return st=!0,{done:!0,value:void 0}}};return Vt[Symbol.iterator]=function(){return Vt},Vt}var xs=typeof Object.assign=="function"?Object.assign:function(te,le){for(var ve=1;ve<arguments.length;ve++){var st=arguments[ve];if(st)for(var Vt in st)Object.prototype.hasOwnProperty.call(st,Vt)&&(te[Vt]=st[Vt])}return te};Xe("Object.assign",function(te){return te||xs}),Xe("Promise",function(te){function le(kt){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Qt=this.j();try{kt(Qt.resolve,Qt.reject)}catch(pn){Qt.reject(pn)}}function ve(){this.g=null}function st(kt){return kt instanceof le?kt:new le(function(Qt){Qt(kt)})}if(te)return te;ve.prototype.h=function(kt){if(this.g==null){this.g=[];var Qt=this;this.i(function(){Qt.l()})}this.g.push(kt)};var Vt=pe.setTimeout;ve.prototype.i=function(kt){Vt(kt,0)},ve.prototype.l=function(){for(;this.g&&this.g.length;){var kt=this.g;this.g=[];for(var Qt=0;Qt<kt.length;++Qt){var pn=kt[Qt];kt[Qt]=null;try{pn()}catch(X){this.j(X)}}}this.g=null},ve.prototype.j=function(kt){this.i(function(){throw kt})},le.prototype.j=function(){function kt(X){return function(be){pn||(pn=!0,X.call(Qt,be))}}var Qt=this,pn=!1;return{resolve:kt(this.C),reject:kt(this.l)}},le.prototype.C=function(kt){if(kt===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(kt instanceof le)this.F(kt);else{e:switch(typeof kt){case"object":var Qt=kt!=null;break e;case"function":Qt=!0;break e;default:Qt=!1}Qt?this.u(kt):this.m(kt)}},le.prototype.u=function(kt){var Qt=void 0;try{Qt=kt.then}catch(pn){this.l(pn);return}typeof Qt=="function"?this.G(Qt,kt):this.m(kt)},le.prototype.l=function(kt){this.s(2,kt)},le.prototype.m=function(kt){this.s(1,kt)},le.prototype.s=function(kt,Qt){if(this.h!=0)throw Error("Cannot settle("+kt+", "+Qt+"): Promise already settled in state"+this.h);this.h=kt,this.i=Qt,this.h===2&&this.D(),this.A()},le.prototype.D=function(){var kt=this;Vt(function(){if(kt.B()){var Qt=pe.console;typeof Qt<"u"&&Qt.error(kt.i)}},1)},le.prototype.B=function(){if(this.o)return!1;var kt=pe.CustomEvent,Qt=pe.Event,pn=pe.dispatchEvent;return typeof pn>"u"?!0:(typeof kt=="function"?kt=new kt("unhandledrejection",{cancelable:!0}):typeof Qt=="function"?kt=new Qt("unhandledrejection",{cancelable:!0}):(kt=pe.document.createEvent("CustomEvent"),kt.initCustomEvent("unhandledrejection",!1,!0,kt)),kt.promise=this,kt.reason=this.i,pn(kt))},le.prototype.A=function(){if(this.g!=null){for(var kt=0;kt<this.g.length;++kt)Ht.h(this.g[kt]);this.g=null}};var Ht=new ve;return le.prototype.F=function(kt){var Qt=this.j();kt.J(Qt.resolve,Qt.reject)},le.prototype.G=function(kt,Qt){var pn=this.j();try{kt.call(Qt,pn.resolve,pn.reject)}catch(X){pn.reject(X)}},le.prototype.then=function(kt,Qt){function pn(ze,yt){return typeof ze=="function"?function(Nt){try{X(ze(Nt))}catch(Ot){be(Ot)}}:yt}var X,be,ke=new le(function(ze,yt){X=ze,be=yt});return this.J(pn(kt,X),pn(Qt,be)),ke},le.prototype.catch=function(kt){return this.then(void 0,kt)},le.prototype.J=function(kt,Qt){function pn(){switch(X.h){case 1:kt(X.i);break;case 2:Qt(X.i);break;default:throw Error("Unexpected state: "+X.h)}}var X=this;this.g==null?Ht.h(pn):this.g.push(pn),this.o=!0},le.resolve=st,le.reject=function(kt){return new le(function(Qt,pn){pn(kt)})},le.race=function(kt){return new le(function(Qt,pn){for(var X=$e(kt),be=X.next();!be.done;be=X.next())st(be.value).J(Qt,pn)})},le.all=function(kt){var Qt=$e(kt),pn=Qt.next();return pn.done?st([]):new le(function(X,be){function ke(Nt){return function(Ot){ze[Nt]=Ot,yt--,yt==0&&X(ze)}}var ze=[],yt=0;do ze.push(void 0),yt++,st(pn.value).J(ke(ze.length-1),be),pn=Qt.next();while(!pn.done)})},le}),Xe("Object.is",function(te){return te||function(le,ve){return le===ve?le!==0||1/le===1/ve:le!==le&&ve!==ve}}),Xe("Array.prototype.includes",function(te){return te||function(le,ve){var st=this;st instanceof String&&(st=String(st));var Vt=st.length;for(ve=ve||0,0>ve&&(ve=Math.max(ve+Vt,0));ve<Vt;ve++){var Ht=st[ve];if(Ht===le||Object.is(Ht,le))return!0}return!1}}),Xe("String.prototype.includes",function(te){return te||function(le,ve){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(le instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(le,ve||0)!==-1}}),Xe("Array.prototype.keys",function(te){return te||function(){return Gn(this,function(le){return le})}});var La=this||self;function Zi(te,le){te=te.split(".");var ve=La;te[0]in ve||typeof ve.execScript>"u"||ve.execScript("var "+te[0]);for(var st;te.length&&(st=te.shift());)te.length||le===void 0?ve[st]&&ve[st]!==Object.prototype[st]?ve=ve[st]:ve=ve[st]={}:ve[st]=le}function br(te,le){return le=String.fromCharCode.apply(null,le),te==null?le:te+le}var Xi,ss=typeof TextDecoder<"u",Fs,oa=typeof TextEncoder<"u";function Hs(te){if(oa)te=(Fs||(Fs=new TextEncoder)).encode(te);else{var le=void 0;le=le===void 0?!1:le;for(var ve=0,st=new Uint8Array(3*te.length),Vt=0;Vt<te.length;Vt++){var Ht=te.charCodeAt(Vt);if(128>Ht)st[ve++]=Ht;else{if(2048>Ht)st[ve++]=Ht>>6|192;else{if(55296<=Ht&&57343>=Ht){if(56319>=Ht&&Vt<te.length){var kt=te.charCodeAt(++Vt);if(56320<=kt&&57343>=kt){Ht=1024*(Ht-55296)+kt-56320+65536,st[ve++]=Ht>>18|240,st[ve++]=Ht>>12&63|128,st[ve++]=Ht>>6&63|128,st[ve++]=Ht&63|128;continue}else Vt--}if(le)throw Error("Found an unpaired surrogate");Ht=65533}st[ve++]=Ht>>12|224,st[ve++]=Ht>>6&63|128}st[ve++]=Ht&63|128}}te=st.subarray(0,ve)}return te}var pa={},gs=null;function Is(te,le){le===void 0&&(le=0),Yo(),le=pa[le];for(var ve=Array(Math.floor(te.length/3)),st=le[64]||"",Vt=0,Ht=0;Vt<te.length-2;Vt+=3){var kt=te[Vt],Qt=te[Vt+1],pn=te[Vt+2],X=le[kt>>2];kt=le[(kt&3)<<4|Qt>>4],Qt=le[(Qt&15)<<2|pn>>6],pn=le[pn&63],ve[Ht++]=X+kt+Qt+pn}switch(X=0,pn=st,te.length-Vt){case 2:X=te[Vt+1],pn=le[(X&15)<<2]||st;case 1:te=te[Vt],ve[Ht]=le[te>>2]+le[(te&3)<<4|X>>4]+pn+st}return ve.join("")}function Ea(te){var le=te.length,ve=3*le/4;ve%3?ve=Math.floor(ve):"=.".indexOf(te[le-1])!=-1&&(ve="=.".indexOf(te[le-2])!=-1?ve-2:ve-1);var st=new Uint8Array(ve),Vt=0;return sa(te,function(Ht){st[Vt++]=Ht}),st.subarray(0,Vt)}function sa(te,le){function ve(pn){for(;st<te.length;){var X=te.charAt(st++),be=gs[X];if(be!=null)return be;if(!/^[\s\xa0]*$/.test(X))throw Error("Unknown base64 encoding at char: "+X)}return pn}Yo();for(var st=0;;){var Vt=ve(-1),Ht=ve(0),kt=ve(64),Qt=ve(64);if(Qt===64&&Vt===-1)break;le(Vt<<2|Ht>>4),kt!=64&&(le(Ht<<4&240|kt>>2),Qt!=64&&le(kt<<6&192|Qt))}}function Yo(){if(!gs){gs={};for(var te="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),le=["+/=","+/","-_=","-_.","-_"],ve=0;5>ve;ve++){var st=te.concat(le[ve].split(""));pa[ve]=st;for(var Vt=0;Vt<st.length;Vt++){var Ht=st[Vt];gs[Ht]===void 0&&(gs[Ht]=Vt)}}}}var Wo=typeof Uint8Array.prototype.slice=="function",Ys;function Gs(te,le,ve){return le===ve?Ys||(Ys=new Uint8Array(0)):Wo?te.slice(le,ve):new Uint8Array(te.subarray(le,ve))}var di=0,Mi=0;function Ko(te,le){le=le===void 0?{}:le,le=le.v===void 0?!1:le.v,this.h=null,this.g=this.j=this.l=0,this.m=!1,this.v=le,te&&Jr(this,te)}function Jr(te,le){le=le.constructor===Uint8Array?le:le.constructor===ArrayBuffer?new Uint8Array(le):le.constructor===Array?new Uint8Array(le):le.constructor===String?Ea(le):le instanceof Uint8Array?new Uint8Array(le.buffer,le.byteOffset,le.byteLength):new Uint8Array(0),te.h=le,te.l=0,te.j=te.h.length,te.g=te.l}Ko.prototype.reset=function(){this.g=this.l};function Oi(te){for(var le=128,ve=0,st=0,Vt=0;4>Vt&&128<=le;Vt++)le=te.h[te.g++],ve|=(le&127)<<7*Vt;if(128<=le&&(le=te.h[te.g++],ve|=(le&127)<<28,st|=(le&127)>>4),128<=le)for(Vt=0;5>Vt&&128<=le;Vt++)le=te.h[te.g++],st|=(le&127)<<7*Vt+3;if(128>le)return te=ve>>>0,le=st>>>0,(st=le&2147483648)&&(te=~te+1>>>0,le=~le>>>0,te==0&&(le=le+1>>>0)),te=4294967296*le+(te>>>0),st?-te:te;te.m=!0}Ko.prototype.i=function(){var te=this.h,le=te[this.g],ve=le&127;return 128>le?(this.g+=1,ve):(le=te[this.g+1],ve|=(le&127)<<7,128>le?(this.g+=2,ve):(le=te[this.g+2],ve|=(le&127)<<14,128>le?(this.g+=3,ve):(le=te[this.g+3],ve|=(le&127)<<21,128>le?(this.g+=4,ve):(le=te[this.g+4],ve|=(le&15)<<28,128>le?(this.g+=5,ve>>>0):(this.g+=5,128<=te[this.g++]&&128<=te[this.g++]&&128<=te[this.g++]&&128<=te[this.g++]&&this.g++,ve)))))},Ko.prototype.o=function(){var te=this.h[this.g],le=this.h[this.g+1],ve=this.h[this.g+2],st=this.h[this.g+3];return this.g+=4,ve=(te<<0|le<<8|ve<<16|st<<24)>>>0,te=2*(ve>>31)+1,le=ve>>>23&255,ve&=8388607,le==255?ve?NaN:1/0*te:le==0?te*Math.pow(2,-149)*ve:te*Math.pow(2,le-150)*(ve+Math.pow(2,23))};var as=[];function eo(){this.g=new Uint8Array(64),this.h=0}eo.prototype.push=function(te){if(!(this.h+1<this.g.length)){var le=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(le)}this.g[this.h++]=te},eo.prototype.length=function(){return this.h},eo.prototype.end=function(){var te=this.g,le=this.h;return this.h=0,Gs(te,0,le)};function Dr(te,le){for(;127<le;)te.push(le&127|128),le>>>=7;te.push(le)}function Ci(te){var le={},ve=le.N===void 0?!1:le.N;this.o={v:le.v===void 0?!1:le.v},this.N=ve,le=this.o,as.length?(ve=as.pop(),le&&(ve.v=le.v),te&&Jr(ve,te),te=ve):te=new Ko(te,le),this.g=te,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}Ci.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};function Hi(te){var le=te.g;if((le=le.g==le.j)||(le=te.j)||(le=te.g,le=le.m||0>le.g||le.g>le.j),le)return!1;te.m=te.g.g,le=te.g.i();var ve=le&7;return ve!=0&&ve!=5&&ve!=1&&ve!=2&&ve!=3&&ve!=4?(te.j=!0,!1):(te.i=le,te.l=le>>>3,te.h=ve,!0)}function Nr(te){switch(te.h){case 0:if(te.h!=0)Nr(te);else{for(te=te.g;te.h[te.g]&128;)te.g++;te.g++}break;case 1:te.h!=1?Nr(te):(te=te.g,te.g+=8);break;case 2:if(te.h!=2)Nr(te);else{var le=te.g.i();te=te.g,te.g+=le}break;case 5:te.h!=5?Nr(te):(te=te.g,te.g+=4);break;case 3:le=te.l;do{if(!Hi(te)){te.j=!0;break}if(te.h==4){te.l!=le&&(te.j=!0);break}Nr(te)}while(1);break;default:te.j=!0}}function Fi(te,le,ve){var st=te.g.j,Vt=te.g.i(),Ht=te.g.g+Vt;if(te.g.j=Ht,ve(le,te),ve=Ht-te.g.g,ve!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+Vt+" bytes, instead read "+(Vt-ve)+" bytes, either the data ended unexpectedly or the message misreported its own length");return te.g.g=Ht,te.g.j=st,le}function Gr(te){return te.g.o()}function vi(te){var le=te.g.i();te=te.g;var ve=te.g;te.g+=le,te=te.h;var st;if(ss)(st=Xi)||(st=Xi=new TextDecoder("utf-8",{fatal:!1})),st=st.decode(te.subarray(ve,ve+le));else{le=ve+le;for(var Vt=[],Ht=null,kt,Qt,pn;ve<le;)kt=te[ve++],128>kt?Vt.push(kt):224>kt?ve>=le?Vt.push(65533):(Qt=te[ve++],194>kt||(Qt&192)!==128?(ve--,Vt.push(65533)):Vt.push((kt&31)<<6|Qt&63)):240>kt?ve>=le-1?Vt.push(65533):(Qt=te[ve++],(Qt&192)!==128||kt===224&&160>Qt||kt===237&&160<=Qt||((st=te[ve++])&192)!==128?(ve--,Vt.push(65533)):Vt.push((kt&15)<<12|(Qt&63)<<6|st&63)):244>=kt?ve>=le-2?Vt.push(65533):(Qt=te[ve++],(Qt&192)!==128||(kt<<28)+(Qt-144)>>30||((st=te[ve++])&192)!==128||((pn=te[ve++])&192)!==128?(ve--,Vt.push(65533)):(kt=(kt&7)<<18|(Qt&63)<<12|(st&63)<<6|pn&63,kt-=65536,Vt.push((kt>>10&1023)+55296,(kt&1023)+56320))):Vt.push(65533),8192<=Vt.length&&(Ht=br(Ht,Vt),Vt.length=0);st=br(Ht,Vt)}return st}function Di(te,le,ve){var st=te.g.i();for(st=te.g.g+st;te.g.g<st;)ve.push(le.call(te.g))}function qo(te,le){te.h==2?Di(te,Ko.prototype.o,le):le.push(Gr(te))}function xi(){this.h=[],this.i=0,this.g=new eo}function Mr(te,le){le.length!==0&&(te.h.push(le),te.i+=le.length)}function Xo(te){var le=te.i+te.g.length();if(le===0)return new Uint8Array(0);le=new Uint8Array(le);for(var ve=te.h,st=ve.length,Vt=0,Ht=0;Ht<st;Ht++){var kt=ve[Ht];kt.length!==0&&(le.set(kt,Vt),Vt+=kt.length)}return ve=te.g,st=ve.h,st!==0&&(le.set(ve.g.subarray(0,st),Vt),ve.h=0),te.h=[le],le}function zo(te,le,ve){if(ve!=null){Dr(te.g,8*le+5),te=te.g;var st=ve;st=(ve=0>st?1:0)?-st:st,st===0?0<1/st?di=Mi=0:(Mi=0,di=2147483648):isNaN(st)?(Mi=0,di=2147483647):34028234663852886e22<st?(Mi=0,di=(ve<<31|2139095040)>>>0):11754943508222875e-54>st?(st=Math.round(st/Math.pow(2,-149)),Mi=0,di=(ve<<31|st)>>>0):(le=Math.floor(Math.log(st)/Math.LN2),st*=Math.pow(2,-le),st=Math.round(8388608*st),16777216<=st&&++le,Mi=0,di=(ve<<31|le+127<<23|st&8388607)>>>0),ve=di,te.push(ve>>>0&255),te.push(ve>>>8&255),te.push(ve>>>16&255),te.push(ve>>>24&255)}}var Gi=typeof Uint8Array=="function";function Ms(te,le,ve){if(te!=null)return typeof te=="object"?Gi&&te instanceof Uint8Array?ve(te):cs(te,le,ve):le(te)}function cs(te,le,ve){if(Array.isArray(te)){for(var st=Array(te.length),Vt=0;Vt<te.length;Vt++)st[Vt]=Ms(te[Vt],le,ve);return Array.isArray(te)&&te.W&&Ei(st),st}st={};for(Vt in te)st[Vt]=Ms(te[Vt],le,ve);return st}function Jo(te){return typeof te=="number"?isFinite(te)?te:String(te):te}var us={W:{value:!0,configurable:!0}};function Ei(te){return Array.isArray(te)&&!Object.isFrozen(te)&&Object.defineProperties(te,us),te}var Bi;function Ti(te,le,ve){var st=Bi;Bi=null,te||(te=st),st=this.constructor.ca,te||(te=st?[st]:[]),this.j=st?0:-1,this.m=this.g=null,this.h=te;e:{if(st=this.h.length,te=st-1,st&&(st=this.h[te],!(st===null||typeof st!="object"||Array.isArray(st)||Gi&&st instanceof Uint8Array))){this.l=te-this.j,this.i=st;break e}le!==void 0&&-1<le?(this.l=Math.max(le,te+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(ve)for(le=0;le<ve.length;le++)te=ve[le],te<this.l?(te+=this.j,(st=this.h[te])?Ei(st):this.h[te]=_r):(_o(this),(st=this.i[te])?Ei(st):this.i[te]=_r)}var _r=Object.freeze(Ei([]));function _o(te){var le=te.l+te.j;te.h[le]||(te.i=te.h[le]={})}function Hr(te,le,ve){return le===-1?null:ve!==void 0&&ve||le>=te.l?te.i?te.i[le]:void 0:te.h[le+te.j]}function Pr(te,le){var ve=ve===void 0?!1:ve,st=Hr(te,le,ve);return st==null&&(st=_r),st===_r&&(st=Ei([]),_n(te,le,st,ve)),st}function ys(te){var le=Pr(te,3);if(te.m||(te.m={}),!te.m[3]){for(var ve=0;ve<le.length;ve++)le[ve]=+le[ve];te.m[3]=!0}return le}function fi(te,le,ve){return te=Hr(te,le),te??ve}function gr(te,le,ve){return te=Hr(te,le),te=te==null?te:+te,te??(ve===void 0?0:ve)}function _n(te,le,ve,st){st!==void 0&&st||le>=te.l?(_o(te),te.i[le]=ve):te.h[le+te.j]=ve}function $r(te,le,ve){if(ve===-1)return null;if(te.g||(te.g={}),!te.g[ve]){var st=Hr(te,ve,!1);st&&(te.g[ve]=new le(st))}return te.g[ve]}function Ui(te,le){te.g||(te.g={});var ve=te.g[1];if(!ve){var st=Pr(te,1);ve=[];for(var Vt=0;Vt<st.length;Vt++)ve[Vt]=new le(st[Vt]);te.g[1]=ve}return ve}function Yr(te,le,ve){var st=st===void 0?!1:st;te.g||(te.g={});var Vt=ve&&qt(ve);te.g[le]=ve,_n(te,le,Vt,st)}function Qr(te,le,ve,st){var Vt=Ui(te,ve);le=le||new ve,te=Pr(te,1),st!=null?(Vt.splice(st,0,le),te.splice(st,0,qt(le))):(Vt.push(le),te.push(qt(le)))}Ti.prototype.toJSON=function(){var te=qt(this);return cs(te,Jo,Is)};function qt(te,le){if(te.g)for(var ve in te.g){var st=te.g[ve];if(Array.isArray(st))for(var Vt=0;Vt<st.length;Vt++)st[Vt]&&qt(st[Vt]);else st&&qt(st)}return te.h}Ti.prototype.toString=function(){return qt(this).toString()};function an(te,le){if(te=te.o){Mr(le,le.g.end());for(var ve=0;ve<te.length;ve++)Mr(le,te[ve])}}function bn(te,le){if(le.h==4)return!1;var ve=le.m;return Nr(le),le.N||(le=Gs(le.g.h,ve,le.g.g),(ve=te.o)?ve.push(le):te.o=[le]),!0}function Wr(te){Ti.call(this,te,-1,ni)}Tn(Wr,Ti),Wr.prototype.getRows=function(){return Hr(this,1)},Wr.prototype.getCols=function(){return Hr(this,2)},Wr.prototype.getPackedDataList=function(){return ys(this)},Wr.prototype.getLayout=function(){return fi(this,4,0)};function si(te,le){for(;Hi(le);)switch(le.i){case 8:var ve=le.g.i();_n(te,1,ve);break;case 16:ve=le.g.i(),_n(te,2,ve);break;case 29:case 26:qo(le,te.getPackedDataList());break;case 32:ve=Oi(le.g),_n(te,4,ve);break;default:if(!bn(te,le))return te}return te}var ni=[3];function nr(te,le){var ve=void 0;return new(ve||(ve=n))(function(st,Vt){function Ht(pn){try{Qt(le.next(pn))}catch(X){Vt(X)}}function kt(pn){try{Qt(le.throw(pn))}catch(X){Vt(X)}}function Qt(pn){pn.done?st(pn.value):new ve(function(X){X(pn.value)}).then(Ht,kt)}Qt((le=le.apply(te,void 0)).next())})}function hi(te){Ti.call(this,te)}Tn(hi,Ti);function Yi(te,le){for(;Hi(le);)switch(le.i){case 8:var ve=le.g.i();_n(te,1,ve);break;case 21:ve=Gr(le),_n(te,2,ve);break;case 26:ve=vi(le),_n(te,3,ve);break;case 34:ve=vi(le),_n(te,4,ve);break;default:if(!bn(te,le))return te}return te}function es(te){Ti.call(this,te,-1,ts)}Tn(es,Ti),es.prototype.addClassification=function(te,le){return Qr(this,te,hi,le),this};var ts=[1];function vs(te){Ti.call(this,te)}Tn(vs,Ti);function ws(te,le){for(;Hi(le);)switch(le.i){case 13:var ve=Gr(le);_n(te,1,ve);break;case 21:ve=Gr(le),_n(te,2,ve);break;case 29:ve=Gr(le),_n(te,3,ve);break;case 37:ve=Gr(le),_n(te,4,ve);break;case 45:ve=Gr(le),_n(te,5,ve);break;default:if(!bn(te,le))return te}return te}function ji(te){Ti.call(this,te,-1,Fa)}Tn(ji,Ti);function ns(te){e:{var le=new ji;for(te=new Ci(te);Hi(te);)switch(te.i){case 10:var ve=Fi(te,new vs,ws);Qr(le,ve,vs,void 0);break;default:if(!bn(le,te))break e}}return le}var Fa=[1];function rs(te){Ti.call(this,te)}Tn(rs,Ti);function Ki(te){Ti.call(this,te,-1,Ks)}Tn(Ki,Ti),Ki.prototype.getVertexType=function(){return fi(this,1,0)},Ki.prototype.getPrimitiveType=function(){return fi(this,2,0)},Ki.prototype.getVertexBufferList=function(){return ys(this)},Ki.prototype.getIndexBufferList=function(){return Pr(this,4)};function Ns(te,le){for(;Hi(le);)switch(le.i){case 8:var ve=Oi(le.g);_n(te,1,ve);break;case 16:ve=Oi(le.g),_n(te,2,ve);break;case 29:case 26:qo(le,te.getVertexBufferList());break;case 32:case 34:ve=le;var st=te.getIndexBufferList();ve.h==2?Di(ve,Ko.prototype.i,st):st.push(ve.g.i());break;default:if(!bn(te,le))return te}return te}var Ks=[3,4];function Ro(te){Ti.call(this,te)}Tn(Ro,Ti),Ro.prototype.getMesh=function(){return $r(this,Ki,1)},Ro.prototype.getPoseTransformMatrix=function(){return $r(this,Wr,2)};function Ta(te){e:{var le=new Ro;for(te=new Ci(te);Hi(te);)switch(te.i){case 10:var ve=Fi(te,new Ki,Ns);Yr(le,1,ve);break;case 18:ve=Fi(te,new Wr,si),Yr(le,2,ve);break;default:if(!bn(le,te))break e}}return le}function is(te,le,ve){if(ve=te.createShader(ve===0?te.VERTEX_SHADER:te.FRAGMENT_SHADER),te.shaderSource(ve,le),te.compileShader(ve),!te.getShaderParameter(ve,te.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+te.getShaderInfoLog(ve));return ve}function Zs(te){return Ui(te,hi).map(function(le){return{index:fi(le,1,0),Y:gr(le,2),label:Hr(le,3)!=null?fi(le,3,""):void 0,displayName:Hr(le,4)!=null?fi(le,4,""):void 0}})}function $s(te){return{x:gr(te,1),y:gr(te,2),z:gr(te,3),visibility:Hr(te,4)!=null?gr(te,4):void 0}}function Aa(te,le){this.h=te,this.g=le,this.l=0}function ls(te,le,ve){return Qs(te,le),typeof te.g.canvas.transferToImageBitmap=="function"?n.resolve(te.g.canvas.transferToImageBitmap()):ve?n.resolve(te.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(te.g.canvas):(te.i===void 0&&(te.i=document.createElement("canvas")),new n(function(st){te.i.height=te.g.canvas.height,te.i.width=te.g.canvas.width,te.i.getContext("2d",{}).drawImage(te.g.canvas,0,0,te.g.canvas.width,te.g.canvas.height),st(te.i)}))}function Qs(te,le){var ve=te.g;if(te.m===void 0){var st=is(ve,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Vt=is(ve,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Ht=ve.createProgram();if(ve.attachShader(Ht,st),ve.attachShader(Ht,Vt),ve.linkProgram(Ht),!ve.getProgramParameter(Ht,ve.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+ve.getProgramInfoLog(Ht));st=te.m=Ht,ve.useProgram(st),Vt=ve.getUniformLocation(st,"sampler0"),te.j={I:ve.getAttribLocation(st,"aVertex"),H:ve.getAttribLocation(st,"aTex"),da:Vt},te.s=ve.createBuffer(),ve.bindBuffer(ve.ARRAY_BUFFER,te.s),ve.enableVertexAttribArray(te.j.I),ve.vertexAttribPointer(te.j.I,2,ve.FLOAT,!1,0,0),ve.bufferData(ve.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),ve.STATIC_DRAW),ve.bindBuffer(ve.ARRAY_BUFFER,null),te.o=ve.createBuffer(),ve.bindBuffer(ve.ARRAY_BUFFER,te.o),ve.enableVertexAttribArray(te.j.H),ve.vertexAttribPointer(te.j.H,2,ve.FLOAT,!1,0,0),ve.bufferData(ve.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),ve.STATIC_DRAW),ve.bindBuffer(ve.ARRAY_BUFFER,null),ve.uniform1i(Vt,0)}st=te.j,ve.useProgram(te.m),ve.canvas.width=le.width,ve.canvas.height=le.height,ve.viewport(0,0,le.width,le.height),ve.activeTexture(ve.TEXTURE0),te.h.bindTexture2d(le.glName),ve.enableVertexAttribArray(st.I),ve.bindBuffer(ve.ARRAY_BUFFER,te.s),ve.vertexAttribPointer(st.I,2,ve.FLOAT,!1,0,0),ve.enableVertexAttribArray(st.H),ve.bindBuffer(ve.ARRAY_BUFFER,te.o),ve.vertexAttribPointer(st.H,2,ve.FLOAT,!1,0,0),ve.bindFramebuffer(ve.DRAW_FRAMEBUFFER?ve.DRAW_FRAMEBUFFER:ve.FRAMEBUFFER,null),ve.clearColor(0,0,0,0),ve.clear(ve.COLOR_BUFFER_BIT),ve.colorMask(!0,!0,!0,!0),ve.drawArrays(ve.TRIANGLE_FAN,0,4),ve.disableVertexAttribArray(st.I),ve.disableVertexAttribArray(st.H),ve.bindBuffer(ve.ARRAY_BUFFER,null),te.h.bindTexture2d(0)}function Ya(te){this.g=te}var Ka=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function qs(te,le){return le+te}function aa(te,le){window[te]=le}function oe(te){var le=document.createElement("script");return le.setAttribute("src",te),le.setAttribute("crossorigin","anonymous"),new n(function(ve){le.addEventListener("load",function(){ve()},!1),le.addEventListener("error",function(){ve()},!1),document.body.appendChild(le)})}function Ie(){return nr(this,function te(){return ai(te,function(le){switch(le.g){case 1:return le.m=2,jt(le,WebAssembly.instantiate(Ka),4);case 4:le.g=3,le.m=0;break;case 2:return le.m=0,le.j=null,le.return(!1);case 3:return le.return(!0)}})})}function we(te){if(this.g=te,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=te&&te.locateFile||qs,typeof window=="object")var le=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")le=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=le,te.options){le=$e(Object.keys(te.options));for(var ve=le.next();!ve.done;ve=le.next()){ve=ve.value;var st=te.options[ve].default;st!==void 0&&(this.j[ve]=typeof st=="function"?st():st)}}}I=we.prototype,I.close=function(){return this.i&&this.i.delete(),n.resolve()};function St(te,le){return te.g.files===void 0?[]:typeof te.g.files=="function"?te.g.files(le):te.g.files}function Bt(te){return nr(te,function le(){var ve=this,st,Vt,Ht,kt,Qt,pn,X,be,ke,ze,yt;return ai(le,function(Nt){switch(Nt.g){case 1:return st=ve,ve.R?(Vt=St(ve,ve.j),jt(Nt,Ie(),2)):Nt.return();case 2:if(Ht=Nt.h,typeof window=="object")return aa("createMediapipeSolutionsWasm",{locateFile:ve.locateFile}),aa("createMediapipeSolutionsPackedAssets",{locateFile:ve.locateFile}),pn=Vt.filter(function(Ot){return Ot.data!==void 0}),X=Vt.filter(function(Ot){return Ot.data===void 0}),be=n.all(pn.map(function(Ot){var rn=sn(st,Ot.url);if(Ot.path!==void 0){var _t=Ot.path;rn=rn.then(function(kn){return st.overrideFile(_t,kn),n.resolve(kn)})}return rn})),ke=n.all(X.map(function(Ot){return Ot.simd===void 0||Ot.simd&&Ht||!Ot.simd&&!Ht?oe(st.locateFile(Ot.url,st.S)):n.resolve()})).then(function(){return nr(st,function Ot(){var rn,_t,kn=this;return ai(Ot,function(Yn){if(Yn.g==1)return rn=window.createMediapipeSolutionsWasm,_t=window.createMediapipeSolutionsPackedAssets,jt(Yn,rn(_t),2);kn.h=Yn.h,Yn.g=0})})}),ze=function(){return nr(st,function Ot(){var rn=this;return ai(Ot,function(_t){return rn.g.graph&&rn.g.graph.url?_t=jt(_t,sn(rn,rn.g.graph.url),0):(_t.g=0,_t=void 0),_t})})}(),jt(Nt,n.all([ke,be,ze]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return kt=Vt.filter(function(Ot){return Ot.simd===void 0||Ot.simd&&Ht||!Ot.simd&&!Ht}).map(function(Ot){return st.locateFile(Ot.url,st.S)}),importScripts.apply(null,lt(kt)),jt(Nt,createMediapipeSolutionsWasm(Module),6);case 6:ve.h=Nt.h,ve.l=new OffscreenCanvas(1,1),ve.h.canvas=ve.l,Qt=ve.h.GL.createContext(ve.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),ve.h.GL.makeContextCurrent(Qt),Nt.g=4;break;case 7:if(ve.l=document.createElement("canvas"),yt=ve.l.getContext("webgl2",{}),!yt&&(yt=ve.l.getContext("webgl",{}),!yt))return alert("Failed to create WebGL canvas context when passing video frame."),Nt.return();ve.D=yt,ve.h.canvas=ve.l,ve.h.createContext(ve.l,!0,!0,{});case 4:ve.i=new ve.h.SolutionWasm,ve.R=!1,Nt.g=0}})})}function dn(te){return nr(te,function le(){var ve=this,st,Vt,Ht,kt,Qt,pn,X,be;return ai(le,function(ke){if(ke.g==1){if(ve.g.graph&&ve.g.graph.url&&ve.P===ve.g.graph.url)return ke.return();if(ve.o=!0,!ve.g.graph||!ve.g.graph.url){ke.g=2;return}return ve.P=ve.g.graph.url,jt(ke,sn(ve,ve.g.graph.url),3)}for(ke.g!=2&&(st=ke.h,ve.i.loadGraph(st)),Vt=$e(Object.keys(ve.B)),Ht=Vt.next();!Ht.done;Ht=Vt.next())kt=Ht.value,ve.i.overrideFile(kt,ve.B[kt]);if(ve.B={},ve.g.listeners)for(Qt=$e(ve.g.listeners),pn=Qt.next();!pn.done;pn=Qt.next())X=pn.value,Or(ve,X);be=ve.j,ve.j={},ve.setOptions(be),ke.g=0})})}I.reset=function(){return nr(this,function te(){var le=this;return ai(te,function(ve){le.i&&(le.i.reset(),le.m={},le.s={}),ve.g=0})})},I.setOptions=function(te,le){var ve=this;if(le=le||this.g.options){for(var st=[],Vt=[],Ht={},kt=$e(Object.keys(te)),Qt=kt.next();!Qt.done;Ht={K:Ht.K,L:Ht.L},Qt=kt.next()){var pn=Qt.value;pn in this.j&&this.j[pn]===te[pn]||(this.j[pn]=te[pn],Qt=le[pn],Qt!==void 0&&(Qt.onChange&&(Ht.K=Qt.onChange,Ht.L=te[pn],st.push(function(X){return function(){return nr(ve,function be(){var ke,ze=this;return ai(be,function(yt){if(yt.g==1)return jt(yt,X.K(X.L),2);ke=yt.h,ke===!0&&(ze.o=!0),yt.g=0})})}}(Ht))),Qt.graphOptionXref&&(pn={valueNumber:Qt.type===1?te[pn]:0,valueBoolean:Qt.type===0?te[pn]:!1,valueString:Qt.type===2?te[pn]:""},Qt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),Qt.graphOptionXref),pn),Vt.push(Qt))))}(st.length!==0||Vt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(Vt),this.u=(this.u===void 0?[]:this.u).concat(st))}};function Xt(te){return nr(te,function le(){var ve=this,st,Vt,Ht,kt,Qt,pn,X;return ai(le,function(be){switch(be.g){case 1:if(!ve.o)return be.return();if(!ve.u){be.g=2;break}st=$e(ve.u),Vt=st.next();case 3:if(Vt.done){be.g=5;break}return Ht=Vt.value,jt(be,Ht(),4);case 4:Vt=st.next(),be.g=3;break;case 5:ve.u=void 0;case 2:if(ve.A){for(kt=new ve.h.GraphOptionChangeRequestList,Qt=$e(ve.A),pn=Qt.next();!pn.done;pn=Qt.next())X=pn.value,kt.push_back(X);ve.i.changeOptions(kt),kt.delete(),ve.A=void 0}ve.o=!1,be.g=0}})})}I.initialize=function(){return nr(this,function te(){var le=this;return ai(te,function(ve){return ve.g==1?jt(ve,Bt(le),2):ve.g!=3?jt(ve,dn(le),3):jt(ve,Xt(le),0)})})};function sn(te,le){return nr(te,function ve(){var st=this,Vt,Ht;return ai(ve,function(kt){return le in st.F?kt.return(st.F[le]):(Vt=st.locateFile(le,""),Ht=fetch(Vt).then(function(Qt){return Qt.arrayBuffer()}),st.F[le]=Ht,kt.return(Ht))})})}I.overrideFile=function(te,le){this.i?this.i.overrideFile(te,le):this.B[te]=le},I.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},I.send=function(te,le){return nr(this,function ve(){var st=this,Vt,Ht,kt,Qt,pn,X,be,ke,ze;return ai(ve,function(yt){switch(yt.g){case 1:return st.g.inputs?(Vt=1e3*(le??performance.now()),jt(yt,st.C,2)):yt.return();case 2:return jt(yt,st.initialize(),3);case 3:for(Ht=new st.h.PacketDataList,kt=$e(Object.keys(te)),Qt=kt.next();!Qt.done;Qt=kt.next())if(pn=Qt.value,X=st.g.inputs[pn]){e:{var Nt=st,Ot=te[pn];switch(X.type){case"video":var rn=Nt.m[X.stream];if(rn||(rn=new Aa(Nt.h,Nt.D),Nt.m[X.stream]=rn),Nt=rn,Nt.l===0&&(Nt.l=Nt.h.createTexture()),typeof HTMLVideoElement<"u"&&Ot instanceof HTMLVideoElement){var _t=Ot.videoWidth;rn=Ot.videoHeight}else typeof HTMLImageElement<"u"&&Ot instanceof HTMLImageElement?(_t=Ot.naturalWidth,rn=Ot.naturalHeight):(_t=Ot.width,rn=Ot.height);rn={glName:Nt.l,width:_t,height:rn},_t=Nt.g,_t.canvas.width=rn.width,_t.canvas.height=rn.height,_t.activeTexture(_t.TEXTURE0),Nt.h.bindTexture2d(Nt.l),_t.texImage2D(_t.TEXTURE_2D,0,_t.RGBA,_t.RGBA,_t.UNSIGNED_BYTE,Ot),Nt.h.bindTexture2d(0),Nt=rn;break e;case"detections":for(rn=Nt.m[X.stream],rn||(rn=new Ya(Nt.h),Nt.m[X.stream]=rn),Nt=rn,Nt.data||(Nt.data=new Nt.g.DetectionListData),Nt.data.reset(Ot.length),rn=0;rn<Ot.length;++rn){_t=Ot[rn];var kn=Nt.data,Yn=kn.setBoundingBox,Ar=rn,qn=_t.T,xn=new rs;_n(xn,1,qn.Z),_n(xn,2,qn.$),_n(xn,3,qn.height),_n(xn,4,qn.width),_n(xn,5,qn.rotation),_n(xn,6,qn.X);var zn=qn=new xi;zo(zn,1,Hr(xn,1)),zo(zn,2,Hr(xn,2)),zo(zn,3,Hr(xn,3)),zo(zn,4,Hr(xn,4)),zo(zn,5,Hr(xn,5));var tr=Hr(xn,6);if(tr!=null&&tr!=null){Dr(zn.g,48);var lr=zn.g,hr=tr;tr=0>hr,hr=Math.abs(hr);var B=hr>>>0;for(hr=Math.floor((hr-B)/4294967296),hr>>>=0,tr&&(hr=~hr>>>0,B=(~B>>>0)+1,4294967295<B&&(B=0,hr++,4294967295<hr&&(hr=0))),di=B,Mi=hr,tr=di,B=Mi;0<B||127<tr;)lr.push(tr&127|128),tr=(tr>>>7|B<<25)>>>0,B>>>=7;lr.push(tr)}if(an(xn,zn),qn=Xo(qn),Yn.call(kn,Ar,qn),_t.O)for(kn=0;kn<_t.O.length;++kn)xn=_t.O[kn],zn=!!xn.visibility,Yn=Nt.data,Ar=Yn.addNormalizedLandmark,qn=rn,xn=Object.assign(Object.assign({},xn),{visibility:zn?xn.visibility:0}),zn=new vs,_n(zn,1,xn.x),_n(zn,2,xn.y),_n(zn,3,xn.z),xn.visibility&&_n(zn,4,xn.visibility),lr=xn=new xi,zo(lr,1,Hr(zn,1)),zo(lr,2,Hr(zn,2)),zo(lr,3,Hr(zn,3)),zo(lr,4,Hr(zn,4)),zo(lr,5,Hr(zn,5)),an(zn,lr),xn=Xo(xn),Ar.call(Yn,qn,xn);if(_t.M)for(kn=0;kn<_t.M.length;++kn){if(Yn=Nt.data,Ar=Yn.addClassification,qn=rn,xn=_t.M[kn],zn=new hi,_n(zn,2,xn.Y),xn.index&&_n(zn,1,xn.index),xn.label&&_n(zn,3,xn.label),xn.displayName&&_n(zn,4,xn.displayName),lr=xn=new xi,B=Hr(zn,1),B!=null&&B!=null)if(Dr(lr.g,8),tr=lr.g,0<=B)Dr(tr,B);else{for(hr=0;9>hr;hr++)tr.push(B&127|128),B>>=7;tr.push(1)}zo(lr,2,Hr(zn,2)),tr=Hr(zn,3),tr!=null&&(tr=Hs(tr),Dr(lr.g,26),Dr(lr.g,tr.length),Mr(lr,lr.g.end()),Mr(lr,tr)),tr=Hr(zn,4),tr!=null&&(tr=Hs(tr),Dr(lr.g,34),Dr(lr.g,tr.length),Mr(lr,lr.g.end()),Mr(lr,tr)),an(zn,lr),xn=Xo(xn),Ar.call(Yn,qn,xn)}}Nt=Nt.data;break e;default:Nt={}}}switch(be=Nt,ke=X.stream,X.type){case"video":Ht.pushTexture2d(Object.assign(Object.assign({},be),{stream:ke,timestamp:Vt}));break;case"detections":ze=be,ze.stream=ke,ze.timestamp=Vt,Ht.pushDetectionList(ze);break;default:throw Error("Unknown input config type: '"+X.type+"'")}}return st.i.send(Ht),jt(yt,st.C,4);case 4:Ht.delete(),yt.g=0}})})};function An(te,le,ve){return nr(te,function st(){var Vt,Ht,kt,Qt,pn,X,be=this,ke,ze,yt,Nt,Ot,rn,_t,kn;return ai(st,function(Yn){switch(Yn.g){case 1:if(!ve)return Yn.return(le);for(Vt={},Ht=0,kt=$e(Object.keys(ve)),Qt=kt.next();!Qt.done;Qt=kt.next())pn=Qt.value,X=ve[pn],typeof X!="string"&&X.type==="texture"&&le[X.stream]!==void 0&&++Ht;1<Ht&&(be.G=!1),ke=$e(Object.keys(ve)),Qt=ke.next();case 2:if(Qt.done){Yn.g=4;break}if(ze=Qt.value,yt=ve[ze],typeof yt=="string")return _t=Vt,kn=ze,jt(Yn,Qn(be,ze,le[yt]),14);if(Nt=le[yt.stream],yt.type==="detection_list"){if(Nt){for(var Ar=Nt.getRectList(),qn=Nt.getLandmarksList(),xn=Nt.getClassificationsList(),zn=[],tr=0;tr<Ar.size();++tr){var lr=Ar.get(tr);e:{var hr=new rs;for(lr=new Ci(lr);Hi(lr);)switch(lr.i){case 13:var B=Gr(lr);_n(hr,1,B);break;case 21:B=Gr(lr),_n(hr,2,B);break;case 29:B=Gr(lr),_n(hr,3,B);break;case 37:B=Gr(lr),_n(hr,4,B);break;case 45:B=Gr(lr),_n(hr,5,B);break;case 48:B=Oi(lr.g),_n(hr,6,B);break;default:if(!bn(hr,lr))break e}}hr={Z:gr(hr,1),$:gr(hr,2),height:gr(hr,3),width:gr(hr,4),rotation:gr(hr,5,0),X:fi(hr,6,0)},lr=Ui(ns(qn.get(tr)),vs).map($s);var ge=xn.get(tr);e:for(B=new es,ge=new Ci(ge);Hi(ge);)switch(ge.i){case 10:B.addClassification(Fi(ge,new hi,Yi));break;default:if(!bn(B,ge))break e}hr={T:hr,O:lr,M:Zs(B)},zn.push(hr)}Ar=zn}else Ar=[];Vt[ze]=Ar,Yn.g=7;break}if(yt.type==="proto_list"){if(Nt){for(Ar=Array(Nt.size()),qn=0;qn<Nt.size();qn++)Ar[qn]=Nt.get(qn);Nt.delete()}else Ar=[];Vt[ze]=Ar,Yn.g=7;break}if(Nt===void 0){Yn.g=3;break}if(yt.type==="float_list"){Vt[ze]=Nt,Yn.g=7;break}if(yt.type==="proto"){Vt[ze]=Nt,Yn.g=7;break}if(yt.type!=="texture")throw Error("Unknown output config type: '"+yt.type+"'");return Ot=be.s[ze],Ot||(Ot=new Aa(be.h,be.D),be.s[ze]=Ot),jt(Yn,ls(Ot,Nt,be.G),13);case 13:rn=Yn.h,Vt[ze]=rn;case 7:yt.transform&&Vt[ze]&&(Vt[ze]=yt.transform(Vt[ze])),Yn.g=3;break;case 14:_t[kn]=Yn.h;case 3:Qt=ke.next(),Yn.g=2;break;case 4:return Yn.return(Vt)}})})}function Qn(te,le,ve){return nr(te,function st(){var Vt=this,Ht;return ai(st,function(kt){return typeof ve=="number"||ve instanceof Uint8Array||ve instanceof Vt.h.Uint8BlobList?kt.return(ve):ve instanceof Vt.h.Texture2dDataOut?(Ht=Vt.s[le],Ht||(Ht=new Aa(Vt.h,Vt.D),Vt.s[le]=Ht),kt.return(ls(Ht,ve,Vt.G))):kt.return(void 0)})})}function Or(te,le){for(var ve=le.name||"$",st=[].concat(lt(le.wants)),Vt=new te.h.StringList,Ht=$e(le.wants),kt=Ht.next();!kt.done;kt=Ht.next())Vt.push_back(kt.value);Ht=te.h.PacketListener.implement({onResults:function(Qt){for(var pn={},X=0;X<le.wants.length;++X)pn[st[X]]=Qt.get(X);var be=te.listeners[ve];be&&(te.C=An(te,pn,le.outs).then(function(ke){ke=be(ke);for(var ze=0;ze<le.wants.length;++ze){var yt=pn[st[ze]];typeof yt=="object"&&yt.hasOwnProperty&&yt.hasOwnProperty("delete")&&yt.delete()}ke&&(te.C=ke)}))}}),te.i.attachMultiListener(Vt,Ht),Vt.delete()}I.onResults=function(te,le){this.listeners[le||"$"]=te},Zi("Solution",we),Zi("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Sr(te){te=Ta(te);var le=te.getMesh();if(!le)return te;var ve=new Float32Array(le.getVertexBufferList());le.getVertexBufferList=function(){return ve};var st=new Uint32Array(le.getIndexBufferList());return le.getIndexBufferList=function(){return st},te}var jr={files:[{url:"face_mesh_solution_packed_assets_loader.js"},{simd:!0,url:"face_mesh_solution_simd_wasm_bin.js"},{simd:!1,url:"face_mesh_solution_wasm_bin.js"}],graph:{url:"face_mesh.binarypb"},listeners:[{wants:["multi_face_geometry","image_transformed","multi_face_landmarks"],outs:{image:"image_transformed",multiFaceGeometry:{type:"proto_list",stream:"multi_face_geometry",transform:function(te){return te.map(Sr)}},multiFaceLandmarks:{type:"proto_list",stream:"multi_face_landmarks",transform:function(te){return te.map(function(le){return Ui(ns(le),vs).map($s)})}}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},enableFaceGeometry:{type:0,graphOptionXref:{calculatorName:"EnableFaceGeometryConstant",calculatorType:"ConstantSidePacketCalculator",fieldName:"bool_value"}},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumFaces:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorNumFaces",fieldName:"int_value"}},refineLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorRefineLandmarks",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"facelandmarkfrontgpu__facedetectionshortrangegpu__facedetectionshortrangecommon__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"facelandmarkfrontgpu__facelandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}},cameraNear:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"near"}},cameraFar:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"far"}},cameraVerticalFovDegrees:{type:1,graphOptionXref:{calculatorType:"FaceGeometryEnvGeneratorCalculator",fieldName:"vertical_fov_degrees"}}}},Tr=[[61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]],ar=[[263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]],wr=[[276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]],Br=[[33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]],ri=[[46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]],pi=[[10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]],bi=[].concat(lt(Tr),lt(ar),lt(wr),lt(Br),lt(ri),lt(pi));function zi(te){te=te||{},te=Object.assign(Object.assign({},jr),te),this.g=new we(te)}I=zi.prototype,I.close=function(){return this.g.close(),n.resolve()},I.onResults=function(te){this.g.onResults(te)},I.initialize=function(){return nr(this,function te(){var le=this;return ai(te,function(ve){return jt(ve,le.g.initialize(),0)})})},I.reset=function(){this.g.reset()},I.send=function(te){return nr(this,function le(){var ve=this;return ai(le,function(st){return jt(st,ve.g.send(te),0)})})},I.setOptions=function(te){this.g.setOptions(te)},Zi("FACE_GEOMETRY",{Layout:{COLUMN_MAJOR:0,ROW_MAJOR:1,0:"COLUMN_MAJOR",1:"ROW_MAJOR"},PrimitiveType:{TRIANGLE:0,0:"TRIANGLE"},VertexType:{VERTEX_PT:0,0:"VERTEX_PT"},DEFAULT_CAMERA_PARAMS:{verticalFovDegrees:63,near:1,far:1e4}}),Zi("FaceMesh",zi),Zi("FACEMESH_LIPS",Tr),Zi("FACEMESH_LEFT_EYE",ar),Zi("FACEMESH_LEFT_EYEBROW",wr),Zi("FACEMESH_LEFT_IRIS",[[474,475],[475,476],[476,477],[477,474]]),Zi("FACEMESH_RIGHT_EYE",Br),Zi("FACEMESH_RIGHT_EYEBROW",ri),Zi("FACEMESH_RIGHT_IRIS",[[469,470],[470,471],[471,472],[472,469]]),Zi("FACEMESH_FACE_OVAL",pi),Zi("FACEMESH_CONTOURS",bi),Zi("FACEMESH_TESSELATION",[[127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]]),Zi("matrixDataToMatrix",function(te){for(var le=te.getCols(),ve=te.getRows(),st=te.getPackedDataList(),Vt=[],Ht=0;Ht<ve;Ht++)Vt.push(Array(le));for(Ht=0;Ht<ve;Ht++)for(var kt=0;kt<le;kt++){var Qt=te.getLayout()===1?Ht*le+kt:kt*ve+Ht;Vt[Ht][kt]=st[Qt]}return Vt}),Zi("VERSION","0.4.1633559619")}).call(Sa);const ha={};(function(){var I;function x(E){var D=0;return function(){return D<E.length?{done:!1,value:E[D++]}:{done:!0}}}var N=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,D,J){return E==Array.prototype||E==Object.prototype||(E[D]=J.value),E};function ie(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var D=0;D<E.length;++D){var J=E[D];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var pe=ie(this);function Xe(E,D){if(D)e:{var J=pe;E=E.split(".");for(var se=0;se<E.length-1;se++){var Me=E[se];if(!(Me in J))break e;J=J[Me]}E=E[E.length-1],se=J[E],D=D(se),D!=se&&D!=null&&N(J,E,{configurable:!0,writable:!0,value:D})}}Xe("Symbol",function(E){function D(qe){if(this instanceof D)throw new TypeError("Symbol is not a constructor");return new J(se+(qe||"")+"_"+Me++,qe)}function J(qe,ot){this.g=qe,N(this,"description",{configurable:!0,writable:!0,value:ot})}if(E)return E;J.prototype.toString=function(){return this.g};var se="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Me=0;return D}),Xe("Symbol.iterator",function(E){if(E)return E;E=Symbol("Symbol.iterator");for(var D="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),J=0;J<D.length;J++){var se=pe[D[J]];typeof se=="function"&&typeof se.prototype[E]!="function"&&N(se.prototype,E,{configurable:!0,writable:!0,value:function(){return rt(x(this))}})}return E});function rt(E){return E={next:E},E[Symbol.iterator]=function(){return this},E}function $e(E){var D=typeof Symbol<"u"&&Symbol.iterator&&E[Symbol.iterator];return D?D.call(E):{next:x(E)}}function lt(E){if(!(E instanceof Array)){E=$e(E);for(var D,J=[];!(D=E.next()).done;)J.push(D.value);E=J}return E}var zt=typeof Object.create=="function"?Object.create:function(E){function D(){}return D.prototype=E,new D},ln;if(typeof Object.setPrototypeOf=="function")ln=Object.setPrototypeOf;else{var hn;e:{var ir={a:!0},ur={};try{ur.__proto__=ir,hn=ur.a;break e}catch{}hn=!1}ln=hn?function(E,D){if(E.__proto__=D,E.__proto__!==D)throw new TypeError(E+" is not extensible");return E}:null}var vn=ln;function Tn(E,D){if(E.prototype=zt(D.prototype),E.prototype.constructor=E,vn)vn(E,D);else for(var J in D)if(J!="prototype")if(Object.defineProperties){var se=Object.getOwnPropertyDescriptor(D,J);se&&Object.defineProperty(E,J,se)}else E[J]=D[J];E.ka=D.prototype}function Ir(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Er(E){if(E.l)throw new TypeError("Generator is already running");E.l=!0}Ir.prototype.o=function(E){this.h=E};function zr(E,D){E.j={V:D,X:!0},E.g=E.m||E.s}Ir.prototype.return=function(E){this.j={return:E},this.g=this.s};function jt(E,D,J){return E.g=J,{value:D}}function Rs(E){this.g=new Ir,this.h=E}function ps(E,D){Er(E.g);var J=E.g.i;return J?Ni(E,"return"in J?J.return:function(se){return{value:se,done:!0}},D,E.g.return):(E.g.return(D),Ur(E))}function Ni(E,D,J,se){try{var Me=D.call(E.g.i,J);if(!(Me instanceof Object))throw new TypeError("Iterator result "+Me+" is not an object");if(!Me.done)return E.g.l=!1,Me;var qe=Me.value}catch(ot){return E.g.i=null,zr(E.g,ot),Ur(E)}return E.g.i=null,se.call(E.g,qe),Ur(E)}function Ur(E){for(;E.g.g;)try{var D=E.h(E.g);if(D)return E.g.l=!1,{value:D.value,done:!1}}catch(J){E.g.h=void 0,zr(E.g,J)}if(E.g.l=!1,E.g.j){if(D=E.g.j,E.g.j=null,D.X)throw D.V;return{value:D.return,done:!0}}return{value:void 0,done:!0}}function Za(E){this.next=function(D){return Er(E.g),E.g.i?D=Ni(E,E.g.i.next,D,E.g.o):(E.g.o(D),D=Ur(E)),D},this.throw=function(D){return Er(E.g),E.g.i?D=Ni(E,E.g.i.throw,D,E.g.o):(zr(E.g,D),D=Ur(E)),D},this.return=function(D){return ps(E,D)},this[Symbol.iterator]=function(){return this}}function ai(E){function D(se){return E.next(se)}function J(se){return E.throw(se)}return new n(function(se,Me){function qe(ot){ot.done?se(ot.value):n.resolve(ot.value).then(D,J).then(qe,Me)}qe(E.next())})}function Gn(E){return ai(new Za(new Rs(E)))}Xe("Promise",function(E){function D(ot){this.h=0,this.i=void 0,this.g=[],this.o=!1;var wt=this.j();try{ot(wt.resolve,wt.reject)}catch(Gt){wt.reject(Gt)}}function J(){this.g=null}function se(ot){return ot instanceof D?ot:new D(function(wt){wt(ot)})}if(E)return E;J.prototype.h=function(ot){if(this.g==null){this.g=[];var wt=this;this.i(function(){wt.l()})}this.g.push(ot)};var Me=pe.setTimeout;J.prototype.i=function(ot){Me(ot,0)},J.prototype.l=function(){for(;this.g&&this.g.length;){var ot=this.g;this.g=[];for(var wt=0;wt<ot.length;++wt){var Gt=ot[wt];ot[wt]=null;try{Gt()}catch(Yt){this.j(Yt)}}}this.g=null},J.prototype.j=function(ot){this.i(function(){throw ot})},D.prototype.j=function(){function ot(Yt){return function(Kt){Gt||(Gt=!0,Yt.call(wt,Kt))}}var wt=this,Gt=!1;return{resolve:ot(this.D),reject:ot(this.l)}},D.prototype.D=function(ot){if(ot===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(ot instanceof D)this.G(ot);else{e:switch(typeof ot){case"object":var wt=ot!=null;break e;case"function":wt=!0;break e;default:wt=!1}wt?this.A(ot):this.m(ot)}},D.prototype.A=function(ot){var wt=void 0;try{wt=ot.then}catch(Gt){this.l(Gt);return}typeof wt=="function"?this.H(wt,ot):this.m(ot)},D.prototype.l=function(ot){this.s(2,ot)},D.prototype.m=function(ot){this.s(1,ot)},D.prototype.s=function(ot,wt){if(this.h!=0)throw Error("Cannot settle("+ot+", "+wt+"): Promise already settled in state"+this.h);this.h=ot,this.i=wt,this.h===2&&this.F(),this.B()},D.prototype.F=function(){var ot=this;Me(function(){if(ot.C()){var wt=pe.console;typeof wt<"u"&&wt.error(ot.i)}},1)},D.prototype.C=function(){if(this.o)return!1;var ot=pe.CustomEvent,wt=pe.Event,Gt=pe.dispatchEvent;return typeof Gt>"u"?!0:(typeof ot=="function"?ot=new ot("unhandledrejection",{cancelable:!0}):typeof wt=="function"?ot=new wt("unhandledrejection",{cancelable:!0}):(ot=pe.document.createEvent("CustomEvent"),ot.initCustomEvent("unhandledrejection",!1,!0,ot)),ot.promise=this,ot.reason=this.i,Gt(ot))},D.prototype.B=function(){if(this.g!=null){for(var ot=0;ot<this.g.length;++ot)qe.h(this.g[ot]);this.g=null}};var qe=new J;return D.prototype.G=function(ot){var wt=this.j();ot.K(wt.resolve,wt.reject)},D.prototype.H=function(ot,wt){var Gt=this.j();try{ot.call(wt,Gt.resolve,Gt.reject)}catch(Yt){Gt.reject(Yt)}},D.prototype.then=function(ot,wt){function Gt(In,wn){return typeof In=="function"?function(Xn){try{Yt(In(Xn))}catch(Wn){Kt(Wn)}}:wn}var Yt,Kt,fn=new D(function(In,wn){Yt=In,Kt=wn});return this.K(Gt(ot,Yt),Gt(wt,Kt)),fn},D.prototype.catch=function(ot){return this.then(void 0,ot)},D.prototype.K=function(ot,wt){function Gt(){switch(Yt.h){case 1:ot(Yt.i);break;case 2:wt(Yt.i);break;default:throw Error("Unexpected state: "+Yt.h)}}var Yt=this;this.g==null?qe.h(Gt):this.g.push(Gt),this.o=!0},D.resolve=se,D.reject=function(ot){return new D(function(wt,Gt){Gt(ot)})},D.race=function(ot){return new D(function(wt,Gt){for(var Yt=$e(ot),Kt=Yt.next();!Kt.done;Kt=Yt.next())se(Kt.value).K(wt,Gt)})},D.all=function(ot){var wt=$e(ot),Gt=wt.next();return Gt.done?se([]):new D(function(Yt,Kt){function fn(Xn){return function(Wn){In[Xn]=Wn,wn--,wn==0&&Yt(In)}}var In=[],wn=0;do In.push(void 0),wn++,se(Gt.value).K(fn(In.length-1),Kt),Gt=wt.next();while(!Gt.done)})},D});function xs(E,D){E instanceof String&&(E+="");var J=0,se=!1,Me={next:function(){if(!se&&J<E.length){var qe=J++;return{value:D(qe,E[qe]),done:!1}}return se=!0,{done:!0,value:void 0}}};return Me[Symbol.iterator]=function(){return Me},Me}var La=typeof Object.assign=="function"?Object.assign:function(E,D){for(var J=1;J<arguments.length;J++){var se=arguments[J];if(se)for(var Me in se)Object.prototype.hasOwnProperty.call(se,Me)&&(E[Me]=se[Me])}return E};Xe("Object.assign",function(E){return E||La}),Xe("Object.is",function(E){return E||function(D,J){return D===J?D!==0||1/D===1/J:D!==D&&J!==J}}),Xe("Array.prototype.includes",function(E){return E||function(D,J){var se=this;se instanceof String&&(se=String(se));var Me=se.length;for(J=J||0,0>J&&(J=Math.max(J+Me,0));J<Me;J++){var qe=se[J];if(qe===D||Object.is(qe,D))return!0}return!1}}),Xe("String.prototype.includes",function(E){return E||function(D,J){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(D instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(D,J||0)!==-1}}),Xe("Array.prototype.keys",function(E){return E||function(){return xs(this,function(D){return D})}});var Zi=this||self;function br(E,D){E=E.split(".");var J=Zi;E[0]in J||typeof J.execScript>"u"||J.execScript("var "+E[0]);for(var se;E.length&&(se=E.shift());)E.length||D===void 0?J[se]&&J[se]!==Object.prototype[se]?J=J[se]:J=J[se]={}:J[se]=D}function Xi(E){throw E}function ss(E,D){Xi(Error("Invalid wire type: "+E+" (at position "+D+")"))}function Fs(){Xi(Error("Failed to read varint, encoding is invalid."))}function oa(E,D){return D=String.fromCharCode.apply(null,D),E==null?D:E+D}var Hs,pa=typeof TextDecoder<"u",gs,Is=typeof TextEncoder<"u";function Ea(E){if(Is)E=(gs||(gs=new TextEncoder)).encode(E);else{var D=void 0;D=D===void 0?!1:D;for(var J=0,se=new Uint8Array(3*E.length),Me=0;Me<E.length;Me++){var qe=E.charCodeAt(Me);if(128>qe)se[J++]=qe;else{if(2048>qe)se[J++]=qe>>6|192;else{if(55296<=qe&&57343>=qe){if(56319>=qe&&Me<E.length){var ot=E.charCodeAt(++Me);if(56320<=ot&&57343>=ot){qe=1024*(qe-55296)+ot-56320+65536,se[J++]=qe>>18|240,se[J++]=qe>>12&63|128,se[J++]=qe>>6&63|128,se[J++]=qe&63|128;continue}else Me--}if(D)throw Error("Found an unpaired surrogate");qe=65533}se[J++]=qe>>12|224,se[J++]=qe>>6&63|128}se[J++]=qe&63|128}}E=se.subarray(0,J)}return E}var sa={},Yo=null;function Wo(E){var D;D===void 0&&(D=0),di(),D=sa[D];for(var J=Array(Math.floor(E.length/3)),se=D[64]||"",Me=0,qe=0;Me<E.length-2;Me+=3){var ot=E[Me],wt=E[Me+1],Gt=E[Me+2],Yt=D[ot>>2];ot=D[(ot&3)<<4|wt>>4],wt=D[(wt&15)<<2|Gt>>6],Gt=D[Gt&63],J[qe++]=Yt+ot+wt+Gt}switch(Yt=0,Gt=se,E.length-Me){case 2:Yt=E[Me+1],Gt=D[(Yt&15)<<2]||se;case 1:E=E[Me],J[qe]=D[E>>2]+D[(E&3)<<4|Yt>>4]+Gt+se}return J.join("")}function Ys(E){var D=E.length,J=3*D/4;J%3?J=Math.floor(J):"=.".indexOf(E[D-1])!=-1&&(J="=.".indexOf(E[D-2])!=-1?J-2:J-1);var se=new Uint8Array(J),Me=0;return Gs(E,function(qe){se[Me++]=qe}),se.subarray(0,Me)}function Gs(E,D){function J(Gt){for(;se<E.length;){var Yt=E.charAt(se++),Kt=Yo[Yt];if(Kt!=null)return Kt;if(!/^[\s\xa0]*$/.test(Yt))throw Error("Unknown base64 encoding at char: "+Yt)}return Gt}di();for(var se=0;;){var Me=J(-1),qe=J(0),ot=J(64),wt=J(64);if(wt===64&&Me===-1)break;D(Me<<2|qe>>4),ot!=64&&(D(qe<<4&240|ot>>2),wt!=64&&D(ot<<6&192|wt))}}function di(){if(!Yo){Yo={};for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),D=["+/=","+/","-_=","-_.","-_"],J=0;5>J;J++){var se=E.concat(D[J].split(""));sa[J]=se;for(var Me=0;Me<se.length;Me++){var qe=se[Me];Yo[qe]===void 0&&(Yo[qe]=Me)}}}}var Mi=typeof Uint8Array=="function",Ko;function Jr(E){if(this.g=E,E!==null&&E.length===0)throw Error("ByteString should be constructed with non-empty values")}var Oi=typeof Uint8Array.prototype.slice=="function";function as(E,D,J){return D===J?Ko||(Ko=new Uint8Array(0)):Oi?E.slice(D,J):new Uint8Array(E.subarray(D,J))}var eo=0,Dr=0;function Ci(E){if(E.constructor===Uint8Array)return E;if(E.constructor===ArrayBuffer)return new Uint8Array(E);if(E.constructor===Array)return new Uint8Array(E);if(E.constructor===String)return Ys(E);if(E.constructor===Jr){if(E.g==null)var D=Ko||(Ko=new Uint8Array(0));else{D=Uint8Array;var J=E.g;J=J==null||Mi&&J!=null&&J instanceof Uint8Array?J:typeof J=="string"?Ys(J):null,E=E.g=J,D=new D(E)}return D}if(E instanceof Uint8Array)return new Uint8Array(E.buffer,E.byteOffset,E.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Hi(E,D){D=D===void 0?{}:D,D=D.v===void 0?!1:D.v,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.v=D,E&&Nr(this,E)}function Nr(E,D){E.h=Ci(D),E.l=0,E.i=E.h.length,E.g=E.l}Hi.prototype.reset=function(){this.g=this.l};function Fi(E){for(var D=128,J=0,se=0,Me=0;4>Me&&128<=D;Me++)D=E.h[E.g++],J|=(D&127)<<7*Me;if(128<=D&&(D=E.h[E.g++],J|=(D&127)<<28,se|=(D&127)>>4),128<=D)for(Me=0;5>Me&&128<=D;Me++)D=E.h[E.g++],se|=(D&127)<<7*Me+3;if(128>D)return E=J>>>0,D=se>>>0,(se=D&2147483648)&&(E=~E+1>>>0,D=~D>>>0,E==0&&(D=D+1>>>0)),E=4294967296*D+(E>>>0),se?-E:E;E.j=!0,Fs()}function Gr(E){E.g>E.i&&(E.j=!0,Xi(Error("Tried to read past the end of the data "+E.g+" > "+E.i)))}function vi(E){var D=E.h,J=D[E.g],se=J&127;return 128>J?(E.g+=1,Gr(E),se):(J=D[E.g+1],se|=(J&127)<<7,128>J?(E.g+=2,Gr(E),se):(J=D[E.g+2],se|=(J&127)<<14,128>J?(E.g+=3,Gr(E),se):(J=D[E.g+3],se|=(J&127)<<21,128>J?(E.g+=4,Gr(E),se):(J=D[E.g+4],se|=(J&15)<<28,128>J?(E.g+=5,Gr(E),se>>>0):(E.g+=5,128<=D[E.g++]&&128<=D[E.g++]&&128<=D[E.g++]&&128<=D[E.g++]&&128<=D[E.g++]?(E.j=!0,Fs(),se):(Gr(E),se))))))}function Di(E){var D=E.h[E.g],J=E.h[E.g+1],se=E.h[E.g+2],Me=E.h[E.g+3];return E.g+=4,Gr(E),(D<<0|J<<8|se<<16|Me<<24)>>>0}Hi.prototype.m=function(){var E=Di(this),D=2*(E>>31)+1,J=E>>>23&255;return E&=8388607,J==255?E?NaN:1/0*D:J==0?D*Math.pow(2,-149)*E:D*Math.pow(2,J-150)*(E+Math.pow(2,23))};var qo=[];function xi(){this.g=new Uint8Array(64),this.h=0}function Mr(E,D){if(!(E.h+1<E.g.length)){var J=E.g;E.g=new Uint8Array(Math.ceil(1+2*E.g.length)),E.g.set(J)}E.g[E.h++]=D}xi.prototype.length=function(){return this.h},xi.prototype.end=function(){var E=this.g,D=this.h;return this.h=0,as(E,0,D)};function Xo(E,D){for(;127<D;)Mr(E,D&127|128),D>>>=7;Mr(E,D)}function zo(E){var D={},J=D.O===void 0?!1:D.O;this.m={v:D.v===void 0?!1:D.v},this.O=J,D=this.m,qo.length?(J=qo.pop(),D&&(J.v=D.v),E&&Nr(J,E),E=J):E=new Hi(E,D),this.g=E,this.l=this.g.g,this.h=this.i=-1,this.j=!1}zo.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function Gi(E){var D=E.g;if((D=D.g==D.i)||(D=E.j)||(D=E.g,D=D.j||0>D.g||D.g>D.i),D)return!1;E.l=E.g.g;var J=vi(E.g);return D=J>>>3,J&=7,0<=J&&5>=J?(E.i=D,E.h=J,!0):(E.j=!0,ss(J,E.l),!1)}function Ms(E){switch(E.h){case 0:if(E.h!=0)Ms(E);else e:{E=E.g;for(var D=E.g,J=0;10>J;J++){if(!(E.h[D]&128)){E.g=D+1,Gr(E);break e}D++}E.j=!0,Fs()}break;case 1:E=E.g,E.g+=8,Gr(E);break;case 2:E.h!=2?Ms(E):(D=vi(E.g),E=E.g,E.g+=D,Gr(E));break;case 5:E=E.g,E.g+=4,Gr(E);break;case 3:D=E.i;do{if(!Gi(E)){E.j=!0,Xi(Error("Unmatched start-group tag: stream EOF"));break}if(E.h==4){E.i!=D&&(E.j=!0,Xi(Error("Unmatched end-group tag")));break}Ms(E)}while(1);break;default:E.j=!0,ss(E.h,E.l)}}function cs(E,D,J){var se=E.g.i,Me=vi(E.g),qe=E.g.g+Me;if(E.g.i=qe,J(D,E),J=qe-E.g.g,J!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(Me+" bytes, instead read "+(Me-J)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return E.g.g=qe,E.g.i=se,D}var Jo=[];function us(){this.h=[],this.i=0,this.g=new xi}function Ei(E,D){D.length!==0&&(E.h.push(D),E.i+=D.length)}function Bi(E,D,J){Xo(E.g,8*D+2),Xo(E.g,J.length),Ei(E,E.g.end()),Ei(E,J)}var Ti=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function _r(E){return Object.isFrozen(E)||(Ti?E[Ti]|=1:E.g!==void 0?E.g|=1:Object.defineProperties(E,{g:{value:1,configurable:!0,writable:!0,enumerable:!1}})),E}function _o(E){return E!==null&&typeof E=="object"&&E.constructor===Object}function Hr(E){switch(typeof E){case"number":return isFinite(E)?E:String(E);case"object":if(Mi&&E!=null&&E instanceof Uint8Array)return Wo(E);if(E instanceof Jr){if(E.g==null)E="";else{var D=E.g;D=D==null||typeof D=="string"?D:Mi&&D instanceof Uint8Array?Wo(D):null,E=E.g=D}return E}}return E}function Pr(E,D){if(E!=null)return Array.isArray(E)||_o(E)?ys(E,D):D(E)}function ys(E,D){if(Array.isArray(E)){for(var J=Array(E.length),se=0;se<E.length;se++)J[se]=Pr(E[se],D);if(D=Array.isArray(E)){var Me;Ti?Me=E[Ti]:Me=E.g,D=(Me??0)&1}return D&&_r(J),J}Me={};for(J in E)Me[J]=Pr(E[J],D);return Me}function fi(E){return E=Hr(E),Array.isArray(E)?ys(E,fi):E}var gr;function _n(E,D,J){var se=gr;gr=null,E||(E=se),se=this.constructor.ha,E||(E=se?[se]:[]),this.i=(se?0:-1)-(this.constructor.fa||0),this.l=this.g=null,this.u=E;e:{if(se=this.u.length,E=se-1,se&&(se=this.u[E],_o(se))){this.j=E-this.i,this.h=se;break e}D!==void 0&&-1<D?(this.j=Math.max(D,E+1-this.i),this.h=null):this.j=Number.MAX_VALUE}if(J)for(D=0;D<J.length;D++)E=J[D],E<this.j?(E+=this.i,(se=this.u[E])?Array.isArray(se)&&_r(se):this.u[E]=$r):(Ui(this),(se=this.h[E])?Array.isArray(se)&&_r(se):this.h[E]=$r)}var $r=Object.freeze(_r([]));function Ui(E){var D=E.j+E.i;E.u[D]||(E.h=E.u[D]={})}function Yr(E,D,J){return D===-1?null:J!==void 0&&J||D>=E.j?E.h?E.h[D]:void 0:E.u[D+E.i]}function Qr(E,D,J){J=J===void 0?!1:J;var se=Yr(E,D,J);return se==null&&(se=$r),se===$r&&(se=_r(se.slice()),bn(E,D,se,J)),se}function qt(E,D){var J=Qr(E,D);if(E.l||(E.l={}),!E.l[D]){for(var se=0;se<J.length;se++)J[se]=+J[se];E.l[D]=!0}return J}function an(E,D,J){return E=Yr(E,D),E=E==null?E:+E,E??(J===void 0?0:J)}function bn(E,D,J,se){se!==void 0&&se||D>=E.j?(Ui(E),E.h[D]=J):E.u[D+E.i]=J}function Wr(E,D,J,se){J!==se?bn(E,D,J):bn(E,D,void 0,!1)}function si(E,D,J){if(J===-1)return null;E.g||(E.g={});var se=E.g[J];if(se)return se;var Me=Yr(E,J,!1);return Me==null?se:(D=new D(Me),E.g[J]=D)}function ni(E,D,J){E.g||(E.g={});var se=E.g[J];if(!se){var Me=Qr(E,J,!1);se=[];for(var qe=0;qe<Me.length;qe++)se[qe]=new D(Me[qe]);E.g[J]=se}return se}function nr(E,D,J,se,Me){var qe=ni(E,se,D);J=J||new se,E=Qr(E,D),Me!=null?(qe.splice(Me,0,J),E.splice(Me,0,J.u)):(qe.push(J),E.push(J.u))}_n.prototype.toJSON=function(){return ys(this.u,fi)},_n.prototype.toString=function(){return this.u.toString()};function hi(E,D){return E=Yr(E,D),E??0}function Yi(E,D){return E=Yr(E,D),E??""}function es(E,D){if(E=E.m){Ei(D,D.g.end());for(var J=0;J<E.length;J++)Ei(D,E[J])}}var ts=Symbol();function vs(E,D,J){return E[ts]||(E[ts]=function(se,Me){return D(se,Me,J)})}function ws(E){var D=E[ts];if(!D){var J=E[rs]||(E[rs]=E());D=function(se,Me){return Ki(se,Me,J)},E[ts]=D}return D}function ji(E){var D=E.da;if(D)return ws(D);if(D=E.ia){var J=E.Y;return delete E.Y,vs(E.W.g,D,J)}}function ns(E){var D=ji(E),J=E.W,se=E.ea;return D?function(Me,qe){return se(Me,qe,J,D)}:function(Me,qe){return se(Me,qe,J)}}function Fa(E){var D=E[0];switch(E.length){case 2:var J=E[1];return function(wn,Xn,Wn){return D(wn,Xn,Wn,J)};case 3:var se=E[1],Me=ws(E[2]);return function(wn,Xn,Wn){return D(wn,Xn,Wn,se,Me)};case 4:var qe=E[1],ot=E[3],wt=ws(E[2]);return function(wn,Xn,Wn){return D(wn,Xn,Wn,qe,wt,ot)};case 5:var Gt=E[1],Yt=vs(Gt,E[3],E[4]);return function(wn,Xn,Wn){return D(wn,Xn,Wn,Gt,Yt)};case 6:var Kt=E[1],fn=E[5],In=vs(Kt,E[3],E[4]);return function(wn,Xn,Wn){return D(wn,Xn,Wn,Kt,In,fn)};default:throw Error("Unsupported number of parameters, expected [2-6], got "+E.length)}}var rs=Symbol();function Ki(E,D,J){for(;Gi(D)&&D.h!=4;){var se=D.i,Me=J[se];if(Me)Array.isArray(Me)&&(Me=J[se]=Fa(Me));else{var qe=J[0];qe&&(qe=qe[se])&&(Me=J[se]=ns(qe))}Me&&Me(D,E,se)||(Me=D,se=E,qe=Me.l,Ms(Me),Me.O||(Me=as(Me.g.h,qe,Me.g.g),(qe=se.m)?qe.push(Me):se.m=[Me]))}return E}function Ns(E,D){var J=new us;if(D(E,J),E=J.i+J.g.length(),E===0)J=new Uint8Array(0);else{E=new Uint8Array(E);for(var se=J.h,Me=se.length,qe=D=0;qe<Me;qe++){var ot=se[qe];ot.length!==0&&(E.set(ot,D),D+=ot.length)}se=J.g,Me=se.h,Me!==0&&(E.set(se.g.subarray(0,Me),D),se.h=0),J.h=[E],J=E}return J}function Ks(E,D,J){if(Jo.length){var se=Jo.pop();E&&(Nr(se.g,E),se.i=-1,se.h=-1),E=se}else E=new zo(E);try{var Me=new D;return Ki(Me,E,J[rs]||(J[rs]=J()))}finally{D=E.g,D.h=null,D.l=0,D.i=0,D.g=0,D.j=!1,D.v=!1,E.i=-1,E.h=-1,E.j=!1,100>Jo.length&&Jo.push(E)}}function Ro(E,D,J){if(D=Yr(D,J),D!=null){Xo(E.g,8*J+5),E=E.g;var se=D;se=(J=0>se?1:0)?-se:se,se===0?0<1/se?eo=Dr=0:(Dr=0,eo=2147483648):isNaN(se)?(Dr=0,eo=2147483647):34028234663852886e22<se?(Dr=0,eo=(J<<31|2139095040)>>>0):11754943508222875e-54>se?(se=Math.round(se/Math.pow(2,-149)),Dr=0,eo=(J<<31|se)>>>0):(D=Math.floor(Math.log(se)/Math.LN2),se*=Math.pow(2,-D),se=Math.round(8388608*se),16777216<=se&&++D,Dr=0,eo=(J<<31|D+127<<23|se&8388607)>>>0),J=eo,Mr(E,J>>>0&255),Mr(E,J>>>8&255),Mr(E,J>>>16&255),Mr(E,J>>>24&255)}}function Ta(E,D,J){if(E.h!==1)return!1;var se=E.g;E=Di(se);var Me=Di(se);se=2*(Me>>31)+1;var qe=Me>>>20&2047;return E=4294967296*(Me&1048575)+E,Wr(D,J,qe==2047?E?NaN:1/0*se:qe==0?se*Math.pow(2,-1074)*E:se*Math.pow(2,qe-1075)*(E+4503599627370496),0),!0}function is(E,D,J){return E.h!==5?!1:(bn(D,J,E.g.m()),!0)}function Zs(E,D,J){if(E.h!==5&&E.h!==2)return!1;if(D=Qr(D,J),E.h==2){J=Hi.prototype.m;var se=vi(E.g);for(se=E.g.g+se;E.g.g<se;)D.push(J.call(E.g))}else D.push(E.g.m());return!0}function $s(E,D,J){return E.h!==5?!1:(E=E.g.m(),Wr(D,J,E,0),!0)}function Aa(E,D,J){return E.h!==0?!1:(bn(D,J,Fi(E.g)),!0)}function ls(E,D,J){return E.h!==0?!1:(bn(D,J,vi(E.g)),!0)}function Qs(E,D,J){return E.h!==0?!1:(E=vi(E.g),Wr(D,J,E,0),!0)}function Ya(E,D,J){return E.h!==0?!1:(E=!!vi(E.g),Wr(D,J,E,!1),!0)}function Ka(E,D,J){if(E.h!==2)return!1;var se=vi(E.g);E=E.g;var Me=E.g;E.g+=se,Gr(E),E=E.h;var qe;if(pa)(qe=Hs)||(qe=Hs=new TextDecoder("utf-8",{fatal:!1})),qe=qe.decode(E.subarray(Me,Me+se));else{se=Me+se;for(var ot=[],wt=null,Gt,Yt,Kt;Me<se;)Gt=E[Me++],128>Gt?ot.push(Gt):224>Gt?Me>=se?ot.push(65533):(Yt=E[Me++],194>Gt||(Yt&192)!==128?(Me--,ot.push(65533)):ot.push((Gt&31)<<6|Yt&63)):240>Gt?Me>=se-1?ot.push(65533):(Yt=E[Me++],(Yt&192)!==128||Gt===224&&160>Yt||Gt===237&&160<=Yt||((qe=E[Me++])&192)!==128?(Me--,ot.push(65533)):ot.push((Gt&15)<<12|(Yt&63)<<6|qe&63)):244>=Gt?Me>=se-2?ot.push(65533):(Yt=E[Me++],(Yt&192)!==128||(Gt<<28)+(Yt-144)>>30||((qe=E[Me++])&192)!==128||((Kt=E[Me++])&192)!==128?(Me--,ot.push(65533)):(Gt=(Gt&7)<<18|(Yt&63)<<12|(qe&63)<<6|Kt&63,Gt-=65536,ot.push((Gt>>10&1023)+55296,(Gt&1023)+56320))):ot.push(65533),8192<=ot.length&&(wt=oa(wt,ot),ot.length=0);qe=oa(wt,ot)}return bn(D,J,qe),!0}function qs(E,D,J,se,Me){return E.h!==2?!1:(E=cs(E,new se,Me),D.g||(D.g={}),se=E&&E.u,D.g[J]=E,bn(D,J,se,!1),!0)}function aa(E,D,J,se,Me){return E.h!==2?!1:(E=cs(E,new se,Me),nr(D,J,E,se,void 0),!0)}function oe(E,D,J){return E.h!==0?!1:(bn(D,J,Fi(E.g)),!0)}function Ie(E){_n.call(this,E)}Tn(Ie,_n);function we(){return{1:ls,2:is,3:Ka,4:Ka}}function St(E,D){var J=Yr(E,1);if(J!=null&&J!=null){Xo(D.g,8);var se=D.g;if(0<=J)Xo(se,J);else{for(var Me=0;9>Me;Me++)Mr(se,J&127|128),J>>=7;Mr(se,1)}}Ro(D,E,2),se=Yr(E,3),se!=null&&Bi(D,3,Ea(se)),se=Yr(E,4),se!=null&&Bi(D,4,Ea(se)),es(E,D)}function Bt(E){_n.call(this,E,-1,Xt)}Tn(Bt,_n),Bt.prototype.addClassification=function(E,D){return nr(this,1,E,Ie,D),this};function dn(){return{1:[aa,Ie,we]}}var Xt=[1];function sn(E){_n.call(this,E)}Tn(sn,_n);function An(){return{1:is,2:is,3:is,4:is,5:is}}function Qn(E,D){Ro(D,E,1),Ro(D,E,2),Ro(D,E,3),Ro(D,E,4),Ro(D,E,5),es(E,D)}function Or(E){_n.call(this,E,-1,jr)}Tn(Or,_n);function Sr(){return{1:[aa,sn,An]}}var jr=[1];function Tr(E){_n.call(this,E)}Tn(Tr,_n);function ar(){return{1:is,2:is,3:is,4:is,5:is,6:Aa}}function wr(E,D){Ro(D,E,1),Ro(D,E,2),Ro(D,E,3),Ro(D,E,4),Ro(D,E,5);var J=Yr(E,6);if(J!=null&&J!=null){Xo(D.g,48);var se=D.g,Me=J;J=0>Me,Me=Math.abs(Me);var qe=Me>>>0;for(Me=Math.floor((Me-qe)/4294967296),Me>>>=0,J&&(Me=~Me>>>0,qe=(~qe>>>0)+1,4294967295<qe&&(qe=0,Me++,4294967295<Me&&(Me=0))),eo=qe,Dr=Me,J=eo,qe=Dr;0<qe||127<J;)Mr(se,J&127|128),J=(J>>>7|qe<<25)>>>0,qe>>>=7;Mr(se,J)}es(E,D)}function Br(E){_n.call(this,E,-1,zi)}Tn(Br,_n);function ri(){return{1:oe,2:oe,3:Zs,4:[qs,pi,bi],5:ls,6:ls,7:Zs,8:Zs,9:Zs}}function pi(E){_n.call(this,E)}Tn(pi,_n);function bi(){return{1:is,2:is,3:is}}var zi=[3,7,8,9];function te(E){_n.call(this,E)}Tn(te,_n);function le(){return{1:$s,2:$s,3:$s}}function ve(E){_n.call(this,E)}Tn(ve,_n);function st(){return{1:$s,2:$s,3:$s}}function Vt(E){_n.call(this,E)}Tn(Vt,_n);function Ht(){return{1:Qs,2:[qs,ve,st],3:[qs,te,le],4:Ya}}function kt(E){_n.call(this,E,-1,pn)}Tn(kt,_n);function Qt(){return{1:Qs,2:[aa,Vt,Ht],3:$s,4:Zs,5:Zs,6:Zs}}var pn=[2,4,5,6];function X(E){_n.call(this,E,-1,ke)}Tn(X,_n);function be(){return{1:Qs,2:[aa,kt,Qt],3:[qs,Br,ri],4:Ta,5:Zs,6:Zs}}var ke=[2,5,6];function ze(E,D,J){if(J=E.createShader(J===0?E.VERTEX_SHADER:E.FRAGMENT_SHADER),E.shaderSource(J,D),E.compileShader(J),!E.getShaderParameter(J,E.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+E.getShaderInfoLog(J));return J}function yt(E){return ni(E,Ie,1).map(function(D){return{index:hi(D,1),$:an(D,2),label:Yr(D,3)!=null?Yi(D,3):void 0,displayName:Yr(D,4)!=null?Yi(D,4):void 0}})}function Nt(E){return{x:an(E,1),y:an(E,2),z:an(E,3),visibility:Yr(E,4)!=null?an(E,4):void 0}}function Ot(E,D){this.h=E,this.g=D,this.l=0}function rn(E,D,J){return _t(E,D),typeof E.g.canvas.transferToImageBitmap=="function"?n.resolve(E.g.canvas.transferToImageBitmap()):J?n.resolve(E.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(E.g.canvas):(E.i===void 0&&(E.i=document.createElement("canvas")),new n(function(se){E.i.height=E.g.canvas.height,E.i.width=E.g.canvas.width,E.i.getContext("2d",{}).drawImage(E.g.canvas,0,0,E.g.canvas.width,E.g.canvas.height),se(E.i)}))}function _t(E,D){var J=E.g;if(E.m===void 0){var se=ze(J,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),Me=ze(J,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),qe=J.createProgram();if(J.attachShader(qe,se),J.attachShader(qe,Me),J.linkProgram(qe),!J.getProgramParameter(qe,J.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+J.getProgramInfoLog(qe));se=E.m=qe,J.useProgram(se),Me=J.getUniformLocation(se,"sampler0"),E.j={J:J.getAttribLocation(se,"aVertex"),I:J.getAttribLocation(se,"aTex"),ja:Me},E.s=J.createBuffer(),J.bindBuffer(J.ARRAY_BUFFER,E.s),J.enableVertexAttribArray(E.j.J),J.vertexAttribPointer(E.j.J,2,J.FLOAT,!1,0,0),J.bufferData(J.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),J.STATIC_DRAW),J.bindBuffer(J.ARRAY_BUFFER,null),E.o=J.createBuffer(),J.bindBuffer(J.ARRAY_BUFFER,E.o),J.enableVertexAttribArray(E.j.I),J.vertexAttribPointer(E.j.I,2,J.FLOAT,!1,0,0),J.bufferData(J.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),J.STATIC_DRAW),J.bindBuffer(J.ARRAY_BUFFER,null),J.uniform1i(Me,0)}se=E.j,J.useProgram(E.m),J.canvas.width=D.width,J.canvas.height=D.height,J.viewport(0,0,D.width,D.height),J.activeTexture(J.TEXTURE0),E.h.bindTexture2d(D.glName),J.enableVertexAttribArray(se.J),J.bindBuffer(J.ARRAY_BUFFER,E.s),J.vertexAttribPointer(se.J,2,J.FLOAT,!1,0,0),J.enableVertexAttribArray(se.I),J.bindBuffer(J.ARRAY_BUFFER,E.o),J.vertexAttribPointer(se.I,2,J.FLOAT,!1,0,0),J.bindFramebuffer(J.DRAW_FRAMEBUFFER?J.DRAW_FRAMEBUFFER:J.FRAMEBUFFER,null),J.clearColor(0,0,0,0),J.clear(J.COLOR_BUFFER_BIT),J.colorMask(!0,!0,!0,!0),J.drawArrays(J.TRIANGLE_FAN,0,4),J.disableVertexAttribArray(se.J),J.disableVertexAttribArray(se.I),J.bindBuffer(J.ARRAY_BUFFER,null),E.h.bindTexture2d(0)}function kn(E){this.g=E}var Yn=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ar(E,D){return D+E}function qn(E,D){window[E]=D}function xn(E){var D=document.createElement("script");return D.setAttribute("src",E),D.setAttribute("crossorigin","anonymous"),new n(function(J){D.addEventListener("load",function(){J()},!1),D.addEventListener("error",function(){J()},!1),document.body.appendChild(D)})}function zn(){return Gn(function(E){switch(E.g){case 1:return E.m=2,jt(E,WebAssembly.instantiate(Yn),4);case 4:E.g=3,E.m=0;break;case 2:return E.m=0,E.j=null,E.return(!1);case 3:return E.return(!0)}})}function tr(E){if(this.g=E,this.listeners={},this.j={},this.G={},this.m={},this.s={},this.H=this.o=this.S=!0,this.D=n.resolve(),this.R="",this.C={},this.locateFile=E&&E.locateFile||Ar,typeof window=="object")var D=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")D=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.T=D,E.options){D=$e(Object.keys(E.options));for(var J=D.next();!J.done;J=D.next()){J=J.value;var se=E.options[J].default;se!==void 0&&(this.j[J]=typeof se=="function"?se():se)}}}I=tr.prototype,I.close=function(){return this.i&&this.i.delete(),n.resolve()};function lr(E){var D,J,se,Me,qe,ot,wt,Gt,Yt,Kt,fn;return Gn(function(In){switch(In.g){case 1:return E.S?(D=E.g.files===void 0?[]:typeof E.g.files=="function"?E.g.files(E.j):E.g.files,jt(In,zn(),2)):In.return();case 2:if(J=In.h,typeof window=="object")return qn("createMediapipeSolutionsWasm",{locateFile:E.locateFile}),qn("createMediapipeSolutionsPackedAssets",{locateFile:E.locateFile}),ot=D.filter(function(wn){return wn.data!==void 0}),wt=D.filter(function(wn){return wn.data===void 0}),Gt=n.all(ot.map(function(wn){var Xn=ge(E,wn.url);if(wn.path!==void 0){var Wn=wn.path;Xn=Xn.then(function(Fr){return E.overrideFile(Wn,Fr),n.resolve(Fr)})}return Xn})),Yt=n.all(wt.map(function(wn){return wn.simd===void 0||wn.simd&&J||!wn.simd&&!J?xn(E.locateFile(wn.url,E.T)):n.resolve()})).then(function(){var wn,Xn,Wn;return Gn(function(Fr){if(Fr.g==1)return wn=window.createMediapipeSolutionsWasm,Xn=window.createMediapipeSolutionsPackedAssets,Wn=E,jt(Fr,wn(Xn),2);Wn.h=Fr.h,Fr.g=0})}),Kt=function(){return Gn(function(wn){return E.g.graph&&E.g.graph.url?wn=jt(wn,ge(E,E.g.graph.url),0):(wn.g=0,wn=void 0),wn})}(),jt(In,n.all([Yt,Gt,Kt]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return se=D.filter(function(wn){return wn.simd===void 0||wn.simd&&J||!wn.simd&&!J}).map(function(wn){return E.locateFile(wn.url,E.T)}),importScripts.apply(null,lt(se)),Me=E,jt(In,createMediapipeSolutionsWasm(Module),6);case 6:Me.h=In.h,E.l=new OffscreenCanvas(1,1),E.h.canvas=E.l,qe=E.h.GL.createContext(E.l,{antialias:!1,alpha:!1,ga:typeof WebGL2RenderingContext<"u"?2:1}),E.h.GL.makeContextCurrent(qe),In.g=4;break;case 7:if(E.l=document.createElement("canvas"),fn=E.l.getContext("webgl2",{}),!fn&&(fn=E.l.getContext("webgl",{}),!fn))return alert("Failed to create WebGL canvas context when passing video frame."),In.return();E.F=fn,E.h.canvas=E.l,E.h.createContext(E.l,!0,!0,{});case 4:E.i=new E.h.SolutionWasm,E.S=!1,In.g=0}})}function hr(E){var D,J,se,Me,qe,ot,wt,Gt;return Gn(function(Yt){if(Yt.g==1){if(E.g.graph&&E.g.graph.url&&E.R===E.g.graph.url)return Yt.return();if(E.o=!0,!E.g.graph||!E.g.graph.url){Yt.g=2;return}return E.R=E.g.graph.url,jt(Yt,ge(E,E.g.graph.url),3)}for(Yt.g!=2&&(D=Yt.h,E.i.loadGraph(D)),J=$e(Object.keys(E.C)),se=J.next();!se.done;se=J.next())Me=se.value,E.i.overrideFile(Me,E.C[Me]);if(E.C={},E.g.listeners)for(qe=$e(E.g.listeners),ot=qe.next();!ot.done;ot=qe.next())wt=ot.value,vt(E,wt);Gt=E.j,E.j={},E.setOptions(Gt),Yt.g=0})}I.reset=function(){var E=this;return Gn(function(D){E.i&&(E.i.reset(),E.m={},E.s={}),D.g=0})},I.setOptions=function(E,D){var J=this;if(D=D||this.g.options){for(var se=[],Me=[],qe={},ot=$e(Object.keys(E)),wt=ot.next();!wt.done;qe={L:qe.L,M:qe.M},wt=ot.next()){var Gt=wt.value;Gt in this.j&&this.j[Gt]===E[Gt]||(this.j[Gt]=E[Gt],wt=D[Gt],wt!==void 0&&(wt.onChange&&(qe.L=wt.onChange,qe.M=E[Gt],se.push(function(Yt){return function(){var Kt;return Gn(function(fn){if(fn.g==1)return jt(fn,Yt.L(Yt.M),2);Kt=fn.h,Kt===!0&&(J.o=!0),fn.g=0})}}(qe))),wt.graphOptionXref&&(Gt={valueNumber:wt.type===1?E[Gt]:0,valueBoolean:wt.type===0?E[Gt]:!1,valueString:wt.type===2?E[Gt]:""},wt=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),wt.graphOptionXref),Gt),Me.push(wt))))}(se.length!==0||Me.length!==0)&&(this.o=!0,this.B=(this.B===void 0?[]:this.B).concat(Me),this.A=(this.A===void 0?[]:this.A).concat(se))}};function B(E){var D,J,se,Me,qe,ot,wt;return Gn(function(Gt){switch(Gt.g){case 1:if(!E.o)return Gt.return();if(!E.A){Gt.g=2;break}D=$e(E.A),J=D.next();case 3:if(J.done){Gt.g=5;break}return se=J.value,jt(Gt,se(),4);case 4:J=D.next(),Gt.g=3;break;case 5:E.A=void 0;case 2:if(E.B){for(Me=new E.h.GraphOptionChangeRequestList,qe=$e(E.B),ot=qe.next();!ot.done;ot=qe.next())wt=ot.value,Me.push_back(wt);E.i.changeOptions(Me),Me.delete(),E.B=void 0}E.o=!1,Gt.g=0}})}I.initialize=function(){var E=this;return Gn(function(D){return D.g==1?jt(D,lr(E),2):D.g!=3?jt(D,hr(E),3):jt(D,B(E),0)})};function ge(E,D){var J,se;return Gn(function(Me){return D in E.G?Me.return(E.G[D]):(J=E.locateFile(D,""),se=fetch(J).then(function(qe){return qe.arrayBuffer()}),E.G[D]=se,Me.return(se))})}I.overrideFile=function(E,D){this.i?this.i.overrideFile(E,D):this.C[E]=D},I.clearOverriddenFiles=function(){this.C={},this.i&&this.i.clearOverriddenFiles()},I.send=function(E,D){var J=this,se,Me,qe,ot,wt,Gt,Yt,Kt,fn;return Gn(function(In){switch(In.g){case 1:return J.g.inputs?(se=1e3*(D??performance.now()),jt(In,J.D,2)):In.return();case 2:return jt(In,J.initialize(),3);case 3:for(Me=new J.h.PacketDataList,qe=$e(Object.keys(E)),ot=qe.next();!ot.done;ot=qe.next())if(wt=ot.value,Gt=J.g.inputs[wt]){e:{var wn=E[wt];switch(Gt.type){case"video":var Xn=J.m[Gt.stream];if(Xn||(Xn=new Ot(J.h,J.F),J.m[Gt.stream]=Xn),Xn.l===0&&(Xn.l=Xn.h.createTexture()),typeof HTMLVideoElement<"u"&&wn instanceof HTMLVideoElement)var Wn=wn.videoWidth,Fr=wn.videoHeight;else typeof HTMLImageElement<"u"&&wn instanceof HTMLImageElement?(Wn=wn.naturalWidth,Fr=wn.naturalHeight):(Wn=wn.width,Fr=wn.height);Fr={glName:Xn.l,width:Wn,height:Fr},Wn=Xn.g,Wn.canvas.width=Fr.width,Wn.canvas.height=Fr.height,Wn.activeTexture(Wn.TEXTURE0),Xn.h.bindTexture2d(Xn.l),Wn.texImage2D(Wn.TEXTURE_2D,0,Wn.RGBA,Wn.RGBA,Wn.UNSIGNED_BYTE,wn),Xn.h.bindTexture2d(0),Xn=Fr;break e;case"detections":for(Xn=J.m[Gt.stream],Xn||(Xn=new kn(J.h),J.m[Gt.stream]=Xn),Xn.data||(Xn.data=new Xn.g.DetectionListData),Xn.data.reset(wn.length),Fr=0;Fr<wn.length;++Fr){Wn=wn[Fr];var qr=Xn.data,ei=qr.setBoundingBox,$i=Fr,Ps=Wn.U,Qi=new Tr;if(bn(Qi,1,Ps.aa),bn(Qi,2,Ps.ba),bn(Qi,3,Ps.height),bn(Qi,4,Ps.width),bn(Qi,5,Ps.rotation),bn(Qi,6,Ps.Z),Ps=Ns(Qi,wr),ei.call(qr,$i,Ps),Wn.P)for(qr=0;qr<Wn.P.length;++qr){Qi=Wn.P[qr];var ma=!!Qi.visibility;ei=Xn.data,$i=ei.addNormalizedLandmark,Ps=Fr,Qi=Object.assign(Object.assign({},Qi),{visibility:ma?Qi.visibility:0}),ma=new sn,bn(ma,1,Qi.x),bn(ma,2,Qi.y),bn(ma,3,Qi.z),Qi.visibility&&bn(ma,4,Qi.visibility),Qi=Ns(ma,Qn),$i.call(ei,Ps,Qi)}if(Wn.N)for(qr=0;qr<Wn.N.length;++qr)ei=Xn.data,$i=ei.addClassification,Ps=Fr,Qi=Wn.N[qr],ma=new Ie,bn(ma,2,Qi.$),Qi.index&&bn(ma,1,Qi.index),Qi.label&&bn(ma,3,Qi.label),Qi.displayName&&bn(ma,4,Qi.displayName),Qi=Ns(ma,St),$i.call(ei,Ps,Qi)}Xn=Xn.data;break e;default:Xn={}}}switch(Yt=Xn,Kt=Gt.stream,Gt.type){case"video":Me.pushTexture2d(Object.assign(Object.assign({},Yt),{stream:Kt,timestamp:se}));break;case"detections":fn=Yt,fn.stream=Kt,fn.timestamp=se,Me.pushDetectionList(fn);break;default:throw Error("Unknown input config type: '"+Gt.type+"'")}}return J.i.send(Me),jt(In,J.D,4);case 4:Me.delete(),In.g=0}})};function Ne(E,D,J){var se,Me,qe,ot,wt,Gt,Yt,Kt,fn,In,wn,Xn,Wn,Fr;return Gn(function(qr){switch(qr.g){case 1:if(!J)return qr.return(D);for(se={},Me=0,qe=$e(Object.keys(J)),ot=qe.next();!ot.done;ot=qe.next())wt=ot.value,Gt=J[wt],typeof Gt!="string"&&Gt.type==="texture"&&D[Gt.stream]!==void 0&&++Me;1<Me&&(E.H=!1),Yt=$e(Object.keys(J)),ot=Yt.next();case 2:if(ot.done){qr.g=4;break}if(Kt=ot.value,fn=J[Kt],typeof fn=="string")return Wn=se,Fr=Kt,jt(qr,He(E,Kt,D[fn]),14);if(In=D[fn.stream],fn.type==="detection_list"){if(In){for(var ei=In.getRectList(),$i=In.getLandmarksList(),Ps=In.getClassificationsList(),Qi=[],ma=0;ma<ei.size();++ma){var Dc=Ks(ei.get(ma),Tr,ar);Dc={U:{aa:an(Dc,1),ba:an(Dc,2),height:an(Dc,3),width:an(Dc,4),rotation:an(Dc,5,0),Z:hi(Dc,6)},P:ni(Ks($i.get(ma),Or,Sr),sn,1).map(Nt),N:yt(Ks(Ps.get(ma),Bt,dn))},Qi.push(Dc)}ei=Qi}else ei=[];se[Kt]=ei,qr.g=7;break}if(fn.type==="proto_list"){if(In){for(ei=Array(In.size()),$i=0;$i<In.size();$i++)ei[$i]=In.get($i);In.delete()}else ei=[];se[Kt]=ei,qr.g=7;break}if(In===void 0){qr.g=3;break}if(fn.type==="float_list"){se[Kt]=In,qr.g=7;break}if(fn.type==="proto"){se[Kt]=In,qr.g=7;break}if(fn.type!=="texture")throw Error("Unknown output config type: '"+fn.type+"'");return wn=E.s[Kt],wn||(wn=new Ot(E.h,E.F),E.s[Kt]=wn),jt(qr,rn(wn,In,E.H),13);case 13:Xn=qr.h,se[Kt]=Xn;case 7:fn.transform&&se[Kt]&&(se[Kt]=fn.transform(se[Kt])),qr.g=3;break;case 14:Wn[Fr]=qr.h;case 3:ot=Yt.next(),qr.g=2;break;case 4:return qr.return(se)}})}function He(E,D,J){var se;return Gn(function(Me){return typeof J=="number"||J instanceof Uint8Array||J instanceof E.h.Uint8BlobList?Me.return(J):J instanceof E.h.Texture2dDataOut?(se=E.s[D],se||(se=new Ot(E.h,E.F),E.s[D]=se),Me.return(rn(se,J,E.H))):Me.return(void 0)})}function vt(E,D){for(var J=D.name||"$",se=[].concat(lt(D.wants)),Me=new E.h.StringList,qe=$e(D.wants),ot=qe.next();!ot.done;ot=qe.next())Me.push_back(ot.value);qe=E.h.PacketListener.implement({onResults:function(wt){for(var Gt={},Yt=0;Yt<D.wants.length;++Yt)Gt[se[Yt]]=wt.get(Yt);var Kt=E.listeners[J];Kt&&(E.D=Ne(E,Gt,D.outs).then(function(fn){fn=Kt(fn);for(var In=0;In<D.wants.length;++In){var wn=Gt[se[In]];typeof wn=="object"&&wn.hasOwnProperty&&wn.hasOwnProperty("delete")&&wn.delete()}fn&&(E.D=fn)}))}}),E.i.attachMultiListener(Me,qe),Me.delete()}I.onResults=function(E,D){this.listeners[D||"$"]=E},br("Solution",tr),br("OptionType",{BOOL:0,NUMBER:1,ca:2,0:"BOOL",1:"NUMBER",2:"STRING"});function L(E){var D=hi(E,1),J=si(E,te,3);return J={x:an(J,1),y:an(J,2),depth:an(J,3)},E=si(E,ve,2),{id:D,point2d:J,point3d:{x:an(E,1),y:an(E,2),z:an(E,3)}}}function $(E){var D=Ks(E,X,be);E=[],D=ni(D,kt,2);for(var J=0;J<D.length;J++)E.push({id:hi(D[J],1),keypoints:ni(D[J],Vt,2).map(L),visibility:an(D[J],3),scale:qt(D[J],6),translation:qt(D[J],5),rotation:qt(D[J],4)});return E}function he(E){switch(E){case"Camera":return"object_detection_3d_camera.tflite";case"Chair":return"object_detection_3d_chair.tflite";case"Cup":return"object_detection_3d_cup.tflite";default:return"object_detection_3d_sneakers.tflite"}}function T(E){switch(E){case"Camera":return"Camera";case"Chair":return"Chair";case"Cup":return"Coffee cup, Mug";default:return"Footwear"}}var K={focalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_x"}},focalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_focal_y"}},principalX:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_x"}},principalY:{type:1,graphOptionXref:{calculatorType:"Lift2DFrameAnnotationTo3DCalculator",fieldName:"normalized_principal_point_y"}},allowedLabels:{type:2,graphOptionXref:{calculatorName:"ConstantSidePacketCalculatorAllowedLabels",calculatorType:"ConstantSidePacketCalculator",fieldName:"string_value"}}};function ne(E){var D=this;E=E||{},this.g=new tr({locateFile:E.locateFile,files:[{url:"objectron_solution_packed_assets_loader.js"},{simd:!1,url:"objectron_solution_wasm_bin.js"},{simd:!0,url:"objectron_solution_simd_wasm_bin.js"}],graph:{url:"objectron.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["lifted_objects","image_transformed"],outs:{image:"image_transformed",objectDetections:{type:"proto",stream:"lifted_objects",transform:$}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,default:!1,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumObjects:{type:1,default:5,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorMaxNumObjects",fieldName:"int_value"}},staticImageMode:{type:0,default:!0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"objectrongpusubgraph__ConstantSidePacketCalculator",fieldName:"bool_value"}},minDetectionConfidence:{type:1,default:.5,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"objectrongpusubgraph__objectdetectionoidv4subgraph__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,default:.99,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"objectrongpusubgraph__boxlandmarksubgraph__ThresholdingCalculator",fieldName:"threshold"}},modelName:{default:"Shoe",onChange:function(J){var se,Me,qe,ot;return Gn(function(wt){return wt.g==1?(se=J,D.g.setOptions({allowedLabels:T(se)},K),Me=he(se),qe="object_detection_3d.tflite",jt(wt,ge(D.g,Me),2)):(ot=wt.h,D.g.overrideFile(qe,ot),wt.return(!0))})}},focalLength:{default:[1,1],onChange:function(J){var se;return Gn(function(Me){return se=J,D.h=se,D.g.setOptions({focalX:se[0],focalY:se[1]},K),Me.return(!0)})}},principalPoint:{default:[0,0],onChange:function(J){var se;return Gn(function(Me){return se=J,D.i=se,D.g.setOptions({principalX:se[0],principalY:se[1]},K),Me.return(!0)})}},imageSize:{onChange:function(J){var se,Me,qe,ot;return Gn(function(wt){if(D.h===void 0||D.i===void 0)return console.error('"focalLength" and "principalPoint" must be set if setting image size'),wt.return();se=J,Me=[se[0]/2,se[1]/2],qe=[D.h[0]/Me[0],D.h[1]/Me[1]],ot=[D.i[0]/Me[0],D.i[1]/Me[1]],D.setOptions({focalLength:qe,principalPoint:ot}),wt.g=0})}}}})}I=ne.prototype,I.close=function(){return this.g.close(),n.resolve()},I.onResults=function(E){this.g.onResults(E)},I.initialize=function(){var E=this;return Gn(function(D){return jt(D,E.g.initialize(),0)})},I.reset=function(){this.g.reset()},I.send=function(E){var D=this;return Gn(function(J){return jt(J,D.g.send(E),0)})},I.setOptions=function(E){this.g.setOptions(E)},br("Objectron",ne),br("BOX_CONNECTIONS",[[1,2],[2,4],[4,3],[3,1],[5,6],[6,8],[8,7],[7,5],[1,5],[2,6],[3,7],[4,8]]),br("BOX_KEYPOINTS",{CENTER:0,BACK_BOTTOM_LEFT:1,FRONT_BOTTOM_LEFT:2,BACK_TOP_LEFT:3,FRONT_TOP_LEFT:4,BACK_BOTTOM_RIGHT:5,FRONT_BOTTOM_RIGHT:6,BACK_TOP_RIGHT:7,FRONT_TOP_RIGHT:8}),br("VERSION","0.4.1636596145")}).call(ha);const qi={};(function(){var I;function x(X){var be=0;return function(){return be<X.length?{done:!1,value:X[be++]}:{done:!0}}}var N=typeof Object.defineProperties=="function"?Object.defineProperty:function(X,be,ke){return X==Array.prototype||X==Object.prototype||(X[be]=ke.value),X};function ie(X){X=[typeof globalThis=="object"&&globalThis,X,typeof window=="object"&&window,typeof self=="object"&&self,typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal)];for(var be=0;be<X.length;++be){var ke=X[be];if(ke&&ke.Math==Math)return ke}throw Error("Cannot find global object")}var pe=ie(this);function Xe(X,be){if(be)e:{var ke=pe;X=X.split(".");for(var ze=0;ze<X.length-1;ze++){var yt=X[ze];if(!(yt in ke))break e;ke=ke[yt]}X=X[X.length-1],ze=ke[X],be=be(ze),be!=ze&&be!=null&&N(ke,X,{configurable:!0,writable:!0,value:be})}}Xe("Symbol",function(X){function be(Nt){if(this instanceof be)throw new TypeError("Symbol is not a constructor");return new ke(ze+(Nt||"")+"_"+yt++,Nt)}function ke(Nt,Ot){this.g=Nt,N(this,"description",{configurable:!0,writable:!0,value:Ot})}if(X)return X;ke.prototype.toString=function(){return this.g};var ze="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",yt=0;return be}),Xe("Symbol.iterator",function(X){if(X)return X;X=Symbol("Symbol.iterator");for(var be="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),ke=0;ke<be.length;ke++){var ze=pe[be[ke]];typeof ze=="function"&&typeof ze.prototype[X]!="function"&&N(ze.prototype,X,{configurable:!0,writable:!0,value:function(){return rt(x(this))}})}return X});function rt(X){return X={next:X},X[Symbol.iterator]=function(){return this},X}function $e(X){var be=typeof Symbol<"u"&&Symbol.iterator&&X[Symbol.iterator];return be?be.call(X):{next:x(X)}}function lt(X){if(!(X instanceof Array)){X=$e(X);for(var be,ke=[];!(be=X.next()).done;)ke.push(be.value);X=ke}return X}var zt=typeof Object.create=="function"?Object.create:function(X){function be(){}return be.prototype=X,new be},ln;if(typeof Object.setPrototypeOf=="function")ln=Object.setPrototypeOf;else{var hn;e:{var ir={a:!0},ur={};try{ur.__proto__=ir,hn=ur.a;break e}catch{}hn=!1}ln=hn?function(X,be){if(X.__proto__=be,X.__proto__!==be)throw new TypeError(X+" is not extensible");return X}:null}var vn=ln;function Tn(X,be){if(X.prototype=zt(be.prototype),X.prototype.constructor=X,vn)vn(X,be);else for(var ke in be)if(ke!="prototype")if(Object.defineProperties){var ze=Object.getOwnPropertyDescriptor(be,ke);ze&&Object.defineProperty(X,ke,ze)}else X[ke]=be[ke];X.ea=be.prototype}function Ir(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function Er(X){if(X.l)throw new TypeError("Generator is already running");X.l=!0}Ir.prototype.o=function(X){this.h=X};function zr(X,be){X.j={U:be,V:!0},X.g=X.m||X.s}Ir.prototype.return=function(X){this.j={return:X},this.g=this.s};function jt(X,be,ke){return X.g=ke,{value:be}}function Rs(X){this.g=new Ir,this.h=X}function ps(X,be){Er(X.g);var ke=X.g.i;return ke?Ni(X,"return"in ke?ke.return:function(ze){return{value:ze,done:!0}},be,X.g.return):(X.g.return(be),Ur(X))}function Ni(X,be,ke,ze){try{var yt=be.call(X.g.i,ke);if(!(yt instanceof Object))throw new TypeError("Iterator result "+yt+" is not an object");if(!yt.done)return X.g.l=!1,yt;var Nt=yt.value}catch(Ot){return X.g.i=null,zr(X.g,Ot),Ur(X)}return X.g.i=null,ze.call(X.g,Nt),Ur(X)}function Ur(X){for(;X.g.g;)try{var be=X.h(X.g);if(be)return X.g.l=!1,{value:be.value,done:!1}}catch(ke){X.g.h=void 0,zr(X.g,ke)}if(X.g.l=!1,X.g.j){if(be=X.g.j,X.g.j=null,be.V)throw be.U;return{value:be.return,done:!0}}return{value:void 0,done:!0}}function Za(X){this.next=function(be){return Er(X.g),X.g.i?be=Ni(X,X.g.i.next,be,X.g.o):(X.g.o(be),be=Ur(X)),be},this.throw=function(be){return Er(X.g),X.g.i?be=Ni(X,X.g.i.throw,be,X.g.o):(zr(X.g,be),be=Ur(X)),be},this.return=function(be){return ps(X,be)},this[Symbol.iterator]=function(){return this}}function ai(X){function be(ze){return X.next(ze)}function ke(ze){return X.throw(ze)}return new n(function(ze,yt){function Nt(Ot){Ot.done?ze(Ot.value):n.resolve(Ot.value).then(be,ke).then(Nt,yt)}Nt(X.next())})}function Gn(X){return ai(new Za(new Rs(X)))}Xe("Promise",function(X){function be(Ot){this.h=0,this.i=void 0,this.g=[],this.o=!1;var rn=this.j();try{Ot(rn.resolve,rn.reject)}catch(_t){rn.reject(_t)}}function ke(){this.g=null}function ze(Ot){return Ot instanceof be?Ot:new be(function(rn){rn(Ot)})}if(X)return X;ke.prototype.h=function(Ot){if(this.g==null){this.g=[];var rn=this;this.i(function(){rn.l()})}this.g.push(Ot)};var yt=pe.setTimeout;ke.prototype.i=function(Ot){yt(Ot,0)},ke.prototype.l=function(){for(;this.g&&this.g.length;){var Ot=this.g;this.g=[];for(var rn=0;rn<Ot.length;++rn){var _t=Ot[rn];Ot[rn]=null;try{_t()}catch(kn){this.j(kn)}}}this.g=null},ke.prototype.j=function(Ot){this.i(function(){throw Ot})},be.prototype.j=function(){function Ot(kn){return function(Yn){_t||(_t=!0,kn.call(rn,Yn))}}var rn=this,_t=!1;return{resolve:Ot(this.C),reject:Ot(this.l)}},be.prototype.C=function(Ot){if(Ot===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Ot instanceof be)this.F(Ot);else{e:switch(typeof Ot){case"object":var rn=Ot!=null;break e;case"function":rn=!0;break e;default:rn=!1}rn?this.v(Ot):this.m(Ot)}},be.prototype.v=function(Ot){var rn=void 0;try{rn=Ot.then}catch(_t){this.l(_t);return}typeof rn=="function"?this.G(rn,Ot):this.m(Ot)},be.prototype.l=function(Ot){this.s(2,Ot)},be.prototype.m=function(Ot){this.s(1,Ot)},be.prototype.s=function(Ot,rn){if(this.h!=0)throw Error("Cannot settle("+Ot+", "+rn+"): Promise already settled in state"+this.h);this.h=Ot,this.i=rn,this.h===2&&this.D(),this.A()},be.prototype.D=function(){var Ot=this;yt(function(){if(Ot.B()){var rn=pe.console;typeof rn<"u"&&rn.error(Ot.i)}},1)},be.prototype.B=function(){if(this.o)return!1;var Ot=pe.CustomEvent,rn=pe.Event,_t=pe.dispatchEvent;return typeof _t>"u"?!0:(typeof Ot=="function"?Ot=new Ot("unhandledrejection",{cancelable:!0}):typeof rn=="function"?Ot=new rn("unhandledrejection",{cancelable:!0}):(Ot=pe.document.createEvent("CustomEvent"),Ot.initCustomEvent("unhandledrejection",!1,!0,Ot)),Ot.promise=this,Ot.reason=this.i,_t(Ot))},be.prototype.A=function(){if(this.g!=null){for(var Ot=0;Ot<this.g.length;++Ot)Nt.h(this.g[Ot]);this.g=null}};var Nt=new ke;return be.prototype.F=function(Ot){var rn=this.j();Ot.J(rn.resolve,rn.reject)},be.prototype.G=function(Ot,rn){var _t=this.j();try{Ot.call(rn,_t.resolve,_t.reject)}catch(kn){_t.reject(kn)}},be.prototype.then=function(Ot,rn){function _t(qn,xn){return typeof qn=="function"?function(zn){try{kn(qn(zn))}catch(tr){Yn(tr)}}:xn}var kn,Yn,Ar=new be(function(qn,xn){kn=qn,Yn=xn});return this.J(_t(Ot,kn),_t(rn,Yn)),Ar},be.prototype.catch=function(Ot){return this.then(void 0,Ot)},be.prototype.J=function(Ot,rn){function _t(){switch(kn.h){case 1:Ot(kn.i);break;case 2:rn(kn.i);break;default:throw Error("Unexpected state: "+kn.h)}}var kn=this;this.g==null?Nt.h(_t):this.g.push(_t),this.o=!0},be.resolve=ze,be.reject=function(Ot){return new be(function(rn,_t){_t(Ot)})},be.race=function(Ot){return new be(function(rn,_t){for(var kn=$e(Ot),Yn=kn.next();!Yn.done;Yn=kn.next())ze(Yn.value).J(rn,_t)})},be.all=function(Ot){var rn=$e(Ot),_t=rn.next();return _t.done?ze([]):new be(function(kn,Yn){function Ar(zn){return function(tr){qn[zn]=tr,xn--,xn==0&&kn(qn)}}var qn=[],xn=0;do qn.push(void 0),xn++,ze(_t.value).J(Ar(qn.length-1),Yn),_t=rn.next();while(!_t.done)})},be});function xs(X,be){X instanceof String&&(X+="");var ke=0,ze=!1,yt={next:function(){if(!ze&&ke<X.length){var Nt=ke++;return{value:be(Nt,X[Nt]),done:!1}}return ze=!0,{done:!0,value:void 0}}};return yt[Symbol.iterator]=function(){return yt},yt}var La=typeof Object.assign=="function"?Object.assign:function(X,be){for(var ke=1;ke<arguments.length;ke++){var ze=arguments[ke];if(ze)for(var yt in ze)Object.prototype.hasOwnProperty.call(ze,yt)&&(X[yt]=ze[yt])}return X};Xe("Object.assign",function(X){return X||La}),Xe("Object.is",function(X){return X||function(be,ke){return be===ke?be!==0||1/be===1/ke:be!==be&&ke!==ke}}),Xe("Array.prototype.includes",function(X){return X||function(be,ke){var ze=this;ze instanceof String&&(ze=String(ze));var yt=ze.length;for(ke=ke||0,0>ke&&(ke=Math.max(ke+yt,0));ke<yt;ke++){var Nt=ze[ke];if(Nt===be||Object.is(Nt,be))return!0}return!1}}),Xe("String.prototype.includes",function(X){return X||function(be,ke){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(be instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(be,ke||0)!==-1}}),Xe("Array.prototype.keys",function(X){return X||function(){return xs(this,function(be){return be})}});var Zi=this||self;function br(X,be){X=X.split(".");var ke=Zi;X[0]in ke||typeof ke.execScript>"u"||ke.execScript("var "+X[0]);for(var ze;X.length&&(ze=X.shift());)X.length||be===void 0?ke[ze]&&ke[ze]!==Object.prototype[ze]?ke=ke[ze]:ke=ke[ze]={}:ke[ze]=be}function Xi(X){Zi.setTimeout(function(){throw X},0)}function ss(X){Xi(X)}function Fs(X,be){ss(Error("Invalid wire type: "+X+" (at position "+be+")"))}function oa(){ss(Error("Failed to read varint, encoding is invalid."))}function Hs(X,be){return be=String.fromCharCode.apply(null,be),X==null?be:X+be}var pa,gs=typeof TextDecoder<"u",Is,Ea=typeof TextEncoder<"u";function sa(X){if(Ea)X=(Is||(Is=new TextEncoder)).encode(X);else{var be=void 0;be=be===void 0?!1:be;for(var ke=0,ze=new Uint8Array(3*X.length),yt=0;yt<X.length;yt++){var Nt=X.charCodeAt(yt);if(128>Nt)ze[ke++]=Nt;else{if(2048>Nt)ze[ke++]=Nt>>6|192;else{if(55296<=Nt&&57343>=Nt){if(56319>=Nt&&yt<X.length){var Ot=X.charCodeAt(++yt);if(56320<=Ot&&57343>=Ot){Nt=1024*(Nt-55296)+Ot-56320+65536,ze[ke++]=Nt>>18|240,ze[ke++]=Nt>>12&63|128,ze[ke++]=Nt>>6&63|128,ze[ke++]=Nt&63|128;continue}else yt--}if(be)throw Error("Found an unpaired surrogate");Nt=65533}ze[ke++]=Nt>>12|224,ze[ke++]=Nt>>6&63|128}ze[ke++]=Nt&63|128}}X=ze.subarray(0,ke)}return X}var Yo={},Wo=null;function Ys(X){var be;be===void 0&&(be=0),Mi(),be=Yo[be];for(var ke=Array(Math.floor(X.length/3)),ze=be[64]||"",yt=0,Nt=0;yt<X.length-2;yt+=3){var Ot=X[yt],rn=X[yt+1],_t=X[yt+2],kn=be[Ot>>2];Ot=be[(Ot&3)<<4|rn>>4],rn=be[(rn&15)<<2|_t>>6],_t=be[_t&63],ke[Nt++]=kn+Ot+rn+_t}switch(kn=0,_t=ze,X.length-yt){case 2:kn=X[yt+1],_t=be[(kn&15)<<2]||ze;case 1:X=X[yt],ke[Nt]=be[X>>2]+be[(X&3)<<4|kn>>4]+_t+ze}return ke.join("")}function Gs(X){var be=X.length,ke=3*be/4;ke%3?ke=Math.floor(ke):"=.".indexOf(X[be-1])!=-1&&(ke="=.".indexOf(X[be-2])!=-1?ke-2:ke-1);var ze=new Uint8Array(ke),yt=0;return di(X,function(Nt){ze[yt++]=Nt}),ze.subarray(0,yt)}function di(X,be){function ke(_t){for(;ze<X.length;){var kn=X.charAt(ze++),Yn=Wo[kn];if(Yn!=null)return Yn;if(!/^[\s\xa0]*$/.test(kn))throw Error("Unknown base64 encoding at char: "+kn)}return _t}Mi();for(var ze=0;;){var yt=ke(-1),Nt=ke(0),Ot=ke(64),rn=ke(64);if(rn===64&&yt===-1)break;be(yt<<2|Nt>>4),Ot!=64&&(be(Nt<<4&240|Ot>>2),rn!=64&&be(Ot<<6&192|rn))}}function Mi(){if(!Wo){Wo={};for(var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),be=["+/=","+/","-_=","-_.","-_"],ke=0;5>ke;ke++){var ze=X.concat(be[ke].split(""));Yo[ke]=ze;for(var yt=0;yt<ze.length;yt++){var Nt=ze[yt];Wo[Nt]===void 0&&(Wo[Nt]=yt)}}}}var Ko=typeof Uint8Array=="function",Jr;function Oi(X){if(this.g=X,X!==null&&X.length===0)throw Error("ByteString should be constructed with non-empty values")}Oi.prototype.toJSON=function(){if(this.g==null)var X="";else X=this.g,X=this.g=X==null||typeof X=="string"?X:Ko&&X instanceof Uint8Array?Ys(X):null;return X};var as=typeof Uint8Array.prototype.slice=="function";function eo(X,be,ke){return be===ke?Jr||(Jr=new Uint8Array(0)):as?X.slice(be,ke):new Uint8Array(X.subarray(be,ke))}var Dr=0,Ci=0;function Hi(X){if(X.constructor===Uint8Array)return X;if(X.constructor===ArrayBuffer)return new Uint8Array(X);if(X.constructor===Array)return new Uint8Array(X);if(X.constructor===String)return Gs(X);if(X.constructor===Oi){if(X.g==null)var be=Jr||(Jr=new Uint8Array(0));else{be=Uint8Array;var ke=X.g;ke=ke==null||Ko&&ke!=null&&ke instanceof Uint8Array?ke:typeof ke=="string"?Gs(ke):null,X=X.g=ke,be=new be(X)}return be}if(X instanceof Uint8Array)return new Uint8Array(X.buffer,X.byteOffset,X.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}function Nr(X,be){be=be===void 0?{}:be,be=be.u===void 0?!1:be.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=be,X&&Fi(this,X)}function Fi(X,be){X.h=Hi(be),X.l=0,X.i=X.h.length,X.g=X.l}Nr.prototype.reset=function(){this.g=this.l};function Gr(X){X.g>X.i&&(X.j=!0,ss(Error("Tried to read past the end of the data "+X.g+" > "+X.i)))}function vi(X){var be=X.h,ke=be[X.g],ze=ke&127;return 128>ke?(X.g+=1,Gr(X),ze):(ke=be[X.g+1],ze|=(ke&127)<<7,128>ke?(X.g+=2,Gr(X),ze):(ke=be[X.g+2],ze|=(ke&127)<<14,128>ke?(X.g+=3,Gr(X),ze):(ke=be[X.g+3],ze|=(ke&127)<<21,128>ke?(X.g+=4,Gr(X),ze):(ke=be[X.g+4],ze|=(ke&15)<<28,128>ke?(X.g+=5,Gr(X),ze>>>0):(X.g+=5,128<=be[X.g++]&&128<=be[X.g++]&&128<=be[X.g++]&&128<=be[X.g++]&&128<=be[X.g++]?(X.j=!0,oa(),ze):(Gr(X),ze))))))}var Di=[];function qo(){this.g=new Uint8Array(64),this.h=0}function xi(X,be){if(!(X.h+1<X.g.length)){var ke=X.g;X.g=new Uint8Array(Math.ceil(1+2*X.g.length)),X.g.set(ke)}X.g[X.h++]=be}qo.prototype.length=function(){return this.h},qo.prototype.end=function(){var X=this.g,be=this.h;return this.h=0,eo(X,0,be)};function Mr(X,be){for(;127<be;)xi(X,be&127|128),be>>>=7;xi(X,be)}function Xo(X){var be={},ke=be.N===void 0?!1:be.N;this.m={u:be.u===void 0?!1:be.u},this.N=ke,be=this.m,Di.length?(ke=Di.pop(),be&&(ke.u=be.u),X&&Fi(ke,X),X=ke):X=new Nr(X,be),this.g=X,this.l=this.g.g,this.h=this.i=-1,this.j=!1}Xo.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};function zo(X){var be=X.g;if((be=be.g==be.i)||(be=X.j)||(be=X.g,be=be.j||0>be.g||be.g>be.i),be)return!1;X.l=X.g.g;var ke=vi(X.g);return be=ke>>>3,ke&=7,0<=ke&&5>=ke?(X.i=be,X.h=ke,!0):(X.j=!0,Fs(ke,X.l),!1)}function Gi(X){switch(X.h){case 0:if(X.h!=0)Gi(X);else e:{X=X.g;for(var be=X.g,ke=0;10>ke;ke++){if(!(X.h[be]&128)){X.g=be+1,Gr(X);break e}be++}X.j=!0,oa()}break;case 1:X=X.g,X.g+=8,Gr(X);break;case 2:X.h!=2?Gi(X):(be=vi(X.g),X=X.g,X.g+=be,Gr(X));break;case 5:X=X.g,X.g+=4,Gr(X);break;case 3:be=X.i;do{if(!zo(X)){X.j=!0,ss(Error("Unmatched start-group tag: stream EOF"));break}if(X.h==4){X.i!=be&&(X.j=!0,ss(Error("Unmatched end-group tag")));break}Gi(X)}while(1);break;default:X.j=!0,Fs(X.h,X.l)}}function Ms(X,be,ke){X.N||(X=eo(X.g.h,ke,X.g.g),(ke=be.m)?ke.push(X):be.m=[X])}var cs=[];function Jo(){this.h=[],this.i=0,this.g=new qo}function us(X,be){be.length!==0&&(X.h.push(be),X.i+=be.length)}function Ei(X,be,ke){Mr(X.g,8*be+2),Mr(X.g,ke.length),us(X,X.g.end()),us(X,ke)}var Bi=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol(void 0):void 0;function Ti(X,be){Object.isFrozen(X)||(Bi?X[Bi]|=be:X.g!==void 0?X.g|=be:Object.defineProperties(X,{g:{value:be,configurable:!0,writable:!0,enumerable:!1}}))}function _r(X){if(!X)return 0;var be;return Bi?be=X[Bi]:be=X.g,be??0}function _o(X){return Array.isArray(X)&&Ti(X,1),X}function Hr(X){if(!Array.isArray(X))throw Error("cannot mark non-array as immutable");Ti(X,2)}function Pr(X){return X!==null&&typeof X=="object"&&X.constructor===Object}function ys(X){switch(typeof X){case"number":return isFinite(X)?X:String(X);case"object":return Ko&&X!=null&&X instanceof Uint8Array?Ys(X):X;default:return X}}function fi(X,be){if(X!=null)return Array.isArray(X)||Pr(X)?gr(X,be):be(X)}function gr(X,be){if(Array.isArray(X)){for(var ke=Array(X.length),ze=0;ze<X.length;ze++)ke[ze]=fi(X[ze],be);return _r(X)&1&&_o(ke),ke}ke={};for(ze in X)ke[ze]=fi(X[ze],be);return ke}var _n;function $r(X,be,ke){var ze=_n;_n=null,X||(X=ze),ze=this.constructor.ca,X||(X=ze?[ze]:[]),this.j=(ze?0:-1)-(this.constructor.aa||0),this.i=null,this.g=X;e:{if(ze=this.g.length,X=ze-1,ze&&(ze=this.g[X],Pr(ze))){this.l=X-this.j,this.h=ze;break e}be!==void 0&&-1<be?(this.l=Math.max(be,X+1-this.j),this.h=null):this.l=Number.MAX_VALUE}if(ke)for(be=0;be<ke.length;be++)X=ke[be],X<this.l?(X+=this.j,(ze=this.g[X])?_o(ze):this.g[X]=Ui):(Yr(this),(ze=this.h[X])?_o(ze):this.h[X]=Ui)}var Ui=Object.freeze(_o([]));function Yr(X){var be=X.l+X.j;X.g[be]||(X.h=X.g[be]={})}function Qr(X,be,ke){return be===-1?null:ke!==void 0&&ke||be>=X.l?X.h?X.h[be]:void 0:X.g[be+X.j]}function qt(X,be,ke){ke=ke===void 0?!0:ke;var ze=ze===void 0?!1:ze,yt=Qr(X,be,ze);return yt==null&&(yt=Ui),yt===Ui?(yt=_o([]),bn(X,be,yt,ze)):ke&&Array.isArray(yt)&&_r(yt)&2&&(yt=yt.slice(),bn(X,be,yt,ze)),yt}function an(X,be,ke){return X=Qr(X,be),X=X==null?X:+X,X??(ke===void 0?0:ke)}function bn(X,be,ke,ze){ze!==void 0&&ze||be>=X.l?(Yr(X),X.h[be]=ke):X.g[be+X.j]=ke}function Wr(X,be,ke){X.i||(X.i={});var ze=X.i[ke];if(!ze){var yt=qt(X,ke,!1);ze=[];for(var Nt=Array.isArray(yt)?!!(_r(yt)&2):!1,Ot=0;Ot<yt.length;Ot++)ze[Ot]=new be(yt[Ot]),Nt&&Hr(ze[Ot].g);Nt&&(Hr(ze),Object.freeze(ze)),X.i[ke]=ze}return ze}function si(X,be,ke,ze,yt){var Nt=Wr(X,ze,be);ke=ke||new ze,X=qt(X,be),yt!=null?(Nt.splice(yt,0,ke),X.splice(yt,0,ni(ke))):(Nt.push(ke),X.push(ni(ke)))}$r.prototype.toJSON=function(){var X=ni(this);return gr(X,ys)};function ni(X){if(X.i)for(var be in X.i){var ke=X.i[be];if(Array.isArray(ke))for(var ze=0;ze<ke.length;ze++)ke[ze]&&ni(ke[ze]);else ke&&ni(ke)}return X.g}$r.prototype.toString=function(){return ni(this).toString()};function nr(X,be){return X=Qr(X,be),X??0}function hi(X,be){return X=Qr(X,be),X??""}function Yi(X,be){if(X=X.m){us(be,be.g.end());for(var ke=0;ke<X.length;ke++)us(be,X[ke])}}function es(X){var be=X[0];switch(X.length){case 2:var ke=X[1];return function(_t,kn,Yn){return be(_t,kn,Yn,ke)};case 3:var ze=X[1],yt=X[2];return function(_t,kn,Yn){return be(_t,kn,Yn,ze,yt)};case 4:var Nt=X[1],Ot=X[2],rn=X[3];return function(_t,kn,Yn){return be(_t,kn,Yn,Nt,Ot,rn)};default:throw Error("unsupported number of parameters, expected [2-4], got "+X.length)}}function ts(X,be,ke){for(;zo(be)&&be.h!=4;){var ze=be.i,yt=ke[ze];if(yt){if(Array.isArray(yt)&&(yt=ke[ze]=es(yt)),!yt(be,X,ze)){ze=be,yt=X;var Nt=ze.l;Gi(ze),Ms(ze,yt,Nt)}}else ze=be,yt=X,Nt=ze.l,Gi(ze),Ms(ze,yt,Nt)}return X}function vs(X,be){var ke=new Jo;if(be(X,ke),X=ke.i+ke.g.length(),X===0)ke=new Uint8Array(0);else{X=new Uint8Array(X);for(var ze=ke.h,yt=ze.length,Nt=be=0;Nt<yt;Nt++){var Ot=ze[Nt];Ot.length!==0&&(X.set(Ot,be),be+=Ot.length)}ze=ke.g,yt=ze.h,yt!==0&&(X.set(ze.g.subarray(0,yt),be),ze.h=0),ke.h=[X],ke=X}return ke}function ws(X,be,ke){if(cs.length){var ze=cs.pop();X&&(Fi(ze.g,X),ze.i=-1,ze.h=-1),X=ze}else X=new Xo(X);try{return ke(new be,X)}finally{be=X.g,be.h=null,be.l=0,be.i=0,be.g=0,be.j=!1,be.u=!1,X.i=-1,X.h=-1,X.j=!1,100>cs.length&&cs.push(X)}}function ji(X,be,ke){if(be=Qr(be,ke),be!=null){Mr(X.g,8*ke+5),X=X.g;var ze=be;ze=(ke=0>ze?1:0)?-ze:ze,ze===0?0<1/ze?Dr=Ci=0:(Ci=0,Dr=2147483648):isNaN(ze)?(Ci=0,Dr=2147483647):34028234663852886e22<ze?(Ci=0,Dr=(ke<<31|2139095040)>>>0):11754943508222875e-54>ze?(ze=Math.round(ze/Math.pow(2,-149)),Ci=0,Dr=(ke<<31|ze)>>>0):(be=Math.floor(Math.log(ze)/Math.LN2),ze*=Math.pow(2,-be),ze=Math.round(8388608*ze),16777216<=ze&&++be,Ci=0,Dr=(ke<<31|be+127<<23|ze&8388607)>>>0),ke=Dr,xi(X,ke>>>0&255),xi(X,ke>>>8&255),xi(X,ke>>>16&255),xi(X,ke>>>24&255)}}function ns(X,be,ke){if(X.h!==5)return!1;X=X.g;var ze=X.h[X.g],yt=X.h[X.g+1],Nt=X.h[X.g+2],Ot=X.h[X.g+3];return X.g+=4,Gr(X),yt=(ze<<0|yt<<8|Nt<<16|Ot<<24)>>>0,X=2*(yt>>31)+1,ze=yt>>>23&255,yt&=8388607,bn(be,ke,ze==255?yt?NaN:1/0*X:ze==0?X*Math.pow(2,-149)*yt:X*Math.pow(2,ze-150)*(yt+Math.pow(2,23))),!0}function Fa(X,be,ke){if(X.h!==0)return!1;for(var ze=X.g,yt=128,Nt=0,Ot=X=0;4>Ot&&128<=yt;Ot++)yt=ze.h[ze.g++],Nt|=(yt&127)<<7*Ot;if(128<=yt&&(yt=ze.h[ze.g++],Nt|=(yt&127)<<28,X|=(yt&127)>>4),128<=yt)for(Ot=0;5>Ot&&128<=yt;Ot++)yt=ze.h[ze.g++],X|=(yt&127)<<7*Ot+3;return 128>yt?(ze=Nt>>>0,yt=X>>>0,(X=yt&2147483648)&&(ze=~ze+1>>>0,yt=~yt>>>0,ze==0&&(yt=yt+1>>>0)),ze=4294967296*yt+(ze>>>0),X=X?-ze:ze):(ze.j=!0,oa(),X=void 0),bn(be,ke,X),!0}function rs(X,be,ke){return X.h!==0?!1:(bn(be,ke,vi(X.g)),!0)}function Ki(X,be,ke){if(X.h!==2)return!1;var ze=vi(X.g);X=X.g;var yt=X.g;X.g+=ze,Gr(X),X=X.h;var Nt;if(gs)(Nt=pa)||(Nt=pa=new TextDecoder("utf-8",{fatal:!1})),Nt=Nt.decode(X.subarray(yt,yt+ze));else{ze=yt+ze;for(var Ot=[],rn=null,_t,kn,Yn;yt<ze;)_t=X[yt++],128>_t?Ot.push(_t):224>_t?yt>=ze?Ot.push(65533):(kn=X[yt++],194>_t||(kn&192)!==128?(yt--,Ot.push(65533)):Ot.push((_t&31)<<6|kn&63)):240>_t?yt>=ze-1?Ot.push(65533):(kn=X[yt++],(kn&192)!==128||_t===224&&160>kn||_t===237&&160<=kn||((Nt=X[yt++])&192)!==128?(yt--,Ot.push(65533)):Ot.push((_t&15)<<12|(kn&63)<<6|Nt&63)):244>=_t?yt>=ze-2?Ot.push(65533):(kn=X[yt++],(kn&192)!==128||(_t<<28)+(kn-144)>>30||((Nt=X[yt++])&192)!==128||((Yn=X[yt++])&192)!==128?(yt--,Ot.push(65533)):(_t=(_t&7)<<18|(kn&63)<<12|(Nt&63)<<6|Yn&63,_t-=65536,Ot.push((_t>>10&1023)+55296,(_t&1023)+56320))):Ot.push(65533),8192<=Ot.length&&(rn=Hs(rn,Ot),Ot.length=0);Nt=Hs(rn,Ot)}return bn(be,ke,Nt),!0}function Ns(X,be,ke,ze,yt){if(X.h!==2)return!1;var Nt=new ze,Ot=X.g.i,rn=vi(X.g),_t=X.g.g+rn;if(X.g.i=_t,yt(Nt,X),yt=_t-X.g.g,yt!==0)throw Error("Message parsing ended unexpectedly. Expected to read "+(rn+" bytes, instead read "+(rn-yt)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return X.g.g=_t,X.g.i=Ot,si(be,ke,Nt,ze,void 0),!0}function Ks(X){$r.call(this,X)}var Ro;Tn(Ks,$r);function Ta(X,be){var ke=Qr(X,1);if(ke!=null&&ke!=null){Mr(be.g,8);var ze=be.g;if(0<=ke)Mr(ze,ke);else{for(var yt=0;9>yt;yt++)xi(ze,ke&127|128),ke>>=7;xi(ze,1)}}ji(be,X,2),ze=Qr(X,3),ze!=null&&Ei(be,3,sa(ze)),ze=Qr(X,4),ze!=null&&Ei(be,4,sa(ze)),Yi(X,be)}function is(X,be){return ts(X,be,Ro||(Ro={1:rs,2:ns,3:Ki,4:Ki}))}function Zs(X){$r.call(this,X,-1,ls)}var $s;Tn(Zs,$r),Zs.prototype.addClassification=function(X,be){return si(this,1,X,Ks,be),this};function Aa(X,be){return ts(X,be,$s||($s={1:[Ns,Ks,is]}))}var ls=[1];function Qs(X){$r.call(this,X)}var Ya;Tn(Qs,$r);function Ka(X,be){ji(be,X,1),ji(be,X,2),ji(be,X,3),ji(be,X,4),ji(be,X,5),Yi(X,be)}function qs(X,be){return ts(X,be,Ya||(Ya={1:ns,2:ns,3:ns,4:ns,5:ns}))}function aa(X){$r.call(this,X,-1,we)}var oe;Tn(aa,$r);function Ie(X,be){return ts(X,be,oe||(oe={1:[Ns,Qs,qs]}))}var we=[1];function St(X){$r.call(this,X)}var Bt;Tn(St,$r);function dn(X,be){ji(be,X,1),ji(be,X,2),ji(be,X,3),ji(be,X,4),ji(be,X,5);var ke=Qr(X,6);if(ke!=null&&ke!=null){Mr(be.g,48);var ze=be.g,yt=ke;ke=0>yt,yt=Math.abs(yt);var Nt=yt>>>0;for(yt=Math.floor((yt-Nt)/4294967296),yt>>>=0,ke&&(yt=~yt>>>0,Nt=(~Nt>>>0)+1,4294967295<Nt&&(Nt=0,yt++,4294967295<yt&&(yt=0))),Dr=Nt,Ci=yt,ke=Dr,Nt=Ci;0<Nt||127<ke;)xi(ze,ke&127|128),ke=(ke>>>7|Nt<<25)>>>0,Nt>>>=7;xi(ze,ke)}Yi(X,be)}function Xt(X,be){return ts(X,be,Bt||(Bt={1:ns,2:ns,3:ns,4:ns,5:ns,6:Fa}))}function sn(X,be,ke){if(ke=X.createShader(ke===0?X.VERTEX_SHADER:X.FRAGMENT_SHADER),X.shaderSource(ke,be),X.compileShader(ke),!X.getShaderParameter(ke,X.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+X.getShaderInfoLog(ke));return ke}function An(X){return Wr(X,Ks,1).map(function(be){return{index:nr(be,1),X:an(be,2),label:Qr(be,3)!=null?hi(be,3):void 0,displayName:Qr(be,4)!=null?hi(be,4):void 0}})}function Qn(X){return{x:an(X,1),y:an(X,2),z:an(X,3),visibility:Qr(X,4)!=null?an(X,4):void 0}}function Or(X){return Wr(ws(X,aa,Ie),Qs,1).map(Qn)}function Sr(X,be){this.h=X,this.g=be,this.l=0}function jr(X,be,ke){return Tr(X,be),typeof X.g.canvas.transferToImageBitmap=="function"?n.resolve(X.g.canvas.transferToImageBitmap()):ke?n.resolve(X.g.canvas):typeof createImageBitmap=="function"?createImageBitmap(X.g.canvas):(X.i===void 0&&(X.i=document.createElement("canvas")),new n(function(ze){X.i.height=X.g.canvas.height,X.i.width=X.g.canvas.width,X.i.getContext("2d",{}).drawImage(X.g.canvas,0,0,X.g.canvas.width,X.g.canvas.height),ze(X.i)}))}function Tr(X,be){var ke=X.g;if(X.m===void 0){var ze=sn(ke,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),yt=sn(ke,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),Nt=ke.createProgram();if(ke.attachShader(Nt,ze),ke.attachShader(Nt,yt),ke.linkProgram(Nt),!ke.getProgramParameter(Nt,ke.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+ke.getProgramInfoLog(Nt));ze=X.m=Nt,ke.useProgram(ze),yt=ke.getUniformLocation(ze,"sampler0"),X.j={I:ke.getAttribLocation(ze,"aVertex"),H:ke.getAttribLocation(ze,"aTex"),da:yt},X.s=ke.createBuffer(),ke.bindBuffer(ke.ARRAY_BUFFER,X.s),ke.enableVertexAttribArray(X.j.I),ke.vertexAttribPointer(X.j.I,2,ke.FLOAT,!1,0,0),ke.bufferData(ke.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),ke.STATIC_DRAW),ke.bindBuffer(ke.ARRAY_BUFFER,null),X.o=ke.createBuffer(),ke.bindBuffer(ke.ARRAY_BUFFER,X.o),ke.enableVertexAttribArray(X.j.H),ke.vertexAttribPointer(X.j.H,2,ke.FLOAT,!1,0,0),ke.bufferData(ke.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),ke.STATIC_DRAW),ke.bindBuffer(ke.ARRAY_BUFFER,null),ke.uniform1i(yt,0)}ze=X.j,ke.useProgram(X.m),ke.canvas.width=be.width,ke.canvas.height=be.height,ke.viewport(0,0,be.width,be.height),ke.activeTexture(ke.TEXTURE0),X.h.bindTexture2d(be.glName),ke.enableVertexAttribArray(ze.I),ke.bindBuffer(ke.ARRAY_BUFFER,X.s),ke.vertexAttribPointer(ze.I,2,ke.FLOAT,!1,0,0),ke.enableVertexAttribArray(ze.H),ke.bindBuffer(ke.ARRAY_BUFFER,X.o),ke.vertexAttribPointer(ze.H,2,ke.FLOAT,!1,0,0),ke.bindFramebuffer(ke.DRAW_FRAMEBUFFER?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,null),ke.clearColor(0,0,0,0),ke.clear(ke.COLOR_BUFFER_BIT),ke.colorMask(!0,!0,!0,!0),ke.drawArrays(ke.TRIANGLE_FAN,0,4),ke.disableVertexAttribArray(ze.I),ke.disableVertexAttribArray(ze.H),ke.bindBuffer(ke.ARRAY_BUFFER,null),X.h.bindTexture2d(0)}function ar(X){this.g=X}var wr=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Br(X,be){return be+X}function ri(X,be){window[X]=be}function pi(X){var be=document.createElement("script");return be.setAttribute("src",X),be.setAttribute("crossorigin","anonymous"),new n(function(ke){be.addEventListener("load",function(){ke()},!1),be.addEventListener("error",function(){ke()},!1),document.body.appendChild(be)})}function bi(){return Gn(function(X){switch(X.g){case 1:return X.m=2,jt(X,WebAssembly.instantiate(wr),4);case 4:X.g=3,X.m=0;break;case 2:return X.m=0,X.j=null,X.return(!1);case 3:return X.return(!0)}})}function zi(X){if(this.g=X,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=n.resolve(),this.P="",this.B={},this.locateFile=X&&X.locateFile||Br,typeof window=="object")var be=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")be=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.S=be,X.options){be=$e(Object.keys(X.options));for(var ke=be.next();!ke.done;ke=be.next()){ke=ke.value;var ze=X.options[ke].default;ze!==void 0&&(this.j[ke]=typeof ze=="function"?ze():ze)}}}I=zi.prototype,I.close=function(){return this.i&&this.i.delete(),n.resolve()};function te(X){var be,ke,ze,yt,Nt,Ot,rn,_t,kn,Yn,Ar;return Gn(function(qn){switch(qn.g){case 1:return X.R?(be=X.g.files===void 0?[]:typeof X.g.files=="function"?X.g.files(X.j):X.g.files,jt(qn,bi(),2)):qn.return();case 2:if(ke=qn.h,typeof window=="object")return ri("createMediapipeSolutionsWasm",{locateFile:X.locateFile}),ri("createMediapipeSolutionsPackedAssets",{locateFile:X.locateFile}),Ot=be.filter(function(xn){return xn.data!==void 0}),rn=be.filter(function(xn){return xn.data===void 0}),_t=n.all(Ot.map(function(xn){var zn=st(X,xn.url);if(xn.path!==void 0){var tr=xn.path;zn=zn.then(function(lr){return X.overrideFile(tr,lr),n.resolve(lr)})}return zn})),kn=n.all(rn.map(function(xn){return xn.simd===void 0||xn.simd&&ke||!xn.simd&&!ke?pi(X.locateFile(xn.url,X.S)):n.resolve()})).then(function(){var xn,zn,tr;return Gn(function(lr){if(lr.g==1)return xn=window.createMediapipeSolutionsWasm,zn=window.createMediapipeSolutionsPackedAssets,tr=X,jt(lr,xn(zn),2);tr.h=lr.h,lr.g=0})}),Yn=function(){return Gn(function(xn){return X.g.graph&&X.g.graph.url?xn=jt(xn,st(X,X.g.graph.url),0):(xn.g=0,xn=void 0),xn})}(),jt(qn,n.all([kn,_t,Yn]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return ze=be.filter(function(xn){return xn.simd===void 0||xn.simd&&ke||!xn.simd&&!ke}).map(function(xn){return X.locateFile(xn.url,X.S)}),importScripts.apply(null,lt(ze)),yt=X,jt(qn,createMediapipeSolutionsWasm(Module),6);case 6:yt.h=qn.h,X.l=new OffscreenCanvas(1,1),X.h.canvas=X.l,Nt=X.h.GL.createContext(X.l,{antialias:!1,alpha:!1,ba:typeof WebGL2RenderingContext<"u"?2:1}),X.h.GL.makeContextCurrent(Nt),qn.g=4;break;case 7:if(X.l=document.createElement("canvas"),Ar=X.l.getContext("webgl2",{}),!Ar&&(Ar=X.l.getContext("webgl",{}),!Ar))return alert("Failed to create WebGL canvas context when passing video frame."),qn.return();X.D=Ar,X.h.canvas=X.l,X.h.createContext(X.l,!0,!0,{});case 4:X.i=new X.h.SolutionWasm,X.R=!1,qn.g=0}})}function le(X){var be,ke,ze,yt,Nt,Ot,rn,_t;return Gn(function(kn){if(kn.g==1){if(X.g.graph&&X.g.graph.url&&X.P===X.g.graph.url)return kn.return();if(X.o=!0,!X.g.graph||!X.g.graph.url){kn.g=2;return}return X.P=X.g.graph.url,jt(kn,st(X,X.g.graph.url),3)}for(kn.g!=2&&(be=kn.h,X.i.loadGraph(be)),ke=$e(Object.keys(X.B)),ze=ke.next();!ze.done;ze=ke.next())yt=ze.value,X.i.overrideFile(yt,X.B[yt]);if(X.B={},X.g.listeners)for(Nt=$e(X.g.listeners),Ot=Nt.next();!Ot.done;Ot=Nt.next())rn=Ot.value,kt(X,rn);_t=X.j,X.j={},X.setOptions(_t),kn.g=0})}I.reset=function(){var X=this;return Gn(function(be){X.i&&(X.i.reset(),X.m={},X.s={}),be.g=0})},I.setOptions=function(X,be){var ke=this;if(be=be||this.g.options){for(var ze=[],yt=[],Nt={},Ot=$e(Object.keys(X)),rn=Ot.next();!rn.done;Nt={K:Nt.K,L:Nt.L},rn=Ot.next()){var _t=rn.value;_t in this.j&&this.j[_t]===X[_t]||(this.j[_t]=X[_t],rn=be[_t],rn!==void 0&&(rn.onChange&&(Nt.K=rn.onChange,Nt.L=X[_t],ze.push(function(kn){return function(){var Yn;return Gn(function(Ar){if(Ar.g==1)return jt(Ar,kn.K(kn.L),2);Yn=Ar.h,Yn===!0&&(ke.o=!0),Ar.g=0})}}(Nt))),rn.graphOptionXref&&(_t={valueNumber:rn.type===1?X[_t]:0,valueBoolean:rn.type===0?X[_t]:!1,valueString:rn.type===2?X[_t]:""},rn=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),rn.graphOptionXref),_t),yt.push(rn))))}(ze.length!==0||yt.length!==0)&&(this.o=!0,this.A=(this.A===void 0?[]:this.A).concat(yt),this.v=(this.v===void 0?[]:this.v).concat(ze))}};function ve(X){var be,ke,ze,yt,Nt,Ot,rn;return Gn(function(_t){switch(_t.g){case 1:if(!X.o)return _t.return();if(!X.v){_t.g=2;break}be=$e(X.v),ke=be.next();case 3:if(ke.done){_t.g=5;break}return ze=ke.value,jt(_t,ze(),4);case 4:ke=be.next(),_t.g=3;break;case 5:X.v=void 0;case 2:if(X.A){for(yt=new X.h.GraphOptionChangeRequestList,Nt=$e(X.A),Ot=Nt.next();!Ot.done;Ot=Nt.next())rn=Ot.value,yt.push_back(rn);X.i.changeOptions(yt),yt.delete(),X.A=void 0}X.o=!1,_t.g=0}})}I.initialize=function(){var X=this;return Gn(function(be){return be.g==1?jt(be,te(X),2):be.g!=3?jt(be,le(X),3):jt(be,ve(X),0)})};function st(X,be){var ke,ze;return Gn(function(yt){return be in X.F?yt.return(X.F[be]):(ke=X.locateFile(be,""),ze=fetch(ke).then(function(Nt){return Nt.arrayBuffer()}),X.F[be]=ze,yt.return(ze))})}I.overrideFile=function(X,be){this.i?this.i.overrideFile(X,be):this.B[X]=be},I.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},I.send=function(X,be){var ke=this,ze,yt,Nt,Ot,rn,_t,kn,Yn,Ar;return Gn(function(qn){switch(qn.g){case 1:return ke.g.inputs?(ze=1e3*(be??performance.now()),jt(qn,ke.C,2)):qn.return();case 2:return jt(qn,ke.initialize(),3);case 3:for(yt=new ke.h.PacketDataList,Nt=$e(Object.keys(X)),Ot=Nt.next();!Ot.done;Ot=Nt.next())if(rn=Ot.value,_t=ke.g.inputs[rn]){e:{var xn=X[rn];switch(_t.type){case"video":var zn=ke.m[_t.stream];if(zn||(zn=new Sr(ke.h,ke.D),ke.m[_t.stream]=zn),zn.l===0&&(zn.l=zn.h.createTexture()),typeof HTMLVideoElement<"u"&&xn instanceof HTMLVideoElement)var tr=xn.videoWidth,lr=xn.videoHeight;else typeof HTMLImageElement<"u"&&xn instanceof HTMLImageElement?(tr=xn.naturalWidth,lr=xn.naturalHeight):(tr=xn.width,lr=xn.height);lr={glName:zn.l,width:tr,height:lr},tr=zn.g,tr.canvas.width=lr.width,tr.canvas.height=lr.height,tr.activeTexture(tr.TEXTURE0),zn.h.bindTexture2d(zn.l),tr.texImage2D(tr.TEXTURE_2D,0,tr.RGBA,tr.RGBA,tr.UNSIGNED_BYTE,xn),zn.h.bindTexture2d(0),zn=lr;break e;case"detections":for(zn=ke.m[_t.stream],zn||(zn=new ar(ke.h),ke.m[_t.stream]=zn),zn.data||(zn.data=new zn.g.DetectionListData),zn.data.reset(xn.length),lr=0;lr<xn.length;++lr){tr=xn[lr];var hr=zn.data,B=hr.setBoundingBox,ge=lr,Ne=tr.T,He=new St;if(bn(He,1,Ne.Y),bn(He,2,Ne.Z),bn(He,3,Ne.height),bn(He,4,Ne.width),bn(He,5,Ne.rotation),bn(He,6,Ne.W),Ne=vs(He,dn),B.call(hr,ge,Ne),tr.O)for(hr=0;hr<tr.O.length;++hr){He=tr.O[hr];var vt=!!He.visibility;B=zn.data,ge=B.addNormalizedLandmark,Ne=lr,He=Object.assign(Object.assign({},He),{visibility:vt?He.visibility:0}),vt=new Qs,bn(vt,1,He.x),bn(vt,2,He.y),bn(vt,3,He.z),He.visibility&&bn(vt,4,He.visibility),He=vs(vt,Ka),ge.call(B,Ne,He)}if(tr.M)for(hr=0;hr<tr.M.length;++hr)B=zn.data,ge=B.addClassification,Ne=lr,He=tr.M[hr],vt=new Ks,bn(vt,2,He.X),He.index&&bn(vt,1,He.index),He.label&&bn(vt,3,He.label),He.displayName&&bn(vt,4,He.displayName),He=vs(vt,Ta),ge.call(B,Ne,He)}zn=zn.data;break e;default:zn={}}}switch(kn=zn,Yn=_t.stream,_t.type){case"video":yt.pushTexture2d(Object.assign(Object.assign({},kn),{stream:Yn,timestamp:ze}));break;case"detections":Ar=kn,Ar.stream=Yn,Ar.timestamp=ze,yt.pushDetectionList(Ar);break;default:throw Error("Unknown input config type: '"+_t.type+"'")}}return ke.i.send(yt),jt(qn,ke.C,4);case 4:yt.delete(),qn.g=0}})};function Vt(X,be,ke){var ze,yt,Nt,Ot,rn,_t,kn,Yn,Ar,qn,xn,zn,tr,lr;return Gn(function(hr){switch(hr.g){case 1:if(!ke)return hr.return(be);for(ze={},yt=0,Nt=$e(Object.keys(ke)),Ot=Nt.next();!Ot.done;Ot=Nt.next())rn=Ot.value,_t=ke[rn],typeof _t!="string"&&_t.type==="texture"&&be[_t.stream]!==void 0&&++yt;1<yt&&(X.G=!1),kn=$e(Object.keys(ke)),Ot=kn.next();case 2:if(Ot.done){hr.g=4;break}if(Yn=Ot.value,Ar=ke[Yn],typeof Ar=="string")return tr=ze,lr=Yn,jt(hr,Ht(X,Yn,be[Ar]),14);if(qn=be[Ar.stream],Ar.type==="detection_list"){if(qn){for(var B=qn.getRectList(),ge=qn.getLandmarksList(),Ne=qn.getClassificationsList(),He=[],vt=0;vt<B.size();++vt){var L=ws(B.get(vt),St,Xt);L={T:{Y:an(L,1),Z:an(L,2),height:an(L,3),width:an(L,4),rotation:an(L,5,0),W:nr(L,6)},O:Or(ge.get(vt)),M:An(ws(Ne.get(vt),Zs,Aa))},He.push(L)}B=He}else B=[];ze[Yn]=B,hr.g=7;break}if(Ar.type==="proto_list"){if(qn){for(B=Array(qn.size()),ge=0;ge<qn.size();ge++)B[ge]=qn.get(ge);qn.delete()}else B=[];ze[Yn]=B,hr.g=7;break}if(qn===void 0){hr.g=3;break}if(Ar.type==="float_list"){ze[Yn]=qn,hr.g=7;break}if(Ar.type==="proto"){ze[Yn]=qn,hr.g=7;break}if(Ar.type!=="texture")throw Error("Unknown output config type: '"+Ar.type+"'");return xn=X.s[Yn],xn||(xn=new Sr(X.h,X.D),X.s[Yn]=xn),jt(hr,jr(xn,qn,X.G),13);case 13:zn=hr.h,ze[Yn]=zn;case 7:Ar.transform&&ze[Yn]&&(ze[Yn]=Ar.transform(ze[Yn])),hr.g=3;break;case 14:tr[lr]=hr.h;case 3:Ot=kn.next(),hr.g=2;break;case 4:return hr.return(ze)}})}function Ht(X,be,ke){var ze;return Gn(function(yt){return typeof ke=="number"||ke instanceof Uint8Array||ke instanceof X.h.Uint8BlobList?yt.return(ke):ke instanceof X.h.Texture2dDataOut?(ze=X.s[be],ze||(ze=new Sr(X.h,X.D),X.s[be]=ze),yt.return(jr(ze,ke,X.G))):yt.return(void 0)})}function kt(X,be){for(var ke=be.name||"$",ze=[].concat(lt(be.wants)),yt=new X.h.StringList,Nt=$e(be.wants),Ot=Nt.next();!Ot.done;Ot=Nt.next())yt.push_back(Ot.value);Nt=X.h.PacketListener.implement({onResults:function(rn){for(var _t={},kn=0;kn<be.wants.length;++kn)_t[ze[kn]]=rn.get(kn);var Yn=X.listeners[ke];Yn&&(X.C=Vt(X,_t,be.outs).then(function(Ar){Ar=Yn(Ar);for(var qn=0;qn<be.wants.length;++qn){var xn=_t[ze[qn]];typeof xn=="object"&&xn.hasOwnProperty&&xn.hasOwnProperty("delete")&&xn.delete()}Ar&&(X.C=Ar)}))}}),X.i.attachMultiListener(yt,Nt),yt.delete()}I.onResults=function(X,be){this.listeners[be||"$"]=X},br("Solution",zi),br("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Qt(X){switch(X===void 0&&(X=0),X){case 1:return"pose_landmark_full.tflite";case 2:return"pose_landmark_heavy.tflite";default:return"pose_landmark_lite.tflite"}}function pn(X){var be=this;X=X||{},this.g=new zi({locateFile:X.locateFile,files:function(ke){return[{url:"pose_solution_packed_assets_loader.js"},{simd:!1,url:"pose_solution_wasm_bin.js"},{simd:!0,url:"pose_solution_simd_wasm_bin.js"},{data:!0,url:Qt(ke.modelComplexity)}]},graph:{url:"pose_web.binarypb"},listeners:[{wants:["pose_landmarks","world_landmarks","segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},poseLandmarks:{type:"proto",stream:"pose_landmarks",transform:Or},poseWorldLandmarks:{type:"proto",stream:"world_landmarks",transform:Or},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(ke){var ze,yt,Nt;return Gn(function(Ot){return Ot.g==1?(ze=Qt(ke),yt="third_party/mediapipe/modules/pose_landmark/"+ze,jt(Ot,st(be.g,ze),2)):(Nt=Ot.h,be.g.overrideFile(yt,Nt),Ot.return(!0))})}},smoothLandmarks:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothLandmarks",fieldName:"bool_value"}},enableSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorEnableSegmentation",fieldName:"bool_value"}},smoothSegmentation:{type:0,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorSmoothSegmentation",fieldName:"bool_value"}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"poselandmarkgpu__posedetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"poselandmarkgpu__poselandmarkbyroigpu__tensorstoposelandmarksandsegmentation__ThresholdingCalculator",fieldName:"threshold"}}}})}I=pn.prototype,I.reset=function(){this.g.reset()},I.close=function(){return this.g.close(),n.resolve()},I.onResults=function(X){this.g.onResults(X)},I.initialize=function(){var X=this;return Gn(function(be){return jt(be,X.g.initialize(),0)})},I.send=function(X,be){var ke=this;return Gn(function(ze){return jt(ze,ke.g.send(X,be),0)})},I.setOptions=function(X){this.g.setOptions(X)},br("Pose",pn),br("POSE_CONNECTIONS",[[0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]]),br("POSE_LANDMARKS",{NOSE:0,LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,LEFT_EAR:7,RIGHT_EAR:8,LEFT_RIGHT:9,RIGHT_LEFT:10,LEFT_SHOULDER:11,RIGHT_SHOULDER:12,LEFT_ELBOW:13,RIGHT_ELBOW:14,LEFT_WRIST:15,RIGHT_WRIST:16,LEFT_PINKY:17,RIGHT_PINKY:18,LEFT_INDEX:19,RIGHT_INDEX:20,LEFT_THUMB:21,RIGHT_THUMB:22,LEFT_HIP:23,RIGHT_HIP:24,LEFT_KNEE:25,RIGHT_KNEE:26,LEFT_ANKLE:27,RIGHT_ANKLE:28,LEFT_HEEL:29,RIGHT_HEEL:30,LEFT_FOOT_INDEX:31,RIGHT_FOOT_INDEX:32}),br("POSE_LANDMARKS_LEFT",{LEFT_EYE_INNER:1,LEFT_EYE:2,LEFT_EYE_OUTER:3,LEFT_EAR:7,LEFT_RIGHT:9,LEFT_SHOULDER:11,LEFT_ELBOW:13,LEFT_WRIST:15,LEFT_PINKY:17,LEFT_INDEX:19,LEFT_THUMB:21,LEFT_HIP:23,LEFT_KNEE:25,LEFT_ANKLE:27,LEFT_HEEL:29,LEFT_FOOT_INDEX:31}),br("POSE_LANDMARKS_RIGHT",{RIGHT_EYE_INNER:4,RIGHT_EYE:5,RIGHT_EYE_OUTER:6,RIGHT_EAR:8,RIGHT_LEFT:10,RIGHT_SHOULDER:12,RIGHT_ELBOW:14,RIGHT_WRIST:16,RIGHT_PINKY:18,RIGHT_INDEX:20,RIGHT_THUMB:22,RIGHT_HIP:24,RIGHT_KNEE:26,RIGHT_ANKLE:28,RIGHT_HEEL:30,RIGHT_FOOT_INDEX:32}),br("POSE_LANDMARKS_NEUTRAL",{NOSE:0}),br("VERSION","0.5.1635988162")}).call(qi);const Ca=class{constructor(){u(this,"mediapipeMap_",new Map)}getVersion(I){switch(I){case"face_detection":return hs.VERSION;case"face_mesh":return Sa.VERSION;case"hands":return da.VERSION;case"holistic":return fa.VERSION;case"objectron":return ha.VERSION;case"selfie_segmentation":return wi.VERSION;case"pose":return qi.VERSION;default:return""}}initialize(I){return new n(async(x,N)=>{if(I.mediaPipeModelConfigArray.length==0){N("no model was selected");return}for(let ie=0;ie<I.mediaPipeModelConfigArray.length;ie++){const pe=I.mediaPipeModelConfigArray[ie];if(this.mediapipeMap_.has(pe.modelType)){N("setting same type is not supported");return}if(typeof pe.listener!="function"){N(`[${pe.modelType}] ResultsListener must be provided`);return}let Xe;switch(pe.modelType){case"face_mesh":Xe=new Sa.FaceMesh({locateFile:(rt,$e)=>(pe.assetsUri||Ca.defaultAssetsBaseUrl+"face_mesh/"+this.getVersion("face_mesh"))+"/"+rt});break;case"face_detection":Xe=new hs.FaceDetection({locateFile:(rt,$e)=>(pe.assetsUri||Ca.defaultAssetsBaseUrl+"face_detection/"+this.getVersion("face_detection"))+"/"+rt});break;case"hands":Xe=new da.Hands({locateFile:(rt,$e)=>(pe.assetsUri||Ca.defaultAssetsBaseUrl+"hands/"+this.getVersion("hands"))+"/"+rt});break;case"holistic":Xe=new fa.Holistic({locateFile:(rt,$e)=>(pe.assetsUri||Ca.defaultAssetsBaseUrl+"holistic/"+this.getVersion("holistic"))+"/"+rt});break;case"objectron":Xe=new ha.Objectron({locateFile:(rt,$e)=>(pe.assetsUri||Ca.defaultAssetsBaseUrl+"objectron/"+this.getVersion("objectron"))+"/"+rt});break;case"selfie_segmentation":Xe=new wi.SelfieSegmentation({locateFile:(rt,$e)=>(pe.assetsUri||Ca.defaultAssetsBaseUrl+"selfie_segmentation/"+this.getVersion("selfie_segmentation"))+"/"+rt});break;case"pose":Xe=new qi.Pose({locateFile:(rt,$e)=>(pe.assetsUri||Ca.defaultAssetsBaseUrl+"pose/"+this.getVersion("pose"))+"/"+rt});break;default:N("unknown model type");return}Xe.onResults(pe.listener),pe.options&&Xe.setOptions(pe.options);try{await Xe.initialize(),this.mediapipeMap_.set(pe.modelType,Xe)}catch(rt){N(rt);return}}x()})}close(I){return new n((x,N)=>{let ie=[];if(I){let pe=this.mediapipeMap_.get(I);if(pe)this.mediapipeMap_.delete(I),ie.push(pe.close());else{N("model not exit");return}}else{for(const[pe,Xe]of this.mediapipeMap_.entries())ie.push(Xe.close());this.mediapipeMap_.clear()}n.all(ie).then(()=>{x()}).catch(pe=>{N(pe)})})}send(I,x){return new n((N,ie)=>{let pe=[];if(x){let Xe=this.mediapipeMap_.get(x);if(Xe)pe.push(Xe.send({image:I}));else{ie("model not exit");return}}else for(const[Xe,rt]of this.mediapipeMap_.entries())pe.push(rt.send({image:I}));n.all(pe).then(()=>{N()}).catch(Xe=>{ie(Xe)})})}reset(I){if(I){let x=this.mediapipeMap_.get(I);x&&typeof x.reset=="function"&&x.reset()}else for(const[x,N]of this.mediapipeMap_.entries())N&&typeof N.reset=="function"&&N.reset()}};let ec=Ca;u(ec,"defaultAssetsBaseUrl","https://d3opqjmqzxf057.cloudfront.net/ml/mediapipe/");const ka=new WeakMap,Pa=new WeakMap,oc=new WeakMap,Wi=Symbol("anyProducer"),Uc=n.resolve(),sc=Symbol("listenerAdded"),Cc=Symbol("listenerRemoved");let Us=!1;function yc(I){if(typeof I!="string"&&typeof I!="symbol")throw new TypeError("eventName must be a string or a symbol")}function uc(I){if(typeof I!="function")throw new TypeError("listener must be a function")}function tc(I,x){const N=Pa.get(I);return N.has(x)||N.set(x,new Set),N.get(x)}function Ec(I,x){const N=typeof x=="string"||typeof x=="symbol"?x:Wi,ie=oc.get(I);return ie.has(N)||ie.set(N,new Set),ie.get(N)}function du(I,x,N){const ie=oc.get(I);if(ie.has(x))for(const pe of ie.get(x))pe.enqueue(N);if(ie.has(Wi)){const pe=n.all([x,N]);for(const Xe of ie.get(Wi))Xe.enqueue(pe)}}function tu(I,x){x=Array.isArray(x)?x:[x];let N=!1,ie=()=>{},pe=[];const Xe={enqueue(rt){pe.push(rt),ie()},finish(){N=!0,ie()}};for(const rt of x)Ec(I,rt).add(Xe);return{async next(){return pe?pe.length===0?N?(pe=void 0,this.next()):(await new n(rt=>{ie=rt}),this.next()):{done:!1,value:await pe.shift()}:{done:!0}},async return(rt){pe=void 0;for(const $e of x)Ec(I,$e).delete(Xe);return ie(),arguments.length>0?{done:!0,value:await rt}:{done:!0}},[Symbol.asyncIterator](){return this}}}function nu(I){if(I===void 0)return lc;if(!Array.isArray(I))throw new TypeError("`methodNames` must be an array of strings");for(const x of I)if(!lc.includes(x))throw typeof x!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${x} is not Emittery method`);return I}const Oc=I=>I===sc||I===Cc;class ac{static mixin(x,N){return N=nu(N),ie=>{if(typeof ie!="function")throw new TypeError("`target` must be function");for(const rt of N)if(ie.prototype[rt]!==void 0)throw new Error(`The property \`${rt}\` already exists on \`target\``);function pe(){return Object.defineProperty(this,x,{enumerable:!1,value:new ac}),this[x]}Object.defineProperty(ie.prototype,x,{enumerable:!1,get:pe});const Xe=rt=>function(...$e){return this[x][rt](...$e)};for(const rt of N)Object.defineProperty(ie.prototype,rt,{enumerable:!1,value:Xe(rt)});return ie}}static get isDebugEnabled(){if(typeof o!="object")return Us;const{env:x}=o||{env:{}};return x.DEBUG==="emittery"||x.DEBUG==="*"||Us}static set isDebugEnabled(x){Us=x}constructor(x={}){ka.set(this,new Set),Pa.set(this,new Map),oc.set(this,new Map),this.debug=x.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(N,ie,pe,Xe)=>{try{Xe=JSON.stringify(Xe)}catch{Xe=`Object with the following keys failed to stringify: ${Object.keys(Xe).join(",")}`}typeof pe=="symbol"&&(pe=pe.toString());const rt=new Date,$e=`${rt.getHours()}:${rt.getMinutes()}:${rt.getSeconds()}.${rt.getMilliseconds()}`;console.log(`[${$e}][emittery:${N}][${ie}] Event Name: ${pe}
	data: ${Xe}`)})}logIfDebugEnabled(x,N,ie){(ac.isDebugEnabled||this.debug.enabled)&&this.debug.logger(x,this.debug.name,N,ie)}on(x,N){uc(N),x=Array.isArray(x)?x:[x];for(const ie of x)yc(ie),tc(this,ie).add(N),this.logIfDebugEnabled("subscribe",ie,void 0),Oc(ie)||this.emit(sc,{eventName:ie,listener:N});return this.off.bind(this,x,N)}off(x,N){uc(N),x=Array.isArray(x)?x:[x];for(const ie of x)yc(ie),tc(this,ie).delete(N),this.logIfDebugEnabled("unsubscribe",ie,void 0),Oc(ie)||this.emit(Cc,{eventName:ie,listener:N})}once(x){return new n(N=>{const ie=this.on(x,pe=>{ie(),N(pe)})})}events(x){x=Array.isArray(x)?x:[x];for(const N of x)yc(N);return tu(this,x)}async emit(x,N){yc(x),this.logIfDebugEnabled("emit",x,N),du(this,x,N);const ie=tc(this,x),pe=ka.get(this),Xe=[...ie],rt=Oc(x)?[]:[...pe];await Uc,await n.all([...Xe.map(async $e=>{if(ie.has($e))return $e(N)}),...rt.map(async $e=>{if(pe.has($e))return $e(x,N)})])}async emitSerial(x,N){yc(x),this.logIfDebugEnabled("emitSerial",x,N);const ie=tc(this,x),pe=ka.get(this),Xe=[...ie],rt=[...pe];await Uc;for(const $e of Xe)ie.has($e)&&await $e(N);for(const $e of rt)pe.has($e)&&await $e(x,N)}onAny(x){return uc(x),this.logIfDebugEnabled("subscribeAny",void 0,void 0),ka.get(this).add(x),this.emit(sc,{listener:x}),this.offAny.bind(this,x)}anyEvent(){return tu(this)}offAny(x){uc(x),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(Cc,{listener:x}),ka.get(this).delete(x)}clearListeners(x){x=Array.isArray(x)?x:[x];for(const N of x)if(this.logIfDebugEnabled("clear",N,void 0),typeof N=="string"||typeof N=="symbol"){tc(this,N).clear();const ie=Ec(this,N);for(const pe of ie)pe.finish();ie.clear()}else{ka.get(this).clear();for(const ie of Pa.get(this).values())ie.clear();for(const ie of oc.get(this).values()){for(const pe of ie)pe.finish();ie.clear()}}}listenerCount(x){x=Array.isArray(x)?x:[x];let N=0;for(const ie of x){if(typeof ie=="string"){N+=ka.get(this).size+tc(this,ie).size+Ec(this,ie).size+Ec(this).size;continue}typeof ie<"u"&&yc(ie),N+=ka.get(this).size;for(const pe of Pa.get(this).values())N+=pe.size;for(const pe of oc.get(this).values())N+=pe.size}return N}bindMethods(x,N){if(typeof x!="object"||x===null)throw new TypeError("`target` must be an object");N=nu(N);for(const ie of N){if(x[ie]!==void 0)throw new Error(`The property \`${ie}\` already exists on \`target\``);Object.defineProperty(x,ie,{enumerable:!1,value:this[ie].bind(this)})}}}const lc=Object.getOwnPropertyNames(ac.prototype).filter(I=>I!=="constructor");Object.defineProperty(ac,"listenerAdded",{value:sc,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(ac,"listenerRemoved",{value:Cc,writable:!1,enumerable:!0,configurable:!1});var Tc=ac,nc=(I=>(I[I.INIT=0]="INIT",I[I.FORWARD=1]="FORWARD",I[I.TERMINATE=2]="TERMINATE",I))(nc||{});function cc(I){return[ImageBitmap,ReadableStream,WritableStream].some(x=>I instanceof x)}let jc=0;function Ac(I,x,N,ie,pe){const Xe=jc++;return I.postMessage({id:Xe,type:x,functionName:N,args:ie},ie.filter(rt=>cc(rt))),new n(rt=>{pe.set(Xe,rt)})}async function fu(I,x,N){const ie=new x;if(ie.addEventListener("message",({data:pe})=>{var Xe;(Xe=N.get(pe.id))==null||Xe(pe.result),N.delete(pe.id)}),!await Ac(ie,nc.INIT,"",[I.workerId],N))throw"Failed to instantiate workerized class";return ie}async function Es(I,x,N){const ie={};return Object.getOwnPropertyNames(I.prototype).forEach(pe=>{ie[pe]=(...Xe)=>Ac(x,nc.FORWARD,pe,Xe,N)}),ie.terminate=async(...pe)=>{const Xe=await Ac(x,nc.TERMINATE,"",pe,N);return x.terminate(),ie.worker=void 0,Xe},ie.worker=x,ie}async function js(I,x){const N=new Map,ie=await fu(I,x,N);return Es(I,ie,N)}function Hc(I,x){const{id:N}=I,ie=Array.isArray(x)?x:[x];postMessage({id:N,result:x},ie.filter(pe=>cc(pe)))}async function hu(I,x){const{functionName:N,args:ie}=I;if(!x.instance)throw"instance not initialized";if(!N)throw"missing function name to call";if(!x.instance[N])throw`undefined function [${N}] in class ${x.instance.constructor.workerId}`;Hc(I,await x.instance[N](...ie??[]))}function Yc(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}const ru={};function Rc(I,x){x.workerId=I,Yc()&&(ru[x.workerId]=x)}function pu(I,x){if(!I.args)throw"Missing className while initializing worker";const[N]=I.args,ie=ru[N];if(ie)x.instance=new ie(I.args.slice(1));else throw`unknown worker class ${N}`;Hc(I,typeof x.instance!==void 0)}async function mu(I,x){const{args:N}=I;if(!x.instance)throw"instance not initialized";let ie;x.instance.terminate&&(ie=await x.instance.terminate(...N??[])),Hc(I,ie)}function gu(){const I={};onmessage=async x=>{const N=x.data;switch(N.type){case nc.INIT:pu(N,I);break;case nc.FORWARD:hu(N,I);break;case nc.TERMINATE:mu(N,I);break}}}Yc()&&gu();class dc{static async createVideoReadable(x){return new n((N,ie)=>{const pe=document.createElement("video");let Xe=new AbortController,rt=new AbortController;pe.addEventListener("canplay",()=>{Xe.abort(),pe.muted=!0,pe.loop=!0,pe.play().then(()=>{try{const $e=pe.captureStream(),lt=new MediaStreamTrackProcessor($e.getVideoTracks()[0]);N(lt.readable)}catch($e){ie($e)}})},{once:!0,signal:rt.signal}),pe.addEventListener("error",$e=>{rt.abort(),ie("loading error:"+$e)},{once:!0,signal:Xe.signal}),pe.crossOrigin="anonymous",pe.src=x})}static async createImageCanvas(x){const N=await(await fetch(x)).blob();return await createImageBitmap(N)}}async function xc(I){return new n(x=>{setTimeout(()=>{x()},I)})}var Vc=(I=>(I.PUSH="PUSH",I.POP="POP",I))(Vc||{});class Kc{constructor(x){u(this,"context"),u(this,"extension"),u(this,"queries",[]),u(this,"activeQuery"),this.context=x,this.extension=x.getExtension("EXT_disjoint_timer_query_webgl2")}start(){}stop(){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT)}pushContext(x){this.createQuery("PUSH",x)}popContext(x){this.createQuery("POP",x)}createQuery(x,N){this.activeQuery&&this.context.endQuery(this.extension.TIME_ELAPSED_EXT),this.activeQuery=this.context.createQuery(),this.context.beginQuery(this.extension.TIME_ELAPSED_EXT,this.activeQuery),this.queries.push({name:N,action:x,query:this.activeQuery})}async getResolvedQueries(){const x=(await n.all([...this.queries].map(N=>this.resolveQuery(N)))).filter(N=>N);for(let N=1;N<x.length;++N)x[N].timestamp+=x[N-1].duration+x[N-1].timestamp;return x}async resolveQuery(x){if(!await this.awaitQueryAvailable(x)){console.log("Unawaitable query",x);return}if(this.context.getParameter(this.extension.GPU_DISJOINT_EXT)){console.log("Disjointed query",x);return}return{...x,duration:this.context.getQueryParameter(x.query,this.context.QUERY_RESULT),timestamp:0}}async awaitQueryAvailable(x){for(let N=0;N<10;++N){if(this.context.getQueryParameter(x.query,this.context.QUERY_RESULT_AVAILABLE))return x;await xc(200)}}}/* @license twgl.js 5.2.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const fc=5120,kc=5121,vc=5122,Ic=5123,Nc=5124,Zc=5125,zc=5126,yu=32819,wc=32820,Lc=33635,vu=5131,iu=33640,ou=35899,Jc=35902,nt=36269,Je=34042,at={};{const I=at;I[fc]=Int8Array,I[kc]=Uint8Array,I[vc]=Int16Array,I[Ic]=Uint16Array,I[Nc]=Int32Array,I[Zc]=Uint32Array,I[zc]=Float32Array,I[yu]=Uint16Array,I[wc]=Uint16Array,I[Lc]=Uint16Array,I[vu]=Uint16Array,I[iu]=Uint32Array,I[ou]=Uint32Array,I[Jc]=Uint32Array,I[nt]=Uint32Array,I[Je]=Uint32Array}function Se(I){if(I instanceof Int8Array)return fc;if(I instanceof Uint8Array||I instanceof Uint8ClampedArray)return kc;if(I instanceof Int16Array)return vc;if(I instanceof Uint16Array)return Ic;if(I instanceof Int32Array)return Nc;if(I instanceof Uint32Array)return Zc;if(I instanceof Float32Array)return zc;throw new Error("unsupported typed array type")}function Be(I){if(I===Int8Array)return fc;if(I===Uint8Array||I===Uint8ClampedArray)return kc;if(I===Int16Array)return vc;if(I===Uint16Array)return Ic;if(I===Int32Array)return Nc;if(I===Uint32Array)return Zc;if(I===Float32Array)return zc;throw new Error("unsupported typed array type")}function Ye(I){const x=at[I];if(!x)throw new Error("unknown gl type");return x}const ht=typeof SharedArrayBuffer<"u"?function(I){return I&&I.buffer&&(I.buffer instanceof ArrayBuffer||I.buffer instanceof SharedArrayBuffer)}:function(I){return I&&I.buffer&&I.buffer instanceof ArrayBuffer};function Rt(...I){console.error(...I)}const Mt=new Map;function Ct(I,x){if(!I||typeof I!="object")return!1;let N=Mt.get(x);N||(N=new WeakMap,Mt.set(x,N));let ie=N.get(I);if(ie===void 0){const pe=Object.prototype.toString.call(I);ie=pe.substring(8,pe.length-1)===x,N.set(I,ie)}return ie}function cn(I,x){return typeof WebGLBuffer<"u"&&Ct(x,"WebGLBuffer")}function vr(I,x){return typeof WebGLRenderbuffer<"u"&&Ct(x,"WebGLRenderbuffer")}function Mn(I,x){return typeof WebGLTexture<"u"&&Ct(x,"WebGLTexture")}function Rn(I,x){return typeof WebGLSampler<"u"&&Ct(x,"WebGLSampler")}const gi=35044,os=34962,$n=34963,Go=34660,hc=5120,bc=5121,Yu=5122,Ku=5123,Bd=5124,Ud=5125,Rl=5126,xl={attribPrefix:""};function jd(I,x,N,ie,pe){I.bindBuffer(x,N),I.bufferData(x,ie,pe||gi)}function Il(I,x,N,ie){if(cn(I,x))return x;N=N||os;const pe=I.createBuffer();return jd(I,N,pe,x,ie),pe}function wl(I){return I==="indices"}function Hd(I){return I===Int8Array||I===Uint8Array}function Yd(I){return I.length?I:I.data}const Kd=/coord|texture/i,zd=/color|colour/i;function Jd(I,x){let N;if(Kd.test(I)?N=2:zd.test(I)?N=4:N=3,x%N>0)throw new Error(`Can not guess numComponents for attribute '${I}'. Tried ${N} but ${x} values is not evenly divisible by ${N}. You should specify it.`);return N}function _d(I,x,N){return I.numComponents||I.size||Jd(x,N||Yd(I).length)}function Ol(I,x){if(ht(I))return I;if(ht(I.data))return I.data;Array.isArray(I)&&(I={data:I});let N=I.type?zu(I.type):void 0;return N||(wl(x)?N=Uint16Array:N=Float32Array),new N(I.data)}function $d(I){return typeof I=="number"?I:I?Be(I):Rl}function zu(I){return typeof I=="number"?Ye(I):I||Float32Array}function Qd(I,x){return{buffer:x.buffer,numValues:2*3*4,type:$d(x.type),arrayType:zu(x.type)}}function qd(I,x){const N=x.data||x,ie=zu(x.type),pe=N*ie.BYTES_PER_ELEMENT,Xe=I.createBuffer();return I.bindBuffer(os,Xe),I.bufferData(os,pe,x.drawType||gi),{buffer:Xe,numValues:N,type:Be(ie),arrayType:ie}}function ef(I,x,N){const ie=Ol(x,N);return{arrayType:ie.constructor,buffer:Il(I,ie,void 0,x.drawType),type:Se(ie),numValues:0}}function tf(I,x){const N={};return Object.keys(x).forEach(function(ie){if(!wl(ie)){const pe=x[ie],Xe=pe.attrib||pe.name||pe.attribName||xl.attribPrefix+ie;if(pe.value){if(!Array.isArray(pe.value)&&!ht(pe.value))throw new Error("array.value is not array or typedarray");N[Xe]={value:pe.value}}else{let rt;pe.buffer&&pe.buffer instanceof WebGLBuffer?rt=Qd:typeof pe=="number"||typeof pe.data=="number"?rt=qd:rt=ef;const{buffer:$e,type:lt,numValues:zt,arrayType:ln}=rt(I,pe,ie),hn=pe.normalize!==void 0?pe.normalize:Hd(ln),ir=_d(pe,ie,zt);N[Xe]={buffer:$e,numComponents:ir,type:lt,normalize:hn,stride:pe.stride||0,offset:pe.offset||0,divisor:pe.divisor===void 0?void 0:pe.divisor,drawType:pe.drawType}}}}),I.bindBuffer(os,null),N}function nf(I,x){return x===hc||x===bc?1:x===Yu||x===Ku?2:x===Bd||x===Ud||x===Rl?4:0}const Ju=["position","positions","a_position"];function rf(I,x){let N,ie;for(ie=0;ie<Ju.length&&(N=Ju[ie],!(N in x||(N=xl.attribPrefix+N,N in x)));++ie);ie===Ju.length&&(N=Object.keys(x)[0]);const pe=x[N];if(!pe.buffer)return 1;I.bindBuffer(os,pe.buffer);const Xe=I.getBufferParameter(os,Go);I.bindBuffer(os,null);const rt=nf(I,pe.type),$e=Xe/rt,lt=pe.numComponents||pe.size,zt=$e/lt;if(zt%1!==0)throw new Error(`numComponents ${lt} not correct for length ${length}`);return zt}function of(I,x,N){const ie=tf(I,x),pe=Object.assign({},N||{});pe.attribs=Object.assign({},N?N.attribs:{},ie);const Xe=x.indices;if(Xe){const rt=Ol(Xe,"indices");pe.indices=Il(I,rt,$n),pe.numElements=rt.length,pe.elementType=Se(rt)}else pe.numElements||(pe.numElements=rf(I,pe.attribs));return pe}function bu(I){return!!I.texStorage2D}const Al=function(){const I={},x={};function N(ie){const pe=ie.constructor.name;if(!I[pe]){for(const Xe in ie)if(typeof ie[Xe]=="number"){const rt=x[ie[Xe]];x[ie[Xe]]=rt?`${rt} | ${Xe}`:Xe}I[pe]=!0}}return function(ie,pe){return N(ie),x[pe]||(typeof pe=="number"?`0x${pe.toString(16)}`:pe)}}(),Fc={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},Su=ht,Vl=function(){let I;return function(){return I=I||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),I}}(),kl=6406,Sc=6407,Ls=6408,Nl=6409,Zl=6410,Cu=6402,Ll=34041,Iu=33071,sf=9728,af=9729,Gc=3553,Mc=34067,_c=32879,$c=35866,_u=34069,cf=34070,uf=34071,lf=34072,df=34073,ff=34074,$u=10241,Qu=10240,wu=10242,Ou=10243,Fl=32882,hf=33082,pf=33083,mf=33084,gf=33085,qu=3317,Gl=3314,Ml=32878,Pl=3316,Wl=3315,Xl=32877,yf=37443,vf=37441,bf=37440,Sf=33321,Cf=36756,Ef=33325,Tf=33326,Rf=33330,xf=33329,If=33338,wf=33337,Of=33340,Af=33339,Vf=33323,kf=36757,Nf=33327,Zf=33328,Lf=33336,Ff=33335,Gf=33332,Mf=33331,Pf=33334,Wf=33333,Xf=32849,Df=35905,Bf=36194,Uf=36758,jf=35898,Hf=35901,Yf=34843,Kf=34837,zf=36221,Jf=36239,_f=36215,$f=36233,Qf=36209,qf=36227,eh=32856,th=35907,nh=36759,rh=32855,ih=32854,oh=32857,sh=34842,ah=34836,ch=36220,uh=36238,lh=36975,dh=36214,fh=36232,hh=36226,ph=36208,mh=33189,gh=33190,yh=36012,vh=36013,bh=35056,Pc=5120,ks=5121,Au=5122,su=5123,Vu=5124,Qc=5125,Na=5126,Dl=32819,Bl=32820,Ul=33635,pc=5131,Eu=36193,el=33640,Sh=35899,Ch=35902,Eh=36269,Th=34042,ku=33319,au=33320,Nu=6403,cu=36244,uu=36248,qc=36249;let tl;function Zu(I){if(!tl){const x={};x[kl]={textureFormat:kl,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[ks,pc,Eu,Na]},x[Nl]={textureFormat:Nl,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[ks,pc,Eu,Na]},x[Zl]={textureFormat:Zl,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[ks,pc,Eu,Na]},x[Sc]={textureFormat:Sc,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[ks,pc,Eu,Na,Ul]},x[Ls]={textureFormat:Ls,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[ks,pc,Eu,Na,Dl,Bl]},x[Cu]={textureFormat:Cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Qc,su]},x[Sf]={textureFormat:Nu,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[ks]},x[Cf]={textureFormat:Nu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[Pc]},x[Ef]={textureFormat:Nu,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[Na,pc]},x[Tf]={textureFormat:Nu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[Na]},x[Rf]={textureFormat:cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[ks]},x[xf]={textureFormat:cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[Pc]},x[Gf]={textureFormat:cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[su]},x[Mf]={textureFormat:cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Au]},x[Pf]={textureFormat:cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Qc]},x[Wf]={textureFormat:cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Vu]},x[Vf]={textureFormat:ku,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[ks]},x[kf]={textureFormat:ku,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[Pc]},x[Nf]={textureFormat:ku,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[Na,pc]},x[Zf]={textureFormat:ku,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[Na]},x[Lf]={textureFormat:au,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[ks]},x[Ff]={textureFormat:au,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Pc]},x[If]={textureFormat:au,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[su]},x[wf]={textureFormat:au,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Au]},x[Of]={textureFormat:au,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Qc]},x[Af]={textureFormat:au,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Vu]},x[Xf]={textureFormat:Sc,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[ks]},x[Df]={textureFormat:Sc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[ks]},x[Bf]={textureFormat:Sc,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[ks,Ul]},x[Uf]={textureFormat:Sc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[Pc]},x[jf]={textureFormat:Sc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Na,pc,Sh]},x[Hf]={textureFormat:Sc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[Na,pc,Ch]},x[Yf]={textureFormat:Sc,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[Na,pc]},x[Kf]={textureFormat:Sc,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Na]},x[zf]={textureFormat:uu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[ks]},x[Jf]={textureFormat:uu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[Pc]},x[_f]={textureFormat:uu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[su]},x[$f]={textureFormat:uu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Au]},x[Qf]={textureFormat:uu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Qc]},x[qf]={textureFormat:uu,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[Vu]},x[eh]={textureFormat:Ls,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ks]},x[th]={textureFormat:Ls,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[ks]},x[nh]={textureFormat:Ls,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[Pc]},x[rh]={textureFormat:Ls,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[ks,Bl,el]},x[ih]={textureFormat:Ls,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[ks,Dl]},x[oh]={textureFormat:Ls,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[el]},x[sh]={textureFormat:Ls,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[Na,pc]},x[ah]={textureFormat:Ls,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[Na]},x[ch]={textureFormat:qc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ks]},x[uh]={textureFormat:qc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Pc]},x[lh]={textureFormat:qc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[el]},x[dh]={textureFormat:qc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[su]},x[fh]={textureFormat:qc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Au]},x[hh]={textureFormat:qc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Vu]},x[ph]={textureFormat:qc,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[Qc]},x[mh]={textureFormat:Cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[su,Qc]},x[gh]={textureFormat:Cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Qc]},x[yh]={textureFormat:Cu,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Na]},x[bh]={textureFormat:Ll,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Th]},x[vh]={textureFormat:Ll,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Eh]},Object.keys(x).forEach(function(N){const ie=x[N];ie.bytesPerElementMap={},ie.bytesPerElement.forEach(function(pe,Xe){const rt=ie.type[Xe];ie.bytesPerElementMap[rt]=pe})}),tl=x}return tl[I]}function Rh(I,x){const N=Zu(I);if(!N)throw"unknown internal format";const ie=N.bytesPerElementMap[x];if(ie===void 0)throw"unknown internal format";return ie}function Tu(I){const x=Zu(I);if(!x)throw"unknown internal format";return{format:x.textureFormat,type:x.type[0]}}function jl(I){return(I&I-1)===0}function xh(I,x,N,ie){if(!bu(I))return jl(x)&&jl(N);const pe=Zu(ie);if(!pe)throw"unknown internal format";return pe.colorRenderable&&pe.textureFilterable}function Ih(I){const x=Zu(I);if(!x)throw"unknown internal format";return x.textureFilterable}function wh(I,x,N){return Su(x)?Se(x):N||ks}function Lu(I,x,N,ie,pe){if(pe%1!==0)throw"can't guess dimensions";if(!N&&!ie){const Xe=Math.sqrt(pe/(x===Mc?6:1));Xe%1===0?(N=Xe,ie=Xe):(N=pe,ie=1)}else if(ie){if(!N&&(N=pe/ie,N%1))throw"can't guess dimensions"}else if(ie=pe/N,ie%1)throw"can't guess dimensions";return{width:N,height:ie}}function lu(I,x){x.colorspaceConversion!==void 0&&I.pixelStorei(yf,x.colorspaceConversion),x.premultiplyAlpha!==void 0&&I.pixelStorei(vf,x.premultiplyAlpha),x.flipY!==void 0&&I.pixelStorei(bf,x.flipY)}function Hl(I){I.pixelStorei(qu,4),bu(I)&&(I.pixelStorei(Gl,0),I.pixelStorei(Ml,0),I.pixelStorei(Pl,0),I.pixelStorei(Wl,0),I.pixelStorei(Xl,0))}function Oh(I,x,N,ie){ie.minMag&&(N.call(I,x,$u,ie.minMag),N.call(I,x,Qu,ie.minMag)),ie.min&&N.call(I,x,$u,ie.min),ie.mag&&N.call(I,x,Qu,ie.mag),ie.wrap&&(N.call(I,x,wu,ie.wrap),N.call(I,x,Ou,ie.wrap),(x===_c||Rn(I,x))&&N.call(I,x,Fl,ie.wrap)),ie.wrapR&&N.call(I,x,Fl,ie.wrapR),ie.wrapS&&N.call(I,x,wu,ie.wrapS),ie.wrapT&&N.call(I,x,Ou,ie.wrapT),ie.minLod&&N.call(I,x,hf,ie.minLod),ie.maxLod&&N.call(I,x,pf,ie.maxLod),ie.baseLevel&&N.call(I,x,mf,ie.baseLevel),ie.maxLevel&&N.call(I,x,gf,ie.maxLevel)}function Yl(I,x,N){const ie=N.target||Gc;I.bindTexture(ie,x),Oh(I,ie,I.texParameteri,N)}function Ah(I){return I=I||Fc.textureColor,Su(I)?I:new Uint8Array([I[0]*255,I[1]*255,I[2]*255,I[3]*255])}function nl(I,x,N,ie,pe,Xe){N=N||Fc.textureOptions,Xe=Xe||Ls;const rt=N.target||Gc;if(ie=ie||N.width,pe=pe||N.height,I.bindTexture(rt,x),xh(I,ie,pe,Xe))I.generateMipmap(rt);else{const $e=Ih(Xe)?af:sf;I.texParameteri(rt,$u,$e),I.texParameteri(rt,Qu,$e),I.texParameteri(rt,wu,Iu),I.texParameteri(rt,Ou,Iu)}}function Ru(I){return I.auto===!0||I.auto===void 0&&I.level===void 0}function rl(I,x){return x=x||{},x.cubeFaceOrder||[_u,cf,uf,lf,df,ff]}function il(I,x){const N=rl(I,x).map(function(ie,pe){return{face:ie,ndx:pe}});return N.sort(function(ie,pe){return ie.face-pe.face}),N}function Kl(I,x,N,ie){ie=ie||Fc.textureOptions;const pe=ie.target||Gc,Xe=ie.level||0;let rt=N.width,$e=N.height;const lt=ie.internalFormat||ie.format||Ls,zt=Tu(lt),ln=ie.format||zt.format,hn=ie.type||zt.type;if(lu(I,ie),I.bindTexture(pe,x),pe===Mc){const ir=N.width,ur=N.height;let vn,Tn;if(ir/6===ur)vn=ur,Tn=[0,0,1,0,2,0,3,0,4,0,5,0];else if(ur/6===ir)vn=ir,Tn=[0,0,0,1,0,2,0,3,0,4,0,5];else if(ir/3===ur/2)vn=ir/3,Tn=[0,0,1,0,2,0,0,1,1,1,2,1];else if(ir/2===ur/3)vn=ir/2,Tn=[0,0,1,0,0,1,1,1,0,2,1,2];else throw"can't figure out cube map from element: "+(N.src?N.src:N.nodeName);const Ir=Vl();Ir?(Ir.canvas.width=vn,Ir.canvas.height=vn,rt=vn,$e=vn,il(I,ie).forEach(function(Er){const zr=Tn[Er.ndx*2+0]*vn,jt=Tn[Er.ndx*2+1]*vn;Ir.drawImage(N,zr,jt,vn,vn,0,0,vn,vn),I.texImage2D(Er.face,Xe,lt,ln,hn,Ir.canvas)}),Ir.canvas.width=1,Ir.canvas.height=1):typeof createImageBitmap<"u"&&(rt=vn,$e=vn,il(I,ie).forEach(function(Er){const zr=Tn[Er.ndx*2+0]*vn,jt=Tn[Er.ndx*2+1]*vn;I.texImage2D(Er.face,Xe,lt,vn,vn,0,ln,hn,null),createImageBitmap(N,zr,jt,vn,vn,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(Rs){lu(I,ie),I.bindTexture(pe,x),I.texImage2D(Er.face,Xe,lt,ln,hn,Rs),Ru(ie)&&nl(I,x,ie,rt,$e,lt)})}))}else if(pe===_c||pe===$c){const ir=Math.min(N.width,N.height),ur=Math.max(N.width,N.height),vn=ur/ir;if(vn%1!==0)throw"can not compute 3D dimensions of element";const Tn=N.width===ur?1:0,Ir=N.height===ur?1:0;I.pixelStorei(qu,1),I.pixelStorei(Gl,N.width),I.pixelStorei(Ml,0),I.pixelStorei(Xl,0),I.texImage3D(pe,Xe,lt,ir,ir,ir,0,ln,hn,null);for(let Er=0;Er<vn;++Er){const zr=Er*ir*Tn,jt=Er*ir*Ir;I.pixelStorei(Pl,zr),I.pixelStorei(Wl,jt),I.texSubImage3D(pe,Xe,0,0,Er,ir,ir,1,ln,hn,N)}Hl(I)}else I.texImage2D(pe,Xe,lt,ln,hn,N);Ru(ie)&&nl(I,x,ie,rt,$e,lt),Yl(I,x,ie)}function xu(){}function Vh(I){if(typeof document<"u"){const x=document.createElement("a");return x.href=I,x.hostname===location.hostname&&x.port===location.port&&x.protocol===location.protocol}else{const x=new URL(location.href).origin;return new URL(I,location.href).origin===x}}function kh(I,x){return x===void 0&&!Vh(I)?"anonymous":x}function Nh(I,x,N){N=N||xu;let ie;if(x=x!==void 0?x:Fc.crossOrigin,x=kh(I,x),typeof Image<"u"){ie=new Image,x!==void 0&&(ie.crossOrigin=x);const pe=function(){ie.removeEventListener("error",Xe),ie.removeEventListener("load",rt),ie=null},Xe=function(){const $e="couldn't load image: "+I;Rt($e),N($e,ie),pe()},rt=function(){N(null,ie),pe()};return ie.addEventListener("error",Xe),ie.addEventListener("load",rt),ie.src=I,ie}else if(typeof ImageBitmap<"u"){let pe,Xe;const rt=function(){N(pe,Xe)},$e={};x&&($e.mode="cors"),fetch(I,$e).then(function(lt){if(!lt.ok)throw lt;return lt.blob()}).then(function(lt){return createImageBitmap(lt,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(lt){Xe=lt,setTimeout(rt)}).catch(function(lt){pe=lt,setTimeout(rt)}),ie=null}return ie}function zl(I){return typeof ImageBitmap<"u"&&I instanceof ImageBitmap||typeof ImageData<"u"&&I instanceof ImageData||typeof HTMLElement<"u"&&I instanceof HTMLElement}function ol(I,x,N){return zl(I)?(setTimeout(function(){N(null,I)}),I):Nh(I,x,N)}function sl(I,x,N){N=N||Fc.textureOptions;const ie=N.target||Gc;if(I.bindTexture(ie,x),N.color===!1)return;const pe=Ah(N.color);if(ie===Mc)for(let Xe=0;Xe<6;++Xe)I.texImage2D(_u+Xe,0,Ls,1,1,0,Ls,ks,pe);else ie===_c||ie===$c?I.texImage3D(ie,0,Ls,1,1,1,0,Ls,ks,pe):I.texImage2D(ie,0,Ls,1,1,0,Ls,ks,pe)}function Zh(I,x,N,ie){return ie=ie||xu,N=N||Fc.textureOptions,sl(I,x,N),N=Object.assign({},N),ol(N.src,N.crossOrigin,function(pe,Xe){pe?ie(pe,x,Xe):(Kl(I,x,Xe,N),ie(null,x,Xe))})}function Lh(I,x,N,ie){ie=ie||xu;const pe=N.src;if(pe.length!==6)throw"there must be 6 urls for a cubemap";const Xe=N.level||0,rt=N.internalFormat||N.format||Ls,$e=Tu(rt),lt=N.format||$e.format,zt=N.type||ks,ln=N.target||Gc;if(ln!==Mc)throw"target must be TEXTURE_CUBE_MAP";sl(I,x,N),N=Object.assign({},N);let hn=6;const ir=[],ur=rl(I,N);let vn;function Tn(Ir){return function(Er,zr){--hn,Er?ir.push(Er):zr.width!==zr.height?ir.push("cubemap face img is not a square: "+zr.src):(lu(I,N),I.bindTexture(ln,x),hn===5?rl().forEach(function(jt){I.texImage2D(jt,Xe,rt,lt,zt,zr)}):I.texImage2D(Ir,Xe,rt,lt,zt,zr),Ru(N)&&I.generateMipmap(ln)),hn===0&&ie(ir.length?ir:void 0,x,vn)}}vn=pe.map(function(Ir,Er){return ol(Ir,N.crossOrigin,Tn(ur[Er]))})}function Fh(I,x,N,ie){ie=ie||xu;const pe=N.src,Xe=N.internalFormat||N.format||Ls,rt=Tu(Xe),$e=N.format||rt.format,lt=N.type||ks,zt=N.target||$c;if(zt!==_c&&zt!==$c)throw"target must be TEXTURE_3D or TEXTURE_2D_ARRAY";sl(I,x,N),N=Object.assign({},N);let ln=pe.length;const hn=[];let ir;const ur=N.level||0;let vn=N.width,Tn=N.height;const Ir=pe.length;let Er=!0;function zr(jt){return function(Rs,ps){if(--ln,Rs)hn.push(Rs);else{if(lu(I,N),I.bindTexture(zt,x),Er){Er=!1,vn=N.width||ps.width,Tn=N.height||ps.height,I.texImage3D(zt,ur,Xe,vn,Tn,Ir,0,$e,lt,null);for(let Ni=0;Ni<Ir;++Ni)I.texSubImage3D(zt,ur,0,0,Ni,vn,Tn,1,$e,lt,ps)}else{let Ni=ps,Ur;(ps.width!==vn||ps.height!==Tn)&&(Ur=Vl(),Ni=Ur.canvas,Ur.canvas.width=vn,Ur.canvas.height=Tn,Ur.drawImage(ps,0,0,vn,Tn)),I.texSubImage3D(zt,ur,0,0,jt,vn,Tn,1,$e,lt,Ni),Ur&&Ni===Ur.canvas&&(Ur.canvas.width=0,Ur.canvas.height=0)}Ru(N)&&I.generateMipmap(zt)}ln===0&&ie(hn.length?hn:void 0,x,ir)}}ir=pe.map(function(jt,Rs){return ol(jt,N.crossOrigin,zr(Rs))})}function Gh(I,x,N,ie){ie=ie||Fc.textureOptions;const pe=ie.target||Gc;I.bindTexture(pe,x);let Xe=ie.width,rt=ie.height,$e=ie.depth;const lt=ie.level||0,zt=ie.internalFormat||ie.format||Ls,ln=Tu(zt),hn=ie.format||ln.format,ir=ie.type||wh(I,N,ln.type);if(Su(N))N instanceof Uint8ClampedArray&&(N=new Uint8Array(N.buffer));else{const Ir=Ye(ir);N=new Ir(N)}const ur=Rh(zt,ir),vn=N.byteLength/ur;if(vn%1)throw"length wrong size for format: "+Al(I,hn);let Tn;if(pe===_c||pe===$c)if(!Xe&&!rt&&!$e){const Ir=Math.cbrt(vn);if(Ir%1!==0)throw"can't guess cube size of array of numElements: "+vn;Xe=Ir,rt=Ir,$e=Ir}else Xe&&(!rt||!$e)?(Tn=Lu(I,pe,rt,$e,vn/Xe),rt=Tn.width,$e=Tn.height):rt&&(!Xe||!$e)?(Tn=Lu(I,pe,Xe,$e,vn/rt),Xe=Tn.width,$e=Tn.height):(Tn=Lu(I,pe,Xe,rt,vn/$e),Xe=Tn.width,rt=Tn.height);else Tn=Lu(I,pe,Xe,rt,vn),Xe=Tn.width,rt=Tn.height;if(Hl(I),I.pixelStorei(qu,ie.unpackAlignment||1),lu(I,ie),pe===Mc){const Ir=ur/N.BYTES_PER_ELEMENT,Er=vn/6*Ir;il(I,ie).forEach(zr=>{const jt=Er*zr.ndx,Rs=N.subarray(jt,jt+Er);I.texImage2D(zr.face,lt,zt,Xe,rt,0,hn,ir,Rs)})}else pe===_c||pe===$c?I.texImage3D(pe,lt,zt,Xe,rt,$e,0,hn,ir,N):I.texImage2D(pe,lt,zt,Xe,rt,0,hn,ir,N);return{width:Xe,height:rt,depth:$e,type:ir}}function Mh(I,x,N){const ie=N.target||Gc;I.bindTexture(ie,x);const pe=N.level||0,Xe=N.internalFormat||N.format||Ls,rt=Tu(Xe),$e=N.format||rt.format,lt=N.type||rt.type;if(lu(I,N),ie===Mc)for(let zt=0;zt<6;++zt)I.texImage2D(_u+zt,pe,Xe,N.width,N.height,0,$e,lt,null);else ie===_c||ie===$c?I.texImage3D(ie,pe,Xe,N.width,N.height,N.depth,0,$e,lt,null):I.texImage2D(ie,pe,Xe,N.width,N.height,0,$e,lt,null)}function Jl(I,x,N){N=N||xu,x=x||Fc.textureOptions;const ie=I.createTexture(),pe=x.target||Gc;let Xe=x.width||1,rt=x.height||1;const $e=x.internalFormat||Ls;I.bindTexture(pe,ie),pe===Mc&&(I.texParameteri(pe,wu,Iu),I.texParameteri(pe,Ou,Iu));let lt=x.src;if(lt)if(typeof lt=="function"&&(lt=lt(I,x)),typeof lt=="string")Zh(I,ie,x,N);else if(Su(lt)||Array.isArray(lt)&&(typeof lt[0]=="number"||Array.isArray(lt[0])||Su(lt[0]))){const zt=Gh(I,ie,lt,x);Xe=zt.width,rt=zt.height}else Array.isArray(lt)&&(typeof lt[0]=="string"||zl(lt[0]))?pe===Mc?Lh(I,ie,x,N):Fh(I,ie,x,N):(Kl(I,ie,lt,x),Xe=lt.width,rt=lt.height);else Mh(I,ie,x);return Ru(x)&&nl(I,ie,x,Xe,rt,$e),Yl(I,ie,x),ie}const al=Rt;function _l(I){return typeof document<"u"&&document.getElementById?document.getElementById(I):null}const Fu=33984,Gu=34962,Ph=34963,Wh=35713,Xh=35714,Dh=35632,Bh=35633,Uh=35981,$l=35718,jh=35721,Hh=35971,Yh=35382,Kh=35396,zh=35398,Jh=35392,_h=35395,Mu=5126,Ql=35664,ql=35665,ed=35666,cl=5124,td=35667,nd=35668,rd=35669,id=35670,od=35671,sd=35672,ad=35673,cd=35674,ud=35675,ld=35676,$h=35678,Qh=35680,qh=35679,ep=35682,tp=35685,np=35686,rp=35687,ip=35688,op=35689,sp=35690,ap=36289,cp=36292,up=36293,ul=5125,dd=36294,fd=36295,hd=36296,lp=36298,dp=36299,fp=36300,hp=36303,pp=36306,mp=36307,gp=36308,yp=36311,Pu=3553,Wu=34067,ll=32879,Xu=35866,yi={};function pd(I,x){return yi[x].bindPoint}function vp(I,x){return function(N){I.uniform1f(x,N)}}function bp(I,x){return function(N){I.uniform1fv(x,N)}}function Sp(I,x){return function(N){I.uniform2fv(x,N)}}function Cp(I,x){return function(N){I.uniform3fv(x,N)}}function Ep(I,x){return function(N){I.uniform4fv(x,N)}}function md(I,x){return function(N){I.uniform1i(x,N)}}function gd(I,x){return function(N){I.uniform1iv(x,N)}}function yd(I,x){return function(N){I.uniform2iv(x,N)}}function vd(I,x){return function(N){I.uniform3iv(x,N)}}function bd(I,x){return function(N){I.uniform4iv(x,N)}}function Tp(I,x){return function(N){I.uniform1ui(x,N)}}function Rp(I,x){return function(N){I.uniform1uiv(x,N)}}function xp(I,x){return function(N){I.uniform2uiv(x,N)}}function Ip(I,x){return function(N){I.uniform3uiv(x,N)}}function wp(I,x){return function(N){I.uniform4uiv(x,N)}}function Op(I,x){return function(N){I.uniformMatrix2fv(x,!1,N)}}function Ap(I,x){return function(N){I.uniformMatrix3fv(x,!1,N)}}function Vp(I,x){return function(N){I.uniformMatrix4fv(x,!1,N)}}function kp(I,x){return function(N){I.uniformMatrix2x3fv(x,!1,N)}}function Np(I,x){return function(N){I.uniformMatrix3x2fv(x,!1,N)}}function Zp(I,x){return function(N){I.uniformMatrix2x4fv(x,!1,N)}}function Lp(I,x){return function(N){I.uniformMatrix4x2fv(x,!1,N)}}function Fp(I,x){return function(N){I.uniformMatrix3x4fv(x,!1,N)}}function Gp(I,x){return function(N){I.uniformMatrix4x3fv(x,!1,N)}}function Wa(I,x,N,ie){const pe=pd(I,x);return bu(I)?function(Xe){let rt,$e;Mn(I,Xe)?(rt=Xe,$e=null):(rt=Xe.texture,$e=Xe.sampler),I.uniform1i(ie,N),I.activeTexture(Fu+N),I.bindTexture(pe,rt),I.bindSampler(N,$e)}:function(Xe){I.uniform1i(ie,N),I.activeTexture(Fu+N),I.bindTexture(pe,Xe)}}function Xa(I,x,N,ie,pe){const Xe=pd(I,x),rt=new Int32Array(pe);for(let $e=0;$e<pe;++$e)rt[$e]=N+$e;return bu(I)?function($e){I.uniform1iv(ie,rt),$e.forEach(function(lt,zt){I.activeTexture(Fu+rt[zt]);let ln,hn;Mn(I,lt)?(ln=lt,hn=null):(ln=lt.texture,hn=lt.sampler),I.bindSampler(N,hn),I.bindTexture(Xe,ln)})}:function($e){I.uniform1iv(ie,rt),$e.forEach(function(lt,zt){I.activeTexture(Fu+rt[zt]),I.bindTexture(Xe,lt)})}}yi[Mu]={Type:Float32Array,size:4,setter:vp,arraySetter:bp},yi[Ql]={Type:Float32Array,size:8,setter:Sp,cols:2},yi[ql]={Type:Float32Array,size:12,setter:Cp,cols:3},yi[ed]={Type:Float32Array,size:16,setter:Ep,cols:4},yi[cl]={Type:Int32Array,size:4,setter:md,arraySetter:gd},yi[td]={Type:Int32Array,size:8,setter:yd,cols:2},yi[nd]={Type:Int32Array,size:12,setter:vd,cols:3},yi[rd]={Type:Int32Array,size:16,setter:bd,cols:4},yi[ul]={Type:Uint32Array,size:4,setter:Tp,arraySetter:Rp},yi[dd]={Type:Uint32Array,size:8,setter:xp,cols:2},yi[fd]={Type:Uint32Array,size:12,setter:Ip,cols:3},yi[hd]={Type:Uint32Array,size:16,setter:wp,cols:4},yi[id]={Type:Uint32Array,size:4,setter:md,arraySetter:gd},yi[od]={Type:Uint32Array,size:8,setter:yd,cols:2},yi[sd]={Type:Uint32Array,size:12,setter:vd,cols:3},yi[ad]={Type:Uint32Array,size:16,setter:bd,cols:4},yi[cd]={Type:Float32Array,size:32,setter:Op,rows:2,cols:2},yi[ud]={Type:Float32Array,size:48,setter:Ap,rows:3,cols:3},yi[ld]={Type:Float32Array,size:64,setter:Vp,rows:4,cols:4},yi[tp]={Type:Float32Array,size:32,setter:kp,rows:2,cols:3},yi[np]={Type:Float32Array,size:32,setter:Zp,rows:2,cols:4},yi[rp]={Type:Float32Array,size:48,setter:Np,rows:3,cols:2},yi[ip]={Type:Float32Array,size:48,setter:Fp,rows:3,cols:4},yi[op]={Type:Float32Array,size:64,setter:Lp,rows:4,cols:2},yi[sp]={Type:Float32Array,size:64,setter:Gp,rows:4,cols:3},yi[$h]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Pu},yi[Qh]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Wu},yi[qh]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:ll},yi[ep]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Pu},yi[ap]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Xu},yi[cp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Xu},yi[up]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Wu},yi[lp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Pu},yi[dp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:ll},yi[fp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Wu},yi[hp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Xu},yi[pp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Pu},yi[mp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:ll},yi[gp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Wu},yi[yp]={Type:null,size:0,setter:Wa,arraySetter:Xa,bindPoint:Xu};function Du(I,x){return function(N){if(N.value)switch(I.disableVertexAttribArray(x),N.value.length){case 4:I.vertexAttrib4fv(x,N.value);break;case 3:I.vertexAttrib3fv(x,N.value);break;case 2:I.vertexAttrib2fv(x,N.value);break;case 1:I.vertexAttrib1fv(x,N.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else I.bindBuffer(Gu,N.buffer),I.enableVertexAttribArray(x),I.vertexAttribPointer(x,N.numComponents||N.size,N.type||Mu,N.normalize||!1,N.stride||0,N.offset||0),I.vertexAttribDivisor&&I.vertexAttribDivisor(x,N.divisor||0)}}function Wc(I,x){return function(N){if(N.value)if(I.disableVertexAttribArray(x),N.value.length===4)I.vertexAttrib4iv(x,N.value);else throw new Error("The length of an integer constant value must be 4!");else I.bindBuffer(Gu,N.buffer),I.enableVertexAttribArray(x),I.vertexAttribIPointer(x,N.numComponents||N.size,N.type||cl,N.stride||0,N.offset||0),I.vertexAttribDivisor&&I.vertexAttribDivisor(x,N.divisor||0)}}function Bu(I,x){return function(N){if(N.value)if(I.disableVertexAttribArray(x),N.value.length===4)I.vertexAttrib4uiv(x,N.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else I.bindBuffer(Gu,N.buffer),I.enableVertexAttribArray(x),I.vertexAttribIPointer(x,N.numComponents||N.size,N.type||ul,N.stride||0,N.offset||0),I.vertexAttribDivisor&&I.vertexAttribDivisor(x,N.divisor||0)}}function dl(I,x,N){const ie=N.size,pe=N.count;return function(Xe){I.bindBuffer(Gu,Xe.buffer);const rt=Xe.size||Xe.numComponents||ie,$e=rt/pe,lt=Xe.type||Mu,zt=yi[lt].size*rt,ln=Xe.normalize||!1,hn=Xe.offset||0,ir=zt/pe;for(let ur=0;ur<pe;++ur)I.enableVertexAttribArray(x+ur),I.vertexAttribPointer(x+ur,$e,lt,ln,zt,hn+ir*ur),I.vertexAttribDivisor&&I.vertexAttribDivisor(x+ur,Xe.divisor||0)}}const ia={};ia[Mu]={size:4,setter:Du},ia[Ql]={size:8,setter:Du},ia[ql]={size:12,setter:Du},ia[ed]={size:16,setter:Du},ia[cl]={size:4,setter:Wc},ia[td]={size:8,setter:Wc},ia[nd]={size:12,setter:Wc},ia[rd]={size:16,setter:Wc},ia[ul]={size:4,setter:Bu},ia[dd]={size:8,setter:Bu},ia[fd]={size:12,setter:Bu},ia[hd]={size:16,setter:Bu},ia[id]={size:4,setter:Wc},ia[od]={size:8,setter:Wc},ia[sd]={size:12,setter:Wc},ia[ad]={size:16,setter:Wc},ia[cd]={size:4,setter:dl,count:2},ia[ud]={size:9,setter:dl,count:3},ia[ld]={size:16,setter:dl,count:4};const Mp=/ERROR:\s*\d+:(\d+)/gi;function Pp(I,x="",N=0){const ie=[...x.matchAll(Mp)],pe=new Map(ie.map((Xe,rt)=>{const $e=parseInt(Xe[1]),lt=ie[rt+1],zt=lt?lt.index:x.length,ln=x.substring(Xe.index,zt);return[$e-1,ln]}));return I.split(`
`).map((Xe,rt)=>{const $e=pe.get(rt);return`${rt+1+N}: ${Xe}${$e?`

^^^ ${$e}`:""}`}).join(`
`)}const Sd=/^[ \t]*\n/;function Cd(I){let x=0;return Sd.test(I)&&(x=1,I=I.replace(Sd,"")),{lineOffset:x,shaderSource:I}}function Wp(I,x){return I.errorCallback(x),I.callback&&setTimeout(()=>{I.callback(`${x}
${I.errors.join(`
`)}`)}),null}function Xp(I,x,N,ie){if(ie=ie||al,!I.getShaderParameter(N,Wh)){const pe=I.getShaderInfoLog(N),{lineOffset:Xe,shaderSource:rt}=Cd(I.getShaderSource(N)),$e=`${Pp(rt,pe,Xe)}
Error compiling ${Al(I,x)}: ${pe}`;return ie($e),$e}return""}function fl(I,x,N){let ie,pe,Xe;if(typeof x=="function"&&(N=x,x=void 0),typeof I=="function")N=I,I=void 0;else if(I&&!Array.isArray(I)){const zt=I;N=zt.errorCallback,I=zt.attribLocations,ie=zt.transformFeedbackVaryings,pe=zt.transformFeedbackMode,Xe=zt.callback}const rt=N||al,$e=[],lt={errorCallback(zt,...ln){$e.push(zt),rt(zt,...ln)},transformFeedbackVaryings:ie,transformFeedbackMode:pe,callback:Xe,errors:$e};{let zt={};Array.isArray(I)?I.forEach(function(ln,hn){zt[ln]=x?x[hn]:hn}):zt=I||{},lt.attribLocations=zt}return lt}const Dp=["VERTEX_SHADER","FRAGMENT_SHADER"];function Bp(I,x){if(x.indexOf("frag")>=0)return Dh;if(x.indexOf("vert")>=0)return Bh}function Up(I,x,N){const ie=I.getAttachedShaders(x);for(const pe of ie)N.has(pe)&&I.deleteShader(pe);I.deleteProgram(x)}const jp=(I=0)=>new n(x=>setTimeout(x,I));function Hp(I,x,N){const ie=I.createProgram(),{attribLocations:pe,transformFeedbackVaryings:Xe,transformFeedbackMode:rt}=fl(N);for(let $e=0;$e<x.length;++$e){let lt=x[$e];if(typeof lt=="string"){const zt=_l(lt),ln=zt?zt.text:lt;let hn=I[Dp[$e]];zt&&zt.type&&(hn=Bp(I,zt.type)||hn),lt=I.createShader(hn),I.shaderSource(lt,Cd(ln).shaderSource),I.compileShader(lt),I.attachShader(ie,lt)}}Object.entries(pe).forEach(([$e,lt])=>I.bindAttribLocation(ie,lt,$e));{let $e=Xe;$e&&($e.attribs&&($e=$e.attribs),Array.isArray($e)||($e=Object.keys($e)),I.transformFeedbackVaryings(ie,$e,rt||Uh))}return I.linkProgram(ie),ie}function Yp(I,x,N,ie,pe){const Xe=fl(N,ie,pe),rt=new Set(x),$e=Hp(I,x,Xe);function lt(zt,ln){const hn=zp(zt,ln,Xe.errorCallback);return hn&&Up(zt,ln,rt),hn}if(Xe.callback){Kp(I,$e).then(()=>{const zt=lt(I,$e);Xe.callback(zt,zt?void 0:$e)});return}return lt(I,$e)?void 0:$e}async function Kp(I,x){const N=I.getExtension("KHR_parallel_shader_compile"),ie=N?(Xe,rt)=>Xe.getProgramParameter(rt,N.COMPLETION_STATUS_KHR):()=>!0;let pe=0;do await jp(pe),pe=1e3/60;while(!ie(I,x))}function zp(I,x,N){if(N=N||al,!I.getProgramParameter(x,Xh)){const ie=I.getProgramInfoLog(x);N(`Error in program linking: ${ie}`);const pe=I.getAttachedShaders(x).map(Xe=>Xp(I,I.getShaderParameter(Xe,I.SHADER_TYPE),Xe,N));return`${ie}
${pe.filter(Xe=>Xe).join(`
`)}`}}function Jp(I,x,N,ie,pe){return Yp(I,x,N,ie,pe)}function Ed(I){const x=I.name;return x.startsWith("gl_")||x.startsWith("webgl_")}const _p=/(\.|\[|]|\w+)/g,$p=I=>I>="0"&&I<="9";function Qp(I,x,N,ie){const pe=I.split(_p).filter($e=>$e!=="");let Xe=0,rt="";for(;;){const $e=pe[Xe++];rt+=$e;const lt=$p($e[0]),zt=lt?parseInt($e):$e;if(lt&&(rt+=pe[Xe++]),Xe===pe.length){N[zt]=x;break}else{const ln=pe[Xe++],hn=ln==="[",ir=N[zt]||(hn?[]:{});N[zt]=ir,N=ir,ie[rt]=ie[rt]||function(ur){return function(vn){Td(ur,vn)}}(ir),rt+=ln}}}function qp(I,x){let N=0;function ie($e,lt,zt){const ln=lt.name.endsWith("[0]"),hn=lt.type,ir=yi[hn];if(!ir)throw new Error(`unknown type: 0x${hn.toString(16)}`);let ur;if(ir.bindPoint){const vn=N;N+=lt.size,ln?ur=ir.arraySetter(I,hn,vn,zt,lt.size):ur=ir.setter(I,hn,vn,zt,lt.size)}else ir.arraySetter&&ln?ur=ir.arraySetter(I,zt):ur=ir.setter(I,zt);return ur.location=zt,ur}const pe={},Xe={},rt=I.getProgramParameter(x,$l);for(let $e=0;$e<rt;++$e){const lt=I.getActiveUniform(x,$e);if(Ed(lt))continue;let zt=lt.name;zt.endsWith("[0]")&&(zt=zt.substr(0,zt.length-3));const ln=I.getUniformLocation(x,lt.name);if(ln){const hn=ie(x,lt,ln);pe[zt]=hn,Qp(zt,hn,Xe,pe)}}return pe}function em(I,x){const N={},ie=I.getProgramParameter(x,Hh);for(let pe=0;pe<ie;++pe){const Xe=I.getTransformFeedbackVarying(x,pe);N[Xe.name]={index:pe,type:Xe.type,size:Xe.size}}return N}function tm(I,x){const N=I.getProgramParameter(x,$l),ie=[],pe=[];for(let $e=0;$e<N;++$e){pe.push($e),ie.push({});const lt=I.getActiveUniform(x,$e);ie[$e].name=lt.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function($e){const lt=$e[0],zt=$e[1];I.getActiveUniforms(x,pe,I[lt]).forEach(function(ln,hn){ie[hn][zt]=ln})});const Xe={},rt=I.getProgramParameter(x,Yh);for(let $e=0;$e<rt;++$e){const lt=I.getActiveUniformBlockName(x,$e),zt={index:I.getUniformBlockIndex(x,lt),usedByVertexShader:I.getActiveUniformBlockParameter(x,$e,Kh),usedByFragmentShader:I.getActiveUniformBlockParameter(x,$e,zh),size:I.getActiveUniformBlockParameter(x,$e,Jh),uniformIndices:I.getActiveUniformBlockParameter(x,$e,_h)};zt.used=zt.usedByVertexShader||zt.usedByFragmentShader,Xe[lt]=zt}return{blockSpecs:Xe,uniformData:ie}}function Td(I,x){for(const N in x){const ie=I[N];typeof ie=="function"?ie(x[N]):Td(I[N],x[N])}}function Rd(I,...x){const N=I.uniformSetters||I,ie=x.length;for(let pe=0;pe<ie;++pe){const Xe=x[pe];if(Array.isArray(Xe)){const rt=Xe.length;for(let $e=0;$e<rt;++$e)Rd(N,Xe[$e])}else for(const rt in Xe){const $e=N[rt];$e&&$e(Xe[rt])}}}function nm(I,x){const N={},ie=I.getProgramParameter(x,jh);for(let pe=0;pe<ie;++pe){const Xe=I.getActiveAttrib(x,pe);if(Ed(Xe))continue;const rt=I.getAttribLocation(x,Xe.name),$e=ia[Xe.type],lt=$e.setter(I,rt,$e);lt.location=rt,N[Xe.name]=lt}return N}function rm(I,x){for(const N in x){const ie=I[N];ie&&ie(x[N])}}function im(I,x,N){N.vertexArrayObject?I.bindVertexArray(N.vertexArrayObject):(rm(x.attribSetters||x,N.attribs),N.indices&&I.bindBuffer(Ph,N.indices))}function xd(I,x){const N=qp(I,x),ie=nm(I,x),pe={program:x,uniformSetters:N,attribSetters:ie};return bu(I)&&(pe.uniformBlockSpec=tm(I,x),pe.transformFeedbackInfo=em(I,x)),pe}const om=/\s|{|}|;/;function sm(I,x,N,ie,pe){const Xe=fl(N,ie,pe),rt=[];if(x=x.map(function(zt){if(!om.test(zt)){const ln=_l(zt);if(ln)zt=ln.text;else{const hn=`no element with id: ${zt}`;Xe.errorCallback(hn),rt.push(hn)}}return zt}),rt.length)return Wp(Xe,"");const $e=Xe.callback;$e&&(Xe.callback=(zt,ln)=>{$e(zt,zt?void 0:xd(I,ln))});const lt=Jp(I,x,Xe);return lt?xd(I,lt):null}const am=4,Id=5123;function cm(I,x,N,ie,pe,Xe){N=N===void 0?am:N;const rt=x.indices,$e=x.elementType,lt=ie===void 0?x.numElements:ie;pe=pe===void 0?0:pe,$e||rt?Xe!==void 0?I.drawElementsInstanced(N,lt,$e===void 0?Id:x.elementType,pe,Xe):I.drawElements(N,lt,$e===void 0?Id:x.elementType,pe):Xe!==void 0?I.drawArraysInstanced(N,pe,lt,Xe):I.drawArrays(N,pe,lt)}const wd=36160,Uu=36161,um=3553,lm=5121,dm=6402,fm=6408,hm=33190,pm=36012,mm=35056,gm=36013,ym=32854,vm=32855,bm=36194,Od=33189,Ad=6401,Vd=36168,hl=34041,pl=36064,ju=36096,kd=36128,ml=33306,gl=33071,yl=9729,Sm=[{format:fm,type:lm,min:yl,wrap:gl},{format:hl}],mc={};mc[hl]=ml,mc[Ad]=kd,mc[Vd]=kd,mc[dm]=ju,mc[Od]=ju,mc[hm]=ju,mc[pm]=ju,mc[mm]=ml,mc[gm]=ml;function Cm(I,x){return mc[I]||mc[x]}const Xc={};Xc[ym]=!0,Xc[vm]=!0,Xc[bm]=!0,Xc[hl]=!0,Xc[Od]=!0,Xc[Ad]=!0,Xc[Vd]=!0;function Em(I){return Xc[I]}const Tm=32;function Rm(I){return I>=pl&&I<pl+Tm}function Hu(I,x,N,ie){const pe=wd,Xe=I.createFramebuffer();I.bindFramebuffer(pe,Xe),N=N||I.drawingBufferWidth,ie=ie||I.drawingBufferHeight,x=x||Sm;const rt=[],$e={framebuffer:Xe,attachments:[],width:N,height:ie};return x.forEach(function(lt,zt){let ln=lt.attachment;const hn=lt.samples,ir=lt.format;let ur=lt.attachmentPoint||Cm(ir,lt.internalFormat);if(ur||(ur=pl+zt),Rm(ur)&&rt.push(ur),!ln)if(hn!==void 0||Em(ir))ln=I.createRenderbuffer(),I.bindRenderbuffer(Uu,ln),hn>1?I.renderbufferStorageMultisample(Uu,hn,ir,N,ie):I.renderbufferStorage(Uu,ir,N,ie);else{const vn=Object.assign({},lt);vn.width=N,vn.height=ie,vn.auto===void 0&&(vn.auto=!1,vn.min=vn.min||vn.minMag||yl,vn.mag=vn.mag||vn.minMag||yl,vn.wrapS=vn.wrapS||vn.wrap||gl,vn.wrapT=vn.wrapT||vn.wrap||gl),ln=Jl(I,vn)}if(vr(I,ln))I.framebufferRenderbuffer(pe,ur,Uu,ln);else if(Mn(I,ln))lt.layer!==void 0?I.framebufferTextureLayer(pe,ur,ln,lt.level||0,lt.layer):I.framebufferTexture2D(pe,ur,lt.target||um,ln,lt.level||0);else throw new Error("unknown attachment type");$e.attachments.push(ln)}),I.drawBuffers&&I.drawBuffers(rt),$e}function xm(I,x,N){N=N||wd,x?(I.bindFramebuffer(N,x.framebuffer),I.viewport(0,0,x.width,x.height)):(I.bindFramebuffer(N,null),I.viewport(0,0,I.drawingBufferWidth,I.drawingBufferHeight))}function Ts(I,x){return()=>x instanceof WebGLTexture?x:Jl(I,{src:x,wrap:I.CLAMP_TO_EDGE})}const Nd=2;class eu{constructor(x){u(this,"id","_"),u(this,"context"),u(this,"output"),u(this,"fbi"),u(this,"options"),u(this,"programInfo"),u(this,"bufferInfo"),u(this,"profiler"),u(this,"lastRun");const{context:N,width:ie,height:pe}=x;this.context=N,this.options=x;const Xe=this.buildDefines();this.programInfo=sm(this.context,[Xe+this.getVertexShader(),Xe+this.getFragmentShader()]),this.bufferInfo=of(this.context,this.getBuffers()),this.fbi=Hu(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],ie,pe),this.output=this.fbi.attachments[0]}resizeOutput(x,N){this.fbi=Hu(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],x,N),this.options.width=x,this.options.height=N,this.output=this.fbi.attachments[0]}getDefines(){return{}}getBuffers(){return{position:{numComponents:2,data:[-1,-1,-1,1,1,-1,1,1,-1,1,1,-1]},texture_coord:{numComponents:2,data:[0,0,0,1,1,0,1,1,0,1,1,0]}}}buildDefines(){let x="";const N=this.getDefines();for(let ie in N)x+=`#define ${ie} ${N[ie].toFixed(1)}
`;return x}run(x){var N,ie,pe,Xe,rt,$e;(N=this.profiler)==null||N.pushContext(`[${this.id}] PROG : ${this.constructor.name}`),(ie=this.profiler)==null||ie.pushContext(`[${this.id}] UNIFORMS`);for(const ln in x)typeof x[ln]=="function"&&((pe=this.profiler)==null||pe.pushContext(`[${this.id}] UNI : ${ln}`),x[ln]=x[ln](),(Xe=this.profiler)==null||Xe.popContext(`[${this.id}] UNI : ${ln}`));(rt=this.profiler)==null||rt.popContext(`[${this.id}] UNIFORMS`);const lt=Date.now();let zt=0;this.lastRun&&(zt=(lt-this.lastRun)/1e3),this.lastRun=lt,this.context.viewport(0,0,this.context.canvas.width,this.context.canvas.height),this.context.useProgram(this.programInfo.program),im(this.context,this.programInfo,this.bufferInfo),Rd(this.programInfo,{delta:zt,canvas:[this.context.canvas.width,this.context.canvas.height],...x}),xm(this.context,this.options.disableFramebuffer?null:this.fbi),cm(this.context,this.bufferInfo),($e=this.profiler)==null||$e.popContext(`[${this.id}] PROG : ${this.constructor.name}`)}setProfiler(x){this.profiler=x}}const Im=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;
uniform sampler2D mask;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,wm=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class Om extends eu{getDefines(){var x;return{RADIUS:(x=this.options.radius)!=null?x:1}}getFragmentShader(){return Im+this.createLoopFunction()}getVertexShader(){return wm}createLoopFunction(){var x;let N=(x=this.options.radius)!=null?x:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${N}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;
            float maxLength = length(normalizedRadius);

            for(int y=-${N}; y<${N+1}; ++y) {
                for(int x=-${N}; x<${N+1}; ++x) {
                    float factor = (1.- texture2D(mask, _texture_coord + diff).a) * (maxLength - length(diff)) / maxLength;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}}const Am=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D background;
uniform sampler2D foreground;
uniform sampler2D threshold;

void main() {
  vec4 backgroundColor = texture2D(background, _texture_coord);
  vec4 foregroundColor = texture2D(foreground, _texture_coord);
  vec4 tresholdColor = texture2D(threshold, _texture_coord);
  gl_FragColor = foregroundColor * tresholdColor.a +
                 backgroundColor * (1. - tresholdColor.a);
}
`,Vm=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  _texture_coord.y = 1. - texture_coord.y;
}
`;class vl extends eu{getFragmentShader(){return Am}getVertexShader(){return Vm}}class bl{constructor(){u(this,"steps",[]),u(this,"profiler")}addStep(x){this.steps.push(x)}async run(){for(const x of this.steps)x.program.run(x.getUniforms())}resizeOutput(x,N){var ie,pe;(ie=this.profiler)==null||ie.pushContext(`PIP [${this.constructor.name}]`);for(const Xe of this.steps)Xe.preventResize||Xe.program.resizeOutput(x,N);(pe=this.profiler)==null||pe.popContext(`PIP [${this.constructor.name}]`)}setProfiler(x){this.profiler=x;for(const N of this.steps)N.program.setProfiler(x)}setId(x){for(const N of this.steps)N.program.id=x}}class Sl extends bl{constructor(){super(...arguments),u(this,"preciseMaskEnabled",!1)}}const km=10,Nm=2,Zm=8;class Lm extends Sl{constructor(x,N){super(),u(this,"inputImage"),u(this,"inputMask"),u(this,"blur"),this.context=x,this.radius=N;const ie={context:x,height:x.canvas.height,width:x.canvas.width};this.blur=new Om({...ie,radius:N,...this.getBlurTextureSize(x.canvas.width,x.canvas.height)});const pe=new vl({...ie,disableFramebuffer:!0});this.addStep({program:this.blur,preventResize:!0,getUniforms:()=>({texture:Ts(x,this.inputImage),mask:Ts(x,this.inputMask)})}),this.addStep({program:pe,getUniforms:()=>({background:Ts(x,this.blur.output),foreground:Ts(x,this.inputImage),threshold:Ts(x,this.inputMask)})})}getBlurTextureSize(x,N){const ie=this.radius>km?Zm:Nm;return{width:Math.max(Nd,x/ie),height:Math.max(Nd,N/ie)}}setData(x,N){this.inputImage=x,this.inputMask=N}resizeOutput(x,N){super.resizeOutput(x,N);const ie=this.getBlurTextureSize(x,N);this.blur.resizeOutput(ie.width,ie.height)}}class Zd extends Sl{constructor(x){super(),u(this,"inputImage"),u(this,"inputBackgroundImage"),u(this,"inputMask"),u(this,"preciseMaskEnabled",!0),this.context=x;const N={context:x,height:x.canvas.height,width:x.canvas.width},ie=new vl({...N,disableFramebuffer:!0});this.addStep({program:ie,getUniforms:()=>({background:Ts(x,this.inputBackgroundImage),foreground:Ts(x,this.inputImage),threshold:Ts(x,this.inputMask)})})}setData(x,N){this.inputImage=x,this.inputMask=N}}class Fm extends Zd{constructor(){super(...arguments),u(this,"frameReader"),u(this,"preciseMaskEnabled",!0)}set inputVideo(x){this.frameReader=x.getReader(),this.readNextVideoFrame()}async run(){this.frameReader&&(await super.run(),this.readNextVideoFrame())}async readNextVideoFrame(){var x;const N=await((x=this.frameReader)==null?void 0:x.read());N!=null&&N.value&&(this.inputBackgroundImage=await createImageBitmap(N.value),N.value.close())}}const Gm=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

vec4 loop();

void main() { gl_FragColor = loop(); }
`,Mm=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;var Cl=(I=>(I[I.LINEAR=0]="LINEAR",I[I.GAUSSIAN=1]="GAUSSIAN",I))(Cl||{});class Ld extends eu{getDefines(){var x;return{RADIUS:(x=this.options.radius)!=null?x:1}}getFragmentShader(){return Gm+this.createLoopFunction()}getVertexShader(){return Mm}createLoopFunction(){var x;let N=(x=this.options.radius)!=null?x:1;return`

        vec4 loop() { 
            vec4 result = vec4(0,0,0,0);
            float factorSum = 0.;

            vec2 normalizedRadius = vec2(-${N}.) / canvas;
            vec2 normalizedIncrement = vec2(1.) / canvas;
            vec2 diff = normalizedRadius;

            for(int y=-${N}; y<${N+1}; ++y) {
                for(int x=-${N}; x<${N+1}; ++x) {
                    float factor = 1.;
                    result += factor * texture2D(texture, _texture_coord + diff);
                    factorSum += factor;
                    diff.x += normalizedIncrement.x;
                }
                diff.y += normalizedIncrement.y;
                diff.x = normalizedRadius.x;
            }
            return result / factorSum;
        }`}getFactor(x,N){switch(this.options.type){case 1:return this.getLinearFactor(x,N);case 0:default:return this.getLinearFactor(x,N)}}getLinearFactor(x,N){return 1}getGaussianFactor(x,N){var ie;const pe=Math.PI*2,Xe=Math.max((ie=this.options.radius)!=null?ie:1,1),rt=1/(pe*Xe**2),$e=-(x**2+N**2),lt=rt*$e;return rt*Math.E**lt}}class Pm extends Sl{constructor(x,N){super(),u(this,"inputImage"),u(this,"inputMask"),this.context=x;const ie={context:x,height:x.canvas.height,width:x.canvas.width},pe=new Ld({...ie,radius:N,type:Cl.GAUSSIAN}),Xe=new vl({...ie,disableFramebuffer:!0});this.addStep({program:pe,getUniforms:()=>({texture:Ts(x,this.inputImage)})}),this.addStep({program:Xe,getUniforms:()=>({background:Ts(x,this.inputImage),foreground:Ts(x,pe.output),threshold:Ts(x,this.inputMask)})})}setData(x,N){this.inputImage=x,this.inputMask=N}}class El extends eu{constructor(x){super(x),u(this,"fbi2"),this.fbi2=Hu(x.context,[{format:x.context.RGBA,type:x.context.UNSIGNED_BYTE,min:x.context.LINEAR,mag:x.context.LINEAR,wrap:x.context.CLAMP_TO_EDGE}],x.width,x.height)}run(x){const N=this.fbi;this.fbi=this.fbi2,this.fbi2=N,this.output=this.fbi.attachments[0],super.run({...x,previous_rendering:this.fbi2.attachments[0]})}resizeOutput(x,N){super.resizeOutput(x,N),this.fbi2=Hu(this.context,[{format:this.context.RGBA,type:this.context.UNSIGNED_BYTE,min:this.context.LINEAR,wrap:this.context.CLAMP_TO_EDGE}],x,N)}}const Wm=`precision mediump float;

varying vec2 _texture_coord;

// uniform float treshold;
uniform sampler2D image_now;
uniform sampler2D image_before;
uniform sampler2D mask_now;
uniform sampler2D mask_before;
uniform sampler2D previous_rendering;
uniform vec2 canvas;

uniform float delta;

float current_factor = 0.69;
float previous_factor = 0.74;
float threshold_activation = 0.54;

float map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float getThreshold() {
  vec4 color = vec4(0.);
  for (float y = -6.; y < 7.; y += 1.) {
    for (float x = -6.; x < 7.; x += 1.) {
      vec4 image_now_color =
          texture2D(image_now, _texture_coord + vec2(x, y) / canvas);
      vec4 image_before_color =
          texture2D(image_before, _texture_coord + vec2(x, y) / canvas);
      color += abs(image_before_color - image_now_color);
    }
  }
  return (color.x + color.y + color.z) / (3. * 9.);
}

void main() {
  float treshold_input = .4;
  float treshold_previous_rendering = .98;

  vec4 mask_now_color = texture2D(mask_now, _texture_coord);
  vec4 mask_before_color = texture2D(mask_before, _texture_coord);
  vec4 previous_rendering_color = texture2D(previous_rendering, _texture_coord);

  vec3 mask_diff = abs(mask_before_color.xyz - mask_now_color.xyz);
  float flickering = mask_diff.x;
  float threshold = getThreshold();
  if (threshold < threshold_activation) {
    gl_FragColor = vec4(flickering, 0., 0., 1.) * current_factor +
                   previous_rendering_color * previous_factor;
    gl_FragColor *= (1. - threshold);
  }
}
`,Xm=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class Dm extends El{getFragmentShader(){return Wm}getVertexShader(){return Xm}}const Bm=`#version 300 es
// https://github.com/Volcomix/virtual-background/blob/main/src/pipelines/webgl2/jointBilateralFilterStage.ts

precision highp float;
uniform sampler2D input_frame;
uniform sampler2D segmentation_mask;
uniform sampler2D threshold;
uniform vec2 texel_size;
uniform float step;
uniform float radius;
uniform float offset;
uniform float sigma_texel;
uniform float sigma_color;

in vec2 _texture_coord;
out vec4 outColor;

float gaussian(float x, float sigma) {
  float coeff = -0.5 / (sigma * sigma * 4.0 + 1.0e-6);
  return exp((x * x) * coeff);
}

void main() {
  vec2 centerCoord = _texture_coord;
  vec3 centerColor = texture(input_frame, centerCoord).rgb;
  float newVal = 0.0;
  float spaceWeight = 0.0;
  float colorWeight = 0.0;
  float totalWeight = 0.0;
  // Subsample kernel space.
  for (float i = -radius + offset; i <= radius; i += step) {
    for (float j = -radius + offset; j <= radius; j += step) {
      vec2 shift = vec2(j, i) * texel_size;
      vec2 coord = vec2(centerCoord + shift);
      vec3 frameColor = texture(input_frame, coord).rgb;
      float threshold = texture(threshold, coord).a;
      float outVal = texture(segmentation_mask, coord).a;

      spaceWeight = gaussian(distance(centerCoord, coord), sigma_texel);
      colorWeight = gaussian(distance(centerColor, frameColor), sigma_color);
      totalWeight += spaceWeight * colorWeight;
      newVal += spaceWeight * colorWeight * outVal * threshold;
    }
  }
  newVal /= totalWeight;
  outColor = vec4(vec3(0.), newVal);
}`,Um=`#version 300 es
in vec2 position;
in vec2 texture_coord;
out vec2 _texture_coord;
void main() {
  gl_Position = vec4(position, 0.0, 1.0);
  _texture_coord = texture_coord;
}`;class jm extends eu{getFragmentShader(){return Bm}getVertexShader(){return Um}}const Hm=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  int count = 0;
  for (float y = -1.; y < 2.; y += 1.) {
    for (float x = -1.; x < 2.; x += 1.) {
      vec2 coord = _texture_coord + vec2(y, x) / canvas;
      vec4 color = texture2D(texture, coord);
      if (color.r > .1) {
        count++;
      }
    }
  }
  if (count > 5) {
    gl_FragColor = texture2D(texture, _texture_coord);
  }
}
`,Ym=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class Km extends eu{getFragmentShader(){return Hm}getVertexShader(){return Ym}}const zm=`precision mediump float;

varying vec2 _texture_coord;

uniform vec2 canvas;
uniform sampler2D texture;

void main() {
  vec4 color = texture2D(texture, _texture_coord);
  for (float y = -2.; y < 3.; y += 1.) {
    for (float x = -2.; x < 3.; x += 1.) {
      vec2 coord = _texture_coord;
      coord += vec2(y, x) / canvas;
      color += texture2D(texture, coord) * (1. / 4.);
    }
  }

  gl_FragColor = color;
}
`,Jm=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class _m extends El{getFragmentShader(){return zm}getVertexShader(){return Jm}}const $m=`precision mediump float;

varying vec2 _texture_coord;

uniform sampler2D threshold;
uniform sampler2D inputs;

void main() {
  vec4 inputs_color = texture2D(inputs, _texture_coord);
  vec4 threshold_color = texture2D(threshold, _texture_coord);
  if (threshold_color.r < .1 && inputs_color.r > .5) {
    gl_FragColor = inputs_color;
  }
}
`,Qm=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
}
`;class qm extends El{getFragmentShader(){return $m}getVertexShader(){return Qm}}class eg extends bl{constructor(x,N,ie){super(),u(this,"inputImage"),u(this,"inputMask"),u(this,"previousInputImage"),u(this,"previousInputMask"),u(this,"output"),u(this,"options",{currentThresholdMinimum:0,currentThresholdMaximum:1,previousThresholdMinimum:0,previousThresholdMaximum:1,thresholdMinimum:0,thresholdMaximum:1,thresholdFactor:1}),this.context=x;const pe={context:x,height:ie,width:N},Xe=new Dm(pe),rt=new Ld({...pe,radius:1,type:Cl.GAUSSIAN}),$e=new qm(pe),lt=new _m(pe),zt=new Km(pe),ln=new jm({...pe}),hn=.66,ir=640,ur=480,vn=256,Tn=144;let Ir=1;Ir*=Math.max(ir/vn,ur/Tn);const Er=Math.max(1,Math.sqrt(Ir)*hn),zr=1/ir,jt=1/ur;this.addStep({program:Xe,getUniforms:()=>({image_now:Ts(x,this.inputImage),image_before:Ts(x,this.previousInputImage),mask_now:Ts(x,this.inputMask),mask_before:Ts(x,this.previousInputMask),current_threshold_minimum:this.options.currentThresholdMinimum,current_threshold_maximum:this.options.currentThresholdMaximum,previous_threshold_minimum:this.options.previousThresholdMinimum,previous_threshold_maximum:this.options.previousThresholdMaximum,threshold_minimum:this.options.thresholdMinimum,threshold_maximum:this.options.thresholdMaximum,threshold_factor:this.options.thresholdFactor})}),this.addStep({program:$e,getUniforms:()=>({inputs:Ts(x,this.inputMask),threshold:Ts(x,Xe.output)})}),this.addStep({program:zt,getUniforms:()=>({texture:Ts(x,$e.output)})}),this.addStep({program:lt,getUniforms:()=>({texture:Ts(x,zt.output)})}),this.addStep({program:rt,getUniforms:()=>({texture:Ts(x,lt.output)})}),this.addStep({program:ln,getUniforms:()=>({input_frame:Ts(x,this.inputImage),segmentation_mask:Ts(x,this.inputMask),threshold:Ts(x,rt.output),texel_size:[zr,jt],step:Er,radius:Ir,offset:Er>1?Er*.5:0,sigma_texel:Math.max(zr,jt)*Ir,sigma_color:.1})}),this.output=ln.output}setData(x,N){this.previousInputImage=this.inputImage?this.inputImage:x,this.previousInputMask=this.inputMask?this.inputMask:N,this.inputImage=x,this.inputMask=N}setOptions(x){this.options=x}}const tg=`precision mediump float;

varying vec2 _texture_coord;
uniform sampler2D texture;

void main() { gl_FragColor = texture2D(texture, _texture_coord); }
`,ng=`varying vec2 _texture_coord;

attribute vec2 position;
attribute vec2 texture_coord;
uniform bool invert_y;

void main() {
  gl_Position = vec4(position, 0., 1.);
  _texture_coord = texture_coord;
  if (invert_y) {
    _texture_coord.y = 1. - texture_coord.y;
  }
}
`;class rg extends eu{getFragmentShader(){return tg}getVertexShader(){return ng}}class ig extends bl{constructor(x,N,ie){super(),u(this,"inputImage"),this.context=x;const pe={context:x,height:ie,width:N};this.addStep({program:new rg({...pe,disableFramebuffer:!0}),getUniforms:()=>({texture:Ts(x,this.inputImage),invert_y:!0})})}setData(x){this.inputImage=x}}class og{constructor(x){u(this,"resize"),u(this,"canvas"),u(this,"context"),this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("webgl2"),this.canvas.width=x.width,this.canvas.height=x.height,this.resize=new ig(this.context,x.width,x.height)}resizeForeground(x,N){this.canvas.width=x,this.canvas.height=N,this.resize.resizeOutput(x,N)}async process(x){var N,ie;return this.canvas.width=this.canvas.width,(N=this.resize)==null||N.setData(x),(ie=this.resize)==null||ie.run(),this.canvas}}class sg{constructor(x,N){u(this,"improveMaskSegmentation"),u(this,"backgroundResizer"),u(this,"backgroundImage"),u(this,"backgroundVideo"),u(this,"profiler"),u(this,"activePipeline"),u(this,"canvas"),u(this,"options"),u(this,"context"),u(this,"virtualBGImage"),this.id=x,this.canvas=new OffscreenCanvas(0,0),this.context=this.canvas.getContext("webgl2"),this.canvas.width=N.foregroundWidth,this.canvas.height=N.foregroundHeight,this.improveMaskSegmentation=new eg(this.context,N.maskWidth,N.maskHeight),this.backgroundImage=new Zd(this.context),this.backgroundVideo=new Fm(this.context),this.backgroundResizer=new og({width:N.foregroundWidth,height:N.foregroundHeight})}setBackgroundOptions(x){switch(x.transformerType){case"BackgroundBlur":this.activePipeline=new Lm(this.context,this.getBlurSize(x.radius));break;case"SilhouetteBlur":this.activePipeline=new Pm(this.context,this.getBlurSize(x.radius));break;case"VideoBackground":this.activePipeline=this.backgroundVideo;break;case"VirtualBackground":this.activePipeline=this.backgroundImage;break}this.options=x}setFlickeringOptions(x){var N;(N=this.improveMaskSegmentation)==null||N.setOptions(x)}setVideoBGReadable(x){this.backgroundVideo.inputVideo=x}async setVirtualBGImage(x){this.virtualBGImage=x,this.backgroundImage.inputBackgroundImage=await this.backgroundResizer.process(x)}async process(x,N){var ie,pe,Xe,rt,$e,lt,zt;if(this.activePipeline&&x.width&&(N!=null&&N.width)){const ln=`[${this.id}] background-filter`;(ie=this.profiler)==null||ie.pushContext(ln);let hn=N;((pe=this.options)!=null&&pe.selfieSegmentationType&&((Xe=this.options)==null?void 0:Xe.selfieSegmentationType)==="PRECISE"||!((rt=this.options)!=null&&rt.selfieSegmentationType)&&this.activePipeline.preciseMaskEnabled)&&(this.improveMaskSegmentation.setId(this.id),this.improveMaskSegmentation.setProfiler(this.profiler),this.improveMaskSegmentation.setData(x,N),this.improveMaskSegmentation.run(),hn=this.improveMaskSegmentation.output),this.activePipeline.setId(this.id),this.activePipeline.setProfiler(this.profiler),($e=this.activePipeline)==null||$e.setData(x,hn),(lt=this.activePipeline)==null||lt.run(),(zt=this.profiler)==null||zt.popContext(ln)}}async resizeForeground(x,N){var ie;this.canvas.width=x,this.canvas.height=N,this.backgroundImage.resizeOutput(x,N),this.backgroundVideo.resizeOutput(x,N),this.backgroundResizer.resizeForeground(x,N),(ie=this.activePipeline)==null||ie.resizeOutput(x,N),this.virtualBGImage&&(this.backgroundImage.inputBackgroundImage=await this.backgroundResizer.process(this.virtualBGImage))}async profile(x){const N=new Kc(this.context);return this.profiler=N,N.start(),await xc(x),this.profiler=void 0,N.stop(),N.getResolvedQueries()}getBlurSize(x=ct.Low){switch(x){case ct.Low:return 5;case ct.High:return 12}return x}}class Fd{constructor(){u(this,"selfieSegmentation",new Qo),u(this,"backgroundFilter"),u(this,"previousDimensions",{width:0,height:0})}async init(x,N){await this.selfieSegmentation.init(N.wasmAssetUriPath,N.tfliteAssetUriPath);const{width:ie,height:pe}=this.selfieSegmentation.getOutputDimensions();this.backgroundFilter=new sg(x,{foregroundWidth:1,foregroundHeight:1,maskWidth:ie,maskHeight:pe})}async transform(x,N){var ie,pe,Xe,rt;const $e=(ie=x.timestamp)!=null?ie:0,lt=await createImageBitmap(x),zt=await this.selfieSegmentation.process(lt);zt?((lt.width!==this.previousDimensions.width||lt.height!==this.previousDimensions.height)&&(this.previousDimensions.width=lt.width,this.previousDimensions.height=lt.height,await((pe=this.backgroundFilter)==null?void 0:pe.resizeForeground(lt.width,lt.height))),await((Xe=this.backgroundFilter)==null?void 0:Xe.process(lt,zt)),x.close(),N.enqueue(new VideoFrame((rt=this.backgroundFilter)==null?void 0:rt.canvas,{timestamp:$e,alpha:"discard"}))):N.enqueue(x)}async setBackgroundOptions(x){var N;await((N=this.backgroundFilter)==null?void 0:N.setBackgroundOptions(x))}async setVideoBGReadable(x){var N;await((N=this.backgroundFilter)==null?void 0:N.setVideoBGReadable(x))}async setVirtualBGImage(x){var N;await((N=this.backgroundFilter)==null?void 0:N.setVirtualBGImage(x))}setFlickeringOptions(x){var N;(N=this.backgroundFilter)==null||N.setFlickeringOptions(x)}async profile(x){var N,ie;return(ie=(N=this.backgroundFilter)==null?void 0:N.profile(x))!=null?ie:[]}}const Gd=class{constructor(){u(this,"backgroundTransformer",new Fd),u(this,"mediaProcessor",new _s),u(this,"rate",30),u(this,"resolveOnMediaProcessor"),u(this,"eventsQueue",[])}async init(I,x){await this.backgroundTransformer.init(I,x),await this.mediaProcessor.setTransformers([this.backgroundTransformer]),this.mediaProcessor.setTrackExpectedRate(this.rate),this.mediaProcessor.onAny((N,ie)=>{this.resolveOnMediaProcessor?(this.resolveOnMediaProcessor({name:N,data:ie}),this.resolveOnMediaProcessor=void 0):this.eventsQueue.push({name:N,data:ie})})}async onMediaProcessorEvent(){return await new n(I=>{this.eventsQueue.length>0?I(this.eventsQueue.shift()):this.resolveOnMediaProcessor=I})}async setTrackExpectedRate(I){this.rate=I,this.mediaProcessor.setTrackExpectedRate(I)}async transform(I,x){this.mediaProcessor.transform(I,x)}async setBackgroundOptions(I){var x;await((x=this.backgroundTransformer)==null?void 0:x.setBackgroundOptions(I))}setVideoBGReadable(I){this.backgroundTransformer.setVideoBGReadable(I)}async setVirtualBGImage(I){await this.backgroundTransformer.setVirtualBGImage(I)}async terminate(){await this.mediaProcessor.destroy()}setFlickeringOptions(I){this.backgroundTransformer.setFlickeringOptions(I)}setVonageMetadata(I){On(I)}async profile(I){return JSON.stringify(await this.backgroundTransformer.profile(I))}};let ag=Gd;Rc("ProcessorWorker",Gd);const Md="dmFyIGVkPU9iamVjdC5kZWZpbmVQcm9wZXJ0eTt2YXIgdGQ9KEssdGUscmUpPT50ZSBpbiBLP2VkKEssdGUse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOnJlfSk6S1t0ZV09cmU7dmFyIHA9KEssdGUscmUpPT4odGQoSyx0eXBlb2YgdGUhPSJzeW1ib2wiP3RlKyIiOnRlLHJlKSxyZSk7KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBLPShyPT4ocltyLklOSVQ9MF09IklOSVQiLHJbci5GT1JXQVJEPTFdPSJGT1JXQVJEIixyW3IuVEVSTUlOQVRFPTJdPSJURVJNSU5BVEUiLHIpKShLfHx7fSk7ZnVuY3Rpb24gdGUocil7cmV0dXJuW0ltYWdlQml0bWFwLFJlYWRhYmxlU3RyZWFtLFdyaXRhYmxlU3RyZWFtXS5zb21lKGU9PnIgaW5zdGFuY2VvZiBlKX1mdW5jdGlvbiByZShyLGUpe2NvbnN0e2lkOnR9PXIsbj1BcnJheS5pc0FycmF5KGUpP2U6W2VdO3Bvc3RNZXNzYWdlKHtpZDp0LHJlc3VsdDplfSxuLmZpbHRlcihpPT50ZShpKSkpfWFzeW5jIGZ1bmN0aW9uIHFpKHIsZSl7Y29uc3R7ZnVuY3Rpb25OYW1lOnQsYXJnczpufT1yO2lmKCFlLmluc3RhbmNlKXRocm93Imluc3RhbmNlIG5vdCBpbml0aWFsaXplZCI7aWYoIXQpdGhyb3cibWlzc2luZyBmdW5jdGlvbiBuYW1lIHRvIGNhbGwiO2lmKCFlLmluc3RhbmNlW3RdKXRocm93YHVuZGVmaW5lZCBmdW5jdGlvbiBbJHt0fV0gaW4gY2xhc3MgJHtlLmluc3RhbmNlLmNvbnN0cnVjdG9yLndvcmtlcklkfWA7cmUocixhd2FpdCBlLmluc3RhbmNlW3RdKC4uLm4hPW51bGw/bjpbXSkpfWZ1bmN0aW9uICRyKCl7cmV0dXJuIHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZTwidSImJnNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZX1jb25zdCBHcj17fTtmdW5jdGlvbiBYaShyLGUpe2Uud29ya2VySWQ9ciwkcigpJiYoR3JbZS53b3JrZXJJZF09ZSl9ZnVuY3Rpb24gWWkocixlKXtpZighci5hcmdzKXRocm93Ik1pc3NpbmcgY2xhc3NOYW1lIHdoaWxlIGluaXRpYWxpemluZyB3b3JrZXIiO2NvbnN0W3RdPXIuYXJncyxuPUdyW3RdO2lmKG4pZS5pbnN0YW5jZT1uZXcgbihyLmFyZ3Muc2xpY2UoMSkpO2Vsc2UgdGhyb3dgdW5rbm93biB3b3JrZXIgY2xhc3MgJHt0fWA7cmUocix0eXBlb2YgZS5pbnN0YW5jZSE9PXZvaWQgMCl9YXN5bmMgZnVuY3Rpb24gUWkocixlKXtjb25zdHthcmdzOnR9PXI7aWYoIWUuaW5zdGFuY2UpdGhyb3ciaW5zdGFuY2Ugbm90IGluaXRpYWxpemVkIjtsZXQgbjtlLmluc3RhbmNlLnRlcm1pbmF0ZSYmKG49YXdhaXQgZS5pbnN0YW5jZS50ZXJtaW5hdGUoLi4udCE9bnVsbD90OltdKSkscmUocixuKX1mdW5jdGlvbiBLaSgpe2NvbnN0IHI9e307b25tZXNzYWdlPWFzeW5jIGU9Pntjb25zdCB0PWUuZGF0YTtzd2l0Y2godC50eXBlKXtjYXNlIEsuSU5JVDpZaSh0LHIpO2JyZWFrO2Nhc2UgSy5GT1JXQVJEOnFpKHQscik7YnJlYWs7Y2FzZSBLLlRFUk1JTkFURTpRaSh0LHIpO2JyZWFrfX19JHIoKSYmS2koKTtjbGFzcyBuZXt9bmUudXBkYXRlcz17dHJhbnNmb3JtZXJfbmV3OiJOZXcgdHJhbnNmb3JtZXIiLHRyYW5zZm9ybWVyX251bGw6Ik51bGwgdHJhbnNmb3JtZXIifSxuZS5lcnJvcnM9e3RyYW5zZm9ybWVyX25vbmU6Ik5vIHRyYW5zZm9ybWVycyBwcm92aWRlZCIsdHJhbnNmb3JtZXJfc3RhcnQ6IkNhbm5vdCBzdGFydCB0cmFuc2Zvcm1lciIsdHJhbnNmb3JtZXJfdHJhbnNmb3JtOiJDYW5ub3QgdHJhbnNmb3JtIGZyYW1lIix0cmFuc2Zvcm1lcl9mbHVzaDoiQ2Fubm90IGZsdXNoIHRyYW5zZm9ybWVyIixyZWFkYWJsZV9udWxsOiJSZWFkYWJsZSBpcyBudWxsIix3cml0YWJsZV9udWxsOiJXcml0YWJsZSBpcyBudWxsIn07dmFyIE90PXtleHBvcnRzOnt9fSx6cj1mdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbigpe2Zvcih2YXIgaT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksbz0wO288aS5sZW5ndGg7bysrKWlbb109YXJndW1lbnRzW29dO3JldHVybiBlLmFwcGx5KHQsaSl9fSxKaT16cixvZT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO2Z1bmN0aW9uIE50KHIpe3JldHVybiBBcnJheS5pc0FycmF5KHIpfWZ1bmN0aW9uIFV0KHIpe3JldHVybiB0eXBlb2Ygcj4idSJ9ZnVuY3Rpb24gWmkocil7cmV0dXJuIHIhPT1udWxsJiYhVXQocikmJnIuY29uc3RydWN0b3IhPT1udWxsJiYhVXQoci5jb25zdHJ1Y3RvcikmJnR5cGVvZiByLmNvbnN0cnVjdG9yLmlzQnVmZmVyPT0iZnVuY3Rpb24iJiZyLmNvbnN0cnVjdG9yLmlzQnVmZmVyKHIpfWZ1bmN0aW9uIEhyKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgQXJyYXlCdWZmZXJdIn1mdW5jdGlvbiBlbyhyKXtyZXR1cm4gb2UuY2FsbChyKT09PSJbb2JqZWN0IEZvcm1EYXRhXSJ9ZnVuY3Rpb24gdG8ocil7dmFyIGU7cmV0dXJuIHR5cGVvZiBBcnJheUJ1ZmZlcjwidSImJkFycmF5QnVmZmVyLmlzVmlldz9lPUFycmF5QnVmZmVyLmlzVmlldyhyKTplPXImJnIuYnVmZmVyJiZIcihyLmJ1ZmZlciksZX1mdW5jdGlvbiBybyhyKXtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmcifWZ1bmN0aW9uIG5vKHIpe3JldHVybiB0eXBlb2Ygcj09Im51bWJlciJ9ZnVuY3Rpb24gVnIocil7cmV0dXJuIHIhPT1udWxsJiZ0eXBlb2Ygcj09Im9iamVjdCJ9ZnVuY3Rpb24gamUocil7aWYob2UuY2FsbChyKSE9PSJbb2JqZWN0IE9iamVjdF0iKXJldHVybiExO3ZhciBlPU9iamVjdC5nZXRQcm90b3R5cGVPZihyKTtyZXR1cm4gZT09PW51bGx8fGU9PT1PYmplY3QucHJvdG90eXBlfWZ1bmN0aW9uIGlvKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRGF0ZV0ifWZ1bmN0aW9uIG9vKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRmlsZV0ifWZ1bmN0aW9uIHNvKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgQmxvYl0ifWZ1bmN0aW9uIFdyKHIpe3JldHVybiBvZS5jYWxsKHIpPT09IltvYmplY3QgRnVuY3Rpb25dIn1mdW5jdGlvbiBhbyhyKXtyZXR1cm4gVnIocikmJldyKHIucGlwZSl9ZnVuY3Rpb24gdW8ocil7cmV0dXJuIG9lLmNhbGwocik9PT0iW29iamVjdCBVUkxTZWFyY2hQYXJhbXNdIn1mdW5jdGlvbiBjbyhyKXtyZXR1cm4gci50cmltP3IudHJpbSgpOnIucmVwbGFjZSgvXlxzK3xccyskL2csIiIpfWZ1bmN0aW9uIGZvKCl7cmV0dXJuIHR5cGVvZiBuYXZpZ2F0b3I8InUiJiYobmF2aWdhdG9yLnByb2R1Y3Q9PT0iUmVhY3ROYXRpdmUifHxuYXZpZ2F0b3IucHJvZHVjdD09PSJOYXRpdmVTY3JpcHQifHxuYXZpZ2F0b3IucHJvZHVjdD09PSJOUyIpPyExOnR5cGVvZiB3aW5kb3c8InUiJiZ0eXBlb2YgZG9jdW1lbnQ8InUifWZ1bmN0aW9uIEJ0KHIsZSl7aWYoIShyPT09bnVsbHx8dHlwZW9mIHI+InUiKSlpZih0eXBlb2YgciE9Im9iamVjdCImJihyPVtyXSksTnQocikpZm9yKHZhciB0PTAsbj1yLmxlbmd0aDt0PG47dCsrKWUuY2FsbChudWxsLHJbdF0sdCxyKTtlbHNlIGZvcih2YXIgaSBpbiByKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyLGkpJiZlLmNhbGwobnVsbCxyW2ldLGkscil9ZnVuY3Rpb24ga3QoKXt2YXIgcj17fTtmdW5jdGlvbiBlKGksbyl7amUocltvXSkmJmplKGkpP3Jbb109a3QocltvXSxpKTpqZShpKT9yW29dPWt0KHt9LGkpOk50KGkpP3Jbb109aS5zbGljZSgpOnJbb109aX1mb3IodmFyIHQ9MCxuPWFyZ3VtZW50cy5sZW5ndGg7dDxuO3QrKylCdChhcmd1bWVudHNbdF0sZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gbG8ocixlLHQpe3JldHVybiBCdChlLGZ1bmN0aW9uKGksbyl7dCYmdHlwZW9mIGk9PSJmdW5jdGlvbiI/cltvXT1KaShpLHQpOnJbb109aX0pLHJ9ZnVuY3Rpb24gbW8ocil7cmV0dXJuIHIuY2hhckNvZGVBdCgwKT09PTY1Mjc5JiYocj1yLnNsaWNlKDEpKSxyfXZhciBHPXtpc0FycmF5Ok50LGlzQXJyYXlCdWZmZXI6SHIsaXNCdWZmZXI6WmksaXNGb3JtRGF0YTplbyxpc0FycmF5QnVmZmVyVmlldzp0byxpc1N0cmluZzpybyxpc051bWJlcjpubyxpc09iamVjdDpWcixpc1BsYWluT2JqZWN0OmplLGlzVW5kZWZpbmVkOlV0LGlzRGF0ZTppbyxpc0ZpbGU6b28saXNCbG9iOnNvLGlzRnVuY3Rpb246V3IsaXNTdHJlYW06YW8saXNVUkxTZWFyY2hQYXJhbXM6dW8saXNTdGFuZGFyZEJyb3dzZXJFbnY6Zm8sZm9yRWFjaDpCdCxtZXJnZTprdCxleHRlbmQ6bG8sdHJpbTpjbyxzdHJpcEJPTTptb30sRWU9RztmdW5jdGlvbiBqcihyKXtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHIpLnJlcGxhY2UoLyUzQS9naSwiOiIpLnJlcGxhY2UoLyUyNC9nLCIkIikucmVwbGFjZSgvJTJDL2dpLCIsIikucmVwbGFjZSgvJTIwL2csIisiKS5yZXBsYWNlKC8lNUIvZ2ksIlsiKS5yZXBsYWNlKC8lNUQvZ2ksIl0iKX12YXIgcXI9ZnVuY3Rpb24oZSx0LG4pe2lmKCF0KXJldHVybiBlO3ZhciBpO2lmKG4paT1uKHQpO2Vsc2UgaWYoRWUuaXNVUkxTZWFyY2hQYXJhbXModCkpaT10LnRvU3RyaW5nKCk7ZWxzZXt2YXIgbz1bXTtFZS5mb3JFYWNoKHQsZnVuY3Rpb24odSxmKXt1PT09bnVsbHx8dHlwZW9mIHU+InUifHwoRWUuaXNBcnJheSh1KT9mPWYrIltdIjp1PVt1XSxFZS5mb3JFYWNoKHUsZnVuY3Rpb24oZCl7RWUuaXNEYXRlKGQpP2Q9ZC50b0lTT1N0cmluZygpOkVlLmlzT2JqZWN0KGQpJiYoZD1KU09OLnN0cmluZ2lmeShkKSksby5wdXNoKGpyKGYpKyI9IitqcihkKSl9KSl9KSxpPW8uam9pbigiJiIpfWlmKGkpe3ZhciBzPWUuaW5kZXhPZigiIyIpO3MhPT0tMSYmKGU9ZS5zbGljZSgwLHMpKSxlKz0oZS5pbmRleE9mKCI/Iik9PT0tMT8iPyI6IiYiKStpfXJldHVybiBlfSxobz1HO2Z1bmN0aW9uIHFlKCl7dGhpcy5oYW5kbGVycz1bXX1xZS5wcm90b3R5cGUudXNlPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5oYW5kbGVycy5wdXNoKHtmdWxmaWxsZWQ6ZSxyZWplY3RlZDp0LHN5bmNocm9ub3VzOm4/bi5zeW5jaHJvbm91czohMSxydW5XaGVuOm4/bi5ydW5XaGVuOm51bGx9KSx0aGlzLmhhbmRsZXJzLmxlbmd0aC0xfSxxZS5wcm90b3R5cGUuZWplY3Q9ZnVuY3Rpb24oZSl7dGhpcy5oYW5kbGVyc1tlXSYmKHRoaXMuaGFuZGxlcnNbZV09bnVsbCl9LHFlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUpe2hvLmZvckVhY2godGhpcy5oYW5kbGVycyxmdW5jdGlvbihuKXtuIT09bnVsbCYmZShuKX0pfTt2YXIgcG89cWUseW89Ryxfbz1mdW5jdGlvbihlLHQpe3lvLmZvckVhY2goZSxmdW5jdGlvbihpLG8pe28hPT10JiZvLnRvVXBwZXJDYXNlKCk9PT10LnRvVXBwZXJDYXNlKCkmJihlW3RdPWksZGVsZXRlIGVbb10pfSl9LFhyPWZ1bmN0aW9uKGUsdCxuLGksbyl7cmV0dXJuIGUuY29uZmlnPXQsbiYmKGUuY29kZT1uKSxlLnJlcXVlc3Q9aSxlLnJlc3BvbnNlPW8sZS5pc0F4aW9zRXJyb3I9ITAsZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm57bWVzc2FnZTp0aGlzLm1lc3NhZ2UsbmFtZTp0aGlzLm5hbWUsZGVzY3JpcHRpb246dGhpcy5kZXNjcmlwdGlvbixudW1iZXI6dGhpcy5udW1iZXIsZmlsZU5hbWU6dGhpcy5maWxlTmFtZSxsaW5lTnVtYmVyOnRoaXMubGluZU51bWJlcixjb2x1bW5OdW1iZXI6dGhpcy5jb2x1bW5OdW1iZXIsc3RhY2s6dGhpcy5zdGFjayxjb25maWc6dGhpcy5jb25maWcsY29kZTp0aGlzLmNvZGUsc3RhdHVzOnRoaXMucmVzcG9uc2UmJnRoaXMucmVzcG9uc2Uuc3RhdHVzP3RoaXMucmVzcG9uc2Uuc3RhdHVzOm51bGx9fSxlfSx4bz1YcixZcj1mdW5jdGlvbihlLHQsbixpLG8pe3ZhciBzPW5ldyBFcnJvcihlKTtyZXR1cm4geG8ocyx0LG4saSxvKX0sZ289WXIsYm89ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4uY29uZmlnLnZhbGlkYXRlU3RhdHVzOyFuLnN0YXR1c3x8IWl8fGkobi5zdGF0dXMpP2Uobik6dChnbygiUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAiK24uc3RhdHVzLG4uY29uZmlnLG51bGwsbi5yZXF1ZXN0LG4pKX0sWGU9Ryx2bz1YZS5pc1N0YW5kYXJkQnJvd3NlckVudigpP2Z1bmN0aW9uKCl7cmV0dXJue3dyaXRlOmZ1bmN0aW9uKHQsbixpLG8scyxhKXt2YXIgdT1bXTt1LnB1c2godCsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG4pKSxYZS5pc051bWJlcihpKSYmdS5wdXNoKCJleHBpcmVzPSIrbmV3IERhdGUoaSkudG9HTVRTdHJpbmcoKSksWGUuaXNTdHJpbmcobykmJnUucHVzaCgicGF0aD0iK28pLFhlLmlzU3RyaW5nKHMpJiZ1LnB1c2goImRvbWFpbj0iK3MpLGE9PT0hMCYmdS5wdXNoKCJzZWN1cmUiKSxkb2N1bWVudC5jb29raWU9dS5qb2luKCI7ICIpfSxyZWFkOmZ1bmN0aW9uKHQpe3ZhciBuPWRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCIoXnw7XFxzKikoIit0KyIpPShbXjtdKikiKSk7cmV0dXJuIG4/ZGVjb2RlVVJJQ29tcG9uZW50KG5bM10pOm51bGx9LHJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLndyaXRlKHQsIiIsRGF0ZS5ub3coKS04NjRlNSl9fX0oKTpmdW5jdGlvbigpe3JldHVybnt3cml0ZTpmdW5jdGlvbigpe30scmVhZDpmdW5jdGlvbigpe3JldHVybiBudWxsfSxyZW1vdmU6ZnVuY3Rpb24oKXt9fX0oKSxFbz1mdW5jdGlvbihlKXtyZXR1cm4vXihbYS16XVthLXpcZCtcLS5dKjopP1wvXC8vaS50ZXN0KGUpfSxUbz1mdW5jdGlvbihlLHQpe3JldHVybiB0P2UucmVwbGFjZSgvXC8rJC8sIiIpKyIvIit0LnJlcGxhY2UoL15cLysvLCIiKTplfSxBbz1Fbyx3bz1UbyxSbz1mdW5jdGlvbihlLHQpe3JldHVybiBlJiYhQW8odCk/d28oZSx0KTp0fSxMdD1HLFNvPVsiYWdlIiwiYXV0aG9yaXphdGlvbiIsImNvbnRlbnQtbGVuZ3RoIiwiY29udGVudC10eXBlIiwiZXRhZyIsImV4cGlyZXMiLCJmcm9tIiwiaG9zdCIsImlmLW1vZGlmaWVkLXNpbmNlIiwiaWYtdW5tb2RpZmllZC1zaW5jZSIsImxhc3QtbW9kaWZpZWQiLCJsb2NhdGlvbiIsIm1heC1mb3J3YXJkcyIsInByb3h5LWF1dGhvcml6YXRpb24iLCJyZWZlcmVyIiwicmV0cnktYWZ0ZXIiLCJ1c2VyLWFnZW50Il0sSW89ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbixpLG87cmV0dXJuIGUmJkx0LmZvckVhY2goZS5zcGxpdChgCmApLGZ1bmN0aW9uKGEpe2lmKG89YS5pbmRleE9mKCI6Iiksbj1MdC50cmltKGEuc3Vic3RyKDAsbykpLnRvTG93ZXJDYXNlKCksaT1MdC50cmltKGEuc3Vic3RyKG8rMSkpLG4pe2lmKHRbbl0mJlNvLmluZGV4T2Yobik+PTApcmV0dXJuO249PT0ic2V0LWNvb2tpZSI/dFtuXT0odFtuXT90W25dOltdKS5jb25jYXQoW2ldKTp0W25dPXRbbl0/dFtuXSsiLCAiK2k6aX19KSx0fSxRcj1HLEZvPVFyLmlzU3RhbmRhcmRCcm93c2VyRW52KCk/ZnVuY3Rpb24oKXt2YXIgZT0vKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpLG47ZnVuY3Rpb24gaShvKXt2YXIgcz1vO3JldHVybiBlJiYodC5zZXRBdHRyaWJ1dGUoImhyZWYiLHMpLHM9dC5ocmVmKSx0LnNldEF0dHJpYnV0ZSgiaHJlZiIscykse2hyZWY6dC5ocmVmLHByb3RvY29sOnQucHJvdG9jb2w/dC5wcm90b2NvbC5yZXBsYWNlKC86JC8sIiIpOiIiLGhvc3Q6dC5ob3N0LHNlYXJjaDp0LnNlYXJjaD90LnNlYXJjaC5yZXBsYWNlKC9eXD8vLCIiKToiIixoYXNoOnQuaGFzaD90Lmhhc2gucmVwbGFjZSgvXiMvLCIiKToiIixob3N0bmFtZTp0Lmhvc3RuYW1lLHBvcnQ6dC5wb3J0LHBhdGhuYW1lOnQucGF0aG5hbWUuY2hhckF0KDApPT09Ii8iP3QucGF0aG5hbWU6Ii8iK3QucGF0aG5hbWV9fXJldHVybiBuPWkod2luZG93LmxvY2F0aW9uLmhyZWYpLGZ1bmN0aW9uKHMpe3ZhciBhPVFyLmlzU3RyaW5nKHMpP2kocyk6cztyZXR1cm4gYS5wcm90b2NvbD09PW4ucHJvdG9jb2wmJmEuaG9zdD09PW4uaG9zdH19KCk6ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hMH19KCk7ZnVuY3Rpb24gJHQocil7dGhpcy5tZXNzYWdlPXJ9JHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIkNhbmNlbCIrKHRoaXMubWVzc2FnZT8iOiAiK3RoaXMubWVzc2FnZToiIil9LCR0LnByb3RvdHlwZS5fX0NBTkNFTF9fPSEwO3ZhciBZZT0kdCxRZT1HLFBvPWJvLERvPXZvLE1vPXFyLENvPVJvLE9vPUlvLE5vPUZvLEd0PVlyLFVvPUplLEJvPVllLEtyPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe3ZhciBvPWUuZGF0YSxzPWUuaGVhZGVycyxhPWUucmVzcG9uc2VUeXBlLHU7ZnVuY3Rpb24gZigpe2UuY2FuY2VsVG9rZW4mJmUuY2FuY2VsVG9rZW4udW5zdWJzY3JpYmUodSksZS5zaWduYWwmJmUuc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoImFib3J0Iix1KX1RZS5pc0Zvcm1EYXRhKG8pJiZkZWxldGUgc1siQ29udGVudC1UeXBlIl07dmFyIGM9bmV3IFhNTEh0dHBSZXF1ZXN0O2lmKGUuYXV0aCl7dmFyIGQ9ZS5hdXRoLnVzZXJuYW1lfHwiIix5PWUuYXV0aC5wYXNzd29yZD91bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZS5hdXRoLnBhc3N3b3JkKSk6IiI7cy5BdXRob3JpemF0aW9uPSJCYXNpYyAiK2J0b2EoZCsiOiIreSl9dmFyIF89Q28oZS5iYXNlVVJMLGUudXJsKTtjLm9wZW4oZS5tZXRob2QudG9VcHBlckNhc2UoKSxNbyhfLGUucGFyYW1zLGUucGFyYW1zU2VyaWFsaXplciksITApLGMudGltZW91dD1lLnRpbWVvdXQ7ZnVuY3Rpb24gbSgpe2lmKCEhYyl7dmFyIHY9ImdldEFsbFJlc3BvbnNlSGVhZGVycyJpbiBjP09vKGMuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpOm51bGwsYj0hYXx8YT09PSJ0ZXh0Inx8YT09PSJqc29uIj9jLnJlc3BvbnNlVGV4dDpjLnJlc3BvbnNlLEE9e2RhdGE6YixzdGF0dXM6Yy5zdGF0dXMsc3RhdHVzVGV4dDpjLnN0YXR1c1RleHQsaGVhZGVyczp2LGNvbmZpZzplLHJlcXVlc3Q6Y307UG8oZnVuY3Rpb24oQyl7bihDKSxmKCl9LGZ1bmN0aW9uKEMpe2koQyksZigpfSxBKSxjPW51bGx9fWlmKCJvbmxvYWRlbmQiaW4gYz9jLm9ubG9hZGVuZD1tOmMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7IWN8fGMucmVhZHlTdGF0ZSE9PTR8fGMuc3RhdHVzPT09MCYmIShjLnJlc3BvbnNlVVJMJiZjLnJlc3BvbnNlVVJMLmluZGV4T2YoImZpbGU6Iik9PT0wKXx8c2V0VGltZW91dChtKX0sYy5vbmFib3J0PWZ1bmN0aW9uKCl7IWN8fChpKEd0KCJSZXF1ZXN0IGFib3J0ZWQiLGUsIkVDT05OQUJPUlRFRCIsYykpLGM9bnVsbCl9LGMub25lcnJvcj1mdW5jdGlvbigpe2koR3QoIk5ldHdvcmsgRXJyb3IiLGUsbnVsbCxjKSksYz1udWxsfSxjLm9udGltZW91dD1mdW5jdGlvbigpe3ZhciBiPWUudGltZW91dD8idGltZW91dCBvZiAiK2UudGltZW91dCsibXMgZXhjZWVkZWQiOiJ0aW1lb3V0IGV4Y2VlZGVkIixBPWUudHJhbnNpdGlvbmFsfHxVby50cmFuc2l0aW9uYWw7ZS50aW1lb3V0RXJyb3JNZXNzYWdlJiYoYj1lLnRpbWVvdXRFcnJvck1lc3NhZ2UpLGkoR3QoYixlLEEuY2xhcmlmeVRpbWVvdXRFcnJvcj8iRVRJTUVET1VUIjoiRUNPTk5BQk9SVEVEIixjKSksYz1udWxsfSxRZS5pc1N0YW5kYXJkQnJvd3NlckVudigpKXt2YXIgeD0oZS53aXRoQ3JlZGVudGlhbHN8fE5vKF8pKSYmZS54c3JmQ29va2llTmFtZT9Eby5yZWFkKGUueHNyZkNvb2tpZU5hbWUpOnZvaWQgMDt4JiYoc1tlLnhzcmZIZWFkZXJOYW1lXT14KX0ic2V0UmVxdWVzdEhlYWRlciJpbiBjJiZRZS5mb3JFYWNoKHMsZnVuY3Rpb24oYixBKXt0eXBlb2Ygbz4idSImJkEudG9Mb3dlckNhc2UoKT09PSJjb250ZW50LXR5cGUiP2RlbGV0ZSBzW0FdOmMuc2V0UmVxdWVzdEhlYWRlcihBLGIpfSksUWUuaXNVbmRlZmluZWQoZS53aXRoQ3JlZGVudGlhbHMpfHwoYy53aXRoQ3JlZGVudGlhbHM9ISFlLndpdGhDcmVkZW50aWFscyksYSYmYSE9PSJqc29uIiYmKGMucmVzcG9uc2VUeXBlPWUucmVzcG9uc2VUeXBlKSx0eXBlb2YgZS5vbkRvd25sb2FkUHJvZ3Jlc3M9PSJmdW5jdGlvbiImJmMuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLGUub25Eb3dubG9hZFByb2dyZXNzKSx0eXBlb2YgZS5vblVwbG9hZFByb2dyZXNzPT0iZnVuY3Rpb24iJiZjLnVwbG9hZCYmYy51cGxvYWQuYWRkRXZlbnRMaXN0ZW5lcigicHJvZ3Jlc3MiLGUub25VcGxvYWRQcm9ncmVzcyksKGUuY2FuY2VsVG9rZW58fGUuc2lnbmFsKSYmKHU9ZnVuY3Rpb24odil7IWN8fChpKCF2fHx2JiZ2LnR5cGU/bmV3IEJvKCJjYW5jZWxlZCIpOnYpLGMuYWJvcnQoKSxjPW51bGwpfSxlLmNhbmNlbFRva2VuJiZlLmNhbmNlbFRva2VuLnN1YnNjcmliZSh1KSxlLnNpZ25hbCYmKGUuc2lnbmFsLmFib3J0ZWQ/dSgpOmUuc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoImFib3J0Iix1KSkpLG98fChvPW51bGwpLGMuc2VuZChvKX0pfSxPPUcsSnI9X28sa289WHIsTG89eyJDb250ZW50LVR5cGUiOiJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQifTtmdW5jdGlvbiBacihyLGUpeyFPLmlzVW5kZWZpbmVkKHIpJiZPLmlzVW5kZWZpbmVkKHJbIkNvbnRlbnQtVHlwZSJdKSYmKHJbIkNvbnRlbnQtVHlwZSJdPWUpfWZ1bmN0aW9uICRvKCl7dmFyIHI7cmV0dXJuKHR5cGVvZiBYTUxIdHRwUmVxdWVzdDwidSJ8fHR5cGVvZiBwcm9jZXNzPCJ1IiYmT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpPT09IltvYmplY3QgcHJvY2Vzc10iKSYmKHI9S3IpLHJ9ZnVuY3Rpb24gR28ocixlLHQpe2lmKE8uaXNTdHJpbmcocikpdHJ5e3JldHVybihlfHxKU09OLnBhcnNlKShyKSxPLnRyaW0ocil9Y2F0Y2gobil7aWYobi5uYW1lIT09IlN5bnRheEVycm9yIil0aHJvdyBufXJldHVybih0fHxKU09OLnN0cmluZ2lmeSkocil9dmFyIEtlPXt0cmFuc2l0aW9uYWw6e3NpbGVudEpTT05QYXJzaW5nOiEwLGZvcmNlZEpTT05QYXJzaW5nOiEwLGNsYXJpZnlUaW1lb3V0RXJyb3I6ITF9LGFkYXB0ZXI6JG8oKSx0cmFuc2Zvcm1SZXF1ZXN0OltmdW5jdGlvbihlLHQpe3JldHVybiBKcih0LCJBY2NlcHQiKSxKcih0LCJDb250ZW50LVR5cGUiKSxPLmlzRm9ybURhdGEoZSl8fE8uaXNBcnJheUJ1ZmZlcihlKXx8Ty5pc0J1ZmZlcihlKXx8Ty5pc1N0cmVhbShlKXx8Ty5pc0ZpbGUoZSl8fE8uaXNCbG9iKGUpP2U6Ty5pc0FycmF5QnVmZmVyVmlldyhlKT9lLmJ1ZmZlcjpPLmlzVVJMU2VhcmNoUGFyYW1zKGUpPyhacih0LCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCIpLGUudG9TdHJpbmcoKSk6Ty5pc09iamVjdChlKXx8dCYmdFsiQ29udGVudC1UeXBlIl09PT0iYXBwbGljYXRpb24vanNvbiI/KFpyKHQsImFwcGxpY2F0aW9uL2pzb24iKSxHbyhlKSk6ZX1dLHRyYW5zZm9ybVJlc3BvbnNlOltmdW5jdGlvbihlKXt2YXIgdD10aGlzLnRyYW5zaXRpb25hbHx8S2UudHJhbnNpdGlvbmFsLG49dCYmdC5zaWxlbnRKU09OUGFyc2luZyxpPXQmJnQuZm9yY2VkSlNPTlBhcnNpbmcsbz0hbiYmdGhpcy5yZXNwb25zZVR5cGU9PT0ianNvbiI7aWYob3x8aSYmTy5pc1N0cmluZyhlKSYmZS5sZW5ndGgpdHJ5e3JldHVybiBKU09OLnBhcnNlKGUpfWNhdGNoKHMpe2lmKG8pdGhyb3cgcy5uYW1lPT09IlN5bnRheEVycm9yIj9rbyhzLHRoaXMsIkVfSlNPTl9QQVJTRSIpOnN9cmV0dXJuIGV9XSx0aW1lb3V0OjAseHNyZkNvb2tpZU5hbWU6IlhTUkYtVE9LRU4iLHhzcmZIZWFkZXJOYW1lOiJYLVhTUkYtVE9LRU4iLG1heENvbnRlbnRMZW5ndGg6LTEsbWF4Qm9keUxlbmd0aDotMSx2YWxpZGF0ZVN0YXR1czpmdW5jdGlvbihlKXtyZXR1cm4gZT49MjAwJiZlPDMwMH0saGVhZGVyczp7Y29tbW9uOntBY2NlcHQ6ImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKiJ9fX07Ty5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCJdLGZ1bmN0aW9uKGUpe0tlLmhlYWRlcnNbZV09e319KSxPLmZvckVhY2goWyJwb3N0IiwicHV0IiwicGF0Y2giXSxmdW5jdGlvbihlKXtLZS5oZWFkZXJzW2VdPU8ubWVyZ2UoTG8pfSk7dmFyIEplPUtlLHpvPUcsSG89SmUsVm89ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXRoaXN8fEhvO3JldHVybiB6by5mb3JFYWNoKG4sZnVuY3Rpb24ocyl7ZT1zLmNhbGwoaSxlLHQpfSksZX0sZW49ZnVuY3Rpb24oZSl7cmV0dXJuISEoZSYmZS5fX0NBTkNFTF9fKX0sdG49Ryx6dD1WbyxXbz1lbixqbz1KZSxxbz1ZZTtmdW5jdGlvbiBIdChyKXtpZihyLmNhbmNlbFRva2VuJiZyLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKSxyLnNpZ25hbCYmci5zaWduYWwuYWJvcnRlZCl0aHJvdyBuZXcgcW8oImNhbmNlbGVkIil9dmFyIFhvPWZ1bmN0aW9uKGUpe0h0KGUpLGUuaGVhZGVycz1lLmhlYWRlcnN8fHt9LGUuZGF0YT16dC5jYWxsKGUsZS5kYXRhLGUuaGVhZGVycyxlLnRyYW5zZm9ybVJlcXVlc3QpLGUuaGVhZGVycz10bi5tZXJnZShlLmhlYWRlcnMuY29tbW9ufHx7fSxlLmhlYWRlcnNbZS5tZXRob2RdfHx7fSxlLmhlYWRlcnMpLHRuLmZvckVhY2goWyJkZWxldGUiLCJnZXQiLCJoZWFkIiwicG9zdCIsInB1dCIsInBhdGNoIiwiY29tbW9uIl0sZnVuY3Rpb24oaSl7ZGVsZXRlIGUuaGVhZGVyc1tpXX0pO3ZhciB0PWUuYWRhcHRlcnx8am8uYWRhcHRlcjtyZXR1cm4gdChlKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBIdChlKSxpLmRhdGE9enQuY2FsbChlLGkuZGF0YSxpLmhlYWRlcnMsZS50cmFuc2Zvcm1SZXNwb25zZSksaX0sZnVuY3Rpb24oaSl7cmV0dXJuIFdvKGkpfHwoSHQoZSksaSYmaS5yZXNwb25zZSYmKGkucmVzcG9uc2UuZGF0YT16dC5jYWxsKGUsaS5yZXNwb25zZS5kYXRhLGkucmVzcG9uc2UuaGVhZGVycyxlLnRyYW5zZm9ybVJlc3BvbnNlKSkpLFByb21pc2UucmVqZWN0KGkpfSl9LHo9Ryxybj1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49e307ZnVuY3Rpb24gaShjLGQpe3JldHVybiB6LmlzUGxhaW5PYmplY3QoYykmJnouaXNQbGFpbk9iamVjdChkKT96Lm1lcmdlKGMsZCk6ei5pc1BsYWluT2JqZWN0KGQpP3oubWVyZ2Uoe30sZCk6ei5pc0FycmF5KGQpP2Quc2xpY2UoKTpkfWZ1bmN0aW9uIG8oYyl7aWYoei5pc1VuZGVmaW5lZCh0W2NdKSl7aWYoIXouaXNVbmRlZmluZWQoZVtjXSkpcmV0dXJuIGkodm9pZCAwLGVbY10pfWVsc2UgcmV0dXJuIGkoZVtjXSx0W2NdKX1mdW5jdGlvbiBzKGMpe2lmKCF6LmlzVW5kZWZpbmVkKHRbY10pKXJldHVybiBpKHZvaWQgMCx0W2NdKX1mdW5jdGlvbiBhKGMpe2lmKHouaXNVbmRlZmluZWQodFtjXSkpe2lmKCF6LmlzVW5kZWZpbmVkKGVbY10pKXJldHVybiBpKHZvaWQgMCxlW2NdKX1lbHNlIHJldHVybiBpKHZvaWQgMCx0W2NdKX1mdW5jdGlvbiB1KGMpe2lmKGMgaW4gdClyZXR1cm4gaShlW2NdLHRbY10pO2lmKGMgaW4gZSlyZXR1cm4gaSh2b2lkIDAsZVtjXSl9dmFyIGY9e3VybDpzLG1ldGhvZDpzLGRhdGE6cyxiYXNlVVJMOmEsdHJhbnNmb3JtUmVxdWVzdDphLHRyYW5zZm9ybVJlc3BvbnNlOmEscGFyYW1zU2VyaWFsaXplcjphLHRpbWVvdXQ6YSx0aW1lb3V0TWVzc2FnZTphLHdpdGhDcmVkZW50aWFsczphLGFkYXB0ZXI6YSxyZXNwb25zZVR5cGU6YSx4c3JmQ29va2llTmFtZTphLHhzcmZIZWFkZXJOYW1lOmEsb25VcGxvYWRQcm9ncmVzczphLG9uRG93bmxvYWRQcm9ncmVzczphLGRlY29tcHJlc3M6YSxtYXhDb250ZW50TGVuZ3RoOmEsbWF4Qm9keUxlbmd0aDphLHRyYW5zcG9ydDphLGh0dHBBZ2VudDphLGh0dHBzQWdlbnQ6YSxjYW5jZWxUb2tlbjphLHNvY2tldFBhdGg6YSxyZXNwb25zZUVuY29kaW5nOmEsdmFsaWRhdGVTdGF0dXM6dX07cmV0dXJuIHouZm9yRWFjaChPYmplY3Qua2V5cyhlKS5jb25jYXQoT2JqZWN0LmtleXModCkpLGZ1bmN0aW9uKGQpe3ZhciB5PWZbZF18fG8sXz15KGQpO3ouaXNVbmRlZmluZWQoXykmJnkhPT11fHwobltkXT1fKX0pLG59LG5uPXt2ZXJzaW9uOiIwLjI1LjAifSxZbz1ubi52ZXJzaW9uLFZ0PXt9O1sib2JqZWN0IiwiYm9vbGVhbiIsIm51bWJlciIsImZ1bmN0aW9uIiwic3RyaW5nIiwic3ltYm9sIl0uZm9yRWFjaChmdW5jdGlvbihyLGUpe1Z0W3JdPWZ1bmN0aW9uKG4pe3JldHVybiB0eXBlb2Ygbj09PXJ8fCJhIisoZTwxPyJuICI6IiAiKStyfX0pO3ZhciBvbj17fTtWdC50cmFuc2l0aW9uYWw9ZnVuY3Rpb24oZSx0LG4pe2Z1bmN0aW9uIGkobyxzKXtyZXR1cm4iW0F4aW9zIHYiK1lvKyJdIFRyYW5zaXRpb25hbCBvcHRpb24gJyIrbysiJyIrcysobj8iLiAiK246IiIpfXJldHVybiBmdW5jdGlvbihvLHMsYSl7aWYoZT09PSExKXRocm93IG5ldyBFcnJvcihpKHMsIiBoYXMgYmVlbiByZW1vdmVkIisodD8iIGluICIrdDoiIikpKTtyZXR1cm4gdCYmIW9uW3NdJiYob25bc109ITAsY29uc29sZS53YXJuKGkocywiIGhhcyBiZWVuIGRlcHJlY2F0ZWQgc2luY2UgdiIrdCsiIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIG5lYXIgZnV0dXJlIikpKSxlP2UobyxzLGEpOiEwfX07ZnVuY3Rpb24gUW8ocixlLHQpe2lmKHR5cGVvZiByIT0ib2JqZWN0Iil0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb25zIG11c3QgYmUgYW4gb2JqZWN0Iik7Zm9yKHZhciBuPU9iamVjdC5rZXlzKHIpLGk9bi5sZW5ndGg7aS0tID4wOyl7dmFyIG89bltpXSxzPWVbb107aWYocyl7dmFyIGE9cltvXSx1PWE9PT12b2lkIDB8fHMoYSxvLHIpO2lmKHUhPT0hMCl0aHJvdyBuZXcgVHlwZUVycm9yKCJvcHRpb24gIitvKyIgbXVzdCBiZSAiK3UpO2NvbnRpbnVlfWlmKHQhPT0hMCl0aHJvdyBFcnJvcigiVW5rbm93biBvcHRpb24gIitvKX19dmFyIEtvPXthc3NlcnRPcHRpb25zOlFvLHZhbGlkYXRvcnM6VnR9LHNuPUcsSm89cXIsYW49cG8sdW49WG8sWmU9cm4sY249S28sVGU9Y24udmFsaWRhdG9ycztmdW5jdGlvbiBNZShyKXt0aGlzLmRlZmF1bHRzPXIsdGhpcy5pbnRlcmNlcHRvcnM9e3JlcXVlc3Q6bmV3IGFuLHJlc3BvbnNlOm5ldyBhbn19TWUucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXtpZih0eXBlb2YgZT09InN0cmluZyI/KHQ9dHx8e30sdC51cmw9ZSk6dD1lfHx7fSwhdC51cmwpdGhyb3cgbmV3IEVycm9yKCJQcm92aWRlZCBjb25maWcgdXJsIGlzIG5vdCB2YWxpZCIpO3Q9WmUodGhpcy5kZWZhdWx0cyx0KSx0Lm1ldGhvZD90Lm1ldGhvZD10Lm1ldGhvZC50b0xvd2VyQ2FzZSgpOnRoaXMuZGVmYXVsdHMubWV0aG9kP3QubWV0aG9kPXRoaXMuZGVmYXVsdHMubWV0aG9kLnRvTG93ZXJDYXNlKCk6dC5tZXRob2Q9ImdldCI7dmFyIG49dC50cmFuc2l0aW9uYWw7biE9PXZvaWQgMCYmY24uYXNzZXJ0T3B0aW9ucyhuLHtzaWxlbnRKU09OUGFyc2luZzpUZS50cmFuc2l0aW9uYWwoVGUuYm9vbGVhbiksZm9yY2VkSlNPTlBhcnNpbmc6VGUudHJhbnNpdGlvbmFsKFRlLmJvb2xlYW4pLGNsYXJpZnlUaW1lb3V0RXJyb3I6VGUudHJhbnNpdGlvbmFsKFRlLmJvb2xlYW4pfSwhMSk7dmFyIGk9W10sbz0hMDt0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24oXyl7dHlwZW9mIF8ucnVuV2hlbj09ImZ1bmN0aW9uIiYmXy5ydW5XaGVuKHQpPT09ITF8fChvPW8mJl8uc3luY2hyb25vdXMsaS51bnNoaWZ0KF8uZnVsZmlsbGVkLF8ucmVqZWN0ZWQpKX0pO3ZhciBzPVtdO3RoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24oXyl7cy5wdXNoKF8uZnVsZmlsbGVkLF8ucmVqZWN0ZWQpfSk7dmFyIGE7aWYoIW8pe3ZhciB1PVt1bix2b2lkIDBdO2ZvcihBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseSh1LGkpLHU9dS5jb25jYXQocyksYT1Qcm9taXNlLnJlc29sdmUodCk7dS5sZW5ndGg7KWE9YS50aGVuKHUuc2hpZnQoKSx1LnNoaWZ0KCkpO3JldHVybiBhfWZvcih2YXIgZj10O2kubGVuZ3RoOyl7dmFyIGM9aS5zaGlmdCgpLGQ9aS5zaGlmdCgpO3RyeXtmPWMoZil9Y2F0Y2goeSl7ZCh5KTticmVha319dHJ5e2E9dW4oZil9Y2F0Y2goeSl7cmV0dXJuIFByb21pc2UucmVqZWN0KHkpfWZvcig7cy5sZW5ndGg7KWE9YS50aGVuKHMuc2hpZnQoKSxzLnNoaWZ0KCkpO3JldHVybiBhfSxNZS5wcm90b3R5cGUuZ2V0VXJpPWZ1bmN0aW9uKGUpe2lmKCFlLnVybCl0aHJvdyBuZXcgRXJyb3IoIlByb3ZpZGVkIGNvbmZpZyB1cmwgaXMgbm90IHZhbGlkIik7cmV0dXJuIGU9WmUodGhpcy5kZWZhdWx0cyxlKSxKbyhlLnVybCxlLnBhcmFtcyxlLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cPy8sIiIpfSxzbi5mb3JFYWNoKFsiZGVsZXRlIiwiZ2V0IiwiaGVhZCIsIm9wdGlvbnMiXSxmdW5jdGlvbihlKXtNZS5wcm90b3R5cGVbZV09ZnVuY3Rpb24odCxuKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFplKG58fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOihufHx7fSkuZGF0YX0pKX19KSxzbi5mb3JFYWNoKFsicG9zdCIsInB1dCIsInBhdGNoIl0sZnVuY3Rpb24oZSl7TWUucHJvdG90eXBlW2VdPWZ1bmN0aW9uKHQsbixpKXtyZXR1cm4gdGhpcy5yZXF1ZXN0KFplKGl8fHt9LHttZXRob2Q6ZSx1cmw6dCxkYXRhOm59KSl9fSk7dmFyIFpvPU1lLGVzPVllO2Z1bmN0aW9uIEFlKHIpe2lmKHR5cGVvZiByIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImV4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4iKTt2YXIgZTt0aGlzLnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24oaSl7ZT1pfSk7dmFyIHQ9dGhpczt0aGlzLnByb21pc2UudGhlbihmdW5jdGlvbihuKXtpZighIXQuX2xpc3RlbmVycyl7dmFyIGksbz10Ll9saXN0ZW5lcnMubGVuZ3RoO2ZvcihpPTA7aTxvO2krKyl0Ll9saXN0ZW5lcnNbaV0obik7dC5fbGlzdGVuZXJzPW51bGx9fSksdGhpcy5wcm9taXNlLnRoZW49ZnVuY3Rpb24obil7dmFyIGksbz1uZXcgUHJvbWlzZShmdW5jdGlvbihzKXt0LnN1YnNjcmliZShzKSxpPXN9KS50aGVuKG4pO3JldHVybiBvLmNhbmNlbD1mdW5jdGlvbigpe3QudW5zdWJzY3JpYmUoaSl9LG99LHIoZnVuY3Rpb24oaSl7dC5yZWFzb258fCh0LnJlYXNvbj1uZXcgZXMoaSksZSh0LnJlYXNvbikpfSl9QWUucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQ9ZnVuY3Rpb24oKXtpZih0aGlzLnJlYXNvbil0aHJvdyB0aGlzLnJlYXNvbn0sQWUucHJvdG90eXBlLnN1YnNjcmliZT1mdW5jdGlvbihlKXtpZih0aGlzLnJlYXNvbil7ZSh0aGlzLnJlYXNvbik7cmV0dXJufXRoaXMuX2xpc3RlbmVycz90aGlzLl9saXN0ZW5lcnMucHVzaChlKTp0aGlzLl9saXN0ZW5lcnM9W2VdfSxBZS5wcm90b3R5cGUudW5zdWJzY3JpYmU9ZnVuY3Rpb24oZSl7aWYoISF0aGlzLl9saXN0ZW5lcnMpe3ZhciB0PXRoaXMuX2xpc3RlbmVycy5pbmRleE9mKGUpO3QhPT0tMSYmdGhpcy5fbGlzdGVuZXJzLnNwbGljZSh0LDEpfX0sQWUuc291cmNlPWZ1bmN0aW9uKCl7dmFyIGUsdD1uZXcgQWUoZnVuY3Rpb24oaSl7ZT1pfSk7cmV0dXJue3Rva2VuOnQsY2FuY2VsOmV9fTt2YXIgdHM9QWUscnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiBlLmFwcGx5KG51bGwsbil9fSxucz1HLGlzPWZ1bmN0aW9uKGUpe3JldHVybiBucy5pc09iamVjdChlKSYmZS5pc0F4aW9zRXJyb3I9PT0hMH0sZm49Ryxvcz16cixldD1abyxzcz1ybixhcz1KZTtmdW5jdGlvbiBsbihyKXt2YXIgZT1uZXcgZXQociksdD1vcyhldC5wcm90b3R5cGUucmVxdWVzdCxlKTtyZXR1cm4gZm4uZXh0ZW5kKHQsZXQucHJvdG90eXBlLGUpLGZuLmV4dGVuZCh0LGUpLHQuY3JlYXRlPWZ1bmN0aW9uKGkpe3JldHVybiBsbihzcyhyLGkpKX0sdH12YXIgSj1sbihhcyk7Si5BeGlvcz1ldCxKLkNhbmNlbD1ZZSxKLkNhbmNlbFRva2VuPXRzLEouaXNDYW5jZWw9ZW4sSi5WRVJTSU9OPW5uLnZlcnNpb24sSi5hbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIFByb21pc2UuYWxsKGUpfSxKLnNwcmVhZD1ycyxKLmlzQXhpb3NFcnJvcj1pcyxPdC5leHBvcnRzPUosT3QuZXhwb3J0cy5kZWZhdWx0PUo7dmFyIHVzPU90LmV4cG9ydHM7Y2xhc3MgVHtpc0VtcHR5KCl7cmV0dXJuIXRoaXMuaXNQcmVzZW50KCl9c3RhdGljIG9mKGUpe2lmKGUhPW51bGwpcmV0dXJuIG5ldyBkbihlKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgcGFzc2VkIHZhbHVlIHdhcyBudWxsIG9yIHVuZGVmaW5lZC4iKX1zdGF0aWMgb2ZOb25OdWxsKGUpe3JldHVybiBULm9mKGUpfXN0YXRpYyBvZk51bGxhYmxlKGUpe3JldHVybiBlIT1udWxsP25ldyBkbihlKTpuZXcgbW59c3RhdGljIGVtcHR5KCl7cmV0dXJuIG5ldyBtbn1zdGF0aWMgZnJvbShlKXtzd2l0Y2goZS5raW5kKXtjYXNlInByZXNlbnQiOnJldHVybiBULm9mKGUudmFsdWUpO2Nhc2UiZW1wdHkiOnJldHVybiBULmVtcHR5KCk7ZGVmYXVsdDp0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgcGFzc2VkIHZhbHVlIHdhcyBub3QgYW4gT3B0aW9uIHR5cGUuIil9fX1jbGFzcyBkbiBleHRlbmRzIFR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnBheWxvYWQ9ZX1pc1ByZXNlbnQoKXtyZXR1cm4hMH1nZXQoKXtyZXR1cm4gdGhpcy5wYXlsb2FkfWlmUHJlc2VudChlKXtlKHRoaXMucGF5bG9hZCl9aWZQcmVzZW50T3JFbHNlKGUsdCl7ZSh0aGlzLnBheWxvYWQpfWZpbHRlcihlKXtyZXR1cm4gZSh0aGlzLnBheWxvYWQpP3RoaXM6VC5lbXB0eSgpfW1hcChlKXtjb25zdCB0PWUodGhpcy5wYXlsb2FkKTtyZXR1cm4gVC5vZk51bGxhYmxlKHQpfWZsYXRNYXAoZSl7cmV0dXJuIGUodGhpcy5wYXlsb2FkKX1vcihlKXtyZXR1cm4gdGhpc31vckVsc2UoZSl7cmV0dXJuIHRoaXMucGF5bG9hZH1vckVsc2VHZXQoZSl7cmV0dXJuIHRoaXMucGF5bG9hZH1vckVsc2VUaHJvdyhlKXtyZXR1cm4gdGhpcy5wYXlsb2FkfW9yTnVsbCgpe3JldHVybiB0aGlzLnBheWxvYWR9b3JVbmRlZmluZWQoKXtyZXR1cm4gdGhpcy5wYXlsb2FkfXRvT3B0aW9uKCl7cmV0dXJue2tpbmQ6InByZXNlbnQiLHZhbHVlOnRoaXMucGF5bG9hZH19bWF0Y2hlcyhlKXtyZXR1cm4gZS5wcmVzZW50KHRoaXMucGF5bG9hZCl9dG9KU09OKGUpe3JldHVybiB0aGlzLnBheWxvYWR9fWNsYXNzIG1uIGV4dGVuZHMgVHtpc1ByZXNlbnQoKXtyZXR1cm4hMX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCl9Z2V0KCl7dGhyb3cgbmV3IFR5cGVFcnJvcigiVGhlIG9wdGlvbmFsIGlzIG5vdCBwcmVzZW50LiIpfWlmUHJlc2VudChlKXt9aWZQcmVzZW50T3JFbHNlKGUsdCl7dCgpfWZpbHRlcihlKXtyZXR1cm4gdGhpc31tYXAoZSl7cmV0dXJuIFQuZW1wdHkoKX1mbGF0TWFwKGUpe3JldHVybiBULmVtcHR5KCl9b3IoZSl7cmV0dXJuIGUoKX1vckVsc2UoZSl7cmV0dXJuIGV9b3JFbHNlR2V0KGUpe3JldHVybiB0aGlzLm9yRWxzZShlKCkpfW9yRWxzZVRocm93KGUpe3Rocm93IGUoKX1vck51bGwoKXtyZXR1cm4gbnVsbH1vclVuZGVmaW5lZCgpe310b09wdGlvbigpe3JldHVybntraW5kOiJlbXB0eSJ9fW1hdGNoZXMoZSl7cmV0dXJuIGUuZW1wdHkoKX10b0pTT04oZSl7cmV0dXJuIG51bGx9fWNvbnN0IGNzPSIyLjAuMCI7ZnVuY3Rpb24gZnMocil7Z2xvYmFsVGhpcy5fdm9uYWdlTWVkaWFQcm9jZXNzb3JNZXRhZGF0YT1yfWZ1bmN0aW9uIGxzKCl7cmV0dXJuIGdsb2JhbFRoaXMuX3ZvbmFnZU1lZGlhUHJvY2Vzc29yTWV0YWRhdGF9Y2xhc3MgSHtjb25zdHJ1Y3Rvcigpe2NvbnN0IGU9bHMoKTt0aGlzLl9yZXBvcnQ9e2FjdGlvbjpULmVtcHR5KCksYXBwbGljYXRpb25JZDpULm9mTnVsbGFibGUoZSE9PXZvaWQgMCYmZSE9bnVsbD9lLmFwcElkOm51bGwpLHRpbWVzdGFtcDpEYXRlLm5vdygpLGZwczpULmVtcHR5KCksZnJhbWVzVHJhbnNmb3JtZWQ6VC5lbXB0eSgpLGd1aWQ6VC5lbXB0eSgpLGhpZ2hlc3RGcmFtZVRyYW5zZm9ybUNwdTpULmVtcHR5KCksbWVzc2FnZTpULmVtcHR5KCksc291cmNlOlQub2ZOdWxsYWJsZShlIT09dm9pZCAwJiZlIT1udWxsP2Uuc291cmNlVHlwZTpudWxsKSx0cmFuc2Zvcm1lZEZwczpULmVtcHR5KCksdHJhbnNmb3JtZXJUeXBlOlQuZW1wdHkoKSx2YXJpYXRpb246VC5lbXB0eSgpLHZpZGVvSGVpZ2h0OlQuZW1wdHkoKSx2aWRlb1dpZHRoOlQuZW1wdHkoKSx2ZXJzaW9uOmNzLGVycm9yOlQuZW1wdHkoKSxwcm94eVVybDpULm9mTnVsbGFibGUoZSE9PXZvaWQgMCYmZSE9bnVsbD9lLnByb3h5VXJsOm51bGwpfX1hY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5hY3Rpb249VC5vZk51bGxhYmxlKGUpLHRoaXN9ZnJhbWVzVHJhbnNmb3JtZWQoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcmFtZXNUcmFuc2Zvcm1lZD1ULm9mTnVsbGFibGUoZSksdGhpc31mcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5mcHM9VC5vZk51bGxhYmxlKGUpLHRoaXN9Z3VpZChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lmd1aWQ9VC5vZk51bGxhYmxlKGUpLHRoaXN9bWVzc2FnZShlKXtyZXR1cm4gdGhpcy5fcmVwb3J0Lm1lc3NhZ2U9VC5vZk51bGxhYmxlKGUpLHRoaXN9dHJhbnNmb3JtZWRGcHMoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lZEZwcz1ULm9mTnVsbGFibGUoZSksdGhpc310cmFuc2Zvcm1lclR5cGUoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC50cmFuc2Zvcm1lclR5cGU9VC5vZk51bGxhYmxlKGUpLHRoaXN9dmFyaWF0aW9uKGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmFyaWF0aW9uPVQub2ZOdWxsYWJsZShlKSx0aGlzfXZpZGVvSGVpZ2h0KGUpe3JldHVybiB0aGlzLl9yZXBvcnQudmlkZW9IZWlnaHQ9VC5vZk51bGxhYmxlKGUpLHRoaXN9dmlkZW9XaWR0aChlKXtyZXR1cm4gdGhpcy5fcmVwb3J0LnZpZGVvV2lkdGg9VC5vZk51bGxhYmxlKGUpLHRoaXN9ZXJyb3IoZSl7cmV0dXJuIHRoaXMuX3JlcG9ydC5lcnJvcj1ULm9mTnVsbGFibGUoZSksdGhpc31idWlsZCgpe3JldHVybiB0aGlzLl9yZXBvcnR9fWNvbnN0IGRzPXI9PkpTT04uc3RyaW5naWZ5KHIsKGUsdCk9PntpZih0IT09bnVsbClyZXR1cm4gdH0pO2NsYXNzIFZ7c3RhdGljIHJlcG9ydChlKXtyZXR1cm4gbmV3IFByb21pc2UoKHQsbik9PntpZihlLmFwcGxpY2F0aW9uSWQuaXNFbXB0eSgpfHxlLnNvdXJjZS5pc0VtcHR5KCkpe3QoInN1Y2Nlc3MiKTtyZXR1cm59bGV0IGk9dXMuY3JlYXRlKCksbz17dGltZW91dDoxZTQsdGltZW91dEVycm9yTWVzc2FnZToiUmVxdWVzdCB0aW1lb3V0IixoZWFkZXJzOnsiQ29udGVudC1UeXBlIjoiYXBwbGljYXRpb24vanNvbiJ9fSxzPSJobGcudG9rYm94LmNvbS9wcm9kL2xvZ2dpbmcvdmNwX3dlYnJ0YyI7aWYoZS5wcm94eVVybC5pc0VtcHR5KCkpcz0iaHR0cHM6Ly8iK3M7ZWxzZXtsZXQgYTtlLnByb3h5VXJsLmdldCgpLnNsaWNlKGUucHJveHlVcmwuZ2V0KCkubGVuZ3RoLTEpIT09Ii8iP2E9ZS5wcm94eVVybC5nZXQoKSsiLyI6YT1lLnByb3h5VXJsLmdldCgpLHM9YStzfWkucG9zdChzLGRzKGUpLG8pLnRoZW4oYT0+e2NvbnNvbGUubG9nKGEpLHQoInN1Y2Nlc3MiKX0pLmNhdGNoKGE9Pntjb25zb2xlLmxvZyhhKSxuKGEpfSl9KX19dmFyIHR0LG1zPW5ldyBVaW50OEFycmF5KDE2KTtmdW5jdGlvbiBocygpe2lmKCF0dCYmKHR0PXR5cGVvZiBjcnlwdG88InUiJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKXx8dHlwZW9mIG1zQ3J5cHRvPCJ1IiYmdHlwZW9mIG1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcz09ImZ1bmN0aW9uIiYmbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pLCF0dCkpdGhyb3cgbmV3IEVycm9yKCJjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKCkgbm90IHN1cHBvcnRlZC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS91dWlkanMvdXVpZCNnZXRyYW5kb212YWx1ZXMtbm90LXN1cHBvcnRlZCIpO3JldHVybiB0dChtcyl9dmFyIHBzPS9eKD86WzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzEtNV1bMC05YS1mXXszfS1bODlhYl1bMC05YS1mXXszfS1bMC05YS1mXXsxMn18MDAwMDAwMDAtMDAwMC0wMDAwLTAwMDAtMDAwMDAwMDAwMDAwKSQvaTtmdW5jdGlvbiB5cyhyKXtyZXR1cm4gdHlwZW9mIHI9PSJzdHJpbmciJiZwcy50ZXN0KHIpfWZvcih2YXIgTj1bXSxXdD0wO1d0PDI1NjsrK1d0KU4ucHVzaCgoV3QrMjU2KS50b1N0cmluZygxNikuc3Vic3RyKDEpKTtmdW5jdGlvbiBfcyhyKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJmFyZ3VtZW50c1sxXSE9PXZvaWQgMD9hcmd1bWVudHNbMV06MCx0PShOW3JbZSswXV0rTltyW2UrMV1dK05bcltlKzJdXStOW3JbZSszXV0rIi0iK05bcltlKzRdXStOW3JbZSs1XV0rIi0iK05bcltlKzZdXStOW3JbZSs3XV0rIi0iK05bcltlKzhdXStOW3JbZSs5XV0rIi0iK05bcltlKzEwXV0rTltyW2UrMTFdXStOW3JbZSsxMl1dK05bcltlKzEzXV0rTltyW2UrMTRdXStOW3JbZSsxNV1dKS50b0xvd2VyQ2FzZSgpO2lmKCF5cyh0KSl0aHJvdyBUeXBlRXJyb3IoIlN0cmluZ2lmaWVkIFVVSUQgaXMgaW52YWxpZCIpO3JldHVybiB0fWZ1bmN0aW9uIGhuKHIsZSx0KXtyPXJ8fHt9O3ZhciBuPXIucmFuZG9tfHwoci5ybmd8fGhzKSgpO2lmKG5bNl09bls2XSYxNXw2NCxuWzhdPW5bOF0mNjN8MTI4LGUpe3Q9dHx8MDtmb3IodmFyIGk9MDtpPDE2OysraSllW3QraV09bltpXTtyZXR1cm4gZX1yZXR1cm4gX3Mobil9Y29uc3Qgc2U9bmV3IFdlYWtNYXAscnQ9bmV3IFdlYWtNYXAsQ2U9bmV3IFdlYWtNYXAsanQ9U3ltYm9sKCJhbnlQcm9kdWNlciIpLHBuPVByb21pc2UucmVzb2x2ZSgpLG50PVN5bWJvbCgibGlzdGVuZXJBZGRlZCIpLGl0PVN5bWJvbCgibGlzdGVuZXJSZW1vdmVkIik7bGV0IHF0PSExO2Z1bmN0aW9uIHdlKHIpe2lmKHR5cGVvZiByIT0ic3RyaW5nIiYmdHlwZW9mIHIhPSJzeW1ib2wiKXRocm93IG5ldyBUeXBlRXJyb3IoImV2ZW50TmFtZSBtdXN0IGJlIGEgc3RyaW5nIG9yIGEgc3ltYm9sIil9ZnVuY3Rpb24gb3Qocil7aWYodHlwZW9mIHIhPSJmdW5jdGlvbiIpdGhyb3cgbmV3IFR5cGVFcnJvcigibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uIil9ZnVuY3Rpb24gUmUocixlKXtjb25zdCB0PXJ0LmdldChyKTtyZXR1cm4gdC5oYXMoZSl8fHQuc2V0KGUsbmV3IFNldCksdC5nZXQoZSl9ZnVuY3Rpb24gT2UocixlKXtjb25zdCB0PXR5cGVvZiBlPT0ic3RyaW5nInx8dHlwZW9mIGU9PSJzeW1ib2wiP2U6anQsbj1DZS5nZXQocik7cmV0dXJuIG4uaGFzKHQpfHxuLnNldCh0LG5ldyBTZXQpLG4uZ2V0KHQpfWZ1bmN0aW9uIHhzKHIsZSx0KXtjb25zdCBuPUNlLmdldChyKTtpZihuLmhhcyhlKSlmb3IoY29uc3QgaSBvZiBuLmdldChlKSlpLmVucXVldWUodCk7aWYobi5oYXMoanQpKXtjb25zdCBpPVByb21pc2UuYWxsKFtlLHRdKTtmb3IoY29uc3QgbyBvZiBuLmdldChqdCkpby5lbnF1ZXVlKGkpfX1mdW5jdGlvbiB5bihyLGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0hMSxuPSgpPT57fSxpPVtdO2NvbnN0IG89e2VucXVldWUocyl7aS5wdXNoKHMpLG4oKX0sZmluaXNoKCl7dD0hMCxuKCl9fTtmb3IoY29uc3QgcyBvZiBlKU9lKHIscykuYWRkKG8pO3JldHVybnthc3luYyBuZXh0KCl7cmV0dXJuIGk/aS5sZW5ndGg9PT0wP3Q/KGk9dm9pZCAwLHRoaXMubmV4dCgpKTooYXdhaXQgbmV3IFByb21pc2Uocz0+e249c30pLHRoaXMubmV4dCgpKTp7ZG9uZTohMSx2YWx1ZTphd2FpdCBpLnNoaWZ0KCl9Ontkb25lOiEwfX0sYXN5bmMgcmV0dXJuKHMpe2k9dm9pZCAwO2Zvcihjb25zdCBhIG9mIGUpT2UocixhKS5kZWxldGUobyk7cmV0dXJuIG4oKSxhcmd1bWVudHMubGVuZ3RoPjA/e2RvbmU6ITAsdmFsdWU6YXdhaXQgc306e2RvbmU6ITB9fSxbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCl7cmV0dXJuIHRoaXN9fX1mdW5jdGlvbiBfbihyKXtpZihyPT09dm9pZCAwKXJldHVybiB4bjtpZighQXJyYXkuaXNBcnJheShyKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5ncyIpO2Zvcihjb25zdCBlIG9mIHIpaWYoIXhuLmluY2x1ZGVzKGUpKXRocm93IHR5cGVvZiBlIT0ic3RyaW5nIj9uZXcgVHlwZUVycm9yKCJgbWV0aG9kTmFtZXNgIGVsZW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpOm5ldyBFcnJvcihgJHtlfSBpcyBub3QgRW1pdHRlcnkgbWV0aG9kYCk7cmV0dXJuIHJ9Y29uc3QgWHQ9cj0+cj09PW50fHxyPT09aXQ7Y2xhc3MgaGV7c3RhdGljIG1peGluKGUsdCl7cmV0dXJuIHQ9X24odCksbj0+e2lmKHR5cGVvZiBuIT0iZnVuY3Rpb24iKXRocm93IG5ldyBUeXBlRXJyb3IoImB0YXJnZXRgIG11c3QgYmUgZnVuY3Rpb24iKTtmb3IoY29uc3QgcyBvZiB0KWlmKG4ucHJvdG90eXBlW3NdIT09dm9pZCAwKXRocm93IG5ldyBFcnJvcihgVGhlIHByb3BlcnR5IFxgJHtzfVxgIGFscmVhZHkgZXhpc3RzIG9uIFxgdGFyZ2V0XGBgKTtmdW5jdGlvbiBpKCl7cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLGUse2VudW1lcmFibGU6ITEsdmFsdWU6bmV3IGhlfSksdGhpc1tlXX1PYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsZSx7ZW51bWVyYWJsZTohMSxnZXQ6aX0pO2NvbnN0IG89cz0+ZnVuY3Rpb24oLi4uYSl7cmV0dXJuIHRoaXNbZV1bc10oLi4uYSl9O2Zvcihjb25zdCBzIG9mIHQpT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLHMse2VudW1lcmFibGU6ITEsdmFsdWU6byhzKX0pO3JldHVybiBufX1zdGF0aWMgZ2V0IGlzRGVidWdFbmFibGVkKCl7aWYodHlwZW9mIHByb2Nlc3MhPSJvYmplY3QiKXJldHVybiBxdDtjb25zdHtlbnY6ZX09cHJvY2Vzc3x8e2Vudjp7fX07cmV0dXJuIGUuREVCVUc9PT0iZW1pdHRlcnkifHxlLkRFQlVHPT09IioifHxxdH1zdGF0aWMgc2V0IGlzRGVidWdFbmFibGVkKGUpe3F0PWV9Y29uc3RydWN0b3IoZT17fSl7c2Uuc2V0KHRoaXMsbmV3IFNldCkscnQuc2V0KHRoaXMsbmV3IE1hcCksQ2Uuc2V0KHRoaXMsbmV3IE1hcCksdGhpcy5kZWJ1Zz1lLmRlYnVnfHx7fSx0aGlzLmRlYnVnLmVuYWJsZWQ9PT12b2lkIDAmJih0aGlzLmRlYnVnLmVuYWJsZWQ9ITEpLHRoaXMuZGVidWcubG9nZ2VyfHwodGhpcy5kZWJ1Zy5sb2dnZXI9KHQsbixpLG8pPT57bz1KU09OLnN0cmluZ2lmeShvKSx0eXBlb2YgaT09InN5bWJvbCImJihpPWkudG9TdHJpbmcoKSk7Y29uc3Qgcz1uZXcgRGF0ZSxhPWAke3MuZ2V0SG91cnMoKX06JHtzLmdldE1pbnV0ZXMoKX06JHtzLmdldFNlY29uZHMoKX0uJHtzLmdldE1pbGxpc2Vjb25kcygpfWA7Y29uc29sZS5sb2coYFske2F9XVtlbWl0dGVyeToke3R9XVske259XSBFdmVudCBOYW1lOiAke2l9CglkYXRhOiAke299YCl9KX1sb2dJZkRlYnVnRW5hYmxlZChlLHQsbil7KGhlLmlzRGVidWdFbmFibGVkfHx0aGlzLmRlYnVnLmVuYWJsZWQpJiZ0aGlzLmRlYnVnLmxvZ2dlcihlLHRoaXMuZGVidWcubmFtZSx0LG4pfW9uKGUsdCl7b3QodCksZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCBuIG9mIGUpd2UobiksUmUodGhpcyxuKS5hZGQodCksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlIixuLHZvaWQgMCksWHQobil8fHRoaXMuZW1pdChudCx7ZXZlbnROYW1lOm4sbGlzdGVuZXI6dH0pO3JldHVybiB0aGlzLm9mZi5iaW5kKHRoaXMsZSx0KX1vZmYoZSx0KXtvdCh0KSxlPUFycmF5LmlzQXJyYXkoZSk/ZTpbZV07Zm9yKGNvbnN0IG4gb2YgZSl3ZShuKSxSZSh0aGlzLG4pLmRlbGV0ZSh0KSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJ1bnN1YnNjcmliZSIsbix2b2lkIDApLFh0KG4pfHx0aGlzLmVtaXQoaXQse2V2ZW50TmFtZTpuLGxpc3RlbmVyOnR9KX1vbmNlKGUpe3JldHVybiBuZXcgUHJvbWlzZSh0PT57Y29uc3Qgbj10aGlzLm9uKGUsaT0+e24oKSx0KGkpfSl9KX1ldmVudHMoZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCB0IG9mIGUpd2UodCk7cmV0dXJuIHluKHRoaXMsZSl9YXN5bmMgZW1pdChlLHQpe3dlKGUpLHRoaXMubG9nSWZEZWJ1Z0VuYWJsZWQoImVtaXQiLGUsdCkseHModGhpcyxlLHQpO2NvbnN0IG49UmUodGhpcyxlKSxpPXNlLmdldCh0aGlzKSxvPVsuLi5uXSxzPVh0KGUpP1tdOlsuLi5pXTthd2FpdCBwbixhd2FpdCBQcm9taXNlLmFsbChbLi4uby5tYXAoYXN5bmMgYT0+e2lmKG4uaGFzKGEpKXJldHVybiBhKHQpfSksLi4ucy5tYXAoYXN5bmMgYT0+e2lmKGkuaGFzKGEpKXJldHVybiBhKGUsdCl9KV0pfWFzeW5jIGVtaXRTZXJpYWwoZSx0KXt3ZShlKSx0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCJlbWl0U2VyaWFsIixlLHQpO2NvbnN0IG49UmUodGhpcyxlKSxpPXNlLmdldCh0aGlzKSxvPVsuLi5uXSxzPVsuLi5pXTthd2FpdCBwbjtmb3IoY29uc3QgYSBvZiBvKW4uaGFzKGEpJiZhd2FpdCBhKHQpO2Zvcihjb25zdCBhIG9mIHMpaS5oYXMoYSkmJmF3YWl0IGEoZSx0KX1vbkFueShlKXtyZXR1cm4gb3QoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgic3Vic2NyaWJlQW55Iix2b2lkIDAsdm9pZCAwKSxzZS5nZXQodGhpcykuYWRkKGUpLHRoaXMuZW1pdChudCx7bGlzdGVuZXI6ZX0pLHRoaXMub2ZmQW55LmJpbmQodGhpcyxlKX1hbnlFdmVudCgpe3JldHVybiB5bih0aGlzKX1vZmZBbnkoZSl7b3QoZSksdGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgidW5zdWJzY3JpYmVBbnkiLHZvaWQgMCx2b2lkIDApLHRoaXMuZW1pdChpdCx7bGlzdGVuZXI6ZX0pLHNlLmdldCh0aGlzKS5kZWxldGUoZSl9Y2xlYXJMaXN0ZW5lcnMoZSl7ZT1BcnJheS5pc0FycmF5KGUpP2U6W2VdO2Zvcihjb25zdCB0IG9mIGUpaWYodGhpcy5sb2dJZkRlYnVnRW5hYmxlZCgiY2xlYXIiLHQsdm9pZCAwKSx0eXBlb2YgdD09InN0cmluZyJ8fHR5cGVvZiB0PT0ic3ltYm9sIil7UmUodGhpcyx0KS5jbGVhcigpO2NvbnN0IG49T2UodGhpcyx0KTtmb3IoY29uc3QgaSBvZiBuKWkuZmluaXNoKCk7bi5jbGVhcigpfWVsc2V7c2UuZ2V0KHRoaXMpLmNsZWFyKCk7Zm9yKGNvbnN0IG4gb2YgcnQuZ2V0KHRoaXMpLnZhbHVlcygpKW4uY2xlYXIoKTtmb3IoY29uc3QgbiBvZiBDZS5nZXQodGhpcykudmFsdWVzKCkpe2Zvcihjb25zdCBpIG9mIG4paS5maW5pc2goKTtuLmNsZWFyKCl9fX1saXN0ZW5lckNvdW50KGUpe2U9QXJyYXkuaXNBcnJheShlKT9lOltlXTtsZXQgdD0wO2Zvcihjb25zdCBuIG9mIGUpe2lmKHR5cGVvZiBuPT0ic3RyaW5nIil7dCs9c2UuZ2V0KHRoaXMpLnNpemUrUmUodGhpcyxuKS5zaXplK09lKHRoaXMsbikuc2l6ZStPZSh0aGlzKS5zaXplO2NvbnRpbnVlfXR5cGVvZiBuPCJ1IiYmd2UobiksdCs9c2UuZ2V0KHRoaXMpLnNpemU7Zm9yKGNvbnN0IGkgb2YgcnQuZ2V0KHRoaXMpLnZhbHVlcygpKXQrPWkuc2l6ZTtmb3IoY29uc3QgaSBvZiBDZS5nZXQodGhpcykudmFsdWVzKCkpdCs9aS5zaXplfXJldHVybiB0fWJpbmRNZXRob2RzKGUsdCl7aWYodHlwZW9mIGUhPSJvYmplY3QifHxlPT09bnVsbCl0aHJvdyBuZXcgVHlwZUVycm9yKCJgdGFyZ2V0YCBtdXN0IGJlIGFuIG9iamVjdCIpO3Q9X24odCk7Zm9yKGNvbnN0IG4gb2YgdCl7aWYoZVtuXSE9PXZvaWQgMCl0aHJvdyBuZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bn1cYCBhbHJlYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsbix7ZW51bWVyYWJsZTohMSx2YWx1ZTp0aGlzW25dLmJpbmQodGhpcyl9KX19fWNvbnN0IHhuPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlLnByb3RvdHlwZSkuZmlsdGVyKHI9PnIhPT0iY29uc3RydWN0b3IiKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoaGUsImxpc3RlbmVyQWRkZWQiLHt2YWx1ZTpudCx3cml0YWJsZTohMSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShoZSwibGlzdGVuZXJSZW1vdmVkIix7dmFsdWU6aXQsd3JpdGFibGU6ITEsZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITF9KTt2YXIgWXQ9aGU7ZnVuY3Rpb24gZ3Mocil7cmV0dXJuIHR5cGVvZiByPT0ib2JqZWN0IiYmciE9PW51bGwmJiJtZXNzYWdlImluIHImJnR5cGVvZiByLm1lc3NhZ2U9PSJzdHJpbmcifWZ1bmN0aW9uIGJzKHIpe2lmKGdzKHIpKXJldHVybiByO3RyeXtyZXR1cm4gbmV3IEVycm9yKEpTT04uc3RyaW5naWZ5KHIpKX1jYXRjaHtyZXR1cm4gbmV3IEVycm9yKFN0cmluZyhyKSl9fWZ1bmN0aW9uIFF0KHIpe3JldHVybiBicyhyKS5tZXNzYWdlfXZhciBLdD0ocj0+KHIucGlwZWxpbmVfZW5kZWQ9InBpcGVsaW5lX2VuZGVkIixyLnBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3I9InBpcGVsaW5lX2VuZGVkX3dpdGhfZXJyb3IiLHIucGlwZWxpbmVfc3RhcnRlZD0icGlwZWxpbmVfc3RhcnRlZCIsci5waXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3I9InBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciIsci5waXBlbGluZV9yZXN0YXJ0ZWQ9InBpcGVsaW5lX3Jlc3RhcnRlZCIsci5waXBlbGluZV9yZXN0YXJ0ZWRfd2l0aF9lcnJvcj0icGlwZWxpbmVfcmVzdGFydGVkX3dpdGhfZXJyb3IiLHIpKShLdHx8e30pO2NvbnN0IHZzPTUwMCxFcz0uODtjbGFzcyBUcyBleHRlbmRzIFl0e2NvbnN0cnVjdG9yKGUsdCl7c3VwZXIoKSx0aGlzLmluZGV4Xz10LHRoaXMudXVpZF89aG4oKSx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz0wLHRoaXMudHJhbnNmb3JtZXJfPWUsdGhpcy5zaG91bGRTdG9wXz0hMSx0aGlzLmlzRmxhc2hlZF89ITEsdGhpcy5mcmFtZXNGcm9tU291cmNlXz0wLHRoaXMuZnBzXz0wLHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz0wLHRoaXMudmlkZW9IZWlnaHRfPTAsdGhpcy52aWRlb1dpZHRoXz0wLHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfPS0xLHRoaXMudHJhbnNmb3JtZXJUeXBlXz0iQ3VzdG9tIiwiZ2V0VHJhbnNmb3JtZXJUeXBlImluIGUmJih0aGlzLnRyYW5zZm9ybWVyVHlwZV89ZS5nZXRUcmFuc2Zvcm1lclR5cGUoKSk7Y29uc3Qgbj1uZXcgSCgpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmd1aWQodGhpcy51dWlkXykudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJDcmVhdGUiKS5idWlsZCgpO1YucmVwb3J0KG4pfXNldFRyYWNrRXhwZWN0ZWRSYXRlKGUpe3RoaXMudHJhY2tFeHBlY3RlZFJhdGVfPWV9YXN5bmMgc3RhcnQoZSl7aWYodGhpcy5jb250cm9sbGVyXz1lLHRoaXMudHJhbnNmb3JtZXJfJiZ0eXBlb2YgdGhpcy50cmFuc2Zvcm1lcl8uc3RhcnQ9PSJmdW5jdGlvbiIpdHJ5e2F3YWl0IHRoaXMudHJhbnNmb3JtZXJfLnN0YXJ0KGUpfWNhdGNoKHQpe2NvbnN0IG49bmV3IEgoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLnRyYW5zZm9ybWVyX3N0YXJ0KS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52YXJpYXRpb24oIkVycm9yIikuZXJyb3IoUXQodCkpLmJ1aWxkKCk7Vi5yZXBvcnQobik7Y29uc3QgaT17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sZXJyb3I6dCxmdW5jdGlvbjoic3RhcnQifTt0aGlzLmVtaXQoImVycm9yIixpKX19YXN5bmMgdHJhbnNmb3JtKGUsdCl7dmFyIG4saSxvLHM7aWYodGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPT09MCYmKHRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydFN0YXJ0VGltZXN0YW1wXz1EYXRlLm5vdygpKSxlIGluc3RhbmNlb2YgVmlkZW9GcmFtZSYmKHRoaXMudmlkZW9IZWlnaHRfPShuPWU9PW51bGw/dm9pZCAwOmUuZGlzcGxheUhlaWdodCkhPW51bGw/bjowLHRoaXMudmlkZW9XaWR0aF89KGk9ZT09bnVsbD92b2lkIDA6ZS5kaXNwbGF5V2lkdGgpIT1udWxsP2k6MCksKyt0aGlzLmZyYW1lc0Zyb21Tb3VyY2VfLHRoaXMudHJhbnNmb3JtZXJfKWlmKHRoaXMuc2hvdWxkU3RvcF8pY29uc29sZS53YXJuKCJbUGlwZWxpbmVdIGZsdXNoIGZyb20gdHJhbnNmb3JtIiksZS5jbG9zZSgpLHRoaXMuZmx1c2godCksdC50ZXJtaW5hdGUoKTtlbHNlIHRyeXthd2FpdCgocz0obz10aGlzLnRyYW5zZm9ybWVyXykudHJhbnNmb3JtKT09bnVsbD92b2lkIDA6cy5jYWxsKG8sZSx0KSksKyt0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXyx0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXz09PXZzJiZ0aGlzLm1lZGlhVHJhbnNmb3JtZXJRb3NSZXBvcnQoKX1jYXRjaChhKXtjb25zdCB1PW5ldyBIKCkuYWN0aW9uKCJNZWRpYVRyYW5zZm9ybWVyIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy50cmFuc2Zvcm1lcl90cmFuc2Zvcm0pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRXJyb3IiKS5lcnJvcihRdChhKSkuYnVpbGQoKTtWLnJlcG9ydCh1KTtjb25zdCBmPXtldmVudE1ldGFEYXRhOnt0cmFuc2Zvcm1lckluZGV4OnRoaXMuaW5kZXhffSxlcnJvcjphLGZ1bmN0aW9uOiJ0cmFuc2Zvcm0ifTt0aGlzLmVtaXQoImVycm9yIixmKX19YXN5bmMgZmx1c2goZSl7aWYodGhpcy50cmFuc2Zvcm1lcl8mJnR5cGVvZiB0aGlzLnRyYW5zZm9ybWVyXy5mbHVzaD09ImZ1bmN0aW9uIiYmIXRoaXMuaXNGbGFzaGVkXyl7dGhpcy5pc0ZsYXNoZWRfPSEwO3RyeXthd2FpdCB0aGlzLnRyYW5zZm9ybWVyXy5mbHVzaChlKX1jYXRjaChuKXtjb25zdCBpPW5ldyBIKCkuYWN0aW9uKCJNZWRpYVRyYW5zZm9ybWVyIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy50cmFuc2Zvcm1lcl9mbHVzaCkudHJhbnNmb3JtZXJUeXBlKHRoaXMudHJhbnNmb3JtZXJUeXBlXykudmFyaWF0aW9uKCJFcnJvciIpLmVycm9yKFF0KG4pKS5idWlsZCgpO1YucmVwb3J0KGkpO2NvbnN0IG89e2V2ZW50TWV0YURhdGE6e3RyYW5zZm9ybWVySW5kZXg6dGhpcy5pbmRleF99LGVycm9yOm4sZnVuY3Rpb246ImZsdXNoIn07dGhpcy5lbWl0KCJlcnJvciIsbyl9fXRoaXMubWVkaWFUcmFuc2Zvcm1lclFvc1JlcG9ydCgpO2NvbnN0IHQ9bmV3IEgoKS5hY3Rpb24oIk1lZGlhVHJhbnNmb3JtZXIiKS5ndWlkKHRoaXMudXVpZF8pLnRyYW5zZm9ybWVyVHlwZSh0aGlzLnRyYW5zZm9ybWVyVHlwZV8pLnZhcmlhdGlvbigiRGVsZXRlIikuYnVpbGQoKTtWLnJlcG9ydCh0KX1zdG9wKCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gU3RvcCBzdHJlYW0uIiksdGhpcy5jb250cm9sbGVyXyYmKHRoaXMuZmx1c2godGhpcy5jb250cm9sbGVyXyksdGhpcy5jb250cm9sbGVyXy50ZXJtaW5hdGUoKSksdGhpcy5zaG91bGRTdG9wXz0hMH1tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0KCl7bGV0IGU9KERhdGUubm93KCktdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfKS8xZTMsdD10aGlzLmZyYW1lc0Zyb21Tb3VyY2VfL2Usbj10aGlzLmZyYW1lc1RyYW5zZm9ybWVkXy9lO2lmKHRoaXMudHJhY2tFeHBlY3RlZFJhdGVfIT0tMSYmdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8qRXM+dCl7Y29uc3Qgbz17ZXZlbnRNZXRhRGF0YTp7dHJhbnNmb3JtZXJJbmRleDp0aGlzLmluZGV4X30sd2FybmluZ1R5cGU6ImZwc19kcm9wIixkcm9wSW5mbzp7cmVxdWVzdGVkOnRoaXMudHJhY2tFeHBlY3RlZFJhdGVfLGN1cnJlbnQ6dH19O3RoaXMuZW1pdCgid2FybiIsbyl9Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFUcmFuc2Zvcm1lciIpLmZwcyh0KS50cmFuc2Zvcm1lZEZwcyhuKS5mcmFtZXNUcmFuc2Zvcm1lZCh0aGlzLmZyYW1lc1RyYW5zZm9ybWVkXykuZ3VpZCh0aGlzLnV1aWRfKS50cmFuc2Zvcm1lclR5cGUodGhpcy50cmFuc2Zvcm1lclR5cGVfKS52aWRlb0hlaWdodCh0aGlzLnZpZGVvSGVpZ2h0XykudmlkZW9XaWR0aCh0aGlzLnZpZGVvV2lkdGhfKS52YXJpYXRpb24oIlFvUyIpLmJ1aWxkKCk7Vi5yZXBvcnQoaSksdGhpcy5tZWRpYVRyYW5zZm9ybWVyUW9zUmVwb3J0U3RhcnRUaW1lc3RhbXBfPTAsdGhpcy5mcmFtZXNGcm9tU291cmNlXz0wLHRoaXMuZnJhbWVzVHJhbnNmb3JtZWRfPTB9fWNsYXNzIEFzIGV4dGVuZHMgWXR7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLnRyYW5zZm9ybWVyc189W10sdGhpcy50cmFja0V4cGVjdGVkUmF0ZV89LTE7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kyspe2xldCBuPW5ldyBUcyhlW3RdLHQpO24ub24oImVycm9yIixpPT57dGhpcy5lbWl0KCJlcnJvciIsaSl9KSxuLm9uKCJ3YXJuIixpPT57dGhpcy5lbWl0KCJ3YXJuIixpKX0pLHRoaXMudHJhbnNmb3JtZXJzXy5wdXNoKG4pfX1zZXRUcmFja0V4cGVjdGVkUmF0ZShlKXt0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz1lO2ZvcihsZXQgdCBvZiB0aGlzLnRyYW5zZm9ybWVyc18pdC5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyl9YXN5bmMgc3RhcnQoZSx0KXtpZighdGhpcy50cmFuc2Zvcm1lcnNffHx0aGlzLnRyYW5zZm9ybWVyc18ubGVuZ3RoPT09MCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gTm8gdHJhbnNmb3JtZXJzLiIpO3JldHVybn10cnl7bGV0IG49ZTtmb3IobGV0IGkgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKWU9ZS5waXBlVGhyb3VnaChuZXcgVHJhbnNmb3JtU3RyZWFtKGkpKTtlLnBpcGVUbyh0KS50aGVuKGFzeW5jKCk9Pntjb25zb2xlLmxvZygiW1BpcGVsaW5lXSBTZXR1cC4iKSxhd2FpdCB0LmFib3J0KCksYXdhaXQgbi5jYW5jZWwoKSx0aGlzLmVtaXQoInBpcGVsaW5lSW5mbyIsInBpcGVsaW5lX2VuZGVkIil9KS5jYXRjaChhc3luYyBpPT57ZS5jYW5jZWwoKS50aGVuKCgpPT57Y29uc29sZS5sb2coIltQaXBlbGluZV0gU2h1dHRpbmcgZG93biBzdHJlYW1zIGFmdGVyIGFib3J0LiIpfSkuY2F0Y2gobz0+e2NvbnNvbGUuZXJyb3IoIltQaXBlbGluZV0gRXJyb3IgZnJvbSBzdHJlYW0gdHJhbnNmb3JtOiIsbyl9KSxhd2FpdCB0LmFib3J0KGkpLGF3YWl0IG4uY2FuY2VsKGkpLHRoaXMuZW1pdCgicGlwZWxpbmVJbmZvIiwicGlwZWxpbmVfZW5kZWRfd2l0aF9lcnJvciIpfSl9Y2F0Y2h7dGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLCJwaXBlbGluZV9zdGFydGVkX3dpdGhfZXJyb3IiKSx0aGlzLmRlc3Ryb3koKTtyZXR1cm59dGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLCJwaXBlbGluZV9zdGFydGVkIiksY29uc29sZS5sb2coIltQaXBlbGluZV0gUGlwZWxpbmUgc3RhcnRlZC4iKX1hc3luYyBkZXN0cm95KCl7Y29uc29sZS5sb2coIltQaXBlbGluZV0gRGVzdHJveWluZyBQaXBlbGluZS4iKTtmb3IobGV0IGUgb2YgdGhpcy50cmFuc2Zvcm1lcnNfKWUuc3RvcCgpfX1jbGFzcyB3cyBleHRlbmRzIFl0e2NvbnN0cnVjdG9yKCl7c3VwZXIoKSx0aGlzLnV1aWRfPWhuKCksdGhpcy50cmFja0V4cGVjdGVkUmF0ZV89LTE7Y29uc3QgZT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLnZhcmlhdGlvbigiQ3JlYXRlIikuYnVpbGQoKTtWLnJlcG9ydChlKX1zZXRUcmFja0V4cGVjdGVkUmF0ZShlKXt0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXz1lLHRoaXMucGlwZWxpbmVfJiZ0aGlzLnBpcGVsaW5lXy5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyl9dHJhbnNmb3JtKGUsdCl7cmV0dXJuIHRoaXMucmVhZGFibGVfPWUsdGhpcy53cml0YWJsZV89dCx0aGlzLnRyYW5zZm9ybUludGVybmFsKCl9dHJhbnNmb3JtSW50ZXJuYWwoKXtyZXR1cm4gbmV3IFByb21pc2UoKGUsdCk9PntpZighdGhpcy50cmFuc2Zvcm1lcnNffHx0aGlzLnRyYW5zZm9ybWVyc18ubGVuZ3RoPT09MCl7Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLnRyYW5zZm9ybWVyX25vbmUpLnZhcmlhdGlvbigiRXJyb3IiKS5idWlsZCgpO1YucmVwb3J0KGkpLHQoIltNZWRpYVByb2Nlc3Nvcl0gTmVlZCB0byBzZXQgdHJhbnNmb3JtZXJzLiIpO3JldHVybn1pZighdGhpcy5yZWFkYWJsZV8pe2NvbnN0IGk9bmV3IEgoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLmVycm9ycy5yZWFkYWJsZV9udWxsKS52YXJpYXRpb24oIkVycm9yIikuYnVpbGQoKTtWLnJlcG9ydChpKSx0KCJbTWVkaWFQcm9jZXNzb3JdIFJlYWRhYmxlIGlzIG51bGwuIik7cmV0dXJufWlmKCF0aGlzLndyaXRhYmxlXyl7Y29uc3QgaT1uZXcgSCgpLmFjdGlvbigiTWVkaWFQcm9jZXNzb3IiKS5ndWlkKHRoaXMudXVpZF8pLm1lc3NhZ2UobmUuZXJyb3JzLndyaXRhYmxlX251bGwpLnZhcmlhdGlvbigiRXJyb3IiKS5idWlsZCgpO1YucmVwb3J0KGkpLHQoIltNZWRpYVByb2Nlc3Nvcl0gV3JpdGFibGUgaXMgbnVsbC4iKTtyZXR1cm59bGV0IG49ITE7dGhpcy5waXBlbGluZV8mJihuPSEwLHRoaXMucGlwZWxpbmVfLmNsZWFyTGlzdGVuZXJzKCksdGhpcy5waXBlbGluZV8uZGVzdHJveSgpKSx0aGlzLnBpcGVsaW5lXz1uZXcgQXModGhpcy50cmFuc2Zvcm1lcnNfKSx0aGlzLnBpcGVsaW5lXy5vbigid2FybiIsaT0+e3RoaXMuZW1pdCgid2FybiIsaSl9KSx0aGlzLnBpcGVsaW5lXy5vbigiZXJyb3IiLGk9Pnt0aGlzLmVtaXQoImVycm9yIixpKX0pLHRoaXMucGlwZWxpbmVfLm9uKCJwaXBlbGluZUluZm8iLGk9PntuJiYoaT09PSJwaXBlbGluZV9zdGFydGVkIj9pPUt0LnBpcGVsaW5lX3Jlc3RhcnRlZDppPT09InBpcGVsaW5lX3N0YXJ0ZWRfd2l0aF9lcnJvciImJihpPUt0LnBpcGVsaW5lX3Jlc3RhcnRlZF93aXRoX2Vycm9yKSksdGhpcy5lbWl0KCJwaXBlbGluZUluZm8iLGkpfSksdGhpcy50cmFja0V4cGVjdGVkUmF0ZV8hPS0xJiZ0aGlzLnBpcGVsaW5lXy5zZXRUcmFja0V4cGVjdGVkUmF0ZSh0aGlzLnRyYWNrRXhwZWN0ZWRSYXRlXyksdGhpcy5waXBlbGluZV8uc3RhcnQodGhpcy5yZWFkYWJsZV8sdGhpcy53cml0YWJsZV8pLnRoZW4oKCk9PntlKCl9KS5jYXRjaChpPT57dChpKX0pfSl9c2V0VHJhbnNmb3JtZXJzKGUpe2NvbnN0IHQ9bmV3IEgoKS5hY3Rpb24oIk1lZGlhUHJvY2Vzc29yIikuZ3VpZCh0aGlzLnV1aWRfKS5tZXNzYWdlKG5lLnVwZGF0ZXMudHJhbnNmb3JtZXJfbmV3KS52YXJpYXRpb24oIlVwZGF0ZSIpLmJ1aWxkKCk7cmV0dXJuIFYucmVwb3J0KHQpLHRoaXMudHJhbnNmb3JtZXJzXz1lLHRoaXMucmVhZGFibGVfJiZ0aGlzLndyaXRhYmxlXz90aGlzLnRyYW5zZm9ybUludGVybmFsKCk6UHJvbWlzZS5yZXNvbHZlKCl9ZGVzdHJveSgpe3JldHVybiBuZXcgUHJvbWlzZShlPT57dGhpcy5waXBlbGluZV8mJnRoaXMucGlwZWxpbmVfLmRlc3Ryb3koKTtjb25zdCB0PW5ldyBIKCkuYWN0aW9uKCJNZWRpYVByb2Nlc3NvciIpLmd1aWQodGhpcy51dWlkXykudmFyaWF0aW9uKCJEZWxldGUiKS5idWlsZCgpO1YucmVwb3J0KHQpLGUoKX0pfX12YXIgc3Q9KHI9PihyLkxvdz0iTG93IixyLkhpZ2g9IkhpZ2giLHIpKShzdHx8e30pO2FzeW5jIGZ1bmN0aW9uIGduKHIpe3JldHVybiBuZXcgUHJvbWlzZShlPT57c2V0VGltZW91dCgoKT0+e2UoKX0scil9KX1jbGFzcyBSc3tjb25zdHJ1Y3RvcihlKXtwKHRoaXMsImNvbnRleHQiKTtwKHRoaXMsImV4dGVuc2lvbiIpO3AodGhpcywicXVlcmllcyIsW10pO3AodGhpcywiYWN0aXZlUXVlcnkiKTt0aGlzLmNvbnRleHQ9ZSx0aGlzLmV4dGVuc2lvbj1lLmdldEV4dGVuc2lvbigiRVhUX2Rpc2pvaW50X3RpbWVyX3F1ZXJ5X3dlYmdsMiIpfXN0YXJ0KCl7fXN0b3AoKXt0aGlzLmFjdGl2ZVF1ZXJ5JiZ0aGlzLmNvbnRleHQuZW5kUXVlcnkodGhpcy5leHRlbnNpb24uVElNRV9FTEFQU0VEX0VYVCl9cHVzaENvbnRleHQoZSl7dGhpcy5jcmVhdGVRdWVyeSgiUFVTSCIsZSl9cG9wQ29udGV4dChlKXt0aGlzLmNyZWF0ZVF1ZXJ5KCJQT1AiLGUpfWNyZWF0ZVF1ZXJ5KGUsdCl7dGhpcy5hY3RpdmVRdWVyeSYmdGhpcy5jb250ZXh0LmVuZFF1ZXJ5KHRoaXMuZXh0ZW5zaW9uLlRJTUVfRUxBUFNFRF9FWFQpLHRoaXMuYWN0aXZlUXVlcnk9dGhpcy5jb250ZXh0LmNyZWF0ZVF1ZXJ5KCksdGhpcy5jb250ZXh0LmJlZ2luUXVlcnkodGhpcy5leHRlbnNpb24uVElNRV9FTEFQU0VEX0VYVCx0aGlzLmFjdGl2ZVF1ZXJ5KSx0aGlzLnF1ZXJpZXMucHVzaCh7bmFtZTp0LGFjdGlvbjplLHF1ZXJ5OnRoaXMuYWN0aXZlUXVlcnl9KX1hc3luYyBnZXRSZXNvbHZlZFF1ZXJpZXMoKXtjb25zdCBlPShhd2FpdCBQcm9taXNlLmFsbChbLi4udGhpcy5xdWVyaWVzXS5tYXAodD0+dGhpcy5yZXNvbHZlUXVlcnkodCkpKSkuZmlsdGVyKHQ9PnQpO2ZvcihsZXQgdD0xO3Q8ZS5sZW5ndGg7Kyt0KWVbdF0udGltZXN0YW1wKz1lW3QtMV0uZHVyYXRpb24rZVt0LTFdLnRpbWVzdGFtcDtyZXR1cm4gZX1hc3luYyByZXNvbHZlUXVlcnkoZSl7aWYoIWF3YWl0IHRoaXMuYXdhaXRRdWVyeUF2YWlsYWJsZShlKSl7Y29uc29sZS5sb2coIlVuYXdhaXRhYmxlIHF1ZXJ5IixlKTtyZXR1cm59aWYodGhpcy5jb250ZXh0LmdldFBhcmFtZXRlcih0aGlzLmV4dGVuc2lvbi5HUFVfRElTSk9JTlRfRVhUKSl7Y29uc29sZS5sb2coIkRpc2pvaW50ZWQgcXVlcnkiLGUpO3JldHVybn1yZXR1cm57Li4uZSxkdXJhdGlvbjp0aGlzLmNvbnRleHQuZ2V0UXVlcnlQYXJhbWV0ZXIoZS5xdWVyeSx0aGlzLmNvbnRleHQuUVVFUllfUkVTVUxUKSx0aW1lc3RhbXA6MH19YXN5bmMgYXdhaXRRdWVyeUF2YWlsYWJsZShlKXtmb3IobGV0IHQ9MDt0PDEwOysrdCl7aWYodGhpcy5jb250ZXh0LmdldFF1ZXJ5UGFyYW1ldGVyKGUucXVlcnksdGhpcy5jb250ZXh0LlFVRVJZX1JFU1VMVF9BVkFJTEFCTEUpKXJldHVybiBlO2F3YWl0IGduKDIwMCl9fX0vKiBAbGljZW5zZSB0d2dsLmpzIDUuMi4wIENvcHlyaWdodCAoYykgMjAxNSwgR3JlZ2cgVGF2YXJlcyBBbGwgUmlnaHRzIFJlc2VydmVkLgpBdmFpbGFibGUgdmlhIHRoZSBNSVQgbGljZW5zZS4Kc2VlOiBodHRwOi8vZ2l0aHViLmNvbS9ncmVnZ21hbi90d2dsLmpzIGZvciBkZXRhaWxzICovY29uc3QgSnQ9NTEyMCxOZT01MTIxLFp0PTUxMjIsZXI9NTEyMyx0cj01MTI0LHJyPTUxMjUsbnI9NTEyNixTcz0zMjgxOSxJcz0zMjgyMCxGcz0zMzYzNSxQcz01MTMxLERzPTMzNjQwLE1zPTM1ODk5LENzPTM1OTAyLE9zPTM2MjY5LE5zPTM0MDQyLGJuPXt9O3tjb25zdCByPWJuO3JbSnRdPUludDhBcnJheSxyW05lXT1VaW50OEFycmF5LHJbWnRdPUludDE2QXJyYXkscltlcl09VWludDE2QXJyYXksclt0cl09SW50MzJBcnJheSxyW3JyXT1VaW50MzJBcnJheSxyW25yXT1GbG9hdDMyQXJyYXkscltTc109VWludDE2QXJyYXkscltJc109VWludDE2QXJyYXkscltGc109VWludDE2QXJyYXkscltQc109VWludDE2QXJyYXkscltEc109VWludDMyQXJyYXkscltNc109VWludDMyQXJyYXkscltDc109VWludDMyQXJyYXkscltPc109VWludDMyQXJyYXkscltOc109VWludDMyQXJyYXl9ZnVuY3Rpb24gaXIocil7aWYociBpbnN0YW5jZW9mIEludDhBcnJheSlyZXR1cm4gSnQ7aWYociBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fHIgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSlyZXR1cm4gTmU7aWYociBpbnN0YW5jZW9mIEludDE2QXJyYXkpcmV0dXJuIFp0O2lmKHIgaW5zdGFuY2VvZiBVaW50MTZBcnJheSlyZXR1cm4gZXI7aWYociBpbnN0YW5jZW9mIEludDMyQXJyYXkpcmV0dXJuIHRyO2lmKHIgaW5zdGFuY2VvZiBVaW50MzJBcnJheSlyZXR1cm4gcnI7aWYociBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSlyZXR1cm4gbnI7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB0eXBlZCBhcnJheSB0eXBlIil9ZnVuY3Rpb24gdm4ocil7aWYocj09PUludDhBcnJheSlyZXR1cm4gSnQ7aWYocj09PVVpbnQ4QXJyYXl8fHI9PT1VaW50OENsYW1wZWRBcnJheSlyZXR1cm4gTmU7aWYocj09PUludDE2QXJyYXkpcmV0dXJuIFp0O2lmKHI9PT1VaW50MTZBcnJheSlyZXR1cm4gZXI7aWYocj09PUludDMyQXJyYXkpcmV0dXJuIHRyO2lmKHI9PT1VaW50MzJBcnJheSlyZXR1cm4gcnI7aWYocj09PUZsb2F0MzJBcnJheSlyZXR1cm4gbnI7dGhyb3cgbmV3IEVycm9yKCJ1bnN1cHBvcnRlZCB0eXBlZCBhcnJheSB0eXBlIil9ZnVuY3Rpb24gRW4ocil7Y29uc3QgZT1ibltyXTtpZighZSl0aHJvdyBuZXcgRXJyb3IoInVua25vd24gZ2wgdHlwZSIpO3JldHVybiBlfWNvbnN0IGF0PXR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlcjwidSI/ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuYnVmZmVyJiYoZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8ZS5idWZmZXIgaW5zdGFuY2VvZiBTaGFyZWRBcnJheUJ1ZmZlcil9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmJ1ZmZlciYmZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcn07ZnVuY3Rpb24gVG4oLi4ucil7Y29uc29sZS5lcnJvciguLi5yKX1jb25zdCBBbj1uZXcgTWFwO2Z1bmN0aW9uIHV0KHIsZSl7aWYoIXJ8fHR5cGVvZiByIT0ib2JqZWN0IilyZXR1cm4hMTtsZXQgdD1Bbi5nZXQoZSk7dHx8KHQ9bmV3IFdlYWtNYXAsQW4uc2V0KGUsdCkpO2xldCBuPXQuZ2V0KHIpO2lmKG49PT12b2lkIDApe2NvbnN0IGk9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHIpO249aS5zdWJzdHJpbmcoOCxpLmxlbmd0aC0xKT09PWUsdC5zZXQocixuKX1yZXR1cm4gbn1mdW5jdGlvbiBVcyhyLGUpe3JldHVybiB0eXBlb2YgV2ViR0xCdWZmZXI8InUiJiZ1dChlLCJXZWJHTEJ1ZmZlciIpfWZ1bmN0aW9uIEJzKHIsZSl7cmV0dXJuIHR5cGVvZiBXZWJHTFJlbmRlcmJ1ZmZlcjwidSImJnV0KGUsIldlYkdMUmVuZGVyYnVmZmVyIil9ZnVuY3Rpb24gb3IocixlKXtyZXR1cm4gdHlwZW9mIFdlYkdMVGV4dHVyZTwidSImJnV0KGUsIldlYkdMVGV4dHVyZSIpfWZ1bmN0aW9uIGtzKHIsZSl7cmV0dXJuIHR5cGVvZiBXZWJHTFNhbXBsZXI8InUiJiZ1dChlLCJXZWJHTFNhbXBsZXIiKX1jb25zdCB3bj0zNTA0NCxwZT0zNDk2MixMcz0zNDk2Mywkcz0zNDY2MCxHcz01MTIwLHpzPTUxMjEsSHM9NTEyMixWcz01MTIzLFdzPTUxMjQsanM9NTEyNSxSbj01MTI2LFNuPXthdHRyaWJQcmVmaXg6IiJ9O2Z1bmN0aW9uIHFzKHIsZSx0LG4saSl7ci5iaW5kQnVmZmVyKGUsdCksci5idWZmZXJEYXRhKGUsbixpfHx3bil9ZnVuY3Rpb24gSW4ocixlLHQsbil7aWYoVXMocixlKSlyZXR1cm4gZTt0PXR8fHBlO2NvbnN0IGk9ci5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gcXMocix0LGksZSxuKSxpfWZ1bmN0aW9uIEZuKHIpe3JldHVybiByPT09ImluZGljZXMifWZ1bmN0aW9uIFhzKHIpe3JldHVybiByPT09SW50OEFycmF5fHxyPT09VWludDhBcnJheX1mdW5jdGlvbiBZcyhyKXtyZXR1cm4gci5sZW5ndGg/cjpyLmRhdGF9Y29uc3QgUXM9L2Nvb3JkfHRleHR1cmUvaSxLcz0vY29sb3J8Y29sb3VyL2k7ZnVuY3Rpb24gSnMocixlKXtsZXQgdDtpZihRcy50ZXN0KHIpP3Q9MjpLcy50ZXN0KHIpP3Q9NDp0PTMsZSV0PjApdGhyb3cgbmV3IEVycm9yKGBDYW4gbm90IGd1ZXNzIG51bUNvbXBvbmVudHMgZm9yIGF0dHJpYnV0ZSAnJHtyfScuIFRyaWVkICR7dH0gYnV0ICR7ZX0gdmFsdWVzIGlzIG5vdCBldmVubHkgZGl2aXNpYmxlIGJ5ICR7dH0uIFlvdSBzaG91bGQgc3BlY2lmeSBpdC5gKTtyZXR1cm4gdH1mdW5jdGlvbiBacyhyLGUsdCl7cmV0dXJuIHIubnVtQ29tcG9uZW50c3x8ci5zaXplfHxKcyhlLHR8fFlzKHIpLmxlbmd0aCl9ZnVuY3Rpb24gUG4ocixlKXtpZihhdChyKSlyZXR1cm4gcjtpZihhdChyLmRhdGEpKXJldHVybiByLmRhdGE7QXJyYXkuaXNBcnJheShyKSYmKHI9e2RhdGE6cn0pO2xldCB0PXIudHlwZT9zcihyLnR5cGUpOnZvaWQgMDtyZXR1cm4gdHx8KEZuKGUpP3Q9VWludDE2QXJyYXk6dD1GbG9hdDMyQXJyYXkpLG5ldyB0KHIuZGF0YSl9ZnVuY3Rpb24gZWEocil7cmV0dXJuIHR5cGVvZiByPT0ibnVtYmVyIj9yOnI/dm4ocik6Um59ZnVuY3Rpb24gc3Iocil7cmV0dXJuIHR5cGVvZiByPT0ibnVtYmVyIj9FbihyKTpyfHxGbG9hdDMyQXJyYXl9ZnVuY3Rpb24gdGEocixlKXtyZXR1cm57YnVmZmVyOmUuYnVmZmVyLG51bVZhbHVlczoyKjMqNCx0eXBlOmVhKGUudHlwZSksYXJyYXlUeXBlOnNyKGUudHlwZSl9fWZ1bmN0aW9uIHJhKHIsZSl7Y29uc3QgdD1lLmRhdGF8fGUsbj1zcihlLnR5cGUpLGk9dCpuLkJZVEVTX1BFUl9FTEVNRU5ULG89ci5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gci5iaW5kQnVmZmVyKHBlLG8pLHIuYnVmZmVyRGF0YShwZSxpLGUuZHJhd1R5cGV8fHduKSx7YnVmZmVyOm8sbnVtVmFsdWVzOnQsdHlwZTp2bihuKSxhcnJheVR5cGU6bn19ZnVuY3Rpb24gbmEocixlLHQpe2NvbnN0IG49UG4oZSx0KTtyZXR1cm57YXJyYXlUeXBlOm4uY29uc3RydWN0b3IsYnVmZmVyOkluKHIsbix2b2lkIDAsZS5kcmF3VHlwZSksdHlwZTppcihuKSxudW1WYWx1ZXM6MH19ZnVuY3Rpb24gaWEocixlKXtjb25zdCB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKCFGbihuKSl7Y29uc3QgaT1lW25dLG89aS5hdHRyaWJ8fGkubmFtZXx8aS5hdHRyaWJOYW1lfHxTbi5hdHRyaWJQcmVmaXgrbjtpZihpLnZhbHVlKXtpZighQXJyYXkuaXNBcnJheShpLnZhbHVlKSYmIWF0KGkudmFsdWUpKXRocm93IG5ldyBFcnJvcigiYXJyYXkudmFsdWUgaXMgbm90IGFycmF5IG9yIHR5cGVkYXJyYXkiKTt0W29dPXt2YWx1ZTppLnZhbHVlfX1lbHNle2xldCBzO2kuYnVmZmVyJiZpLmJ1ZmZlciBpbnN0YW5jZW9mIFdlYkdMQnVmZmVyP3M9dGE6dHlwZW9mIGk9PSJudW1iZXIifHx0eXBlb2YgaS5kYXRhPT0ibnVtYmVyIj9zPXJhOnM9bmE7Y29uc3R7YnVmZmVyOmEsdHlwZTp1LG51bVZhbHVlczpmLGFycmF5VHlwZTpjfT1zKHIsaSxuKSxkPWkubm9ybWFsaXplIT09dm9pZCAwP2kubm9ybWFsaXplOlhzKGMpLHk9WnMoaSxuLGYpO3Rbb109e2J1ZmZlcjphLG51bUNvbXBvbmVudHM6eSx0eXBlOnUsbm9ybWFsaXplOmQsc3RyaWRlOmkuc3RyaWRlfHwwLG9mZnNldDppLm9mZnNldHx8MCxkaXZpc29yOmkuZGl2aXNvcj09PXZvaWQgMD92b2lkIDA6aS5kaXZpc29yLGRyYXdUeXBlOmkuZHJhd1R5cGV9fX19KSxyLmJpbmRCdWZmZXIocGUsbnVsbCksdH1mdW5jdGlvbiBvYShyLGUpe3JldHVybiBlPT09R3N8fGU9PT16cz8xOmU9PT1Ic3x8ZT09PVZzPzI6ZT09PVdzfHxlPT09anN8fGU9PT1Sbj80OjB9Y29uc3QgYXI9WyJwb3NpdGlvbiIsInBvc2l0aW9ucyIsImFfcG9zaXRpb24iXTtmdW5jdGlvbiBzYShyLGUpe2xldCB0LG47Zm9yKG49MDtuPGFyLmxlbmd0aCYmKHQ9YXJbbl0sISh0IGluIGV8fCh0PVNuLmF0dHJpYlByZWZpeCt0LHQgaW4gZSkpKTsrK24pO249PT1hci5sZW5ndGgmJih0PU9iamVjdC5rZXlzKGUpWzBdKTtjb25zdCBpPWVbdF07aWYoIWkuYnVmZmVyKXJldHVybiAxO3IuYmluZEJ1ZmZlcihwZSxpLmJ1ZmZlcik7Y29uc3Qgbz1yLmdldEJ1ZmZlclBhcmFtZXRlcihwZSwkcyk7ci5iaW5kQnVmZmVyKHBlLG51bGwpO2NvbnN0IHM9b2EocixpLnR5cGUpLGE9by9zLHU9aS5udW1Db21wb25lbnRzfHxpLnNpemUsZj1hL3U7aWYoZiUxIT09MCl0aHJvdyBuZXcgRXJyb3IoYG51bUNvbXBvbmVudHMgJHt1fSBub3QgY29ycmVjdCBmb3IgbGVuZ3RoICR7bGVuZ3RofWApO3JldHVybiBmfWZ1bmN0aW9uIGFhKHIsZSx0KXtjb25zdCBuPWlhKHIsZSksaT1PYmplY3QuYXNzaWduKHt9LHR8fHt9KTtpLmF0dHJpYnM9T2JqZWN0LmFzc2lnbih7fSx0P3QuYXR0cmliczp7fSxuKTtjb25zdCBvPWUuaW5kaWNlcztpZihvKXtjb25zdCBzPVBuKG8sImluZGljZXMiKTtpLmluZGljZXM9SW4ocixzLExzKSxpLm51bUVsZW1lbnRzPXMubGVuZ3RoLGkuZWxlbWVudFR5cGU9aXIocyl9ZWxzZSBpLm51bUVsZW1lbnRzfHwoaS5udW1FbGVtZW50cz1zYShyLGkuYXR0cmlicykpO3JldHVybiBpfWZ1bmN0aW9uIFVlKHIpe3JldHVybiEhci50ZXhTdG9yYWdlMkR9Y29uc3QgRG49ZnVuY3Rpb24oKXtjb25zdCByPXt9LGU9e307ZnVuY3Rpb24gdChuKXtjb25zdCBpPW4uY29uc3RydWN0b3IubmFtZTtpZighcltpXSl7Zm9yKGNvbnN0IG8gaW4gbilpZih0eXBlb2YgbltvXT09Im51bWJlciIpe2NvbnN0IHM9ZVtuW29dXTtlW25bb11dPXM/YCR7c30gfCAke299YDpvfXJbaV09ITB9fXJldHVybiBmdW5jdGlvbihpLG8pe3JldHVybiB0KGkpLGVbb118fCh0eXBlb2Ygbz09Im51bWJlciI/YDB4JHtvLnRvU3RyaW5nKDE2KX1gOm8pfX0oKSxhZT17dGV4dHVyZUNvbG9yOm5ldyBVaW50OEFycmF5KFsxMjgsMTkyLDI1NSwyNTVdKSx0ZXh0dXJlT3B0aW9uczp7fSxjcm9zc09yaWdpbjp2b2lkIDB9LEJlPWF0LE1uPWZ1bmN0aW9uKCl7bGV0IHI7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHI9cnx8KHR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikuZ2V0Q29udGV4dCgiMmQiKTpudWxsKSxyfX0oKSxDbj02NDA2LFo9NjQwNyxGPTY0MDgsT249NjQwOSxObj02NDEwLGtlPTY0MDIsVW49MzQwNDEsY3Q9MzMwNzEsdWE9OTcyOCxjYT05NzI5LHVlPTM1NTMsY2U9MzQwNjcseWU9MzI4NzksX2U9MzU4NjYsdXI9MzQwNjksZmE9MzQwNzAsbGE9MzQwNzEsZGE9MzQwNzIsbWE9MzQwNzMsaGE9MzQwNzQsY3I9MTAyNDEsZnI9MTAyNDAsZnQ9MTAyNDIsbHQ9MTAyNDMsQm49MzI4ODIscGE9MzMwODIseWE9MzMwODMsX2E9MzMwODQseGE9MzMwODUsbHI9MzMxNyxrbj0zMzE0LExuPTMyODc4LCRuPTMzMTYsR249MzMxNSx6bj0zMjg3NyxnYT0zNzQ0MyxiYT0zNzQ0MSx2YT0zNzQ0MCxFYT0zMzMyMSxUYT0zNjc1NixBYT0zMzMyNSx3YT0zMzMyNixSYT0zMzMzMCxTYT0zMzMyOSxJYT0zMzMzOCxGYT0zMzMzNyxQYT0zMzM0MCxEYT0zMzMzOSxNYT0zMzMyMyxDYT0zNjc1NyxPYT0zMzMyNyxOYT0zMzMyOCxVYT0zMzMzNixCYT0zMzMzNSxrYT0zMzMzMixMYT0zMzMzMSwkYT0zMzMzNCxHYT0zMzMzMyx6YT0zMjg0OSxIYT0zNTkwNSxWYT0zNjE5NCxXYT0zNjc1OCxqYT0zNTg5OCxxYT0zNTkwMSxYYT0zNDg0MyxZYT0zNDgzNyxRYT0zNjIyMSxLYT0zNjIzOSxKYT0zNjIxNSxaYT0zNjIzMyxldT0zNjIwOSx0dT0zNjIyNyxydT0zMjg1NixudT0zNTkwNyxpdT0zNjc1OSxvdT0zMjg1NSxzdT0zMjg1NCxhdT0zMjg1Nyx1dT0zNDg0MixjdT0zNDgzNixmdT0zNjIyMCxsdT0zNjIzOCxkdT0zNjk3NSxtdT0zNjIxNCxodT0zNjIzMixwdT0zNjIyNix5dT0zNjIwOCxfdT0zMzE4OSx4dT0zMzE5MCxndT0zNjAxMixidT0zNjAxMyx2dT0zNTA1NixmZT01MTIwLEk9NTEyMSxkdD01MTIyLFNlPTUxMjMsbXQ9NTEyNCx4ZT01MTI1LEI9NTEyNixIbj0zMjgxOSxWbj0zMjgyMCxXbj0zMzYzNSxqPTUxMzEsTGU9MzYxOTMsZHI9MzM2NDAsRXU9MzU4OTksVHU9MzU5MDIsQXU9MzYyNjksd3U9MzQwNDIsaHQ9MzMzMTksSWU9MzMzMjAscHQ9NjQwMyxGZT0zNjI0NCxQZT0zNjI0OCxnZT0zNjI0OTtsZXQgbXI7ZnVuY3Rpb24geXQocil7aWYoIW1yKXtjb25zdCBlPXt9O2VbQ25dPXt0ZXh0dXJlRm9ybWF0OkNuLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzEsMiwyLDRdLHR5cGU6W0ksaixMZSxCXX0sZVtPbl09e3RleHR1cmVGb3JtYXQ6T24sY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMSwyLDIsNF0sdHlwZTpbSSxqLExlLEJdfSxlW05uXT17dGV4dHVyZUZvcm1hdDpObixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsyLDQsNCw4XSx0eXBlOltJLGosTGUsQl19LGVbWl09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlszLDYsNiwxMiwyXSx0eXBlOltJLGosTGUsQixXbl19LGVbRl09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0LDgsOCwxNiwyLDJdLHR5cGU6W0ksaixMZSxCLEhuLFZuXX0sZVtrZV09e3RleHR1cmVGb3JtYXQ6a2UsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMiw0XSx0eXBlOlt4ZSxTZV19LGVbRWFdPXt0ZXh0dXJlRm9ybWF0OnB0LGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzFdLHR5cGU6W0ldfSxlW1RhXT17dGV4dHVyZUZvcm1hdDpwdCxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsxXSx0eXBlOltmZV19LGVbQWFdPXt0ZXh0dXJlRm9ybWF0OnB0LGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzQsMl0sdHlwZTpbQixqXX0sZVt3YV09e3RleHR1cmVGb3JtYXQ6cHQsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNF0sdHlwZTpbQl19LGVbUmFdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzFdLHR5cGU6W0ldfSxlW1NhXT17dGV4dHVyZUZvcm1hdDpGZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxXSx0eXBlOltmZV19LGVba2FdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W1NlXX0sZVtMYV09e3RleHR1cmVGb3JtYXQ6RmUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbZHRdfSxlWyRhXT17dGV4dHVyZUZvcm1hdDpGZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt4ZV19LGVbR2FdPXt0ZXh0dXJlRm9ybWF0OkZlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W210XX0sZVtNYV09e3RleHR1cmVGb3JtYXQ6aHQsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbSV19LGVbQ2FdPXt0ZXh0dXJlRm9ybWF0Omh0LGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W2ZlXX0sZVtPYV09e3RleHR1cmVGb3JtYXQ6aHQsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbOCw0XSx0eXBlOltCLGpdfSxlW05hXT17dGV4dHVyZUZvcm1hdDpodCxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols4XSx0eXBlOltCXX0sZVtVYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbMl0sdHlwZTpbSV19LGVbQmFdPXt0ZXh0dXJlRm9ybWF0OkllLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzJdLHR5cGU6W2ZlXX0sZVtJYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNF0sdHlwZTpbU2VdfSxlW0ZhXT17dGV4dHVyZUZvcm1hdDpJZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltkdF19LGVbUGFdPXt0ZXh0dXJlRm9ybWF0OkllLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzhdLHR5cGU6W3hlXX0sZVtEYV09e3RleHR1cmVGb3JtYXQ6SWUsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbOF0sdHlwZTpbbXRdfSxlW3phXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW0hhXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW1ZhXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzMsMl0sdHlwZTpbSSxXbl19LGVbV2FdPXt0ZXh0dXJlRm9ybWF0OlosY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbM10sdHlwZTpbZmVdfSxlW2phXT17dGV4dHVyZUZvcm1hdDpaLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzEyLDYsNF0sdHlwZTpbQixqLEV1XX0sZVtxYV09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50OlsxMiw2LDRdLHR5cGU6W0IsaixUdV19LGVbWGFdPXt0ZXh0dXJlRm9ybWF0OlosY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMTIsNl0sdHlwZTpbQixqXX0sZVtZYV09e3RleHR1cmVGb3JtYXQ6Wixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbQl19LGVbUWFdPXt0ZXh0dXJlRm9ybWF0OlBlLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzNdLHR5cGU6W0ldfSxlW0thXT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlszXSx0eXBlOltmZV19LGVbSmFdPXt0ZXh0dXJlRm9ybWF0OlBlLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzZdLHR5cGU6W1NlXX0sZVtaYV09e3RleHR1cmVGb3JtYXQ6UGUsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbNl0sdHlwZTpbZHRdfSxlW2V1XT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbeGVdfSxlW3R1XT17dGV4dHVyZUZvcm1hdDpQZSxjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxMl0sdHlwZTpbbXRdfSxlW3J1XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW251XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW2l1XT17dGV4dHVyZUZvcm1hdDpGLGNvbG9yUmVuZGVyYWJsZTohMSx0ZXh0dXJlRmlsdGVyYWJsZTohMCxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W2ZlXX0sZVtvdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0LDIsNF0sdHlwZTpbSSxWbixkcl19LGVbc3VdPXt0ZXh0dXJlRm9ybWF0OkYsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbNCwyXSx0eXBlOltJLEhuXX0sZVthdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITAsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltkcl19LGVbdXVdPXt0ZXh0dXJlRm9ybWF0OkYsY29sb3JSZW5kZXJhYmxlOiExLHRleHR1cmVGaWx0ZXJhYmxlOiEwLGJ5dGVzUGVyRWxlbWVudDpbMTYsOF0sdHlwZTpbQixqXX0sZVtjdV09e3RleHR1cmVGb3JtYXQ6Rixjb2xvclJlbmRlcmFibGU6ITEsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50OlsxNl0sdHlwZTpbQl19LGVbZnVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0ldfSxlW2x1XT17dGV4dHVyZUZvcm1hdDpnZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOltmZV19LGVbZHVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W2RyXX0sZVttdV09e3RleHR1cmVGb3JtYXQ6Z2UsY29sb3JSZW5kZXJhYmxlOiEwLHRleHR1cmVGaWx0ZXJhYmxlOiExLGJ5dGVzUGVyRWxlbWVudDpbOF0sdHlwZTpbU2VdfSxlW2h1XT17dGV4dHVyZUZvcm1hdDpnZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols4XSx0eXBlOltkdF19LGVbcHVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzE2XSx0eXBlOlttdF19LGVbeXVdPXt0ZXh0dXJlRm9ybWF0OmdlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzE2XSx0eXBlOlt4ZV19LGVbX3VdPXt0ZXh0dXJlRm9ybWF0OmtlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzIsNF0sdHlwZTpbU2UseGVdfSxlW3h1XT17dGV4dHVyZUZvcm1hdDprZSxjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt4ZV19LGVbZ3VdPXt0ZXh0dXJlRm9ybWF0OmtlLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0JdfSxlW3Z1XT17dGV4dHVyZUZvcm1hdDpVbixjb2xvclJlbmRlcmFibGU6ITAsdGV4dHVyZUZpbHRlcmFibGU6ITEsYnl0ZXNQZXJFbGVtZW50Ols0XSx0eXBlOlt3dV19LGVbYnVdPXt0ZXh0dXJlRm9ybWF0OlVuLGNvbG9yUmVuZGVyYWJsZTohMCx0ZXh0dXJlRmlsdGVyYWJsZTohMSxieXRlc1BlckVsZW1lbnQ6WzRdLHR5cGU6W0F1XX0sT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtjb25zdCBuPWVbdF07bi5ieXRlc1BlckVsZW1lbnRNYXA9e30sbi5ieXRlc1BlckVsZW1lbnQuZm9yRWFjaChmdW5jdGlvbihpLG8pe2NvbnN0IHM9bi50eXBlW29dO24uYnl0ZXNQZXJFbGVtZW50TWFwW3NdPWl9KX0pLG1yPWV9cmV0dXJuIG1yW3JdfWZ1bmN0aW9uIFJ1KHIsZSl7Y29uc3QgdD15dChyKTtpZighdCl0aHJvdyJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7Y29uc3Qgbj10LmJ5dGVzUGVyRWxlbWVudE1hcFtlXTtpZihuPT09dm9pZCAwKXRocm93InVua25vd24gaW50ZXJuYWwgZm9ybWF0IjtyZXR1cm4gbn1mdW5jdGlvbiAkZShyKXtjb25zdCBlPXl0KHIpO2lmKCFlKXRocm93InVua25vd24gaW50ZXJuYWwgZm9ybWF0IjtyZXR1cm57Zm9ybWF0OmUudGV4dHVyZUZvcm1hdCx0eXBlOmUudHlwZVswXX19ZnVuY3Rpb24gam4ocil7cmV0dXJuKHImci0xKT09PTB9ZnVuY3Rpb24gU3UocixlLHQsbil7aWYoIVVlKHIpKXJldHVybiBqbihlKSYmam4odCk7Y29uc3QgaT15dChuKTtpZighaSl0aHJvdyJ1bmtub3duIGludGVybmFsIGZvcm1hdCI7cmV0dXJuIGkuY29sb3JSZW5kZXJhYmxlJiZpLnRleHR1cmVGaWx0ZXJhYmxlfWZ1bmN0aW9uIEl1KHIpe2NvbnN0IGU9eXQocik7aWYoIWUpdGhyb3cidW5rbm93biBpbnRlcm5hbCBmb3JtYXQiO3JldHVybiBlLnRleHR1cmVGaWx0ZXJhYmxlfWZ1bmN0aW9uIEZ1KHIsZSx0KXtyZXR1cm4gQmUoZSk/aXIoZSk6dHx8SX1mdW5jdGlvbiBfdChyLGUsdCxuLGkpe2lmKGklMSE9PTApdGhyb3ciY2FuJ3QgZ3Vlc3MgZGltZW5zaW9ucyI7aWYoIXQmJiFuKXtjb25zdCBvPU1hdGguc3FydChpLyhlPT09Y2U/NjoxKSk7byUxPT09MD8odD1vLG49byk6KHQ9aSxuPTEpfWVsc2UgaWYobil7aWYoIXQmJih0PWkvbix0JTEpKXRocm93ImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMifWVsc2UgaWYobj1pL3QsbiUxKXRocm93ImNhbid0IGd1ZXNzIGRpbWVuc2lvbnMiO3JldHVybnt3aWR0aDp0LGhlaWdodDpufX1mdW5jdGlvbiBEZShyLGUpe2UuY29sb3JzcGFjZUNvbnZlcnNpb24hPT12b2lkIDAmJnIucGl4ZWxTdG9yZWkoZ2EsZS5jb2xvcnNwYWNlQ29udmVyc2lvbiksZS5wcmVtdWx0aXBseUFscGhhIT09dm9pZCAwJiZyLnBpeGVsU3RvcmVpKGJhLGUucHJlbXVsdGlwbHlBbHBoYSksZS5mbGlwWSE9PXZvaWQgMCYmci5waXhlbFN0b3JlaSh2YSxlLmZsaXBZKX1mdW5jdGlvbiBxbihyKXtyLnBpeGVsU3RvcmVpKGxyLDQpLFVlKHIpJiYoci5waXhlbFN0b3JlaShrbiwwKSxyLnBpeGVsU3RvcmVpKExuLDApLHIucGl4ZWxTdG9yZWkoJG4sMCksci5waXhlbFN0b3JlaShHbiwwKSxyLnBpeGVsU3RvcmVpKHpuLDApKX1mdW5jdGlvbiBQdShyLGUsdCxuKXtuLm1pbk1hZyYmKHQuY2FsbChyLGUsY3Isbi5taW5NYWcpLHQuY2FsbChyLGUsZnIsbi5taW5NYWcpKSxuLm1pbiYmdC5jYWxsKHIsZSxjcixuLm1pbiksbi5tYWcmJnQuY2FsbChyLGUsZnIsbi5tYWcpLG4ud3JhcCYmKHQuY2FsbChyLGUsZnQsbi53cmFwKSx0LmNhbGwocixlLGx0LG4ud3JhcCksKGU9PT15ZXx8a3MocixlKSkmJnQuY2FsbChyLGUsQm4sbi53cmFwKSksbi53cmFwUiYmdC5jYWxsKHIsZSxCbixuLndyYXBSKSxuLndyYXBTJiZ0LmNhbGwocixlLGZ0LG4ud3JhcFMpLG4ud3JhcFQmJnQuY2FsbChyLGUsbHQsbi53cmFwVCksbi5taW5Mb2QmJnQuY2FsbChyLGUscGEsbi5taW5Mb2QpLG4ubWF4TG9kJiZ0LmNhbGwocixlLHlhLG4ubWF4TG9kKSxuLmJhc2VMZXZlbCYmdC5jYWxsKHIsZSxfYSxuLmJhc2VMZXZlbCksbi5tYXhMZXZlbCYmdC5jYWxsKHIsZSx4YSxuLm1heExldmVsKX1mdW5jdGlvbiBYbihyLGUsdCl7Y29uc3Qgbj10LnRhcmdldHx8dWU7ci5iaW5kVGV4dHVyZShuLGUpLFB1KHIsbixyLnRleFBhcmFtZXRlcmksdCl9ZnVuY3Rpb24gRHUocil7cmV0dXJuIHI9cnx8YWUudGV4dHVyZUNvbG9yLEJlKHIpP3I6bmV3IFVpbnQ4QXJyYXkoW3JbMF0qMjU1LHJbMV0qMjU1LHJbMl0qMjU1LHJbM10qMjU1XSl9ZnVuY3Rpb24gaHIocixlLHQsbixpLG8pe3Q9dHx8YWUudGV4dHVyZU9wdGlvbnMsbz1vfHxGO2NvbnN0IHM9dC50YXJnZXR8fHVlO2lmKG49bnx8dC53aWR0aCxpPWl8fHQuaGVpZ2h0LHIuYmluZFRleHR1cmUocyxlKSxTdShyLG4saSxvKSlyLmdlbmVyYXRlTWlwbWFwKHMpO2Vsc2V7Y29uc3QgYT1JdShvKT9jYTp1YTtyLnRleFBhcmFtZXRlcmkocyxjcixhKSxyLnRleFBhcmFtZXRlcmkocyxmcixhKSxyLnRleFBhcmFtZXRlcmkocyxmdCxjdCksci50ZXhQYXJhbWV0ZXJpKHMsbHQsY3QpfX1mdW5jdGlvbiBHZShyKXtyZXR1cm4gci5hdXRvPT09ITB8fHIuYXV0bz09PXZvaWQgMCYmci5sZXZlbD09PXZvaWQgMH1mdW5jdGlvbiBwcihyLGUpe3JldHVybiBlPWV8fHt9LGUuY3ViZUZhY2VPcmRlcnx8W3VyLGZhLGxhLGRhLG1hLGhhXX1mdW5jdGlvbiB5cihyLGUpe2NvbnN0IG49cHIocixlKS5tYXAoZnVuY3Rpb24oaSxvKXtyZXR1cm57ZmFjZTppLG5keDpvfX0pO3JldHVybiBuLnNvcnQoZnVuY3Rpb24oaSxvKXtyZXR1cm4gaS5mYWNlLW8uZmFjZX0pLG59ZnVuY3Rpb24gWW4ocixlLHQsbil7bj1ufHxhZS50ZXh0dXJlT3B0aW9ucztjb25zdCBpPW4udGFyZ2V0fHx1ZSxvPW4ubGV2ZWx8fDA7bGV0IHM9dC53aWR0aCxhPXQuaGVpZ2h0O2NvbnN0IHU9bi5pbnRlcm5hbEZvcm1hdHx8bi5mb3JtYXR8fEYsZj0kZSh1KSxjPW4uZm9ybWF0fHxmLmZvcm1hdCxkPW4udHlwZXx8Zi50eXBlO2lmKERlKHIsbiksci5iaW5kVGV4dHVyZShpLGUpLGk9PT1jZSl7Y29uc3QgeT10LndpZHRoLF89dC5oZWlnaHQ7bGV0IG0seDtpZih5LzY9PT1fKW09Xyx4PVswLDAsMSwwLDIsMCwzLDAsNCwwLDUsMF07ZWxzZSBpZihfLzY9PT15KW09eSx4PVswLDAsMCwxLDAsMiwwLDMsMCw0LDAsNV07ZWxzZSBpZih5LzM9PT1fLzIpbT15LzMseD1bMCwwLDEsMCwyLDAsMCwxLDEsMSwyLDFdO2Vsc2UgaWYoeS8yPT09Xy8zKW09eS8yLHg9WzAsMCwxLDAsMCwxLDEsMSwwLDIsMSwyXTtlbHNlIHRocm93ImNhbid0IGZpZ3VyZSBvdXQgY3ViZSBtYXAgZnJvbSBlbGVtZW50OiAiKyh0LnNyYz90LnNyYzp0Lm5vZGVOYW1lKTtjb25zdCB2PU1uKCk7dj8odi5jYW52YXMud2lkdGg9bSx2LmNhbnZhcy5oZWlnaHQ9bSxzPW0sYT1tLHlyKHIsbikuZm9yRWFjaChmdW5jdGlvbihiKXtjb25zdCBBPXhbYi5uZHgqMiswXSptLFA9eFtiLm5keCoyKzFdKm07di5kcmF3SW1hZ2UodCxBLFAsbSxtLDAsMCxtLG0pLHIudGV4SW1hZ2UyRChiLmZhY2Usbyx1LGMsZCx2LmNhbnZhcyl9KSx2LmNhbnZhcy53aWR0aD0xLHYuY2FudmFzLmhlaWdodD0xKTp0eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXA8InUiJiYocz1tLGE9bSx5cihyLG4pLmZvckVhY2goZnVuY3Rpb24oYil7Y29uc3QgQT14W2IubmR4KjIrMF0qbSxQPXhbYi5uZHgqMisxXSptO3IudGV4SW1hZ2UyRChiLmZhY2Usbyx1LG0sbSwwLGMsZCxudWxsKSxjcmVhdGVJbWFnZUJpdG1hcCh0LEEsUCxtLG0se3ByZW11bHRpcGx5QWxwaGE6Im5vbmUiLGNvbG9yU3BhY2VDb252ZXJzaW9uOiJub25lIn0pLnRoZW4oZnVuY3Rpb24oQyl7RGUocixuKSxyLmJpbmRUZXh0dXJlKGksZSksci50ZXhJbWFnZTJEKGIuZmFjZSxvLHUsYyxkLEMpLEdlKG4pJiZocihyLGUsbixzLGEsdSl9KX0pKX1lbHNlIGlmKGk9PT15ZXx8aT09PV9lKXtjb25zdCB5PU1hdGgubWluKHQud2lkdGgsdC5oZWlnaHQpLF89TWF0aC5tYXgodC53aWR0aCx0LmhlaWdodCksbT1fL3k7aWYobSUxIT09MCl0aHJvdyJjYW4gbm90IGNvbXB1dGUgM0QgZGltZW5zaW9ucyBvZiBlbGVtZW50Ijtjb25zdCB4PXQud2lkdGg9PT1fPzE6MCx2PXQuaGVpZ2h0PT09Xz8xOjA7ci5waXhlbFN0b3JlaShsciwxKSxyLnBpeGVsU3RvcmVpKGtuLHQud2lkdGgpLHIucGl4ZWxTdG9yZWkoTG4sMCksci5waXhlbFN0b3JlaSh6biwwKSxyLnRleEltYWdlM0QoaSxvLHUseSx5LHksMCxjLGQsbnVsbCk7Zm9yKGxldCBiPTA7YjxtOysrYil7Y29uc3QgQT1iKnkqeCxQPWIqeSp2O3IucGl4ZWxTdG9yZWkoJG4sQSksci5waXhlbFN0b3JlaShHbixQKSxyLnRleFN1YkltYWdlM0QoaSxvLDAsMCxiLHkseSwxLGMsZCx0KX1xbihyKX1lbHNlIHIudGV4SW1hZ2UyRChpLG8sdSxjLGQsdCk7R2UobikmJmhyKHIsZSxuLHMsYSx1KSxYbihyLGUsbil9ZnVuY3Rpb24gemUoKXt9ZnVuY3Rpb24gTXUocil7aWYodHlwZW9mIGRvY3VtZW50PCJ1Iil7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7cmV0dXJuIGUuaHJlZj1yLGUuaG9zdG5hbWU9PT1sb2NhdGlvbi5ob3N0bmFtZSYmZS5wb3J0PT09bG9jYXRpb24ucG9ydCYmZS5wcm90b2NvbD09PWxvY2F0aW9uLnByb3RvY29sfWVsc2V7Y29uc3QgZT1uZXcgVVJMKGxvY2F0aW9uLmhyZWYpLm9yaWdpbjtyZXR1cm4gbmV3IFVSTChyLGxvY2F0aW9uLmhyZWYpLm9yaWdpbj09PWV9fWZ1bmN0aW9uIEN1KHIsZSl7cmV0dXJuIGU9PT12b2lkIDAmJiFNdShyKT8iYW5vbnltb3VzIjplfWZ1bmN0aW9uIE91KHIsZSx0KXt0PXR8fHplO2xldCBuO2lmKGU9ZSE9PXZvaWQgMD9lOmFlLmNyb3NzT3JpZ2luLGU9Q3UocixlKSx0eXBlb2YgSW1hZ2U8InUiKXtuPW5ldyBJbWFnZSxlIT09dm9pZCAwJiYobi5jcm9zc09yaWdpbj1lKTtjb25zdCBpPWZ1bmN0aW9uKCl7bi5yZW1vdmVFdmVudExpc3RlbmVyKCJlcnJvciIsbyksbi5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixzKSxuPW51bGx9LG89ZnVuY3Rpb24oKXtjb25zdCB1PSJjb3VsZG4ndCBsb2FkIGltYWdlOiAiK3I7VG4odSksdCh1LG4pLGkoKX0scz1mdW5jdGlvbigpe3QobnVsbCxuKSxpKCl9O3JldHVybiBuLmFkZEV2ZW50TGlzdGVuZXIoImVycm9yIixvKSxuLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLHMpLG4uc3JjPXIsbn1lbHNlIGlmKHR5cGVvZiBJbWFnZUJpdG1hcDwidSIpe2xldCBpLG87Y29uc3Qgcz1mdW5jdGlvbigpe3QoaSxvKX0sYT17fTtlJiYoYS5tb2RlPSJjb3JzIiksZmV0Y2gocixhKS50aGVuKGZ1bmN0aW9uKHUpe2lmKCF1Lm9rKXRocm93IHU7cmV0dXJuIHUuYmxvYigpfSkudGhlbihmdW5jdGlvbih1KXtyZXR1cm4gY3JlYXRlSW1hZ2VCaXRtYXAodSx7cHJlbXVsdGlwbHlBbHBoYToibm9uZSIsY29sb3JTcGFjZUNvbnZlcnNpb246Im5vbmUifSl9KS50aGVuKGZ1bmN0aW9uKHUpe289dSxzZXRUaW1lb3V0KHMpfSkuY2F0Y2goZnVuY3Rpb24odSl7aT11LHNldFRpbWVvdXQocyl9KSxuPW51bGx9cmV0dXJuIG59ZnVuY3Rpb24gUW4ocil7cmV0dXJuIHR5cGVvZiBJbWFnZUJpdG1hcDwidSImJnIgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcHx8dHlwZW9mIEltYWdlRGF0YTwidSImJnIgaW5zdGFuY2VvZiBJbWFnZURhdGF8fHR5cGVvZiBIVE1MRWxlbWVudDwidSImJnIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudH1mdW5jdGlvbiBfcihyLGUsdCl7cmV0dXJuIFFuKHIpPyhzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChudWxsLHIpfSkscik6T3UocixlLHQpfWZ1bmN0aW9uIHhyKHIsZSx0KXt0PXR8fGFlLnRleHR1cmVPcHRpb25zO2NvbnN0IG49dC50YXJnZXR8fHVlO2lmKHIuYmluZFRleHR1cmUobixlKSx0LmNvbG9yPT09ITEpcmV0dXJuO2NvbnN0IGk9RHUodC5jb2xvcik7aWYobj09PWNlKWZvcihsZXQgbz0wO288NjsrK28pci50ZXhJbWFnZTJEKHVyK28sMCxGLDEsMSwwLEYsSSxpKTtlbHNlIG49PT15ZXx8bj09PV9lP3IudGV4SW1hZ2UzRChuLDAsRiwxLDEsMSwwLEYsSSxpKTpyLnRleEltYWdlMkQobiwwLEYsMSwxLDAsRixJLGkpfWZ1bmN0aW9uIE51KHIsZSx0LG4pe3JldHVybiBuPW58fHplLHQ9dHx8YWUudGV4dHVyZU9wdGlvbnMseHIocixlLHQpLHQ9T2JqZWN0LmFzc2lnbih7fSx0KSxfcih0LnNyYyx0LmNyb3NzT3JpZ2luLGZ1bmN0aW9uKG8scyl7bz9uKG8sZSxzKTooWW4ocixlLHMsdCksbihudWxsLGUscykpfSl9ZnVuY3Rpb24gVXUocixlLHQsbil7bj1ufHx6ZTtjb25zdCBpPXQuc3JjO2lmKGkubGVuZ3RoIT09Nil0aHJvdyJ0aGVyZSBtdXN0IGJlIDYgdXJscyBmb3IgYSBjdWJlbWFwIjtjb25zdCBvPXQubGV2ZWx8fDAscz10LmludGVybmFsRm9ybWF0fHx0LmZvcm1hdHx8RixhPSRlKHMpLHU9dC5mb3JtYXR8fGEuZm9ybWF0LGY9dC50eXBlfHxJLGM9dC50YXJnZXR8fHVlO2lmKGMhPT1jZSl0aHJvdyJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFX0NVQkVfTUFQIjt4cihyLGUsdCksdD1PYmplY3QuYXNzaWduKHt9LHQpO2xldCBkPTY7Y29uc3QgeT1bXSxfPXByKHIsdCk7bGV0IG07ZnVuY3Rpb24geCh2KXtyZXR1cm4gZnVuY3Rpb24oYixBKXstLWQsYj95LnB1c2goYik6QS53aWR0aCE9PUEuaGVpZ2h0P3kucHVzaCgiY3ViZW1hcCBmYWNlIGltZyBpcyBub3QgYSBzcXVhcmU6ICIrQS5zcmMpOihEZShyLHQpLHIuYmluZFRleHR1cmUoYyxlKSxkPT09NT9wcigpLmZvckVhY2goZnVuY3Rpb24oUCl7ci50ZXhJbWFnZTJEKFAsbyxzLHUsZixBKX0pOnIudGV4SW1hZ2UyRCh2LG8scyx1LGYsQSksR2UodCkmJnIuZ2VuZXJhdGVNaXBtYXAoYykpLGQ9PT0wJiZuKHkubGVuZ3RoP3k6dm9pZCAwLGUsbSl9fW09aS5tYXAoZnVuY3Rpb24odixiKXtyZXR1cm4gX3Iodix0LmNyb3NzT3JpZ2luLHgoX1tiXSkpfSl9ZnVuY3Rpb24gQnUocixlLHQsbil7bj1ufHx6ZTtjb25zdCBpPXQuc3JjLG89dC5pbnRlcm5hbEZvcm1hdHx8dC5mb3JtYXR8fEYscz0kZShvKSxhPXQuZm9ybWF0fHxzLmZvcm1hdCx1PXQudHlwZXx8SSxmPXQudGFyZ2V0fHxfZTtpZihmIT09eWUmJmYhPT1fZSl0aHJvdyJ0YXJnZXQgbXVzdCBiZSBURVhUVVJFXzNEIG9yIFRFWFRVUkVfMkRfQVJSQVkiO3hyKHIsZSx0KSx0PU9iamVjdC5hc3NpZ24oe30sdCk7bGV0IGM9aS5sZW5ndGg7Y29uc3QgZD1bXTtsZXQgeTtjb25zdCBfPXQubGV2ZWx8fDA7bGV0IG09dC53aWR0aCx4PXQuaGVpZ2h0O2NvbnN0IHY9aS5sZW5ndGg7bGV0IGI9ITA7ZnVuY3Rpb24gQShQKXtyZXR1cm4gZnVuY3Rpb24oQyxXKXtpZigtLWMsQylkLnB1c2goQyk7ZWxzZXtpZihEZShyLHQpLHIuYmluZFRleHR1cmUoZixlKSxiKXtiPSExLG09dC53aWR0aHx8Vy53aWR0aCx4PXQuaGVpZ2h0fHxXLmhlaWdodCxyLnRleEltYWdlM0QoZixfLG8sbSx4LHYsMCxhLHUsbnVsbCk7Zm9yKGxldCBpZT0wO2llPHY7KytpZSlyLnRleFN1YkltYWdlM0QoZixfLDAsMCxpZSxtLHgsMSxhLHUsVyl9ZWxzZXtsZXQgaWU9VyxYOyhXLndpZHRoIT09bXx8Vy5oZWlnaHQhPT14KSYmKFg9TW4oKSxpZT1YLmNhbnZhcyxYLmNhbnZhcy53aWR0aD1tLFguY2FudmFzLmhlaWdodD14LFguZHJhd0ltYWdlKFcsMCwwLG0seCkpLHIudGV4U3ViSW1hZ2UzRChmLF8sMCwwLFAsbSx4LDEsYSx1LGllKSxYJiZpZT09PVguY2FudmFzJiYoWC5jYW52YXMud2lkdGg9MCxYLmNhbnZhcy5oZWlnaHQ9MCl9R2UodCkmJnIuZ2VuZXJhdGVNaXBtYXAoZil9Yz09PTAmJm4oZC5sZW5ndGg/ZDp2b2lkIDAsZSx5KX19eT1pLm1hcChmdW5jdGlvbihQLEMpe3JldHVybiBfcihQLHQuY3Jvc3NPcmlnaW4sQShDKSl9KX1mdW5jdGlvbiBrdShyLGUsdCxuKXtuPW58fGFlLnRleHR1cmVPcHRpb25zO2NvbnN0IGk9bi50YXJnZXR8fHVlO3IuYmluZFRleHR1cmUoaSxlKTtsZXQgbz1uLndpZHRoLHM9bi5oZWlnaHQsYT1uLmRlcHRoO2NvbnN0IHU9bi5sZXZlbHx8MCxmPW4uaW50ZXJuYWxGb3JtYXR8fG4uZm9ybWF0fHxGLGM9JGUoZiksZD1uLmZvcm1hdHx8Yy5mb3JtYXQseT1uLnR5cGV8fEZ1KHIsdCxjLnR5cGUpO2lmKEJlKHQpKXQgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSYmKHQ9bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIpKTtlbHNle2NvbnN0IHY9RW4oeSk7dD1uZXcgdih0KX1jb25zdCBfPVJ1KGYseSksbT10LmJ5dGVMZW5ndGgvXztpZihtJTEpdGhyb3cibGVuZ3RoIHdyb25nIHNpemUgZm9yIGZvcm1hdDogIitEbihyLGQpO2xldCB4O2lmKGk9PT15ZXx8aT09PV9lKWlmKCFvJiYhcyYmIWEpe2NvbnN0IHY9TWF0aC5jYnJ0KG0pO2lmKHYlMSE9PTApdGhyb3ciY2FuJ3QgZ3Vlc3MgY3ViZSBzaXplIG9mIGFycmF5IG9mIG51bUVsZW1lbnRzOiAiK207bz12LHM9dixhPXZ9ZWxzZSBvJiYoIXN8fCFhKT8oeD1fdChyLGkscyxhLG0vbykscz14LndpZHRoLGE9eC5oZWlnaHQpOnMmJighb3x8IWEpPyh4PV90KHIsaSxvLGEsbS9zKSxvPXgud2lkdGgsYT14LmhlaWdodCk6KHg9X3QocixpLG8scyxtL2EpLG89eC53aWR0aCxzPXguaGVpZ2h0KTtlbHNlIHg9X3QocixpLG8scyxtKSxvPXgud2lkdGgscz14LmhlaWdodDtpZihxbihyKSxyLnBpeGVsU3RvcmVpKGxyLG4udW5wYWNrQWxpZ25tZW50fHwxKSxEZShyLG4pLGk9PT1jZSl7Y29uc3Qgdj1fL3QuQllURVNfUEVSX0VMRU1FTlQsYj1tLzYqdjt5cihyLG4pLmZvckVhY2goQT0+e2NvbnN0IFA9YipBLm5keCxDPXQuc3ViYXJyYXkoUCxQK2IpO3IudGV4SW1hZ2UyRChBLmZhY2UsdSxmLG8scywwLGQseSxDKX0pfWVsc2UgaT09PXllfHxpPT09X2U/ci50ZXhJbWFnZTNEKGksdSxmLG8scyxhLDAsZCx5LHQpOnIudGV4SW1hZ2UyRChpLHUsZixvLHMsMCxkLHksdCk7cmV0dXJue3dpZHRoOm8saGVpZ2h0OnMsZGVwdGg6YSx0eXBlOnl9fWZ1bmN0aW9uIEx1KHIsZSx0KXtjb25zdCBuPXQudGFyZ2V0fHx1ZTtyLmJpbmRUZXh0dXJlKG4sZSk7Y29uc3QgaT10LmxldmVsfHwwLG89dC5pbnRlcm5hbEZvcm1hdHx8dC5mb3JtYXR8fEYscz0kZShvKSxhPXQuZm9ybWF0fHxzLmZvcm1hdCx1PXQudHlwZXx8cy50eXBlO2lmKERlKHIsdCksbj09PWNlKWZvcihsZXQgZj0wO2Y8NjsrK2Ypci50ZXhJbWFnZTJEKHVyK2YsaSxvLHQud2lkdGgsdC5oZWlnaHQsMCxhLHUsbnVsbCk7ZWxzZSBuPT09eWV8fG49PT1fZT9yLnRleEltYWdlM0QobixpLG8sdC53aWR0aCx0LmhlaWdodCx0LmRlcHRoLDAsYSx1LG51bGwpOnIudGV4SW1hZ2UyRChuLGksbyx0LndpZHRoLHQuaGVpZ2h0LDAsYSx1LG51bGwpfWZ1bmN0aW9uIEtuKHIsZSx0KXt0PXR8fHplLGU9ZXx8YWUudGV4dHVyZU9wdGlvbnM7Y29uc3Qgbj1yLmNyZWF0ZVRleHR1cmUoKSxpPWUudGFyZ2V0fHx1ZTtsZXQgbz1lLndpZHRofHwxLHM9ZS5oZWlnaHR8fDE7Y29uc3QgYT1lLmludGVybmFsRm9ybWF0fHxGO3IuYmluZFRleHR1cmUoaSxuKSxpPT09Y2UmJihyLnRleFBhcmFtZXRlcmkoaSxmdCxjdCksci50ZXhQYXJhbWV0ZXJpKGksbHQsY3QpKTtsZXQgdT1lLnNyYztpZih1KWlmKHR5cGVvZiB1PT0iZnVuY3Rpb24iJiYodT11KHIsZSkpLHR5cGVvZiB1PT0ic3RyaW5nIilOdShyLG4sZSx0KTtlbHNlIGlmKEJlKHUpfHxBcnJheS5pc0FycmF5KHUpJiYodHlwZW9mIHVbMF09PSJudW1iZXIifHxBcnJheS5pc0FycmF5KHVbMF0pfHxCZSh1WzBdKSkpe2NvbnN0IGY9a3UocixuLHUsZSk7bz1mLndpZHRoLHM9Zi5oZWlnaHR9ZWxzZSBBcnJheS5pc0FycmF5KHUpJiYodHlwZW9mIHVbMF09PSJzdHJpbmcifHxRbih1WzBdKSk/aT09PWNlP1V1KHIsbixlLHQpOkJ1KHIsbixlLHQpOihZbihyLG4sdSxlKSxvPXUud2lkdGgscz11LmhlaWdodCk7ZWxzZSBMdShyLG4sZSk7cmV0dXJuIEdlKGUpJiZocihyLG4sZSxvLHMsYSksWG4ocixuLGUpLG59Y29uc3QgZ3I9VG47ZnVuY3Rpb24gSm4ocil7cmV0dXJuIHR5cGVvZiBkb2N1bWVudDwidSImJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHIpOm51bGx9Y29uc3QgeHQ9MzM5ODQsZ3Q9MzQ5NjIsJHU9MzQ5NjMsR3U9MzU3MTMsenU9MzU3MTQsSHU9MzU2MzIsVnU9MzU2MzMsV3U9MzU5ODEsWm49MzU3MTgsanU9MzU3MjEscXU9MzU5NzEsWHU9MzUzODIsWXU9MzUzOTYsUXU9MzUzOTgsS3U9MzUzOTIsSnU9MzUzOTUsYnQ9NTEyNixlaT0zNTY2NCx0aT0zNTY2NSxyaT0zNTY2Nixicj01MTI0LG5pPTM1NjY3LGlpPTM1NjY4LG9pPTM1NjY5LHNpPTM1NjcwLGFpPTM1NjcxLHVpPTM1NjcyLGNpPTM1NjczLGZpPTM1Njc0LGxpPTM1Njc1LGRpPTM1Njc2LFp1PTM1Njc4LGVjPTM1NjgwLHRjPTM1Njc5LHJjPTM1NjgyLG5jPTM1Njg1LGljPTM1Njg2LG9jPTM1Njg3LHNjPTM1Njg4LGFjPTM1Njg5LHVjPTM1NjkwLGNjPTM2Mjg5LGZjPTM2MjkyLGxjPTM2MjkzLHZyPTUxMjUsbWk9MzYyOTQsaGk9MzYyOTUscGk9MzYyOTYsZGM9MzYyOTgsbWM9MzYyOTksaGM9MzYzMDAscGM9MzYzMDMseWM9MzYzMDYsX2M9MzYzMDcseGM9MzYzMDgsZ2M9MzYzMTEsdnQ9MzU1MyxFdD0zNDA2NyxFcj0zMjg3OSxUdD0zNTg2NixFPXt9O2Z1bmN0aW9uIHlpKHIsZSl7cmV0dXJuIEVbZV0uYmluZFBvaW50fWZ1bmN0aW9uIGJjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTFmKGUsdCl9fWZ1bmN0aW9uIHZjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTFmdihlLHQpfX1mdW5jdGlvbiBFYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0yZnYoZSx0KX19ZnVuY3Rpb24gVGMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtM2Z2KGUsdCl9fWZ1bmN0aW9uIEFjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTRmdihlLHQpfX1mdW5jdGlvbiBfaShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0xaShlLHQpfX1mdW5jdGlvbiB4aShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0xaXYoZSx0KX19ZnVuY3Rpb24gZ2kocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMml2KGUsdCl9fWZ1bmN0aW9uIGJpKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTNpdihlLHQpfX1mdW5jdGlvbiB2aShyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm00aXYoZSx0KX19ZnVuY3Rpb24gd2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMXVpKGUsdCl9fWZ1bmN0aW9uIFJjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTF1aXYoZSx0KX19ZnVuY3Rpb24gU2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtMnVpdihlLHQpfX1mdW5jdGlvbiBJYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm0zdWl2KGUsdCl9fWZ1bmN0aW9uIEZjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybTR1aXYoZSx0KX19ZnVuY3Rpb24gUGMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4MmZ2KGUsITEsdCl9fWZ1bmN0aW9uIERjKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe3IudW5pZm9ybU1hdHJpeDNmdihlLCExLHQpfX1mdW5jdGlvbiBNYyhyLGUpe3JldHVybiBmdW5jdGlvbih0KXtyLnVuaWZvcm1NYXRyaXg0ZnYoZSwhMSx0KX19ZnVuY3Rpb24gQ2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4MngzZnYoZSwhMSx0KX19ZnVuY3Rpb24gT2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4M3gyZnYoZSwhMSx0KX19ZnVuY3Rpb24gTmMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4Mng0ZnYoZSwhMSx0KX19ZnVuY3Rpb24gVWMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4NHgyZnYoZSwhMSx0KX19ZnVuY3Rpb24gQmMocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4M3g0ZnYoZSwhMSx0KX19ZnVuY3Rpb24ga2MocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7ci51bmlmb3JtTWF0cml4NHgzZnYoZSwhMSx0KX19ZnVuY3Rpb24gTChyLGUsdCxuKXtjb25zdCBpPXlpKHIsZSk7cmV0dXJuIFVlKHIpP2Z1bmN0aW9uKG8pe2xldCBzLGE7b3IocixvKT8ocz1vLGE9bnVsbCk6KHM9by50ZXh0dXJlLGE9by5zYW1wbGVyKSxyLnVuaWZvcm0xaShuLHQpLHIuYWN0aXZlVGV4dHVyZSh4dCt0KSxyLmJpbmRUZXh0dXJlKGkscyksci5iaW5kU2FtcGxlcih0LGEpfTpmdW5jdGlvbihvKXtyLnVuaWZvcm0xaShuLHQpLHIuYWN0aXZlVGV4dHVyZSh4dCt0KSxyLmJpbmRUZXh0dXJlKGksbyl9fWZ1bmN0aW9uICQocixlLHQsbixpKXtjb25zdCBvPXlpKHIsZSkscz1uZXcgSW50MzJBcnJheShpKTtmb3IobGV0IGE9MDthPGk7KythKXNbYV09dCthO3JldHVybiBVZShyKT9mdW5jdGlvbihhKXtyLnVuaWZvcm0xaXYobixzKSxhLmZvckVhY2goZnVuY3Rpb24odSxmKXtyLmFjdGl2ZVRleHR1cmUoeHQrc1tmXSk7bGV0IGMsZDtvcihyLHUpPyhjPXUsZD1udWxsKTooYz11LnRleHR1cmUsZD11LnNhbXBsZXIpLHIuYmluZFNhbXBsZXIodCxkKSxyLmJpbmRUZXh0dXJlKG8sYyl9KX06ZnVuY3Rpb24oYSl7ci51bmlmb3JtMWl2KG4scyksYS5mb3JFYWNoKGZ1bmN0aW9uKHUsZil7ci5hY3RpdmVUZXh0dXJlKHh0K3NbZl0pLHIuYmluZFRleHR1cmUobyx1KX0pfX1FW2J0XT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo0LHNldHRlcjpiYyxhcnJheVNldHRlcjp2Y30sRVtlaV09e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6OCxzZXR0ZXI6RWMsY29sczoyfSxFW3RpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6VGMsY29sczozfSxFW3JpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZToxNixzZXR0ZXI6QWMsY29sczo0fSxFW2JyXT17VHlwZTpJbnQzMkFycmF5LHNpemU6NCxzZXR0ZXI6X2ksYXJyYXlTZXR0ZXI6eGl9LEVbbmldPXtUeXBlOkludDMyQXJyYXksc2l6ZTo4LHNldHRlcjpnaSxjb2xzOjJ9LEVbaWldPXtUeXBlOkludDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6YmksY29sczozfSxFW29pXT17VHlwZTpJbnQzMkFycmF5LHNpemU6MTYsc2V0dGVyOnZpLGNvbHM6NH0sRVt2cl09e1R5cGU6VWludDMyQXJyYXksc2l6ZTo0LHNldHRlcjp3YyxhcnJheVNldHRlcjpSY30sRVttaV09e1R5cGU6VWludDMyQXJyYXksc2l6ZTo4LHNldHRlcjpTYyxjb2xzOjJ9LEVbaGldPXtUeXBlOlVpbnQzMkFycmF5LHNpemU6MTIsc2V0dGVyOkljLGNvbHM6M30sRVtwaV09e1R5cGU6VWludDMyQXJyYXksc2l6ZToxNixzZXR0ZXI6RmMsY29sczo0fSxFW3NpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjQsc2V0dGVyOl9pLGFycmF5U2V0dGVyOnhpfSxFW2FpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjgsc2V0dGVyOmdpLGNvbHM6Mn0sRVt1aV09e1R5cGU6VWludDMyQXJyYXksc2l6ZToxMixzZXR0ZXI6YmksY29sczozfSxFW2NpXT17VHlwZTpVaW50MzJBcnJheSxzaXplOjE2LHNldHRlcjp2aSxjb2xzOjR9LEVbZmldPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjMyLHNldHRlcjpQYyxyb3dzOjIsY29sczoyfSxFW2xpXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo0OCxzZXR0ZXI6RGMscm93czozLGNvbHM6M30sRVtkaV09e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NjQsc2V0dGVyOk1jLHJvd3M6NCxjb2xzOjR9LEVbbmNdPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjMyLHNldHRlcjpDYyxyb3dzOjIsY29sczozfSxFW2ljXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTozMixzZXR0ZXI6TmMscm93czoyLGNvbHM6NH0sRVtvY109e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NDgsc2V0dGVyOk9jLHJvd3M6Myxjb2xzOjJ9LEVbc2NdPXtUeXBlOkZsb2F0MzJBcnJheSxzaXplOjQ4LHNldHRlcjpCYyxyb3dzOjMsY29sczo0fSxFW2FjXT17VHlwZTpGbG9hdDMyQXJyYXksc2l6ZTo2NCxzZXR0ZXI6VWMscm93czo0LGNvbHM6Mn0sRVt1Y109e1R5cGU6RmxvYXQzMkFycmF5LHNpemU6NjQsc2V0dGVyOmtjLHJvd3M6NCxjb2xzOjN9LEVbWnVdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OnZ0fSxFW2VjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpFdH0sRVt0Y109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6RXJ9LEVbcmNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OnZ0fSxFW2NjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpUdH0sRVtmY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6VHR9LEVbbGNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkV0fSxFW2RjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDp2dH0sRVttY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6RXJ9LEVbaGNdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkV0fSxFW3BjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpUdH0sRVt5Y109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6dnR9LEVbX2NdPXtUeXBlOm51bGwsc2l6ZTowLHNldHRlcjpMLGFycmF5U2V0dGVyOiQsYmluZFBvaW50OkVyfSxFW3hjXT17VHlwZTpudWxsLHNpemU6MCxzZXR0ZXI6TCxhcnJheVNldHRlcjokLGJpbmRQb2ludDpFdH0sRVtnY109e1R5cGU6bnVsbCxzaXplOjAsc2V0dGVyOkwsYXJyYXlTZXR0ZXI6JCxiaW5kUG9pbnQ6VHR9O2Z1bmN0aW9uIEF0KHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQudmFsdWUpc3dpdGNoKHIuZGlzYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLHQudmFsdWUubGVuZ3RoKXtjYXNlIDQ6ci52ZXJ0ZXhBdHRyaWI0ZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDM6ci52ZXJ0ZXhBdHRyaWIzZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDI6ci52ZXJ0ZXhBdHRyaWIyZnYoZSx0LnZhbHVlKTticmVhaztjYXNlIDE6ci52ZXJ0ZXhBdHRyaWIxZnYoZSx0LnZhbHVlKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigidGhlIGxlbmd0aCBvZiBhIGZsb2F0IGNvbnN0YW50IHZhbHVlIG11c3QgYmUgYmV0d2VlbiAxIGFuZCA0ISIpfWVsc2Ugci5iaW5kQnVmZmVyKGd0LHQuYnVmZmVyKSxyLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUpLHIudmVydGV4QXR0cmliUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8YnQsdC5ub3JtYWxpemV8fCExLHQuc3RyaWRlfHwwLHQub2Zmc2V0fHwwKSxyLnZlcnRleEF0dHJpYkRpdmlzb3ImJnIudmVydGV4QXR0cmliRGl2aXNvcihlLHQuZGl2aXNvcnx8MCl9fWZ1bmN0aW9uIGxlKHIsZSl7cmV0dXJuIGZ1bmN0aW9uKHQpe2lmKHQudmFsdWUpaWYoci5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoZSksdC52YWx1ZS5sZW5ndGg9PT00KXIudmVydGV4QXR0cmliNGl2KGUsdC52YWx1ZSk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIlRoZSBsZW5ndGggb2YgYW4gaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhIik7ZWxzZSByLmJpbmRCdWZmZXIoZ3QsdC5idWZmZXIpLHIuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZSksci52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8YnIsdC5zdHJpZGV8fDAsdC5vZmZzZXR8fDApLHIudmVydGV4QXR0cmliRGl2aXNvciYmci52ZXJ0ZXhBdHRyaWJEaXZpc29yKGUsdC5kaXZpc29yfHwwKX19ZnVuY3Rpb24gd3QocixlKXtyZXR1cm4gZnVuY3Rpb24odCl7aWYodC52YWx1ZSlpZihyLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShlKSx0LnZhbHVlLmxlbmd0aD09PTQpci52ZXJ0ZXhBdHRyaWI0dWl2KGUsdC52YWx1ZSk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoIlRoZSBsZW5ndGggb2YgYW4gdW5zaWduZWQgaW50ZWdlciBjb25zdGFudCB2YWx1ZSBtdXN0IGJlIDQhIik7ZWxzZSByLmJpbmRCdWZmZXIoZ3QsdC5idWZmZXIpLHIuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoZSksci52ZXJ0ZXhBdHRyaWJJUG9pbnRlcihlLHQubnVtQ29tcG9uZW50c3x8dC5zaXplLHQudHlwZXx8dnIsdC5zdHJpZGV8fDAsdC5vZmZzZXR8fDApLHIudmVydGV4QXR0cmliRGl2aXNvciYmci52ZXJ0ZXhBdHRyaWJEaXZpc29yKGUsdC5kaXZpc29yfHwwKX19ZnVuY3Rpb24gVHIocixlLHQpe2NvbnN0IG49dC5zaXplLGk9dC5jb3VudDtyZXR1cm4gZnVuY3Rpb24obyl7ci5iaW5kQnVmZmVyKGd0LG8uYnVmZmVyKTtjb25zdCBzPW8uc2l6ZXx8by5udW1Db21wb25lbnRzfHxuLGE9cy9pLHU9by50eXBlfHxidCxjPUVbdV0uc2l6ZSpzLGQ9by5ub3JtYWxpemV8fCExLHk9by5vZmZzZXR8fDAsXz1jL2k7Zm9yKGxldCBtPTA7bTxpOysrbSlyLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGUrbSksci52ZXJ0ZXhBdHRyaWJQb2ludGVyKGUrbSxhLHUsZCxjLHkrXyptKSxyLnZlcnRleEF0dHJpYkRpdmlzb3ImJnIudmVydGV4QXR0cmliRGl2aXNvcihlK20sby5kaXZpc29yfHwwKX19Y29uc3QgRD17fTtEW2J0XT17c2l6ZTo0LHNldHRlcjpBdH0sRFtlaV09e3NpemU6OCxzZXR0ZXI6QXR9LERbdGldPXtzaXplOjEyLHNldHRlcjpBdH0sRFtyaV09e3NpemU6MTYsc2V0dGVyOkF0fSxEW2JyXT17c2l6ZTo0LHNldHRlcjpsZX0sRFtuaV09e3NpemU6OCxzZXR0ZXI6bGV9LERbaWldPXtzaXplOjEyLHNldHRlcjpsZX0sRFtvaV09e3NpemU6MTYsc2V0dGVyOmxlfSxEW3ZyXT17c2l6ZTo0LHNldHRlcjp3dH0sRFttaV09e3NpemU6OCxzZXR0ZXI6d3R9LERbaGldPXtzaXplOjEyLHNldHRlcjp3dH0sRFtwaV09e3NpemU6MTYsc2V0dGVyOnd0fSxEW3NpXT17c2l6ZTo0LHNldHRlcjpsZX0sRFthaV09e3NpemU6OCxzZXR0ZXI6bGV9LERbdWldPXtzaXplOjEyLHNldHRlcjpsZX0sRFtjaV09e3NpemU6MTYsc2V0dGVyOmxlfSxEW2ZpXT17c2l6ZTo0LHNldHRlcjpUcixjb3VudDoyfSxEW2xpXT17c2l6ZTo5LHNldHRlcjpUcixjb3VudDozfSxEW2RpXT17c2l6ZToxNixzZXR0ZXI6VHIsY291bnQ6NH07Y29uc3QgTGM9L0VSUk9SOlxzKlxkKzooXGQrKS9naTtmdW5jdGlvbiAkYyhyLGU9IiIsdD0wKXtjb25zdCBuPVsuLi5lLm1hdGNoQWxsKExjKV0saT1uZXcgTWFwKG4ubWFwKChvLHMpPT57Y29uc3QgYT1wYXJzZUludChvWzFdKSx1PW5bcysxXSxmPXU/dS5pbmRleDplLmxlbmd0aCxjPWUuc3Vic3RyaW5nKG8uaW5kZXgsZik7cmV0dXJuW2EtMSxjXX0pKTtyZXR1cm4gci5zcGxpdChgCmApLm1hcCgobyxzKT0+e2NvbnN0IGE9aS5nZXQocyk7cmV0dXJuYCR7cysxK3R9OiAke299JHthP2AKCl5eXiAke2F9YDoiIn1gfSkuam9pbihgCmApfWNvbnN0IEVpPS9eWyBcdF0qXG4vO2Z1bmN0aW9uIFRpKHIpe2xldCBlPTA7cmV0dXJuIEVpLnRlc3QocikmJihlPTEscj1yLnJlcGxhY2UoRWksIiIpKSx7bGluZU9mZnNldDplLHNoYWRlclNvdXJjZTpyfX1mdW5jdGlvbiBHYyhyLGUpe3JldHVybiByLmVycm9yQ2FsbGJhY2soZSksci5jYWxsYmFjayYmc2V0VGltZW91dCgoKT0+e3IuY2FsbGJhY2soYCR7ZX0KJHtyLmVycm9ycy5qb2luKGAKYCl9YCl9KSxudWxsfWZ1bmN0aW9uIHpjKHIsZSx0LG4pe2lmKG49bnx8Z3IsIXIuZ2V0U2hhZGVyUGFyYW1ldGVyKHQsR3UpKXtjb25zdCBvPXIuZ2V0U2hhZGVySW5mb0xvZyh0KSx7bGluZU9mZnNldDpzLHNoYWRlclNvdXJjZTphfT1UaShyLmdldFNoYWRlclNvdXJjZSh0KSksdT1gJHskYyhhLG8scyl9CkVycm9yIGNvbXBpbGluZyAke0RuKHIsZSl9OiAke299YDtyZXR1cm4gbih1KSx1fXJldHVybiIifWZ1bmN0aW9uIEFyKHIsZSx0KXtsZXQgbixpLG87aWYodHlwZW9mIGU9PSJmdW5jdGlvbiImJih0PWUsZT12b2lkIDApLHR5cGVvZiByPT0iZnVuY3Rpb24iKXQ9cixyPXZvaWQgMDtlbHNlIGlmKHImJiFBcnJheS5pc0FycmF5KHIpKXtjb25zdCBmPXI7dD1mLmVycm9yQ2FsbGJhY2sscj1mLmF0dHJpYkxvY2F0aW9ucyxuPWYudHJhbnNmb3JtRmVlZGJhY2tWYXJ5aW5ncyxpPWYudHJhbnNmb3JtRmVlZGJhY2tNb2RlLG89Zi5jYWxsYmFja31jb25zdCBzPXR8fGdyLGE9W10sdT17ZXJyb3JDYWxsYmFjayhmLC4uLmMpe2EucHVzaChmKSxzKGYsLi4uYyl9LHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M6bix0cmFuc2Zvcm1GZWVkYmFja01vZGU6aSxjYWxsYmFjazpvLGVycm9yczphfTt7bGV0IGY9e307QXJyYXkuaXNBcnJheShyKT9yLmZvckVhY2goZnVuY3Rpb24oYyxkKXtmW2NdPWU/ZVtkXTpkfSk6Zj1yfHx7fSx1LmF0dHJpYkxvY2F0aW9ucz1mfXJldHVybiB1fWNvbnN0IEhjPVsiVkVSVEVYX1NIQURFUiIsIkZSQUdNRU5UX1NIQURFUiJdO2Z1bmN0aW9uIFZjKHIsZSl7aWYoZS5pbmRleE9mKCJmcmFnIik+PTApcmV0dXJuIEh1O2lmKGUuaW5kZXhPZigidmVydCIpPj0wKXJldHVybiBWdX1mdW5jdGlvbiBXYyhyLGUsdCl7Y29uc3Qgbj1yLmdldEF0dGFjaGVkU2hhZGVycyhlKTtmb3IoY29uc3QgaSBvZiBuKXQuaGFzKGkpJiZyLmRlbGV0ZVNoYWRlcihpKTtyLmRlbGV0ZVByb2dyYW0oZSl9Y29uc3QgamM9KHI9MCk9Pm5ldyBQcm9taXNlKGU9PnNldFRpbWVvdXQoZSxyKSk7ZnVuY3Rpb24gcWMocixlLHQpe2NvbnN0IG49ci5jcmVhdGVQcm9ncmFtKCkse2F0dHJpYkxvY2F0aW9uczppLHRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3M6byx0cmFuc2Zvcm1GZWVkYmFja01vZGU6c309QXIodCk7Zm9yKGxldCBhPTA7YTxlLmxlbmd0aDsrK2Epe2xldCB1PWVbYV07aWYodHlwZW9mIHU9PSJzdHJpbmciKXtjb25zdCBmPUpuKHUpLGM9Zj9mLnRleHQ6dTtsZXQgZD1yW0hjW2FdXTtmJiZmLnR5cGUmJihkPVZjKHIsZi50eXBlKXx8ZCksdT1yLmNyZWF0ZVNoYWRlcihkKSxyLnNoYWRlclNvdXJjZSh1LFRpKGMpLnNoYWRlclNvdXJjZSksci5jb21waWxlU2hhZGVyKHUpLHIuYXR0YWNoU2hhZGVyKG4sdSl9fU9iamVjdC5lbnRyaWVzKGkpLmZvckVhY2goKFthLHVdKT0+ci5iaW5kQXR0cmliTG9jYXRpb24obix1LGEpKTt7bGV0IGE9bzthJiYoYS5hdHRyaWJzJiYoYT1hLmF0dHJpYnMpLEFycmF5LmlzQXJyYXkoYSl8fChhPU9iamVjdC5rZXlzKGEpKSxyLnRyYW5zZm9ybUZlZWRiYWNrVmFyeWluZ3MobixhLHN8fFd1KSl9cmV0dXJuIHIubGlua1Byb2dyYW0obiksbn1mdW5jdGlvbiBYYyhyLGUsdCxuLGkpe2NvbnN0IG89QXIodCxuLGkpLHM9bmV3IFNldChlKSxhPXFjKHIsZSxvKTtmdW5jdGlvbiB1KGYsYyl7Y29uc3QgZD1RYyhmLGMsby5lcnJvckNhbGxiYWNrKTtyZXR1cm4gZCYmV2MoZixjLHMpLGR9aWYoby5jYWxsYmFjayl7WWMocixhKS50aGVuKCgpPT57Y29uc3QgZj11KHIsYSk7by5jYWxsYmFjayhmLGY/dm9pZCAwOmEpfSk7cmV0dXJufXJldHVybiB1KHIsYSk/dm9pZCAwOmF9YXN5bmMgZnVuY3Rpb24gWWMocixlKXtjb25zdCB0PXIuZ2V0RXh0ZW5zaW9uKCJLSFJfcGFyYWxsZWxfc2hhZGVyX2NvbXBpbGUiKSxuPXQ/KG8scyk9Pm8uZ2V0UHJvZ3JhbVBhcmFtZXRlcihzLHQuQ09NUExFVElPTl9TVEFUVVNfS0hSKTooKT0+ITA7bGV0IGk9MDtkbyBhd2FpdCBqYyhpKSxpPTFlMy82MDt3aGlsZSghbihyLGUpKX1mdW5jdGlvbiBRYyhyLGUsdCl7aWYodD10fHxnciwhci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsenUpKXtjb25zdCBpPXIuZ2V0UHJvZ3JhbUluZm9Mb2coZSk7dChgRXJyb3IgaW4gcHJvZ3JhbSBsaW5raW5nOiAke2l9YCk7Y29uc3Qgcz1yLmdldEF0dGFjaGVkU2hhZGVycyhlKS5tYXAoYT0+emMocixyLmdldFNoYWRlclBhcmFtZXRlcihhLHIuU0hBREVSX1RZUEUpLGEsdCkpO3JldHVybmAke2l9CiR7cy5maWx0ZXIoYT0+YSkuam9pbihgCmApfWB9fWZ1bmN0aW9uIEtjKHIsZSx0LG4saSl7cmV0dXJuIFhjKHIsZSx0LG4saSl9ZnVuY3Rpb24gQWkocil7Y29uc3QgZT1yLm5hbWU7cmV0dXJuIGUuc3RhcnRzV2l0aCgiZ2xfIil8fGUuc3RhcnRzV2l0aCgid2ViZ2xfIil9Y29uc3QgSmM9LyhcLnxcW3xdfFx3KykvZyxaYz1yPT5yPj0iMCImJnI8PSI5IjtmdW5jdGlvbiBlZihyLGUsdCxuKXtjb25zdCBpPXIuc3BsaXQoSmMpLmZpbHRlcihhPT5hIT09IiIpO2xldCBvPTAscz0iIjtmb3IoOzspe2NvbnN0IGE9aVtvKytdO3MrPWE7Y29uc3QgdT1aYyhhWzBdKSxmPXU/cGFyc2VJbnQoYSk6YTtpZih1JiYocys9aVtvKytdKSxvPT09aS5sZW5ndGgpe3RbZl09ZTticmVha31lbHNle2NvbnN0IGQ9aVtvKytdLHk9ZD09PSJbIixfPXRbZl18fCh5P1tdOnt9KTt0W2ZdPV8sdD1fLG5bc109bltzXXx8ZnVuY3Rpb24obSl7cmV0dXJuIGZ1bmN0aW9uKHgpe3dpKG0seCl9fShfKSxzKz1kfX19ZnVuY3Rpb24gdGYocixlKXtsZXQgdD0wO2Z1bmN0aW9uIG4oYSx1LGYpe2NvbnN0IGM9dS5uYW1lLmVuZHNXaXRoKCJbMF0iKSxkPXUudHlwZSx5PUVbZF07aWYoIXkpdGhyb3cgbmV3IEVycm9yKGB1bmtub3duIHR5cGU6IDB4JHtkLnRvU3RyaW5nKDE2KX1gKTtsZXQgXztpZih5LmJpbmRQb2ludCl7Y29uc3QgbT10O3QrPXUuc2l6ZSxjP189eS5hcnJheVNldHRlcihyLGQsbSxmLHUuc2l6ZSk6Xz15LnNldHRlcihyLGQsbSxmLHUuc2l6ZSl9ZWxzZSB5LmFycmF5U2V0dGVyJiZjP189eS5hcnJheVNldHRlcihyLGYpOl89eS5zZXR0ZXIocixmKTtyZXR1cm4gXy5sb2NhdGlvbj1mLF99Y29uc3QgaT17fSxvPXt9LHM9ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsWm4pO2ZvcihsZXQgYT0wO2E8czsrK2Epe2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtKGUsYSk7aWYoQWkodSkpY29udGludWU7bGV0IGY9dS5uYW1lO2YuZW5kc1dpdGgoIlswXSIpJiYoZj1mLnN1YnN0cigwLGYubGVuZ3RoLTMpKTtjb25zdCBjPXIuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsdS5uYW1lKTtpZihjKXtjb25zdCBkPW4oZSx1LGMpO2lbZl09ZCxlZihmLGQsbyxpKX19cmV0dXJuIGl9ZnVuY3Rpb24gcmYocixlKXtjb25zdCB0PXt9LG49ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUscXUpO2ZvcihsZXQgaT0wO2k8bjsrK2kpe2NvbnN0IG89ci5nZXRUcmFuc2Zvcm1GZWVkYmFja1ZhcnlpbmcoZSxpKTt0W28ubmFtZV09e2luZGV4OmksdHlwZTpvLnR5cGUsc2l6ZTpvLnNpemV9fXJldHVybiB0fWZ1bmN0aW9uIG5mKHIsZSl7Y29uc3QgdD1yLmdldFByb2dyYW1QYXJhbWV0ZXIoZSxabiksbj1bXSxpPVtdO2ZvcihsZXQgYT0wO2E8dDsrK2Epe2kucHVzaChhKSxuLnB1c2goe30pO2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtKGUsYSk7blthXS5uYW1lPXUubmFtZX1bWyJVTklGT1JNX1RZUEUiLCJ0eXBlIl0sWyJVTklGT1JNX1NJWkUiLCJzaXplIl0sWyJVTklGT1JNX0JMT0NLX0lOREVYIiwiYmxvY2tOZHgiXSxbIlVOSUZPUk1fT0ZGU0VUIiwib2Zmc2V0Il1dLmZvckVhY2goZnVuY3Rpb24oYSl7Y29uc3QgdT1hWzBdLGY9YVsxXTtyLmdldEFjdGl2ZVVuaWZvcm1zKGUsaSxyW3VdKS5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7bltkXVtmXT1jfSl9KTtjb25zdCBvPXt9LHM9ci5nZXRQcm9ncmFtUGFyYW1ldGVyKGUsWHUpO2ZvcihsZXQgYT0wO2E8czsrK2Epe2NvbnN0IHU9ci5nZXRBY3RpdmVVbmlmb3JtQmxvY2tOYW1lKGUsYSksZj17aW5kZXg6ci5nZXRVbmlmb3JtQmxvY2tJbmRleChlLHUpLHVzZWRCeVZlcnRleFNoYWRlcjpyLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihlLGEsWXUpLHVzZWRCeUZyYWdtZW50U2hhZGVyOnIuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKGUsYSxRdSksc2l6ZTpyLmdldEFjdGl2ZVVuaWZvcm1CbG9ja1BhcmFtZXRlcihlLGEsS3UpLHVuaWZvcm1JbmRpY2VzOnIuZ2V0QWN0aXZlVW5pZm9ybUJsb2NrUGFyYW1ldGVyKGUsYSxKdSl9O2YudXNlZD1mLnVzZWRCeVZlcnRleFNoYWRlcnx8Zi51c2VkQnlGcmFnbWVudFNoYWRlcixvW3VdPWZ9cmV0dXJue2Jsb2NrU3BlY3M6byx1bmlmb3JtRGF0YTpufX1mdW5jdGlvbiB3aShyLGUpe2Zvcihjb25zdCB0IGluIGUpe2NvbnN0IG49clt0XTt0eXBlb2Ygbj09ImZ1bmN0aW9uIj9uKGVbdF0pOndpKHJbdF0sZVt0XSl9fWZ1bmN0aW9uIFJpKHIsLi4uZSl7Y29uc3QgdD1yLnVuaWZvcm1TZXR0ZXJzfHxyLG49ZS5sZW5ndGg7Zm9yKGxldCBpPTA7aTxuOysraSl7Y29uc3Qgbz1lW2ldO2lmKEFycmF5LmlzQXJyYXkobykpe2NvbnN0IHM9by5sZW5ndGg7Zm9yKGxldCBhPTA7YTxzOysrYSlSaSh0LG9bYV0pfWVsc2UgZm9yKGNvbnN0IHMgaW4gbyl7Y29uc3QgYT10W3NdO2EmJmEob1tzXSl9fX1mdW5jdGlvbiBvZihyLGUpe2NvbnN0IHQ9e30sbj1yLmdldFByb2dyYW1QYXJhbWV0ZXIoZSxqdSk7Zm9yKGxldCBpPTA7aTxuOysraSl7Y29uc3Qgbz1yLmdldEFjdGl2ZUF0dHJpYihlLGkpO2lmKEFpKG8pKWNvbnRpbnVlO2NvbnN0IHM9ci5nZXRBdHRyaWJMb2NhdGlvbihlLG8ubmFtZSksYT1EW28udHlwZV0sdT1hLnNldHRlcihyLHMsYSk7dS5sb2NhdGlvbj1zLHRbby5uYW1lXT11fXJldHVybiB0fWZ1bmN0aW9uIHNmKHIsZSl7Zm9yKGNvbnN0IHQgaW4gZSl7Y29uc3Qgbj1yW3RdO24mJm4oZVt0XSl9fWZ1bmN0aW9uIGFmKHIsZSx0KXt0LnZlcnRleEFycmF5T2JqZWN0P3IuYmluZFZlcnRleEFycmF5KHQudmVydGV4QXJyYXlPYmplY3QpOihzZihlLmF0dHJpYlNldHRlcnN8fGUsdC5hdHRyaWJzKSx0LmluZGljZXMmJnIuYmluZEJ1ZmZlcigkdSx0LmluZGljZXMpKX1mdW5jdGlvbiBTaShyLGUpe2NvbnN0IHQ9dGYocixlKSxuPW9mKHIsZSksaT17cHJvZ3JhbTplLHVuaWZvcm1TZXR0ZXJzOnQsYXR0cmliU2V0dGVyczpufTtyZXR1cm4gVWUocikmJihpLnVuaWZvcm1CbG9ja1NwZWM9bmYocixlKSxpLnRyYW5zZm9ybUZlZWRiYWNrSW5mbz1yZihyLGUpKSxpfWNvbnN0IHVmPS9cc3x7fH18Oy87ZnVuY3Rpb24gY2YocixlLHQsbixpKXtjb25zdCBvPUFyKHQsbixpKSxzPVtdO2lmKGU9ZS5tYXAoZnVuY3Rpb24oZil7aWYoIXVmLnRlc3QoZikpe2NvbnN0IGM9Sm4oZik7aWYoYylmPWMudGV4dDtlbHNle2NvbnN0IGQ9YG5vIGVsZW1lbnQgd2l0aCBpZDogJHtmfWA7by5lcnJvckNhbGxiYWNrKGQpLHMucHVzaChkKX19cmV0dXJuIGZ9KSxzLmxlbmd0aClyZXR1cm4gR2MobywiIik7Y29uc3QgYT1vLmNhbGxiYWNrO2EmJihvLmNhbGxiYWNrPShmLGMpPT57YShmLGY/dm9pZCAwOlNpKHIsYykpfSk7Y29uc3QgdT1LYyhyLGUsbyk7cmV0dXJuIHU/U2kocix1KTpudWxsfWNvbnN0IGZmPTQsSWk9NTEyMztmdW5jdGlvbiBsZihyLGUsdCxuLGksbyl7dD10PT09dm9pZCAwP2ZmOnQ7Y29uc3Qgcz1lLmluZGljZXMsYT1lLmVsZW1lbnRUeXBlLHU9bj09PXZvaWQgMD9lLm51bUVsZW1lbnRzOm47aT1pPT09dm9pZCAwPzA6aSxhfHxzP28hPT12b2lkIDA/ci5kcmF3RWxlbWVudHNJbnN0YW5jZWQodCx1LGE9PT12b2lkIDA/SWk6ZS5lbGVtZW50VHlwZSxpLG8pOnIuZHJhd0VsZW1lbnRzKHQsdSxhPT09dm9pZCAwP0lpOmUuZWxlbWVudFR5cGUsaSk6byE9PXZvaWQgMD9yLmRyYXdBcnJheXNJbnN0YW5jZWQodCxpLHUsbyk6ci5kcmF3QXJyYXlzKHQsaSx1KX1jb25zdCBGaT0zNjE2MCxSdD0zNjE2MSxkZj0zNTUzLG1mPTUxMjEsaGY9NjQwMixwZj02NDA4LHlmPTMzMTkwLF9mPTM2MDEyLHhmPTM1MDU2LGdmPTM2MDEzLGJmPTMyODU0LHZmPTMyODU1LEVmPTM2MTk0LFBpPTMzMTg5LERpPTY0MDEsTWk9MzYxNjgsd3I9MzQwNDEsUnI9MzYwNjQsU3Q9MzYwOTYsQ2k9MzYxMjgsU3I9MzMzMDYsSXI9MzMwNzEsRnI9OTcyOSxUZj1be2Zvcm1hdDpwZix0eXBlOm1mLG1pbjpGcix3cmFwOklyfSx7Zm9ybWF0OndyfV0scT17fTtxW3dyXT1TcixxW0RpXT1DaSxxW01pXT1DaSxxW2hmXT1TdCxxW1BpXT1TdCxxW3lmXT1TdCxxW19mXT1TdCxxW3hmXT1TcixxW2dmXT1TcjtmdW5jdGlvbiBBZihyLGUpe3JldHVybiBxW3JdfHxxW2VdfWNvbnN0IGRlPXt9O2RlW2JmXT0hMCxkZVt2Zl09ITAsZGVbRWZdPSEwLGRlW3dyXT0hMCxkZVtQaV09ITAsZGVbRGldPSEwLGRlW01pXT0hMDtmdW5jdGlvbiB3ZihyKXtyZXR1cm4gZGVbcl19Y29uc3QgUmY9MzI7ZnVuY3Rpb24gU2Yocil7cmV0dXJuIHI+PVJyJiZyPFJyK1JmfWZ1bmN0aW9uIEl0KHIsZSx0LG4pe2NvbnN0IGk9Rmksbz1yLmNyZWF0ZUZyYW1lYnVmZmVyKCk7ci5iaW5kRnJhbWVidWZmZXIoaSxvKSx0PXR8fHIuZHJhd2luZ0J1ZmZlcldpZHRoLG49bnx8ci5kcmF3aW5nQnVmZmVySGVpZ2h0LGU9ZXx8VGY7Y29uc3Qgcz1bXSxhPXtmcmFtZWJ1ZmZlcjpvLGF0dGFjaG1lbnRzOltdLHdpZHRoOnQsaGVpZ2h0Om59O3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24odSxmKXtsZXQgYz11LmF0dGFjaG1lbnQ7Y29uc3QgZD11LnNhbXBsZXMseT11LmZvcm1hdDtsZXQgXz11LmF0dGFjaG1lbnRQb2ludHx8QWYoeSx1LmludGVybmFsRm9ybWF0KTtpZihffHwoXz1ScitmKSxTZihfKSYmcy5wdXNoKF8pLCFjKWlmKGQhPT12b2lkIDB8fHdmKHkpKWM9ci5jcmVhdGVSZW5kZXJidWZmZXIoKSxyLmJpbmRSZW5kZXJidWZmZXIoUnQsYyksZD4xP3IucmVuZGVyYnVmZmVyU3RvcmFnZU11bHRpc2FtcGxlKFJ0LGQseSx0LG4pOnIucmVuZGVyYnVmZmVyU3RvcmFnZShSdCx5LHQsbik7ZWxzZXtjb25zdCBtPU9iamVjdC5hc3NpZ24oe30sdSk7bS53aWR0aD10LG0uaGVpZ2h0PW4sbS5hdXRvPT09dm9pZCAwJiYobS5hdXRvPSExLG0ubWluPW0ubWlufHxtLm1pbk1hZ3x8RnIsbS5tYWc9bS5tYWd8fG0ubWluTWFnfHxGcixtLndyYXBTPW0ud3JhcFN8fG0ud3JhcHx8SXIsbS53cmFwVD1tLndyYXBUfHxtLndyYXB8fElyKSxjPUtuKHIsbSl9aWYoQnMocixjKSlyLmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKGksXyxSdCxjKTtlbHNlIGlmKG9yKHIsYykpdS5sYXllciE9PXZvaWQgMD9yLmZyYW1lYnVmZmVyVGV4dHVyZUxheWVyKGksXyxjLHUubGV2ZWx8fDAsdS5sYXllcik6ci5mcmFtZWJ1ZmZlclRleHR1cmUyRChpLF8sdS50YXJnZXR8fGRmLGMsdS5sZXZlbHx8MCk7ZWxzZSB0aHJvdyBuZXcgRXJyb3IoInVua25vd24gYXR0YWNobWVudCB0eXBlIik7YS5hdHRhY2htZW50cy5wdXNoKGMpfSksci5kcmF3QnVmZmVycyYmci5kcmF3QnVmZmVycyhzKSxhfWZ1bmN0aW9uIElmKHIsZSx0KXt0PXR8fEZpLGU/KHIuYmluZEZyYW1lYnVmZmVyKHQsZS5mcmFtZWJ1ZmZlciksci52aWV3cG9ydCgwLDAsZS53aWR0aCxlLmhlaWdodCkpOihyLmJpbmRGcmFtZWJ1ZmZlcih0LG51bGwpLHIudmlld3BvcnQoMCwwLHIuZHJhd2luZ0J1ZmZlcldpZHRoLHIuZHJhd2luZ0J1ZmZlckhlaWdodCkpfWZ1bmN0aW9uIFMocixlKXtyZXR1cm4oKT0+ZSBpbnN0YW5jZW9mIFdlYkdMVGV4dHVyZT9lOktuKHIse3NyYzplLHdyYXA6ci5DTEFNUF9UT19FREdFfSl9Y29uc3QgT2k9MjtjbGFzcyBiZXtjb25zdHJ1Y3RvcihlKXtwKHRoaXMsImlkIiwiXyIpO3AodGhpcywiY29udGV4dCIpO3AodGhpcywib3V0cHV0Iik7cCh0aGlzLCJmYmkiKTtwKHRoaXMsIm9wdGlvbnMiKTtwKHRoaXMsInByb2dyYW1JbmZvIik7cCh0aGlzLCJidWZmZXJJbmZvIik7cCh0aGlzLCJwcm9maWxlciIpO3AodGhpcywibGFzdFJ1biIpO2NvbnN0e2NvbnRleHQ6dCx3aWR0aDpuLGhlaWdodDppfT1lO3RoaXMuY29udGV4dD10LHRoaXMub3B0aW9ucz1lO2NvbnN0IG89dGhpcy5idWlsZERlZmluZXMoKTt0aGlzLnByb2dyYW1JbmZvPWNmKHRoaXMuY29udGV4dCxbbyt0aGlzLmdldFZlcnRleFNoYWRlcigpLG8rdGhpcy5nZXRGcmFnbWVudFNoYWRlcigpXSksdGhpcy5idWZmZXJJbmZvPWFhKHRoaXMuY29udGV4dCx0aGlzLmdldEJ1ZmZlcnMoKSksdGhpcy5mYmk9SXQodGhpcy5jb250ZXh0LFt7Zm9ybWF0OnRoaXMuY29udGV4dC5SR0JBLHR5cGU6dGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnRoaXMuY29udGV4dC5MSU5FQVIsd3JhcDp0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLG4saSksdGhpcy5vdXRwdXQ9dGhpcy5mYmkuYXR0YWNobWVudHNbMF19cmVzaXplT3V0cHV0KGUsdCl7dGhpcy5mYmk9SXQodGhpcy5jb250ZXh0LFt7Zm9ybWF0OnRoaXMuY29udGV4dC5SR0JBLHR5cGU6dGhpcy5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnRoaXMuY29udGV4dC5MSU5FQVIsd3JhcDp0aGlzLmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLGUsdCksdGhpcy5vcHRpb25zLndpZHRoPWUsdGhpcy5vcHRpb25zLmhlaWdodD10LHRoaXMub3V0cHV0PXRoaXMuZmJpLmF0dGFjaG1lbnRzWzBdfWdldERlZmluZXMoKXtyZXR1cm57fX1nZXRCdWZmZXJzKCl7cmV0dXJue3Bvc2l0aW9uOntudW1Db21wb25lbnRzOjIsZGF0YTpbLTEsLTEsLTEsMSwxLC0xLDEsMSwtMSwxLDEsLTFdfSx0ZXh0dXJlX2Nvb3JkOntudW1Db21wb25lbnRzOjIsZGF0YTpbMCwwLDAsMSwxLDAsMSwxLDAsMSwxLDBdfX19YnVpbGREZWZpbmVzKCl7bGV0IGU9IiI7Y29uc3QgdD10aGlzLmdldERlZmluZXMoKTtmb3IobGV0IG4gaW4gdCllKz1gI2RlZmluZSAke259ICR7dFtuXS50b0ZpeGVkKDEpfQpgO3JldHVybiBlfXJ1bihlKXt2YXIgaSxvLHMsYSx1LGY7KGk9dGhpcy5wcm9maWxlcik9PW51bGx8fGkucHVzaENvbnRleHQoYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCksKG89dGhpcy5wcm9maWxlcik9PW51bGx8fG8ucHVzaENvbnRleHQoYFske3RoaXMuaWR9XSBVTklGT1JNU2ApO2Zvcihjb25zdCBjIGluIGUpdHlwZW9mIGVbY109PSJmdW5jdGlvbiImJigocz10aGlzLnByb2ZpbGVyKT09bnVsbHx8cy5wdXNoQ29udGV4dChgWyR7dGhpcy5pZH1dIFVOSSA6ICR7Y31gKSxlW2NdPWVbY10oKSwoYT10aGlzLnByb2ZpbGVyKT09bnVsbHx8YS5wb3BDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JIDogJHtjfWApKTsodT10aGlzLnByb2ZpbGVyKT09bnVsbHx8dS5wb3BDb250ZXh0KGBbJHt0aGlzLmlkfV0gVU5JRk9STVNgKTtjb25zdCB0PURhdGUubm93KCk7bGV0IG49MDt0aGlzLmxhc3RSdW4mJihuPSh0LXRoaXMubGFzdFJ1bikvMWUzKSx0aGlzLmxhc3RSdW49dCx0aGlzLmNvbnRleHQudmlld3BvcnQoMCwwLHRoaXMuY29udGV4dC5jYW52YXMud2lkdGgsdGhpcy5jb250ZXh0LmNhbnZhcy5oZWlnaHQpLHRoaXMuY29udGV4dC51c2VQcm9ncmFtKHRoaXMucHJvZ3JhbUluZm8ucHJvZ3JhbSksYWYodGhpcy5jb250ZXh0LHRoaXMucHJvZ3JhbUluZm8sdGhpcy5idWZmZXJJbmZvKSxSaSh0aGlzLnByb2dyYW1JbmZvLHtkZWx0YTpuLGNhbnZhczpbdGhpcy5jb250ZXh0LmNhbnZhcy53aWR0aCx0aGlzLmNvbnRleHQuY2FudmFzLmhlaWdodF0sLi4uZX0pLElmKHRoaXMuY29udGV4dCx0aGlzLm9wdGlvbnMuZGlzYWJsZUZyYW1lYnVmZmVyP251bGw6dGhpcy5mYmkpLGxmKHRoaXMuY29udGV4dCx0aGlzLmJ1ZmZlckluZm8pLChmPXRoaXMucHJvZmlsZXIpPT1udWxsfHxmLnBvcENvbnRleHQoYFske3RoaXMuaWR9XSBQUk9HIDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YCl9c2V0UHJvZmlsZXIoZSl7dGhpcy5wcm9maWxlcj1lfX12YXIgRmY9YHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwoKdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKdW5pZm9ybSB2ZWMyIGNhbnZhczsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKdW5pZm9ybSBzYW1wbGVyMkQgbWFzazsKCnZlYzQgbG9vcCgpOwoKdm9pZCBtYWluKCkgeyBnbF9GcmFnQ29sb3IgPSBsb29wKCk7IH0KYCxQZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgO2NsYXNzIERmIGV4dGVuZHMgYmV7Z2V0RGVmaW5lcygpe3ZhciBlO3JldHVybntSQURJVVM6KGU9dGhpcy5vcHRpb25zLnJhZGl1cykhPW51bGw/ZToxfX1nZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBGZit0aGlzLmNyZWF0ZUxvb3BGdW5jdGlvbigpfWdldFZlcnRleFNoYWRlcigpe3JldHVybiBQZn1jcmVhdGVMb29wRnVuY3Rpb24oKXt2YXIgdDtsZXQgZT0odD10aGlzLm9wdGlvbnMucmFkaXVzKSE9bnVsbD90OjE7cmV0dXJuYAoKICAgICAgICB2ZWM0IGxvb3AoKSB7IAogICAgICAgICAgICB2ZWM0IHJlc3VsdCA9IHZlYzQoMCwwLDAsMCk7CiAgICAgICAgICAgIGZsb2F0IGZhY3RvclN1bSA9IDAuOwoKICAgICAgICAgICAgdmVjMiBub3JtYWxpemVkUmFkaXVzID0gdmVjMigtJHtlfS4pIC8gY2FudmFzOwogICAgICAgICAgICB2ZWMyIG5vcm1hbGl6ZWRJbmNyZW1lbnQgPSB2ZWMyKDEuKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBkaWZmID0gbm9ybWFsaXplZFJhZGl1czsKICAgICAgICAgICAgZmxvYXQgbWF4TGVuZ3RoID0gbGVuZ3RoKG5vcm1hbGl6ZWRSYWRpdXMpOwoKICAgICAgICAgICAgZm9yKGludCB5PS0ke2V9OyB5PCR7ZSsxfTsgKyt5KSB7CiAgICAgICAgICAgICAgICBmb3IoaW50IHg9LSR7ZX07IHg8JHtlKzF9OyArK3gpIHsKICAgICAgICAgICAgICAgICAgICBmbG9hdCBmYWN0b3IgPSAoMS4tIHRleHR1cmUyRChtYXNrLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpLmEpICogKG1heExlbmd0aCAtIGxlbmd0aChkaWZmKSkgLyBtYXhMZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGZhY3RvciAqIHRleHR1cmUyRCh0ZXh0dXJlLCBfdGV4dHVyZV9jb29yZCArIGRpZmYpOwogICAgICAgICAgICAgICAgICAgIGZhY3RvclN1bSArPSBmYWN0b3I7CiAgICAgICAgICAgICAgICAgICAgZGlmZi54ICs9IG5vcm1hbGl6ZWRJbmNyZW1lbnQueDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRpZmYueSArPSBub3JtYWxpemVkSW5jcmVtZW50Lnk7CiAgICAgICAgICAgICAgICBkaWZmLnggPSBub3JtYWxpemVkUmFkaXVzLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdCAvIGZhY3RvclN1bTsKICAgICAgICB9YH19dmFyIE1mPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCnVuaWZvcm0gc2FtcGxlcjJEIGJhY2tncm91bmQ7CnVuaWZvcm0gc2FtcGxlcjJEIGZvcmVncm91bmQ7CnVuaWZvcm0gc2FtcGxlcjJEIHRocmVzaG9sZDsKCnZvaWQgbWFpbigpIHsKICB2ZWM0IGJhY2tncm91bmRDb2xvciA9IHRleHR1cmUyRChiYWNrZ3JvdW5kLCBfdGV4dHVyZV9jb29yZCk7CiAgdmVjNCBmb3JlZ3JvdW5kQ29sb3IgPSB0ZXh0dXJlMkQoZm9yZWdyb3VuZCwgX3RleHR1cmVfY29vcmQpOwogIHZlYzQgdHJlc2hvbGRDb2xvciA9IHRleHR1cmUyRCh0aHJlc2hvbGQsIF90ZXh0dXJlX2Nvb3JkKTsKICBnbF9GcmFnQ29sb3IgPSBmb3JlZ3JvdW5kQ29sb3IgKiB0cmVzaG9sZENvbG9yLmEgKwogICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvciAqICgxLiAtIHRyZXNob2xkQ29sb3IuYSk7Cn0KYCxDZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7Cn0KYDtjbGFzcyBQciBleHRlbmRzIGJle2dldEZyYWdtZW50U2hhZGVyKCl7cmV0dXJuIE1mfWdldFZlcnRleFNoYWRlcigpe3JldHVybiBDZn19Y2xhc3MgRHJ7Y29uc3RydWN0b3IoKXtwKHRoaXMsInN0ZXBzIixbXSk7cCh0aGlzLCJwcm9maWxlciIpfWFkZFN0ZXAoZSl7dGhpcy5zdGVwcy5wdXNoKGUpfWFzeW5jIHJ1bigpe2Zvcihjb25zdCBlIG9mIHRoaXMuc3RlcHMpZS5wcm9ncmFtLnJ1bihlLmdldFVuaWZvcm1zKCkpfXJlc2l6ZU91dHB1dChlLHQpe3ZhciBuLGk7KG49dGhpcy5wcm9maWxlcik9PW51bGx8fG4ucHVzaENvbnRleHQoYFBJUCBbJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9XWApO2Zvcihjb25zdCBvIG9mIHRoaXMuc3RlcHMpby5wcmV2ZW50UmVzaXplfHxvLnByb2dyYW0ucmVzaXplT3V0cHV0KGUsdCk7KGk9dGhpcy5wcm9maWxlcik9PW51bGx8fGkucG9wQ29udGV4dChgUElQIFske3RoaXMuY29uc3RydWN0b3IubmFtZX1dYCl9c2V0UHJvZmlsZXIoZSl7dGhpcy5wcm9maWxlcj1lO2Zvcihjb25zdCB0IG9mIHRoaXMuc3RlcHMpdC5wcm9ncmFtLnNldFByb2ZpbGVyKGUpfXNldElkKGUpe2Zvcihjb25zdCB0IG9mIHRoaXMuc3RlcHMpdC5wcm9ncmFtLmlkPWV9fWNsYXNzIE1yIGV4dGVuZHMgRHJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpO3AodGhpcywicHJlY2lzZU1hc2tFbmFibGVkIiwhMSl9fWNvbnN0IE9mPTEwLE5mPTIsVWY9ODtjbGFzcyBCZiBleHRlbmRzIE1ye2NvbnN0cnVjdG9yKHQsbil7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0TWFzayIpO3AodGhpcywiYmx1ciIpO3RoaXMuY29udGV4dD10LHRoaXMucmFkaXVzPW47Y29uc3QgaT17Y29udGV4dDp0LGhlaWdodDp0LmNhbnZhcy5oZWlnaHQsd2lkdGg6dC5jYW52YXMud2lkdGh9O3RoaXMuYmx1cj1uZXcgRGYoey4uLmkscmFkaXVzOm4sLi4udGhpcy5nZXRCbHVyVGV4dHVyZVNpemUodC5jYW52YXMud2lkdGgsdC5jYW52YXMuaGVpZ2h0KX0pO2NvbnN0IG89bmV3IFByKHsuLi5pLGRpc2FibGVGcmFtZWJ1ZmZlcjohMH0pO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTp0aGlzLmJsdXIscHJldmVudFJlc2l6ZTohMCxnZXRVbmlmb3JtczooKT0+KHt0ZXh0dXJlOlModCx0aGlzLmlucHV0SW1hZ2UpLG1hc2s6Uyh0LHRoaXMuaW5wdXRNYXNrKX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOm8sZ2V0VW5pZm9ybXM6KCk9Pih7YmFja2dyb3VuZDpTKHQsdGhpcy5ibHVyLm91dHB1dCksZm9yZWdyb3VuZDpTKHQsdGhpcy5pbnB1dEltYWdlKSx0aHJlc2hvbGQ6Uyh0LHRoaXMuaW5wdXRNYXNrKX0pfSl9Z2V0Qmx1clRleHR1cmVTaXplKHQsbil7Y29uc3QgaT10aGlzLnJhZGl1cz5PZj9VZjpOZjtyZXR1cm57d2lkdGg6TWF0aC5tYXgoT2ksdC9pKSxoZWlnaHQ6TWF0aC5tYXgoT2ksbi9pKX19c2V0RGF0YSh0LG4pe3RoaXMuaW5wdXRJbWFnZT10LHRoaXMuaW5wdXRNYXNrPW59cmVzaXplT3V0cHV0KHQsbil7c3VwZXIucmVzaXplT3V0cHV0KHQsbik7Y29uc3QgaT10aGlzLmdldEJsdXJUZXh0dXJlU2l6ZSh0LG4pO3RoaXMuYmx1ci5yZXNpemVPdXRwdXQoaS53aWR0aCxpLmhlaWdodCl9fWNsYXNzIE5pIGV4dGVuZHMgTXJ7Y29uc3RydWN0b3IodCl7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0QmFja2dyb3VuZEltYWdlIik7cCh0aGlzLCJpbnB1dE1hc2siKTtwKHRoaXMsInByZWNpc2VNYXNrRW5hYmxlZCIsITApO3RoaXMuY29udGV4dD10O2NvbnN0IG49e2NvbnRleHQ6dCxoZWlnaHQ6dC5jYW52YXMuaGVpZ2h0LHdpZHRoOnQuY2FudmFzLndpZHRofSxpPW5ldyBQcih7Li4ubixkaXNhYmxlRnJhbWVidWZmZXI6ITB9KTt0aGlzLmFkZFN0ZXAoe3Byb2dyYW06aSxnZXRVbmlmb3JtczooKT0+KHtiYWNrZ3JvdW5kOlModCx0aGlzLmlucHV0QmFja2dyb3VuZEltYWdlKSxmb3JlZ3JvdW5kOlModCx0aGlzLmlucHV0SW1hZ2UpLHRocmVzaG9sZDpTKHQsdGhpcy5pbnB1dE1hc2spfSl9KX1zZXREYXRhKHQsbil7dGhpcy5pbnB1dEltYWdlPXQsdGhpcy5pbnB1dE1hc2s9bn19Y2xhc3Mga2YgZXh0ZW5kcyBOaXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyk7cCh0aGlzLCJmcmFtZVJlYWRlciIpO3AodGhpcywicHJlY2lzZU1hc2tFbmFibGVkIiwhMCl9c2V0IGlucHV0VmlkZW8odCl7dGhpcy5mcmFtZVJlYWRlcj10LmdldFJlYWRlcigpLHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCl9YXN5bmMgcnVuKCl7dGhpcy5mcmFtZVJlYWRlciYmKGF3YWl0IHN1cGVyLnJ1bigpLHRoaXMucmVhZE5leHRWaWRlb0ZyYW1lKCkpfWFzeW5jIHJlYWROZXh0VmlkZW9GcmFtZSgpe3ZhciBuO2NvbnN0IHQ9YXdhaXQoKG49dGhpcy5mcmFtZVJlYWRlcik9PW51bGw/dm9pZCAwOm4ucmVhZCgpKTt0IT1udWxsJiZ0LnZhbHVlJiYodGhpcy5pbnB1dEJhY2tncm91bmRJbWFnZT1hd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh0LnZhbHVlKSx0LnZhbHVlLmNsb3NlKCkpfX12YXIgTGY9YHByZWNpc2lvbiBtZWRpdW1wIGZsb2F0OwoKdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKdW5pZm9ybSB2ZWMyIGNhbnZhczsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKCnZlYzQgbG9vcCgpOwoKdm9pZCBtYWluKCkgeyBnbF9GcmFnQ29sb3IgPSBsb29wKCk7IH0KYCwkZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgLENyPShyPT4ocltyLkxJTkVBUj0wXT0iTElORUFSIixyW3IuR0FVU1NJQU49MV09IkdBVVNTSUFOIixyKSkoQ3J8fHt9KTtjbGFzcyBVaSBleHRlbmRzIGJle2dldERlZmluZXMoKXt2YXIgZTtyZXR1cm57UkFESVVTOihlPXRoaXMub3B0aW9ucy5yYWRpdXMpIT1udWxsP2U6MX19Z2V0RnJhZ21lbnRTaGFkZXIoKXtyZXR1cm4gTGYrdGhpcy5jcmVhdGVMb29wRnVuY3Rpb24oKX1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gJGZ9Y3JlYXRlTG9vcEZ1bmN0aW9uKCl7dmFyIHQ7bGV0IGU9KHQ9dGhpcy5vcHRpb25zLnJhZGl1cykhPW51bGw/dDoxO3JldHVybmAKCiAgICAgICAgdmVjNCBsb29wKCkgeyAKICAgICAgICAgICAgdmVjNCByZXN1bHQgPSB2ZWM0KDAsMCwwLDApOwogICAgICAgICAgICBmbG9hdCBmYWN0b3JTdW0gPSAwLjsKCiAgICAgICAgICAgIHZlYzIgbm9ybWFsaXplZFJhZGl1cyA9IHZlYzIoLSR7ZX0uKSAvIGNhbnZhczsKICAgICAgICAgICAgdmVjMiBub3JtYWxpemVkSW5jcmVtZW50ID0gdmVjMigxLikgLyBjYW52YXM7CiAgICAgICAgICAgIHZlYzIgZGlmZiA9IG5vcm1hbGl6ZWRSYWRpdXM7CgogICAgICAgICAgICBmb3IoaW50IHk9LSR7ZX07IHk8JHtlKzF9OyArK3kpIHsKICAgICAgICAgICAgICAgIGZvcihpbnQgeD0tJHtlfTsgeDwke2UrMX07ICsreCkgewogICAgICAgICAgICAgICAgICAgIGZsb2F0IGZhY3RvciA9IDEuOwogICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBmYWN0b3IgKiB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQgKyBkaWZmKTsKICAgICAgICAgICAgICAgICAgICBmYWN0b3JTdW0gKz0gZmFjdG9yOwogICAgICAgICAgICAgICAgICAgIGRpZmYueCArPSBub3JtYWxpemVkSW5jcmVtZW50Lng7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkaWZmLnkgKz0gbm9ybWFsaXplZEluY3JlbWVudC55OwogICAgICAgICAgICAgICAgZGlmZi54ID0gbm9ybWFsaXplZFJhZGl1cy54OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQgLyBmYWN0b3JTdW07CiAgICAgICAgfWB9Z2V0RmFjdG9yKGUsdCl7c3dpdGNoKHRoaXMub3B0aW9ucy50eXBlKXtjYXNlIDE6cmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKGUsdCk7Y2FzZSAwOmRlZmF1bHQ6cmV0dXJuIHRoaXMuZ2V0TGluZWFyRmFjdG9yKGUsdCl9fWdldExpbmVhckZhY3RvcihlLHQpe3JldHVybiAxfWdldEdhdXNzaWFuRmFjdG9yKGUsdCl7dmFyIHU7Y29uc3Qgbj1NYXRoLlBJKjIsaT1NYXRoLm1heCgodT10aGlzLm9wdGlvbnMucmFkaXVzKSE9bnVsbD91OjEsMSksbz0xLyhuKmkqKjIpLHM9LShlKioyK3QqKjIpLGE9bypzO3JldHVybiBvKk1hdGguRSoqYX19Y2xhc3MgR2YgZXh0ZW5kcyBNcntjb25zdHJ1Y3Rvcih0LG4pe3N1cGVyKCk7cCh0aGlzLCJpbnB1dEltYWdlIik7cCh0aGlzLCJpbnB1dE1hc2siKTt0aGlzLmNvbnRleHQ9dDtjb25zdCBpPXtjb250ZXh0OnQsaGVpZ2h0OnQuY2FudmFzLmhlaWdodCx3aWR0aDp0LmNhbnZhcy53aWR0aH0sbz1uZXcgVWkoey4uLmkscmFkaXVzOm4sdHlwZTpDci5HQVVTU0lBTn0pLHM9bmV3IFByKHsuLi5pLGRpc2FibGVGcmFtZWJ1ZmZlcjohMH0pO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpvLGdldFVuaWZvcm1zOigpPT4oe3RleHR1cmU6Uyh0LHRoaXMuaW5wdXRJbWFnZSl9KX0pLHRoaXMuYWRkU3RlcCh7cHJvZ3JhbTpzLGdldFVuaWZvcm1zOigpPT4oe2JhY2tncm91bmQ6Uyh0LHRoaXMuaW5wdXRJbWFnZSksZm9yZWdyb3VuZDpTKHQsby5vdXRwdXQpLHRocmVzaG9sZDpTKHQsdGhpcy5pbnB1dE1hc2spfSl9KX1zZXREYXRhKHQsbil7dGhpcy5pbnB1dEltYWdlPXQsdGhpcy5pbnB1dE1hc2s9bn19Y2xhc3MgT3IgZXh0ZW5kcyBiZXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KTtwKHRoaXMsImZiaTIiKTt0aGlzLmZiaTI9SXQodC5jb250ZXh0LFt7Zm9ybWF0OnQuY29udGV4dC5SR0JBLHR5cGU6dC5jb250ZXh0LlVOU0lHTkVEX0JZVEUsbWluOnQuY29udGV4dC5MSU5FQVIsbWFnOnQuY29udGV4dC5MSU5FQVIsd3JhcDp0LmNvbnRleHQuQ0xBTVBfVE9fRURHRX1dLHQud2lkdGgsdC5oZWlnaHQpfXJ1bih0KXtjb25zdCBuPXRoaXMuZmJpO3RoaXMuZmJpPXRoaXMuZmJpMix0aGlzLmZiaTI9bix0aGlzLm91dHB1dD10aGlzLmZiaS5hdHRhY2htZW50c1swXSxzdXBlci5ydW4oey4uLnQscHJldmlvdXNfcmVuZGVyaW5nOnRoaXMuZmJpMi5hdHRhY2htZW50c1swXX0pfXJlc2l6ZU91dHB1dCh0LG4pe3N1cGVyLnJlc2l6ZU91dHB1dCh0LG4pLHRoaXMuZmJpMj1JdCh0aGlzLmNvbnRleHQsW3tmb3JtYXQ6dGhpcy5jb250ZXh0LlJHQkEsdHlwZTp0aGlzLmNvbnRleHQuVU5TSUdORURfQllURSxtaW46dGhpcy5jb250ZXh0LkxJTkVBUix3cmFwOnRoaXMuY29udGV4dC5DTEFNUF9UT19FREdFfV0sdCxuKX19dmFyIHpmPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCi8vIHVuaWZvcm0gZmxvYXQgdHJlc2hvbGQ7CnVuaWZvcm0gc2FtcGxlcjJEIGltYWdlX25vdzsKdW5pZm9ybSBzYW1wbGVyMkQgaW1hZ2VfYmVmb3JlOwp1bmlmb3JtIHNhbXBsZXIyRCBtYXNrX25vdzsKdW5pZm9ybSBzYW1wbGVyMkQgbWFza19iZWZvcmU7CnVuaWZvcm0gc2FtcGxlcjJEIHByZXZpb3VzX3JlbmRlcmluZzsKdW5pZm9ybSB2ZWMyIGNhbnZhczsKCnVuaWZvcm0gZmxvYXQgZGVsdGE7CgpmbG9hdCBjdXJyZW50X2ZhY3RvciA9IDAuNjk7CmZsb2F0IHByZXZpb3VzX2ZhY3RvciA9IDAuNzQ7CmZsb2F0IHRocmVzaG9sZF9hY3RpdmF0aW9uID0gMC41NDsKCmZsb2F0IG1hcChmbG9hdCB2YWx1ZSwgZmxvYXQgbWluMSwgZmxvYXQgbWF4MSwgZmxvYXQgbWluMiwgZmxvYXQgbWF4MikgewogIHJldHVybiBtaW4yICsgKHZhbHVlIC0gbWluMSkgKiAobWF4MiAtIG1pbjIpIC8gKG1heDEgLSBtaW4xKTsKfQoKZmxvYXQgZ2V0VGhyZXNob2xkKCkgewogIHZlYzQgY29sb3IgPSB2ZWM0KDAuKTsKICBmb3IgKGZsb2F0IHkgPSAtNi47IHkgPCA3LjsgeSArPSAxLikgewogICAgZm9yIChmbG9hdCB4ID0gLTYuOyB4IDwgNy47IHggKz0gMS4pIHsKICAgICAgdmVjNCBpbWFnZV9ub3dfY29sb3IgPQogICAgICAgICAgdGV4dHVyZTJEKGltYWdlX25vdywgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTsKICAgICAgdmVjNCBpbWFnZV9iZWZvcmVfY29sb3IgPQogICAgICAgICAgdGV4dHVyZTJEKGltYWdlX2JlZm9yZSwgX3RleHR1cmVfY29vcmQgKyB2ZWMyKHgsIHkpIC8gY2FudmFzKTsKICAgICAgY29sb3IgKz0gYWJzKGltYWdlX2JlZm9yZV9jb2xvciAtIGltYWdlX25vd19jb2xvcik7CiAgICB9CiAgfQogIHJldHVybiAoY29sb3IueCArIGNvbG9yLnkgKyBjb2xvci56KSAvICgzLiAqIDkuKTsKfQoKdm9pZCBtYWluKCkgewogIGZsb2F0IHRyZXNob2xkX2lucHV0ID0gLjQ7CiAgZmxvYXQgdHJlc2hvbGRfcHJldmlvdXNfcmVuZGVyaW5nID0gLjk4OwoKICB2ZWM0IG1hc2tfbm93X2NvbG9yID0gdGV4dHVyZTJEKG1hc2tfbm93LCBfdGV4dHVyZV9jb29yZCk7CiAgdmVjNCBtYXNrX2JlZm9yZV9jb2xvciA9IHRleHR1cmUyRChtYXNrX2JlZm9yZSwgX3RleHR1cmVfY29vcmQpOwogIHZlYzQgcHJldmlvdXNfcmVuZGVyaW5nX2NvbG9yID0gdGV4dHVyZTJEKHByZXZpb3VzX3JlbmRlcmluZywgX3RleHR1cmVfY29vcmQpOwoKICB2ZWMzIG1hc2tfZGlmZiA9IGFicyhtYXNrX2JlZm9yZV9jb2xvci54eXogLSBtYXNrX25vd19jb2xvci54eXopOwogIGZsb2F0IGZsaWNrZXJpbmcgPSBtYXNrX2RpZmYueDsKICBmbG9hdCB0aHJlc2hvbGQgPSBnZXRUaHJlc2hvbGQoKTsKICBpZiAodGhyZXNob2xkIDwgdGhyZXNob2xkX2FjdGl2YXRpb24pIHsKICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoZmxpY2tlcmluZywgMC4sIDAuLCAxLikgKiBjdXJyZW50X2ZhY3RvciArCiAgICAgICAgICAgICAgICAgICBwcmV2aW91c19yZW5kZXJpbmdfY29sb3IgKiBwcmV2aW91c19mYWN0b3I7CiAgICBnbF9GcmFnQ29sb3IgKj0gKDEuIC0gdGhyZXNob2xkKTsKICB9Cn0KYCxIZj1gdmFyeWluZyB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwoKYXR0cmlidXRlIHZlYzIgcG9zaXRpb247CmF0dHJpYnV0ZSB2ZWMyIHRleHR1cmVfY29vcmQ7Cgp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAwLiwgMS4pOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfQpgO2NsYXNzIFZmIGV4dGVuZHMgT3J7Z2V0RnJhZ21lbnRTaGFkZXIoKXtyZXR1cm4gemZ9Z2V0VmVydGV4U2hhZGVyKCl7cmV0dXJuIEhmfX12YXIgV2Y9YCN2ZXJzaW9uIDMwMCBlcwovLyBodHRwczovL2dpdGh1Yi5jb20vVm9sY29taXgvdmlydHVhbC1iYWNrZ3JvdW5kL2Jsb2IvbWFpbi9zcmMvcGlwZWxpbmVzL3dlYmdsMi9qb2ludEJpbGF0ZXJhbEZpbHRlclN0YWdlLnRzCgpwcmVjaXNpb24gaGlnaHAgZmxvYXQ7CnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0X2ZyYW1lOwp1bmlmb3JtIHNhbXBsZXIyRCBzZWdtZW50YXRpb25fbWFzazsKdW5pZm9ybSBzYW1wbGVyMkQgdGhyZXNob2xkOwp1bmlmb3JtIHZlYzIgdGV4ZWxfc2l6ZTsKdW5pZm9ybSBmbG9hdCBzdGVwOwp1bmlmb3JtIGZsb2F0IHJhZGl1czsKdW5pZm9ybSBmbG9hdCBvZmZzZXQ7CnVuaWZvcm0gZmxvYXQgc2lnbWFfdGV4ZWw7CnVuaWZvcm0gZmxvYXQgc2lnbWFfY29sb3I7CgppbiB2ZWMyIF90ZXh0dXJlX2Nvb3JkOwpvdXQgdmVjNCBvdXRDb2xvcjsKCmZsb2F0IGdhdXNzaWFuKGZsb2F0IHgsIGZsb2F0IHNpZ21hKSB7CiAgZmxvYXQgY29lZmYgPSAtMC41IC8gKHNpZ21hICogc2lnbWEgKiA0LjAgKyAxLjBlLTYpOwogIHJldHVybiBleHAoKHggKiB4KSAqIGNvZWZmKTsKfQoKdm9pZCBtYWluKCkgewogIHZlYzIgY2VudGVyQ29vcmQgPSBfdGV4dHVyZV9jb29yZDsKICB2ZWMzIGNlbnRlckNvbG9yID0gdGV4dHVyZShpbnB1dF9mcmFtZSwgY2VudGVyQ29vcmQpLnJnYjsKICBmbG9hdCBuZXdWYWwgPSAwLjA7CiAgZmxvYXQgc3BhY2VXZWlnaHQgPSAwLjA7CiAgZmxvYXQgY29sb3JXZWlnaHQgPSAwLjA7CiAgZmxvYXQgdG90YWxXZWlnaHQgPSAwLjA7CiAgLy8gU3Vic2FtcGxlIGtlcm5lbCBzcGFjZS4KICBmb3IgKGZsb2F0IGkgPSAtcmFkaXVzICsgb2Zmc2V0OyBpIDw9IHJhZGl1czsgaSArPSBzdGVwKSB7CiAgICBmb3IgKGZsb2F0IGogPSAtcmFkaXVzICsgb2Zmc2V0OyBqIDw9IHJhZGl1czsgaiArPSBzdGVwKSB7CiAgICAgIHZlYzIgc2hpZnQgPSB2ZWMyKGosIGkpICogdGV4ZWxfc2l6ZTsKICAgICAgdmVjMiBjb29yZCA9IHZlYzIoY2VudGVyQ29vcmQgKyBzaGlmdCk7CiAgICAgIHZlYzMgZnJhbWVDb2xvciA9IHRleHR1cmUoaW5wdXRfZnJhbWUsIGNvb3JkKS5yZ2I7CiAgICAgIGZsb2F0IHRocmVzaG9sZCA9IHRleHR1cmUodGhyZXNob2xkLCBjb29yZCkuYTsKICAgICAgZmxvYXQgb3V0VmFsID0gdGV4dHVyZShzZWdtZW50YXRpb25fbWFzaywgY29vcmQpLmE7CgogICAgICBzcGFjZVdlaWdodCA9IGdhdXNzaWFuKGRpc3RhbmNlKGNlbnRlckNvb3JkLCBjb29yZCksIHNpZ21hX3RleGVsKTsKICAgICAgY29sb3JXZWlnaHQgPSBnYXVzc2lhbihkaXN0YW5jZShjZW50ZXJDb2xvciwgZnJhbWVDb2xvciksIHNpZ21hX2NvbG9yKTsKICAgICAgdG90YWxXZWlnaHQgKz0gc3BhY2VXZWlnaHQgKiBjb2xvcldlaWdodDsKICAgICAgbmV3VmFsICs9IHNwYWNlV2VpZ2h0ICogY29sb3JXZWlnaHQgKiBvdXRWYWwgKiB0aHJlc2hvbGQ7CiAgICB9CiAgfQogIG5ld1ZhbCAvPSB0b3RhbFdlaWdodDsKICBvdXRDb2xvciA9IHZlYzQodmVjMygwLiksIG5ld1ZhbCk7Cn1gLGpmPWAjdmVyc2lvbiAzMDAgZXMKaW4gdmVjMiBwb3NpdGlvbjsKaW4gdmVjMiB0ZXh0dXJlX2Nvb3JkOwpvdXQgdmVjMiBfdGV4dHVyZV9jb29yZDsKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4wLCAxLjApOwogIF90ZXh0dXJlX2Nvb3JkID0gdGV4dHVyZV9jb29yZDsKfWA7Y2xhc3MgcWYgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBXZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gamZ9fXZhciBYZj1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHZlYzIgY2FudmFzOwp1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlOwoKdm9pZCBtYWluKCkgewogIGludCBjb3VudCA9IDA7CiAgZm9yIChmbG9hdCB5ID0gLTEuOyB5IDwgMi47IHkgKz0gMS4pIHsKICAgIGZvciAoZmxvYXQgeCA9IC0xLjsgeCA8IDIuOyB4ICs9IDEuKSB7CiAgICAgIHZlYzIgY29vcmQgPSBfdGV4dHVyZV9jb29yZCArIHZlYzIoeSwgeCkgLyBjYW52YXM7CiAgICAgIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgY29vcmQpOwogICAgICBpZiAoY29sb3IuciA+IC4xKSB7CiAgICAgICAgY291bnQrKzsKICAgICAgfQogICAgfQogIH0KICBpZiAoY291bnQgPiA1KSB7CiAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQpOwogIH0KfQpgLFlmPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKCnZvaWQgbWFpbigpIHsKICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7CiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkOwp9CmA7Y2xhc3MgUWYgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBYZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gWWZ9fXZhciBLZj1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHZlYzIgY2FudmFzOwp1bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlOwoKdm9pZCBtYWluKCkgewogIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZSwgX3RleHR1cmVfY29vcmQpOwogIGZvciAoZmxvYXQgeSA9IC0yLjsgeSA8IDMuOyB5ICs9IDEuKSB7CiAgICBmb3IgKGZsb2F0IHggPSAtMi47IHggPCAzLjsgeCArPSAxLikgewogICAgICB2ZWMyIGNvb3JkID0gX3RleHR1cmVfY29vcmQ7CiAgICAgIGNvb3JkICs9IHZlYzIoeSwgeCkgLyBjYW52YXM7CiAgICAgIGNvbG9yICs9IHRleHR1cmUyRCh0ZXh0dXJlLCBjb29yZCkgKiAoMS4gLyA0Lik7CiAgICB9CiAgfQoKICBnbF9GcmFnQ29sb3IgPSBjb2xvcjsKfQpgLEpmPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKCnZvaWQgbWFpbigpIHsKICBnbF9Qb3NpdGlvbiA9IHZlYzQocG9zaXRpb24sIDAuLCAxLik7CiAgX3RleHR1cmVfY29vcmQgPSB0ZXh0dXJlX2Nvb3JkOwp9CmA7Y2xhc3MgWmYgZXh0ZW5kcyBPcntnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBLZn1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gSmZ9fXZhciBlbD1gcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7Cgp2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7Cgp1bmlmb3JtIHNhbXBsZXIyRCB0aHJlc2hvbGQ7CnVuaWZvcm0gc2FtcGxlcjJEIGlucHV0czsKCnZvaWQgbWFpbigpIHsKICB2ZWM0IGlucHV0c19jb2xvciA9IHRleHR1cmUyRChpbnB1dHMsIF90ZXh0dXJlX2Nvb3JkKTsKICB2ZWM0IHRocmVzaG9sZF9jb2xvciA9IHRleHR1cmUyRCh0aHJlc2hvbGQsIF90ZXh0dXJlX2Nvb3JkKTsKICBpZiAodGhyZXNob2xkX2NvbG9yLnIgPCAuMSAmJiBpbnB1dHNfY29sb3IuciA+IC41KSB7CiAgICBnbF9GcmFnQ29sb3IgPSBpbnB1dHNfY29sb3I7CiAgfQp9CmAsdGw9YHZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKCmF0dHJpYnV0ZSB2ZWMyIHBvc2l0aW9uOwphdHRyaWJ1dGUgdmVjMiB0ZXh0dXJlX2Nvb3JkOwoKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTsKICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7Cn0KYDtjbGFzcyBybCBleHRlbmRzIE9ye2dldEZyYWdtZW50U2hhZGVyKCl7cmV0dXJuIGVsfWdldFZlcnRleFNoYWRlcigpe3JldHVybiB0bH19Y2xhc3MgbmwgZXh0ZW5kcyBEcntjb25zdHJ1Y3Rvcih0LG4saSl7c3VwZXIoKTtwKHRoaXMsImlucHV0SW1hZ2UiKTtwKHRoaXMsImlucHV0TWFzayIpO3AodGhpcywicHJldmlvdXNJbnB1dEltYWdlIik7cCh0aGlzLCJwcmV2aW91c0lucHV0TWFzayIpO3AodGhpcywib3V0cHV0Iik7cCh0aGlzLCJvcHRpb25zIix7Y3VycmVudFRocmVzaG9sZE1pbmltdW06MCxjdXJyZW50VGhyZXNob2xkTWF4aW11bToxLHByZXZpb3VzVGhyZXNob2xkTWluaW11bTowLHByZXZpb3VzVGhyZXNob2xkTWF4aW11bToxLHRocmVzaG9sZE1pbmltdW06MCx0aHJlc2hvbGRNYXhpbXVtOjEsdGhyZXNob2xkRmFjdG9yOjF9KTt0aGlzLmNvbnRleHQ9dDtjb25zdCBvPXtjb250ZXh0OnQsaGVpZ2h0Omksd2lkdGg6bn0scz1uZXcgVmYobyksYT1uZXcgVWkoey4uLm8scmFkaXVzOjEsdHlwZTpDci5HQVVTU0lBTn0pLHU9bmV3IHJsKG8pLGY9bmV3IFpmKG8pLGM9bmV3IFFmKG8pLGQ9bmV3IHFmKHsuLi5vfSkseT0uNjYsXz02NDAsbT00ODAseD0yNTYsdj0xNDQ7bGV0IGI9MTtiKj1NYXRoLm1heChfL3gsbS92KTtjb25zdCBBPU1hdGgubWF4KDEsTWF0aC5zcXJ0KGIpKnkpLFA9MS9fLEM9MS9tO3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpzLGdldFVuaWZvcm1zOigpPT4oe2ltYWdlX25vdzpTKHQsdGhpcy5pbnB1dEltYWdlKSxpbWFnZV9iZWZvcmU6Uyh0LHRoaXMucHJldmlvdXNJbnB1dEltYWdlKSxtYXNrX25vdzpTKHQsdGhpcy5pbnB1dE1hc2spLG1hc2tfYmVmb3JlOlModCx0aGlzLnByZXZpb3VzSW5wdXRNYXNrKSxjdXJyZW50X3RocmVzaG9sZF9taW5pbXVtOnRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWluaW11bSxjdXJyZW50X3RocmVzaG9sZF9tYXhpbXVtOnRoaXMub3B0aW9ucy5jdXJyZW50VGhyZXNob2xkTWF4aW11bSxwcmV2aW91c190aHJlc2hvbGRfbWluaW11bTp0aGlzLm9wdGlvbnMucHJldmlvdXNUaHJlc2hvbGRNaW5pbXVtLHByZXZpb3VzX3RocmVzaG9sZF9tYXhpbXVtOnRoaXMub3B0aW9ucy5wcmV2aW91c1RocmVzaG9sZE1heGltdW0sdGhyZXNob2xkX21pbmltdW06dGhpcy5vcHRpb25zLnRocmVzaG9sZE1pbmltdW0sdGhyZXNob2xkX21heGltdW06dGhpcy5vcHRpb25zLnRocmVzaG9sZE1heGltdW0sdGhyZXNob2xkX2ZhY3Rvcjp0aGlzLm9wdGlvbnMudGhyZXNob2xkRmFjdG9yfSl9KSx0aGlzLmFkZFN0ZXAoe3Byb2dyYW06dSxnZXRVbmlmb3JtczooKT0+KHtpbnB1dHM6Uyh0LHRoaXMuaW5wdXRNYXNrKSx0aHJlc2hvbGQ6Uyh0LHMub3V0cHV0KX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOmMsZ2V0VW5pZm9ybXM6KCk9Pih7dGV4dHVyZTpTKHQsdS5vdXRwdXQpfSl9KSx0aGlzLmFkZFN0ZXAoe3Byb2dyYW06ZixnZXRVbmlmb3JtczooKT0+KHt0ZXh0dXJlOlModCxjLm91dHB1dCl9KX0pLHRoaXMuYWRkU3RlcCh7cHJvZ3JhbTphLGdldFVuaWZvcm1zOigpPT4oe3RleHR1cmU6Uyh0LGYub3V0cHV0KX0pfSksdGhpcy5hZGRTdGVwKHtwcm9ncmFtOmQsZ2V0VW5pZm9ybXM6KCk9Pih7aW5wdXRfZnJhbWU6Uyh0LHRoaXMuaW5wdXRJbWFnZSksc2VnbWVudGF0aW9uX21hc2s6Uyh0LHRoaXMuaW5wdXRNYXNrKSx0aHJlc2hvbGQ6Uyh0LGEub3V0cHV0KSx0ZXhlbF9zaXplOltQLENdLHN0ZXA6QSxyYWRpdXM6YixvZmZzZXQ6QT4xP0EqLjU6MCxzaWdtYV90ZXhlbDpNYXRoLm1heChQLEMpKmIsc2lnbWFfY29sb3I6LjF9KX0pLHRoaXMub3V0cHV0PWQub3V0cHV0fXNldERhdGEodCxuKXt0aGlzLnByZXZpb3VzSW5wdXRJbWFnZT10aGlzLmlucHV0SW1hZ2U/dGhpcy5pbnB1dEltYWdlOnQsdGhpcy5wcmV2aW91c0lucHV0TWFzaz10aGlzLmlucHV0TWFzaz90aGlzLmlucHV0TWFzazpuLHRoaXMuaW5wdXRJbWFnZT10LHRoaXMuaW5wdXRNYXNrPW59c2V0T3B0aW9ucyh0KXt0aGlzLm9wdGlvbnM9dH19dmFyIGlsPWBwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsKCnZhcnlpbmcgdmVjMiBfdGV4dHVyZV9jb29yZDsKdW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTsKCnZvaWQgbWFpbigpIHsgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIF90ZXh0dXJlX2Nvb3JkKTsgfQpgLG9sPWB2YXJ5aW5nIHZlYzIgX3RleHR1cmVfY29vcmQ7CgphdHRyaWJ1dGUgdmVjMiBwb3NpdGlvbjsKYXR0cmlidXRlIHZlYzIgdGV4dHVyZV9jb29yZDsKdW5pZm9ybSBib29sIGludmVydF95OwoKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMC4sIDEuKTsKICBfdGV4dHVyZV9jb29yZCA9IHRleHR1cmVfY29vcmQ7CiAgaWYgKGludmVydF95KSB7CiAgICBfdGV4dHVyZV9jb29yZC55ID0gMS4gLSB0ZXh0dXJlX2Nvb3JkLnk7CiAgfQp9CmA7Y2xhc3Mgc2wgZXh0ZW5kcyBiZXtnZXRGcmFnbWVudFNoYWRlcigpe3JldHVybiBpbH1nZXRWZXJ0ZXhTaGFkZXIoKXtyZXR1cm4gb2x9fWNsYXNzIGFsIGV4dGVuZHMgRHJ7Y29uc3RydWN0b3IodCxuLGkpe3N1cGVyKCk7cCh0aGlzLCJpbnB1dEltYWdlIik7dGhpcy5jb250ZXh0PXQ7Y29uc3Qgbz17Y29udGV4dDp0LGhlaWdodDppLHdpZHRoOm59O3RoaXMuYWRkU3RlcCh7cHJvZ3JhbTpuZXcgc2woey4uLm8sZGlzYWJsZUZyYW1lYnVmZmVyOiEwfSksZ2V0VW5pZm9ybXM6KCk9Pih7dGV4dHVyZTpTKHQsdGhpcy5pbnB1dEltYWdlKSxpbnZlcnRfeTohMH0pfSl9c2V0RGF0YSh0KXt0aGlzLmlucHV0SW1hZ2U9dH19Y2xhc3MgdWx7Y29uc3RydWN0b3IoZSl7cCh0aGlzLCJyZXNpemUiKTtwKHRoaXMsImNhbnZhcyIpO3AodGhpcywiY29udGV4dCIpO3RoaXMuY2FudmFzPW5ldyBPZmZzY3JlZW5DYW52YXMoMCwwKSx0aGlzLmNvbnRleHQ9dGhpcy5jYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wyIiksdGhpcy5jYW52YXMud2lkdGg9ZS53aWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9ZS5oZWlnaHQsdGhpcy5yZXNpemU9bmV3IGFsKHRoaXMuY29udGV4dCxlLndpZHRoLGUuaGVpZ2h0KX1yZXNpemVGb3JlZ3JvdW5kKGUsdCl7dGhpcy5jYW52YXMud2lkdGg9ZSx0aGlzLmNhbnZhcy5oZWlnaHQ9dCx0aGlzLnJlc2l6ZS5yZXNpemVPdXRwdXQoZSx0KX1hc3luYyBwcm9jZXNzKGUpe3ZhciB0LG47cmV0dXJuIHRoaXMuY2FudmFzLndpZHRoPXRoaXMuY2FudmFzLndpZHRoLCh0PXRoaXMucmVzaXplKT09bnVsbHx8dC5zZXREYXRhKGUpLChuPXRoaXMucmVzaXplKT09bnVsbHx8bi5ydW4oKSx0aGlzLmNhbnZhc319Y2xhc3MgY2x7Y29uc3RydWN0b3IoZSx0KXtwKHRoaXMsImltcHJvdmVNYXNrU2VnbWVudGF0aW9uIik7cCh0aGlzLCJiYWNrZ3JvdW5kUmVzaXplciIpO3AodGhpcywiYmFja2dyb3VuZEltYWdlIik7cCh0aGlzLCJiYWNrZ3JvdW5kVmlkZW8iKTtwKHRoaXMsInByb2ZpbGVyIik7cCh0aGlzLCJhY3RpdmVQaXBlbGluZSIpO3AodGhpcywiY2FudmFzIik7cCh0aGlzLCJvcHRpb25zIik7cCh0aGlzLCJjb250ZXh0Iik7cCh0aGlzLCJ2aXJ0dWFsQkdJbWFnZSIpO3RoaXMuaWQ9ZSx0aGlzLmNhbnZhcz1uZXcgT2Zmc2NyZWVuQ2FudmFzKDAsMCksdGhpcy5jb250ZXh0PXRoaXMuY2FudmFzLmdldENvbnRleHQoIndlYmdsMiIpLHRoaXMuY2FudmFzLndpZHRoPXQuZm9yZWdyb3VuZFdpZHRoLHRoaXMuY2FudmFzLmhlaWdodD10LmZvcmVncm91bmRIZWlnaHQsdGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbj1uZXcgbmwodGhpcy5jb250ZXh0LHQubWFza1dpZHRoLHQubWFza0hlaWdodCksdGhpcy5iYWNrZ3JvdW5kSW1hZ2U9bmV3IE5pKHRoaXMuY29udGV4dCksdGhpcy5iYWNrZ3JvdW5kVmlkZW89bmV3IGtmKHRoaXMuY29udGV4dCksdGhpcy5iYWNrZ3JvdW5kUmVzaXplcj1uZXcgdWwoe3dpZHRoOnQuZm9yZWdyb3VuZFdpZHRoLGhlaWdodDp0LmZvcmVncm91bmRIZWlnaHR9KX1zZXRCYWNrZ3JvdW5kT3B0aW9ucyhlKXtzd2l0Y2goZS50cmFuc2Zvcm1lclR5cGUpe2Nhc2UiQmFja2dyb3VuZEJsdXIiOnRoaXMuYWN0aXZlUGlwZWxpbmU9bmV3IEJmKHRoaXMuY29udGV4dCx0aGlzLmdldEJsdXJTaXplKGUucmFkaXVzKSk7YnJlYWs7Y2FzZSJTaWxob3VldHRlQmx1ciI6dGhpcy5hY3RpdmVQaXBlbGluZT1uZXcgR2YodGhpcy5jb250ZXh0LHRoaXMuZ2V0Qmx1clNpemUoZS5yYWRpdXMpKTticmVhaztjYXNlIlZpZGVvQmFja2dyb3VuZCI6dGhpcy5hY3RpdmVQaXBlbGluZT10aGlzLmJhY2tncm91bmRWaWRlbzticmVhaztjYXNlIlZpcnR1YWxCYWNrZ3JvdW5kIjp0aGlzLmFjdGl2ZVBpcGVsaW5lPXRoaXMuYmFja2dyb3VuZEltYWdlO2JyZWFrfXRoaXMub3B0aW9ucz1lfXNldEZsaWNrZXJpbmdPcHRpb25zKGUpe3ZhciB0Oyh0PXRoaXMuaW1wcm92ZU1hc2tTZWdtZW50YXRpb24pPT1udWxsfHx0LnNldE9wdGlvbnMoZSl9c2V0VmlkZW9CR1JlYWRhYmxlKGUpe3RoaXMuYmFja2dyb3VuZFZpZGVvLmlucHV0VmlkZW89ZX1hc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShlKXt0aGlzLnZpcnR1YWxCR0ltYWdlPWUsdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuaW5wdXRCYWNrZ3JvdW5kSW1hZ2U9YXdhaXQgdGhpcy5iYWNrZ3JvdW5kUmVzaXplci5wcm9jZXNzKGUpfWFzeW5jIHByb2Nlc3MoZSx0KXt2YXIgbixpLG8scyxhLHUsZjtpZih0aGlzLmFjdGl2ZVBpcGVsaW5lJiZlLndpZHRoJiYodD09bnVsbD92b2lkIDA6dC53aWR0aCkpe2NvbnN0IGM9YFske3RoaXMuaWR9XSBiYWNrZ3JvdW5kLWZpbHRlcmA7KG49dGhpcy5wcm9maWxlcik9PW51bGx8fG4ucHVzaENvbnRleHQoYyk7bGV0IGQ9dDsoKChpPXRoaXMub3B0aW9ucyk9PW51bGw/dm9pZCAwOmkuc2VsZmllU2VnbWVudGF0aW9uVHlwZSkmJigobz10aGlzLm9wdGlvbnMpPT1udWxsP3ZvaWQgMDpvLnNlbGZpZVNlZ21lbnRhdGlvblR5cGUpPT09IlBSRUNJU0UifHwhKChzPXRoaXMub3B0aW9ucykhPW51bGwmJnMuc2VsZmllU2VnbWVudGF0aW9uVHlwZSkmJnRoaXMuYWN0aXZlUGlwZWxpbmUucHJlY2lzZU1hc2tFbmFibGVkKSYmKHRoaXMuaW1wcm92ZU1hc2tTZWdtZW50YXRpb24uc2V0SWQodGhpcy5pZCksdGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbi5zZXRQcm9maWxlcih0aGlzLnByb2ZpbGVyKSx0aGlzLmltcHJvdmVNYXNrU2VnbWVudGF0aW9uLnNldERhdGEoZSx0KSx0aGlzLmltcHJvdmVNYXNrU2VnbWVudGF0aW9uLnJ1bigpLGQ9dGhpcy5pbXByb3ZlTWFza1NlZ21lbnRhdGlvbi5vdXRwdXQpLHRoaXMuYWN0aXZlUGlwZWxpbmUuc2V0SWQodGhpcy5pZCksdGhpcy5hY3RpdmVQaXBlbGluZS5zZXRQcm9maWxlcih0aGlzLnByb2ZpbGVyKSwoYT10aGlzLmFjdGl2ZVBpcGVsaW5lKT09bnVsbHx8YS5zZXREYXRhKGUsZCksKHU9dGhpcy5hY3RpdmVQaXBlbGluZSk9PW51bGx8fHUucnVuKCksKGY9dGhpcy5wcm9maWxlcik9PW51bGx8fGYucG9wQ29udGV4dChjKX19YXN5bmMgcmVzaXplRm9yZWdyb3VuZChlLHQpe3ZhciBuO3RoaXMuY2FudmFzLndpZHRoPWUsdGhpcy5jYW52YXMuaGVpZ2h0PXQsdGhpcy5iYWNrZ3JvdW5kSW1hZ2UucmVzaXplT3V0cHV0KGUsdCksdGhpcy5iYWNrZ3JvdW5kVmlkZW8ucmVzaXplT3V0cHV0KGUsdCksdGhpcy5iYWNrZ3JvdW5kUmVzaXplci5yZXNpemVGb3JlZ3JvdW5kKGUsdCksKG49dGhpcy5hY3RpdmVQaXBlbGluZSk9PW51bGx8fG4ucmVzaXplT3V0cHV0KGUsdCksdGhpcy52aXJ0dWFsQkdJbWFnZSYmKHRoaXMuYmFja2dyb3VuZEltYWdlLmlucHV0QmFja2dyb3VuZEltYWdlPWF3YWl0IHRoaXMuYmFja2dyb3VuZFJlc2l6ZXIucHJvY2Vzcyh0aGlzLnZpcnR1YWxCR0ltYWdlKSl9YXN5bmMgcHJvZmlsZShlKXtjb25zdCB0PW5ldyBScyh0aGlzLmNvbnRleHQpO3JldHVybiB0aGlzLnByb2ZpbGVyPXQsdC5zdGFydCgpLGF3YWl0IGduKGUpLHRoaXMucHJvZmlsZXI9dm9pZCAwLHQuc3RvcCgpLHQuZ2V0UmVzb2x2ZWRRdWVyaWVzKCl9Z2V0Qmx1clNpemUoZT1zdC5Mb3cpe3N3aXRjaChlKXtjYXNlIHN0LkxvdzpyZXR1cm4gNTtjYXNlIHN0LkhpZ2g6cmV0dXJuIDEyfXJldHVybiBlfX12YXIgZmw9ZnVuY3Rpb24oKXt2YXIgcj10eXBlb2YgZG9jdW1lbnQ8InUiJiZkb2N1bWVudC5jdXJyZW50U2NyaXB0P2RvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjOnZvaWQgMDtyZXR1cm4gZnVuY3Rpb24oZSl7ZT1lfHx7fTt2YXIgdD10eXBlb2YgZTwidSI/ZTp7fSxuLGk7dC5yZWFkeT1uZXcgUHJvbWlzZShmdW5jdGlvbihsLGgpe249bCxpPWh9KTt2YXIgbz17fSxzO2ZvcihzIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShzKSYmKG9bc109dFtzXSk7dmFyIGE9Ii4vdGhpcy5wcm9ncmFtIix1PWZ1bmN0aW9uKGwsaCl7dGhyb3cgaH0sZj0hMCxjPSIiO2Z1bmN0aW9uIGQobCl7cmV0dXJuIHQubG9jYXRlRmlsZT90LmxvY2F0ZUZpbGUobCxjKTpjK2x9dmFyIHk7dHlwZW9mIGRvY3VtZW50PCJ1IiYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKGM9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMpLHImJihjPXIpLGMuaW5kZXhPZigiYmxvYjoiKSE9PTA/Yz1jLnN1YnN0cigwLGMucmVwbGFjZSgvWz8jXS4qLywiIikubGFzdEluZGV4T2YoIi8iKSsxKTpjPSIiO3ZhciBfPXQucHJpbnR8fGNvbnNvbGUubG9nLmJpbmQoY29uc29sZSksbT10LnByaW50RXJyfHxjb25zb2xlLndhcm4uYmluZChjb25zb2xlKTtmb3IocyBpbiBvKW8uaGFzT3duUHJvcGVydHkocykmJih0W3NdPW9bc10pO289bnVsbCx0LmFyZ3VtZW50cyYmdC5hcmd1bWVudHMsdC50aGlzUHJvZ3JhbSYmKGE9dC50aGlzUHJvZ3JhbSksdC5xdWl0JiYodT10LnF1aXQpO3ZhciB4O3Qud2FzbUJpbmFyeSYmKHg9dC53YXNtQmluYXJ5KTt2YXIgdj10Lm5vRXhpdFJ1bnRpbWV8fCEwO3R5cGVvZiBXZWJBc3NlbWJseSE9Im9iamVjdCImJm1lKCJubyBuYXRpdmUgd2FzbSBzdXBwb3J0IGRldGVjdGVkIik7dmFyIGIsQT0hMSxQPXR5cGVvZiBUZXh0RGVjb2RlcjwidSI/bmV3IFRleHREZWNvZGVyKCJ1dGY4Iik6dm9pZCAwO2Z1bmN0aW9uIEMobCxoLGcpe2Zvcih2YXIgdz1oK2csTT1oO2xbTV0mJiEoTT49dyk7KSsrTTtpZihNLWg+MTYmJmwuc3ViYXJyYXkmJlApcmV0dXJuIFAuZGVjb2RlKGwuc3ViYXJyYXkoaCxNKSk7Zm9yKHZhciBVPSIiO2g8TTspe3ZhciBSPWxbaCsrXTtpZighKFImMTI4KSl7VSs9U3RyaW5nLmZyb21DaGFyQ29kZShSKTtjb250aW51ZX12YXIgaz1sW2grK10mNjM7aWYoKFImMjI0KT09MTkyKXtVKz1TdHJpbmcuZnJvbUNoYXJDb2RlKChSJjMxKTw8NnxrKTtjb250aW51ZX12YXIgZWU9bFtoKytdJjYzO2lmKChSJjI0MCk9PTIyND9SPShSJjE1KTw8MTJ8azw8NnxlZTpSPShSJjcpPDwxOHxrPDwxMnxlZTw8NnxsW2grK10mNjMsUjw2NTUzNilVKz1TdHJpbmcuZnJvbUNoYXJDb2RlKFIpO2Vsc2V7dmFyIGppPVItNjU1MzY7VSs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxqaT4+MTAsNTYzMjB8amkmMTAyMyl9fXJldHVybiBVfWZ1bmN0aW9uIFcobCxoKXtyZXR1cm4gbD9DKEhlLGwsaCk6IiJ9ZnVuY3Rpb24gaWUobCxoLGcpe2Zvcih2YXIgdz0wO3c8bC5sZW5ndGg7Kyt3KUZ0W2grKz4+MF09bC5jaGFyQ29kZUF0KHcpO2d8fChGdFtoPj4wXT0wKX1mdW5jdGlvbiBYKGwsaCl7cmV0dXJuIGwlaD4wJiYobCs9aC1sJWgpLGx9dmFyIGtpLEZ0LEhlLFk7ZnVuY3Rpb24gTGkobCl7a2k9bCx0LkhFQVA4PUZ0PW5ldyBJbnQ4QXJyYXkobCksdC5IRUFQMTY9bmV3IEludDE2QXJyYXkobCksdC5IRUFQMzI9WT1uZXcgSW50MzJBcnJheShsKSx0LkhFQVBVOD1IZT1uZXcgVWludDhBcnJheShsKSx0LkhFQVBVMTY9bmV3IFVpbnQxNkFycmF5KGwpLHQuSEVBUFUzMj1uZXcgVWludDMyQXJyYXkobCksdC5IRUFQRjMyPW5ldyBGbG9hdDMyQXJyYXkobCksdC5IRUFQRjY0PW5ldyBGbG9hdDY0QXJyYXkobCl9dC5JTklUSUFMX01FTU9SWTt2YXIgVXIsJGk9W10sR2k9W10semk9W10sX2w9MDtmdW5jdGlvbiB4bCgpe3JldHVybiB2fHxfbD4wfWZ1bmN0aW9uIGdsKCl7aWYodC5wcmVSdW4pZm9yKHR5cGVvZiB0LnByZVJ1bj09ImZ1bmN0aW9uIiYmKHQucHJlUnVuPVt0LnByZVJ1bl0pO3QucHJlUnVuLmxlbmd0aDspRWwodC5wcmVSdW4uc2hpZnQoKSk7QnIoJGkpfWZ1bmN0aW9uIGJsKCl7QnIoR2kpfWZ1bmN0aW9uIHZsKCl7aWYodC5wb3N0UnVuKWZvcih0eXBlb2YgdC5wb3N0UnVuPT0iZnVuY3Rpb24iJiYodC5wb3N0UnVuPVt0LnBvc3RSdW5dKTt0LnBvc3RSdW4ubGVuZ3RoOylBbCh0LnBvc3RSdW4uc2hpZnQoKSk7QnIoemkpfWZ1bmN0aW9uIEVsKGwpeyRpLnVuc2hpZnQobCl9ZnVuY3Rpb24gVGwobCl7R2kudW5zaGlmdChsKX1mdW5jdGlvbiBBbChsKXt6aS51bnNoaWZ0KGwpfXZhciB2ZT0wLFZlPW51bGw7ZnVuY3Rpb24gd2wobCl7dmUrKyx0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJnQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyh2ZSl9ZnVuY3Rpb24gUmwobCl7aWYodmUtLSx0Lm1vbml0b3JSdW5EZXBlbmRlbmNpZXMmJnQubW9uaXRvclJ1bkRlcGVuZGVuY2llcyh2ZSksdmU9PTAmJlZlKXt2YXIgaD1WZTtWZT1udWxsLGgoKX19dC5wcmVsb2FkZWRJbWFnZXM9e30sdC5wcmVsb2FkZWRBdWRpb3M9e307ZnVuY3Rpb24gbWUobCl7dC5vbkFib3J0JiZ0Lm9uQWJvcnQobCksbD0iQWJvcnRlZCgiK2wrIikiLG0obCksQT0hMCxsKz0iLiBCdWlsZCB3aXRoIC1zIEFTU0VSVElPTlM9MSBmb3IgbW9yZSBpbmZvLiI7dmFyIGg9bmV3IFdlYkFzc2VtYmx5LlJ1bnRpbWVFcnJvcihsKTt0aHJvdyBpKGgpLGh9dmFyIFNsPSJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIjtmdW5jdGlvbiBIaShsKXtyZXR1cm4gbC5zdGFydHNXaXRoKFNsKX12YXIgUTtRPSJ0ZmxpdGUtc2ltZC53YXNtIixIaShRKXx8KFE9ZChRKSk7ZnVuY3Rpb24gVmkobCl7dHJ5e2lmKGw9PVEmJngpcmV0dXJuIG5ldyBVaW50OEFycmF5KHgpO2lmKCF5KXRocm93ImJvdGggYXN5bmMgYW5kIHN5bmMgZmV0Y2hpbmcgb2YgdGhlIHdhc20gZmFpbGVkIn1jYXRjaChoKXttZShoKX19ZnVuY3Rpb24gSWwoKXtyZXR1cm4heCYmZiYmdHlwZW9mIGZldGNoPT0iZnVuY3Rpb24iP2ZldGNoKFEse2NyZWRlbnRpYWxzOiJzYW1lLW9yaWdpbiJ9KS50aGVuKGZ1bmN0aW9uKGwpe2lmKCFsLm9rKXRocm93ImZhaWxlZCB0byBsb2FkIHdhc20gYmluYXJ5IGZpbGUgYXQgJyIrUSsiJyI7cmV0dXJuIGwuYXJyYXlCdWZmZXIoKX0pLmNhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIFZpKFEpfSk6UHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbigpe3JldHVybiBWaShRKX0pfWZ1bmN0aW9uIEZsKCl7dmFyIGw9e2E6UWx9O2Z1bmN0aW9uIGgoUixrKXt2YXIgZWU9Ui5leHBvcnRzO3QuYXNtPWVlLGI9dC5hc20ucSxMaShiLmJ1ZmZlciksVXI9dC5hc20uRSxUbCh0LmFzbS5yKSxSbCgpfXdsKCk7ZnVuY3Rpb24gZyhSKXtoKFIuaW5zdGFuY2UpfWZ1bmN0aW9uIHcoUil7cmV0dXJuIElsKCkudGhlbihmdW5jdGlvbihrKXtyZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoayxsKX0pLnRoZW4oZnVuY3Rpb24oayl7cmV0dXJuIGt9KS50aGVuKFIsZnVuY3Rpb24oayl7bSgiZmFpbGVkIHRvIGFzeW5jaHJvbm91c2x5IHByZXBhcmUgd2FzbTogIitrKSxtZShrKX0pfWZ1bmN0aW9uIE0oKXtyZXR1cm4heCYmdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nPT0iZnVuY3Rpb24iJiYhSGkoUSkmJnR5cGVvZiBmZXRjaD09ImZ1bmN0aW9uIj9mZXRjaChRLHtjcmVkZW50aWFsczoic2FtZS1vcmlnaW4ifSkudGhlbihmdW5jdGlvbihSKXt2YXIgaz1XZWJBc3NlbWJseS5pbnN0YW50aWF0ZVN0cmVhbWluZyhSLGwpO3JldHVybiBrLnRoZW4oZyxmdW5jdGlvbihlZSl7cmV0dXJuIG0oIndhc20gc3RyZWFtaW5nIGNvbXBpbGUgZmFpbGVkOiAiK2VlKSxtKCJmYWxsaW5nIGJhY2sgdG8gQXJyYXlCdWZmZXIgaW5zdGFudGlhdGlvbiIpLHcoZyl9KX0pOncoZyl9aWYodC5pbnN0YW50aWF0ZVdhc20pdHJ5e3ZhciBVPXQuaW5zdGFudGlhdGVXYXNtKGwsaCk7cmV0dXJuIFV9Y2F0Y2goUil7cmV0dXJuIG0oIk1vZHVsZS5pbnN0YW50aWF0ZVdhc20gY2FsbGJhY2sgZmFpbGVkIHdpdGggZXJyb3I6ICIrUiksITF9cmV0dXJuIE0oKS5jYXRjaChpKSx7fX1mdW5jdGlvbiBCcihsKXtmb3IoO2wubGVuZ3RoPjA7KXt2YXIgaD1sLnNoaWZ0KCk7aWYodHlwZW9mIGg9PSJmdW5jdGlvbiIpe2godCk7Y29udGludWV9dmFyIGc9aC5mdW5jO3R5cGVvZiBnPT0ibnVtYmVyIj9oLmFyZz09PXZvaWQgMD9Vci5nZXQoZykoKTpVci5nZXQoZykoaC5hcmcpOmcoaC5hcmc9PT12b2lkIDA/bnVsbDpoLmFyZyl9fWZ1bmN0aW9uIFBsKGwsaCxnLHcpe21lKCJBc3NlcnRpb24gZmFpbGVkOiAiK1cobCkrIiwgYXQ6ICIrW2g/VyhoKToidW5rbm93biBmaWxlbmFtZSIsZyx3P1codyk6InVua25vd24gZnVuY3Rpb24iXSl9ZnVuY3Rpb24gRGwobCxoKXttZSgiVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgdG8gdXNlIEVtc2NyaXB0ZW4ncyBsaW5raW5nIHN1cHBvcnQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vd2lraS9MaW5raW5nIil9ZnVuY3Rpb24gTWwobCxoKXttZSgiVG8gdXNlIGRsb3BlbiwgeW91IG5lZWQgdG8gdXNlIEVtc2NyaXB0ZW4ncyBsaW5raW5nIHN1cHBvcnQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZW1zY3JpcHRlbi1jb3JlL2Vtc2NyaXB0ZW4vd2lraS9MaW5raW5nIil9ZnVuY3Rpb24gQ2woKXttZSgiIil9dmFyIFB0O1B0PWZ1bmN0aW9uKCl7cmV0dXJuIHBlcmZvcm1hbmNlLm5vdygpfTt2YXIgT2w9ITA7ZnVuY3Rpb24gTmwobCl7cmV0dXJuIFlbV2koKT4+Ml09bCxsfWZ1bmN0aW9uIFVsKGwsaCl7dmFyIGc7aWYobD09PTApZz1EYXRlLm5vdygpO2Vsc2UgaWYoKGw9PT0xfHxsPT09NCkmJk9sKWc9UHQoKTtlbHNlIHJldHVybiBObCgyOCksLTE7cmV0dXJuIFlbaD4+Ml09Zy8xZTN8MCxZW2grND4+Ml09ZyUxZTMqMWUzKjFlM3wwLDB9ZnVuY3Rpb24gQmwoKXtyZXR1cm4gMjE0NzQ4MzY0OH1mdW5jdGlvbiBrbChsLGgsZyl7SGUuY29weVdpdGhpbihsLGgsaCtnKX1mdW5jdGlvbiBMbChsKXt0cnl7cmV0dXJuIGIuZ3JvdyhsLWtpLmJ5dGVMZW5ndGgrNjU1MzU+Pj4xNiksTGkoYi5idWZmZXIpLDF9Y2F0Y2h7fX1mdW5jdGlvbiAkbChsKXt2YXIgaD1IZS5sZW5ndGg7bD1sPj4+MDt2YXIgZz0yMTQ3NDgzNjQ4O2lmKGw+ZylyZXR1cm4hMTtmb3IodmFyIHc9MTt3PD00O3cqPTIpe3ZhciBNPWgqKDErLjIvdyk7TT1NYXRoLm1pbihNLGwrMTAwNjYzMjk2KTt2YXIgVT1NYXRoLm1pbihnLFgoTWF0aC5tYXgobCxNKSw2NTUzNikpLFI9TGwoVSk7aWYoUilyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBHbChsKXtmb3IodmFyIGg9UHQoKTtQdCgpLWg8bDspO312YXIga3I9e307ZnVuY3Rpb24gemwoKXtyZXR1cm4gYXx8Ii4vdGhpcy5wcm9ncmFtIn1mdW5jdGlvbiBXZSgpe2lmKCFXZS5zdHJpbmdzKXt2YXIgbD0odHlwZW9mIG5hdmlnYXRvcj09Im9iamVjdCImJm5hdmlnYXRvci5sYW5ndWFnZXMmJm5hdmlnYXRvci5sYW5ndWFnZXNbMF18fCJDIikucmVwbGFjZSgiLSIsIl8iKSsiLlVURi04IixoPXtVU0VSOiJ3ZWJfdXNlciIsTE9HTkFNRToid2ViX3VzZXIiLFBBVEg6Ii8iLFBXRDoiLyIsSE9NRToiL2hvbWUvd2ViX3VzZXIiLExBTkc6bCxfOnpsKCl9O2Zvcih2YXIgZyBpbiBrcilrcltnXT09PXZvaWQgMD9kZWxldGUgaFtnXTpoW2ddPWtyW2ddO3ZhciB3PVtdO2Zvcih2YXIgZyBpbiBoKXcucHVzaChnKyI9IitoW2ddKTtXZS5zdHJpbmdzPXd9cmV0dXJuIFdlLnN0cmluZ3N9dmFyIER0PXttYXBwaW5nczp7fSxidWZmZXJzOltudWxsLFtdLFtdXSxwcmludENoYXI6ZnVuY3Rpb24obCxoKXt2YXIgZz1EdC5idWZmZXJzW2xdO2g9PT0wfHxoPT09MTA/KChsPT09MT9fOm0pKEMoZywwKSksZy5sZW5ndGg9MCk6Zy5wdXNoKGgpfSx2YXJhcmdzOnZvaWQgMCxnZXQ6ZnVuY3Rpb24oKXtEdC52YXJhcmdzKz00O3ZhciBsPVlbRHQudmFyYXJncy00Pj4yXTtyZXR1cm4gbH0sZ2V0U3RyOmZ1bmN0aW9uKGwpe3ZhciBoPVcobCk7cmV0dXJuIGh9LGdldDY0OmZ1bmN0aW9uKGwsaCl7cmV0dXJuIGx9fTtmdW5jdGlvbiBIbChsLGgpe3ZhciBnPTA7cmV0dXJuIFdlKCkuZm9yRWFjaChmdW5jdGlvbih3LE0pe3ZhciBVPWgrZztZW2wrTSo0Pj4yXT1VLGllKHcsVSksZys9dy5sZW5ndGgrMX0pLDB9ZnVuY3Rpb24gVmwobCxoKXt2YXIgZz1XZSgpO1lbbD4+Ml09Zy5sZW5ndGg7dmFyIHc9MDtyZXR1cm4gZy5mb3JFYWNoKGZ1bmN0aW9uKE0pe3crPU0ubGVuZ3RoKzF9KSxZW2g+PjJdPXcsMH1mdW5jdGlvbiBXbChsKXtKbChsKX1mdW5jdGlvbiBqbChsKXtyZXR1cm4gMH1mdW5jdGlvbiBxbChsLGgsZyx3LE0pe31mdW5jdGlvbiBYbChsLGgsZyx3KXtmb3IodmFyIE09MCxVPTA7VTxnO1UrKyl7Zm9yKHZhciBSPVlbaCtVKjg+PjJdLGs9WVtoKyhVKjgrNCk+PjJdLGVlPTA7ZWU8aztlZSsrKUR0LnByaW50Q2hhcihsLEhlW1IrZWVdKTtNKz1rfXJldHVybiBZW3c+PjJdPU0sMH1mdW5jdGlvbiBZbCgpe2lmKHR5cGVvZiBjcnlwdG89PSJvYmplY3QiJiZ0eXBlb2YgY3J5cHRvLmdldFJhbmRvbVZhbHVlcz09ImZ1bmN0aW9uIil7dmFyIGw9bmV3IFVpbnQ4QXJyYXkoMSk7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMobCksbFswXX19ZWxzZSByZXR1cm4gZnVuY3Rpb24oKXttZSgicmFuZG9tRGV2aWNlIil9fWZ1bmN0aW9uIE10KGwsaCl7TXQucmFuZG9tRGV2aWNlfHwoTXQucmFuZG9tRGV2aWNlPVlsKCkpO2Zvcih2YXIgZz0wO2c8aDtnKyspRnRbbCtnPj4wXT1NdC5yYW5kb21EZXZpY2UoKTtyZXR1cm4gMH12YXIgUWw9e2E6UGwsZTpEbCxkOk1sLGI6Q2wsbjpVbCxoOkJsLGw6a2wsbTokbCxwOkdsLGY6SGwsZzpWbCxqOldsLGk6amwsazpxbCxjOlhsLG86TXR9O0ZsKCksdC5fX193YXNtX2NhbGxfY3RvcnM9ZnVuY3Rpb24oKXtyZXR1cm4odC5fX193YXNtX2NhbGxfY3RvcnM9dC5hc20ucikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRNb2RlbEJ1ZmZlck1lbW9yeU9mZnNldD10LmFzbS5zKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0TWVtb3J5T2Zmc2V0PXQuYXNtLnQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0SW5wdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0SW5wdXRIZWlnaHQ9dC5hc20udSkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2dldElucHV0V2lkdGg9dC5hc20udikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRJbnB1dENoYW5uZWxDb3VudD10LmFzbS53KS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX2dldE91dHB1dE1lbW9yeU9mZnNldD1mdW5jdGlvbigpe3JldHVybih0Ll9nZXRPdXRwdXRNZW1vcnlPZmZzZXQ9dC5hc20ueCkuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0SGVpZ2h0PXQuYXNtLnkpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fZ2V0T3V0cHV0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0V2lkdGg9dC5hc20ueikuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9nZXRPdXRwdXRDaGFubmVsQ291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5fZ2V0T3V0cHV0Q2hhbm5lbENvdW50PXQuYXNtLkEpLmFwcGx5KG51bGwsYXJndW1lbnRzKX0sdC5fbG9hZE1vZGVsPWZ1bmN0aW9uKCl7cmV0dXJuKHQuX2xvYWRNb2RlbD10LmFzbS5CKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LHQuX3J1bkluZmVyZW5jZT1mdW5jdGlvbigpe3JldHVybih0Ll9ydW5JbmZlcmVuY2U9dC5hc20uQykuYXBwbHkobnVsbCxhcmd1bWVudHMpfSx0Ll9pc0dQVUVuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4odC5faXNHUFVFbmFibGVkPXQuYXNtLkQpLmFwcGx5KG51bGwsYXJndW1lbnRzKX07dmFyIFdpPXQuX19fZXJybm9fbG9jYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4oV2k9dC5fX19lcnJub19sb2NhdGlvbj10LmFzbS5GKS5hcHBseShudWxsLGFyZ3VtZW50cyl9LEN0O2Z1bmN0aW9uIEtsKGwpe3RoaXMubmFtZT0iRXhpdFN0YXR1cyIsdGhpcy5tZXNzYWdlPSJQcm9ncmFtIHRlcm1pbmF0ZWQgd2l0aCBleGl0KCIrbCsiKSIsdGhpcy5zdGF0dXM9bH1WZT1mdW5jdGlvbiBsKCl7Q3R8fExyKCksQ3R8fChWZT1sKX07ZnVuY3Rpb24gTHIobCl7aWYodmU+MHx8KGdsKCksdmU+MCkpcmV0dXJuO2Z1bmN0aW9uIGgoKXtDdHx8KEN0PSEwLHQuY2FsbGVkUnVuPSEwLCFBJiYoYmwoKSxuKHQpLHQub25SdW50aW1lSW5pdGlhbGl6ZWQmJnQub25SdW50aW1lSW5pdGlhbGl6ZWQoKSx2bCgpKSl9dC5zZXRTdGF0dXM/KHQuc2V0U3RhdHVzKCJSdW5uaW5nLi4uIiksc2V0VGltZW91dChmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnNldFN0YXR1cygiIil9LDEpLGgoKX0sMSkpOmgoKX10LnJ1bj1McjtmdW5jdGlvbiBKbChsLGgpe1psKGwpfWZ1bmN0aW9uIFpsKGwpe3hsKCl8fCh0Lm9uRXhpdCYmdC5vbkV4aXQobCksQT0hMCksdShsLG5ldyBLbChsKSl9aWYodC5wcmVJbml0KWZvcih0eXBlb2YgdC5wcmVJbml0PT0iZnVuY3Rpb24iJiYodC5wcmVJbml0PVt0LnByZUluaXRdKTt0LnByZUluaXQubGVuZ3RoPjA7KXQucHJlSW5pdC5wb3AoKSgpO3JldHVybiBMcigpLGUucmVhZHl9fSgpO2NsYXNzIGxse2NvbnN0cnVjdG9yKCl7cCh0aGlzLCJzZWxlY3RlZFRGTGl0ZSIpO3AodGhpcywiaXNTSU1EU3VwcG9ydGVkIiwhMSk7cCh0aGlzLCJpc1RocmVhZHNTdXBwb3J0ZWQiLCExKTtwKHRoaXMsImlucHV0V2lkdGgiLDApO3AodGhpcywiaW5wdXRIZWlnaHQiLDApO3AodGhpcywiaW5wdXRDaGFubmVsQ291bnQiLDApO3AodGhpcywiaW5wdXRNZW1vcnlPZmZzZXQiLDApO3AodGhpcywib3V0cHV0V2lkdGgiLDApO3AodGhpcywib3V0cHV0SGVpZ2h0IiwwKTtwKHRoaXMsIm91dHB1dENoYW5uZWxDb3VudCIsMCk7cCh0aGlzLCJvdXRwdXRNZW1vcnlPZmZzZXQiLDApfX1jb25zdCBkbD0iaHR0cHM6Ly9kM29wcWptcXp4ZjA1Ny5jbG91ZGZyb250Lm5ldC92b25hZ2UtdGVuc29yZmxvdy13YXNtL3RmbGl0ZS1zaW1kLXdhc20vMS4xLjMvIixtbD0iaHR0cHM6Ly9kM29wcWptcXp4ZjA1Ny5jbG91ZGZyb250Lm5ldC9tbC9zZWxmaWVfc2VnbWVudGF0aW9uLzQuMC4wLyI7YXN5bmMgZnVuY3Rpb24gaGwocj1kbCxlPW1sKXtsZXQgdD1uZXcgbGw7dmFyIG49bmV3IFByb21pc2UoZnVuY3Rpb24oaSxvKXthc3luYyBmdW5jdGlvbiBzKCl7cmV0dXJuIGZsKHtsb2NhdGVGaWxlOmZ1bmN0aW9uKGYpe3JldHVybiByK2Z9fSl9YXN5bmMgZnVuY3Rpb24gYSh1KXtyZXR1cm4gbmV3IFByb21pc2UoYXN5bmMoZixjKT0+e2NvbnN0IGQ9dTtpZih0eXBlb2YgZD4idSIpcmV0dXJuIGMoIlRGTGl0ZSBiYWNrZW5kIHVuYXZhaWxhYmxlOiB3YXNtU2ltZCIpO2NvbnN0IHk9InNlbGZpZV9zZWdtZW50YXRpb25fbGFuZHNjYXBlIjtjb25zb2xlLmxvZygiTG9hZGluZyB0ZmxpdGUgbW9kZWw6Iix5KTtsZXQgXz1lK2Ake3l9LnRmbGl0ZWA7Y29uc29sZS5sb2coIlRGTGl0ZSBtb2RlbFVybDogIitfKTt0cnl7Y29uc3QgeD1hd2FpdChhd2FpdCBmZXRjaChfKSkuYXJyYXlCdWZmZXIoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIHNpemU6Iix4LmJ5dGVMZW5ndGgpO2NvbnN0IHY9ZC5fZ2V0TW9kZWxCdWZmZXJNZW1vcnlPZmZzZXQoKTtjb25zb2xlLmxvZygiTW9kZWwgYnVmZmVyIG1lbW9yeSBvZmZzZXQ6Iix2KSxjb25zb2xlLmxvZygiTG9hZGluZyBtb2RlbCBidWZmZXIuLi4iKSxkLkhFQVBVOC5zZXQobmV3IFVpbnQ4QXJyYXkoeCksdik7Y29uc3QgYj1kLl9sb2FkTW9kZWwoeC5ieXRlTGVuZ3RoKTtpZihjb25zb2xlLmxvZygiTG9hZCBtb2RlbCByZXN1bHQ6IixiKSxiIT09MCl7YygiQ2Fubm90IGxvYWQgbW9kZWwiKTtyZXR1cm59dC5pbnB1dFdpZHRoPWQuX2dldElucHV0V2lkdGgoKSx0LmlucHV0SGVpZ2h0PWQuX2dldElucHV0SGVpZ2h0KCksdC5pbnB1dENoYW5uZWxDb3VudD1kLl9nZXRJbnB1dENoYW5uZWxDb3VudCgpLHQuaW5wdXRNZW1vcnlPZmZzZXQ9ZC5fZ2V0SW5wdXRNZW1vcnlPZmZzZXQoKSxjb25zb2xlLmxvZygiSW5wdXQgbWVtb3J5IG9mZnNldDoiLHQuaW5wdXRNZW1vcnlPZmZzZXQpLGNvbnNvbGUubG9nKCJJbnB1dCBoZWlnaHQ6Iix0LmlucHV0SGVpZ2h0KSxjb25zb2xlLmxvZygiSW5wdXQgd2lkdGg6Iix0LmlucHV0V2lkdGgpLGNvbnNvbGUubG9nKCJJbnB1dCBjaGFubmVsczoiLHQuaW5wdXRDaGFubmVsQ291bnQpLHQub3V0cHV0TWVtb3J5T2Zmc2V0PWQuX2dldE91dHB1dE1lbW9yeU9mZnNldCgpLHQub3V0cHV0V2lkdGg9ZC5fZ2V0T3V0cHV0V2lkdGgoKSx0Lm91dHB1dEhlaWdodD1kLl9nZXRPdXRwdXRIZWlnaHQoKSx0Lm91dHB1dENoYW5uZWxDb3VudD1kLl9nZXRPdXRwdXRDaGFubmVsQ291bnQoKSxjb25zb2xlLmxvZygiT3V0cHV0IG1lbW9yeSBvZmZzZXQ6Iix0Lm91dHB1dE1lbW9yeU9mZnNldCksY29uc29sZS5sb2coIk91dHB1dCBoZWlnaHQ6Iix0Lm91dHB1dEhlaWdodCksY29uc29sZS5sb2coIk91dHB1dCB3aWR0aDoiLHQub3V0cHV0V2lkdGgpLGNvbnNvbGUubG9nKCJPdXRwdXQgY2hhbm5lbHM6Iix0Lm91dHB1dENoYW5uZWxDb3VudCksdC5zZWxlY3RlZFRGTGl0ZT1kfWNhdGNoKG0pe2MobSk7cmV0dXJufWYoKX0pfXMoKS50aGVuKHU9PntpZih1PT09bnVsbCl0aHJvdyBjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlIG51bGwiKSwibG9hZFRGTGl0ZSBudWxsIjthKHUpLnRoZW4oZj0+e2kodCl9KS5jYXRjaChmPT57Y29uc29sZS5lcnJvcigibG9hZFRGTGl0ZU1vZGVsIGVycm9yIiksbygibG9hZFRGTGl0ZU1vZGVsIGVycm9yIil9KX0pLmNhdGNoKHU9Pntjb25zb2xlLmVycm9yKCJsb2FkVEZMaXRlIGVycm9yOiIsdSksbygibG9hZFRGTGl0ZSBlcnJvcjoiK3UpfSl9KTtyZXR1cm4gbn1jbGFzcyBwbHtjb25zdHJ1Y3Rvcigpe3AodGhpcywiY2FudmFzIixuZXcgT2Zmc2NyZWVuQ2FudmFzKDAsMCkpO3AodGhpcywiY29udGV4dCIsdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiLHt3aWxsUmVhZEZyZXF1ZW50bHk6ITB9KSk7cCh0aGlzLCJwaXhlbENvdW50IiwwKTtwKHRoaXMsImlucHV0T2Zmc2V0IiwwKTtwKHRoaXMsIm91dHB1dE9mZnNldCIsMCk7cCh0aGlzLCJpbmZvcyIpO3AodGhpcywibWFzayIpfWFzeW5jIGluaXQoZSx0KXthd2FpdCB0aGlzLmluaXRXYXNtKGUsdCksdGhpcy5pbmZvcyYmKHRoaXMuY2FudmFzLndpZHRoPXRoaXMuaW5mb3MuaW5wdXRXaWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9dGhpcy5pbmZvcy5pbnB1dEhlaWdodCx0aGlzLnBpeGVsQ291bnQ9dGhpcy5pbmZvcy5pbnB1dFdpZHRoKnRoaXMuaW5mb3MuaW5wdXRIZWlnaHQsdGhpcy5tYXNrPW5ldyBJbWFnZURhdGEodGhpcy5pbmZvcy5pbnB1dFdpZHRoLHRoaXMuaW5mb3MuaW5wdXRIZWlnaHQpLHRoaXMuaW5wdXRPZmZzZXQ9dGhpcy5pbmZvcy5pbnB1dE1lbW9yeU9mZnNldC80LHRoaXMub3V0cHV0T2Zmc2V0PXRoaXMuaW5mb3Mub3V0cHV0TWVtb3J5T2Zmc2V0LzQpfWFzeW5jIGluaXRXYXNtKGUsdCl7dGhpcy5pbmZvcz1hd2FpdCBobChlLHQpfWdldE91dHB1dERpbWVuc2lvbnMoKXt2YXIgZSx0LG4saTtyZXR1cm57d2lkdGg6KHQ9KGU9dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOmUub3V0cHV0V2lkdGgpIT1udWxsP3Q6MCxoZWlnaHQ6KGk9KG49dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOm4ub3V0cHV0SGVpZ2h0KSE9bnVsbD9pOjB9fWFzeW5jIHByb2Nlc3MoZSl7aWYoIXRoaXMubWFza3x8IXRoaXMuaW5mb3MpcmV0dXJuO2NvbnN0IHQ9dGhpcy5pbmZvcy5pbnB1dFdpZHRoLG49dGhpcy5pbmZvcy5pbnB1dEhlaWdodDt0aGlzLmNvbnRleHQuZHJhd0ltYWdlKGUsMCwwLGUud2lkdGgsZS5oZWlnaHQsMCwwLHQsbik7Y29uc3QgaT10aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsMCx0LG4pLG89dGhpcy5pbmZvcy5zZWxlY3RlZFRGTGl0ZS5IRUFQRjMyO2ZvcihsZXQgcz0wO3M8dGhpcy5waXhlbENvdW50O3MrKyl7Y29uc3QgYT10aGlzLmlucHV0T2Zmc2V0K3MqMztvW2FdPWkuZGF0YVtzKjRdLzI1NSxvW2ErMV09aS5kYXRhW3MqNCsxXS8yNTUsb1thKzJdPWkuZGF0YVtzKjQrMl0vMjU1fXRoaXMuaW5mb3Muc2VsZWN0ZWRURkxpdGUuX3J1bkluZmVyZW5jZSgpO2ZvcihsZXQgcz0wO3M8dGhpcy5waXhlbENvdW50O3MrKyl7Y29uc3QgYT10aGlzLmluZm9zLnNlbGVjdGVkVEZMaXRlLkhFQVBGMzJbdGhpcy5vdXRwdXRPZmZzZXQrc107dGhpcy5tYXNrLmRhdGFbcyo0XT10aGlzLm1hc2suZGF0YVtzKjQrM109MjU1KmF9cmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKHRoaXMubWFzayl9aXNHcHVTdXBwb3J0ZWQoKXt2YXIgZSx0LG47cmV0dXJuKG49KHQ9KGU9dGhpcy5pbmZvcyk9PW51bGw/dm9pZCAwOmUuc2VsZWN0ZWRURkxpdGUpPT1udWxsP3ZvaWQgMDp0Ll9pc0dQVUVuYWJsZWQoKSkhPW51bGw/bjohMX19Y2xhc3MgeWx7Y29uc3RydWN0b3IoKXtwKHRoaXMsInNlbGZpZVNlZ21lbnRhdGlvbiIsbmV3IHBsKTtwKHRoaXMsImJhY2tncm91bmRGaWx0ZXIiKTtwKHRoaXMsInByZXZpb3VzRGltZW5zaW9ucyIse3dpZHRoOjAsaGVpZ2h0OjB9KX1hc3luYyBpbml0KGUsdCl7YXdhaXQgdGhpcy5zZWxmaWVTZWdtZW50YXRpb24uaW5pdCh0Lndhc21Bc3NldFVyaVBhdGgsdC50ZmxpdGVBc3NldFVyaVBhdGgpO2NvbnN0e3dpZHRoOm4saGVpZ2h0Oml9PXRoaXMuc2VsZmllU2VnbWVudGF0aW9uLmdldE91dHB1dERpbWVuc2lvbnMoKTt0aGlzLmJhY2tncm91bmRGaWx0ZXI9bmV3IGNsKGUse2ZvcmVncm91bmRXaWR0aDoxLGZvcmVncm91bmRIZWlnaHQ6MSxtYXNrV2lkdGg6bixtYXNrSGVpZ2h0Oml9KX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt2YXIgcyxhLHUsZjtjb25zdCBuPShzPWUudGltZXN0YW1wKSE9bnVsbD9zOjAsaT1hd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChlKSxvPWF3YWl0IHRoaXMuc2VsZmllU2VnbWVudGF0aW9uLnByb2Nlc3MoaSk7bz8oKGkud2lkdGghPT10aGlzLnByZXZpb3VzRGltZW5zaW9ucy53aWR0aHx8aS5oZWlnaHQhPT10aGlzLnByZXZpb3VzRGltZW5zaW9ucy5oZWlnaHQpJiYodGhpcy5wcmV2aW91c0RpbWVuc2lvbnMud2lkdGg9aS53aWR0aCx0aGlzLnByZXZpb3VzRGltZW5zaW9ucy5oZWlnaHQ9aS5oZWlnaHQsYXdhaXQoKGE9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6YS5yZXNpemVGb3JlZ3JvdW5kKGkud2lkdGgsaS5oZWlnaHQpKSksYXdhaXQoKHU9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dS5wcm9jZXNzKGksbykpLGUuY2xvc2UoKSx0LmVucXVldWUobmV3IFZpZGVvRnJhbWUoKGY9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6Zi5jYW52YXMse3RpbWVzdGFtcDpuLGFscGhhOiJkaXNjYXJkIn0pKSk6dC5lbnF1ZXVlKGUpfWFzeW5jIHNldEJhY2tncm91bmRPcHRpb25zKGUpe3ZhciB0O2F3YWl0KCh0PXRoaXMuYmFja2dyb3VuZEZpbHRlcik9PW51bGw/dm9pZCAwOnQuc2V0QmFja2dyb3VuZE9wdGlvbnMoZSkpfWFzeW5jIHNldFZpZGVvQkdSZWFkYWJsZShlKXt2YXIgdDthd2FpdCgodD10aGlzLmJhY2tncm91bmRGaWx0ZXIpPT1udWxsP3ZvaWQgMDp0LnNldFZpZGVvQkdSZWFkYWJsZShlKSl9YXN5bmMgc2V0VmlydHVhbEJHSW1hZ2UoZSl7dmFyIHQ7YXdhaXQoKHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dC5zZXRWaXJ0dWFsQkdJbWFnZShlKSl9c2V0RmxpY2tlcmluZ09wdGlvbnMoZSl7dmFyIHQ7KHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbHx8dC5zZXRGbGlja2VyaW5nT3B0aW9ucyhlKX1hc3luYyBwcm9maWxlKGUpe3ZhciB0LG47cmV0dXJuKG49KHQ9dGhpcy5iYWNrZ3JvdW5kRmlsdGVyKT09bnVsbD92b2lkIDA6dC5wcm9maWxlKGUpKSE9bnVsbD9uOltdfX1jb25zdCBOcj1jbGFzc3tjb25zdHJ1Y3Rvcigpe3AodGhpcywiYmFja2dyb3VuZFRyYW5zZm9ybWVyIixuZXcgeWwpO3AodGhpcywibWVkaWFQcm9jZXNzb3IiLG5ldyB3cyk7cCh0aGlzLCJyYXRlIiwzMCk7cCh0aGlzLCJyZXNvbHZlT25NZWRpYVByb2Nlc3NvciIpO3AodGhpcywiZXZlbnRzUXVldWUiLFtdKX1hc3luYyBpbml0KGUsdCl7YXdhaXQgdGhpcy5iYWNrZ3JvdW5kVHJhbnNmb3JtZXIuaW5pdChlLHQpLGF3YWl0IHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhbnNmb3JtZXJzKFt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lcl0pLHRoaXMubWVkaWFQcm9jZXNzb3Iuc2V0VHJhY2tFeHBlY3RlZFJhdGUodGhpcy5yYXRlKSx0aGlzLm1lZGlhUHJvY2Vzc29yLm9uQW55KChuLGkpPT57dGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcj8odGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcih7bmFtZTpuLGRhdGE6aX0pLHRoaXMucmVzb2x2ZU9uTWVkaWFQcm9jZXNzb3I9dm9pZCAwKTp0aGlzLmV2ZW50c1F1ZXVlLnB1c2goe25hbWU6bixkYXRhOml9KX0pfWFzeW5jIG9uTWVkaWFQcm9jZXNzb3JFdmVudCgpe3JldHVybiBhd2FpdCBuZXcgUHJvbWlzZShlPT57dGhpcy5ldmVudHNRdWV1ZS5sZW5ndGg+MD9lKHRoaXMuZXZlbnRzUXVldWUuc2hpZnQoKSk6dGhpcy5yZXNvbHZlT25NZWRpYVByb2Nlc3Nvcj1lfSl9YXN5bmMgc2V0VHJhY2tFeHBlY3RlZFJhdGUoZSl7dGhpcy5yYXRlPWUsdGhpcy5tZWRpYVByb2Nlc3Nvci5zZXRUcmFja0V4cGVjdGVkUmF0ZShlKX1hc3luYyB0cmFuc2Zvcm0oZSx0KXt0aGlzLm1lZGlhUHJvY2Vzc29yLnRyYW5zZm9ybShlLHQpfWFzeW5jIHNldEJhY2tncm91bmRPcHRpb25zKGUpe3ZhciB0O2F3YWl0KCh0PXRoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyKT09bnVsbD92b2lkIDA6dC5zZXRCYWNrZ3JvdW5kT3B0aW9ucyhlKSl9c2V0VmlkZW9CR1JlYWRhYmxlKGUpe3RoaXMuYmFja2dyb3VuZFRyYW5zZm9ybWVyLnNldFZpZGVvQkdSZWFkYWJsZShlKX1hc3luYyBzZXRWaXJ0dWFsQkdJbWFnZShlKXthd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRWaXJ0dWFsQkdJbWFnZShlKX1hc3luYyB0ZXJtaW5hdGUoKXthd2FpdCB0aGlzLm1lZGlhUHJvY2Vzc29yLmRlc3Ryb3koKX1zZXRGbGlja2VyaW5nT3B0aW9ucyhlKXt0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5zZXRGbGlja2VyaW5nT3B0aW9ucyhlKX1zZXRWb25hZ2VNZXRhZGF0YShlKXtmcyhlKX1hc3luYyBwcm9maWxlKGUpe3JldHVybiBKU09OLnN0cmluZ2lmeShhd2FpdCB0aGlzLmJhY2tncm91bmRUcmFuc2Zvcm1lci5wcm9maWxlKGUpKX19O2xldCBCaT1OcjsoKCk9PntYaSgiUHJvY2Vzc29yV29ya2VyIixOcil9KSgpfSkoKTsK",Pd=typeof window<"u"&&window.Blob&&new Blob([atob(Md)],{type:"text/javascript;charset=utf-8"});function cg(){const I=Pd&&(window.URL||window.webkitURL).createObjectURL(Pd);try{return I?new Worker(I):new Worker("data:application/javascript;base64,"+Md)}finally{I&&(window.URL||window.webkitURL).revokeObjectURL(I)}}const Wd=class extends Tc{constructor(){super(...arguments),u(this,"rate",30),u(this,"worker")}async init(I){this.worker=await js(ag,cg),await this.worker.init(`worker_${Wd.initCount++}`,I),await this.worker.setVonageMetadata(Pn()),await this.setBackgroundOptions(I),this.listenWorker()}async setTrackExpectedRate(I){var x;await((x=this.worker)==null?void 0:x.setTrackExpectedRate(I))}async setBackgroundOptions(I){var x,N,ie;const{transformerType:pe}=I;switch(pe){case"VideoBackground":await((x=this.worker)==null?void 0:x.setVideoBGReadable(await dc.createVideoReadable(I.backgroundAssetUri)));break;case"VirtualBackground":await((N=this.worker)==null?void 0:N.setVirtualBGImage(await dc.createImageCanvas(I.backgroundAssetUri)));break}await((ie=this.worker)==null?void 0:ie.setBackgroundOptions(I))}async transform(I,x){var N;await((N=this.worker)==null?void 0:N.transform(I,x))}async destroy(){var I;await((I=this.worker)==null?void 0:I.terminate())}async setFlickeringOptions(I){var x;await((x=this.worker)==null?void 0:x.setFlickeringOptions(I))}async profile(I){var x;const N=await((x=this.worker)==null?void 0:x.profile(I));return JSON.parse(N??"[]")}async listenWorker(){for(var I,x,N;(I=this.worker)!=null&&I.worker;){const{name:ie,data:pe}=await((x=this.worker)==null?void 0:x.onMediaProcessorEvent());switch(ie){case"error":case"warn":this.emit(ie,pe);break;case"pipelineInfo":switch(this.emit(ie,pe),pe){case"pipeline_ended":case"pipeline_ended_with_error":await((N=this.worker)==null?void 0:N.terminate());return}break}}}};let Xd=Wd;u(Xd,"initCount",0);class ug{constructor(x){this.queries=x}async downloadSpeedscope(){this.download(await this.convertToSpeedscope())}download(x){const N=document.createElement("a");N.href=URL.createObjectURL(new Blob([x],{type:"application/json"})),N.download=`profile-${+new Date}.speedscope.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N)}convertToSpeedscope(){const x=[],N={},ie=[];let pe=0;for(const rt of this.queries){const $e=[];for(const lt of rt)N[lt.name]===void 0&&(N[lt.name]=x.length,x.push({name:lt.name})),$e.push({type:lt.action==Vc.PUSH?"O":"C",frame:N[lt.name],at:lt.timestamp}),pe=Math.max(pe,lt.timestamp+lt.duration);ie.push({events:$e,type:"evented",name:"GPU Profile",unit:"nanoseconds",startValue:0,endValue:pe})}return JSON.stringify({$schema:"https://www.speedscope.app/file-format-schema.json",shared:{frames:x},profiles:ie},null,2)}}class Tl extends Tc{constructor(){super(),u(this,"worker",new Xd),u(this,"connector",new Ce(this.worker))}async init(x){await this.worker.init(x),this.worker.onAny((N,ie)=>this.emit(N,ie))}async setBackgroundOptions(x){await this.worker.setBackgroundOptions(x)}setTrackExpectedRate(x){this.worker.setTrackExpectedRate(x)}getConnector(){return this.connector}async profile(x){return this.worker.profile(x)}static async profile(x){const N=await n.all(this.instances.map(ie=>ie.profile(x)));return new ug(N)}static async create(x){const N=new this;return await N.init(x),this.instances.push(N),N}}u(Tl,"instances",[]);function lg(){return wi}function dg(){return da}function fg(){return fa}function hg(){return hs}function pg(){return Sa}function mg(){return ha}function gg(){return qi}var Dd=(I=>(I.FAST="FAST",I.PRECISE="PRECISE",I))(Dd||{});async function yg(I){return await Tl.create(I)}}.call(this,e(1),e(44))},function(t,r,e){const n=e(35)().onlyLocal(),o=e(101),a=o.prependProxyToUrlIfNeeded,c=(l,f)=>{let b=l.apiUrl.includes("anvil.opentok.com")?"https://static.opentok.com":"https://www.dev.tokbox.com";return f&&(f.includes("euproxy.opentok.com")?b="https://static-eu.opentok.com":b=a(b,f)),`${b}/ml-transformers/v4.0.0`},u={getConfig:function(f){f===void 0&&(f={});const g=f,v=g.staticConfig,b=v===void 0?n:v,S=g.proxyUrl,C=c(b,S);return{mediapipeBaseAssetsUri:`${C}`,wasmAssetUriPath:`${C}/`,tfliteAssetUriPath:`${C}/`}}};t.exports=u},function(t,r,e){const n=e(18),o=e(11),a=e(708),c=e(709),u=e(710);t.exports=function(f){f===void 0&&(f={});const g=f.Errors||e(7),v=f.ExceptionCodes||e(10),b=f.logging||e(2)("publisherInit"),S=f.otError||e(13)(),C=f.OTHelpers||e(8),O=f.Publisher||e(169)(),A=f.sessionObjects||e(21);return function(V,k,M){b.debug(`OT.initPublisher(${V})`),typeof V=="string"&&!document.getElementById(V)&&(V=k,k=M,M=arguments[3]),typeof V=="function"?(M=V,k=void 0,V=void 0):o(V)&&!C.isElementNode(V)&&(M=k,k=V,V=void 0),typeof k=="function"&&(M=k,k=void 0);let W;k&&(o(k)?k.insertDefaultUI===!1&&V?W="You cannot specify a target element if insertDefaultUI is false":a(k.audioSource)&&a(k.videoSource)&&(W="You cannot specify both audioSource and videoSource as null or false"):(W="properties argument to Publisher constructor, if provided, should be an object",k=void 0)),c(k),u(k);const Y=new O(k||{});A.publishers.add(Y);const H=function(){M&&n(M)&&(M(...arguments),M=void 0)};W!==void 0&&(b.error(W),H(S(g.INVALID_PARAMETER,new Error(W),v.INVALID_PARAMETER)));const P=function(z){Y.off("publishComplete",j),H(z)};let j=function(z){Y.off("initSuccess",P),z&&H(z)};return Y.once("initSuccess",P),Y.once("publishComplete",j),Y.publish(V),Y}}},function(t,r,e){(function(n){var o=e(0),a=o(e(4)),c=o(e(5)),u=o(e(16));const l=e(28),f=e(711),g=e(11),v=e(18),b=e(9),S=e(27),C=e(6),O=e(26),A=e(35)(),w=e(75),V=e(313),k=e(713),M=e(714),W=e(715),Y=e(101),H=Y.prependProxyToUrlIfNeeded,P=e(102),j=P.getProxyUrl,_=e(716);t.exports=function(ae){ae===void 0&&(ae={});const me=ae.adaptIceServers||e(103).adaptIceServers,ye=ae.AnalyticsHelper||O,Pe=ae.APIKEY||e(72),Te=ae.Capabilities||e(170),Ue=ae.convertAnvilErrorCode||e(717),_e=ae.convertRumorError||e(319),je=ae.Errors||e(7),Ke=ae.Events||e(23)(),De=ae.Stream||e(171),Ze=ae.ExceptionCodes||e(10),tt=ae.hasIceRestartsCapability||e(320),gt=ae.hasE2eeCapability||e(111),Ee=ae.logging||e(2)("Session"),Le=ae.otError||e(13)(),We=ae.OTErrorClass||e(22),ut=ae.OTHelpers||e(8),bt=e(718),mt=ae.StaticConfig||A,It=ae.staticConfig||mt.onlyLocal(),Ge=ae.Publisher||e(169)(),Qe=ae.RaptorSocket||e(719).default(),Et=ae.SessionDispatcher||e(327),Tt=ae.sessionObjects||e(21),Zt=ae.sessionTag||e(326),$t=ae.socketCloseCodes||e(77),pt=ae.Subscriber||e(305)(),ft=ae.systemRequirements||e(154),et=ae.uuid||e(17),it=M({otError:Le}),Pt=ae.global||(typeof window!==void 0?window:commonjsGlobal),nn=ae.getSessionInfo||e(743)(),Ut=e(143),xt=ae.KeyStore||e(746),Wt=ae.SFrameClientStore||e(748),tn=ae.SinglePeerConnectionController||e(750),mn=ae.initPublisher||e(317)({Publisher:Ge});return function(Zn,dr,pr){var Bn=this;let Jn=pr===void 0?{}:pr,Dt=Jn.iceConfig,Ii=Jn.connectionEventsSuppressed,ti=Jn.ipWhitelist,ci=ti===void 0?!1:ti,Rr=Jn.encryptionSecret,Vr=Jn._enableSinglePeerConnection;const ui=j(),Vi=new ye,Os=At=>typeof At=="string"?this.streams.get(At)||{id:At}:At;C(this),this._tag=Zt,ft.check()||ft.upgrade(),dr==null&&(dr=Zn,Zn=null),it(Dt),this.id=dr,this.sessionId=dr,this.keyStore=new xt,this.sFrameClientStore=new Wt;let ii,xo,Ws,ga,Kn,mi,ya,ki,Ao=!0,Ln=!1,Uo=Zn;const Xr=this;let bs=dr,Xs=et(),rr=et(),oi=Ee,Ds=!1;const ea=[];let Ji=null,mr=!1,Da=!1,ca,Ss,kr,zs;const Vn=ut.statable(this,["disconnected","connecting","connected","disconnecting"],"disconnected");this.connection=null,this.connections=new ut.Collection,this.streams=new ut.Collection,this.archives=new ut.Collection;let Cs;const $o=function(en){Vn("disconnected"),en.code||(en.code=Ze.CONNECT_FAILED),oi.error(`${en.name||"Unknown Error"}: ${en.message}`),We.handleJsException({error:en,target:this,analytics:Vi}),this.trigger("sessionConnectFailed",en)},Bs=function(en){Ln=!1;const Jt=en.reason;this.logEvent("Connect","Disconnected",{reason:en.reason});const Cn=new Ke.SessionDisconnectEvent("sessionDisconnected",Jt.replace("networkTimedout","networkDisconnected"));this.isConnected()&&this.disconnect(),Ss(),ca.call(this,Jt),setTimeout(()=>{this.dispatchEvent(Cn),kr.call(this,Cn.reason),Cn.isDefaultPrevented()||zs.call(this,Cn.reason)})},Zr=function(en){Ii||en.id.match(/^symphony\./)||this.dispatchEvent(new Ke.ConnectionEvent(S.CONNECTION_CREATED,en))},Ba=function(en,Jt){en.id.match(/^symphony\./)||ii&&en.id===ii.id()||this.dispatchEvent(new Ke.ConnectionEvent(S.CONNECTION_DESTROYED,en,Jt))},rc=function(en){en&&en.connection&&(!this.connection||en.connection.id!==this.connection.id)&&this.dispatchEvent(new Ke.StreamEvent(S.STREAM_CREATED,en,null,!1))},Js=function(en){const Jt=en.target,Cn=en.changedProperty;let On=en.newValue;Cn==="videoDisableWarning"||Cn==="audioDisableWarning"||(Cn==="videoDimensions"&&(On={width:On.width,height:On.height}),this.dispatchEvent(new Ke.StreamPropertyChangedEvent(S.STREAM_PROPERTY_CHANGED,Jt,Cn,en.oldValue,On)))},Ra=function(en,Jt){Jt===void 0&&(Jt="clientDisconnected");const Cn=new Ke.StreamEvent("streamDestroyed",en,Jt,!0),On=()=>{Tt.subscribers.where({streamId:en.id}).filter(Pn=>Pn.session.id===this.id&&Pn.stream).forEach(Pn=>{Pn._disconnect({reason:Jt}),Cn.isDefaultPrevented()||Pn._destroy({reason:Jt,noStateTransition:!0})})};en.connection.id===this.connection.id?Tt.publishers.where({streamId:en.id}).forEach(function(Pn){Pn._.unpublishStreamFromSession(en,this,Jt)},this):this.dispatchEvent(Cn),On()},va=function(en){this.dispatchEvent(new Ke.ArchiveEvent("archiveStarted",en))},za=function(en){this.dispatchEvent(new Ke.ArchiveEvent("archiveDestroyed",en))},xa=function(en){const Jt=en.target,Cn=en.changedProperty,On=en.newValue;Cn==="status"&&On==="stopped"?this.dispatchEvent(new Ke.ArchiveEvent("archiveStopped",Jt)):this.dispatchEvent(new Ke.ArchiveEvent("archiveUpdated",Jt))},Ua=()=>Tt.subscribers.forEach(At=>At._.pauseAndPlayVideoElement()),ds=function(){Xr.token=null,Ws=null,Vn("disconnected"),ii=null,xo&&(xo.stop(),xo=null),Xr.connection=null,Xr.capabilities=new Te([],{hasE2eeCapability:gt}),Xr.connections.destroy(),Xr.streams.destroy(),Xr.archives.destroy()};Ss=function(){rr=et(),ds()},ca=function(en){Tt.publishers.where({session:this}).forEach(Jt=>{Jt.disconnect(en)}),Tt.subscribers.where({session:this}).forEach(Jt=>{Jt._disconnect()})},kr=function(en){Tt.publishers.where({session:this}).forEach(Jt=>{Jt._.streamDestroyed(en)})},zs=function(en){Tt.subscribers.where({session:this}).forEach(Jt=>{Jt._destroy({reason:en})})};const un=function(){oi.debug("OT.Session: connecting to Raptor");const en=H(this.sessionInfo.messagingURL,ui),Jt=["forceMute"];this.sessionInfo.isAdaptiveEnabled&&Jt.push("amr"),Da&&Jt.push("spc"),ii=new Qe(rr,Xs,en,this.sessionInfo.symphonyAddress,Et(this,{connectionEventsSuppressed:Ii}),Vi,Jt);function On(Pn,yr){let Cr;switch(Pn){case"WebSocketConnection":if(Cr=f($t.codes,Kr=>Kr===yr),Cr)return je[`SOCKET_${Cr}`];break;case"ConnectToSession":case"GetSessionState":switch(yr){case Ze.CONNECT_FAILED:return je.CONNECT_FAILED;case Ze.UNEXPECTED_SERVER_RESPONSE:return je.UNEXPECTED_SERVER_RESPONSE;case Ze.CONNECTION_LIMIT_EXCEEDED:return je.CONNECTION_LIMIT_EXCEEDED}break}}ii.connect(Ws,this.sessionInfo,{connectionEventsSuppressed:Ii},(Pn,yr)=>{if(Pn){const Kr={};let ko;if(Pn.reason==="ConnectToSession"||Pn.reason==="GetSessionState"){const Ia=_e(Pn);b(Kr,{originalMessage:Pn.message,originalCode:Pn.code}),Pn.code=Ia.code,Pn.message=Ia.message}(Pn.code||Pn.message||Pn.reason)&&(ko={failureCode:Pn.code,failureMessage:Pn.message,failureReason:Pn.reason,socketId:ii.socketId}),ii=null,this.logConnectivityEvent("Failure",Kr,ko);const Si=On(Pn.reason,Pn.code);Si&&(Pn=Le(Si,new Error(Pn.message),Pn.code)),$o.call(this,Pn);return}oi.debug("OT.Session: Received session state from Raptor",yr),this.connection=this.connections.get(ii.id()),this.connection&&(this.capabilities=this.connection.permissions),Vn("connected"),this.logConnectivityEvent("Success",{connectionId:this.connection.id}),this.connection.on("destroyed",Bs,this),this.dispatchEvent(new Ke.SessionConnectEvent(S.SESSION_CONNECTED)),this.connections.on({add:Zr,remove:Ba},this),this.streams.on({add:rc,remove:Ra,update:Js},this),this.archives.on({add:va,remove:za,update:xa},this),this.connections._triggerAddEvents(),this.streams._triggerAddEvents(),this.archives._triggerAddEvents(),ut.env.isiOS&&ut.env.iOSVersion>=13.3&&this.on("gsmCallEnded",Ua)})},yn=At=>this.capabilities.permittedTo(At),En=(At,en)=>{Ee.error(`${At.name}: ${At.message}`),typeof en=="function"&&en(At),We.handleJsException({error:At,target:this,analytics:Vi})},Sn=At=>{const en=Le(At.code,new Error(At.message),At.exceptionCode);return En(en),en},xr=()=>this.isNot("connected")?Sn(bt.NOT_CONNECTED):yn("forceMute")?null:Sn(bt.PERMISSION_DENIED),li=At=>At.code==="404"?Sn(bt.NOT_FOUND):At.code==="403"?Sn(bt.PERMISSION_DENIED):Sn(bt.UNEXPECTED_SERVER_RESPONSE);this.reportIssue=At=>{let en=At.id;return V(Vi.logEvent.bind(Vi))({action:"ReportIssue",variation:"Event",connectionId:rr,payload:{reportIssueId:en}},null)},this.logEvent=function(At,en,Jt,Cn){let On={action:At,variation:en,payload:Jt,sessionId:bs,messagingServer:Kn,p2p:ga,partnerId:Uo,connectionId:rr};Cn&&(On=b(Cn,On)),Vi.logEvent(On)},this.logConfigurationFileEvent=function(At,en,Jt){if(en===void 0&&(en=null),Jt===void 0&&(Jt={}),At==="Attempt")ya=new Date().getTime();else if(At==="Failure"||At==="Success"){const Cn=new Date().getTime()-ya;b(Jt,{attemptDuration:Cn})}ui&&(Jt.proxyUrl=ui),this.logEvent("ConfigurationFile",At,en,(0,u.default)({},Jt))},this.logConnectivityEvent=function(At,en,Jt){if(en===void 0&&(en=null),Jt===void 0&&(Jt={}),ui&&(Jt.proxyUrl=ui),At==="Attempt"&&(xo&&(xo.stop(),Ee.error("_connectivityAttemptPinger should have been cleaned up")),mi=new Date().getTime(),xo=new w(()=>{this.logEvent("Connect","Attempting",en,(0,u.default)({},Jt))},1/5,6),xo.start()),At==="Failure"||At==="Success"||At==="Cancel"){const Cn=On=>{xo&&(xo.stop(),xo=void 0),this.logEvent("Connect",At,en,(0,u.default)({},Jt,{attemptDuration:new Date().getTime()-mi,iceConfig:On,ipWhitelist:ci}))};At==="Success"?this._.getIceConfig().then(On=>{const Pn={includeServers:Dt&&Dt.includeServers||"all",transportPolicy:On.transportPolicy};Pn.servers=On.servers?On.servers.map(yr=>({url:yr.urls})):[],Cn(Pn)}):Cn()}else this.logEvent("Connect",At,en,Jt)},this.connect=function(){let At;for(var en=arguments.length,Jt=new Array(en),Cn=0;Cn<en;Cn++)Jt[Cn]=arguments[Cn];Jt.length>1&&(typeof Jt[0]=="string"||typeof Jt[0]=="number")&&typeof Jt[1]=="string"?(Zn==null&&(Uo=Jt[0].toString()),At=Jt[1]):At=Jt[0];const On=Jt[Jt.length-1];if(Bn.is("connecting","connected"))return oi.warn(`OT.Session: Cannot connect, the session is already ${Bn.currentState}`),Bn;Vi.sessionInfo=new Ut,ds(),Vn("connecting");const Pn=rr;function yr(){const Si=rr!==Pn;return Si&&Ee.debug("Connection was interrupted"),Si}if(Bn.token=!v(At)&&At,Ws=!v(At)&&At,Ao?Ao=!1:Xs=et(),On&&v(On)){let Si;const Ia=function(){Si();for(var or=arguments.length,As=new Array(or),Ri=0;Ri<or;Ri++)As[Ri]=arguments[Ri];On(void 0,...As)},Li=function(){Si(),On(...arguments)};Si=()=>{Bn.off("sessionConnected",Ia),Bn.off("sessionConnectFailed",Li)},Bn.once("sessionConnected",Ia),Bn.once("sessionConnectFailed",Li)}if(Uo==null||v(Uo))return setTimeout($o.bind(Bn,Le(je.AUTHENTICATION_ERROR,new Error("API Key is undefined. You must pass an API Key to initSession."),Ze.AUTHENTICATION_ERROR))),Bn;if(!bs||g(bs)||Array.isArray(bs)){let Si;return bs?(Si="SessionID is not a string. You must use string as the session ID passed into OT.initSession().",bs=bs.toString()):Si="SessionID is undefined. You must pass a sessionID to initSession.",setTimeout($o.bind(Bn,Le(je.INVALID_SESSION_ID,new Error(Si),Ze.INVALID_SESSION_ID))),Bn.logConnectivityEvent("Attempt"),Bn.logConnectivityEvent("Failure",null,{failureReason:"ConnectToSession",failureCode:Ze.INVALID_SESSION_ID,failureMessage:Si}),Bn}if(Bn.apiKey=Uo.toString(),Uo=Uo.toString(),Rr){if(!gt())return setTimeout($o.bind(Bn,Le(je.UNSUPPORTED_BROWSER,new Error("E2E Encryption is not supported in your browser.")))),Bn;try{_(Rr),Bn.keyStore.set(dr,Rr),mr=!0}catch(Si){return setTimeout($o.bind(Bn,Le(je.INVALID_ENCRYPTION_SECRET,new Error(`Invalid encryptionSecret: ${Si.message}`)))),Bn}}Pe.value.length===0&&(Pe.value=Uo);const Cr=Boolean(mt.onlyLocal().configUrl),Kr=ci===!0&&Boolean(mt.onlyLocal().ipWhitelistConfigUrl);return!Cr&&!Kr?Bn.logConfigurationFileEvent("Event",{message:"No configUrl, using local config only"}):Bn.logConfigurationFileEvent("Attempt"),(Cr||Kr?mt.get({partnerId:Uo,token:At,useIpWhitelistConfigUrl:Kr,proxyUrl:ui}):n.resolve(mt.onlyLocal())).then(Si=>((Cr||Kr)&&Bn.logConfigurationFileEvent("Success"),Si),Si=>((Cr||Kr)&&Bn.logConfigurationFileEvent("Failure",{failureMessage:Si.message,failureStack:Si.stack}),mt.onlyLocal())).then(Si=>{if(Bn.staticConfig=Si,Vi.staticConfig=Si,Si.apiEnabled===!1)throw Le(je.API_KEY_DISABLED,new Error("The API KEY has been disabled. Access to the service is currently being restricted. Please contact support."));if(yr())return;Bn.logConnectivityEvent("Attempt"),ui?Bn.logEvent("SessionInfo","Attempt",null,{proxyUrl:ui}):Bn.logEvent("SessionInfo","Attempt");const Ia=or=>{or.code=Ue(or.code),Bn.logConnectivityEvent("Failure",null,{failureReason:"GetSessionInfo",failureCode:or.code||"No code",failureMessage:or.message,failureName:or.name}),or.name&&(or=Le(or.name,new Error(`${or.message}${or.code?` (${or.code})`:""}`),or.code)),$o.call(Bn,or)},Li=or=>{if(yr())return;if(or.partnerId&&or.partnerId!==Uo){const Ri="Authentication Error: The API key does not match the token or session.";Ia(Le(je.AUTHENTICATION_ERROR,new Error(Ri),Ze.AUTHENTICATION_ERROR));return}Da=W(or,Vr),Da&&(Cs=new tn(Bn)),Vi.sessionInfo=or;const As={features:{reconnection:or.reconnection,renegotiation:tt()&&or.renegotiation,simulcast:or.simulcast===void 0?!1:or.simulcast&&ut.env.name==="Chrome"}};if(ui&&(As.proxyUrl=ui),Bn.is("connecting")){Bn.sessionInfo=or,Bn._.setIceServers(Bn.sessionInfo.iceServers),ga=or.p2pEnabled,Kn=or.messagingServer,Bn.logEvent("SessionInfo","Success",null,As,{messagingServer:or.messagingServer});const Ri=Si.sessionInfoOverrides;Ri!=null&&typeof Ri=="object"&&Object.keys(Ri).forEach(ua=>{Object.defineProperty(Bn.sessionInfo,ua,{value:Ri[ua]})}),un.call(Bn)}},wa=H(Si.apiUrl,ui);return nn({anvilUrl:wa,sessionId:dr,token:Ws,connectionId:rr,clientVersion:Si.clientVersion}).then(Li,Ia)}).catch(Si=>{$o.call(Bn,Si)}),Bn},this.disconnect=function(){Cs&&(Cs.destroy(),Cs=null),ii&&ii.isNot("disconnected")?ii.isNot("disconnecting")&&(ii.isNot("connecting")||this.logConnectivityEvent("Cancel"),Vn("disconnecting"),ii.disconnect(),this.off("gsmCallEnded",Ua)):Ss()},this.destroy=function(){this.streams.destroy(),this.connections.destroy(),this.archives.destroy(),this.disconnect()},this.publish=function(At,en,Jt){if(typeof At=="function"&&(Jt=At,At=void 0),typeof en=="function"&&(Jt=en,en=void 0),Jt=Jt||function(){},this.isNot("connected"))return Vi.logError(1010,"OT.exception","We need to be connected before you can publish",null,{action:"Publish",variation:"Failure",failureReason:"unconnected",failureCode:Ze.NOT_CONNECTED,failureMessage:"We need to be connected before you can publish",sessionId:bs,streamId:At&&At.stream?At.stream.id:null,p2p:this.sessionInfo?this.sessionInfo.p2pEnabled:void 0,messagingServer:this.sessionInfo?this.sessionInfo.messagingServer:null,partnerId:Uo}),En(Le(je.NOT_CONNECTED,new Error("We need to be connected before you can publish"),Ze.NOT_CONNECTED),Jt),null;if(!yn("publish")){const Cn="This token does not allow publishing. The role must be at least `publisher` to enable this functionality",On={failureReason:"Permission",failureCode:Ze.UNABLE_TO_PUBLISH,failureMessage:Cn};return this.logEvent("Publish","Failure",null,On),En(Le(je.PERMISSION_DENIED,new Error(Cn),Ze.UNABLE_TO_PUBLISH),Jt),null}if(!At||typeof At=="string"||ut.isElementNode(At))At=mn(At,en);else if(At instanceof Ge)"session"in At&&At.session&&"sessionId"in At.session&&(At.session.sessionId===this.sessionId?oi.warn(`Cannot publish ${At.guid()} again to ${this.sessionId}. Please call session.unpublish(publisher) first.`):oi.warn(`Cannot publish ${At.guid()} publisher already attached to ${At.session.sessionId}. Please call session.unpublish(publisher) first.`));else{En(Le(je.INVALID_PARAMETER,new Error("Session.publish :: First parameter passed in is neither a string nor an instance of the Publisher"),Ze.UNABLE_TO_PUBLISH),Jt);return}return Ds&&At._.forceMuteAudio(),At._.publishToSession(this,Vi).catch(Cn=>{throw Cn.message=`Session.publish :: ${Cn.message}`,oi.error(Cn.code,Cn.message),Cn}).then(()=>At).then(function(){for(var Cn=arguments.length,On=new Array(Cn),Pn=0;Pn<Cn;Pn++)On[Pn]=arguments[Pn];return Jt(null,...On)},Cn=>Jt(Cn)),At},this.unpublish=function(At){if(!At){oi.error("OT.Session.unpublish: publisher parameter missing.");return}At._.unpublishFromSession(this,"unpublished")},this.setIceConfig=function(){var At=(0,c.default)(a.default.mark(function en(Jt){var Cn,On,Pn;return a.default.wrap(function(Cr){for(;;)switch(Cr.prev=Cr.next){case 0:if(it(Jt),Vi.logEvent({action:"setIceConfig",variation:"Attempt",payload:{newIceConfig:Jt}}),Dt=(0,u.default)({},Jt),Jt.includeServers!=="all"){Cr.next=8;break}return Cr.next=6,Xr._.getOtIceServerInfo();case 6:Cn=Cr.sent,Jt.customServers=Jt.customServers.concat(Cn.servers);case 8:return On=Kr=>({iceServers:Kr.customServers,iceTransportPolicy:Kr.transportPolicy}),Pn=On(Jt),Cr.prev=10,Cr.next=13,n.all(Tt.publishers.map(Kr=>Kr._.setIceConfig(Pn)).concat(Tt.subscribers.map(Kr=>Kr._.setIceConfig(Pn))));case 13:Cr.next=19;break;case 15:throw Cr.prev=15,Cr.t0=Cr.catch(10),Vi.logEvent({action:"setIceConfig",variation:"Failure",payload:{newIceConfig:Jt}}),Cr.t0;case 19:Vi.logEvent({action:"setIceConfig",variation:"Success",payload:{newIceConfig:Jt}});case 20:case"end":return Cr.stop()}},en,null,[[10,15]])}));return function(en){return At.apply(this,arguments)}}(),this.subscribe=function(At,en,Jt,Cn){if(typeof en=="function"&&(Cn=en,en=void 0,Jt=void 0),typeof Jt=="function"&&(Cn=Jt,Jt=void 0),Cn=Cn||function(){},!this.connection||!this.connection.connectionId){En(Le(je.NOT_CONNECTED,new Error("Session.subscribe :: Connection required to subscribe"),Ze.UNABLE_TO_SUBSCRIBE),Cn);return}if(!At){En(Le(je.INVALID_PARAMETER,new Error("Session.subscribe :: stream cannot be null"),Ze.UNABLE_TO_SUBSCRIBE),Cn);return}if(!Object.prototype.hasOwnProperty.call(At,"streamId")){En(Le(je.INVALID_PARAMETER,new Error("Session.subscribe :: invalid stream object"),Ze.UNABLE_TO_SUBSCRIBE),Cn);return}if(Jt&&Jt.insertDefaultUI===!1&&en){En(Le(je.INVALID_PARAMETER,new Error("You cannot specify a target element if insertDefaultUI is false"),Ze.INVALID_PARAMETER),Cn);return}en&&en.insertDefaultUI===!1&&(Jt=en,en=void 0);const On=new pt(en,b(Jt||{},{stream:At,session:this,analytics:Vi,_singlePeerConnectionController:Cs}),Pn=>{if(Pn){En(Pn,Cn);return}Cn(null,On)});return Tt.subscribers.add(On),On},this.unsubscribe=function(At){if(!At){const en="OT.Session.unsubscribe: subscriber cannot be null";throw oi.error(en),new Error(en)}return At.stream?(oi.debug(`OT.Session.unsubscribe: subscriber ${At.id}`),At._destroy({reason:"Unsubscribe"}),!0):(oi.warn("OT.Session.unsubscribe:: tried to unsubscribe a subscriber that had no stream"),!1)},this.getSubscribersForStream=function(At){return Tt.subscribers.where({streamId:At.id})},this.getPublisherForStream=function(At){let en,Jt;if(typeof At=="string")en=At;else if(typeof At=="object"&&At&&Object.hasOwnProperty.call(At,"id"))en=At.id;else throw Jt="Session.getPublisherForStream :: Invalid stream type",oi.error(Jt),new Error(Jt);return Tt.publishers.where({streamId:en})[0]},this._={getProxyUrl(){return ui},isE2ee(){return Xr.sessionInfo.e2ee&&mr&&!!Xr.capabilities.supportsE2ee},isSocketReconnecting(){return Ln},getSocket(){return ii},reconnecting:function(){Ln=!0,this.dispatchEvent(new Ke.SessionReconnectingEvent)}.bind(this),reconnected:function(){Ln=!1,this.dispatchEvent(new Ke.SessionReconnectedEvent),this.sessionInfo.reconnection&&(Tt.publishers.where({session:this}).forEach(At=>{At._.iceRestart()}),this.sessionInfo.p2pEnabled||Tt.subscribers.where({session:this}).forEach(At=>{At._.iceRestart("socket reconnected")}))}.bind(this),dispatchSignal:function(At,en,Jt){const Cn=new Ke.SignalEvent(en,Jt,At);Cn.target=this,this.trigger(S.SIGNAL,Cn),en&&this.dispatchEvent(Cn)}.bind(this),dispatchCaption:function(At,en){let Jt,Cn,On;try{const yr=JSON.parse(en.data);Jt=yr.caption.text,Cn=yr.streamId,On=yr.isFinal}catch(yr){oi.error(`Caption parsing failed: ${yr.message}`);return}const Pn=new Ke.CaptionReceivedEvent(Jt,Cn,On);Pn.target=this,this.trigger(S.SUBSCRIBER_CAPTION_RECEIVED,Pn),this.dispatchEvent(Pn)}.bind(this),subscriberChannelUpdate(At,en,Jt,Cn){return ii?ii.subscriberChannelUpdate(At.id,en.widgetId,Jt.id,Cn):(oi.warn("You are disconnected, cannot update subscriber properties ",Cn),null)},streamCreate(At,en){let Jt=At===void 0?{}:At,Cn=Jt.name,On=Jt.streamId,Pn=Jt.subscriberAudioFallbackEnabled,yr=Jt.channels,Cr=Jt.minBitrate,Kr=Jt.sourceStreamId,ko=Jt.e2ee,Si=Jt.publisherAudioFallbackEnabled;if(!ii){oi.warn("You are disconnected, cannot create stream ",On);return}ii.streamCreate({name:Cn,streamId:On,subscriberAudioFallbackEnabled:Pn,channels:yr,minBitrate:Cr,maxBitrate:void 0,sourceStreamId:Kr,e2ee:ko,publisherAudioFallbackEnabled:Si},en)},streamDestroy(At,en){if(!ii){oi.warn("You are disconnected, cannot destroy stream ",At);return}ii.streamDestroy(At,en)},streamChannelUpdate(At,en,Jt){if(!ii){oi.warn("You are disconnected, cannot update stream properties ",Jt);return}ii.streamChannelUpdate(At.id,en.id,Jt)},setSocket(At){ii=At},setLogging(At){oi=At},setState:Vn,setIceServers(At){At&&(ki={iceServers:me(At),timestamp:Date.now()})},getOtIceServerInfo(){const At=ki?Date.now()-ki.timestamp:1/0,Jt=24*60*60*1e3-At,Cn=5*60*1e3;if(Jt>Cn)return n.resolve({transportPolicy:Xr&&Xr.sessionInfo&&Xr.sessionInfo.clientCandidates,servers:ki&&ki.iceServers});if(!Ws)return n.resolve({transportPolicy:Xr&&Xr.sessionInfo&&Xr.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0});const On=It.clientVersion;return nn({anvilUrl:(this.staticConfig||It).apiUrl,sessionId:dr,token:Ws,connectionId:rr,clientVersion:On}).then(Pn=>(Xr._.setIceServers(Pn.iceServers),ki?{transportPolicy:Xr&&Xr.sessionInfo&&Xr.sessionInfo.clientCandidates,servers:ki&&ki.iceServers}:{transportPolicy:Xr.sessionInfo.clientCandidates,servers:[],needRumorIceServersFallback:!0}))},getCodecFlags:()=>({h264:Xr.sessionInfo.h264,vp9:Xr.sessionInfo.vp9,vp8:Xr.sessionInfo.vp8}),getVideoCodecsCompatible:At=>k({RTCPeerConnection:Pt.RTCPeerConnection,env:ut.env,stream:At,codecFlags:Xr._.getCodecFlags()}),getIceConfig:()=>{if(!Dt)return Xr._.getOtIceServerInfo();const At=(()=>Dt&&Dt.transportPolicy==="relay"?"relay":Xr.sessionInfo.clientCandidates)();return(Dt.includeServers==="custom"?n.resolve({servers:[]}):Xr._.getOtIceServerInfo()).then(Jt=>b(Jt,{transportPolicy:At,servers:[...Jt.servers,...Dt.customServers]}))},forceMute:function(At){this.dispatchEvent(new Ke.MuteForcedEvent(At))}.bind(this),enableMuteOnEntry:()=>{Ds=!0},addSubscriberToPeerConnectionsQueue:(At,en)=>{ea.push({pc:At,message:en}),Ji||(Ji=setInterval(()=>{const Jt=ea.shift();Jt?Jt.pc.processMessage("offer",Jt.message):(clearInterval(Ji),Ji=null)},100))},disableMuteOnEntry:()=>{Ds=!1},privateEvents:new l},this.signal=function(At,en){let Jt=At,Cn=en||function(){};if(v(Jt)&&(Cn=Jt,Jt=null),this.isNot("connected")){const Pn="Unable to send signal - you are not connected to the session.";En(Le(je.NOT_CONNECTED,new Error(Pn),500),Cn);return}function On(Pn){switch(Pn){case 400:case 413:return je.INVALID_PARAMETER;case 429:return je.RATE_LIMIT_EXCEEDED;case 404:return je.NOT_FOUND;case 500:return je.NOT_CONNECTED;case 403:return je.PERMISSION_DENIED;case 2001:return je.UNEXPECTED_SERVER_RESPONSE;default:return}}ii.signal(Jt,function(Pn){if(Pn){const ko=On(Pn.code);ko&&(Pn=Le(ko,new Error(Pn.message),Pn.code)),Cn(Pn);return}for(var yr=arguments.length,Cr=new Array(yr>1?yr-1:0),Kr=1;Kr<yr;Kr++)Cr[Kr-1]=arguments[Kr];Cn(Pn,...Cr)},this.logEvent),At&&At.data&&typeof At.data!="string"&&oi.warn("Signaling of anything other than Strings is deprecated. Please update the data property to be a string.")},this.forceDisconnect=function(At,en){if(this.isNot("connected")){const Pn="Cannot call forceDisconnect(). You are not connected to the session.";En(Le(je.NOT_CONNECTED,new Error(Pn),Ze.NOT_CONNECTED),en);return}const Jt=typeof At=="string"?At:At.id,Cn="Invalid Parameter. Check that you have passed valid parameter values into the method call.";if(!Jt){En(Le(je.INVALID_PARAMETER,new Error(Cn),Ze.INVALID_PARAMETER),en);return}const On="This token does not allow forceDisconnect. The role must be at least `moderator` to enable this functionality";if(!yn("forceDisconnect")){En(Le(je.PERMISSION_DENIED,new Error(On),Ze.UNABLE_TO_FORCE_DISCONNECT),en);return}ii.forceDisconnect(Jt,function(Pn){if(Pn)En(Le(je.INVALID_PARAMETER,new Error(Cn),Ze.INVALID_PARAMETER),en);else if(en&&v(en)){for(var yr=arguments.length,Cr=new Array(yr>1?yr-1:0),Kr=1;Kr<yr;Kr++)Cr[Kr-1]=arguments[Kr];en(Pn,...Cr)}})},this.forceUnpublish=function(At,en){en===void 0&&(en=()=>{});const Jt=ko=>En(Le(ko.name,new Error(ko.msg),ko.code),en),Cn={msg:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",code:Ze.INVALID_PARAMETER,name:je.INVALID_PARAMETER},On={msg:"Cannot call forceUnpublish(). You are not connected to the session.",code:Ze.NOT_CONNECTED,name:je.NOT_CONNECTED},Pn={msg:"This token does not allow forceUnpublish. The role must be at least `moderator` to enable this functionality",code:Ze.UNABLE_TO_FORCE_UNPUBLISH,name:je.PERMISSION_DENIED},yr={msg:"The stream does not exist.",name:je.NOT_FOUND},Cr={msg:"An unexpected error occurred.",name:je.UNEXPECTED_SERVER_RESPONSE,code:Ze.UNEXPECTED_SERVER_RESPONSE};if(!At){Jt(Cn);return}if(Bn.isNot("connected")){Jt(On);return}const Kr=Os(At);if(!yn("forceUnpublish")){Jt(Pn);return}ii.forceUnpublish(Kr.id,ko=>{if(!ko){en(null);return}ko.code==="404"?Jt(yr):ko.code==="403"?Jt(Pn):Jt(Cr)})},this.forceMuteStream=At=>new n((en,Jt)=>{const Cn=xr();if(Cn){Jt(Cn);return}if(!At||!At.id){Jt(Sn(bt.INVALID_PARAMETER));return}ii.forceMuteStream(At.id,On=>{On?Jt(li(On)):en()})}),this.forceMuteAll=At=>new n((en,Jt)=>{const Cn=xr();if(Cn){Jt(Cn);return}if(Array.isArray(At)&&!At.every(Pn=>Pn instanceof De)||At&&!Array.isArray(At)){Jt(Sn(bt.INVALID_PARAMETER));return}const On=(At||[]).map(Pn=>Pn.id);ii.forceMuteAll(On,!0,Pn=>{Pn?Jt(li(Pn)):en()})}),this.disableForceMute=()=>new n((At,en)=>{const Jt=xr();if(Jt){en(Jt);return}ii.forceMuteAll([],!1,Cn=>{Cn?en(li(Cn)):At()})}),this.setEncryptionSecret=function(){var At=(0,c.default)(a.default.mark(function en(Jt){return a.default.wrap(function(On){for(;;)switch(On.prev=On.next){case 0:if(Rr){On.next=3;break}return Ee.error("Encryption secret must first be set in initSession."),On.abrupt("return");case 3:On.prev=3,_(Jt),On.next=10;break;case 7:throw On.prev=7,On.t0=On.catch(3),Le(je.INVALID_ENCRYPTION_SECRET,new Error(`setEncryptionSecret: ${On.t0.message}`));case 10:return On.prev=10,On.next=13,Bn.keyStore.set(dr,Jt);case 13:On.next=18;break;case 15:On.prev=15,On.t1=On.catch(10),oi.error(`Error in setEncryptionSecret}: ${On.t1.message}`);case 18:case"end":return On.stop()}},en,null,[[3,7],[10,15]])}));return function(en){return At.apply(this,arguments)}}(),this.isConnected=()=>this.is("connected"),this.capabilities=new Te([],{hasE2eeCapability:gt})}}}).call(this,e(1))},function(t,r,e){const n=e(10),o=e(22),a=[400,403,409,n.CONNECTION_LIMIT_EXCEEDED],c={CONNECT:"ConnectToSession",SESSION_STATE:"GetSessionState"};t.exports=function(l){let f,g;if(l.reason===c.CONNECT&&l.code===n.CONNECT_FAILED)f=l.code,g=o.getTitleByCode(l.code);else if(l.code&&a.indexOf(Number(l.code))>-1)switch(f=n.CONNECT_FAILED,l.reason){case c.CONNECT:switch(l.code){case n.CONNECTION_LIMIT_EXCEEDED:f=l.code,g="Cannot connect -- the limit for concurrent connections to the session has been reached";break;default:g="Received error response to connection create message.";break}break;case c.SESSION_STATE:g="Received error response to session read";break;default:g="";break}else f=n.UNEXPECTED_SERVER_RESPONSE,g="Unexpected server response. Try this operation again later.";return{code:f,message:g}}},function(t,r,e){const n=e(3),o=e(52).once;t.exports=()=>o()&&(n.isChromiumEdge||["Chrome","Safari","Firefox","Opera"].includes(n.name))},function(t,r,e){t.exports=function(o){return JSON.stringify(o)}},function(t,r,e){r.__esModule=!0,r.default=void 0;var n=o=>{let a=o.logger,c=o.obj;o.eventNames.forEach(l=>{c.on(l,function(){for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];return a.spam("emitted",l,g)})})};r.default=n},function(t,r,e){const n=e(18),o=e(22),a=e(6),c=e(2)("Dispatcher"),u=e(172),l=e(734),f=function(){a(this),this.callbacks={}};t.exports=f,f.prototype.registerCallback=function(g,v){this.callbacks[g]=v},f.prototype.triggerCallback=function(g){if(!g)return;const v=this.callbacks[g];if(v&&n(v)){const b=Array.prototype.slice.call(arguments);b.shift(),v(...b)}delete this.callbacks[g]},f.prototype.onClose=function(g){this.emit("close",g)},f.prototype.onReconnected=function(){this.emit("reconnected")},f.prototype.onReconnecting=function(){this.emit("reconnecting")},f.prototype.dispatch=function(g){if(g.type===u.STATUS){var v;c.debug(g);let S;if(g.isError){let O;if(typeof g.data=="string")try{const A=JSON.parse(g.data);A&&typeof A=="object"&&(O=A.reason)}catch(A){c.warn("Failed to parse rumorMessage.data",A)}S=new o(g.status,O)}const C=g.data?JSON.parse(g.data):"";!(C==null||(v=C.mute)==null)&&v.active&&this.dispatchMuteOnEntry(),this.triggerCallback(g.transactionId,S,g);return}const b=l(g);switch(c.debug(`${b.signature}:`,b),b.resource){case"session":this.dispatchSession(b);break;case"connection":this.dispatchConnection(b);break;case"stream":this.dispatchStream(b);break;case"stream_channel":this.dispatchStreamChannel(b);break;case"subscriber":this.dispatchSubscriber(b);break;case"subscriber_channel":this.dispatchSubscriberChannel(b);break;case"signal":this.dispatchSignal(b);break;case"data":this.dispatchCaption(b);break;case"archive":this.dispatchArchive(b);break;case"source":this.dispatchSource(b);break;default:c.debug(`Type ${b.resource} is not currently implemented`)}},f.prototype.dispatchSession=function(g){switch(g.method){case"read":this.emit("session#read",g.content,g.transactionId);break;case"update":this.emit("session#update",g.content);break;default:c.debug(`${g.signature} is not currently implemented`)}},f.prototype.dispatchMuteOnEntry=function(){this.emit("session#muted")},f.prototype.dispatchConnection=function(g){switch(g.method){case"created":this.emit("connection#created",g.content);break;case"deleted":this.emit("connection#deleted",g.params.connection,g.reason);break;default:c.debug(`${g.signature} is not currently implemented`)}},f.prototype.dispatchStream=function(g){switch(g.method){case"created":this.emit("stream#created",g.content,g.transactionId);break;case"deleted":this.emit("stream#deleted",g.params.stream,g.reason,g.content);break;case"updated":this.emit("stream#updated",g.params.stream,g.content);break;case"update":this.emit("stream#update",g.params.stream,g.content);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(g.method,g);break;default:c.debug(`${g.signature} is not currently implemented`)}},f.prototype.dispatchStreamChannel=function(g){switch(g.method){case"updated":this.emit("streamChannel#updated",g.params.stream,g.params.channel,g.content);break;default:c.debug(`${g.signature} is not currently implemented`)}},f.prototype.dispatchJsep=function(g,v){this.emit(`jsep#${g}`,v.params.stream,v.fromAddress,v)},f.prototype.dispatchSubscriberChannel=function(g){switch(g.method){case"updated":this.emit("subscriberChannel#updated",g.params.stream,g.params.channel,g.content);break;case"update":this.emit("subscriberChannel#update",g.params.subscriber,g.params.stream,g.content);break;default:c.debug(`${g.signature} is not currently implemented`)}},f.prototype.dispatchSubscriber=function(g){switch(g.method){case"created":this.emit("subscriber#created",g.params.stream,g.fromAddress,g.content.id);break;case"deleted":this.dispatchJsep("unsubscribe",g),this.emit("subscriber#deleted",g.params.stream,g.fromAddress);break;case"generateoffer":case"answer":case"pranswer":case"offer":case"candidate":this.dispatchJsep(g.method,g);break;default:c.debug(`${g.signature} is not currently implemented`)}},f.prototype.dispatchSignal=function(g){if(g.method!=="signal"){c.debug(`${g.signature} is not currently implemented`);return}this.emit("signal",g.fromAddress,g.content)},f.prototype.dispatchCaption=function(g){this.emit("caption",g.fromAddress,g.content)},f.prototype.dispatchArchive=function(g){switch(g.method){case"created":this.emit("archive#created",g.content);break;case"updated":this.emit("archive#updated",g.params.archive,g.content);break}},f.prototype.dispatchSource=function(g){switch(g.method){case"create":this.emit("source#create",g.params.source,g.params.stream,g.reason);break;case"delete":this.emit("source#delete",g.params.source,g.params.stream,g.reason);break;default:c.debug(`${g.signature} is not currently implemented`)}}},function(t,r,e){const n=e(17),o=e(8),a=e(737),c=e(738),u=e(321),l=e(739),f=e(35)().onlyLocal(),g={};t.exports=g,g.connections={},g.connections.create=function(v){const b=v.apiKey,S=v.sessionId,C=v.connectionId,O=v.connectionEventsSuppressed,A=v.capabilities;return u({method:"create",uri:`/v2/partner/${b}/session/${S}/connection/${C}`,content:{userAgent:o.env.userAgent,clientVersion:f.clientVersion,capabilities:A||[],connectionEventsSuppressed:O}})},g.connections.destroy=function(v){const b=v.apiKey,S=v.sessionId,C=v.connectionId;return u({method:"delete",uri:`/v2/partner/${b}/session/${S}/connection/${C}`,content:{}})},g.sessions={},g.sessions.get=function(v,b){return u({method:"read",uri:`/v2/partner/${v}/session/${b}`,content:{}})},g.streams={},g.streams.get=function(v,b,S){return u({method:"read",uri:`/v2/partner/${v}/session/${b}/stream/${S}`,content:{}})},g.streams.channelFromOTChannel=function(v){const b={id:v.id,type:v.type,active:v.active};return v.type==="video"&&(b.width=v.width,b.height=v.height,b.orientation=v.orientation,b.frameRate=v.frameRate,v.source!=="default"&&(b.source=v.source),b.fitMode=v.fitMode),b},g.streams.create=function(v){v===void 0&&(v={});const b=v,S=b.apiKey,C=b.sessionId,O=b.streamId,A=b.name,w=b.audioFallbackEnabled,V=b.publisherAudioFallbackEnabled,k=b.subscriberAudioFallbackEnabled,M=b.channels,W=b.minBitrate,Y=b.maxBitrate,H=b.sourceStreamId,P=b.e2ee,j={id:O,name:A,audioFallbackEnabled:w,publisherAudioFallbackEnabled:V,subscriberAudioFallbackEnabled:k,channel:M.map(_=>g.streams.channelFromOTChannel(_)),e2ee:P};return W&&(j.minBitrate=Math.round(W)),Y&&(j.maxBitrate=Math.round(Y)),H&&(j.sourceStreamId=H),typeof P=="boolean"&&(j.e2ee=P),u({method:"create",uri:`/v2/partner/${S}/session/${C}/stream/${O}`,content:j})},g.streams.destroy=function(v,b,S,C){const O={};return C&&(O.sourceStreamId=C),u({method:"delete",uri:`/v2/partner/${v}/session/${b}/stream/${S}`,content:O})},g.streamChannels={},g.streamChannels.update=function(v,b,S,C,O){return u({method:"update",uri:`/v2/partner/${v}/session/${b}/stream/${S}/channel/${C}`,content:O})},g.subscribers={},g.subscribers.create=function(v){v===void 0&&(v={});const b=v,S=b.apiKey,C=b.sessionId,O=b.streamId,A=b.subscriberId,w=b.connectionId,V=b.channelsToSubscribeTo,k=b.sourceStreamId,M=b.e2ee,W={id:A,connection:w,keyManagementMethod:l,bundleSupport:a(),rtcpMuxSupport:c(),e2ee:M};return V&&(W.channel=V),k&&(W.sourceStreamId=k),u({method:"create",uri:`/v2/partner/${S}/session/${C}/stream/${O}/subscriber/${A}`,content:W})},g.subscribers.destroy=function(v,b,S,C){return u({method:"delete",uri:`/v2/partner/${v}/session/${b}/stream/${S}/subscriber/${C}`,content:{}})},g.subscribers.update=function(v,b,S,C,O){return u({method:"update",uri:`/v2/partner/${v}/session/${b}/stream/${S}/subscriber/${C}`,content:O})},g.subscriberChannels={},g.subscriberChannels.update=function(v,b,S,C,O,A){return u({method:"update",uri:`/v2/partner/${v}/session/${b}/stream/${S}/subscriber/${C}/channel/${O}`,content:A})},g.signals={},g.signals.create=function(v,b,S,C,O){const A={};return C!==void 0&&(A.type=C),O!==void 0&&(A.data=O),u({method:"signal",uri:`/v2/partner/${v}/session/${b}${S!==void 0?`/connection/${S}`:""}/signal/${n()}`,content:A})},g.forceMute={},g.forceMute.update=v=>{const b=v.apiKey,S=v.sessionId,C=v.streamId,O=v.active,A=v.excludedStreamIds,w={reason:"mute",channels:["audio"],active:O,locked:!1};return A&&(w.exclusion=A),u({method:"update",uri:`/v2/partner/${b}/session/${S}${C?`/stream/${C}`:""}`,content:w})}},function(t,r,e){const n=e(39),o=e(72),a=e(173),c=e(324),u=e(326),l=8192,f=128;t.exports=function(v,b,S){const C=function(M){return!/^[a-zA-Z0-9\-\._~]+$/.exec(M)},O=function(M){return M?M instanceof a||M._tag===u?null:{code:400,reason:"The To field was invalid"}:{code:400,reason:"The signal to field was invalid. Either set it to a OT.Connection, OT.Session, or omit it entirely"}},A=function(M){let W=null;return M==null?W={code:400,reason:"The signal type was null or undefined. Either set it to a String value or omit it"}:M.length>f?W={code:413,reason:`The signal type was too long, the maximum length of it is ${f} characters`}:C(M)&&(W={code:400,reason:"The signal type was invalid, it can only contain letters, numbers, '-', '_', and '~'."}),W},w=function(M){let W=null;if(M==null)W={code:400,reason:"The signal data was null or undefined. Either set it to a String value or omit it"};else try{JSON.stringify(M).length>l&&(W={code:413,reason:`The data field was too long, the maximum size of it is ${l} characters`})}catch{W={code:400,reason:"The data field was not valid JSON"}}return W},V=function(M){let W=null;return M===!0||M===!1||(W={code:400,reason:"The signal retryAfterReconnect was not true or false. Either set it to a Boolean value or omit it"}),W};this.toRaptorMessage=function(){let k=this.to;return k&&typeof k!="string"&&(k=k.id),c.signals.create(o.value,v,k,this.type,this.data)},this.toHash=function(){return S},this.error=null,this.retryAfterReconnect=!0,S&&(S.hasOwnProperty("data")&&(this.data=n(S.data),this.error=w(this.data)),S.hasOwnProperty("to")&&(this.to=S.to,this.error||(this.error=O(this.to))),S.hasOwnProperty("type")&&(this.error||(this.error=A(S.type)),this.type=S.type),S.hasOwnProperty("retryAfterReconnect")&&(this.error||(this.error=V(S.retryAfterReconnect)),this.retryAfterReconnect=S.retryAfterReconnect)),this.valid=this.error===null}},function(t,r,e){t.exports={}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));const c=e(328),u=e(50),l=e(173),f=e(742),g=e(323),v=e(2)("SessionDispatcher"),b=e(21),S=e(171),C=e(151),O=e(168);function A(H){return{id:H,creationTime:new Date().getTime(),data:{},capablities:{},permissions:[]}}function w(H,P){const j=H.channel.map(z=>new C(z)),_=H.connectionId?H.connectionId:H.connection.id;return new S(H.id,H.name,H.creationTime,P.connections.get(_),P,j)}function V(H,P){if(P.streams.has(H.id))return;const j=w(H,P);return P.streams.add(j),j}function k(H){return new c(H.id,H.name,H.status)}function M(H,P){if(P.archives.has(H.id))return;const j=k(H);return P.archives.add(j),j}const W=function(P){const j={};this.enqueue=function(){const z=arguments[0],ae=Array.prototype.slice.call(arguments,1);j[z]||(j[z]=new f(P)),j[z].enqueue.apply(j[z],ae)},this.triggerConnectionCreated=function(z){j[`connectionCreated${z.id}`]&&j[`connectionCreated${z.id}`].triggerAll()},this.triggerSessionConnected=function(z){j.sessionConnected&&j.sessionConnected.triggerAll(),z.forEach(function(ae){this.triggerConnectionCreated(ae)},this)}},Y={};t.exports=function(P,j){let _=j===void 0?{}:j,z=_.connectionEventsSuppressed;const ae=new g;let me=!1;const ye=new W(ae);ae.on("reconnecting",()=>{P._.reconnecting()}),ae.on("reconnected",()=>{P._.reconnected()}),ae.on("close",Ue=>{const _e=P.connection;if(_e){if(_e.destroyedReason()){v.debug(`Socket was closed but the connection had already been destroyed. Reason: ${_e.destroyedReason()}`);return}_e.destroy(Ue)}});const Pe=function(_e,je){return P.connections.has(_e.id)?P.connections.get(_e.id):(_e=l.fromHash(_e),(je||P.connection&&_e.id!==P.connection.id)&&(P.connections.add(_e),ye.triggerConnectionCreated(_e)),Object.keys(Y).forEach(Ke=>{const De=Y[Ke];if(De&&_e.id===De.connection.id){V(De,P),delete Y[De.id];const Ze={debug:je?"connection came in session#read":"connection came in connection#created",streamId:De.id,connectionId:_e.id};P.logEvent("streamCreated","warning",Ze)}}),_e)};ae.on("session#read",(Ue,_e)=>{let je;const Ke={};Ke.streams=[],Ke.connections=[],Ke.archives=[],Ue.connection.forEach(De=>{je=Pe(De,!0),Ke.connections.push(je)}),Ue.stream.forEach(De=>{Ke.streams.push(V(De,P))}),(Ue.archive||Ue.archives).forEach(De=>{Ke.archives.push(M(De,P))}),ae.triggerCallback(_e,null,Ke),me=!0,ye.triggerSessionConnected(P.connections)}),ae.on("session#update",Ue=>{if(Ue.reason!=="mute"){v.debug("session#update that handle this reason is not currently implemented");return}const _e=Ue.active===!0;P._.forceMute({active:_e}),_e?P._.enableMuteOnEntry():P._.disableMuteOnEntry()}),ae.on("session#muted",()=>{P._.enableMuteOnEntry(),P._.forceMute({active:!0})}),ae.on("connection#created",Ue=>{Pe(Ue)}),ae.on("connection#deleted",(Ue,_e)=>{if(Ue=P.connections.get(Ue),!Ue){v.warn("A connection was deleted that we do not know about");return}Ue.destroy(_e)}),ae.on("stream#created",(Ue,_e)=>{const je=Ue.id,Ke=Ue.sourceStreamId,De=Ue.connection;let Ze;if(z){if(De==null||De.id==null){P.logEvent("SessionDispatcher:stream#created","Event",{connection:De,info:"Stream did not contain a connection object. Event ignored"});return}Pe(De)}const tt=Ue.connectionId||De.id;if(P.connections.has(tt))Ze=V(Ue,P);else{Y[je]=Ue;const gt={debug:"eventOrderError -- streamCreated event before connectionCreated",streamId:je,sourceStreamId:O(Ke)};P.logEvent("streamCreated","warning",gt)}Ze?(Ze.publisher&&Ze.publisher.setStream(Ze),ae.triggerCallback(_e,null,Ze)):P.sessionInfo.isAdaptiveEnabled&&Ke==="P2P"&&b.subscribers.where({streamId:je}).forEach(gt=>{gt._.startRoutedToRelayedTransition()})}),ae.on("stream#deleted",(Ue,_e,je)=>{const Ke=P.streams.get(Ue),De=je.sourceStreamId,Ze=b.subscribers,gt=P.sessionInfo.isAdaptiveEnabled&&De==="P2P";!Ke&&!gt||(gt?Ze.where({streamId:Ue}).forEach(Ee=>{Ee._.startRelayedToRoutedTransition()}):Ke.destroy(_e))}),ae.on("stream#updated",(Ue,_e)=>{const je=P.streams.get(Ue);if(!je){v.error(`A stream does not exist with the id of ${Ue}, for stream#updated message!`);return}je._.update(_e)}),ae.on("stream#update",(Ue,_e)=>{const je=P.streams.get(Ue),Ke=_e.reason,De=_e.active;if(!je){v.error(`A stream does not exist with the id of ${Ue}, for stream#updated message!`);return}if(Ke!=="mute"){v.debug("stream#update that handle this reason is not currently implemented");return}De&&je._.forceMute(_e)}),ae.on("streamChannel#updated",(Ue,_e,je)=>{let Ke;if(!(Ue&&(Ke=P.streams.get(Ue)))){v.error("Unable to determine streamId, or the stream does not exist, for streamChannel message!");return}Ke._.updateChannel(_e,je)});const Te=(Ue,_e,je,Ke)=>{let De,Ze;const tt={streamId:_e},gt=b.subscribers,Ee=b.publishers;switch(Ke.params.subscriber?De={widgetId:Ke.params.subscriber}:De=tt,Ue){case"offer":Ze=[].concat(gt.where(De),Ee.where(tt)).slice(0,1);break;case"answer":case"pranswer":Ze=[].concat(Ee.where(tt),gt.where(De)).slice(0,1);break;case"generateoffer":case"unsubscribe":Ze=Ee.where(tt);break;case"candidate":Ze=[].concat(gt.where(De),Ee.where(tt));break;default:v.debug(`jsep#${Ue} is not currently implemented`);return}if(Ze.length===0)return;let Le=P.connections.get(je);!Le&&je.match(/^symphony\./)&&(Le=l.fromHash({id:je,creationTime:Math.floor(u())}),P.connections.add(Le)),Ze.forEach(function(){var We=(0,a.default)(o.default.mark(function ut(bt){return o.default.wrap(function(It){for(;;)switch(It.prev=It.next){case 0:return It.prev=0,It.next=3,bt.processMessage(Ue,je,Ke);case 3:It.next=8;break;case 5:It.prev=5,It.t0=It.catch(0),v.error("Error occurred during processMessage",It.t0);case 8:case"end":return It.stop()}},ut,null,[[0,5]])}));return function(ut){return We.apply(this,arguments)}}())};return ae.on("jsep#offer",Te.bind(null,"offer")),ae.on("jsep#answer",Te.bind(null,"answer")),ae.on("jsep#pranswer",Te.bind(null,"pranswer")),ae.on("jsep#generateoffer",Te.bind(null,"generateoffer")),ae.on("jsep#unsubscribe",Te.bind(null,"unsubscribe")),ae.on("jsep#candidate",Te.bind(null,"candidate")),ae.on("subscriberChannel#updated",(Ue,_e,je)=>{if(!Ue||!P.streams.has(Ue)){v.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#updated message!");return}P.streams.get(Ue)._.updateChannel(_e,je)}),ae.on("subscriberChannel#update",(Ue,_e,je)=>{if(!_e||!P.streams.has(_e)){v.error("Unable to determine streamId, or the stream does not exist, for subscriberChannel#update message!");return}if(!b.subscribers.has(Ue)){v.error("Unable to determine subscriberId, or the subscriber does not exist, for subscriberChannel#update message!");return}b.subscribers.get(Ue).disableVideo(je.active)}),ae.on("signal",(Ue,_e)=>{if(z){let Ze=_e.connection||_e.fromConnection;(Ze==null||Ze.id==null)&&(Ze=A(Ue),P.logEvent("SessionDispatcher:Signal","Event",{fromAddress:Ue,connection:_e.connection,fromConnection:_e.fromConnection,info:"Signal did not contain a connection object. One has been constructed",constructedConnection:Ze})),Pe(Ze)}const je=_e.type,Ke=_e.data,De=P.connections.get(Ue);P.connection&&Ue===P.connection.connectionId?me?P._.dispatchSignal(De,je,Ke):ye.enqueue("sessionConnected","signal",Ue,je,Ke):P.connections.get(Ue)?P._.dispatchSignal(De,je,Ke):Ue===""?P._.dispatchSignal(null,je,Ke):ye.enqueue(`connectionCreated${Ue}`,"signal",Ue,je,Ke)}),ae.on("caption",(Ue,_e)=>{P._.dispatchCaption(Ue,_e)}),ae.on("archive#created",Ue=>{M(Ue,P)}),ae.on("archive#updated",(Ue,_e)=>{const je=P.archives.get(Ue);if(!je){v.error(`An archive does not exist with the id of ${Ue}, for archive#updated message!`);return}je._.update(_e)}),ae.on("source#create",(Ue,_e,je)=>{const Ke=O(Ue);P.logEvent("SessionDispatcher:source#create","Event",{sourceStreamId:Ke,streamId:_e,reason:je}),v.debug(`Received a request from RUMOR to start a transition to ${Ue} for the stream ID ${_e} with the reason: ${je}`),b.publishers.where({streamId:_e}).forEach(De=>{De._.startRoutedToRelayedTransition()})}),ae.on("source#delete",(Ue,_e,je)=>{P.logEvent("SessionDispatcher:source#delete","Event",{sourceStreamId:O(Ue),streamId:_e,reason:je}),v.debug(`Received a request from RUMOR to start a transition from P2P to MANTIS for the stream ID ${_e} with the reason: ${je}`),b.publishers.where({streamId:_e}).forEach(Ke=>{Ke._.startRelayedToRoutedTransition()})}),ae}},function(t,r,e){const n=e(23)(),o=e(6);t.exports=function(c,u,l){this.id=c,this.name=u,this.status=l,this._={},o(this),this._.update=f=>{Object.keys(f).forEach(g=>{const v=this[g];this[g]=f[g];const b=new n.ArchiveUpdatedEvent(this,g,v,this[g]);this.dispatchEvent(b)})},this.destroy=()=>{}}},function(t,r,e){const n=e(24)(),o=n.getAudioOutputMediaDevices;t.exports=()=>o()},function(t,r,e){const n=e(24)(),o=n.getActiveAudioOutputDevice;t.exports=()=>o()},function(t,r,e){(function(n){var o=e(0),a=o(e(4)),c=o(e(5));const u=e(21),l=e(108),f=l.setCurrentAudioOutputDeviceId,g=e(330),v=e(24)(),b=v.getDefaultAudioOutputDeviceId,S=v.getAudioOutputMediaDevices,C=e(296),O=e(26),A=new O,w=(Y,H)=>{A.logEvent({action:"updateSubscribersSinkId",variation:Y,payload:H})},V=Y=>{const H=u.subscribers.map(P=>P._.setSinkId(Y));return n.all(H)},k=function(){var Y=(0,c.default)(a.default.mark(function H(P){return a.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,C();case 2:return _.prev=2,w("Attempt",{deviceId:P}),_.next=6,V(P);case 6:w("Success",{deviceId:P}),_.next=13;break;case 9:throw _.prev=9,_.t0=_.catch(2),w("Failure",{deviceId:P,error:_.t0==null?void 0:_.t0.message}),_.t0;case 13:case"end":return _.stop()}},H,null,[[2,9]])}));return function(P){return Y.apply(this,arguments)}}(),M=function(){var Y=(0,c.default)(a.default.mark(function H(){var P,j;return a.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,S();case 2:return P=z.sent,j=b(P),z.prev=4,z.next=7,k(j);case 7:f(j),z.next=12;break;case 10:z.prev=10,z.t0=z.catch(4);case 12:case"end":return z.stop()}},H,null,[[4,10]])}));return function(){return Y.apply(this,arguments)}}(),W=function(){var Y=(0,c.default)(a.default.mark(function H(){var P;return a.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,g();case 2:return P=_.sent,_.prev=3,_.next=6,k(P.deviceId);case 6:_.next=12;break;case 8:return _.prev=8,_.t0=_.catch(3),_.next=12,M();case 12:case"end":return _.stop()}},H,null,[[3,8]])}));return function(){return Y.apply(this,arguments)}}();t.exports=function(){var Y=(0,c.default)(a.default.mark(function H(P){return a.default.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.prev=0,w("Attempt",{deviceId:P}),_.next=4,V(P);case 4:w("Success",{deviceId:P}),f(P),_.next=14;break;case 8:return _.prev=8,_.t0=_.catch(0),w("Failure",{deviceId:P,error:_.t0==null?void 0:_.t0.message}),_.next=13,W();case 13:throw _.t0;case 14:case"end":return _.stop()}},H,null,[[0,8]])}));return function(H){return Y.apply(this,arguments)}}()}).call(this,e(1))},function(t,r,e){e(333);const n=e(39),o=e(27),a=e(6),c=e(130),u=e(35)(),l=e(26),f=e(249),g=e(559),v=e(560),b=u.onlyLocal(),S={};S.noConflict=e(561)(),(typeof window!==void 0?window:commonjsGlobal).OT=S,t.exports=S,(()=>{let Rr=S;Object.defineProperty(typeof window!==void 0?window:commonjsGlobal,"TB",{get:()=>(Rr===S&&console.warn("window.TB is deprecated, and will be removed in the future. Please access via window.OT"),Rr),set:Vr=>{Rr=Vr},configurable:!0})})();const C=e(144)(typeof window!==void 0?window:commonjsGlobal),O=e(8),A=e(72),w=e(145),V=e(252),k=e(146),M=e(147),W=e(253),Y=e(148),H=e(7),P=e(10),j=e(254),_=e(241),z=e(2)("OT"),ae=e(123),me=e(588),ye=e(22),Pe=e(103),Te=Pe.parseIceServers,Ue=e(267),_e=e(21),je=e(151),Ke=e(153),De=e(154),Ze=e(73)({global:C}),tt=e(13)({}),gt=e(159)(),Ee=e(281)({otError:tt}),Le=e(282)(),We=e(288)({global:C}),ut=e(24)({getNativeEnumerateDevices:We}),bt=e(23)(),mt=e(161)(),It=e(643)({otError:tt,global:C}),Ge=e(162)({chromeExtensionHelper:Ee,otError:tt}),Qe=e(648)({deviceHelpers:ut,generateConstraintInfo:j,getUserMediaHelper:It,global:C,OTHelpers:O,screenSharing:Ge}),Et=e(651)({otError:tt,processPubOptions:Qe}),Tt=e(163)({otError:tt}),Zt=e(75),$t=e(293)(),pt=e(294)({otError:tt}),ft=e(295)({global:C,videoElementErrorMap:pt}),et=e(164)({global:C}),it=e(297)({PeerConnection:Ze,setCertificates:et}),Pt=e(300)({PeerConnection:Ze,setCertificates:et}),nn=e(302)(),Ut=e(663)({otError:tt}),xt=e(110)({NativeVideoElementWrapper:ft}),Wt=e(152)(),tn=e(165)({VideoElementFacade:xt}),mn=e(305)({interpretPeerConnectionError:Tt,otError:tt,SubscriberPeerConnection:Pt,WidgetView:tn}),Dn=e(169)({APIKEY:A,createChromeMixin:Le,deviceHelpers:ut,EnvironmentLoader:Y,Errors:H,Events:bt,ExceptionCodes:P,calculateCapableSimulcastStreams:V,global:C,interpretPeerConnectionError:Tt,IntervalRunner:Zt,Microphone:$t,otError:tt,OTErrorClass:ye,OTHelpers:O,parseIceServers:Te,processPubOptions:Qe,PUBLISH_MAX_DELAY:Ue,PublisherPeerConnection:it,PublishingState:nn,StreamChannel:je,systemRequirements:De,VideoOrientation:Wt,WidgetView:tn}),er=e(317)({otError:tt,Publisher:Dn}),Zn=e(318)({global:C,initPublisher:er,otError:tt,Publisher:Dn,Subscriber:mn}),dr=e(752)({Session:Zn});a(S);const pr=e(753),Bn=e(756),Jn=e(757);f(S,"$",{name:"OT.$",getMessage:"Please use an external library like jQuery to select elements from the page.",value:O}),S.APIKEY=A.value,S.AnalyserAudioLevelSampler=M,S.Archive=e(328),S.ArchiveEvent=bt.ArchiveEvent,S.ArchiveUpdatedEvent=bt.ArchiveUpdatedEvent,S.AudioLevelTransformer=w,S.AudioLevelUpdatedEvent=bt.AudioLevelUpdatedEvent,S.Capabilities=e(170),S.Chrome=k,S.Connection=e(173),S.ConnectionCapabilities=S.Connection.Capabilities,S.ConnectionEvent=bt.ConnectionEvent,Object.keys(ae).forEach(Rr=>{S[Rr.toUpperCase()]=ae[Rr].priority}),S.NONE=0,S.debug=z.debug,S.error=z.error,S.info=z.info,S.log=z.log,S.warn=z.warn,S.DestroyedEvent=bt.DestroyedEvent,S.EnvLoadedEvent=bt.EnvLoadedEvent,S.Error=ye,S.Error.on(o.EXCEPTION,Rr=>{if(Rr.target===S.Error){const Vr=n(Rr);Vr.target=S,S.dispatchEvent(Vr)}else S.dispatchEvent(Rr)}),S.Event=c,S.ExceptionCodes=P,S.ExceptionEvent=bt.ExceptionEvent,S.getDevices=e(758),S.getAudioOutputDevices=e(329),S.getActiveAudioOutputDevice=e(330),S.setAudioOutputDevice=e(759)(),S.GetAudioLevelSampler=W,S.HAS_REQUIREMENTS=1,S.IntervalRunner=Zt,S.IssueReportedEvent=bt.IssueReportedEvent,S.MediaStoppedEvent=bt.MediaStoppedEvent,S.Microphone=$t,S.NOT_HAS_REQUIREMENTS=0,S.PeerConnection=Ze,S.PeerConnection.QOS=e(279).default,S.Publisher=Dn,S.PublisherPeerConnection=it,S.PublishingState=nn,S.MuteForcedEvent=bt.MuteForcedEvent,S.Session=Zn,S.SessionConnectEvent=bt.SessionConnectEvent,S.SessionDisconnectEvent=bt.SessionDisconnectEvent,S.SessionDispatcher=e(327),S.Signal=e(325),S.SignalEvent=bt.SignalEvent,S.Stream=e(171),S.StreamChannel=je,S.StreamEvent=bt.StreamEvent,S.StreamPropertyChangedEvent=bt.StreamPropertyChangedEvent,S.StreamUpdatedEvent=bt.StreamUpdatedEvent,S.StylableComponent=Ke,S.Subscriber=mn,S.SubscriberPeerConnection=Pt,S.SubscribingState=e(308),S.VideoDimensionsChangedEvent=bt.VideoDimensionsChangedEvent,S.VideoDisableWarningEvent=bt.VideoDisableWarningEvent,S.VideoElement=xt,S.VideoEnabledChangedEvent=bt.VideoEnabledChangedEvent,S.VideoOrientation=Wt,S.WidgetView=tn,S.getSupportedCodecs=pr,S.hasMediaProcessorSupport=Bn,S.hasEndToEndEncryptionSupport=Jn,S._={AnalyticsHelper:l,getClientGuid:_.get,StaticConfig:u},Object.defineProperty(S,"version",{value:b.version});const Dt={},Ii=Rr=>v.includes(Rr);f(Dt,"version",{value:b.version,name:"OT.properties.version",getWarning:"Please use OT.version instead",warnOnSet:!0,setWarning:"Mutating version has no effect"}),g.forEach(Rr=>{let Vr,ui;if(Array.isArray(Rr)){const Os=Rr[0],ii=Rr[1];ui=Os,Vr=b[ii]||ii}else Vr=b[Rr],ui=Rr;const Vi=Ii(ui);f(Dt,ui,{value:Vr,name:`OT.properties.${ui}`,warnOnSet:!0,canSet:Vi,setWarning:Vi?`Mutating ${ui} can cause side effects`:`Mutating ${ui} has no effect`})}),S.properties=Dt,S.audioContext=gt,S.checkScreenSharingCapability=Ge.checkCapability,S.checkSystemRequirements=De.check,S.components={},S.generateSimpleStateMachine=mt,S.getErrorTitleByCode=ye.getTitleByCode,S.getLogs=z.getLogs,S.getStatsAdpater=e(275),S.getStatsHelpers=e(76),S.getUserMedia=Et,S.handleJsException=ye.handleJsException,S.initPublisher=er,S.setProxyUrl=e(102).setProxyUrl,S.initSession=function(Rr,Vr,ui){return Vr==null&&(Vr=Rr,Rr=null),A.value.length===0&&Rr&&(A.value=Rr,S.APIKEY=Rr),dr(Rr,Vr,ui)};const ti=Rr=>`${Rr} is deprecated and will be removed in a future version of OpenTok`,ci=(Rr,Vr)=>()=>(console.warn(ti(Rr)),Vr);Object.defineProperties(S,{isUnloaded:{get:ci("OT.isUnloaded",Y.isUnloaded)},onLoad:{get:ci("OT.onLoad",Y.onLoad)},onUnload:{get:ci("OT.onUnload",Y.onUnload)},overrideGuidStorage:{get:ci("OT.overrideGuidStorage",_.override)}}),S.pickScreenSharingHelper=Ge.pickHelper,S.publishers=_e.publishers,S.registerScreenSharingExtension=Ge.registerExtension,S.registerScreenSharingExtensionHelper=Ge.registerExtensionHelper,S.reportIssue=Ut,S.sessions=_e.sessions,S.setLogLevel=me,S.shouldLog=z.shouldLog,S.subscribers=_e.subscribers,S.unblockAudio=e(167),S.upgradeSystemRequirements=De.upgrade,Y.onUnload(()=>{_e.publishers.destroy(),_e.subscribers.destroy(),_e.sessions.destroy("unloaded")}),e(760)()},function(t,r,e){var n=e(334);typeof n=="string"&&(n=[[t.i,n,""]]);var o,a={hmr:!0};a.transform=o,a.insertInto=void 0,e(348)(n,a),n.locals&&(t.exports=n.locals)},function(t,r,e){r=t.exports=e(335)(!1);var n=e(336),o=n(e(337)),a=n(e(338)),c=n(e(339)),u=n(e(340)),l=n(e(341)),f=n(e(342)),g=n(e(343)),v=n(e(344)),b=n(e(345)),S=n(e(346)),C=n(e(347));r.push([t.i,`/*!
 * Copyright (c) 2017 TokBox, Inc.
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 */

/**
 * OT Base styles
 */

/* Root OT object, this is where our CSS reset happens */
.OT_root,
.OT_root * {
  color: #ffffff;
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font-family: Arial, Helvetica, sans-serif;
  vertical-align: baseline;
}

/**
 * Specific Element Reset
 */

.OT_root h1,
.OT_root h2,
.OT_root h3,
.OT_root h4,
.OT_root h5,
.OT_root h6 {
  color: #ffffff;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 100%;
  font-weight: bold;
}

.OT_root header {

}

.OT_root footer {

}

.OT_root div {

}

.OT_root section {

}

.OT_root video {

}

.OT_root button {

}

.OT_root strong {
  font-weight: bold;
}

.OT_root em {
  font-style: italic;
}

.OT_root a,
.OT_root a:link,
.OT_root a:visited,
.OT_root a:hover,
.OT_root a:active {
  font-family: Arial, Helvetica, sans-serif;
}

.OT_root ul, .OT_root ol {
  margin: 1em 1em 1em 2em;
}

.OT_root ol {
  list-style: decimal outside;
}

.OT_root ul {
  list-style: disc outside;
}

.OT_root dl {
  margin: 4px;
}

.OT_root dl dt,
.OT_root dl dd {
  float: left;
  margin: 0;
  padding: 0;
}

.OT_root dl dt {
  clear: left;
  text-align: right;
  width: 50px;
}

.OT_root dl dd {
  margin-left: 10px;
}

.OT_root img {
  border: 0 none;
}

/* Modal dialog styles */

/* Modal dialog styles */

.OT_dialog-centering {
  display: table;
  width: 100%;
  height: 100%;
}

.OT_dialog-centering-child {
  display: table-cell;
  vertical-align: middle;
}

.OT_dialog {
  position: relative;

  box-sizing: border-box;
  max-width: 576px;
  margin-right: auto;
  margin-left: auto;
  padding: 36px;
  text-align: center; /* centers all the inline content */

  background-color: #363636;
  color: #fff;
  box-shadow: 2px 4px 6px #999;
  font-family: 'Didact Gothic', sans-serif;
  font-size: 13px;
  line-height: 1.4;
}

.OT_dialog * {
  font-family: inherit;
  box-sizing: inherit;
}

.OT_closeButton {
  color: #999999;
  cursor: pointer;
  font-size: 32px;
  line-height: 36px;
  position: absolute;
  right: 18px;
  top: 0;
}

.OT_dialog-messages {
  text-align: center;
}

.OT_dialog-messages-main {
  margin-bottom: 36px;
  line-height: 36px;

  font-weight: 300;
  font-size: 24px;
}

.OT_dialog-messages-minor {
  margin-bottom: 18px;

  font-size: 13px;
  line-height: 18px;
  color: #A4A4A4;
}

.OT_dialog-messages-minor strong {
  color: #ffffff;
}

.OT_dialog-actions-card {
  display: inline-block;
}

.OT_dialog-button-title {
  margin-bottom: 18px;
  line-height: 18px;

  font-weight: 300;
  text-align: center;
  font-size: 14px;
  color: #999999;
}
.OT_dialog-button-title label {
  color: #999999;
}

.OT_dialog-button-title a,
.OT_dialog-button-title a:link,
.OT_dialog-button-title a:active {
  color: #02A1DE;
}

.OT_dialog-button-title strong {
  color: #ffffff;
  font-weight: 100;
  display: block;
}

.OT_dialog-button {
  display: inline-block;

  margin-bottom: 18px;
  padding: 0 1em;

  background-color: #1CA3DC;
  text-align: center;
  cursor: pointer;
}

.OT_dialog-button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.OT_dialog-button-large {
  line-height: 36px;
  padding-top: 9px;
  padding-bottom: 9px;

  font-weight: 100;
  font-size: 24px;
}

.OT_dialog-button-small {
  line-height: 18px;
  padding-top: 9px;
  padding-bottom: 9px;

  background-color: #444444;
  color: #999999;
  font-size: 16px;
}

.OT_dialog-progress-bar {
  display: inline-block; /* prevents margin collapse */
  width: 100%;
  margin-top: 5px;
  margin-bottom: 41px;

  border: 1px solid #4E4E4E;
  height: 8px;
}

.OT_dialog-progress-bar-fill {
  height: 100%;

  background-color: #29A4DA;
}

/* Helpers */

.OT_centered {
  position: fixed;
  left: 50%;
  top: 50%;
  margin: 0;
}

.OT_dialog-hidden {
  display: none;
}

.OT_dialog-button-block {
  display: block;
}

.OT_dialog-no-natural-margin {
  margin-bottom: 0;
}

/* Publisher and Subscriber styles */

.OT_publisher, .OT_subscriber {
  position: relative;
  min-width: 48px;
  min-height: 48px;
}

.OT_publisher .OT_video-element,
.OT_subscriber .OT_video-element {
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;

  transform-origin: 0 0;
}

/* Styles that are applied when the video element should be mirrored */
.OT_publisher.OT_mirrored .OT_video-element {
  transform: scale(-1, 1);
  transform-origin: 50% 50%;
}

.OT_subscriber_error {
  background-color: #000;
  color: #fff;
  text-align: center;
}

.OT_subscriber_error > p {
  padding: 20px;
}

/* The publisher/subscriber name/mute background */
.OT_publisher .OT_bar,
.OT_subscriber .OT_bar,
.OT_publisher .OT_name,
.OT_subscriber .OT_name,
.OT_publisher .OT_archiving,
.OT_subscriber .OT_archiving,
.OT_publisher .OT_archiving-status,
.OT_subscriber .OT_archiving-status,
.OT_publisher .OT_archiving-light-box,
.OT_subscriber .OT_archiving-light-box {
  -ms-box-sizing: border-box;
  box-sizing: border-box;
  top: 0;
  left: 0;
  right: 0;
  display: block;
  height: 34px;
  position: absolute;
}

.OT_publisher .OT_bar,
.OT_subscriber .OT_bar {
  background: rgba(0, 0, 0, 0.4);
}

.OT_publisher .OT_edge-bar-item,
.OT_subscriber .OT_edge-bar-item {
  z-index: 1; /* required to get audio level meter underneath */
}

/* The publisher/subscriber name panel/archiving status bar */
.OT_publisher .OT_name,
.OT_subscriber .OT_name {
  background-color: transparent;
  color: #ffffff;
  font-size: 15px;
  line-height: 34px;
  font-weight: normal;
  padding: 0 4px 0 36px;
  letter-spacing: normal;
}

.OT_publisher .OT_archiving-status,
.OT_subscriber .OT_archiving-status {
  background: rgba(0, 0, 0, 0.4);
  top: auto;
  bottom: 0;
  left: 34px;
  padding: 0 4px;
  color: rgba(255, 255, 255, 0.8);
  font-size: 15px;
  line-height: 34px;
  font-weight: normal;
  letter-spacing: normal;
}

.OT_micro .OT_archiving-status,
.OT_micro:hover .OT_archiving-status,
.OT_mini .OT_archiving-status,
.OT_mini:hover .OT_archiving-status {
  display: none;
}

.OT_publisher .OT_archiving-light-box,
.OT_subscriber .OT_archiving-light-box {
  background: rgba(0, 0, 0, 0.4);
  top: auto;
  bottom: 0;
  right: auto;
  width: 34px;
  height: 34px;
}

.OT_archiving-light {
  width: 7px;
  height: 7px;
  border-radius: 30px;
  position: absolute;
  top: 14px;
  left: 14px;
  background-color: #575757;
  box-shadow: 0 0 5px 1px #575757;
}

.OT_archiving-light.OT_active {
  background-color: #970d13;
  -webkit-animation: OT_pulse 1.3s ease-in;
  -moz-animation: OT_pulse 1.3s ease-in;
  -webkit-animation: OT_pulse 1.3s ease-in;
  -webkit-animation-iteration-count: infinite;
  -moz-animation-iteration-count: infinite;
  -webkit-animation-iteration-count: infinite;
}

.OT_mini .OT_bar,
.OT_bar.OT_mode-mini,
.OT_bar.OT_mode-mini-auto {
  bottom: 0;
  height: auto;
}

.OT_mini .OT_name.OT_mode-off,
.OT_mini .OT_name.OT_mode-on,
.OT_mini .OT_name.OT_mode-auto,
.OT_mini:hover .OT_name.OT_mode-auto {
  display: none;
}

.OT_publisher .OT_name,
.OT_subscriber .OT_name {
    left: 10px;
    right: 37px;
    height: 34px;
    padding-left: 0;
}

.OT_publisher .OT_mute,
.OT_subscriber .OT_mute {
    border: none;
    cursor: pointer;
    display: block;
    position: absolute;
    text-align: center;
    text-indent: -9999em;
    background-color: transparent;
    background-repeat: no-repeat;
}

.OT_publisher .OT_mute,
.OT_subscriber .OT_mute {
  right: 0;
  top: 0;
  border-left: 1px solid rgba(255, 255, 255, 0.2);
  height: 36px;
  width: 37px;
}

.OT_mini .OT_mute,
.OT_publisher.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold,
.OT_subscriber.OT_mini .OT_mute.OT_mode-auto.OT_mode-on-hold {
  top: 50%;
  left: 50%;
  right: auto;
  margin-top: -18px;
  margin-left: -18.5px;
  border-left: none;
}

.OT_publisher .OT_mute {
  background-image: url(`+o+`);
  background-position: 9px 5px;
}

.OT_publisher .OT_mute.OT_active {
  background-image: url(`+a+`);
  background-position: 9px 4px;
}

.OT_subscriber .OT_mute {
  background-image: url(`+c+`);
  background-position: 8px 7px;
}

.OT_subscriber .OT_mute.OT_active {
  background-image: url(`+u+`);
  background-position: 7px 7px;
}

/**
 * Styles for display modes
 *
 * Note: It's important that these completely control the display and opacity
 * attributes, no other selectors should atempt to change them.
 */

/* Default display mode transitions for various chrome elements */
.OT_publisher .OT_edge-bar-item,
.OT_subscriber .OT_edge-bar-item {
  transition-property: top, bottom, opacity;
  transition-duration: 0.5s;
  transition-timing-function: ease-in;
}

.OT_publisher .OT_edge-bar-item.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_mode-off,
.OT_publisher .OT_edge-bar-item.OT_mode-auto,
.OT_subscriber .OT_edge-bar-item.OT_mode-auto,
.OT_publisher .OT_edge-bar-item.OT_mode-mini-auto,
.OT_subscriber .OT_edge-bar-item.OT_mode-mini-auto {
  top: -25px;
  opacity: 0;
}

.OT_publisher .OT_edge-bar-item.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_mode-off {
  display: none;
}

.OT_mini .OT_mute.OT_mode-auto,
.OT_publisher .OT_mute.OT_mode-mini-auto,
.OT_subscriber .OT_mute.OT_mode-mini-auto {
  top: 50%;
}

.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-off,
.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-mini-auto {
  top: auto;
  bottom: -25px;
}

.OT_publisher .OT_edge-bar-item.OT_mode-on,
.OT_subscriber .OT_edge-bar-item.OT_mode-on,
.OT_publisher .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,
.OT_subscriber .OT_edge-bar-item.OT_mode-auto.OT_mode-on-hold,
.OT_publisher:hover .OT_edge-bar-item.OT_mode-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_mode-auto,
.OT_publisher:hover .OT_edge-bar-item.OT_mode-mini-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_mode-mini-auto {
  top: 0;
  opacity: 1;
}

.OT_mini .OT_mute.OT_mode-on,
.OT_mini:hover .OT_mute.OT_mode-auto,
.OT_mute.OT_mode-mini,
.OT_root:hover .OT_mute.OT_mode-mini-auto {
  top: 50%;
}

.OT_publisher .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,
.OT_subscriber .OT_edge-bar-item.OT_edge-bottom.OT_mode-on,
.OT_publisher:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto,
.OT_subscriber:hover .OT_edge-bar-item.OT_edge-bottom.OT_mode-auto {
  top: auto;
  bottom: 0;
  opacity: 1;
}


/* Contains the video element, used to fix video letter-boxing */
.OT_widget-container {
  position: absolute;
  background-color: #000000;
  overflow: hidden;
}

.OT_hidden-audio {
  position: absolute !important;
  height: 1px !important;
  width: 1px !important;
}

/* Load animation */
.OT_root .OT_video-loading {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: none;

  background-color: rgba(0, 0, 0, .75);
}

.OT_root .OT_video-loading .OT_video-loading-spinner {
  background: url(`+l+`) no-repeat;
  position: absolute;
  width: 32px;
  height: 32px;
  left: 50%;
  top: 50%;
  margin-left: -16px;
  margin-top: -16px;
  animation: OT_spin 2s linear infinite;
}
@keyframes OT_spin {
  100% {
    transform: rotate(360deg);
  }
}

.OT_publisher.OT_loading .OT_video-loading,
.OT_subscriber.OT_loading .OT_video-loading {
  display: block;
}

.OT_publisher.OT_loading .OT_video-element,
.OT_subscriber.OT_loading .OT_video-element {
  /*display: none;*/
}

.OT_video-centering {
  display: table;
  width: 100%;
  height: 100%;
}

.OT_video-container {
  display: table-cell;
  vertical-align: middle;
}

.OT_video-poster {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
  display: none;

  opacity: .25;

  background-repeat: no-repeat;
  background-image: url(`+f+`);
  background-size: auto 76%;
}

.OT_fit-mode-cover .OT_video-element {
  -o-object-fit: cover;
     object-fit: cover;
}

/* Workaround for iOS freezing issue when cropping videos */
/* https://bugs.webkit.org/show_bug.cgi?id=176439 */
@media only screen
  and (orientation: portrait) {
  .OT_subscriber.OT_ForceContain.OT_fit-mode-cover .OT_video-element {
    -o-object-fit: contain !important;
       object-fit: contain !important;
  }
}

.OT_fit-mode-contain .OT_video-element {
  -o-object-fit: contain;
     object-fit: contain;
}

.OT_fit-mode-cover .OT_video-poster {
  background-position: center bottom;
}

.OT_fit-mode-contain .OT_video-poster {
  background-position: center;
}

.OT_audio-level-meter {
  position: absolute;
  width: 25%;
  max-width: 224px;
  min-width: 21px;
  top: 0;
  right: 0;
  overflow: hidden;
}

.OT_audio-level-meter:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_audio-level-meter__audio-only-img {
  position: absolute;
  top: 22%;
  right: 15%;
  width: 40%;

  opacity: .7;

  background: url(`+g+`) no-repeat center;
}

.OT_audio-level-meter__audio-only-img:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_audio-level-meter__value {
  will-change: transform;
  position: absolute;
  top: -100%;
  right: -100%;
  width: 200%;
  height: 200%;
  transform: scale(0);
  border-radius: 50%;
  background-image: radial-gradient(circle, rgba(151, 206, 0, 1) 0%, rgba(151, 206, 0, 0) 100%);
}

.OT_audio-level-meter.OT_mode-off {
    display: none;
}

.OT_audio-level-meter.OT_mode-on,
.OT_audio-only .OT_audio-level-meter.OT_mode-auto {
  display: block;
}

.OT_audio-only.OT_publisher .OT_video-element,
.OT_audio-only.OT_subscriber .OT_video-element {
  display: none;
}


.OT_video-disabled-indicator {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: bottom right;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 3px;
  right: 3px;
}

.OT_video-disabled {
  background-image: url(`+v+`);
  background-size: 33px auto;
}

.OT_video-disabled-warning {
  background-image: url(`+b+`);
  background-size: 33px auto;
}

.OT_video-disabled-indicator.OT_active {
  display: block;
}

.OT_audio-blocked-indicator {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
}

.OT_audio-blocked {
  background-image: url(`+S+`);
  background-size: 90px auto;
}

.OT_container-audio-blocked {
  cursor: pointer;
}

.OT_container-audio-blocked.OT_mini .OT_edge-bar-item {
  display: none;
}

.OT_container-audio-blocked .OT_mute {
  display: none;
}

.OT_audio-blocked-indicator.OT_active {
  display: block;
}

.OT_video-unsupported {
  opacity: 1;
  border: none;
  display: none;
  position: absolute;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  background-image: url(`+C+`);
  background-size: 58px auto;
  pointer-events: none;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  margin-top: -30px;
}

.OT_video-unsupported-bar {
  display: none;
  position: absolute;
  width: 192%; /* copy the size of the audio meter bar for symmetry */
  height: 192%;
  top: -96% /* half of the size */;
  left: -96%;
  border-radius: 50%;

  background-color: rgba(0, 0, 0, .8);
}

.OT_video-unsupported-img {
  display: none;
  position: absolute;
  top: 11%;
  left: 15%;
  width: 70%;
  opacity: .7;
  background-image: url(`+C+`);
  background-repeat: no-repeat;
  background-position: center;
  background-size: 100% auto;
}

.OT_video-unsupported-img:before {
  /* makes the height of the container 93% of its width (90/97 px) */
  content: '';
  display: block;
  padding-top: 93%;
}

.OT_video-unsupported-text {
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  height: 100%;
  margin-top: 40px;
}

.OT_video-unsupported.OT_active {
  display: block;
}

.OT_mini .OT_video-unsupported,
.OT_micro .OT_video-unsupported {
  position: absolute;
  width: 25%;
  max-width: 224px;
  min-width: 21px;
  top: 0;
  left: 0;
  overflow: hidden;
  background: none;
  bottom: auto;
  right: auto;
  margin: auto;
}

.OT_mini .OT_video-unsupported:before,
.OT_micro .OT_video-unsupported:before {
  /* makes the height of the container equals its width */
  content: '';
  display: block;
  padding-top: 100%;
}

.OT_mini .OT_video-unsupported-bar,
.OT_micro .OT_video-unsupported-bar,
.OT_mini .OT_video-unsupported-img,
.OT_micro .OT_video-unsupported-img {
  display: block;
}

.OT_mini .OT_video-unsupported-text,
.OT_micro .OT_video-unsupported-text {
  display: none;
}

.OT_hide-forced {
  display: none;
}

.OT_ModalDialog {
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  z-index: 1000;
  background-color: rgba(0, 0, 0, 0.2);
}

#tb_alert {
  position: fixed;
  width: 570px;
  font-family: "Lucida Grande", Arial;
  top: 50%;
  left: 50%;
  margin-top: -75px;
  margin-left: -285px;
}

#tb_alert * {
  box-sizing: border-box;
}

#tb_alert .OT_alert {
  border-top-right-radius: 5px;
  border-bottom-right-radius: 5px;
  background-color: #333;
  position: relative;
  padding: 30px;
  overflow: visible;
  margin-left: 70px;
  border-bottom-color: rgba(255, 255, 255, 0.1);
  border-left-color: rgba(255, 255, 255, 0.1);

  background-image: linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));

  background-image: -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2)), -ms-linear-gradient(45deg, rgba(0, 0, 0, 0.2) 25%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.2) 75%, rgba(0, 0, 0, 0.2));

  background-size: 4px 4px;
  background-position: 0 0, 2px 2px;
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

#tb_alert .OT_alert-exclamation {
  background-color: #9c1408;
  background-image: linear-gradient(0deg, #dd0c0a 0%, #9c1408 100%);
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.3);

  margin: -1px 0;

  font-family: MS Trebuchet;
  font-weight: bold;
  font-size: 60px;
  text-shadow: -1px -1px 2px rgba(0, 0, 0, 0.5);

  color: white;
  width: 65px;
  position: absolute;
  padding: 42px 0;
  text-align: center;
  left: -70px;
  top: 0;
  bottom: 0;
  border-top-left-radius: 5px;
  border-bottom-left-radius: 5px;

  border-bottom-color: transparent;
  border-left: none;
  border-right: none;
}

#tb_alert .OT_alert-exclamation:after,
#tb_alert .OT_alert-exclamation:before {
  content: " ";
  position: absolute;
  right: -24px;
  top: 40%;
  border: 12px solid transparent;
  border-left-color: #9c1408;
}

#tb_alert .OT_alert-exclamation:before {
  border-left-color: #bc3428;
  top: 39%;
}

#tb_alert .OT_alert-body {
  color: #c8c5c5;
  margin: 0;
  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
  font-size: 14px;
  line-height: 1.3em;
}

#tb_alert .continue-text {
  margin-top: 12px
}

#tb_alert > * a {
  color: #a7d8df;
  text-decoration: none;
}

#tb_alert .OT_alert-header {
  font-size: 24px;
  padding-bottom: 5px;
  color: #aaa;
  font-weight: bold;
  position: relative;
  text-shadow: 0 2px 0 rgba(0, 0, 0, 0.3);
  margin: 0;
}

#tb_alert .OT_alert-header::before {
  content: attr(data-text);
  position: absolute;
  left: 0;
  color: white;
  -webkit-mask-image: -webkit-gradient(
    linear,
    left top, left bottom,
    from(rgba(0, 0, 0, 1)),
    color-stop(60%, rgba(0, 0, 0, 0)),
    to(rgba(0, 0, 0, 0))
  );
}

#tb_alert .OT_alert-close-button {
  position: absolute;
  right: 8px;
  top: 5px;
  background-color: #000;
  color: #666;
  border: none;
  font-size: 20px;
  /** Hack to bring it up to the proper line top */
  line-height: 14px;
  padding: 0;
  padding-bottom: 3px;
  cursor: pointer;
}

#tb_alert #section-mobile-browser,
#tb_alert #section-supported-mobile-browser {
  width: 200px;
  top: 0px;
  left: 25%;
  margin-top: 0;
  margin-left: 0;
}

@media all and (max-height: 300px) {
  #tb_alert {
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    margin-left: 0;
    margin-top: 0;
  }
  #tb_alert #section-mobile-browser,
  #tb_alert #section-supported-mobile-browser {
    margin-left: 0;
    margin-top: 10px;
    left: 0;
  }
}

#tb_alert #section-normal-install,
#tb_alert #section-upgrade-install,
#tb_alert #section-mobile-browser,
#tb_alert #section-supported-mobile-browser {
  display: none;
}
`,""])},function(t,r,e){t.exports=function(a){var c=[];return c.toString=function(){return this.map(function(l){var f=n(l,a);return l[2]?"@media "+l[2]+"{"+f+"}":f}).join("")},c.i=function(u,l){typeof u=="string"&&(u=[[null,u,""]]);for(var f={},g=0;g<this.length;g++){var v=this[g][0];v!=null&&(f[v]=!0)}for(g=0;g<u.length;g++){var b=u[g];(b[0]==null||!f[b[0]])&&(l&&!b[2]?b[2]=l:l&&(b[2]="("+b[2]+") and ("+l+")"),c.push(b))}},c};function n(a,c){var u=a[1]||"",l=a[3];if(!l)return u;if(c&&typeof btoa=="function"){var f=o(l),g=l.sources.map(function(v){return"/*# sourceURL="+l.sourceRoot+v+" */"});return[u].concat(g).concat([f]).join(`
`)}return[u].join(`
`)}function o(a){var c=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,"+c;return"/*# "+u+" */"}},function(t,r,e){t.exports=function(o,a){return typeof o!="string"?o:(/^['"].*['"]$/.test(o)&&(o=o.slice(1,-1)),/["'() \t\n]/.test(o)||a?'"'+o.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':o)}},function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAAcCAMAAAC02HQrAAAA1VBMVEUAAAD3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pn3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj3+Pj39/j3+Pj3+Pn4+Pk/JRMlAAAAQ3RSTlMABAUHCQoLDhAQERwdHiAjLjAxOD9ASFBRVl1mbnZ6fH2LjI+QkaWqrrC1uLzAwcXJycrL1NXj5Ofo6u3w9fr7/P3+d4M3+QAAAQBJREFUGBlVwYdCglAABdCLlr5Unijm3hMUtBzlBLSr//9JgUToOQgVJgceJgU8aHgMeA38K50ZOpcQmTPwcyXn+JM8M3JJIqQypiIkeXelTyIkGZPwKS1NMia1lgKTVkaE3oQQGYsmHNqSMWnTgUFbMiZtGlD2dpaxrL1XgM0i4ZK8MeAmFhsAs29MGZniawagS63oMOQUNXYB5D0D1RMDpyoMLw/fiE2og/V+PVDR5AiBl0/2Uwik+vx4xV3a5G5Ye68Nd1czjUjZckm6VhmPciRzeCZICjwTJAViQq+3e+St167rAoHK8sLYZVkBYPCZAZ/eGa+2R5LH7Wrc0YFf/O9J3yBDFaoAAAAASUVORK5CYII="},function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAdCAYAAABFRCf7AAADcElEQVRIiaWVXWhcRRTHf7NNd2aDtUKMIjTpg4ufFIuiUOmDEWm0Vi3VYhXRqIggQh4sWJFSig9+oOhTKSpIRUWMIBIr2kptoTbgU6ooxCiIjR+14kcJmf9sNceHnd3ebnc3Uv9wuXfOzPzmnDMz5zozGwdWAbc65w5RUJQ8cC2wDJgFJioh/MJCMrNxq2vOzK4HmIvRRemxKP0RJWt53o7S+d2Yzsx6gQ+AIUDAnUqpBLzXZd4RYFUlhB/bdZacc3PAOmAcCMC7wfvFwLNdoAPAyx09bXyYWRl4E7gDmAdGlNKFwLYu8GolhO9O87RJd64GbMrgEvB68P4osMWdXLtVV7czlooNpVRWSs8DO7NpR/B+3rBHsvetCgtCMTxwQCm9BbyQrc8F7/uBex3uRCeXO0PrUZ4NfKyUPgWeyj3bg/crDNsIRGwBaJQGorQ3Svdn2wHgc2BUKb0DPJHtjwfvbwRucc7tz+N+i9LFUdoXpfVN36I0CVwBTFI/q9e1LPxT8P4qYEdu70q12mYzWw1MYQzjeJF6zq+shHC4B7jklOBPP/TzSunh4P0DwKvAfb5c9krpe+CcwsEoZdbhEvBM9wxRAl5RShcA9wAngE3B+8tLpdLuwrhp4MNmK0pfRWkySr7NXS8+L5nZbWZWy/Vin1IaitJnUTqvwevJ71lgSSWEFKUfHG7Q2m/xqFJaGry/GXgfGPLl8mJgrXPur2JoUC8Qy3OpG+sAbGhEKT0ErAWOA6uBPWbW1wr9BOgFbgKezot0kAPYqJQA1gC/A9cA+82svzksSn1R+jNKX0SpnM/e1x3yqig92JhrZivM7FjO8bSZLSuCR/Ok16K0KMNHojQWpYko7Y7S1igN5PE3ROl4lNaZ2UVmNpPBU01orvZvZPCeKFXbBR+lEKVtUapFaSZKg9njqpl9aWYTrmXCImA7sCWb9lK/jj9TrwkrgA1AH3AQuKsSwkzbrLfxpgpsBtYDxf/R3xm2ExirhNCuHHZXTsmRwiat+S/zSt06eysVA/4pmGr/G3qm6ik28v29FKgCg8BS6pvS0KNRGgZ+Bb4FpsxsOkfUlMuwDcBWYOUZOHYM2AU8WQmhBifDv70O7PjX7KZ+4G7g3FM8zd6uBIaBy4AqxnIcZwFLCovPAhE4Sj38b4BDwEeVEFKD9S94Khjn486v3QAAAABJRU5ErkJggg=="},function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAATCAYAAAB7u5a2AAABx0lEQVQ4jaWUv48NURiGn3ONmCs32ZBd28ht1gqyZAkF21ylQkEiSp2ehpDlD1BoFGqqVdJohYKI7MaPxMoVNghCWMF+7ybLUewnOXfcMWO9yeQ857zne8+XmZOBGjJpr0kvTIomvTZpS526UCO4DUwD64FjwCFgqZnnR+oc8LfgzKQ73vGsr42ZtGjSQFV9o8KfBCacZwCaef4YmAf2rzjcpN3A2WSpm/AssKcqPDNpDBjs410CViXzTwk/A7b1C4wxDgOngAsZcAXY2buDfp/6S4F3lDS8DjgBzDWAjX/Y/e/QgYS/AhsKHa+OMQ6GEJ4Cj4BOAxgq6aCowyZtdf4OtAr+FHDO+R4wWnVbihr3cQnICt4boO38GWj9a/icjwOACt4m4K3zEPA+AxaAtTWCnwN3lzHkEL8V/OPAGud9wK2GF9XR1Wae/1zG2AI+pGYI4VUIoRtjHAc2A9cz4LRPevYCZ+i9/4sJt4GXJU10gaPAzdI2TTro/5Tfz8XEe2LSZGmxq/SDNvP8BnA5WRrx4BwYBe6vONx1EnjovGvBLAAd4Adwuyq8UiaNmDTvr+a8SQ9MuvbfwckBHZPe+QEfTdpep+4XZmPBHiHgz74AAAAASUVORK5CYII="},function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAUCAYAAACXtf2DAAACtklEQVQ4jZ2VSYiURxTHf+/T9Nc9iRrBuYySmIsXUU9iFMEFERRBvAjJLUQi5ioiHvSScfTmgqC4XAT1ZIgLuJHkICaaQAgKI2hAUBT30bjUq7bbv4eukXK029F3+eqtv/fqK6qQdEnSNUmT6CDB/bvgfjO4N9zj2RD8007xg1IABkwEzkma0qb4PGAPMBZYLtSD8eNwAEjqTlNI0gNJM4YU7w7ut4O7gvuhZFsR3C8NC5BBLiTIY0mzM8AvqbiC++pk+zLpE95XuwAws3vAQuBPYDRwWtL84P4tsDSLv5oaug4EYOawAMF9jMdoLxqNZcDvQA04UVYqL4G/svj7AF21mhJscrvCksYBFO7xc2AAGGg2mrdjvf4rcAyomNn+slLZmUEGBgsYdh945xZJmgvckDSrEJpK6ySBgV6q12O8ABwGPjGzfWWlsjdN9rpjoSfA+DYDXARGAksK4Is3XC1Ub4z1f4CDQGFmu6tleQSYk0U+p7WVeefLJc00s4fAeWB6Qeunvj0m2ugx9gO7kmlrtSxvBfcy6fXUZS6rgG/S+jLQUwCVNmMC9HqM14EtSe+rluWazN8YEv8IqKZ1E1qnaIDO0ucx3gX6kv6TpM3AM+D/IbGjgP60/gq4WQA33gMA2OQxPgHWJX1ttSwL4FAeZGYLgB2SasBs4A8L7qOBf9M0uXQB3a+TMYSmVctyDrA9mfcBK82smSdKWgCcAaa1bTm4fxbc/8uuCQX3RanAD5Ka6Wo5IGnE0HxJPZ03pQX5Org3MsD3AO5xXLPZXJ9BjkrqdFg6QjZkgG3Jtsw93pG0VFI9QU5K6voYQBHcTydAfwheBI9HgvvPAJIWS3qeIL9JGvUxkO7gfi1BrqTvwkG/pPmSnibIqTzXPgAyEVgBjAEu1qrVPbk/PVTHgb/NbPGg/RVIzOQqzSTBaQAAAABJRU5ErkJggg=="},function(t,r){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0yMCAtMjAgMjQwIDI0MCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9IjEiIHgyPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjA4Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImMiIHgxPSIxIiB4Mj0iMCIgeTE9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMDgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjE2Ii8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImQiIHgyPSIwIiB5MT0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii4xNiIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuMzMiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZSIgeDI9IjEiIHkxPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMzIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii42NiIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJmIiB4Mj0iMSIgeTI9IjEiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIuNjYiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSJnIj48ZyBmaWxsPSJub25lIiBzdHJva2Utd2lkdGg9IjQwIj48cGF0aCBzdHJva2U9InVybCgjYSkiIGQ9Ik04Ni42LTUwYTEwMCAxMDAgMCAwMTAgMTAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMDAgMTAwKSIvPjxwYXRoIHN0cm9rZT0idXJsKCNiKSIgZD0iTTg2LjYgNTBBMTAwIDEwMCAwIDAxMCAxMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2MpIiBkPSJNMCAxMDBhMTAwIDEwMCAwIDAxLTg2LjYtNTAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2QpIiBkPSJNLTg2LjYgNTBhMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2UpIiBkPSJNLTg2LjYtNTBBMTAwIDEwMCAwIDAxMC0xMDAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMCAxMDApIi8+PHBhdGggc3Ryb2tlPSJ1cmwoI2YpIiBkPSJNMC0xMDBhMTAwIDEwMCAwIDAxODYuNiA1MCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAwIDEwMCkiLz48L2c+PC9tYXNrPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiB4PSItMjAiIHk9Ii0yMCIgbWFzaz0idXJsKCNnKSIgZmlsbD0iI2ZmZiIvPjwvc3ZnPg=="},function(t,r){t.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNDcxIDQ2NCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwIiB4Mj0iMCIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjY2LjY2JSIgc3RvcC1jb2xvcj0iI2ZmZiIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48cGF0aCBmaWxsPSJ1cmwoI2EpIiBkPSJNNzkgMzA4YzE0LjI1LTYuNSA1NC4yNS0xOS43NSA3MS0yOSA5LTMuMjUgMjUtMjEgMjUtMjFzMy43NS0xMyAzLTIyYy0xLjc1LTYuNzUtMTUtNDMtMTUtNDMtMi41IDMtNC43NDEgMy4yNTktNyAxLTMuMjUtNy41LTIwLjUtNDQuNS0xNi01NyAxLjI1LTcuNSAxMC02IDEwLTYtMTEuMjUtMzMuNzUtOC02Ny04LTY3cy4wNzMtNy4zNDYgNi0xNWMtMy40OC42MzctOSA0LTkgNCAyLjU2My0xMS43MjcgMTUtMjEgMTUtMjEgLjE0OC0uMzEyLTEuMzIxLTEuNDU0LTEwIDEgMS41LTIuNzggMTYuNjc1LTguNjU0IDMwLTExIDMuNzg3LTkuMzYxIDEyLjc4Mi0xNy4zOTggMjItMjItMi4zNjUgMy4xMzMtMyA2LTMgNnMxNS42NDctOC4wODggNDEtNmMtMTkuNzUgMi0yNCA2LTI0IDZzNzQuNS0xMC43NSAxMDQgMzdjNy41IDkuNSAyNC43NSA1NS43NSAxMCA4OSAzLjc1LTEuNSA0LjUtNC41IDkgMSAuMjUgMTQuNzUtMTEuNSA2My0xOSA2Mi0yLjc1IDEtNC0zLTQtMy0xMC43NSAyOS41LTE0IDM4LTE0IDM4LTIgNC4yNS0zLjc1IDE4LjUtMSAyMiAxLjI1IDQuNSAyMyAyMyAyMyAyM2wxMjcgNTNjMzcgMzUgMjMgMTM1IDIzIDEzNUwwIDQ2NHMtMy05Ni43NSAxNC0xMjBjNS4yNS02LjI1IDIxLjc1LTE5Ljc1IDY1LTM2eiIvPjwvc3ZnPg=="},function(t,r){t.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgNzkgODYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0iTTkuNzU3IDQwLjkyNGMzLjczOC01LjE5MSAxMi43MTEtNC4zMDggMTIuNzExLTQuMzA4IDIuMjIzIDMuMDE0IDUuMTI2IDI0LjU4NiAzLjYyNCAyOC43MTgtMS40MDEgMS4zMDEtMTEuNjExIDEuNjI5LTEzLjM4LTEuNDM2LTEuMjI2LTguODA0LTIuOTU1LTIyLjk3NS0yLjk1NS0yMi45NzV6bTU4Ljc4NSAwYy0zLjczNy01LjE5MS0xMi43MTEtNC4zMDgtMTIuNzExLTQuMzA4LTIuMjIzIDMuMDE0LTUuMTI2IDI0LjU4Ni0zLjYyNCAyOC43MTggMS40MDEgMS4zMDEgMTEuNjExIDEuNjI5IDEzLjM4LTEuNDM2IDEuMjI2LTguODA0IDIuOTU1LTIyLjk3NSAyLjk1NS0yMi45NzV6Ii8+PHBhdGggZD0iTTY4LjY0NyA1OC42Yy43MjktNC43NTMgMi4zOC05LjU2MSAyLjM4LTE0LjgwNCAwLTIxLjQxMi0xNC4xMTUtMzguNzctMzEuNTI4LTM4Ljc3LTE3LjQxMiAwLTMxLjUyNyAxNy4zNTgtMzEuNTI3IDM4Ljc3IDAgNC41NDEuNTE1IDguOTM2IDEuODAyIDEyLjk1IDEuNjk4IDUuMjk1LTUuNTQyIDYuOTkxLTYuNjE2IDIuMDczQzIuNDEgNTUuMzk0IDAgNTEuNzg3IDAgNDguMTAzIDAgMjEuNTM2IDE3LjY4NSAwIDM5LjUgMCA2MS4zMTYgMCA3OSAyMS41MzYgNzkgNDguMTAzYzAgLjcxOC0yLjg5OSA5LjY5My0zLjI5MiAxMS40MDgtLjc1NCAzLjI5My03Ljc1MSAzLjU4OS03LjA2MS0uOTEyeiIvPjxwYXRoIGQ9Ik01LjA4NCA1MS4zODVjLS44MDQtMy43ODIuNTY5LTcuMzM1IDMuMTM0LTcuOTIxIDIuNjM2LS42MDMgNS40ODUgMi4xNSA2LjI4OSA2LjEzMi43OTcgMy45NDgtLjc1MiA3LjQ1Ny0zLjM4OCA3Ljg1OS0yLjU2Ni4zOTEtNS4yMzctMi4zMTgtNi4wMzQtNi4wN3ptNjguODM0IDBjLjgwNC0zLjc4Mi0uNTY4LTcuMzM1LTMuMTMzLTcuOTIxLTIuNjM2LS42MDMtNS40ODUgMi4xNS02LjI4OSA2LjEzMi0uNzk3IDMuOTQ4Ljc1MiA3LjQ1NyAzLjM4OSA3Ljg1OSAyLjU2NS4zOTEgNS4yMzctMi4zMTggNi4wMzQtNi4wN3ptLTIuMDM4IDguMjg4Yy0uOTI2IDE5LjY1OS0xNS4xMTIgMjQuNzU5LTI1Ljg1OSAyMC40NzUtNS40MDUtLjYwNi0zLjAzNCAxLjI2Mi0zLjAzNCAxLjI2MiAxMy42NjEgMy41NjIgMjYuMTY4IDMuNDk3IDMxLjI3My0yMC41NDktLjU4NS00LjUxMS0yLjM3OS0xLjE4Ny0yLjM3OS0xLjE4N3oiLz48cGF0aCBkPSJNNDEuNjYyIDc4LjQyMmw3LjU1My41NWMxLjE5Mi4xMDcgMi4xMiAxLjE1MyAyLjA3MiAyLjMzNWwtLjEwOSAyLjczOGMtLjA0NyAxLjE4Mi0xLjA1MSAyLjA1NC0yLjI0MyAxLjk0NmwtNy41NTMtLjU1Yy0xLjE5MS0uMTA3LTIuMTE5LTEuMTUzLTIuMDcyLTIuMzM1bC4xMDktMi43MzdjLjA0Ny0xLjE4MiAxLjA1Mi0yLjA1NCAyLjI0My0xLjk0N3oiLz48L2c+PC9zdmc+"},function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAINUlEQVR42u2aaUxUVxTHcRBmAAEBRVTK4sKwDIsg+wCK7CqIw1CN1YobbbS2qYlJ06Qx1UpdqMbYWq2pSzWmH6ytNbXWJY1Lq7VuqBERtW64V0XFLYae0/xvcp3MMAMzDz6IyT/ge2ce5/7ucpY3Ts3NzZ1ygF57AJ0gO0G2jyZPmdbFyclJSAV1EeoEaUUSLGdSV5KLLFxzFmA7QVqGqDqjixhWkxCVeyRVl38wM6bwj6yYItYK47BAuu9B0gCqs6Ng2r494KQtkj/Dz2jHraw6qw2fdSE4rNmcCPCvZONP8iF1I6kdBdMaQJWZLeJqRWa2kPJAxXY+GxE+zxLI03GRh8lGSwoi9WCY8FWlCEh+8JOnT7MfPGjMuXX7Tt61hoaCi/9cKmKdv3BxeEtim/UbNpnbQiqF4MmT7kqrbr4lkMcTo46TTSpJB5g+8NHuVWnWuaampvhmO/7duHmrGluoO4C6OsJZGRrkDIld43ZqUOTnlkDSmXmabAoBU0vqBf+6KgFSxQ9++uzZ8rZApM81TJ8xM5me0Z/UF7PuBmdVdkGEb5gYDeQmyZNW3SJLIP9Kj64lGyMpmxRN6sOfIbkoAhKOdnv2/PmB1kB88eLFo+olyyrps3rSINIAzLonnqlqK8R9w+L86vtrt5L2nhug3Vc3ULu/Liz8AOuXESlZZONH6kmr7gtLIA9lRNeRzVukAvj3BslLnJNKgfScO69K+/Lly0ZbQW7e8tNK+pwBjqaSIjDrXgJkW1ciAZvbQjQ+RDahpBBKd5ZZsqN758hmImk4KQHnpDd8UwSkCyJarx07d4+3BeKJmlMHyX4qaRxpBCmNFE4KENvHDpAutVERn1kCVBMfeRRgYvZnx62wZPdnZkw92VQA5GClQXYRBze2S+iJmpPVVoJLA9l9QKokjcWKTCT1R5rhLg70NuSsziT16diIKkuAjibrTpJNDkn/e17CahtAjlAWJAYkb29Sb1LE9Rs391kILk8mVkyuIpuZcLKUlEmKkra1WuSTNuesEPzwoEploSVAh9Oiz+BIyd9dOHhtx4OEpFpVg6gbNK3yXX1j48N6U5Dz5i/gc/FDrMY3sTLiSMEkXxGxzUEUAGnbxlPaksMlHUXWAlHS8URCPseSohZbCSLjSSU7ixLXdzhIWVKq4Y7t2a/2bN0qGeKly1fYsVmk6RgIDz4J0bonyUOcjeYqm/8hRoYbWkigV2NH9CHAS60EkUkkw47hSRs6FqT1LR5AVcsrueXlK1d5AO+RpmBrZZEiefByytPCanRGNLZY0uF52gNDYr9sCRB8MHY0SJu2OJWKS2WQV65e4y31DmkCImEi0hBfufRime0RIhpbKen0/Ny9OYNW2ghyYytABjNIaxNuKttAWk6HPLn0k0FevdZwFinPWFIuKZbUV16NVko6jbWSDoPO3pOf8K0jQWLSQ0S9bdpkYck+m7vfWpAiHfKgBsZiGSSt0FqcTeU8WETqAHE2CgcAVd3Gkm4MD3xXYeI6B4NMItvKbcUpQ9gP+KMWnSsW+TaYJtoo+avBWLoKoK0CCSDud+7eXWQGZAXqV3YoQjQCfixJ8+fzj9ta3JHhlUeJ8wJOY2ws6eRKpPS3oqTvHAESEz9ya0naXL5WH6pt3FqSOhTHkTcKEXc6k1POh4Q9YJu/03TT4a8PoGMFI4i2EqSbOZAYaBkpCyD92RkG6KCSbjI/H0HEISBnlOZPFdcEzI2GTO4KBZICGKyAKLTEmJOB2txf5MbgohBINCl4FTqmpJMB2W+HiRn1Q2l6lXyPmiEP6VVE2TfGoaMYrHyPdtAnyI0jEOn9RLWmNEhvBBE7SjpFQZaShtLK+1S+T12lRwxUvrZlVPp8jE1PikeO7C/nyEqBDCB1t7+kUx4kKUWclea0yZC5BIGpiJSNSD9QgFR0RQKkL6KxHSWdsiARHJNYewoGrzG1/bk4dTPSunL2EyDjcbb7MQ+lQfZmkKiN7SjpFAM5CWAyGcwyY84YsZ1lUcbRNNtQMAdtQWGvQ0DyVjzYAKQfQFodeAeC1C8vzymXIZqD+ZEh/2OyLSalS/3VbnJZ+VqDXGjMrTCFuK4s66vVZUNfqaDolcbjOcb899sLpEE+I20GifywXe2QR3KElu99PzqjGufhREqB1pjCnG3IL3fY1v733r2FMsiGhutn0LAoJWWIGbPxjKwgjUbF0m52mPhigrpdXOecEq9pR6MkHbu2LOtrcZ9y3d0ODTb15y9MePz48aF79+8fvXnr9sljx2u2I7KNxDuaMPGVECoRs7mC4eT7SIruFNfNHK15MKuM2evwNq+4qjxvGnd5CHwNNynawW4cOlUZdG8b55IIJHmkItwrZHH6QxB3OSL9kTtAGpIvZiQB3Z4SKBfXQtEE9sashWAW87Bt3sYZNR6zn4uzJwWDKUKXfaKCdqUoBpLxSjYe9nqGiwWRBGipuGZ3Qm76itYLbbJI/PEhUApfw73uOIy9xfse3M9F9BuFJHcYrseSouGkHtCVtkuGTTikI8XgZzhg9SeF4VqcvSWiaSvNHQ8JwkNjIfEHemCmNLD1RaEfLs18mlgNuN6PFALHo7CyU5W2g00gFAQF4ozvibH04muwDbWraSFAyt/AAMzewgGR8uCeWn77xzBxPxgzPRCDDMZ14bQ/3jqGKGoHf2Hjgx3kw5LbaJDYWb52t9FMgw4AuWNWukNeuOYqOsmQi2jgws4PA/DD/z0B2x0/veCs4naw0cgybezid7X9jV3rX2RSs0wfLkll4pBGcgifg+NYxe1kJ2ycTaRq66uG/wBOl0vjcw70xwAAAABJRU5ErkJggg=="},function(t,r){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAAoCAYAAABtla08AAAGMElEQVR4Ae2aA7D0yBaAc7oH12vbRmlLaxYWb23btm3btm2899a2bWuYtPZ01cmtU9lJrib315yqr9I3Oem/5/s7acwEnehEJzoxCcX2O+wEeIgRBDDaGjAZOgQ6ihRpLklHZDJIXK1WWymMIhGGkVBKCWMM+Iv/f/b5t7faYtM/sGgIS7j8RNLjceUVl41GvGN1BFiHy9sgtRWaYbhvuVQ6o1VOvV5/tLe3dyssKoZuh8xClkDEi2MMS6ZjR0cScxdK/+HgnJsmLccYOx0e/PUGUqfTJDEHkV5go9lcMQoj4R8RpSIRRUr4a9baTJFCCNfqESKJ7RYJibK0xoi05EhFRTxMi1Rit6xHAuLaKRLwEVi6q1x+EhlVpd3d3Wfh4VQkQhRhxthYLg7SRGqdLlIp7UVOHf+JhEhEMscUolVje3p63saeeOFoKsT7fjj++BNuw2I/0ouUENmGaQcQEilQvUU6xuWC0kqmVWCt8df6kG7WLoFA20VSCOyNh0RKPT+SyrTWtQsvuvTYCy84z3+oAdbgAiLGIvHjTz6bFuu/B3lKKfVkFKknwih6EnnipZdfXQZzepAupXSGSCfwUGZtkrx3t/0dSQGnnXbmdocdetArQoj+4VR23wMP3bj/vnv9Sv/rBmkish09ca655thHSrlWq4TFF1vkNDxsgjiUnPqZnHPABIq47jx7pPMcecShfz7x1DO7D6eit99576X1113nVd8rqLGAuDaNitJonTGIqHgQGQjDsJglMrUH5iDSEQbRa6y2yrNvv/PuWVmV/PTzLz8steTit1B9FtGJeZrJksmWdBzBMcami4xUkaY1A1Qe94WIaPGBApJhaERrLrXkElf8+NPPz6YMLs1DDjn0Wn9PnI/UiQadM4jNEkhzVsEGE8nIHESM1j5/KqRX+/IEiOQ/yifNBlEkpnb00cccesbpp13T3983H88/48xzrrvm6it/8U5JXgX5G6nSvSq1R5LATR7aYGkwMG1RSwkWABH+4jUb3vT/uJ1Z0xpjraTBRltrxUQhksIRmgTJyy69+Pv99tv3qYX6FxgU+fU33352xGEHf5wisU7nNWJpZRMkAjZ6aIN1mwV7h29Jo2wCHlveu/GV169z65E+T6koexCh6c+EEiky3lnxQKFjUeVyOeI5AOBzIiayRhJryd7YYnkIHgvB0qk9Tdql6N3XH4bRUIOIIIKJSiRb0hkSEpZKRd1CpEq8GxtIyCVmDSgFl94GacTgaJw1rUlYhYng0c4ewaUsmKRIJjpiqMSOCh9QeI+UYECmtQIsxEu6OorEcv6Rl0gu0woh8MhFkmSCTXVI4pC704WCFRJvSRNJSzrMMEZO2iKZTCHAZYnmvXCny7ed5vfZK3viHSBdIFCKEFj2+nt+73nw8m2uedcLJlktA++VNMEPaR45aYukcKnnCfY3/DFbZS8t7eHxNgsPM0N1hXhJJwwM1QbpoQFlog2R13a/zBxEYHAQEUYUM6qiVwEyBYoM6JFNF2kFLelI5KQf+fVI4dJFCguDS7oAyx2R6SFQJKRedSDj/cMg/RXQ6ZE05GSIDAaXdCi1I3L021SQWNJ1RLY5OiIdL4/yvuw8ADfWPFrSciaMyH8tEQPwf1uGG54g5+KlJGTmsrxsQdl5PKidnPFe2QS///7Hu+VS6WX/HYnf0sevGL7lXydwod2/9DykZq0s5yff0sgSWCigNOH7TPHL7ufj+/TH8P/+qYpL4HkBDiRYpEXeM8/89/9zzjn7EtY64dfd1nqccM7Bs8+9MKy8555/8TnKS+5MufH6EZVASkgPzf+mJXroet17JirU0ALST3nT0y5ONyLpeo1y64ih+vuQfsoTOeRFSJXa+SvyB90TUmdw49EjLaKpMQ0mzEeTzkWsd/oI6fzfiKM8gWg6X6OjpXstu5ZHnmIb0GFiu29MIUfUewkmVrEN3RqVQ/bY8FzNcquMBv/pCNUZ5pHHem01KdN/I/DG66/lLhKSvTO5M84kav5C5z2ZfyAivi9i9VGd45RH7UWJbjwGG/7NYsRECt7jiOToHedKAui8SW4CsxyRc54mKH/8f7ELhCCACyNcIl/wI+FaAJyc8yzRtinQPzWzuFZrFHq/AAAAAElFTkSuQmCC"},function(t,r){t.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjkwIj48ZGVmcz48cGF0aCBkPSJNNjcgMTJMNi40NDggNzIuNTUyIDAgMzFWMThMMjYgMGw0MSAxMnptMyA3bDYgNDctMjkgMTgtMzUuNTAyLTYuNDk4TDcwIDE5eiIgaWQ9ImEiLz48L2RlZnM+PHJlY3Qgd2lkdGg9IjE1MCIgaGVpZ2h0PSI5MCIgcng9IjM1IiByeT0iNDUiIG9wYWNpdHk9Ii41Ii8+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNikiPjxtYXNrIGlkPSJiIiBmaWxsPSIjZmZmIj48dXNlIHhsaW5rOmhyZWY9IiNhIi8+PC9tYXNrPjxwYXRoIGQ9Ik0zOS4yNDkgNTEuMzEyYy42OTcgMTAuMzcgMi43ODUgMTcuODk3IDUuMjUxIDE3Ljg5NyAzLjAzOCAwIDUuNS0xMS40MTcgNS41LTI1LjVzLTIuNDYyLTI1LjUtNS41LTI1LjVjLTIuNTEgMC00LjYyOCA3Ljc5Ny01LjI4NyAxOC40NTNBOC45ODkgOC45ODkgMCAwMTQzIDQ0YTguOTg4IDguOTg4IDAgMDEtMy43NTEgNy4zMTJ6TTIwLjk4NSAzMi4yMjRsMTUuNzQ2LTE2Ljg3N2E3LjM4NSA3LjM4NSAwIDAxMTAuMzc0LS40MkM1MS43MDIgMTkuMTE0IDU0IDI5LjIwOCA1NCA0NS4yMDhjMCAxNC41MjctMi4zNDMgMjMuODgtNy4wMyAyOC4wNThhNy4yOCA3LjI4IDAgMDEtMTAuMTY4LS40NjhMMjAuNDA1IDU1LjIyNEgxMmE1IDUgMCAwMS01LTV2LTEzYTUgNSAwIDAxNS01aDguOTg1eiIgZmlsbD0iI0ZGRiIgbWFzaz0idXJsKCNiKSIvPjwvZz48cGF0aCBkPSJNMTA2LjUgMTMuNUw0NC45OTggNzUuMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(t,r){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iOTciIGhlaWdodD0iOTAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxkZWZzPjxwYXRoIGQ9Ik03MCAxMkw5LjQ0OCA3Mi41NTIgMCA2MmwzLTQ0TDI5IDBsNDEgMTJ6bTggMmwxIDUyLTI5IDE4LTM1LjUwMi02LjQ5OEw3OCAxNHoiIGlkPSJhIi8+PC9kZWZzPjxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCAzKSI+PG1hc2sgaWQ9ImIiIGZpbGw9IiNmZmYiPjx1c2UgeGxpbms6aHJlZj0iI2EiLz48L21hc2s+PHBhdGggZD0iTTkuMTEgMjAuOTY4SDQ4LjFhNSA1IDAgMDE1IDVWNTguMThhNSA1IDAgMDEtNSA1SDkuMTFhNSA1IDAgMDEtNS01VjI1Ljk3YTUgNSAwIDAxNS01em00Ny4wOCAxMy4zOTRjMC0uMzQ1IDUuNDcyLTMuMTU5IDE2LjQxNS04LjQ0M2EzIDMgMCAwMTQuMzA0IDIuNzAydjI2LjgzNWEzIDMgMCAwMS00LjMwNSAyLjcwMWMtMTAuOTQyLTUuMjg2LTE2LjQxMy04LjEtMTYuNDEzLTguNDQ2VjM0LjM2MnoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48L2c+PHBhdGggZD0iTTgxLjUgMTYuNUwxOS45OTggNzguMDAyIiBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PC9nPjwvc3ZnPg=="},function(t,r,e){var n={},o=function(j){var _;return function(){return typeof _>"u"&&(_=j.apply(this,arguments)),_}},a=o(function(){return window&&document&&document.all&&!window.atob}),c=function(j,_){return _?_.querySelector(j):document.querySelector(j)},u=function(j){var _={};return function(z,ae){if(typeof z=="function")return z();if(typeof _[z]>"u"){var me=c.call(this,z,ae);if(window.HTMLIFrameElement&&me instanceof window.HTMLIFrameElement)try{me=me.contentDocument.head}catch{me=null}_[z]=me}return _[z]}}(),l=null,f=0,g=[],v=e(349);t.exports=function(j,_){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");_=_||{},_.attrs=typeof _.attrs=="object"?_.attrs:{},!_.singleton&&typeof _.singleton!="boolean"&&(_.singleton=a()),_.insertInto||(_.insertInto="head"),_.insertAt||(_.insertAt="bottom");var z=S(j,_);return b(z,_),function(me){for(var ye=[],Pe=0;Pe<z.length;Pe++){var Te=z[Pe],Ue=n[Te.id];Ue.refs--,ye.push(Ue)}if(me){var _e=S(me,_);b(_e,_)}for(var Pe=0;Pe<ye.length;Pe++){var Ue=ye[Pe];if(Ue.refs===0){for(var je=0;je<Ue.parts.length;je++)Ue.parts[je]();delete n[Ue.id]}}}};function b(j,_){for(var z=0;z<j.length;z++){var ae=j[z],me=n[ae.id];if(me){me.refs++;for(var ye=0;ye<me.parts.length;ye++)me.parts[ye](ae.parts[ye]);for(;ye<ae.parts.length;ye++)me.parts.push(M(ae.parts[ye],_))}else{for(var Pe=[],ye=0;ye<ae.parts.length;ye++)Pe.push(M(ae.parts[ye],_));n[ae.id]={id:ae.id,refs:1,parts:Pe}}}}function S(j,_){for(var z=[],ae={},me=0;me<j.length;me++){var ye=j[me],Pe=_.base?ye[0]+_.base:ye[0],Te=ye[1],Ue=ye[2],_e=ye[3],je={css:Te,media:Ue,sourceMap:_e};ae[Pe]?ae[Pe].parts.push(je):z.push(ae[Pe]={id:Pe,parts:[je]})}return z}function C(j,_){var z=u(j.insertInto);if(!z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var ae=g[g.length-1];if(j.insertAt==="top")ae?ae.nextSibling?z.insertBefore(_,ae.nextSibling):z.appendChild(_):z.insertBefore(_,z.firstChild),g.push(_);else if(j.insertAt==="bottom")z.appendChild(_);else if(typeof j.insertAt=="object"&&j.insertAt.before){var me=u(j.insertAt.before,z);z.insertBefore(_,me)}else throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`)}function O(j){if(j.parentNode===null)return!1;j.parentNode.removeChild(j);var _=g.indexOf(j);_>=0&&g.splice(_,1)}function A(j){var _=document.createElement("style");if(j.attrs.type===void 0&&(j.attrs.type="text/css"),j.attrs.nonce===void 0){var z=k();z&&(j.attrs.nonce=z)}return V(_,j.attrs),C(j,_),_}function w(j){var _=document.createElement("link");return j.attrs.type===void 0&&(j.attrs.type="text/css"),j.attrs.rel="stylesheet",V(_,j.attrs),C(j,_),_}function V(j,_){Object.keys(_).forEach(function(z){j.setAttribute(z,_[z])})}function k(){return e.nc}function M(j,_){var z,ae,me,ye;if(_.transform&&j.css)if(ye=typeof _.transform=="function"?_.transform(j.css):_.transform.default(j.css),ye)j.css=ye;else return function(){};if(_.singleton){var Pe=f++;z=l||(l=A(_)),ae=Y.bind(null,z,Pe,!1),me=Y.bind(null,z,Pe,!0)}else j.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(z=w(_),ae=P.bind(null,z,_),me=function(){O(z),z.href&&URL.revokeObjectURL(z.href)}):(z=A(_),ae=H.bind(null,z),me=function(){O(z)});return ae(j),function(Ue){if(Ue){if(Ue.css===j.css&&Ue.media===j.media&&Ue.sourceMap===j.sourceMap)return;ae(j=Ue)}else me()}}var W=function(){var j=[];return function(_,z){return j[_]=z,j.filter(Boolean).join(`
`)}}();function Y(j,_,z,ae){var me=z?"":ae.css;if(j.styleSheet)j.styleSheet.cssText=W(_,me);else{var ye=document.createTextNode(me),Pe=j.childNodes;Pe[_]&&j.removeChild(Pe[_]),Pe.length?j.insertBefore(ye,Pe[_]):j.appendChild(ye)}}function H(j,_){var z=_.css,ae=_.media;if(ae&&j.setAttribute("media",ae),j.styleSheet)j.styleSheet.cssText=z;else{for(;j.firstChild;)j.removeChild(j.firstChild);j.appendChild(document.createTextNode(z))}}function P(j,_,z){var ae=z.css,me=z.sourceMap,ye=_.convertToAbsoluteUrls===void 0&&me;(_.convertToAbsoluteUrls||ye)&&(ae=v(ae)),me&&(ae+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(me))))+" */");var Pe=new Blob([ae],{type:"text/css"}),Te=j.href;j.href=URL.createObjectURL(Pe),Te&&URL.revokeObjectURL(Te)}},function(t,r){t.exports=function(e){var n=typeof window<"u"&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!e||typeof e!="string")return e;var o=n.protocol+"//"+n.host,a=o+n.pathname.replace(/\/[^\/]*$/,"/"),c=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(u,l){var f=l.trim().replace(/^"(.*)"$/,function(v,b){return b}).replace(/^'(.*)'$/,function(v,b){return b});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(f))return u;var g;return f.indexOf("//")===0?g=f:f.indexOf("/")===0?g=o+f:g=a+f.replace(/^\.\//,""),"url("+JSON.stringify(g)+")"});return c}},function(t,r){function e(){this.__data__=[],this.size=0}t.exports=e},function(t,r,e){var n=e(81),o=Array.prototype,a=o.splice;function c(u){var l=this.__data__,f=n(l,u);if(f<0)return!1;var g=l.length-1;return f==g?l.pop():a.call(l,f,1),--this.size,!0}t.exports=c},function(t,r,e){var n=e(81);function o(a){var c=this.__data__,u=n(c,a);return u<0?void 0:c[u][1]}t.exports=o},function(t,r,e){var n=e(81);function o(a){return n(this.__data__,a)>-1}t.exports=o},function(t,r,e){var n=e(81);function o(a,c){var u=this.__data__,l=n(u,a);return l<0?(++this.size,u.push([a,c])):u[l][1]=c,this}t.exports=o},function(t,r,e){var n=e(80);function o(){this.__data__=new n,this.size=0}t.exports=o},function(t,r){function e(n){var o=this.__data__,a=o.delete(n);return this.size=o.size,a}t.exports=e},function(t,r){function e(n){return this.__data__.get(n)}t.exports=e},function(t,r){function e(n){return this.__data__.has(n)}t.exports=e},function(t,r,e){var n=e(80),o=e(113),a=e(114),c=200;function u(l,f){var g=this.__data__;if(g instanceof n){var v=g.__data__;if(!o||v.length<c-1)return v.push([l,f]),this.size=++g.size,this;g=this.__data__=new a(v)}return g.set(l,f),this.size=g.size,this}t.exports=u},function(t,r,e){var n=e(18),o=e(363),a=e(11),c=e(175),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,f=Function.prototype,g=Object.prototype,v=f.toString,b=g.hasOwnProperty,S=RegExp("^"+v.call(b).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function C(O){if(!a(O)||o(O))return!1;var A=n(O)?S:l;return A.test(c(O))}t.exports=C},function(t,r,e){var n=e(41),o=Object.prototype,a=o.hasOwnProperty,c=o.toString,u=n?n.toStringTag:void 0;function l(f){var g=a.call(f,u),v=f[u];try{f[u]=void 0;var b=!0}catch{}var S=c.call(f);return b&&(g?f[u]=v:delete f[u]),S}t.exports=l},function(t,r){var e=Object.prototype,n=e.toString;function o(a){return n.call(a)}t.exports=o},function(t,r,e){var n=e(364),o=function(){var c=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function a(c){return!!o&&o in c}t.exports=a},function(t,r,e){var n=e(15),o=n["__core-js_shared__"];t.exports=o},function(t,r){function e(n,o){return n==null?void 0:n[o]}t.exports=e},function(t,r,e){var n=e(367),o=e(80),a=e(113);function c(){this.size=0,this.__data__={hash:new n,map:new(a||o),string:new n}}t.exports=c},function(t,r,e){var n=e(368),o=e(369),a=e(370),c=e(371),u=e(372);function l(f){var g=-1,v=f==null?0:f.length;for(this.clear();++g<v;){var b=f[g];this.set(b[0],b[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=c,l.prototype.set=u,t.exports=l},function(t,r,e){var n=e(82);function o(){this.__data__=n?n(null):{},this.size=0}t.exports=o},function(t,r){function e(n){var o=this.has(n)&&delete this.__data__[n];return this.size-=o?1:0,o}t.exports=e},function(t,r,e){var n=e(82),o="__lodash_hash_undefined__",a=Object.prototype,c=a.hasOwnProperty;function u(l){var f=this.__data__;if(n){var g=f[l];return g===o?void 0:g}return c.call(f,l)?f[l]:void 0}t.exports=u},function(t,r,e){var n=e(82),o=Object.prototype,a=o.hasOwnProperty;function c(u){var l=this.__data__;return n?l[u]!==void 0:a.call(l,u)}t.exports=c},function(t,r,e){var n=e(82),o="__lodash_hash_undefined__";function a(c,u){var l=this.__data__;return this.size+=this.has(c)?0:1,l[c]=n&&u===void 0?o:u,this}t.exports=a},function(t,r,e){var n=e(83);function o(a){var c=n(this,a).delete(a);return this.size-=c?1:0,c}t.exports=o},function(t,r){function e(n){var o=typeof n;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null}t.exports=e},function(t,r,e){var n=e(83);function o(a){return n(this,a).get(a)}t.exports=o},function(t,r,e){var n=e(83);function o(a){return n(this,a).has(a)}t.exports=o},function(t,r,e){var n=e(83);function o(a,c){var u=n(this,a),l=u.size;return u.set(a,c),this.size+=u.size==l?0:1,this}t.exports=o},function(t,r){function e(n,o){for(var a=-1,c=Array(n);++a<n;)c[a]=o(a);return c}t.exports=e},function(t,r,e){var n=e(30),o=e(19),a="[object Arguments]";function c(u){return o(u)&&n(u)==a}t.exports=c},function(t,r){function e(){return!1}t.exports=e},function(t,r,e){var n=e(30),o=e(116),a=e(19),c="[object Arguments]",u="[object Array]",l="[object Boolean]",f="[object Date]",g="[object Error]",v="[object Function]",b="[object Map]",S="[object Number]",C="[object Object]",O="[object RegExp]",A="[object Set]",w="[object String]",V="[object WeakMap]",k="[object ArrayBuffer]",M="[object DataView]",W="[object Float32Array]",Y="[object Float64Array]",H="[object Int8Array]",P="[object Int16Array]",j="[object Int32Array]",_="[object Uint8Array]",z="[object Uint8ClampedArray]",ae="[object Uint16Array]",me="[object Uint32Array]",ye={};ye[W]=ye[Y]=ye[H]=ye[P]=ye[j]=ye[_]=ye[z]=ye[ae]=ye[me]=!0,ye[c]=ye[u]=ye[k]=ye[l]=ye[M]=ye[f]=ye[g]=ye[v]=ye[b]=ye[S]=ye[C]=ye[O]=ye[A]=ye[w]=ye[V]=!1;function Pe(Te){return a(Te)&&o(Te.length)&&!!ye[n(Te)]}t.exports=Pe},function(t,r,e){var n=e(179),o=n(Object.keys,Object);t.exports=o},function(t,r,e){var n=e(42),o=e(55);function a(c,u){return c&&n(u,o(u),c)}t.exports=a},function(t,r,e){var n=e(11),o=e(69),a=e(385),c=Object.prototype,u=c.hasOwnProperty;function l(f){if(!n(f))return a(f);var g=o(f),v=[];for(var b in f)b=="constructor"&&(g||!u.call(f,b))||v.push(b);return v}t.exports=l},function(t,r){function e(n){var o=[];if(n!=null)for(var a in Object(n))o.push(a);return o}t.exports=e},function(t,r,e){var n=e(42),o=e(119);function a(c,u){return n(c,o(c),u)}t.exports=a},function(t,r){function e(n,o){for(var a=-1,c=n==null?0:n.length,u=0,l=[];++a<c;){var f=n[a];o(f,a,n)&&(l[u++]=f)}return l}t.exports=e},function(t,r,e){var n=e(42),o=e(182);function a(c,u){return n(c,o(c),u)}t.exports=a},function(t,r,e){var n=e(40),o=e(15),a=n(o,"DataView");t.exports=a},function(t,r,e){var n=e(40),o=e(15),a=n(o,"Promise");t.exports=a},function(t,r){var e=Object.prototype,n=e.hasOwnProperty;function o(a){var c=a.length,u=new a.constructor(c);return c&&typeof a[0]=="string"&&n.call(a,"index")&&(u.index=a.index,u.input=a.input),u}t.exports=o},function(t,r,e){var n=e(122),o=e(393),a=e(394),c=e(395),u=e(189),l="[object Boolean]",f="[object Date]",g="[object Map]",v="[object Number]",b="[object RegExp]",S="[object Set]",C="[object String]",O="[object Symbol]",A="[object ArrayBuffer]",w="[object DataView]",V="[object Float32Array]",k="[object Float64Array]",M="[object Int8Array]",W="[object Int16Array]",Y="[object Int32Array]",H="[object Uint8Array]",P="[object Uint8ClampedArray]",j="[object Uint16Array]",_="[object Uint32Array]";function z(ae,me,ye){var Pe=ae.constructor;switch(me){case A:return n(ae);case l:case f:return new Pe(+ae);case w:return o(ae,ye);case V:case k:case M:case W:case Y:case H:case P:case j:case _:return u(ae,ye);case g:return new Pe;case v:case C:return new Pe(ae);case b:return a(ae);case S:return new Pe;case O:return c(ae)}}t.exports=z},function(t,r,e){var n=e(122);function o(a,c){var u=c?n(a.buffer):a.buffer;return new a.constructor(u,a.byteOffset,a.byteLength)}t.exports=o},function(t,r){var e=/\w*$/;function n(o){var a=new o.constructor(o.source,e.exec(o));return a.lastIndex=o.lastIndex,a}t.exports=n},function(t,r,e){var n=e(41),o=n?n.prototype:void 0,a=o?o.valueOf:void 0;function c(u){return a?Object(a.call(u)):{}}t.exports=c},function(t,r,e){var n=e(397),o=e(68),a=e(117),c=a&&a.isMap,u=c?o(c):n;t.exports=u},function(t,r,e){var n=e(43),o=e(19),a="[object Map]";function c(u){return o(u)&&n(u)==a}t.exports=c},function(t,r,e){var n=e(399),o=e(68),a=e(117),c=a&&a.isSet,u=c?o(c):n;t.exports=u},function(t,r,e){var n=e(43),o=e(19),a="[object Set]";function c(u){return o(u)&&n(u)==a}t.exports=c},function(t,r,e){(function(n){r.log=c,r.formatArgs=a,r.save=u,r.load=l,r.useColors=o,r.storage=g(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){var b=f("colors");return/^(no|off|false|disabled)$/i.test(b)?!1:typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:Boolean(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(b){var S=this.useColors;if(b[0]=(S?"%c":"")+this.namespace+(S?" %c":" ")+b[0]+(S?"%c ":" ")+"+"+t.exports.humanize(this.diff),!!S){var C="color: "+this.color;b.splice(1,0,C,"color: inherit");var O=0,A=0;b[0].replace(/%[a-zA-Z%]/g,function(w){w!=="%%"&&(O++,w==="%c"&&(A=O))}),b.splice(A,0,C)}}function c(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(b){try{b==null?r.storage.removeItem("debug"):r.storage.setItem("debug",b)}catch{}}function l(){var b;try{b=r.storage.getItem("debug")}catch{}return!b&&typeof n<"u"&&"env"in n&&(b={}.DEBUG),b}function f(b){var S="debug_"+b.toLowerCase();try{return r.storage.getItem(S)}catch{return typeof n<"u"&&"env"in n?n.env[S.toUpperCase()]:void 0}}function g(){try{return localStorage}catch{}}t.exports=e(401)(r);var v=t.exports.formatters;v.j=function(b){try{return JSON.stringify(b)}catch(S){return"[UnexpectedJSONParseError]: "+S.message}}}).call(this,e(44))},function(t,r,e){t.exports=function(o){c.debug=c.default=c,c.coerce=v,c.disable=f,c.enable=l,c.enabled=g,c.humanize=e(402),Object.keys(o).forEach(function(b){c[b]=o[b]}),c.instances=[],c.names=[],c.skips=[],c.formatters={};function a(b){var S=0,C;for(C in b)S=(S<<5)-S+b.charCodeAt(C),S|=0;return c.colors[Math.abs(S)%c.colors.length]}c.selectColor=a;function c(b){var S;function C(){if(C.enabled){var O=C,A=+new Date,w=A-(S||A);O.diff=w,O.prev=S,O.curr=A,S=A;for(var V=new Array(arguments.length),k=0;k<V.length;k++)V[k]=arguments[k];V[0]=c.coerce(V[0]),typeof V[0]!="string"&&V.unshift("%O");var M=0;V[0]=V[0].replace(/%([a-zA-Z%])/g,function(Y,H){if(Y==="%%")return Y;M++;var P=c.formatters[H];if(typeof P=="function"){var j=V[M];Y=P.call(O,j),V.splice(M,1),M--}return Y}),c.formatArgs.call(O,V);var W=O.log||c.log;W.apply(O,V)}}return C.namespace=b,C.enabled=c.enabled(b),C.useColors=c.useColors(),C.color=a(b),C.destroy=u,typeof c.init=="function"&&c.init(C),c.instances.push(C),C}function u(){var b=c.instances.indexOf(this);return b!==-1?(c.instances.splice(b,1),!0):!1}function l(b){c.save(b),c.names=[],c.skips=[];var S,C=(typeof b=="string"?b:"").split(/[\s,]+/),O=C.length;for(S=0;S<O;S++)C[S]&&(b=C[S].replace(/\*/g,".*?"),b[0]==="-"?c.skips.push(new RegExp("^"+b.substr(1)+"$")):c.names.push(new RegExp("^"+b+"$")));for(S=0;S<c.instances.length;S++){var A=c.instances[S];A.enabled=c.enabled(A.namespace)}}function f(){c.enable("")}function g(b){if(b[b.length-1]==="*")return!0;var S,C;for(S=0,C=c.skips.length;S<C;S++)if(c.skips[S].test(b))return!1;for(S=0,C=c.names.length;S<C;S++)if(c.names[S].test(b))return!0;return!1}function v(b){return b instanceof Error?b.stack||b.message:b}return c.enable(c.load()),c}},function(t,r){var e=1e3,n=e*60,o=n*60,a=o*24,c=a*7,u=a*365.25;t.exports=function(b,S){S=S||{};var C=typeof b;if(C==="string"&&b.length>0)return l(b);if(C==="number"&&isFinite(b))return S.long?g(b):f(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))};function l(b){if(b=String(b),!(b.length>100)){var S=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(S){var C=parseFloat(S[1]),O=(S[2]||"ms").toLowerCase();switch(O){case"years":case"year":case"yrs":case"yr":case"y":return C*u;case"weeks":case"week":case"w":return C*c;case"days":case"day":case"d":return C*a;case"hours":case"hour":case"hrs":case"hr":case"h":return C*o;case"minutes":case"minute":case"mins":case"min":case"m":return C*n;case"seconds":case"second":case"secs":case"sec":case"s":return C*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return C;default:return}}}}function f(b){var S=Math.abs(b);return S>=a?Math.round(b/a)+"d":S>=o?Math.round(b/o)+"h":S>=n?Math.round(b/n)+"m":S>=e?Math.round(b/e)+"s":b+"ms"}function g(b){var S=Math.abs(b);return S>=a?v(b,S,a,"day"):S>=o?v(b,S,o,"hour"):S>=n?v(b,S,n,"minute"):S>=e?v(b,S,e,"second"):b+" ms"}function v(b,S,C,O){var A=S>=C*1.5;return Math.round(b/C)+" "+O+(A?"s":"")}},function(t,r,e){var n=e(404),o=e(176),a=e(89),c=o?function(u,l){return o(u,"toString",{configurable:!0,enumerable:!1,value:n(l),writable:!0})}:a;t.exports=c},function(t,r){function e(n){return function(){return n}}t.exports=e},function(t,r,e){const n=e(195),o=new n;function a(c,u){if(u===void 0)return c;o.has(u)||o.set(u,new n);const l=o.get(u);return l.has(c)||l.set(c,c.bind(u)),l.get(c)}t.exports=a},function(t,r,e){t.exports=function(){var n,o;if(typeof WeakMap!="function")return!1;try{n=new WeakMap([[o={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(n)!=="[object WeakMap]"||typeof n.set!="function"||n.set({},1)!==n||typeof n.delete!="function"||typeof n.has!="function"||n.get(o)!=="one")}},function(t,r,e){var n=e(45),o=e(127),a=e(410),c=e(32),u=e(411),l=e(33),f=e(202),g=e(453),v=e(46).toStringTag,b=e(454),S=Array.isArray,C=Object.defineProperty,O=Object.prototype.hasOwnProperty,A=Object.getPrototypeOf,w;t.exports=w=function(){var V=arguments[0],k;if(!(this instanceof w))throw new TypeError("Constructor requires 'new'");return k=b&&o&&WeakMap!==w?o(new WeakMap,A(this)):this,n(V)&&(S(V)||(V=f(V))),C(k,"__weakMapData__",l("c","$weakMap$"+u())),V&&g(V,function(M){c(M),k.set(M[0],M[1])}),k},b&&(o&&o(w,WeakMap),w.prototype=Object.create(WeakMap.prototype,{constructor:l(w)})),Object.defineProperties(w.prototype,{delete:l(function(V){return O.call(a(V),this.__weakMapData__)?(delete V[this.__weakMapData__],!0):!1}),get:l(function(V){if(O.call(a(V),this.__weakMapData__))return V[this.__weakMapData__]}),has:l(function(V){return O.call(a(V),this.__weakMapData__)}),set:l(function(V,k){return C(a(V),this.__weakMapData__,l("c",k)),this}),toString:l(function(){return"[object WeakMap]"})}),C(w.prototype,v,l("c","WeakMap"))},function(t,r,e){t.exports=function(){}},function(t,r,e){var n=Object.create,o;e(196)()||(o=e(197)),t.exports=function(){var a,c,u;return!o||o.level!==1?n:(a={},c={},u={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(l){if(l==="__proto__"){c[l]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}c[l]=u}),Object.defineProperties(a,c),Object.defineProperty(o,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a}),function(l,f){return n(l===null?a:l,f)})}()},function(t,r,e){var n=e(198);t.exports=function(o){if(!n(o))throw new TypeError(o+" is not an Object");return o}},function(t,r,e){var n=Object.create(null),o=Math.random;t.exports=function(){var a;do a=o().toString(36).slice(2);while(n[a]);return a}},function(t,r,e){var n=e(413);t.exports=function(o){if(typeof o!="function"||!hasOwnProperty.call(o,"length"))return!1;try{if(typeof o.length!="number"||typeof o.call!="function"||typeof o.apply!="function")return!1}catch{return!1}return!n(o)}},function(t,r,e){var n=e(128);t.exports=function(o){if(!n(o))return!1;try{return o.constructor?o.constructor.prototype===o:!1}catch{return!1}}},function(t,r,e){t.exports=function(){var n=Object.assign,o;return typeof n!="function"?!1:(o={foo:"raz"},n(o,{bar:"dwa"},{trzy:"trzy"}),o.foo+o.bar+o.trzy==="razdwatrzy")}},function(t,r,e){var n=e(416),o=e(32),a=Math.max;t.exports=function(c,u){var l,f,g=a(arguments.length,2),v;for(c=Object(o(c)),v=function(b){try{c[b]=u[b]}catch(S){l||(l=S)}},f=1;f<g;++f)u=arguments[f],n(u).forEach(v);if(l!==void 0)throw l;return c}},function(t,r,e){t.exports=e(417)()?Object.keys:e(418)},function(t,r,e){t.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(t,r,e){var n=e(45),o=Object.keys;t.exports=function(a){return o(n(a)?Object(a):a)}},function(t,r,e){var n="razdwatrzy";t.exports=function(){return typeof n.contains!="function"?!1:n.contains("dwa")===!0&&n.contains("foo")===!1}},function(t,r,e){var n=String.prototype.indexOf;t.exports=function(o){return n.call(this,o,arguments[1])>-1}},function(t,r,e){var n=e(127),o=e(201),a=e(33),c=e(46),u=e(204),l=Object.defineProperty,f;f=t.exports=function(g,v){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");u.call(this,g),v?o.call(v,"key+value")?v="key+value":o.call(v,"key")?v="key":v="value":v="value",l(this,"__kind__",a("",v))},n&&n(f,u),delete f.prototype.constructor,f.prototype=Object.create(u.prototype,{_resolve:a(function(g){return this.__kind__==="value"?this.__list__[g]:this.__kind__==="key+value"?[g,this.__list__[g]]:g})}),l(f.prototype,c.toStringTag,a("c","Array Iterator"))},function(t,r,e){var n=e(92),o={object:!0,symbol:!0};t.exports=function(){var a=n.Symbol,c;if(typeof a!="function")return!1;c=a("test symbol");try{String(c)}catch{return!1}return!(!o[typeof a.iterator]||!o[typeof a.toPrimitive]||!o[typeof a.toStringTag])}},function(t,r,e){t.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},function(t,r){var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}()},function(t,r,e){var n=e(33),o=e(203),a=e(92).Symbol,c=e(427),u=e(428),l=e(429),f=Object.create,g=Object.defineProperties,v=Object.defineProperty,b,S,C;if(typeof a=="function")try{String(a()),C=!0}catch{}else a=null;S=function(A){if(this instanceof S)throw new TypeError("Symbol is not a constructor");return b(A)},t.exports=b=function O(A){var w;if(this instanceof O)throw new TypeError("Symbol is not a constructor");return C?a(A):(w=f(S.prototype),A=A===void 0?"":String(A),g(w,{__description__:n("",A),__name__:n("",c(A))}))},u(b),l(b),g(S.prototype,{constructor:n(b),toString:n("",function(){return this.__name__})}),g(b.prototype,{toString:n(function(){return"Symbol ("+o(this).__description__+")"}),valueOf:n(function(){return o(this)})}),v(b.prototype,b.toPrimitive,n("",function(){var O=o(this);return typeof O=="symbol"?O:O.toString()})),v(b.prototype,b.toStringTag,n("c","Symbol")),v(S.prototype,b.toStringTag,n("c",b.prototype[b.toStringTag])),v(S.prototype,b.toPrimitive,n("c",b.prototype[b.toPrimitive]))},function(t,r,e){t.exports=function(n){return n?typeof n=="symbol"?!0:!n.constructor||n.constructor.name!=="Symbol"?!1:n[n.constructor.toStringTag]==="Symbol":!1}},function(t,r,e){var n=e(33),o=Object.create,a=Object.defineProperty,c=Object.prototype,u=o(null);t.exports=function(l){for(var f=0,g,v;u[l+(f||"")];)++f;return l+=f||"",u[l]=!0,g="@@"+l,a(c,g,n.gs(null,function(b){v||(v=!0,a(this,g,n(b)),v=!1)})),g}},function(t,r,e){var n=e(33),o=e(92).Symbol;t.exports=function(a){return Object.defineProperties(a,{hasInstance:n("",o&&o.hasInstance||a("hasInstance")),isConcatSpreadable:n("",o&&o.isConcatSpreadable||a("isConcatSpreadable")),iterator:n("",o&&o.iterator||a("iterator")),match:n("",o&&o.match||a("match")),replace:n("",o&&o.replace||a("replace")),search:n("",o&&o.search||a("search")),species:n("",o&&o.species||a("species")),split:n("",o&&o.split||a("split")),toPrimitive:n("",o&&o.toPrimitive||a("toPrimitive")),toStringTag:n("",o&&o.toStringTag||a("toStringTag")),unscopables:n("",o&&o.unscopables||a("unscopables"))})}},function(t,r,e){var n=e(33),o=e(203),a=Object.create(null);t.exports=function(c){return Object.defineProperties(c,{for:n(function(u){return a[u]?a[u]:a[u]=c(String(u))}),keyFor:n(function(u){var l;o(u);for(l in a)if(a[l]===u)return l})})}},function(t,r,e){var n=e(32);t.exports=function(){return n(this).length=0,this}},function(t,r,e){var n=e(57),o=e(432),a=e(436),c=e(437),u=e(200),l=e(447),f=Function.prototype.bind,g=Object.defineProperty,v=Object.prototype.hasOwnProperty,b;b=function(S,C,O){var A=o(C)&&a(C.value),w;return w=c(C),delete w.writable,delete w.value,w.get=function(){return!O.overwriteDefinition&&v.call(this,S)?A:(C.value=f.call(A,O.resolveContext?O.resolveContext(this):this),g(this,S,C),this[S])},w},t.exports=function(S){var C=u(arguments[1]);return n(C.resolveContext)&&a(C.resolveContext),l(S,function(O,A){return b(A,O,C)})}},function(t,r,e){var n=e(205),o=e(57);t.exports=function(a){return o(a)?a:n(a,"Cannot use %v",arguments[1])}},function(t,r,e){var n=e(57),o=e(128),a=Object.prototype.toString;t.exports=function(c){if(!n(c))return null;if(o(c)){var u=c.toString;if(typeof u!="function"||u===a)return null}try{return""+c}catch{return null}}},function(t,r,e){var n=e(435),o=/[\n\r\u2028\u2029]/g;t.exports=function(a){var c=n(a);return c===null?"<Non-coercible to string value>":(c.length>100&&(c=c.slice(0,99)+""),c=c.replace(o,function(u){switch(u){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),c)}},function(t,r,e){t.exports=function(n){try{return n.toString()}catch{try{return String(n)}catch{return null}}}},function(t,r,e){var n=e(205),o=e(199);t.exports=function(a){return o(a)?a:n(a,"%v is not a plain function",arguments[1])}},function(t,r,e){var n=e(438),o=e(129),a=e(32);t.exports=function(c){var u=Object(a(c)),l=arguments[1],f=Object(arguments[2]);if(u!==c&&!l)return u;var g={};return l?n(l,function(v){(f.ensure||v in c)&&(g[v]=c[v])}):o(g,c),g}},function(t,r,e){t.exports=e(439)()?Array.from:e(440)},function(t,r,e){t.exports=function(){var n=Array.from,o,a;return typeof n!="function"?!1:(o=["raz","dwa"],a=n(o),Boolean(a&&a!==o&&a[1]==="dwa"))}},function(t,r,e){var n=e(46).iterator,o=e(90),a=e(441),c=e(442),u=e(70),l=e(32),f=e(45),g=e(91),v=Array.isArray,b=Function.prototype.call,S={configurable:!0,enumerable:!0,writable:!0,value:null},C=Object.defineProperty;t.exports=function(O){var A=arguments[1],w=arguments[2],V,k,M,W,Y,H,P,j,_,z;if(O=Object(l(O)),f(A)&&u(A),!this||this===Array||!a(this)){if(!A){if(o(O))return Y=O.length,Y!==1?Array.apply(null,O):(W=new Array(1),W[0]=O[0],W);if(v(O)){for(W=new Array(Y=O.length),k=0;k<Y;++k)W[k]=O[k];return W}}W=[]}else V=this;if(!v(O)){if((_=O[n])!==void 0){for(P=u(_).call(O),V&&(W=new V),j=P.next(),k=0;!j.done;)z=A?b.call(A,w,j.value,k):j.value,V?(S.value=z,C(W,k,S)):W[k]=z,j=P.next(),++k;Y=k}else if(g(O)){for(Y=O.length,V&&(W=new V),k=0,M=0;k<Y;++k)z=O[k],k+1<Y&&(H=z.charCodeAt(0),H>=55296&&H<=56319&&(z+=O[++k])),z=A?b.call(A,w,z,M):z,V?(S.value=z,C(W,M,S)):W[M]=z,++M;Y=M}}if(Y===void 0)for(Y=c(O.length),V&&(W=new V(Y)),k=0;k<Y;++k)z=A?b.call(A,w,O[k],k):O[k],V?(S.value=z,C(W,k,S)):W[k]=z;return V&&(S.value=null,W.length=Y),W}},function(t,r,e){var n=Object.prototype.toString,o=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(a){return typeof a=="function"&&o(n.call(a))}},function(t,r,e){var n=e(443),o=Math.max;t.exports=function(a){return o(0,n(a))}},function(t,r,e){var n=e(444),o=Math.abs,a=Math.floor;t.exports=function(c){return isNaN(c)?0:(c=Number(c),c===0||!isFinite(c)?c:n(c)*a(o(c)))}},function(t,r,e){t.exports=e(445)()?Math.sign:e(446)},function(t,r,e){t.exports=function(){var n=Math.sign;return typeof n!="function"?!1:n(10)===1&&n(-20)===-1}},function(t,r,e){t.exports=function(n){return n=Number(n),isNaN(n)||n===0?n:n>0?1:-1}},function(t,r,e){var n=e(70),o=e(448),a=Function.prototype.call;t.exports=function(c,u){var l={},f=arguments[2];return n(u),o(c,function(g,v,b,S){l[v]=a.call(u,f,g,v,b,S)}),l}},function(t,r,e){t.exports=e(449)("forEach")},function(t,r,e){var n=e(70),o=e(32),a=Function.prototype.bind,c=Function.prototype.call,u=Object.keys,l=Object.prototype.propertyIsEnumerable;t.exports=function(f,g){return function(v,b){var S,C=arguments[2],O=arguments[3];return v=Object(o(v)),n(b),S=u(v),O&&S.sort(typeof O=="function"?a.call(O,v):void 0),typeof f!="function"&&(f=S[f]),c.call(f,S,function(A,w){return l.call(v,A)?c.call(b,C,v[A],A,v,w):g})}}},function(t,r,e){var n=e(127),o=e(33),a=e(46),c=e(204),u=Object.defineProperty,l;l=t.exports=function(f){if(!(this instanceof l))throw new TypeError("Constructor requires 'new'");f=String(f),c.call(this,f),u(this,"__length__",o("",f.length))},n&&n(l,c),delete l.prototype.constructor,l.prototype=Object.create(c.prototype,{_next:o(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:o(function(f){var g=this.__list__[f],v;return this.__nextIndex__===this.__length__?g:(v=g.charCodeAt(0),v>=55296&&v<=56319?g+this.__list__[this.__nextIndex__++]:g)})}),u(l.prototype,a.toStringTag,o("c","String Iterator"))},function(t,r,e){var n=e(452);t.exports=function(o){if(!n(o))throw new TypeError(o+" is not iterable");return o}},function(t,r,e){var n=e(90),o=e(45),a=e(91),c=e(46).iterator,u=Array.isArray;t.exports=function(l){return o(l)?u(l)||a(l)||n(l)?!0:typeof l[c]=="function":!1}},function(t,r,e){var n=e(90),o=e(70),a=e(91),c=e(202),u=Array.isArray,l=Function.prototype.call,f=Array.prototype.some;t.exports=function(g,v){var b,S=arguments[2],C,O,A,w,V,k,M;if(u(g)||n(g)?b="array":a(g)?b="string":g=c(g),o(v),O=function(){A=!0},b==="array"){f.call(g,function(W){return l.call(v,S,W,O),A});return}if(b==="string"){for(V=g.length,w=0;w<V&&(k=g[w],w+1<V&&(M=k.charCodeAt(0),M>=55296&&M<=56319&&(k+=g[++w])),l.call(v,S,k,O),!A);++w);return}for(C=g.next();!C.done;){if(l.call(v,S,C.value,O),A)return;C=g.next()}}},function(t,r,e){t.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},function(t,r,e){var n=e(93),o=e(94),a=e(132),c=e(34),u=e(68),l=e(95),f=Math.min;function g(v,b,S){for(var C=S?a:o,O=v[0].length,A=v.length,w=A,V=Array(A),k=1/0,M=[];w--;){var W=v[w];w&&b&&(W=c(W,u(b))),k=f(W.length,k),V[w]=!S&&(b||O>=120&&W.length>=120)?new n(w&&W):void 0}W=v[0];var Y=-1,H=V[0];e:for(;++Y<O&&M.length<k;){var P=W[Y],j=b?b(P):P;if(P=S||P!==0?P:0,!(H?l(H,j):C(M,j,S))){for(w=A;--w;){var _=V[w];if(!(_?l(_,j):C(v[w],j,S)))continue e}H&&H.push(j),M.push(P)}}return M}t.exports=g},function(t,r){var e="__lodash_hash_undefined__";function n(o){return this.__data__.set(o,e),this}t.exports=n},function(t,r){function e(n){return this.__data__.has(n)}t.exports=e},function(t,r,e){var n=e(206),o=e(459),a=e(460);function c(u,l,f){return l===l?a(u,l,f):n(u,o,f)}t.exports=c},function(t,r){function e(n){return n!==n}t.exports=e},function(t,r){function e(n,o,a){for(var c=a-1,u=n.length;++c<u;)if(n[c]===o)return c;return-1}t.exports=e},function(t,r,e){var n=e(133);function o(a){return n(a)?a:[]}t.exports=o},function(t,r,e){(function(n){var o=e(20),a=e(208),c=e(463),u=e(214),l=e(211);function f(v){var b=new c(v),S=a(c.prototype.request,b);return o.extend(S,c.prototype,b),o.extend(S,b),S}var g=f(l);g.Axios=c,g.create=function(b){return f(u(g.defaults,b))},g.Cancel=e(215),g.CancelToken=e(476),g.isCancel=e(210),g.all=function(b){return n.all(b)},g.spread=e(477),g.isAxiosError=e(478),t.exports=g,t.exports.default=g}).call(this,e(1))},function(t,r,e){(function(n){var o=e(20),a=e(209),c=e(464),u=e(465),l=e(214);function f(g){this.defaults=g,this.interceptors={request:new c,response:new c}}f.prototype.request=function(v){typeof v=="string"?(v=arguments[1]||{},v.url=arguments[0]):v=v||{},v=l(this.defaults,v),v.method?v.method=v.method.toLowerCase():this.defaults.method?v.method=this.defaults.method.toLowerCase():v.method="get";var b=[u,void 0],S=n.resolve(v);for(this.interceptors.request.forEach(function(O){b.unshift(O.fulfilled,O.rejected)}),this.interceptors.response.forEach(function(O){b.push(O.fulfilled,O.rejected)});b.length;)S=S.then(b.shift(),b.shift());return S},f.prototype.getUri=function(v){return v=l(this.defaults,v),a(v.url,v.params,v.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],function(v){f.prototype[v]=function(b,S){return this.request(l(S||{},{method:v,url:b,data:(S||{}).data}))}}),o.forEach(["post","put","patch"],function(v){f.prototype[v]=function(b,S,C){return this.request(l(C||{},{method:v,url:b,data:S}))}}),t.exports=f}).call(this,e(1))},function(t,r,e){var n=e(20);function o(){this.handlers=[]}o.prototype.use=function(c,u){return this.handlers.push({fulfilled:c,rejected:u}),this.handlers.length-1},o.prototype.eject=function(c){this.handlers[c]&&(this.handlers[c]=null)},o.prototype.forEach=function(c){n.forEach(this.handlers,function(l){l!==null&&c(l)})},t.exports=o},function(t,r,e){(function(n){var o=e(20),a=e(466),c=e(210),u=e(211);function l(f){f.cancelToken&&f.cancelToken.throwIfRequested()}t.exports=function(g){l(g),g.headers=g.headers||{},g.data=a(g.data,g.headers,g.transformRequest),g.headers=o.merge(g.headers.common||{},g.headers[g.method]||{},g.headers),o.forEach(["delete","get","head","post","put","patch","common"],function(S){delete g.headers[S]});var v=g.adapter||u.adapter;return v(g).then(function(S){return l(g),S.data=a(S.data,S.headers,g.transformResponse),S},function(S){return c(S)||(l(g),S&&S.response&&(S.response.data=a(S.response.data,S.response.headers,g.transformResponse))),n.reject(S)})}}).call(this,e(1))},function(t,r,e){var n=e(20);t.exports=function(a,c,u){return n.forEach(u,function(f){a=f(a,c)}),a}},function(t,r,e){var n=e(20);t.exports=function(a,c){n.forEach(a,function(l,f){f!==c&&f.toUpperCase()===c.toUpperCase()&&(a[c]=l,delete a[f])})}},function(t,r,e){var n=e(213);t.exports=function(a,c,u){var l=u.config.validateStatus;!u.status||!l||l(u.status)?a(u):c(n("Request failed with status code "+u.status,u.config,null,u.request,u))}},function(t,r,e){t.exports=function(o,a,c,u,l){return o.config=a,c&&(o.code=c),o.request=u,o.response=l,o.isAxiosError=!0,o.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},o}},function(t,r,e){var n=e(20);t.exports=n.isStandardBrowserEnv()?function(){return{write:function(c,u,l,f,g,v){var b=[];b.push(c+"="+encodeURIComponent(u)),n.isNumber(l)&&b.push("expires="+new Date(l).toGMTString()),n.isString(f)&&b.push("path="+f),n.isString(g)&&b.push("domain="+g),v===!0&&b.push("secure"),document.cookie=b.join("; ")},read:function(c){var u=document.cookie.match(new RegExp("(^|;\\s*)("+c+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(c){this.write(c,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(t,r,e){var n=e(472),o=e(473);t.exports=function(c,u){return c&&!n(u)?o(c,u):u}},function(t,r,e){t.exports=function(o){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(o)}},function(t,r,e){t.exports=function(o,a){return a?o.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):o}},function(t,r,e){var n=e(20),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(c){var u={},l,f,g;return c&&n.forEach(c.split(`
`),function(b){if(g=b.indexOf(":"),l=n.trim(b.substr(0,g)).toLowerCase(),f=n.trim(b.substr(g+1)),l){if(u[l]&&o.indexOf(l)>=0)return;l==="set-cookie"?u[l]=(u[l]?u[l]:[]).concat([f]):u[l]=u[l]?u[l]+", "+f:f}}),u}},function(t,r,e){var n=e(20);t.exports=n.isStandardBrowserEnv()?function(){var a=/(msie|trident)/i.test(navigator.userAgent),c=document.createElement("a"),u;function l(f){var g=f;return a&&(c.setAttribute("href",g),g=c.href),c.setAttribute("href",g),{href:c.href,protocol:c.protocol?c.protocol.replace(/:$/,""):"",host:c.host,search:c.search?c.search.replace(/^\?/,""):"",hash:c.hash?c.hash.replace(/^#/,""):"",hostname:c.hostname,port:c.port,pathname:c.pathname.charAt(0)==="/"?c.pathname:"/"+c.pathname}}return u=l(window.location.href),function(g){var v=n.isString(g)?l(g):g;return v.protocol===u.protocol&&v.host===u.host}}():function(){return function(){return!0}}()},function(t,r,e){(function(n){var o=e(215);function a(c){if(typeof c!="function")throw new TypeError("executor must be a function.");var u;this.promise=new n(function(g){u=g});var l=this;c(function(g){l.reason||(l.reason=new o(g),u(l.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var u,l=new a(function(g){u=g});return{token:l,cancel:u}},t.exports=a}).call(this,e(1))},function(t,r,e){t.exports=function(o){return function(c){return o.apply(null,c)}}},function(t,r,e){t.exports=function(o){return typeof o=="object"&&o.isAxiosError===!0}},function(t,r,e){var n=e(216),o=n("pick",e(49));o.placeholder=e(134),t.exports=o},function(t,r,e){var n=e(481),o=e(134),a=Array.prototype.push;function c(S,C){return C==2?function(O,A){return S.apply(void 0,arguments)}:function(O){return S.apply(void 0,arguments)}}function u(S,C){return C==2?function(O,A){return S(O,A)}:function(O){return S(O)}}function l(S){for(var C=S?S.length:0,O=Array(C);C--;)O[C]=S[C];return O}function f(S){return function(C){return S({},C)}}function g(S,C){return function(){for(var O=arguments.length,A=O-1,w=Array(O);O--;)w[O]=arguments[O];var V=w[C],k=w.slice(0,C);return V&&a.apply(k,V),C!=A&&a.apply(k,w.slice(C+1)),S.apply(this,k)}}function v(S,C){return function(){var O=arguments.length;if(O){for(var A=Array(O);O--;)A[O]=arguments[O];var w=A[0]=C.apply(void 0,A);return S.apply(void 0,A),w}}}function b(S,C,O,A){var w=typeof C=="function",V=C===Object(C);if(V&&(A=O,O=C,C=void 0),O==null)throw new TypeError;A||(A={});var k={cap:"cap"in A?A.cap:!0,curry:"curry"in A?A.curry:!0,fixed:"fixed"in A?A.fixed:!0,immutable:"immutable"in A?A.immutable:!0,rearg:"rearg"in A?A.rearg:!0},M=w?O:o,W="curry"in A&&A.curry,Y="fixed"in A&&A.fixed,H="rearg"in A&&A.rearg,P=w?O.runInContext():void 0,j=w?O:{ary:S.ary,assign:S.assign,clone:S.clone,curry:S.curry,forEach:S.forEach,isArray:S.isArray,isError:S.isError,isFunction:S.isFunction,isWeakMap:S.isWeakMap,iteratee:S.iteratee,keys:S.keys,rearg:S.rearg,toInteger:S.toInteger,toPath:S.toPath},_=j.ary,z=j.assign,ae=j.clone,me=j.curry,ye=j.forEach,Pe=j.isArray,Te=j.isError,Ue=j.isFunction,_e=j.isWeakMap,je=j.keys,Ke=j.rearg,De=j.toInteger,Ze=j.toPath,tt=je(n.aryMethod),gt={castArray:function(pt){return function(){var ft=arguments[0];return Pe(ft)?pt(l(ft)):pt.apply(void 0,arguments)}},iteratee:function(pt){return function(){var ft=arguments[0],et=arguments[1],it=pt(ft,et),Pt=it.length;return k.cap&&typeof et=="number"?(et=et>2?et-2:1,Pt&&Pt<=et?it:u(it,et)):it}},mixin:function(pt){return function(ft){var et=this;if(!Ue(et))return pt(et,Object(ft));var it=[];return ye(je(ft),function(Pt){Ue(ft[Pt])&&it.push([Pt,et.prototype[Pt]])}),pt(et,Object(ft)),ye(it,function(Pt){var nn=Pt[1];Ue(nn)?et.prototype[Pt[0]]=nn:delete et.prototype[Pt[0]]}),et}},nthArg:function(pt){return function(ft){var et=ft<0?1:De(ft)+1;return me(pt(ft),et)}},rearg:function(pt){return function(ft,et){var it=et?et.length:0;return me(pt(ft,et),it)}},runInContext:function(pt){return function(ft){return b(S,pt(ft),A)}}};function Ee(pt,ft){if(k.cap){var et=n.iterateeRearg[pt];if(et)return Qe(ft,et);var it=!w&&n.iterateeAry[pt];if(it)return Ge(ft,it)}return ft}function Le(pt,ft,et){return W||k.curry&&et>1?me(ft,et):ft}function We(pt,ft,et){if(k.fixed&&(Y||!n.skipFixed[pt])){var it=n.methodSpread[pt],Pt=it&&it.start;return Pt===void 0?_(ft,et):g(ft,Pt)}return ft}function ut(pt,ft,et){return k.rearg&&et>1&&(H||!n.skipRearg[pt])?Ke(ft,n.methodRearg[pt]||n.aryRearg[et]):ft}function bt(pt,ft){ft=Ze(ft);for(var et=-1,it=ft.length,Pt=it-1,nn=ae(Object(pt)),Ut=nn;Ut!=null&&++et<it;){var xt=ft[et],Wt=Ut[xt];Wt!=null&&!(Ue(Wt)||Te(Wt)||_e(Wt))&&(Ut[xt]=ae(et==Pt?Wt:Object(Wt))),Ut=Ut[xt]}return nn}function mt(pt){return Zt.runInContext.convert(pt)(void 0)}function It(pt,ft){var et=n.aliasToReal[pt]||pt,it=n.remap[et]||et,Pt=A;return function(nn){var Ut=w?P:j,xt=w?P[it]:ft,Wt=z(z({},Pt),nn);return b(Ut,et,xt,Wt)}}function Ge(pt,ft){return Et(pt,function(et){return typeof et=="function"?u(et,ft):et})}function Qe(pt,ft){return Et(pt,function(et){var it=ft.length;return c(Ke(u(et,it),ft),it)})}function Et(pt,ft){return function(){var et=arguments.length;if(!et)return pt();for(var it=Array(et);et--;)it[et]=arguments[et];var Pt=k.rearg?0:et-1;return it[Pt]=ft(it[Pt]),pt.apply(void 0,it)}}function Tt(pt,ft,et){var it,Pt=n.aliasToReal[pt]||pt,nn=ft,Ut=gt[Pt];return Ut?nn=Ut(ft):k.immutable&&(n.mutate.array[Pt]?nn=v(ft,l):n.mutate.object[Pt]?nn=v(ft,f(ft)):n.mutate.set[Pt]&&(nn=v(ft,bt))),ye(tt,function(xt){return ye(n.aryMethod[xt],function(Wt){if(Pt==Wt){var tn=n.methodSpread[Pt],mn=tn&&tn.afterRearg;return it=mn?We(Pt,ut(Pt,nn,xt),xt):ut(Pt,We(Pt,nn,xt),xt),it=Ee(Pt,it),it=Le(Pt,it,xt),!1}}),!it}),it||(it=nn),it==ft&&(it=W?me(it,1):function(){return ft.apply(this,arguments)}),it.convert=It(Pt,ft),it.placeholder=ft.placeholder=et,it}if(!V)return Tt(C,O,M);var Zt=O,$t=[];return ye(tt,function(pt){ye(n.aryMethod[pt],function(ft){var et=Zt[n.remap[ft]||ft];et&&$t.push([ft,Tt(ft,et,Zt)])})}),ye(je(Zt),function(pt){var ft=Zt[pt];if(typeof ft=="function"){for(var et=$t.length;et--;)if($t[et][0]==pt)return;ft.convert=It(pt,ft),$t.push([pt,ft])}}),ye($t,function(pt){Zt[pt[0]]=pt[1]}),Zt.convert=mt,Zt.placeholder=Zt,ye(je(Zt),function(pt){ye(n.realToAlias[pt]||[],function(ft){Zt[ft]=Zt[pt]})}),Zt}t.exports=b},function(t,r){r.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},r.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},r.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},r.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},r.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},r.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},r.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},r.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},r.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=r.aliasToReal,o={};for(var a in n){var c=n[a];e.call(o,c)?o[c].push(a):o[c]=[a]}return o}(),r.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},r.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},r.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(t,r,e){t.exports={ary:e(483),assign:e(177),clone:e(39),curry:e(501),forEach:e(115),isArray:e(12),isError:e(502),isFunction:e(18),isWeakMap:e(503),iteratee:e(504),keys:e(118),rearg:e(519),toInteger:e(97),toPath:e(522)}},function(t,r,e){var n=e(135),o=128;function a(c,u,l){return u=l?void 0:u,u=c&&u==null?c.length:u,n(c,o,void 0,void 0,void 0,void 0,u)}t.exports=a},function(t,r,e){var n=e(96),o=e(15),a=1;function c(u,l,f){var g=l&a,v=n(u);function b(){var S=this&&this!==o&&this instanceof b?v:u;return S.apply(g?f:this,arguments)}return b}t.exports=c},function(t,r,e){var n=e(124),o=e(96),a=e(219),c=e(222),u=e(228),l=e(138),f=e(15);function g(v,b,S){var C=o(v);function O(){for(var A=arguments.length,w=Array(A),V=A,k=u(O);V--;)w[V]=arguments[V];var M=A<3&&w[0]!==k&&w[A-1]!==k?[]:l(w,k);if(A-=M.length,A<S)return c(v,b,a,O.placeholder,void 0,w,M,void 0,void 0,S-A);var W=this&&this!==f&&this instanceof O?C:v;return n(W,this,w)}return O}t.exports=g},function(t,r){function e(n,o){for(var a=n.length,c=0;a--;)n[a]===o&&++c;return c}t.exports=e},function(t,r,e){var n=e(136),o=e(223),a=e(488),c=e(490);function u(l){var f=a(l),g=c[f];if(typeof g!="function"||!(f in n.prototype))return!1;if(l===g)return!0;var v=o(g);return!!v&&l===v[0]}t.exports=u},function(t,r,e){var n=e(489),o=Object.prototype,a=o.hasOwnProperty;function c(u){for(var l=u.name+"",f=n[l],g=a.call(n,l)?f.length:0;g--;){var v=f[g],b=v.func;if(b==null||b==u)return v.name}return l}t.exports=c},function(t,r){var e={};t.exports=e},function(t,r,e){var n=e(136),o=e(225),a=e(137),c=e(12),u=e(19),l=e(491),f=Object.prototype,g=f.hasOwnProperty;function v(b){if(u(b)&&!c(b)&&!(b instanceof n)){if(b instanceof o)return b;if(g.call(b,"__wrapped__"))return l(b)}return new o(b)}v.prototype=a.prototype,v.prototype.constructor=v,t.exports=v},function(t,r,e){var n=e(136),o=e(225),a=e(56);function c(u){if(u instanceof n)return u.clone();var l=new o(u.__wrapped__,u.__chain__);return l.__actions__=a(u.__actions__),l.__index__=u.__index__,l.__values__=u.__values__,l}t.exports=c},function(t,r){var e=/\{\n\/\* \[wrapped with (.+)\] \*/,n=/,? & /;function o(a){var c=a.match(e);return c?c[1].split(n):[]}t.exports=o},function(t,r){var e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function n(o,a){var c=a.length;if(!c)return o;var u=c-1;return a[u]=(c>1?"& ":"")+a[u],a=a.join(c>2?", ":" "),o.replace(e,`{
/* [wrapped with `+a+`] */
`)}t.exports=n},function(t,r,e){var n=e(115),o=e(94),a=1,c=2,u=8,l=16,f=32,g=64,v=128,b=256,S=512,C=[["ary",v],["bind",a],["bindKey",c],["curry",u],["curryRight",l],["flip",S],["partial",f],["partialRight",g],["rearg",b]];function O(A,w){return n(C,function(V){var k="_."+V[0];w&V[1]&&!o(A,k)&&A.push(k)}),A.sort()}t.exports=O},function(t,r,e){var n=e(56),o=e(67),a=Math.min;function c(u,l){for(var f=u.length,g=a(l.length,f),v=n(u);g--;){var b=l[g];u[g]=o(b,f)?v[b]:void 0}return u}t.exports=c},function(t,r,e){var n=e(124),o=e(96),a=e(15),c=1;function u(l,f,g,v){var b=f&c,S=o(l);function C(){for(var O=-1,A=arguments.length,w=-1,V=v.length,k=Array(V+A),M=this&&this!==a&&this instanceof C?S:l;++w<V;)k[w]=v[w];for(;A--;)k[w++]=arguments[++O];return n(M,b?g:this,k)}return C}t.exports=u},function(t,r,e){var n=e(220),o=e(221),a=e(138),c="__lodash_placeholder__",u=1,l=2,f=4,g=8,v=128,b=256,S=Math.min;function C(O,A){var w=O[1],V=A[1],k=w|V,M=k<(u|l|v),W=V==v&&w==g||V==v&&w==b&&O[7].length<=A[8]||V==(v|b)&&A[7].length<=A[8]&&w==g;if(!(M||W))return O;V&u&&(O[2]=A[2],k|=w&u?0:f);var Y=A[3];if(Y){var H=O[3];O[3]=H?n(H,Y,A[4]):Y,O[4]=H?a(O[3],c):A[4]}return Y=A[5],Y&&(H=O[5],O[5]=H?o(H,Y,A[6]):Y,O[6]=H?a(O[5],c):A[6]),Y=A[7],Y&&(O[7]=Y),V&v&&(O[8]=O[8]==null?A[8]:S(O[8],A[8])),O[9]==null&&(O[9]=A[9]),O[0]=A[0],O[1]=k,O}t.exports=C},function(t,r,e){var n=e(229),o=1/0,a=17976931348623157e292;function c(u){if(!u)return u===0?u:0;if(u=n(u),u===o||u===-o){var l=u<0?-1:1;return l*a}return u===u?u:0}t.exports=c},function(t,r,e){var n=e(500),o=/^\s+/;function a(c){return c&&c.slice(0,n(c)+1).replace(o,"")}t.exports=a},function(t,r){var e=/\s/;function n(o){for(var a=o.length;a--&&e.test(o.charAt(a)););return a}t.exports=n},function(t,r,e){var n=e(135),o=8;function a(c,u,l){u=l?void 0:u;var f=n(c,o,void 0,void 0,void 0,void 0,void 0,u);return f.placeholder=a.placeholder,f}a.placeholder={},t.exports=a},function(t,r,e){var n=e(30),o=e(19),a=e(139),c="[object DOMException]",u="[object Error]";function l(f){if(!o(f))return!1;var g=n(f);return g==u||g==c||typeof f.message=="string"&&typeof f.name=="string"&&!a(f)}t.exports=l},function(t,r,e){var n=e(43),o=e(19),a="[object WeakMap]";function c(u){return o(u)&&n(u)==a}t.exports=c},function(t,r,e){var n=e(78),o=e(36),a=1;function c(u){return o(typeof u=="function"?u:n(u,a))}t.exports=c},function(t,r,e){var n=e(506),o=e(510),a=e(235);function c(u){var l=o(u);return l.length==1&&l[0][2]?a(l[0][0],l[0][1]):function(f){return f===u||n(f,u,l)}}t.exports=c},function(t,r,e){var n=e(79),o=e(230),a=1,c=2;function u(l,f,g,v){var b=g.length,S=b,C=!v;if(l==null)return!S;for(l=Object(l);b--;){var O=g[b];if(C&&O[2]?O[1]!==l[O[0]]:!(O[0]in l))return!1}for(;++b<S;){O=g[b];var A=O[0],w=l[A],V=O[1];if(C&&O[2]){if(w===void 0&&!(A in l))return!1}else{var k=new n;if(v)var M=v(w,V,A,l,f,k);if(!(M===void 0?o(V,w,a|c,v,k):M))return!1}}return!0}t.exports=u},function(t,r,e){var n=e(79),o=e(231),a=e(508),c=e(509),u=e(43),l=e(12),f=e(66),g=e(86),v=1,b="[object Arguments]",S="[object Array]",C="[object Object]",O=Object.prototype,A=O.hasOwnProperty;function w(V,k,M,W,Y,H){var P=l(V),j=l(k),_=P?S:u(V),z=j?S:u(k);_=_==b?C:_,z=z==b?C:z;var ae=_==C,me=z==C,ye=_==z;if(ye&&f(V)){if(!f(k))return!1;P=!0,ae=!1}if(ye&&!ae)return H||(H=new n),P||g(V)?o(V,k,M,W,Y,H):a(V,k,_,M,W,Y,H);if(!(M&v)){var Pe=ae&&A.call(V,"__wrapped__"),Te=me&&A.call(k,"__wrapped__");if(Pe||Te){var Ue=Pe?V.value():V,_e=Te?k.value():k;return H||(H=new n),Y(Ue,_e,M,W,H)}}return ye?(H||(H=new n),c(V,k,M,W,Y,H)):!1}t.exports=w},function(t,r,e){var n=e(41),o=e(188),a=e(54),c=e(231),u=e(233),l=e(98),f=1,g=2,v="[object Boolean]",b="[object Date]",S="[object Error]",C="[object Map]",O="[object Number]",A="[object RegExp]",w="[object Set]",V="[object String]",k="[object Symbol]",M="[object ArrayBuffer]",W="[object DataView]",Y=n?n.prototype:void 0,H=Y?Y.valueOf:void 0;function P(j,_,z,ae,me,ye,Pe){switch(z){case W:if(j.byteLength!=_.byteLength||j.byteOffset!=_.byteOffset)return!1;j=j.buffer,_=_.buffer;case M:return!(j.byteLength!=_.byteLength||!ye(new o(j),new o(_)));case v:case b:case O:return a(+j,+_);case S:return j.name==_.name&&j.message==_.message;case A:case V:return j==_+"";case C:var Te=u;case w:var Ue=ae&f;if(Te||(Te=l),j.size!=_.size&&!Ue)return!1;var _e=Pe.get(j);if(_e)return _e==_;ae|=g,Pe.set(j,_);var je=c(Te(j),Te(_),ae,me,ye,Pe);return Pe.delete(j),je;case k:if(H)return H.call(j)==H.call(_)}return!1}t.exports=P},function(t,r,e){var n=e(183),o=1,a=Object.prototype,c=a.hasOwnProperty;function u(l,f,g,v,b,S){var C=g&o,O=n(l),A=O.length,w=n(f),V=w.length;if(A!=V&&!C)return!1;for(var k=A;k--;){var M=O[k];if(!(C?M in f:c.call(f,M)))return!1}var W=S.get(l),Y=S.get(f);if(W&&Y)return W==f&&Y==l;var H=!0;S.set(l,f),S.set(f,l);for(var P=C;++k<A;){M=O[k];var j=l[M],_=f[M];if(v)var z=C?v(_,j,M,f,l,S):v(j,_,M,l,f,S);if(!(z===void 0?j===_||b(j,_,g,v,S):z)){H=!1;break}P||(P=M=="constructor")}if(H&&!P){var ae=l.constructor,me=f.constructor;ae!=me&&"constructor"in l&&"constructor"in f&&!(typeof ae=="function"&&ae instanceof ae&&typeof me=="function"&&me instanceof me)&&(H=!1)}return S.delete(l),S.delete(f),H}t.exports=u},function(t,r,e){var n=e(234),o=e(31);function a(c){for(var u=o(c),l=u.length;l--;){var f=u[l],g=c[f];u[l]=[f,g,n(g)]}return u}t.exports=a},function(t,r,e){var n=e(230),o=e(59),a=e(237),c=e(140),u=e(234),l=e(235),f=e(48),g=1,v=2;function b(S,C){return c(S)&&u(C)?l(f(S),C):function(O){var A=o(O,S);return A===void 0&&A===C?a(O,S):n(C,A,g|v)}}t.exports=b},function(t,r,e){var n=e(191),o=500;function a(c){var u=n(c,function(f){return l.size===o&&l.clear(),f}),l=u.cache;return u}t.exports=a},function(t,r,e){var n=e(41),o=e(34),a=e(12),c=e(71),u=1/0,l=n?n.prototype:void 0,f=l?l.toString:void 0;function g(v){if(typeof v=="string")return v;if(a(v))return o(v,g)+"";if(c(v))return f?f.call(v):"";var b=v+"";return b=="0"&&1/v==-u?"-0":b}t.exports=g},function(t,r){function e(n,o){return n!=null&&o in Object(n)}t.exports=e},function(t,r,e){var n=e(60),o=e(65),a=e(12),c=e(67),u=e(116),l=e(48);function f(g,v,b){v=n(v,g);for(var S=-1,C=v.length,O=!1;++S<C;){var A=l(v[S]);if(!(O=g!=null&&b(g,A)))break;g=g[A]}return O||++S!=C?O:(C=g==null?0:g.length,!!C&&u(C)&&c(A,C)&&(a(g)||o(g)))}t.exports=f},function(t,r,e){var n=e(517),o=e(518),a=e(140),c=e(48);function u(l){return a(l)?n(c(l)):o(l)}t.exports=u},function(t,r){function e(n){return function(o){return o==null?void 0:o[n]}}t.exports=e},function(t,r,e){var n=e(99);function o(a){return function(c){return n(c,a)}}t.exports=o},function(t,r,e){var n=e(135),o=e(141),a=256,c=o(function(u,l){return n(u,a,void 0,void 0,void 0,l)});t.exports=c},function(t,r,e){var n=e(238);function o(a){var c=a==null?0:a.length;return c?n(a,1):[]}t.exports=o},function(t,r,e){var n=e(41),o=e(65),a=e(12),c=n?n.isConcatSpreadable:void 0;function u(l){return a(l)||o(l)||!!(c&&l&&l[c])}t.exports=u},function(t,r,e){var n=e(34),o=e(56),a=e(12),c=e(71),u=e(236),l=e(48),f=e(61);function g(v){return a(v)?n(v,l):c(v)?[v]:o(u(f(v)))}t.exports=g},function(t,r,e){var n=e(524),o=e(237);function a(c,u){return n(c,u,function(l,f){return o(c,f)})}t.exports=a},function(t,r,e){var n=e(99),o=e(525),a=e(60);function c(u,l,f){for(var g=-1,v=l.length,b={};++g<v;){var S=l[g],C=n(u,S);f(C,S)&&o(b,a(S,u),C)}return b}t.exports=c},function(t,r,e){var n=e(84),o=e(60),a=e(67),c=e(11),u=e(48);function l(f,g,v,b){if(!c(f))return f;g=o(g,f);for(var S=-1,C=g.length,O=C-1,A=f;A!=null&&++S<C;){var w=u(g[S]),V=v;if(w==="__proto__"||w==="constructor"||w==="prototype")return f;if(S!=O){var k=A[w];V=b?b(k,w,A):void 0,V===void 0&&(V=c(k)?k:a(g[S+1])?[]:{})}n(A,w,V),A=A[w]}return f}t.exports=l},function(t,r,e){var n=e(216),o=n("mapKeys",e(527));o.placeholder=e(134),t.exports=o},function(t,r,e){var n=e(64),o=e(100),a=e(36);function c(u,l){var f={};return l=a(l,3),o(u,function(g,v,b){n(f,l(g,v,b),g)}),f}t.exports=c},function(t,r){function e(n){return function(o,a,c){for(var u=-1,l=Object(o),f=c(o),g=f.length;g--;){var v=f[n?g:++u];if(a(l[v],v,l)===!1)break}return o}}t.exports=e},function(t,r,e){(function(n){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(a){r&&r.nodeType,n&&n.nodeType;var c=typeof(typeof window!==void 0?window:commonjsGlobal)=="object"&&(typeof window!==void 0?window:commonjsGlobal);c.global===c||c.window===c||c.self;var u,l=2147483647,f=36,g=1,v=26,b=38,S=700,C=72,O=128,A="-",w=/^xn--/,V=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},W=f-g,Y=Math.floor,H=String.fromCharCode;function P(Ke){throw new RangeError(M[Ke])}function j(Ke,De){for(var Ze=Ke.length,tt=[];Ze--;)tt[Ze]=De(Ke[Ze]);return tt}function _(Ke,De){var Ze=Ke.split("@"),tt="";Ze.length>1&&(tt=Ze[0]+"@",Ke=Ze[1]),Ke=Ke.replace(k,".");var gt=Ke.split("."),Ee=j(gt,De).join(".");return tt+Ee}function z(Ke){for(var De=[],Ze=0,tt=Ke.length,gt,Ee;Ze<tt;)gt=Ke.charCodeAt(Ze++),gt>=55296&&gt<=56319&&Ze<tt?(Ee=Ke.charCodeAt(Ze++),(Ee&64512)==56320?De.push(((gt&1023)<<10)+(Ee&1023)+65536):(De.push(gt),Ze--)):De.push(gt);return De}function ae(Ke){return j(Ke,function(De){var Ze="";return De>65535&&(De-=65536,Ze+=H(De>>>10&1023|55296),De=56320|De&1023),Ze+=H(De),Ze}).join("")}function me(Ke){return Ke-48<10?Ke-22:Ke-65<26?Ke-65:Ke-97<26?Ke-97:f}function ye(Ke,De){return Ke+22+75*(Ke<26)-((De!=0)<<5)}function Pe(Ke,De,Ze){var tt=0;for(Ke=Ze?Y(Ke/S):Ke>>1,Ke+=Y(Ke/De);Ke>W*v>>1;tt+=f)Ke=Y(Ke/W);return Y(tt+(W+1)*Ke/(Ke+b))}function Te(Ke){var De=[],Ze=Ke.length,tt,gt=0,Ee=O,Le=C,We,ut,bt,mt,It,Ge,Qe,Et,Tt;for(We=Ke.lastIndexOf(A),We<0&&(We=0),ut=0;ut<We;++ut)Ke.charCodeAt(ut)>=128&&P("not-basic"),De.push(Ke.charCodeAt(ut));for(bt=We>0?We+1:0;bt<Ze;){for(mt=gt,It=1,Ge=f;bt>=Ze&&P("invalid-input"),Qe=me(Ke.charCodeAt(bt++)),(Qe>=f||Qe>Y((l-gt)/It))&&P("overflow"),gt+=Qe*It,Et=Ge<=Le?g:Ge>=Le+v?v:Ge-Le,!(Qe<Et);Ge+=f)Tt=f-Et,It>Y(l/Tt)&&P("overflow"),It*=Tt;tt=De.length+1,Le=Pe(gt-mt,tt,mt==0),Y(gt/tt)>l-Ee&&P("overflow"),Ee+=Y(gt/tt),gt%=tt,De.splice(gt++,0,Ee)}return ae(De)}function Ue(Ke){var De,Ze,tt,gt,Ee,Le,We,ut,bt,mt,It,Ge=[],Qe,Et,Tt,Zt;for(Ke=z(Ke),Qe=Ke.length,De=O,Ze=0,Ee=C,Le=0;Le<Qe;++Le)It=Ke[Le],It<128&&Ge.push(H(It));for(tt=gt=Ge.length,gt&&Ge.push(A);tt<Qe;){for(We=l,Le=0;Le<Qe;++Le)It=Ke[Le],It>=De&&It<We&&(We=It);for(Et=tt+1,We-De>Y((l-Ze)/Et)&&P("overflow"),Ze+=(We-De)*Et,De=We,Le=0;Le<Qe;++Le)if(It=Ke[Le],It<De&&++Ze>l&&P("overflow"),It==De){for(ut=Ze,bt=f;mt=bt<=Ee?g:bt>=Ee+v?v:bt-Ee,!(ut<mt);bt+=f)Zt=ut-mt,Tt=f-mt,Ge.push(H(ye(mt+Zt%Tt,0))),ut=Y(Zt/Tt);Ge.push(H(ye(ut,0))),Ee=Pe(Ze,Et,tt==gt),Ze=0,++tt}++Ze,++De}return Ge.join("")}function _e(Ke){return _(Ke,function(De){return w.test(De)?Te(De.slice(4).toLowerCase()):De})}function je(Ke){return _(Ke,function(De){return V.test(De)?"xn--"+Ue(De):De})}u={version:"1.4.1",ucs2:{decode:z,encode:ae},decode:Te,encode:Ue,toASCII:je,toUnicode:_e},o=function(){return u}.call(r,e,r,n),o!==void 0&&(n.exports=o)})()}).call(this,e(85)(t))},function(t,r,e){t.exports={isString:function(n){return typeof n=="string"},isObject:function(n){return typeof n=="object"&&n!==null},isNull:function(n){return n===null},isNullOrUndefined:function(n){return n==null}}},function(t,r,e){r.decode=r.parse=e(532),r.encode=r.stringify=e(533)},function(t,r,e){function n(a,c){return Object.prototype.hasOwnProperty.call(a,c)}t.exports=function(a,c,u,l){c=c||"&",u=u||"=";var f={};if(typeof a!="string"||a.length===0)return f;var g=/\+/g;a=a.split(c);var v=1e3;l&&typeof l.maxKeys=="number"&&(v=l.maxKeys);var b=a.length;v>0&&b>v&&(b=v);for(var S=0;S<b;++S){var C=a[S].replace(g,"%20"),O=C.indexOf(u),A,w,V,k;O>=0?(A=C.substr(0,O),w=C.substr(O+1)):(A=C,w=""),V=decodeURIComponent(A),k=decodeURIComponent(w),n(f,V)?o(f[V])?f[V].push(k):f[V]=[f[V],k]:f[V]=k}return f};var o=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"}},function(t,r,e){var n=function(u){switch(typeof u){case"string":return u;case"boolean":return u?"true":"false";case"number":return isFinite(u)?u:"";default:return""}};t.exports=function(u,l,f,g){return l=l||"&",f=f||"=",u===null&&(u=void 0),typeof u=="object"?a(c(u),function(v){var b=encodeURIComponent(n(v))+f;return o(u[v])?a(u[v],function(S){return b+encodeURIComponent(n(S))}).join(l):b+encodeURIComponent(n(u[v]))}).join(l):g?encodeURIComponent(n(g))+f+encodeURIComponent(n(u)):""};var o=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function a(u,l){if(u.map)return u.map(l);for(var f=[],g=0;g<u.length;g++)f.push(l(u[g],g));return f}var c=Object.keys||function(u){var l=[];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&l.push(f);return l}},function(t,r,e){var n=function(){return this||typeof self=="object"&&self}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,a=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e(535),o)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime}catch{n.regeneratorRuntime=void 0}},function(t,r,e){(function(n){(function(o){var a=Object.prototype,c=a.hasOwnProperty,u,l=typeof Symbol=="function"?Symbol:{},f=l.iterator||"@@iterator",g=l.asyncIterator||"@@asyncIterator",v=l.toStringTag||"@@toStringTag",b=typeof t=="object",S=o.regeneratorRuntime;if(S){b&&(t.exports=S);return}S=o.regeneratorRuntime=b?t.exports:{};function C(De,Ze,tt,gt){var Ee=Ze&&Ze.prototype instanceof W?Ze:W,Le=Object.create(Ee.prototype),We=new _e(gt||[]);return Le._invoke=ye(De,tt,We),Le}S.wrap=C;function O(De,Ze,tt){try{return{type:"normal",arg:De.call(Ze,tt)}}catch(gt){return{type:"throw",arg:gt}}}var A="suspendedStart",w="suspendedYield",V="executing",k="completed",M={};function W(){}function Y(){}function H(){}var P={};P[f]=function(){return this};var j=Object.getPrototypeOf,_=j&&j(j(je([])));_&&_!==a&&c.call(_,f)&&(P=_);var z=H.prototype=W.prototype=Object.create(P);Y.prototype=z.constructor=H,H.constructor=Y,H[v]=Y.displayName="GeneratorFunction";function ae(De){["next","throw","return"].forEach(function(Ze){De[Ze]=function(tt){return this._invoke(Ze,tt)}})}S.isGeneratorFunction=function(De){var Ze=typeof De=="function"&&De.constructor;return Ze?Ze===Y||(Ze.displayName||Ze.name)==="GeneratorFunction":!1},S.mark=function(De){return Object.setPrototypeOf?Object.setPrototypeOf(De,H):(De.__proto__=H,v in De||(De[v]="GeneratorFunction")),De.prototype=Object.create(z),De},S.awrap=function(De){return{__await:De}};function me(De){function Ze(Ee,Le,We,ut){var bt=O(De[Ee],De,Le);if(bt.type==="throw")ut(bt.arg);else{var mt=bt.arg,It=mt.value;return It&&typeof It=="object"&&c.call(It,"__await")?n.resolve(It.__await).then(function(Ge){Ze("next",Ge,We,ut)},function(Ge){Ze("throw",Ge,We,ut)}):n.resolve(It).then(function(Ge){mt.value=Ge,We(mt)},function(Ge){return Ze("throw",Ge,We,ut)})}}var tt;function gt(Ee,Le){function We(){return new n(function(ut,bt){Ze(Ee,Le,ut,bt)})}return tt=tt?tt.then(We,We):We()}this._invoke=gt}ae(me.prototype),me.prototype[g]=function(){return this},S.AsyncIterator=me,S.async=function(De,Ze,tt,gt){var Ee=new me(C(De,Ze,tt,gt));return S.isGeneratorFunction(Ze)?Ee:Ee.next().then(function(Le){return Le.done?Le.value:Ee.next()})};function ye(De,Ze,tt){var gt=A;return function(Le,We){if(gt===V)throw new Error("Generator is already running");if(gt===k){if(Le==="throw")throw We;return Ke()}for(tt.method=Le,tt.arg=We;;){var ut=tt.delegate;if(ut){var bt=Pe(ut,tt);if(bt){if(bt===M)continue;return bt}}if(tt.method==="next")tt.sent=tt._sent=tt.arg;else if(tt.method==="throw"){if(gt===A)throw gt=k,tt.arg;tt.dispatchException(tt.arg)}else tt.method==="return"&&tt.abrupt("return",tt.arg);gt=V;var mt=O(De,Ze,tt);if(mt.type==="normal"){if(gt=tt.done?k:w,mt.arg===M)continue;return{value:mt.arg,done:tt.done}}else mt.type==="throw"&&(gt=k,tt.method="throw",tt.arg=mt.arg)}}}function Pe(De,Ze){var tt=De.iterator[Ze.method];if(tt===u){if(Ze.delegate=null,Ze.method==="throw"){if(De.iterator.return&&(Ze.method="return",Ze.arg=u,Pe(De,Ze),Ze.method==="throw"))return M;Ze.method="throw",Ze.arg=new TypeError("The iterator does not provide a 'throw' method")}return M}var gt=O(tt,De.iterator,Ze.arg);if(gt.type==="throw")return Ze.method="throw",Ze.arg=gt.arg,Ze.delegate=null,M;var Ee=gt.arg;if(!Ee)return Ze.method="throw",Ze.arg=new TypeError("iterator result is not an object"),Ze.delegate=null,M;if(Ee.done)Ze[De.resultName]=Ee.value,Ze.next=De.nextLoc,Ze.method!=="return"&&(Ze.method="next",Ze.arg=u);else return Ee;return Ze.delegate=null,M}ae(z),z[v]="Generator",z[f]=function(){return this},z.toString=function(){return"[object Generator]"};function Te(De){var Ze={tryLoc:De[0]};1 in De&&(Ze.catchLoc=De[1]),2 in De&&(Ze.finallyLoc=De[2],Ze.afterLoc=De[3]),this.tryEntries.push(Ze)}function Ue(De){var Ze=De.completion||{};Ze.type="normal",delete Ze.arg,De.completion=Ze}function _e(De){this.tryEntries=[{tryLoc:"root"}],De.forEach(Te,this),this.reset(!0)}S.keys=function(De){var Ze=[];for(var tt in De)Ze.push(tt);return Ze.reverse(),function gt(){for(;Ze.length;){var Ee=Ze.pop();if(Ee in De)return gt.value=Ee,gt.done=!1,gt}return gt.done=!0,gt}};function je(De){if(De){var Ze=De[f];if(Ze)return Ze.call(De);if(typeof De.next=="function")return De;if(!isNaN(De.length)){var tt=-1,gt=function Ee(){for(;++tt<De.length;)if(c.call(De,tt))return Ee.value=De[tt],Ee.done=!1,Ee;return Ee.value=u,Ee.done=!0,Ee};return gt.next=gt}}return{next:Ke}}S.values=je;function Ke(){return{value:u,done:!0}}_e.prototype={constructor:_e,reset:function(De){if(this.prev=0,this.next=0,this.sent=this._sent=u,this.done=!1,this.delegate=null,this.method="next",this.arg=u,this.tryEntries.forEach(Ue),!De)for(var Ze in this)Ze.charAt(0)==="t"&&c.call(this,Ze)&&!isNaN(+Ze.slice(1))&&(this[Ze]=u)},stop:function(){this.done=!0;var De=this.tryEntries[0],Ze=De.completion;if(Ze.type==="throw")throw Ze.arg;return this.rval},dispatchException:function(De){if(this.done)throw De;var Ze=this;function tt(bt,mt){return Le.type="throw",Le.arg=De,Ze.next=bt,mt&&(Ze.method="next",Ze.arg=u),!!mt}for(var gt=this.tryEntries.length-1;gt>=0;--gt){var Ee=this.tryEntries[gt],Le=Ee.completion;if(Ee.tryLoc==="root")return tt("end");if(Ee.tryLoc<=this.prev){var We=c.call(Ee,"catchLoc"),ut=c.call(Ee,"finallyLoc");if(We&&ut){if(this.prev<Ee.catchLoc)return tt(Ee.catchLoc,!0);if(this.prev<Ee.finallyLoc)return tt(Ee.finallyLoc)}else if(We){if(this.prev<Ee.catchLoc)return tt(Ee.catchLoc,!0)}else if(ut){if(this.prev<Ee.finallyLoc)return tt(Ee.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(De,Ze){for(var tt=this.tryEntries.length-1;tt>=0;--tt){var gt=this.tryEntries[tt];if(gt.tryLoc<=this.prev&&c.call(gt,"finallyLoc")&&this.prev<gt.finallyLoc){var Ee=gt;break}}Ee&&(De==="break"||De==="continue")&&Ee.tryLoc<=Ze&&Ze<=Ee.finallyLoc&&(Ee=null);var Le=Ee?Ee.completion:{};return Le.type=De,Le.arg=Ze,Ee?(this.method="next",this.next=Ee.finallyLoc,M):this.complete(Le)},complete:function(De,Ze){if(De.type==="throw")throw De.arg;return De.type==="break"||De.type==="continue"?this.next=De.arg:De.type==="return"?(this.rval=this.arg=De.arg,this.method="return",this.next="end"):De.type==="normal"&&Ze&&(this.next=Ze),M},finish:function(De){for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var tt=this.tryEntries[Ze];if(tt.finallyLoc===De)return this.complete(tt.completion,tt.afterLoc),Ue(tt),M}},catch:function(De){for(var Ze=this.tryEntries.length-1;Ze>=0;--Ze){var tt=this.tryEntries[Ze];if(tt.tryLoc===De){var gt=tt.completion;if(gt.type==="throw"){var Ee=gt.arg;Ue(tt)}return Ee}}throw new Error("illegal catch attempt")},delegateYield:function(De,Ze,tt){return this.delegate={iterator:je(De),resultName:Ze,nextLoc:tt},this.method==="next"&&(this.arg=u),M}}})(function(){return this||typeof self=="object"&&self}()||Function("return this")())}).call(this,e(1))},function(t,r,e){var n=e(242),o=e(243),a,c,u=0,l=0;function f(g,v,b){var S=v&&b||0,C=v||[];g=g||{};var O=g.node||a,A=g.clockseq!==void 0?g.clockseq:c;if(O==null||A==null){var w=n();O==null&&(O=a=[w[0]|1,w[1],w[2],w[3],w[4],w[5]]),A==null&&(A=c=(w[6]<<8|w[7])&16383)}var V=g.msecs!==void 0?g.msecs:new Date().getTime(),k=g.nsecs!==void 0?g.nsecs:l+1,M=V-u+(k-l)/1e4;if(M<0&&g.clockseq===void 0&&(A=A+1&16383),(M<0||V>u)&&g.nsecs===void 0&&(k=0),k>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=V,l=k,c=A,V+=122192928e5;var W=((V&268435455)*1e4+k)%4294967296;C[S++]=W>>>24&255,C[S++]=W>>>16&255,C[S++]=W>>>8&255,C[S++]=W&255;var Y=V/4294967296*1e4&268435455;C[S++]=Y>>>8&255,C[S++]=Y&255,C[S++]=Y>>>24&15|16,C[S++]=Y>>>16&255,C[S++]=A>>>8|128,C[S++]=A&255;for(var H=0;H<6;++H)C[S+H]=O[H];return v||o(C)}t.exports=f},function(t,r,e){var n=e(242),o=e(243);function a(c,u,l){var f=u&&l||0;typeof c=="string"&&(u=c==="binary"?new Array(16):null,c=null),c=c||{};var g=c.random||(c.rng||n)();if(g[6]=g[6]&15|64,g[8]=g[8]&63|128,u)for(var v=0;v<16;++v)u[f+v]=g[v];return u||o(g)}t.exports=a},function(t,r,e){var n=e(0),o=n(e(16));const a=e(9),c=e(2)("analytics"),u=e(539),l=e(17),f=e(244),g=e(101),v=g.prependProxyToUrlIfNeeded,b=e(102),S=b.getProxyUrl,C=l(),O=new u;t.exports=function(w){var V=this;let k=w.loggingUrl,M=w.queue,W=M===void 0?O:M,Y=w.ajax,H=Y===void 0?f:Y;this.loggingUrl=k,this.updateEndPoints=()=>{if(!this.proxyUrl){this.proxyUrl=S();const z=v(this.loggingUrl,this.proxyUrl);this.loggingUrl=z}this.endPoint=`${this.loggingUrl}/logging/ClientEvent`,this.endPointQos=`${this.loggingUrl}/logging/ClientQos`},this.updateEndPoints();const P={},j=function(ae,me,ye){me===void 0&&(me=()=>{}),W.add(Pe=>{c.debug("sending analytics:",V.loggingUrl,ae),H.post(ye?V.endPointQos:V.endPoint,{body:ae,overrideMimeType:"text/plain",headers:{Accept:"text/plain","Content-Type":"application/json"}},Te=>{Te&&c.debug("Failed to send ClientEvent, moving on to the next item."),me(Te||void 0),Pe()})})},_=(z,ae,me)=>{if(!me)return!1;const ye=[me,ae,z].join("_"),Pe=100;return(P[ye]||0)>=Pe};this.logError=function(z,ae,me,ye,Pe){ye===void 0&&(ye=null),Pe===void 0&&(Pe={});const Te=Pe,Ue=Te.partnerId;if(_(z,ae,Ue))return;const _e=[Ue,ae,z].join("_"),je=ye;P[_e]=typeof P[_e]<"u"?P[_e]+1:1,V.logEvent(a(Pe,{action:`${ae}.${z}`,payload:je}),!1)},this.logEvent=function(z,ae,me,ye){ae===void 0&&(ae=!1),ye===void 0&&(ye=()=>{}),V.updateEndPoints();const Pe=(0,o.default)({},z,{clientInstanceId:C});if(me&&!isNaN(me)&&Math.random()>me){c.debug("skipping sending analytics due to throttle:",Pe);return}c.debug("queueing analytics:",V.loggingUrl,Pe);let Te;try{Te=JSON.stringify(Pe)}catch(Ue){ye(Ue);return}j(Te,ye,ae)},this.logQOS=z=>this.logEvent(z,!0)}},function(t,r,e){var n=e(0),o=n(e(14));let a=function(){function c(l){let f=l===void 0?{}:l,g=f.waitTime,v=g===void 0?50:g;(0,o.default)(this,"queue",[]),(0,o.default)(this,"running",!1),this.waitTime=v}var u=c.prototype;return u.add=function(f){this.queue.push(f),this.run()},u.run=function(){if(this.running)return;this.running=!0;const f=()=>{if(this.queue.length===0){this.running=!1;return}this.queue.shift()(()=>{setTimeout(f,this.waitTime)})};f()},c}();t.exports=a},function(t,r,e){const n=e(11),o={for:"htmlFor",class:"className"};t.exports=function(a){a.prototype.attr=function(l,f){if(n(l)){let g;Object.keys(l).forEach(v=>{g=o[v]||v,this.first.setAttribute(g,l[v])})}else{if(f===void 0)return this.first.getAttribute(o[l]||l);this.first.setAttribute(o[l]||l,f)}return this},a.prototype.removeAttr=function(l){const f=o[l]||l;return this.forEach(g=>{g.removeAttribute(f)}),this},a.prototype.html=function(l){return l!==void 0&&(this.first.innerHTML=l),this.first.innerHTML},a.prototype.center=function(l,f){let g;return this.forEach(v=>{g=new a(v),l=l||parseInt(g.width(),10),f=f||parseInt(g.height(),10);const b=`${-.5*l}px`,S=`${-.5*f}px`;g.css("margin",`${S} 0 0 ${b}`).addClass("OT_centered")}),this},a._attachToOTHelpers.centerElement=function(l,f,g){return new a(l).center(f,g)};const c=function(f){return f.offsetWidth>0?`${f.offsetWidth}px`:new a(f).css("width")},u=function(f){return f.offsetHeight>0?`${f.offsetHeight}px`:new a(f).css("height")};a.prototype.width=function(l){return l?(this.css("width",l),this):this.isDisplayNone()?this.makeVisibleAndYield(f=>c(f))[0]:c(this.get(0))},a._attachToOTHelpers.width=function(l,f){const g=new a(l).width(f);return f?a._attachToOTHelpers:g},a.prototype.height=function(l){return l?(this.css("height",l),this):this.isDisplayNone()?this.makeVisibleAndYield(f=>u(f))[0]:u(this.get(0))},a._attachToOTHelpers.height=function(l,f){const g=new a(l).height(f);return f?a._attachToOTHelpers:g}}},function(t,r,e){const n=e(3),o=(typeof window!==void 0?window:commonjsGlobal).getComputedStyle,a={Firefox:"moz",Opera:"O",Chrome:"Webkit",Safari:"Webkit"};function c(){return a[n.name]}t.exports=function(u,l){const f={},g={},v=function(k){if(g[k.ownerDocument]&&g[k.ownerDocument][k.nodeName])return g[k.ownerDocument][k.nodeName];g[k.ownerDocument]||(g[k.ownerDocument]={});let M=k.ownerDocument.createElement(k.nodeName),W;return k.ownerDocument.body.appendChild(M),W=new u(M).css("display"),g[k.ownerDocument][k.nodeName]=W,new u(M).remove(),M=null,W},b=function(k){return o(k).getPropertyValue("display")==="none"},S=function(k,M){if(M in k.style)return M;const Y=c()+M[0].toUpperCase()+M.slice(1);return Y in k.style?Y:M},C=function(k,M){const W=k.style;for(const Y in M)M.hasOwnProperty(Y)&&(W[S(k,Y)]=M[Y])},O=function(k,M,W){k.style[S(k,M)]=W},A=function(k,M){const W=S(k,M);let H=o(k).getPropertyValue(W);return H===""&&(H=k.style[W]),H},w=function(k,M,W){const Y=new u(k),H={};let P,j;for(P in M)M.hasOwnProperty(P)&&(H[P]=k.style[P],Y.css(P,M[P]));j=W(k);for(P in M)M.hasOwnProperty(P)&&Y.css(P,H[P]||"");return j};u.prototype.show=function(){return this.forEach(V=>{const k=V.style.display;(k===""||k==="none")&&(V.style.display=f[V]||"",delete f[V]),b(V)&&(f[V]="none",V.style.display=v(V))})},u.prototype.hide=function(){return this.forEach(V=>{V.style.display!=="none"&&(f[V]=V.style.display,V.style.display="none")})},u.prototype.css=function(V,k){if(this.length!==0)return typeof V!="string"?this.forEach(M=>{C(M,V)}):k!==void 0?this.forEach(M=>{O(M,V,k)}):A(this.first,V)},u.prototype.makeVisibleAndYield=function(V){const k={display:"block",visibility:"hidden"},M=[];return this.forEach(W=>{const Y=l(W);Y?M.push(w(Y,k,V)):M.push(void 0)}),M}}},function(t,r,e){(function(n){const o=e(543),a=o.isiPhone,c=o.isiPad,u=o.isiOS,l=e(544),f=e(545),g=w=>{var V,k;return w=w||((V=typeof window!==void 0?window:commonjsGlobal)==null?void 0:V.navigator),((k=w)==null?void 0:k.userAgent.toLowerCase().indexOf("electron"))>=0},v=()=>{var w,V,k;return typeof((w=typeof window!==void 0?window:commonjsGlobal)==null||(V=w.process)==null||(k=V.versions)==null?void 0:k.node)=="string"&&!g()};let b;const S=()=>{b={version:-1,name:"unknown"}},C=()=>{b.name="Node",b.isNode=!0,b.version=parseInt(n.versions.node,10),b.userAgent=`${b.name} ${b.version}`},O=w=>{if(w=w||(typeof window!==void 0?window:commonjsGlobal).navigator,b.userAgent=w.userAgent.toLowerCase(),b.name="unknown",b.userAgent.indexOf("opera")>-1||b.userAgent.indexOf("opr/")>-1)b.name="Opera",b.isOpera=!0,/opr\/([0-9]{1,}[.0-9]{0,})/.exec(b.userAgent)!==null&&(b.version=parseFloat(RegExp.$1));else if(b.userAgent.indexOf("firefox")>-1)b.name="Firefox",b.isFirefox=!0,/firefox\/([0-9]{1,}[.0-9]{0,})/.exec(b.userAgent)!==null&&(b.version=parseFloat(RegExp.$1));else if(b.userAgent.match(/edge?\/(\d+)(?:\.\d+)+$/)){b.name="Edge",b.isEdge=!0;const V=RegExp.$1;b.version=parseInt(V,10)}else b.userAgent.indexOf("chrome")>-1?(b.name="Chrome",b.isElectron=g(w),b.isElectron?b.electronVersion=f(w.userAgent):b.isChrome=!0,/chrome\/([0-9]{1,}[.0-9]{0,})/.exec(b.userAgent)!==null&&(b.version=parseFloat(RegExp.$1))):w.vendor&&w.vendor.toLowerCase().indexOf("apple")>-1?(b.name="Safari",b.isSafari=!0,b.isiPhone=a(w.userAgent),b.isiPad=c(w.userAgent),b.isiOS=u(w.userAgent),b.isiOS&&(b.iOSVersion=l(w.userAgent)),(/version\/([0-9]{1,}[.0-9]{0,})/.exec(b.userAgent)!==null||/fxios\/([0-9]{1,}[.0-9]{0,})/.exec(b.userAgent)!==null||/crios\/([0-9]{1,}[.0-9]{0,})/.exec(b.userAgent)!==null)&&(b.version=parseFloat(RegExp.$1))):b.userAgent.indexOf("applewebkit")>-1&&b.userAgent.indexOf("version")===-1&&(b.isIosWebView=!0);b.isChromiumEdge=b.name==="Edge"&&b.version>=79,b.isLegacyEdge=b.name==="Edge"&&b.version<79,b.isLegacyElectron=b.isElectron&&b.electronVersion<7,b.isLegacyChrome=b.isChrome&&b.version<87,b.isChromium=!!(b.isChrome||b.isChromiumEdge||b.isElectron||b.isOpera),b.isAndroid=b.userAgent.indexOf("android")>-1,b.userAgent=w.userAgent,b.protocol=location.protocol,b.hostName=location.hostName,(b.version===-1||b.name==="unknown"||b.isiOS&&!b.iOSVersion)&&(b.error=!0)},A=w=>(S(),v()?C():O(w),b);t.exports={parse:A,isNode:v}}).call(this,e(44))},function(t,r,e){const n=u=>/iPhone/.test(u),o=u=>{try{return u.includes("Mac")&&"ontouchend"in document}catch{return!1}},a=u=>/iPad/.test(u)||o(u),c=u=>n(u)||a(u);t.exports={isiPhone:n,isiPad:a,isiOS:c}},function(t,r,e){t.exports=function(o){const a=o.match(/OS (\d+_\d+).* like Mac/);if(!(a===null||!a[1]))return parseFloat(a[1].replace("_","."))}},function(t,r,e){const n=/(Electron)\/([0-9]{1,}[.0-9]{0,})/;t.exports=o=>{const a=o.match(n);return a&&parseFloat(a[2])}},function(t,r,e){const n=e(547);function o(l,f){return f?n()?l.classList.contains(f):l.className.indexOf(f)>-1:!1}function a(l,f){if(!f||f.length===0||l.nodeType!==1)return;const g=f.length;let v=0;if(n()){for(;v<g;++v)l.classList.toggle(f[v]);return}let b=` ${l.className} `.replace(/[\s+]/," ");for(;v<g;++v)o(l,f[v])?b=b.replace(` ${f[v]} `," "):b+=`${f[v]} `;l.className=b.trim()}function c(l,f){if(!f||f.length===0||l.nodeType!==1)return;const g=f.length;let v=0;if(n()){for(;v<g;++v)l.classList.add(f[v]);return}if(!l.className&&f.length===1)l.className=f.join(" ");else{let b=` ${l.className} `;for(;v<g;++v)~b.indexOf(` ${f[v]} `)||(b+=`${f[v]} `);l.className=b.trim()}}function u(l,f){if(!f||f.length===0||l.nodeType!==1)return;const g=f.length;let v=0;if(n()){for(;v<g;++v)l.classList.remove(f[v]);return}let b=` ${l.className} `.replace(/[\s+]/," ");for(;v<g;++v)b=b.replace(` ${f[v]} `," ");l.className=b.trim()}t.exports=function(l){l.prototype.addClass=function(f){if(f){const g=f.trim().split(/\s+/);this.forEach(v=>{c(v,g)})}return this},l.prototype.removeClass=function(f){if(f){const g=f.trim().split(/\s+/);this.forEach(v=>{u(v,g)})}return this},l.prototype.toggleClass=function(f){if(f){const g=f.trim().split(/\s+/);this.forEach(v=>{a(v,g)})}return this},l.prototype.hasClass=function(f){return this.some(g=>o(g,f))}}},function(t,r,e){t.exports=()=>typeof document<"u"&&"classList"in document.createElement("a")},function(t,r,e){const n=e(549);t.exports=function(o){let a=0,c=0;const u=function(v,b,S){const C={},O=function(V){switch(V){case"width":return new o(v).width();case"height":return new o(v).height();default:return new o(v).css(V)}};b.forEach(w=>{C[w]=O(w)});const A=new(typeof window!==void 0?window:commonjsGlobal).MutationObserver(w=>{const V={};w.forEach(k=>{if(k.attributeName!=="style")return;const M=new o(v).isDisplayNone();b.forEach(W=>{if(M&&(W==="width"||W==="height"))return;const Y=O(W);Y!==C[W]&&(V[W]=[C[W],Y],C[W]=Y)})}),n(V)||setTimeout(()=>{S.call(null,V)})});return A.observe(v,{attributes:!0,attributeFilter:["style"],childList:!1,characterData:!1,subtree:!1}),A},l=function(v,b){const S=new(typeof window!==void 0?window:commonjsGlobal).MutationObserver(O=>{let A=[];O.forEach(w=>{w.removedNodes.length&&(A=A.concat(Array.prototype.slice.call(w.removedNodes)))}),A.length&&setTimeout(()=>{b(new o(A))})});S.observe(v,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),c++;const C=S.disconnect;return S.disconnect=function(){C.apply(S,arguments),c--},S},f=function(v,b){let S={width:0,height:0};const C=setInterval(()=>{const O=v.getBoundingClientRect();(S.width!==O.width||S.height!==O.height)&&(b(O,S),S={width:O.width,height:O.height})},1e3/5);return a++,{disconnect(){clearInterval(C),a--}}};o.prototype.observeStyleChanges=function(g,v){const b=[];return this.forEach(S=>{b.push(u(S,g,v))}),b},o.prototype.observeNodeOrChildNodeRemoval=function(g){const v=[];return this.forEach(b=>{v.push(l(b,g))}),v},o.prototype.observeSize=function(g){const v=[];return this.forEach(b=>{v.push(f(b,g))}),v},o._attachToOTHelpers.observeStyleChanges=function(g,v,b){return new o(g).observeStyleChanges(v,b)[0]},o._attachToOTHelpers.observeNodeOrChildNodeRemoval=function(g,v){return new o(g).observeNodeOrChildNodeRemoval(v)[0]},o.__testOnly||(o.__testOnly={}),o.__testOnly.sizeObserverCount=function(){return a},o.__testOnly.nodeRemovalObserverCount=function(){return c}}},function(t,r,e){var n=e(118),o=e(43),a=e(65),c=e(12),u=e(25),l=e(66),f=e(69),g=e(86),v="[object Map]",b="[object Set]",S=Object.prototype,C=S.hasOwnProperty;function O(A){if(A==null)return!0;if(u(A)&&(c(A)||typeof A=="string"||typeof A.splice=="function"||l(A)||g(A)||a(A)))return!A.length;var w=o(A);if(w==v||w==b)return!A.size;if(f(A))return!n(A).length;for(var V in A)if(C.call(A,V))return!1;return!0}t.exports=O},function(t,r,e){t.exports={1004:"Authentication error",1005:"Invalid Session ID",1006:"Connect Failed",1007:"Connect Rejected",1008:"Connect Time-out",1009:"Security Error",1010:"Not Connected",1011:"Invalid Parameter",1012:"Peer-to-peer Stream Play Failed",1013:"Connection Failed",1014:"API Response Failure",1015:"PeerConnection not connected, cannot call this method",1021:"Request Timeout",1026:"Terms of Service Violation: Export Compliance",1027:"Connection Limit Exceeded",1040:"Set Video Source Failure",1041:"Invalid Video Source",1500:"Unable to Publish",1501:"Unable to Subscribe",1502:"Unsupported Video Codec",1503:"No TURN server found",1520:"Unable to Force Disconnect",1530:"Unable to Force Unpublish",1540:"Unable to Force Mute",1553:"Publisher ICEWorkflow failed",1554:"Subscriber ICEWorkflow failed",1600:"createOffer, createAnswer, setLocalDescription, setRemoteDescription",1605:"Stream Limit Exceeded",2e3:"Internal Error",2001:"Unexpected Server Response",2021:"Proxy URL Timing Error",2022:"Proxy URL Already Set Error",2031:"getRtcStatsReport is not supported in this browser",4e3:"WebSocket Connection Failed",4001:"WebSocket Network Disconnected",5001:"Unable to access media engine"}},function(t,r,e){const n=e(18);t.exports=function(a,c,u,l,f){let g,v=u;a.currentState=u;const b=function(C){if(v!==C){if(c.indexOf(C)===-1){f&&n(f)&&f("invalidState",C);return}a.previousState=v,g=v,a.currentState=C,v=C,l&&n(l)&&l(C,g)}};return a.is=function(){return Array.prototype.indexOf.call(arguments,v)!==-1},a.isNot=function(){return Array.prototype.indexOf.call(arguments,v)===-1},b}},function(t,r,e){const n=e(247),o={};t.exports=o,o.isElementNode=function(a){return a&&typeof a=="object"&&a.nodeType===1},o.createElement=function(a,c,u,l){const f=(l||document).createElement(a);c=c||{},Object.keys(c).forEach(v=>{if(typeof c[v]=="object"){f[v]||(f[v]={});const b=c[v];Object.keys(b).forEach(S=>{f[v][S]=b[S]})}else v==="className"?f.className=c[v]:f.setAttribute(v,c[v])});const g=function(b){typeof b=="string"?f.innerHTML+=b:f.appendChild(b)};return Array.isArray(u)?u.forEach(g):u&&g(u),f},n(o)},function(t,r,e){const n=e(554);t.exports=(o,a)=>{if(typeof o=="string"&&typeof a=="string"){const c=n(o),u=a.match(/(\w+:\/\/)(.*)/),l=u[1],f=u[2];return`${l}${c}/${f}`}return a}},function(t,r,e){t.exports=n=>n.replace(/\/+$/,"").replace(/^.*:\/+/,"")},function(t,r,e){const n=e(556);t.exports=function(o){o===void 0&&(o={});const a=o.isSessionProxied||e(557),c=o,u=c.sessionId;a(u)&&n.forEach(l=>{l in o&&(o[l]="")})}},function(t,r,e){t.exports=["audioLocalAddress","audioRemoteAddress","videoLocalAddress","videoRemoteAddress"]},function(t,r,e){const o=e(21).sessions;t.exports=a=>{const c=o.get(a);return c?!!c._.getProxyUrl():!1}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));const c={architecture:"event_ua_arch",bitness:"event_ua_bitness",model:"event_ua_model",platformVersion:"event_ua_platform_version"},u=function(){var l=(0,a.default)(o.default.mark(function f(g){var v,b;return o.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(v={},!(g!=null&&g.getHighEntropyValues)){C.next=6;break}return C.next=4,g.getHighEntropyValues(Object.keys(c));case 4:b=C.sent,b&&Object.entries(c).forEach(O=>{let A=O[0],w=O[1];b[A]!==void 0&&(v[w]=b[A])});case 6:return C.abrupt("return",v);case 7:case"end":return C.stop()}},f)}));return function(g){return l.apply(this,arguments)}}();t.exports=u},function(t,r,e){const n=["buildHash","minimumVersion","debug",["websiteURL","websiteUrl"],["cdnURL","cdnUrl"],["loggingURL","loggingUrl"],["apiURL","apiUrl"],["supportSSL",!0],["cdnURLSSL","cdnUrl"],["loggingURLSSL","loggingUrl"],["apiURLSSL","apiUrl"],["assetURL","assetUrl"]];t.exports=n},function(t,r,e){const n=["apiUrl","apiURL","apiURLSSL"];t.exports=n},function(t,r,e){t.exports=function(){const o=(typeof window!==void 0?window:commonjsGlobal).OT,a=(typeof window!==void 0?window:commonjsGlobal).TB;return()=>{const c=(typeof window!==void 0?window:commonjsGlobal).OT;return(typeof window!==void 0?window:commonjsGlobal).OT=o,(typeof window!==void 0?window:commonjsGlobal).TB=a,c}}},function(t,r,e){const n=o=>{const a={};return Object.getOwnPropertyNames(o).forEach(c=>{a[c]=Object.getOwnPropertyDescriptor(o,c)}),a};t.exports=function(a){function c(){for(var u=arguments.length,l=new Array(u),f=0;f<u;f++)l[f]=arguments[f];const g=new a(...l);return Object.setPrototypeOf(g,c.prototype),g}return c.prototype=Object.create(a.prototype),Object.defineProperties(c.prototype,n(a.prototype)),Object.keys(a).forEach(u=>{c[u]=a[u]}),c}},function(t,r,e){var n=e(29);t.exports=function(o,a){var c=o&&o.window,u={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0};for(var l in a)hasOwnProperty.call(a,l)&&(u[l]=a[l]);var f=n.log,g=n.detectBrowser(c),v=e(564)||null,b=e(566)||null,S=e(570)||null,C=e(572)||null,O=e(573)||null,A={browserDetails:g,commonShim:O,extractVersion:n.extractVersion,disableLog:n.disableLog,disableWarnings:n.disableWarnings};switch(g.browser){case"chrome":if(!v||!v.shimPeerConnection||!u.shimChrome)return f("Chrome shim is not included in this adapter release."),A;f("adapter.js shimming chrome."),A.browserShim=v,O.shimCreateObjectURL(c),v.shimGetUserMedia(c),v.shimMediaStream(c),v.shimSourceObject(c),v.shimPeerConnection(c),v.shimOnTrack(c),v.shimAddTrackRemoveTrack(c),v.shimGetSendersWithDtmf(c),v.shimSenderReceiverGetStats(c),v.fixNegotiationNeeded(c),O.shimRTCIceCandidate(c),O.shimMaxMessageSize(c),O.shimSendThrowTypeError(c);break;case"firefox":if(!S||!S.shimPeerConnection||!u.shimFirefox)return f("Firefox shim is not included in this adapter release."),A;f("adapter.js shimming firefox."),A.browserShim=S,O.shimCreateObjectURL(c),S.shimGetUserMedia(c),S.shimSourceObject(c),S.shimPeerConnection(c),S.shimOnTrack(c),S.shimRemoveStream(c),S.shimSenderGetStats(c),S.shimReceiverGetStats(c),S.shimRTCDataChannel(c),O.shimRTCIceCandidate(c),O.shimMaxMessageSize(c),O.shimSendThrowTypeError(c);break;case"edge":if(!b||!b.shimPeerConnection||!u.shimEdge)return f("MS edge shim is not included in this adapter release."),A;f("adapter.js shimming edge."),A.browserShim=b,O.shimCreateObjectURL(c),b.shimGetUserMedia(c),b.shimPeerConnection(c),b.shimReplaceTrack(c),b.shimGetDisplayMedia(c),O.shimMaxMessageSize(c),O.shimSendThrowTypeError(c);break;case"safari":if(!C||!u.shimSafari)return f("Safari shim is not included in this adapter release."),A;f("adapter.js shimming safari."),A.browserShim=C,O.shimCreateObjectURL(c),C.shimRTCIceServerUrls(c),C.shimCreateOfferLegacy(c),C.shimCallbacksAPI(c),C.shimLocalStreamsAPI(c),C.shimRemoteStreamsAPI(c),C.shimTrackEventTransceiver(c),C.shimGetUserMedia(c),O.shimRTCIceCandidate(c),O.shimMaxMessageSize(c),O.shimSendThrowTypeError(c);break;default:f("Unsupported browser!");break}return A}},function(t,r,e){(function(n){var o=e(29),a=o.log;function c(l,f,g){!f||g.has(f.id)||(g.set(f.id,f),Object.keys(f).forEach(function(v){v.endsWith("Id")?c(l,l.get(f[v]),g):v.endsWith("Ids")&&f[v].forEach(function(b){c(l,l.get(b),g)})}))}function u(l,f,g){var v=g?"outbound-rtp":"inbound-rtp",b=new Map;if(f===null)return b;var S=[];return l.forEach(function(C){C.type==="track"&&C.trackIdentifier===f.id&&S.push(C)}),S.forEach(function(C){l.forEach(function(O){O.type===v&&O.trackId===C.id&&c(l,O,b)})}),b}t.exports={shimGetUserMedia:e(565),shimMediaStream:function(l){l.MediaStream=l.MediaStream||l.webkitMediaStream},shimOnTrack:function(l){if(typeof l=="object"&&l.RTCPeerConnection&&!("ontrack"in l.RTCPeerConnection.prototype)){Object.defineProperty(l.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(g){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=g)},enumerable:!0,configurable:!0});var f=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(){var g=this;return g._ontrackpoly||(g._ontrackpoly=function(v){v.stream.addEventListener("addtrack",function(b){var S;l.RTCPeerConnection.prototype.getReceivers?S=g.getReceivers().find(function(O){return O.track&&O.track.id===b.track.id}):S={track:b.track};var C=new Event("track");C.track=b.track,C.receiver=S,C.transceiver={receiver:S},C.streams=[v.stream],g.dispatchEvent(C)}),v.stream.getTracks().forEach(function(b){var S;l.RTCPeerConnection.prototype.getReceivers?S=g.getReceivers().find(function(O){return O.track&&O.track.id===b.id}):S={track:b};var C=new Event("track");C.track=b,C.receiver=S,C.transceiver={receiver:S},C.streams=[v.stream],g.dispatchEvent(C)})},g.addEventListener("addstream",g._ontrackpoly)),f.apply(g,arguments)}}else o.wrapPeerConnectionEvent(l,"track",function(g){return g.transceiver||Object.defineProperty(g,"transceiver",{value:{receiver:g.receiver}}),g})},shimGetSendersWithDtmf:function(l){if(typeof l=="object"&&l.RTCPeerConnection&&!("getSenders"in l.RTCPeerConnection.prototype)&&"createDTMFSender"in l.RTCPeerConnection.prototype){var f=function(O,A){return{track:A,get dtmf(){return this._dtmf===void 0&&(A.kind==="audio"?this._dtmf=O.createDTMFSender(A):this._dtmf=null),this._dtmf},_pc:O}};if(!l.RTCPeerConnection.prototype.getSenders){l.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var g=l.RTCPeerConnection.prototype.addTrack;l.RTCPeerConnection.prototype.addTrack=function(O,A){var w=this,V=g.apply(w,arguments);return V||(V=f(w,O),w._senders.push(V)),V};var v=l.RTCPeerConnection.prototype.removeTrack;l.RTCPeerConnection.prototype.removeTrack=function(O){var A=this;v.apply(A,arguments);var w=A._senders.indexOf(O);w!==-1&&A._senders.splice(w,1)}}var b=l.RTCPeerConnection.prototype.addStream;l.RTCPeerConnection.prototype.addStream=function(O){var A=this;A._senders=A._senders||[],b.apply(A,[O]),O.getTracks().forEach(function(w){A._senders.push(f(A,w))})};var S=l.RTCPeerConnection.prototype.removeStream;l.RTCPeerConnection.prototype.removeStream=function(O){var A=this;A._senders=A._senders||[],S.apply(A,[O]),O.getTracks().forEach(function(w){var V=A._senders.find(function(k){return k.track===w});V&&A._senders.splice(A._senders.indexOf(V),1)})}}else if(typeof l=="object"&&l.RTCPeerConnection&&"getSenders"in l.RTCPeerConnection.prototype&&"createDTMFSender"in l.RTCPeerConnection.prototype&&l.RTCRtpSender&&!("dtmf"in l.RTCRtpSender.prototype)){var C=l.RTCPeerConnection.prototype.getSenders;l.RTCPeerConnection.prototype.getSenders=function(){var O=this,A=C.apply(O,[]);return A.forEach(function(w){w._pc=O}),A},Object.defineProperty(l.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},shimSenderReceiverGetStats:function(l){if(typeof l=="object"&&l.RTCPeerConnection&&l.RTCRtpSender&&l.RTCRtpReceiver){if(!("getStats"in l.RTCRtpSender.prototype)){var f=l.RTCPeerConnection.prototype.getSenders;f&&(l.RTCPeerConnection.prototype.getSenders=function(){var S=this,C=f.apply(S,[]);return C.forEach(function(O){O._pc=S}),C});var g=l.RTCPeerConnection.prototype.addTrack;g&&(l.RTCPeerConnection.prototype.addTrack=function(){var S=g.apply(this,arguments);return S._pc=this,S}),l.RTCRtpSender.prototype.getStats=function(){var S=this;return this._pc.getStats().then(function(C){return u(C,S.track,!0)})}}if(!("getStats"in l.RTCRtpReceiver.prototype)){var v=l.RTCPeerConnection.prototype.getReceivers;v&&(l.RTCPeerConnection.prototype.getReceivers=function(){var S=this,C=v.apply(S,[]);return C.forEach(function(O){O._pc=S}),C}),o.wrapPeerConnectionEvent(l,"track",function(S){return S.receiver._pc=S.srcElement,S}),l.RTCRtpReceiver.prototype.getStats=function(){var S=this;return this._pc.getStats().then(function(C){return u(C,S.track,!1)})}}if("getStats"in l.RTCRtpSender.prototype&&"getStats"in l.RTCRtpReceiver.prototype){var b=l.RTCPeerConnection.prototype.getStats;l.RTCPeerConnection.prototype.getStats=function(){var S=this;if(arguments.length>0&&arguments[0]instanceof l.MediaStreamTrack){var C=arguments[0],O,A,w;return S.getSenders().forEach(function(V){V.track===C&&(O?w=!0:O=V)}),S.getReceivers().forEach(function(V){return V.track===C&&(A?w=!0:A=V),V.track===C}),w||O&&A?n.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):O?O.getStats():A?A.getStats():n.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return b.apply(S,arguments)}}}},shimSourceObject:function(l){var f=l&&l.URL;typeof l=="object"&&l.HTMLMediaElement&&!("srcObject"in l.HTMLMediaElement.prototype)&&Object.defineProperty(l.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(g){var v=this;if(this._srcObject=g,this.src&&f.revokeObjectURL(this.src),!g){this.src="";return}this.src=f.createObjectURL(g),g.addEventListener("addtrack",function(){v.src&&f.revokeObjectURL(v.src),v.src=f.createObjectURL(g)}),g.addEventListener("removetrack",function(){v.src&&f.revokeObjectURL(v.src),v.src=f.createObjectURL(g)})}})},shimAddTrackRemoveTrackWithNative:function(l){l.RTCPeerConnection.prototype.getLocalStreams=function(){var S=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(C){return S._shimmedLocalStreams[C][0]})};var f=l.RTCPeerConnection.prototype.addTrack;l.RTCPeerConnection.prototype.addTrack=function(S,C){if(!C)return f.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var O=f.apply(this,arguments);return this._shimmedLocalStreams[C.id]?this._shimmedLocalStreams[C.id].indexOf(O)===-1&&this._shimmedLocalStreams[C.id].push(O):this._shimmedLocalStreams[C.id]=[C,O],O};var g=l.RTCPeerConnection.prototype.addStream;l.RTCPeerConnection.prototype.addStream=function(S){var C=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},S.getTracks().forEach(function(w){var V=C.getSenders().find(function(k){return k.track===w});if(V)throw new DOMException("Track already exists.","InvalidAccessError")});var O=C.getSenders();g.apply(this,arguments);var A=C.getSenders().filter(function(w){return O.indexOf(w)===-1});this._shimmedLocalStreams[S.id]=[S].concat(A)};var v=l.RTCPeerConnection.prototype.removeStream;l.RTCPeerConnection.prototype.removeStream=function(S){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[S.id],v.apply(this,arguments)};var b=l.RTCPeerConnection.prototype.removeTrack;l.RTCPeerConnection.prototype.removeTrack=function(S){var C=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},S&&Object.keys(this._shimmedLocalStreams).forEach(function(O){var A=C._shimmedLocalStreams[O].indexOf(S);A!==-1&&C._shimmedLocalStreams[O].splice(A,1),C._shimmedLocalStreams[O].length===1&&delete C._shimmedLocalStreams[O]}),b.apply(this,arguments)}},shimAddTrackRemoveTrack:function(l){if(!l.RTCPeerConnection)return;var f=o.detectBrowser(l);if(l.RTCPeerConnection.prototype.addTrack&&f.version>=65)return this.shimAddTrackRemoveTrackWithNative(l);var g=l.RTCPeerConnection.prototype.getLocalStreams;l.RTCPeerConnection.prototype.getLocalStreams=function(){var w=this,V=g.apply(this);return w._reverseStreams=w._reverseStreams||{},V.map(function(k){return w._reverseStreams[k.id]})};var v=l.RTCPeerConnection.prototype.addStream;l.RTCPeerConnection.prototype.addStream=function(w){var V=this;if(V._streams=V._streams||{},V._reverseStreams=V._reverseStreams||{},w.getTracks().forEach(function(M){var W=V.getSenders().find(function(Y){return Y.track===M});if(W)throw new DOMException("Track already exists.","InvalidAccessError")}),!V._reverseStreams[w.id]){var k=new l.MediaStream(w.getTracks());V._streams[w.id]=k,V._reverseStreams[k.id]=w,w=k}v.apply(V,[w])};var b=l.RTCPeerConnection.prototype.removeStream;l.RTCPeerConnection.prototype.removeStream=function(w){var V=this;V._streams=V._streams||{},V._reverseStreams=V._reverseStreams||{},b.apply(V,[V._streams[w.id]||w]),delete V._reverseStreams[V._streams[w.id]?V._streams[w.id].id:w.id],delete V._streams[w.id]},l.RTCPeerConnection.prototype.addTrack=function(w,V){var k=this;if(k.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var M=[].slice.call(arguments,1);if(M.length!==1||!M[0].getTracks().find(function(P){return P===w}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");var W=k.getSenders().find(function(P){return P.track===w});if(W)throw new DOMException("Track already exists.","InvalidAccessError");k._streams=k._streams||{},k._reverseStreams=k._reverseStreams||{};var Y=k._streams[V.id];if(Y)Y.addTrack(w),n.resolve().then(function(){k.dispatchEvent(new Event("negotiationneeded"))});else{var H=new l.MediaStream([w]);k._streams[V.id]=H,k._reverseStreams[H.id]=V,k.addStream(H)}return k.getSenders().find(function(P){return P.track===w})};function S(w,V){var k=V.sdp;return Object.keys(w._reverseStreams||[]).forEach(function(M){var W=w._reverseStreams[M],Y=w._streams[W.id];k=k.replace(new RegExp(Y.id,"g"),W.id)}),new RTCSessionDescription({type:V.type,sdp:k})}function C(w,V){var k=V.sdp;return Object.keys(w._reverseStreams||[]).forEach(function(M){var W=w._reverseStreams[M],Y=w._streams[W.id];k=k.replace(new RegExp(W.id,"g"),Y.id)}),new RTCSessionDescription({type:V.type,sdp:k})}["createOffer","createAnswer"].forEach(function(w){var V=l.RTCPeerConnection.prototype[w];l.RTCPeerConnection.prototype[w]=function(){var k=this,M=arguments,W=arguments.length&&typeof arguments[0]=="function";return W?V.apply(k,[function(Y){var H=S(k,Y);M[0].apply(null,[H])},function(Y){M[1]&&M[1].apply(null,Y)},arguments[2]]):V.apply(k,arguments).then(function(Y){return S(k,Y)})}});var O=l.RTCPeerConnection.prototype.setLocalDescription;l.RTCPeerConnection.prototype.setLocalDescription=function(){var w=this;return!arguments.length||!arguments[0].type||(arguments[0]=C(w,arguments[0])),O.apply(w,arguments)};var A=Object.getOwnPropertyDescriptor(l.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(l.RTCPeerConnection.prototype,"localDescription",{get:function(){var w=this,V=A.get.apply(this);return V.type===""?V:S(w,V)}}),l.RTCPeerConnection.prototype.removeTrack=function(w){var V=this;if(V.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!w._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");var k=w._pc===V;if(!k)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");V._streams=V._streams||{};var M;Object.keys(V._streams).forEach(function(W){var Y=V._streams[W].getTracks().find(function(H){return w.track===H});Y&&(M=V._streams[W])}),M&&(M.getTracks().length===1?V.removeStream(V._reverseStreams[M.id]):M.removeTrack(w.track),V.dispatchEvent(new Event("negotiationneeded")))}},shimPeerConnection:function(l){var f=o.detectBrowser(l);if(!l.RTCPeerConnection&&l.webkitRTCPeerConnection&&(l.RTCPeerConnection=function(b,S){return a("PeerConnection"),b&&b.iceTransportPolicy&&(b.iceTransports=b.iceTransportPolicy),new l.webkitRTCPeerConnection(b,S)},l.RTCPeerConnection.prototype=l.webkitRTCPeerConnection.prototype,l.webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(l.RTCPeerConnection,"generateCertificate",{get:function(){return l.webkitRTCPeerConnection.generateCertificate}})),!!l.RTCPeerConnection){var g=l.RTCPeerConnection.prototype.getStats;l.RTCPeerConnection.prototype.getStats=function(b,S,C){var O=this,A=arguments;if(arguments.length>0&&typeof b=="function")return g.apply(this,arguments);if(g.length===0&&(arguments.length===0||typeof arguments[0]!="function"))return g.apply(this,[]);var w=function(M){var W={},Y=M.result();return Y.forEach(function(H){var P={id:H.id,timestamp:H.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[H.type]||H.type};H.names().forEach(function(j){P[j]=H.stat(j)}),W[P.id]=P}),W},V=function(M){return new Map(Object.keys(M).map(function(W){return[W,M[W]]}))};if(arguments.length>=2){var k=function(M){A[1](V(w(M)))};return g.apply(this,[k,arguments[0]])}return new n(function(M,W){g.apply(O,[function(Y){M(V(w(Y)))},W])}).then(S,C)},f.version<51&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){var S=l.RTCPeerConnection.prototype[b];l.RTCPeerConnection.prototype[b]=function(){var C=arguments,O=this,A=new n(function(w,V){S.apply(O,[C[0],w,V])});return C.length<2?A:A.then(function(){C[1].apply(null,[])},function(w){C.length>=3&&C[2].apply(null,[w])})}}),f.version<52&&["createOffer","createAnswer"].forEach(function(b){var S=l.RTCPeerConnection.prototype[b];l.RTCPeerConnection.prototype[b]=function(){var C=this;if(arguments.length<1||arguments.length===1&&typeof arguments[0]=="object"){var O=arguments.length===1?arguments[0]:void 0;return new n(function(A,w){S.apply(C,[A,w,O])})}return S.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(b){var S=l.RTCPeerConnection.prototype[b];l.RTCPeerConnection.prototype[b]=function(){return arguments[0]=new(b==="addIceCandidate"?l.RTCIceCandidate:l.RTCSessionDescription)(arguments[0]),S.apply(this,arguments)}});var v=l.RTCPeerConnection.prototype.addIceCandidate;l.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?v.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),n.resolve())}}},fixNegotiationNeeded:function(l){o.wrapPeerConnectionEvent(l,"negotiationneeded",function(f){var g=f.target;if(g.signalingState==="stable")return f})},shimGetDisplayMedia:function(l,f){if(!(!l.navigator||!l.navigator.mediaDevices||"getDisplayMedia"in l.navigator.mediaDevices)){if(typeof f!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}l.navigator.mediaDevices.getDisplayMedia=function(g){return f(g).then(function(v){var b=g.video&&g.video.width,S=g.video&&g.video.height,C=g.video&&g.video.frameRate;return g.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:v,maxFrameRate:C||3}},b&&(g.video.mandatory.maxWidth=b),S&&(g.video.mandatory.maxHeight=S),l.navigator.mediaDevices.getUserMedia(g)})},l.navigator.getDisplayMedia=function(g){return o.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),l.navigator.mediaDevices.getDisplayMedia(g)}}}}}).call(this,e(1))},function(t,r,e){(function(n){var o=e(29),a=o.log;t.exports=function(c){var u=o.detectBrowser(c),l=c&&c.navigator,f=function(O){if(typeof O!="object"||O.mandatory||O.optional)return O;var A={};return Object.keys(O).forEach(function(w){if(!(w==="require"||w==="advanced"||w==="mediaSource")){var V=typeof O[w]=="object"?O[w]:{ideal:O[w]};V.exact!==void 0&&typeof V.exact=="number"&&(V.min=V.max=V.exact);var k=function(W,Y){return W?W+Y.charAt(0).toUpperCase()+Y.slice(1):Y==="deviceId"?"sourceId":Y};if(V.ideal!==void 0){A.optional=A.optional||[];var M={};typeof V.ideal=="number"?(M[k("min",w)]=V.ideal,A.optional.push(M),M={},M[k("max",w)]=V.ideal,A.optional.push(M)):(M[k("",w)]=V.ideal,A.optional.push(M))}V.exact!==void 0&&typeof V.exact!="number"?(A.mandatory=A.mandatory||{},A.mandatory[k("",w)]=V.exact):["min","max"].forEach(function(W){V[W]!==void 0&&(A.mandatory=A.mandatory||{},A.mandatory[k(W,w)]=V[W])})}}),O.advanced&&(A.optional=(A.optional||[]).concat(O.advanced)),A},g=function(O,A){if(u.version>=61)return A(O);if(O=JSON.parse(JSON.stringify(O)),O&&typeof O.audio=="object"){var w=function(W,Y,H){Y in W&&!(H in W)&&(W[H]=W[Y],delete W[Y])};O=JSON.parse(JSON.stringify(O)),w(O.audio,"autoGainControl","googAutoGainControl"),w(O.audio,"noiseSuppression","googNoiseSuppression"),O.audio=f(O.audio)}if(O&&typeof O.video=="object"){var V=O.video.facingMode;V=V&&(typeof V=="object"?V:{ideal:V});var k=u.version<66;if(V&&(V.exact==="user"||V.exact==="environment"||V.ideal==="user"||V.ideal==="environment")&&!(l.mediaDevices.getSupportedConstraints&&l.mediaDevices.getSupportedConstraints().facingMode&&!k)){delete O.video.facingMode;var M;if(V.exact==="environment"||V.ideal==="environment"?M=["back","rear"]:(V.exact==="user"||V.ideal==="user")&&(M=["front"]),M)return l.mediaDevices.enumerateDevices().then(function(W){W=W.filter(function(H){return H.kind==="videoinput"});var Y=W.find(function(H){return M.some(function(P){return H.label.toLowerCase().indexOf(P)!==-1})});return!Y&&W.length&&M.indexOf("back")!==-1&&(Y=W[W.length-1]),Y&&(O.video.deviceId=V.exact?{exact:Y.deviceId}:{ideal:Y.deviceId}),O.video=f(O.video),a("chrome: "+JSON.stringify(O)),A(O)})}O.video=f(O.video)}return a("chrome: "+JSON.stringify(O)),A(O)},v=function(O){return u.version>=64?O:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[O.name]||O.name,message:O.message,constraint:O.constraint||O.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},b=function(O,A,w){g(O,function(V){l.webkitGetUserMedia(V,A,function(k){w&&w(v(k))})})};l.getUserMedia=b;var S=function(O){return new n(function(A,w){l.getUserMedia(O,A,w)})};if(l.mediaDevices||(l.mediaDevices={getUserMedia:S,enumerateDevices:function(){return new n(function(O){var A={audio:"audioinput",video:"videoinput"};return c.MediaStreamTrack.getSources(function(w){O(w.map(function(V){return{label:V.label,kind:A[V.kind],deviceId:V.id,groupId:""}}))})})},getSupportedConstraints:function(){return{deviceId:!0,echoCancellation:!0,facingMode:!0,frameRate:!0,height:!0,width:!0}}}),!l.mediaDevices.getUserMedia)l.mediaDevices.getUserMedia=function(O){return S(O)};else{var C=l.mediaDevices.getUserMedia.bind(l.mediaDevices);l.mediaDevices.getUserMedia=function(O){return g(O,function(A){return C(A).then(function(w){if(A.audio&&!w.getAudioTracks().length||A.video&&!w.getVideoTracks().length)throw w.getTracks().forEach(function(V){V.stop()}),new DOMException("","NotFoundError");return w},function(w){return n.reject(v(w))})})}}typeof l.mediaDevices.addEventListener>"u"&&(l.mediaDevices.addEventListener=function(){a("Dummy mediaDevices.addEventListener called.")}),typeof l.mediaDevices.removeEventListener>"u"&&(l.mediaDevices.removeEventListener=function(){a("Dummy mediaDevices.removeEventListener called.")})}}).call(this,e(1))},function(t,r,e){var n=e(29),o=e(567),a=e(568);t.exports={shimGetUserMedia:e(569),shimPeerConnection:function(c){var u=n.detectBrowser(c);if(c.RTCIceGatherer&&(c.RTCIceCandidate||(c.RTCIceCandidate=function(g){return g}),c.RTCSessionDescription||(c.RTCSessionDescription=function(g){return g}),u.version<15025)){var l=Object.getOwnPropertyDescriptor(c.MediaStreamTrack.prototype,"enabled");Object.defineProperty(c.MediaStreamTrack.prototype,"enabled",{set:function(g){l.set.call(this,g);var v=new Event("enabled");v.enabled=g,this.dispatchEvent(v)}})}c.RTCRtpSender&&!("dtmf"in c.RTCRtpSender.prototype)&&Object.defineProperty(c.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new c.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),c.RTCDtmfSender&&!c.RTCDTMFSender&&(c.RTCDTMFSender=c.RTCDtmfSender);var f=a(c,u.version);c.RTCPeerConnection=function(g){return g&&g.iceServers&&(g.iceServers=o(g.iceServers)),new f(g)},c.RTCPeerConnection.prototype=f.prototype},shimReplaceTrack:function(c){c.RTCRtpSender&&!("replaceTrack"in c.RTCRtpSender.prototype)&&(c.RTCRtpSender.prototype.replaceTrack=c.RTCRtpSender.prototype.setTrack)},shimGetDisplayMedia:function(c,u){if(!(!("getDisplayMedia"in c.navigator)||!c.navigator.mediaDevices||"getDisplayMedia"in c.navigator.mediaDevices)){var l=c.navigator.getDisplayMedia;c.navigator.mediaDevices.getDisplayMedia=function(f){return l.call(c.navigator,f)},c.navigator.getDisplayMedia=function(f){return n.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),l.call(c.navigator,f)}}}}},function(t,r,e){var n=e(29);t.exports=function(o,a){var c=!1;return o=JSON.parse(JSON.stringify(o)),o.filter(function(u){if(u&&(u.urls||u.url)){var l=u.urls||u.url;u.url&&!u.urls&&n.deprecated("RTCIceServer.url","RTCIceServer.urls");var f=typeof l=="string";return f&&(l=[l]),l=l.filter(function(g){var v=g.indexOf("turn:")===0&&g.indexOf("transport=udp")!==-1&&g.indexOf("turn:[")===-1&&!c;return v?(c=!0,!0):g.indexOf("stun:")===0&&a>=14393&&g.indexOf("?transport=udp")===-1}),delete u.url,u.urls=f?l[0]:l,!!l.length}})}},function(t,r,e){(function(n){var o=e(251);function a(b){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[b.type]||b.type}function c(b,S,C,O,A){var w=o.writeRtpDescription(b.kind,S);if(w+=o.writeIceParameters(b.iceGatherer.getLocalParameters()),w+=o.writeDtlsParameters(b.dtlsTransport.getLocalParameters(),C==="offer"?"actpass":A||"active"),w+="a=mid:"+b.mid+`\r
`,b.rtpSender&&b.rtpReceiver?w+=`a=sendrecv\r
`:b.rtpSender?w+=`a=sendonly\r
`:b.rtpReceiver?w+=`a=recvonly\r
`:w+=`a=inactive\r
`,b.rtpSender){var V=b.rtpSender._initialTrackId||b.rtpSender.track.id;b.rtpSender._initialTrackId=V;var k="msid:"+(O?O.id:"-")+" "+V+`\r
`;w+="a="+k,w+="a=ssrc:"+b.sendEncodingParameters[0].ssrc+" "+k,b.sendEncodingParameters[0].rtx&&(w+="a=ssrc:"+b.sendEncodingParameters[0].rtx.ssrc+" "+k,w+="a=ssrc-group:FID "+b.sendEncodingParameters[0].ssrc+" "+b.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return w+="a=ssrc:"+b.sendEncodingParameters[0].ssrc+" cname:"+o.localCName+`\r
`,b.rtpSender&&b.sendEncodingParameters[0].rtx&&(w+="a=ssrc:"+b.sendEncodingParameters[0].rtx.ssrc+" cname:"+o.localCName+`\r
`),w}function u(b,S){var C=!1;return b=JSON.parse(JSON.stringify(b)),b.filter(function(O){if(O&&(O.urls||O.url)){var A=O.urls||O.url;O.url&&!O.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var w=typeof A=="string";return w&&(A=[A]),A=A.filter(function(V){var k=V.indexOf("turn:")===0&&V.indexOf("transport=udp")!==-1&&V.indexOf("turn:[")===-1&&!C;return k?(C=!0,!0):V.indexOf("stun:")===0&&S>=14393&&V.indexOf("?transport=udp")===-1}),delete O.url,O.urls=w?A[0]:A,!!A.length}})}function l(b,S){var C={codecs:[],headerExtensions:[],fecMechanisms:[]},O=function(w,V){w=parseInt(w,10);for(var k=0;k<V.length;k++)if(V[k].payloadType===w||V[k].preferredPayloadType===w)return V[k]},A=function(w,V,k,M){var W=O(w.parameters.apt,k),Y=O(V.parameters.apt,M);return W&&Y&&W.name.toLowerCase()===Y.name.toLowerCase()};return b.codecs.forEach(function(w){for(var V=0;V<S.codecs.length;V++){var k=S.codecs[V];if(w.name.toLowerCase()===k.name.toLowerCase()&&w.clockRate===k.clockRate){if(w.name.toLowerCase()==="rtx"&&w.parameters&&k.parameters.apt&&!A(w,k,b.codecs,S.codecs))continue;k=JSON.parse(JSON.stringify(k)),k.numChannels=Math.min(w.numChannels,k.numChannels),C.codecs.push(k),k.rtcpFeedback=k.rtcpFeedback.filter(function(M){for(var W=0;W<w.rtcpFeedback.length;W++)if(w.rtcpFeedback[W].type===M.type&&w.rtcpFeedback[W].parameter===M.parameter)return!0;return!1});break}}}),b.headerExtensions.forEach(function(w){for(var V=0;V<S.headerExtensions.length;V++){var k=S.headerExtensions[V];if(w.uri===k.uri){C.headerExtensions.push(k);break}}}),C}function f(b,S,C){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[S][b].indexOf(C)!==-1}function g(b,S){var C=b.getRemoteCandidates().find(function(O){return S.foundation===O.foundation&&S.ip===O.ip&&S.port===O.port&&S.priority===O.priority&&S.protocol===O.protocol&&S.type===O.type});return C||b.addRemoteCandidate(S),!C}function v(b,S){var C=new Error(S);return C.name=b,C.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[b],C}t.exports=function(b,S){function C(M,W){W.addTrack(M),W.dispatchEvent(new b.MediaStreamTrackEvent("addtrack",{track:M}))}function O(M,W){W.removeTrack(M),W.dispatchEvent(new b.MediaStreamTrackEvent("removetrack",{track:M}))}function A(M,W,Y,H){var P=new Event("track");P.track=W,P.receiver=Y,P.transceiver={receiver:Y},P.streams=H,b.setTimeout(function(){M._dispatchEvent("track",P)})}var w=function(M){var W=this,Y=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(P){W[P]=Y[P].bind(Y)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",M=JSON.parse(JSON.stringify(M||{})),this.usingBundle=M.bundlePolicy==="max-bundle",M.rtcpMuxPolicy==="negotiate")throw v("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(M.rtcpMuxPolicy||(M.rtcpMuxPolicy="require"),M.iceTransportPolicy){case"all":case"relay":break;default:M.iceTransportPolicy="all";break}switch(M.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:M.bundlePolicy="balanced";break}if(M.iceServers=u(M.iceServers||[],S),this._iceGatherers=[],M.iceCandidatePoolSize)for(var H=M.iceCandidatePoolSize;H>0;H--)this._iceGatherers.push(new b.RTCIceGatherer({iceServers:M.iceServers,gatherPolicy:M.iceTransportPolicy}));else M.iceCandidatePoolSize=0;this._config=M,this.transceivers=[],this._sdpSessionId=o.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(w.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(w.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),w.prototype.onicecandidate=null,w.prototype.onaddstream=null,w.prototype.ontrack=null,w.prototype.onremovestream=null,w.prototype.onsignalingstatechange=null,w.prototype.oniceconnectionstatechange=null,w.prototype.onconnectionstatechange=null,w.prototype.onicegatheringstatechange=null,w.prototype.onnegotiationneeded=null,w.prototype.ondatachannel=null,w.prototype._dispatchEvent=function(M,W){this._isClosed||(this.dispatchEvent(W),typeof this["on"+M]=="function"&&this["on"+M](W))},w.prototype._emitGatheringStateChange=function(){var M=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",M)},w.prototype.getConfiguration=function(){return this._config},w.prototype.getLocalStreams=function(){return this.localStreams},w.prototype.getRemoteStreams=function(){return this.remoteStreams},w.prototype._createTransceiver=function(M,W){var Y=this.transceivers.length>0,H={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:M,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&Y)H.iceTransport=this.transceivers[0].iceTransport,H.dtlsTransport=this.transceivers[0].dtlsTransport;else{var P=this._createIceAndDtlsTransports();H.iceTransport=P.iceTransport,H.dtlsTransport=P.dtlsTransport}return W||this.transceivers.push(H),H},w.prototype.addTrack=function(M,W){if(this._isClosed)throw v("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var Y=this.transceivers.find(function(j){return j.track===M});if(Y)throw v("InvalidAccessError","Track already exists.");for(var H,P=0;P<this.transceivers.length;P++)!this.transceivers[P].track&&this.transceivers[P].kind===M.kind&&(H=this.transceivers[P]);return H||(H=this._createTransceiver(M.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(W)===-1&&this.localStreams.push(W),H.track=M,H.stream=W,H.rtpSender=new b.RTCRtpSender(M,H.dtlsTransport),H.rtpSender},w.prototype.addStream=function(M){var W=this;if(S>=15025)M.getTracks().forEach(function(H){W.addTrack(H,M)});else{var Y=M.clone();M.getTracks().forEach(function(H,P){var j=Y.getTracks()[P];H.addEventListener("enabled",function(_){j.enabled=_.enabled})}),Y.getTracks().forEach(function(H){W.addTrack(H,Y)})}},w.prototype.removeTrack=function(M){if(this._isClosed)throw v("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(M instanceof b.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var W=this.transceivers.find(function(P){return P.rtpSender===M});if(!W)throw v("InvalidAccessError","Sender was not created by this connection.");var Y=W.stream;W.rtpSender.stop(),W.rtpSender=null,W.track=null,W.stream=null;var H=this.transceivers.map(function(P){return P.stream});H.indexOf(Y)===-1&&this.localStreams.indexOf(Y)>-1&&this.localStreams.splice(this.localStreams.indexOf(Y),1),this._maybeFireNegotiationNeeded()},w.prototype.removeStream=function(M){var W=this;M.getTracks().forEach(function(Y){var H=W.getSenders().find(function(P){return P.track===Y});H&&W.removeTrack(H)})},w.prototype.getSenders=function(){return this.transceivers.filter(function(M){return!!M.rtpSender}).map(function(M){return M.rtpSender})},w.prototype.getReceivers=function(){return this.transceivers.filter(function(M){return!!M.rtpReceiver}).map(function(M){return M.rtpReceiver})},w.prototype._createIceGatherer=function(M,W){var Y=this;if(W&&M>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var H=new b.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(H,"state",{value:"new",writable:!0}),this.transceivers[M].bufferedCandidateEvents=[],this.transceivers[M].bufferCandidates=function(P){var j=!P.candidate||Object.keys(P.candidate).length===0;H.state=j?"completed":"gathering",Y.transceivers[M].bufferedCandidateEvents!==null&&Y.transceivers[M].bufferedCandidateEvents.push(P)},H.addEventListener("localcandidate",this.transceivers[M].bufferCandidates),H},w.prototype._gather=function(M,W){var Y=this,H=this.transceivers[W].iceGatherer;if(!H.onlocalcandidate){var P=this.transceivers[W].bufferedCandidateEvents;this.transceivers[W].bufferedCandidateEvents=null,H.removeEventListener("localcandidate",this.transceivers[W].bufferCandidates),H.onlocalcandidate=function(j){if(!(Y.usingBundle&&W>0)){var _=new Event("icecandidate");_.candidate={sdpMid:M,sdpMLineIndex:W};var z=j.candidate,ae=!z||Object.keys(z).length===0;if(ae)(H.state==="new"||H.state==="gathering")&&(H.state="completed");else{H.state==="new"&&(H.state="gathering"),z.component=1,z.ufrag=H.getLocalParameters().usernameFragment;var me=o.writeCandidate(z);_.candidate=Object.assign(_.candidate,o.parseCandidate(me)),_.candidate.candidate=me,_.candidate.toJSON=function(){return{candidate:_.candidate.candidate,sdpMid:_.candidate.sdpMid,sdpMLineIndex:_.candidate.sdpMLineIndex,usernameFragment:_.candidate.usernameFragment}}}var ye=o.getMediaSections(Y._localDescription.sdp);ae?ye[_.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:ye[_.candidate.sdpMLineIndex]+="a="+_.candidate.candidate+`\r
`,Y._localDescription.sdp=o.getDescription(Y._localDescription.sdp)+ye.join("");var Pe=Y.transceivers.every(function(Te){return Te.iceGatherer&&Te.iceGatherer.state==="completed"});Y.iceGatheringState!=="gathering"&&(Y.iceGatheringState="gathering",Y._emitGatheringStateChange()),ae||Y._dispatchEvent("icecandidate",_),Pe&&(Y._dispatchEvent("icecandidate",new Event("icecandidate")),Y.iceGatheringState="complete",Y._emitGatheringStateChange())}},b.setTimeout(function(){P.forEach(function(j){H.onlocalcandidate(j)})},0)}},w.prototype._createIceAndDtlsTransports=function(){var M=this,W=new b.RTCIceTransport(null);W.onicestatechange=function(){M._updateIceConnectionState(),M._updateConnectionState()};var Y=new b.RTCDtlsTransport(W);return Y.ondtlsstatechange=function(){M._updateConnectionState()},Y.onerror=function(){Object.defineProperty(Y,"state",{value:"failed",writable:!0}),M._updateConnectionState()},{iceTransport:W,dtlsTransport:Y}},w.prototype._disposeIceAndDtlsTransports=function(M){var W=this.transceivers[M].iceGatherer;W&&(delete W.onlocalcandidate,delete this.transceivers[M].iceGatherer);var Y=this.transceivers[M].iceTransport;Y&&(delete Y.onicestatechange,delete this.transceivers[M].iceTransport);var H=this.transceivers[M].dtlsTransport;H&&(delete H.ondtlsstatechange,delete H.onerror,delete this.transceivers[M].dtlsTransport)},w.prototype._transceive=function(M,W,Y){var H=l(M.localCapabilities,M.remoteCapabilities);W&&M.rtpSender&&(H.encodings=M.sendEncodingParameters,H.rtcp={cname:o.localCName,compound:M.rtcpParameters.compound},M.recvEncodingParameters.length&&(H.rtcp.ssrc=M.recvEncodingParameters[0].ssrc),M.rtpSender.send(H)),Y&&M.rtpReceiver&&H.codecs.length>0&&(M.kind==="video"&&M.recvEncodingParameters&&S<15019&&M.recvEncodingParameters.forEach(function(P){delete P.rtx}),M.recvEncodingParameters.length?H.encodings=M.recvEncodingParameters:H.encodings=[{}],H.rtcp={compound:M.rtcpParameters.compound},M.rtcpParameters.cname&&(H.rtcp.cname=M.rtcpParameters.cname),M.sendEncodingParameters.length&&(H.rtcp.ssrc=M.sendEncodingParameters[0].ssrc),M.rtpReceiver.receive(H))},w.prototype.setLocalDescription=function(M){var W=this;if(["offer","answer"].indexOf(M.type)===-1)return n.reject(v("TypeError",'Unsupported type "'+M.type+'"'));if(!f("setLocalDescription",M.type,W.signalingState)||W._isClosed)return n.reject(v("InvalidStateError","Can not set local "+M.type+" in state "+W.signalingState));var Y,H;if(M.type==="offer")Y=o.splitSections(M.sdp),H=Y.shift(),Y.forEach(function(j,_){var z=o.parseRtpParameters(j);W.transceivers[_].localCapabilities=z}),W.transceivers.forEach(function(j,_){W._gather(j.mid,_)});else if(M.type==="answer"){Y=o.splitSections(W._remoteDescription.sdp),H=Y.shift();var P=o.matchPrefix(H,"a=ice-lite").length>0;Y.forEach(function(j,_){var z=W.transceivers[_],ae=z.iceGatherer,me=z.iceTransport,ye=z.dtlsTransport,Pe=z.localCapabilities,Te=z.remoteCapabilities,Ue=o.isRejected(j)&&o.matchPrefix(j,"a=bundle-only").length===0;if(!Ue&&!z.rejected){var _e=o.getIceParameters(j,H),je=o.getDtlsParameters(j,H);P&&(je.role="server"),(!W.usingBundle||_===0)&&(W._gather(z.mid,_),me.state==="new"&&me.start(ae,_e,P?"controlling":"controlled"),ye.state==="new"&&ye.start(je));var Ke=l(Pe,Te);W._transceive(z,Ke.codecs.length>0,!1)}})}return W._localDescription={type:M.type,sdp:M.sdp},M.type==="offer"?W._updateSignalingState("have-local-offer"):W._updateSignalingState("stable"),n.resolve()},w.prototype.setRemoteDescription=function(M){var W=this;if(["offer","answer"].indexOf(M.type)===-1)return n.reject(v("TypeError",'Unsupported type "'+M.type+'"'));if(!f("setRemoteDescription",M.type,W.signalingState)||W._isClosed)return n.reject(v("InvalidStateError","Can not set remote "+M.type+" in state "+W.signalingState));var Y={};W.remoteStreams.forEach(function(me){Y[me.id]=me});var H=[],P=o.splitSections(M.sdp),j=P.shift(),_=o.matchPrefix(j,"a=ice-lite").length>0,z=o.matchPrefix(j,"a=group:BUNDLE ").length>0;W.usingBundle=z;var ae=o.matchPrefix(j,"a=ice-options:")[0];return ae?W.canTrickleIceCandidates=ae.substr(14).split(" ").indexOf("trickle")>=0:W.canTrickleIceCandidates=!1,P.forEach(function(me,ye){var Pe=o.splitLines(me),Te=o.getKind(me),Ue=o.isRejected(me)&&o.matchPrefix(me,"a=bundle-only").length===0,_e=Pe[0].substr(2).split(" ")[2],je=o.getDirection(me,j),Ke=o.parseMsid(me),De=o.getMid(me)||o.generateIdentifier();if(Ue||Te==="application"&&(_e==="DTLS/SCTP"||_e==="UDP/DTLS/SCTP")){W.transceivers[ye]={mid:De,kind:Te,protocol:_e,rejected:!0};return}!Ue&&W.transceivers[ye]&&W.transceivers[ye].rejected&&(W.transceivers[ye]=W._createTransceiver(Te,!0));var Ze,tt,gt,Ee,Le,We,ut,bt,mt,It=o.parseRtpParameters(me),Ge,Qe;Ue||(Ge=o.getIceParameters(me,j),Qe=o.getDtlsParameters(me,j),Qe.role="client"),ut=o.parseRtpEncodingParameters(me);var Et=o.parseRtcpParameters(me),Tt=o.matchPrefix(me,"a=end-of-candidates",j).length>0,Zt=o.matchPrefix(me,"a=candidate:").map(function(it){return o.parseCandidate(it)}).filter(function(it){return it.component===1});if((M.type==="offer"||M.type==="answer")&&!Ue&&z&&ye>0&&W.transceivers[ye]&&(W._disposeIceAndDtlsTransports(ye),W.transceivers[ye].iceGatherer=W.transceivers[0].iceGatherer,W.transceivers[ye].iceTransport=W.transceivers[0].iceTransport,W.transceivers[ye].dtlsTransport=W.transceivers[0].dtlsTransport,W.transceivers[ye].rtpSender&&W.transceivers[ye].rtpSender.setTransport(W.transceivers[0].dtlsTransport),W.transceivers[ye].rtpReceiver&&W.transceivers[ye].rtpReceiver.setTransport(W.transceivers[0].dtlsTransport)),M.type==="offer"&&!Ue){Ze=W.transceivers[ye]||W._createTransceiver(Te),Ze.mid=De,Ze.iceGatherer||(Ze.iceGatherer=W._createIceGatherer(ye,z)),Zt.length&&Ze.iceTransport.state==="new"&&(Tt&&(!z||ye===0)?Ze.iceTransport.setRemoteCandidates(Zt):Zt.forEach(function(it){g(Ze.iceTransport,it)})),bt=b.RTCRtpReceiver.getCapabilities(Te),S<15019&&(bt.codecs=bt.codecs.filter(function(it){return it.name!=="rtx"})),We=Ze.sendEncodingParameters||[{ssrc:(2*ye+2)*1001}];var $t=!1;if(je==="sendrecv"||je==="sendonly"){if($t=!Ze.rtpReceiver,Le=Ze.rtpReceiver||new b.RTCRtpReceiver(Ze.dtlsTransport,Te),$t){var pt;mt=Le.track,Ke&&Ke.stream==="-"||(Ke?(Y[Ke.stream]||(Y[Ke.stream]=new b.MediaStream,Object.defineProperty(Y[Ke.stream],"id",{get:function(){return Ke.stream}})),Object.defineProperty(mt,"id",{get:function(){return Ke.track}}),pt=Y[Ke.stream]):(Y.default||(Y.default=new b.MediaStream),pt=Y.default)),pt&&(C(mt,pt),Ze.associatedRemoteMediaStreams.push(pt)),H.push([mt,Le,pt])}}else Ze.rtpReceiver&&Ze.rtpReceiver.track&&(Ze.associatedRemoteMediaStreams.forEach(function(it){var Pt=it.getTracks().find(function(nn){return nn.id===Ze.rtpReceiver.track.id});Pt&&O(Pt,it)}),Ze.associatedRemoteMediaStreams=[]);Ze.localCapabilities=bt,Ze.remoteCapabilities=It,Ze.rtpReceiver=Le,Ze.rtcpParameters=Et,Ze.sendEncodingParameters=We,Ze.recvEncodingParameters=ut,W._transceive(W.transceivers[ye],!1,$t)}else if(M.type==="answer"&&!Ue){Ze=W.transceivers[ye],tt=Ze.iceGatherer,gt=Ze.iceTransport,Ee=Ze.dtlsTransport,Le=Ze.rtpReceiver,We=Ze.sendEncodingParameters,bt=Ze.localCapabilities,W.transceivers[ye].recvEncodingParameters=ut,W.transceivers[ye].remoteCapabilities=It,W.transceivers[ye].rtcpParameters=Et,Zt.length&&gt.state==="new"&&((_||Tt)&&(!z||ye===0)?gt.setRemoteCandidates(Zt):Zt.forEach(function(it){g(Ze.iceTransport,it)})),(!z||ye===0)&&(gt.state==="new"&&gt.start(tt,Ge,"controlling"),Ee.state==="new"&&Ee.start(Qe));var ft=l(Ze.localCapabilities,Ze.remoteCapabilities),et=ft.codecs.filter(function(it){return it.name.toLowerCase()==="rtx"}).length;!et&&Ze.sendEncodingParameters[0].rtx&&delete Ze.sendEncodingParameters[0].rtx,W._transceive(Ze,je==="sendrecv"||je==="recvonly",je==="sendrecv"||je==="sendonly"),Le&&(je==="sendrecv"||je==="sendonly")?(mt=Le.track,Ke?(Y[Ke.stream]||(Y[Ke.stream]=new b.MediaStream),C(mt,Y[Ke.stream]),H.push([mt,Le,Y[Ke.stream]])):(Y.default||(Y.default=new b.MediaStream),C(mt,Y.default),H.push([mt,Le,Y.default]))):delete Ze.rtpReceiver}}),W._dtlsRole===void 0&&(W._dtlsRole=M.type==="offer"?"active":"passive"),W._remoteDescription={type:M.type,sdp:M.sdp},M.type==="offer"?W._updateSignalingState("have-remote-offer"):W._updateSignalingState("stable"),Object.keys(Y).forEach(function(me){var ye=Y[me];if(ye.getTracks().length){if(W.remoteStreams.indexOf(ye)===-1){W.remoteStreams.push(ye);var Pe=new Event("addstream");Pe.stream=ye,b.setTimeout(function(){W._dispatchEvent("addstream",Pe)})}H.forEach(function(Te){var Ue=Te[0],_e=Te[1];ye.id===Te[2].id&&A(W,Ue,_e,[ye])})}}),H.forEach(function(me){me[2]||A(W,me[0],me[1],[])}),b.setTimeout(function(){W&&W.transceivers&&W.transceivers.forEach(function(me){me.iceTransport&&me.iceTransport.state==="new"&&me.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),me.iceTransport.addRemoteCandidate({}))})},4e3),n.resolve()},w.prototype.close=function(){this.transceivers.forEach(function(M){M.iceTransport&&M.iceTransport.stop(),M.dtlsTransport&&M.dtlsTransport.stop(),M.rtpSender&&M.rtpSender.stop(),M.rtpReceiver&&M.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},w.prototype._updateSignalingState=function(M){this.signalingState=M;var W=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",W)},w.prototype._maybeFireNegotiationNeeded=function(){var M=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,b.setTimeout(function(){if(M.needNegotiation){M.needNegotiation=!1;var W=new Event("negotiationneeded");M._dispatchEvent("negotiationneeded",W)}},0))},w.prototype._updateIceConnectionState=function(){var M,W={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(H){H.iceTransport&&!H.rejected&&W[H.iceTransport.state]++}),M="new",W.failed>0?M="failed":W.checking>0?M="checking":W.disconnected>0?M="disconnected":W.new>0?M="new":W.connected>0?M="connected":W.completed>0&&(M="completed"),M!==this.iceConnectionState){this.iceConnectionState=M;var Y=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",Y)}},w.prototype._updateConnectionState=function(){var M,W={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(H){H.iceTransport&&H.dtlsTransport&&!H.rejected&&(W[H.iceTransport.state]++,W[H.dtlsTransport.state]++)}),W.connected+=W.completed,M="new",W.failed>0?M="failed":W.connecting>0?M="connecting":W.disconnected>0?M="disconnected":W.new>0?M="new":W.connected>0&&(M="connected"),M!==this.connectionState){this.connectionState=M;var Y=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",Y)}},w.prototype.createOffer=function(){var M=this;if(M._isClosed)return n.reject(v("InvalidStateError","Can not call createOffer after close"));var W=M.transceivers.filter(function(_){return _.kind==="audio"}).length,Y=M.transceivers.filter(function(_){return _.kind==="video"}).length,H=arguments[0];if(H){if(H.mandatory||H.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");H.offerToReceiveAudio!==void 0&&(H.offerToReceiveAudio===!0?W=1:H.offerToReceiveAudio===!1?W=0:W=H.offerToReceiveAudio),H.offerToReceiveVideo!==void 0&&(H.offerToReceiveVideo===!0?Y=1:H.offerToReceiveVideo===!1?Y=0:Y=H.offerToReceiveVideo)}for(M.transceivers.forEach(function(_){_.kind==="audio"?(W--,W<0&&(_.wantReceive=!1)):_.kind==="video"&&(Y--,Y<0&&(_.wantReceive=!1))});W>0||Y>0;)W>0&&(M._createTransceiver("audio"),W--),Y>0&&(M._createTransceiver("video"),Y--);var P=o.writeSessionBoilerplate(M._sdpSessionId,M._sdpSessionVersion++);M.transceivers.forEach(function(_,z){var ae=_.track,me=_.kind,ye=_.mid||o.generateIdentifier();_.mid=ye,_.iceGatherer||(_.iceGatherer=M._createIceGatherer(z,M.usingBundle));var Pe=b.RTCRtpSender.getCapabilities(me);S<15019&&(Pe.codecs=Pe.codecs.filter(function(Ue){return Ue.name!=="rtx"})),Pe.codecs.forEach(function(Ue){Ue.name==="H264"&&Ue.parameters["level-asymmetry-allowed"]===void 0&&(Ue.parameters["level-asymmetry-allowed"]="1"),_.remoteCapabilities&&_.remoteCapabilities.codecs&&_.remoteCapabilities.codecs.forEach(function(_e){Ue.name.toLowerCase()===_e.name.toLowerCase()&&Ue.clockRate===_e.clockRate&&(Ue.preferredPayloadType=_e.payloadType)})}),Pe.headerExtensions.forEach(function(Ue){var _e=_.remoteCapabilities&&_.remoteCapabilities.headerExtensions||[];_e.forEach(function(je){Ue.uri===je.uri&&(Ue.id=je.id)})});var Te=_.sendEncodingParameters||[{ssrc:(2*z+1)*1001}];ae&&S>=15019&&me==="video"&&!Te[0].rtx&&(Te[0].rtx={ssrc:Te[0].ssrc+1}),_.wantReceive&&(_.rtpReceiver=new b.RTCRtpReceiver(_.dtlsTransport,me)),_.localCapabilities=Pe,_.sendEncodingParameters=Te}),M._config.bundlePolicy!=="max-compat"&&(P+="a=group:BUNDLE "+M.transceivers.map(function(_){return _.mid}).join(" ")+`\r
`),P+=`a=ice-options:trickle\r
`,M.transceivers.forEach(function(_,z){P+=c(_,_.localCapabilities,"offer",_.stream,M._dtlsRole),P+=`a=rtcp-rsize\r
`,_.iceGatherer&&M.iceGatheringState!=="new"&&(z===0||!M.usingBundle)&&(_.iceGatherer.getLocalCandidates().forEach(function(ae){ae.component=1,P+="a="+o.writeCandidate(ae)+`\r
`}),_.iceGatherer.state==="completed"&&(P+=`a=end-of-candidates\r
`))});var j=new b.RTCSessionDescription({type:"offer",sdp:P});return n.resolve(j)},w.prototype.createAnswer=function(){var M=this;if(M._isClosed)return n.reject(v("InvalidStateError","Can not call createAnswer after close"));if(!(M.signalingState==="have-remote-offer"||M.signalingState==="have-local-pranswer"))return n.reject(v("InvalidStateError","Can not call createAnswer in signalingState "+M.signalingState));var W=o.writeSessionBoilerplate(M._sdpSessionId,M._sdpSessionVersion++);M.usingBundle&&(W+="a=group:BUNDLE "+M.transceivers.map(function(P){return P.mid}).join(" ")+`\r
`),W+=`a=ice-options:trickle\r
`;var Y=o.getMediaSections(M._remoteDescription.sdp).length;M.transceivers.forEach(function(P,j){if(!(j+1>Y)){if(P.rejected){P.kind==="application"?P.protocol==="DTLS/SCTP"?W+=`m=application 0 DTLS/SCTP 5000\r
`:W+="m=application 0 "+P.protocol+` webrtc-datachannel\r
`:P.kind==="audio"?W+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:P.kind==="video"&&(W+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),W+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+P.mid+`\r
`;return}if(P.stream){var _;P.kind==="audio"?_=P.stream.getAudioTracks()[0]:P.kind==="video"&&(_=P.stream.getVideoTracks()[0]),_&&S>=15019&&P.kind==="video"&&!P.sendEncodingParameters[0].rtx&&(P.sendEncodingParameters[0].rtx={ssrc:P.sendEncodingParameters[0].ssrc+1})}var z=l(P.localCapabilities,P.remoteCapabilities),ae=z.codecs.filter(function(me){return me.name.toLowerCase()==="rtx"}).length;!ae&&P.sendEncodingParameters[0].rtx&&delete P.sendEncodingParameters[0].rtx,W+=c(P,z,"answer",P.stream,M._dtlsRole),P.rtcpParameters&&P.rtcpParameters.reducedSize&&(W+=`a=rtcp-rsize\r
`)}});var H=new b.RTCSessionDescription({type:"answer",sdp:W});return n.resolve(H)},w.prototype.addIceCandidate=function(M){var W=this,Y;return M&&!(M.sdpMLineIndex!==void 0||M.sdpMid)?n.reject(new TypeError("sdpMLineIndex or sdpMid required")):new n(function(H,P){if(W._remoteDescription)if(!M||M.candidate==="")for(var j=0;j<W.transceivers.length&&!(!W.transceivers[j].rejected&&(W.transceivers[j].iceTransport.addRemoteCandidate({}),Y=o.getMediaSections(W._remoteDescription.sdp),Y[j]+=`a=end-of-candidates\r
`,W._remoteDescription.sdp=o.getDescription(W._remoteDescription.sdp)+Y.join(""),W.usingBundle));j++);else{var _=M.sdpMLineIndex;if(M.sdpMid){for(var z=0;z<W.transceivers.length;z++)if(W.transceivers[z].mid===M.sdpMid){_=z;break}}var ae=W.transceivers[_];if(ae){if(ae.rejected)return H();var me=Object.keys(M.candidate).length>0?o.parseCandidate(M.candidate):{};if(me.protocol==="tcp"&&(me.port===0||me.port===9)||me.component&&me.component!==1)return H();if((_===0||_>0&&ae.iceTransport!==W.transceivers[0].iceTransport)&&!g(ae.iceTransport,me))return P(v("OperationError","Can not add ICE candidate"));var ye=M.candidate.trim();ye.indexOf("a=")===0&&(ye=ye.substr(2)),Y=o.getMediaSections(W._remoteDescription.sdp),Y[_]+="a="+(me.type?ye:"end-of-candidates")+`\r
`,W._remoteDescription.sdp=o.getDescription(W._remoteDescription.sdp)+Y.join("")}else return P(v("OperationError","Can not add ICE candidate"))}else return P(v("InvalidStateError","Can not add ICE candidate without a remote description"));H()})},w.prototype.getStats=function(M){if(M&&M instanceof b.MediaStreamTrack){var W=null;if(this.transceivers.forEach(function(H){H.rtpSender&&H.rtpSender.track===M?W=H.rtpSender:H.rtpReceiver&&H.rtpReceiver.track===M&&(W=H.rtpReceiver)}),!W)throw v("InvalidAccessError","Invalid selector.");return W.getStats()}var Y=[];return this.transceivers.forEach(function(H){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(P){H[P]&&Y.push(H[P].getStats())})}),n.all(Y).then(function(H){var P=new Map;return H.forEach(function(j){j.forEach(function(_){P.set(_.id,_)})}),P})};var V=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];V.forEach(function(M){var W=b[M];if(W&&W.prototype&&W.prototype.getStats){var Y=W.prototype.getStats;W.prototype.getStats=function(){return Y.apply(this).then(function(H){var P=new Map;return Object.keys(H).forEach(function(j){H[j].type=a(H[j]),P.set(j,H[j])}),P})}}});var k=["createOffer","createAnswer"];return k.forEach(function(M){var W=w.prototype[M];w.prototype[M]=function(){var Y=arguments;return typeof Y[0]=="function"||typeof Y[1]=="function"?W.apply(this,[arguments[2]]).then(function(H){typeof Y[0]=="function"&&Y[0].apply(null,[H])},function(H){typeof Y[1]=="function"&&Y[1].apply(null,[H])}):W.apply(this,arguments)}}),k=["setLocalDescription","setRemoteDescription","addIceCandidate"],k.forEach(function(M){var W=w.prototype[M];w.prototype[M]=function(){var Y=arguments;return typeof Y[1]=="function"||typeof Y[2]=="function"?W.apply(this,arguments).then(function(){typeof Y[1]=="function"&&Y[1].apply(null)},function(H){typeof Y[2]=="function"&&Y[2].apply(null,[H])}):W.apply(this,arguments)}}),["getStats"].forEach(function(M){var W=w.prototype[M];w.prototype[M]=function(){var Y=arguments;return typeof Y[1]=="function"?W.apply(this,arguments).then(function(){typeof Y[1]=="function"&&Y[1].apply(null)}):W.apply(this,arguments)}}),w}}).call(this,e(1))},function(t,r,e){(function(n){t.exports=function(o){var a=o&&o.navigator,c=function(l){return{name:{PermissionDeniedError:"NotAllowedError"}[l.name]||l.name,message:l.message,constraint:l.constraint,toString:function(){return this.name}}},u=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(l){return u(l).catch(function(f){return n.reject(c(f))})}}}).call(this,e(1))},function(t,r,e){(function(n){var o=e(29);t.exports={shimGetUserMedia:e(571),shimOnTrack:function(a){typeof a=="object"&&a.RTCPeerConnection&&!("ontrack"in a.RTCPeerConnection.prototype)&&Object.defineProperty(a.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(c){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly)),this.addEventListener("track",this._ontrack=c),this.addEventListener("addstream",this._ontrackpoly=function(u){u.stream.getTracks().forEach(function(l){var f=new Event("track");f.track=l,f.receiver={track:l},f.transceiver={receiver:f.receiver},f.streams=[u.stream],this.dispatchEvent(f)}.bind(this))}.bind(this))},enumerable:!0,configurable:!0}),typeof a=="object"&&a.RTCTrackEvent&&"receiver"in a.RTCTrackEvent.prototype&&!("transceiver"in a.RTCTrackEvent.prototype)&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimSourceObject:function(a){typeof a=="object"&&a.HTMLMediaElement&&!("srcObject"in a.HTMLMediaElement.prototype)&&Object.defineProperty(a.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(c){this.mozSrcObject=c}})},shimPeerConnection:function(a){var c=o.detectBrowser(a);if(!(typeof a!="object"||!(a.RTCPeerConnection||a.mozRTCPeerConnection))){a.RTCPeerConnection||(a.RTCPeerConnection=function(v,b){if(c.version<38&&v&&v.iceServers){for(var S=[],C=0;C<v.iceServers.length;C++){var O=v.iceServers[C];if(O.hasOwnProperty("urls"))for(var A=0;A<O.urls.length;A++){var w={url:O.urls[A]};O.urls[A].indexOf("turn")===0&&(w.username=O.username,w.credential=O.credential),S.push(w)}else S.push(v.iceServers[C])}v.iceServers=S}return new a.mozRTCPeerConnection(v,b)},a.RTCPeerConnection.prototype=a.mozRTCPeerConnection.prototype,a.mozRTCPeerConnection.generateCertificate&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get:function(){return a.mozRTCPeerConnection.generateCertificate}}),a.RTCSessionDescription=a.mozRTCSessionDescription,a.RTCIceCandidate=a.mozRTCIceCandidate),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(v){var b=a.RTCPeerConnection.prototype[v];a.RTCPeerConnection.prototype[v]=function(){return arguments[0]=new(v==="addIceCandidate"?a.RTCIceCandidate:a.RTCSessionDescription)(arguments[0]),b.apply(this,arguments)}});var u=a.RTCPeerConnection.prototype.addIceCandidate;a.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?u.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),n.resolve())};var l=function(v){var b=new Map;return Object.keys(v).forEach(function(S){b.set(S,v[S]),b[S]=v[S]}),b},f={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},g=a.RTCPeerConnection.prototype.getStats;a.RTCPeerConnection.prototype.getStats=function(v,b,S){return g.apply(this,[v||null]).then(function(C){if(c.version<48&&(C=l(C)),c.version<53&&!b)try{C.forEach(function(O){O.type=f[O.type]||O.type})}catch(O){if(O.name!=="TypeError")throw O;C.forEach(function(A,w){C.set(w,Object.assign({},A,{type:f[A.type]||A.type}))})}return C}).then(b,S)}}},shimSenderGetStats:function(a){if(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&!(a.RTCRtpSender&&"getStats"in a.RTCRtpSender.prototype)){var c=a.RTCPeerConnection.prototype.getSenders;c&&(a.RTCPeerConnection.prototype.getSenders=function(){var l=this,f=c.apply(l,[]);return f.forEach(function(g){g._pc=l}),f});var u=a.RTCPeerConnection.prototype.addTrack;u&&(a.RTCPeerConnection.prototype.addTrack=function(){var l=u.apply(this,arguments);return l._pc=this,l}),a.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):n.resolve(new Map)}}},shimReceiverGetStats:function(a){if(typeof a=="object"&&a.RTCPeerConnection&&a.RTCRtpSender&&!(a.RTCRtpSender&&"getStats"in a.RTCRtpReceiver.prototype)){var c=a.RTCPeerConnection.prototype.getReceivers;c&&(a.RTCPeerConnection.prototype.getReceivers=function(){var u=this,l=c.apply(u,[]);return l.forEach(function(f){f._pc=u}),l}),o.wrapPeerConnectionEvent(a,"track",function(u){return u.receiver._pc=u.srcElement,u}),a.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},shimRemoveStream:function(a){!a.RTCPeerConnection||"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(c){var u=this;o.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(l){l.track&&c.getTracks().indexOf(l.track)!==-1&&u.removeTrack(l)})})},shimRTCDataChannel:function(a){a.DataChannel&&!a.RTCDataChannel&&(a.RTCDataChannel=a.DataChannel)},shimGetDisplayMedia:function(a,c){!a.navigator||!a.navigator.mediaDevices||"getDisplayMedia"in a.navigator.mediaDevices||(a.navigator.mediaDevices.getDisplayMedia=function(u){if(!(u&&u.video)){var l=new DOMException("getDisplayMedia without video constraints is undefined");return l.name="NotFoundError",l.code=8,n.reject(l)}return u.video===!0?u.video={mediaSource:c}:u.video.mediaSource=c,a.navigator.mediaDevices.getUserMedia(u)},a.navigator.getDisplayMedia=function(u){return o.deprecated("navigator.getDisplayMedia","navigator.mediaDevices.getDisplayMedia"),a.navigator.mediaDevices.getDisplayMedia(u)})}}}).call(this,e(1))},function(t,r,e){(function(n){var o=e(29),a=o.log;t.exports=function(c){var u=o.detectBrowser(c),l=c&&c.navigator,f=c&&c.MediaStreamTrack,g=function(k){return{name:{InternalError:"NotReadableError",NotSupportedError:"TypeError",PermissionDeniedError:"NotAllowedError",SecurityError:"NotAllowedError"}[k.name]||k.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[k.message]||k.message,constraint:k.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},v=function(k,M,W){var Y=function(H){if(typeof H!="object"||H.require)return H;var P=[];return Object.keys(H).forEach(function(j){if(!(j==="require"||j==="advanced"||j==="mediaSource")){var _=H[j]=typeof H[j]=="object"?H[j]:{ideal:H[j]};if((_.min!==void 0||_.max!==void 0||_.exact!==void 0)&&P.push(j),_.exact!==void 0&&(typeof _.exact=="number"?_.min=_.max=_.exact:H[j]=_.exact,delete _.exact),_.ideal!==void 0){H.advanced=H.advanced||[];var z={};typeof _.ideal=="number"?z[j]={min:_.ideal,max:_.ideal}:z[j]=_.ideal,H.advanced.push(z),delete _.ideal,Object.keys(_).length||delete H[j]}}}),P.length&&(H.require=P),H};return k=JSON.parse(JSON.stringify(k)),u.version<38&&(a("spec: "+JSON.stringify(k)),k.audio&&(k.audio=Y(k.audio)),k.video&&(k.video=Y(k.video)),a("ff37: "+JSON.stringify(k))),l.mozGetUserMedia(k,M,function(H){W(g(H))})},b=function(k){return new n(function(M,W){v(k,M,W)})};if(l.mediaDevices||(l.mediaDevices={getUserMedia:b,addEventListener:function(){},removeEventListener:function(){}}),l.mediaDevices.enumerateDevices=l.mediaDevices.enumerateDevices||function(){return new n(function(k){var M=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];k(M)})},u.version<41){var S=l.mediaDevices.enumerateDevices.bind(l.mediaDevices);l.mediaDevices.enumerateDevices=function(){return S().then(void 0,function(k){if(k.name==="NotFoundError")return[];throw k})}}if(u.version<49){var C=l.mediaDevices.getUserMedia.bind(l.mediaDevices);l.mediaDevices.getUserMedia=function(k){return C(k).then(function(M){if(k.audio&&!M.getAudioTracks().length||k.video&&!M.getVideoTracks().length)throw M.getTracks().forEach(function(W){W.stop()}),new DOMException("The object can not be found here.","NotFoundError");return M},function(M){return n.reject(g(M))})}}if(!(u.version>55&&"autoGainControl"in l.mediaDevices.getSupportedConstraints())){var O=function(k,M,W){M in k&&!(W in k)&&(k[W]=k[M],delete k[M])},A=l.mediaDevices.getUserMedia.bind(l.mediaDevices);if(l.mediaDevices.getUserMedia=function(k){return typeof k=="object"&&typeof k.audio=="object"&&(k=JSON.parse(JSON.stringify(k)),O(k.audio,"autoGainControl","mozAutoGainControl"),O(k.audio,"noiseSuppression","mozNoiseSuppression")),A(k)},f&&f.prototype.getSettings){var w=f.prototype.getSettings;f.prototype.getSettings=function(){var k=w.apply(this,arguments);return O(k,"mozAutoGainControl","autoGainControl"),O(k,"mozNoiseSuppression","noiseSuppression"),k}}if(f&&f.prototype.applyConstraints){var V=f.prototype.applyConstraints;f.prototype.applyConstraints=function(k){return this.kind==="audio"&&typeof k=="object"&&(k=JSON.parse(JSON.stringify(k)),O(k,"autoGainControl","mozAutoGainControl"),O(k,"noiseSuppression","mozNoiseSuppression")),V.apply(this,[k])}}}l.getUserMedia=function(k,M,W){if(u.version<44)return v(k,M,W);o.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),l.mediaDevices.getUserMedia(k).then(M,W)}}}).call(this,e(1))},function(t,r,e){(function(n){var o=e(29);t.exports={shimLocalStreamsAPI:function(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){if("getLocalStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),"getStreamById"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getStreamById=function(u){var l=null;return this._localStreams&&this._localStreams.forEach(function(f){f.id===u&&(l=f)}),this._remoteStreams&&this._remoteStreams.forEach(function(f){f.id===u&&(l=f)}),l}),!("addStream"in a.RTCPeerConnection.prototype)){var c=a.RTCPeerConnection.prototype.addTrack;a.RTCPeerConnection.prototype.addStream=function(u){this._localStreams||(this._localStreams=[]),this._localStreams.indexOf(u)===-1&&this._localStreams.push(u);var l=this;u.getTracks().forEach(function(f){c.call(l,f,u)})},a.RTCPeerConnection.prototype.addTrack=function(u,l){return l&&(this._localStreams?this._localStreams.indexOf(l)===-1&&this._localStreams.push(l):this._localStreams=[l]),c.call(this,u,l)}}"removeStream"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.removeStream=function(u){this._localStreams||(this._localStreams=[]);var l=this._localStreams.indexOf(u);if(l!==-1){this._localStreams.splice(l,1);var f=this,g=u.getTracks();this.getSenders().forEach(function(v){g.indexOf(v.track)!==-1&&f.removeTrack(v)})}})}},shimRemoteStreamsAPI:function(a){if(!(typeof a!="object"||!a.RTCPeerConnection)&&("getRemoteStreams"in a.RTCPeerConnection.prototype||(a.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in a.RTCPeerConnection.prototype))){Object.defineProperty(a.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(u){this._onaddstream&&this.removeEventListener("addstream",this._onaddstream),this.addEventListener("addstream",this._onaddstream=u)}});var c=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){var u=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(l){l.streams.forEach(function(f){if(u._remoteStreams||(u._remoteStreams=[]),!(u._remoteStreams.indexOf(f)>=0)){u._remoteStreams.push(f);var g=new Event("addstream");g.stream=f,u.dispatchEvent(g)}})}),c.apply(u,arguments)}}},shimCallbacksAPI:function(a){if(!(typeof a!="object"||!a.RTCPeerConnection)){var c=a.RTCPeerConnection.prototype,u=c.createOffer,l=c.createAnswer,f=c.setLocalDescription,g=c.setRemoteDescription,v=c.addIceCandidate;c.createOffer=function(S,C){var O=arguments.length>=2?arguments[2]:arguments[0],A=u.apply(this,[O]);return C?(A.then(S,C),n.resolve()):A},c.createAnswer=function(S,C){var O=arguments.length>=2?arguments[2]:arguments[0],A=l.apply(this,[O]);return C?(A.then(S,C),n.resolve()):A};var b=function(S,C,O){var A=f.apply(this,[S]);return O?(A.then(C,O),n.resolve()):A};c.setLocalDescription=b,b=function(S,C,O){var A=g.apply(this,[S]);return O?(A.then(C,O),n.resolve()):A},c.setRemoteDescription=b,b=function(S,C,O){var A=v.apply(this,[S]);return O?(A.then(C,O),n.resolve()):A},c.addIceCandidate=b}},shimGetUserMedia:function(a){var c=a&&a.navigator;c.getUserMedia||(c.webkitGetUserMedia?c.getUserMedia=c.webkitGetUserMedia.bind(c):c.mediaDevices&&c.mediaDevices.getUserMedia&&(c.getUserMedia=function(u,l,f){c.mediaDevices.getUserMedia(u).then(l,f)}.bind(c)))},shimRTCIceServerUrls:function(a){var c=a.RTCPeerConnection;a.RTCPeerConnection=function(u,l){if(u&&u.iceServers){for(var f=[],g=0;g<u.iceServers.length;g++){var v=u.iceServers[g];!v.hasOwnProperty("urls")&&v.hasOwnProperty("url")?(o.deprecated("RTCIceServer.url","RTCIceServer.urls"),v=JSON.parse(JSON.stringify(v)),v.urls=v.url,delete v.url,f.push(v)):f.push(u.iceServers[g])}u.iceServers=f}return new c(u,l)},a.RTCPeerConnection.prototype=c.prototype,"generateCertificate"in a.RTCPeerConnection&&Object.defineProperty(a.RTCPeerConnection,"generateCertificate",{get:function(){return c.generateCertificate}})},shimTrackEventTransceiver:function(a){typeof a=="object"&&a.RTCPeerConnection&&"receiver"in a.RTCTrackEvent.prototype&&!a.RTCTransceiver&&Object.defineProperty(a.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},shimCreateOfferLegacy:function(a){var c=a.RTCPeerConnection.prototype.createOffer;a.RTCPeerConnection.prototype.createOffer=function(u){var l=this;if(u){typeof u.offerToReceiveAudio<"u"&&(u.offerToReceiveAudio=!!u.offerToReceiveAudio);var f=l.getTransceivers().find(function(v){return v.sender.track&&v.sender.track.kind==="audio"});u.offerToReceiveAudio===!1&&f?f.direction==="sendrecv"?f.setDirection?f.setDirection("sendonly"):f.direction="sendonly":f.direction==="recvonly"&&(f.setDirection?f.setDirection("inactive"):f.direction="inactive"):u.offerToReceiveAudio===!0&&!f&&l.addTransceiver("audio"),typeof u.offerToReceiveVideo<"u"&&(u.offerToReceiveVideo=!!u.offerToReceiveVideo);var g=l.getTransceivers().find(function(v){return v.sender.track&&v.sender.track.kind==="video"});u.offerToReceiveVideo===!1&&g?g.direction==="sendrecv"?g.setDirection("sendonly"):g.direction==="recvonly"&&g.setDirection("inactive"):u.offerToReceiveVideo===!0&&!g&&l.addTransceiver("video")}return c.apply(l,arguments)}}}}).call(this,e(1))},function(t,r,e){var n=e(251),o=e(29);t.exports={shimRTCIceCandidate:function(a){if(!(!a.RTCIceCandidate||a.RTCIceCandidate&&"foundation"in a.RTCIceCandidate.prototype)){var c=a.RTCIceCandidate;a.RTCIceCandidate=function(u){if(typeof u=="object"&&u.candidate&&u.candidate.indexOf("a=")===0&&(u=JSON.parse(JSON.stringify(u)),u.candidate=u.candidate.substr(2)),u.candidate&&u.candidate.length){var l=new c(u),f=n.parseCandidate(u.candidate),g=Object.assign(l,f);return g.toJSON=function(){return{candidate:g.candidate,sdpMid:g.sdpMid,sdpMLineIndex:g.sdpMLineIndex,usernameFragment:g.usernameFragment}},g}return new c(u)},a.RTCIceCandidate.prototype=c.prototype,o.wrapPeerConnectionEvent(a,"icecandidate",function(u){return u.candidate&&Object.defineProperty(u,"candidate",{value:new a.RTCIceCandidate(u.candidate),writable:"false"}),u})}},shimCreateObjectURL:function(a){var c=a&&a.URL;if(typeof a=="object"&&a.HTMLMediaElement&&"srcObject"in a.HTMLMediaElement.prototype&&c.createObjectURL&&c.revokeObjectURL){var u=c.createObjectURL.bind(c),l=c.revokeObjectURL.bind(c),f=new Map,g=0;c.createObjectURL=function(S){if("getTracks"in S){var C="polyblob:"+ ++g;return f.set(C,S),o.deprecated("URL.createObjectURL(stream)","elem.srcObject = stream"),C}return u(S)},c.revokeObjectURL=function(S){l(S),f.delete(S)};var v=Object.getOwnPropertyDescriptor(a.HTMLMediaElement.prototype,"src");Object.defineProperty(a.HTMLMediaElement.prototype,"src",{get:function(){return v.get.apply(this)},set:function(S){return this.srcObject=f.get(S)||null,v.set.apply(this,[S])}});var b=a.HTMLMediaElement.prototype.setAttribute;a.HTMLMediaElement.prototype.setAttribute=function(){return arguments.length===2&&(""+arguments[0]).toLowerCase()==="src"&&(this.srcObject=f.get(arguments[1])||null),b.apply(this,arguments)}}},shimMaxMessageSize:function(a){if(!(a.RTCSctpTransport||!a.RTCPeerConnection)){var c=o.detectBrowser(a);"sctp"in a.RTCPeerConnection.prototype||Object.defineProperty(a.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp}});var u=function(b){var S=n.splitSections(b.sdp);return S.shift(),S.some(function(C){var O=n.parseMLine(C);return O&&O.kind==="application"&&O.protocol.indexOf("SCTP")!==-1})},l=function(b){var S=b.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(S===null||S.length<2)return-1;var C=parseInt(S[1],10);return C!==C?-1:C},f=function(b){var S=65536;return c.browser==="firefox"&&(c.version<57?b===-1?S=16384:S=2147483637:c.version<60?S=c.version===57?65535:65536:S=2147483637),S},g=function(b,S){var C=65536;c.browser==="firefox"&&c.version===57&&(C=65535);var O=n.matchPrefix(b.sdp,"a=max-message-size:");return O.length>0?C=parseInt(O[0].substr(19),10):c.browser==="firefox"&&S!==-1&&(C=2147483637),C},v=a.RTCPeerConnection.prototype.setRemoteDescription;a.RTCPeerConnection.prototype.setRemoteDescription=function(){var b=this;if(b._sctp=null,u(arguments[0])){var S=l(arguments[0]),C=f(S),O=g(arguments[0],S),A;C===0&&O===0?A=Number.POSITIVE_INFINITY:C===0||O===0?A=Math.max(C,O):A=Math.min(C,O);var w={};Object.defineProperty(w,"maxMessageSize",{get:function(){return A}}),b._sctp=w}return v.apply(b,arguments)}}},shimSendThrowTypeError:function(a){if(!(a.RTCPeerConnection&&"createDataChannel"in a.RTCPeerConnection.prototype))return;function c(l,f){var g=l.send;l.send=function(){var v=arguments[0],b=v.length||v.size||v.byteLength;if(l.readyState==="open"&&f.sctp&&b>f.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+f.sctp.maxMessageSize+" bytes)");return g.apply(l,arguments)}}var u=a.RTCPeerConnection.prototype.createDataChannel;a.RTCPeerConnection.prototype.createDataChannel=function(){var l=this,f=u.apply(l,arguments);return c(f,l),f},o.wrapPeerConnectionEvent(a,"datachannel",function(l){return c(l.channel,l.target),l})}}},function(t,r,e){(function(n){const o=e(6);function a(){return typeof document>"u"||document.readyState==="complete"||document.readyState==="interactive"&&document.body}let c=!1;const u={isDomLoaded:a,isDomUnloaded(){return c},whenUnloaded:new n(l=>{if(typeof window<"u"){const f=()=>{c=!0,u.emit("unload"),l()};window.addEventListener("unload",f)}}),whenLoaded:new n(l=>{if(a()){l();return}const f=()=>{document.removeEventListener("DOMContentLoaded",f),document.removeEventListener("load",f),u.emit("load"),l()};document.addEventListener("DOMContentLoaded",f),document.addEventListener("load",f)})};o(u),t.exports=u}).call(this,e(1))},function(t,r,e){var n=e(79),o=e(256),a=e(239),c=e(576),u=e(11),l=e(55),f=e(257);function g(v,b,S,C,O){v!==b&&a(b,function(A,w){if(O||(O=new n),u(A))c(v,b,w,S,g,C,O);else{var V=C?C(f(v,w),A,w+"",v,b,O):void 0;V===void 0&&(V=A),o(v,w,V)}},l)}t.exports=g},function(t,r,e){var n=e(256),o=e(180),a=e(189),c=e(56),u=e(190),l=e(65),f=e(12),g=e(133),v=e(66),b=e(18),S=e(11),C=e(139),O=e(86),A=e(257),w=e(577);function V(k,M,W,Y,H,P,j){var _=A(k,W),z=A(M,W),ae=j.get(z);if(ae){n(k,W,ae);return}var me=P?P(_,z,W+"",k,M,j):void 0,ye=me===void 0;if(ye){var Pe=f(z),Te=!Pe&&v(z),Ue=!Pe&&!Te&&O(z);me=z,Pe||Te||Ue?f(_)?me=_:g(_)?me=c(_):Te?(ye=!1,me=o(z,!0)):Ue?(ye=!1,me=a(z,!0)):me=[]:C(z)||l(z)?(me=_,l(_)?me=w(_):(!S(_)||b(_))&&(me=u(z))):ye=!1}ye&&(j.set(z,me),H(me,z,Y,P,j),j.delete(z)),n(k,W,me)}t.exports=V},function(t,r,e){var n=e(42),o=e(55);function a(c){return n(c,o(c))}t.exports=a},function(t,r,e){const n=e(149),o=e(258),a=e(259),c=e(264),u=e(2)("normalizeConstraintInput"),l={"320x240":{width:320,height:240},"320x180":{width:320,height:180},"640x480":{width:640,height:480},"640x360":{width:640,height:360},"1280x720":{width:1280,height:720},"1280x960":{width:1280,height:960},"1920x1080":{width:1920,height:1080}},f=[1,7,15,30];function g(A){return A._inject&&A._inject.logging||u}function v(A,w,V,k,M){if(w===void 0)return;const W=V(w);return W||M.warn(`Invalid ${A} passed to the Publisher. Got: ${w}, expecting one of ${k}`),W}function b(A,w){const V=g(w),k=(()=>{const W=w[`publish${a(A)}`];return W!==void 0?Boolean(W):!0})();let M=(()=>{const W=w[`${A}Source`];return W===void 0?!0:W===null||W===!1?!1:typeof W=="object"?w[`isCustom${a(A)}Track`]?!1:typeof W.deviceId!="string"?(V.warn(`Invalid ${A}Source passed to Publisher. Expected either a device ID or device.`),!0):W.deviceId:typeof W!="string"?(V.warn(`Ignoring invalid ${A}Source parameter`),!0):W})();return A==="audio"&&w.isScreenSharing&&!c&&M!==!1&&(w.audioSource&&g(w).warn("Invalid audioSource passed to Publisher - when using screen sharing no audioSource may be used"),M=!1),{source:M,publish:k}}function S(A,w){return A.name==="Chrome"&&A.userAgent.indexOf("Mac OS X")!==-1&&w===1?2:w}const C=["user","environment","left","right"],O=(A,w)=>{if(A===void 0||C.indexOf(A)>=0)return A;g(w).warn(`Invalid facingMode passed to Publisher. Expected one of: ${C.join(", ")}`)};t.exports=function(w){const V=g(w),k=w.env||{},M=w.isScreenSharing,W=w.isCustomAudioTrack,Y=w.isCustomVideoTrack;return M&&!o&&n(w.usingOptionalMandatoryStyle,"Screensharing only uses optional-mandatory constraints right now"),["echoCancellation","autoGainControl","noiseSuppression"].forEach(H=>{w[H]!==!1&&Object.assign(w,{[H]:!0})}),{isScreenSharing:M,isCustomAudioTrack:W,isCustomVideoTrack:Y,audio:b("audio",w),video:b("video",w),usingOptionalMandatoryStyle:w.usingOptionalMandatoryStyle,enableRenegotiation:w.enableRenegotiation,enableStereo:w.enableStereo,noiseSuppression:w.noiseSuppression,autoGainControl:w.autoGainControl,echoCancellation:w.echoCancellation,disableAudioProcessing:w.disableAudioProcessing,videoDimensions:v("resolution",w.resolution,H=>l[H],`"${Object.keys(l).join('", "')}"`,V),frameRate:S(k,v("frameRate",w.frameRate,H=>f.indexOf(H)!==-1?H:void 0,f.join(","),V)),maxResolution:function(){if(w.maxResolution===void 0)return M?{width:1920,height:1920}:void 0;const H={width:w.maxResolution.width,height:w.maxResolution.height};return Object.keys(H).forEach(P=>{const j=H[P];(typeof j!="number"||j>1920)&&(V.warn(`Invalid maxResolution passed to the Publisher. maxResolution.${P} must be less than or equal to 1920`),H[P]=1920)}),H}(),facingMode:O(w.facingMode,w)}}},function(t,r,e){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function c(l){if(l==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(l)}function u(){try{if(!Object.assign)return!1;var l=new String("abc");if(l[5]="de",Object.getOwnPropertyNames(l)[0]==="5")return!1;for(var f={},g=0;g<10;g++)f["_"+String.fromCharCode(g)]=g;var v=Object.getOwnPropertyNames(f).map(function(S){return f[S]});if(v.join("")!=="0123456789")return!1;var b={};return"abcdefghijklmnopqrst".split("").forEach(function(S){b[S]=S}),Object.keys(Object.assign({},b)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}t.exports=u()?Object.assign:function(l,f){for(var g,v=c(l),b,S=1;S<arguments.length;S++){g=Object(arguments[S]);for(var C in g)o.call(g,C)&&(v[C]=g[C]);if(n){b=n(g);for(var O=0;O<b.length;O++)a.call(g,b[O])&&(v[b[O]]=g[b[O]])}}return v}},function(t,r,e){(function(n,o){var a=Object.getOwnPropertyDescriptors||function(Le){for(var We=Object.keys(Le),ut={},bt=0;bt<We.length;bt++)ut[We[bt]]=Object.getOwnPropertyDescriptor(Le,We[bt]);return ut},c=/%[sdj%]/g;r.format=function(Ee){if(!P(Ee)){for(var Le=[],We=0;We<arguments.length;We++)Le.push(f(arguments[We]));return Le.join(" ")}for(var We=1,ut=arguments,bt=ut.length,mt=String(Ee).replace(c,function(Ge){if(Ge==="%%")return"%";if(We>=bt)return Ge;switch(Ge){case"%s":return String(ut[We++]);case"%d":return Number(ut[We++]);case"%j":try{return JSON.stringify(ut[We++])}catch{return"[Circular]"}default:return Ge}}),It=ut[We];We<bt;It=ut[++We])W(It)||!ae(It)?mt+=" "+It:mt+=" "+f(It);return mt},r.deprecate=function(Ee,Le){if(typeof n<"u"&&n.noDeprecation===!0)return Ee;if(typeof n>"u")return function(){return r.deprecate(Ee,Le).apply(this,arguments)};var We=!1;function ut(){if(!We){if(n.throwDeprecation)throw new Error(Le);n.traceDeprecation?console.trace(Le):console.error(Le),We=!0}return Ee.apply(this,arguments)}return ut};var u={},l;r.debuglog=function(Ee){if(_(l)&&(l={}.NODE_DEBUG||""),Ee=Ee.toUpperCase(),!u[Ee])if(new RegExp("\\b"+Ee+"\\b","i").test(l)){var Le=n.pid;u[Ee]=function(){var We=r.format.apply(r,arguments);console.error("%s %d: %s",Ee,Le,We)}}else u[Ee]=function(){};return u[Ee]};function f(Ee,Le){var We={seen:[],stylize:v};return arguments.length>=3&&(We.depth=arguments[2]),arguments.length>=4&&(We.colors=arguments[3]),M(Le)?We.showHidden=Le:Le&&r._extend(We,Le),_(We.showHidden)&&(We.showHidden=!1),_(We.depth)&&(We.depth=2),_(We.colors)&&(We.colors=!1),_(We.customInspect)&&(We.customInspect=!0),We.colors&&(We.stylize=g),S(We,Ee,We.depth)}r.inspect=f,f.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},f.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function g(Ee,Le){var We=f.styles[Le];return We?"\x1B["+f.colors[We][0]+"m"+Ee+"\x1B["+f.colors[We][1]+"m":Ee}function v(Ee,Le){return Ee}function b(Ee){var Le={};return Ee.forEach(function(We,ut){Le[We]=!0}),Le}function S(Ee,Le,We){if(Ee.customInspect&&Le&&Pe(Le.inspect)&&Le.inspect!==r.inspect&&!(Le.constructor&&Le.constructor.prototype===Le)){var ut=Le.inspect(We,Ee);return P(ut)||(ut=S(Ee,ut,We)),ut}var bt=C(Ee,Le);if(bt)return bt;var mt=Object.keys(Le),It=b(mt);if(Ee.showHidden&&(mt=Object.getOwnPropertyNames(Le)),ye(Le)&&(mt.indexOf("message")>=0||mt.indexOf("description")>=0))return O(Le);if(mt.length===0){if(Pe(Le)){var Ge=Le.name?": "+Le.name:"";return Ee.stylize("[Function"+Ge+"]","special")}if(z(Le))return Ee.stylize(RegExp.prototype.toString.call(Le),"regexp");if(me(Le))return Ee.stylize(Date.prototype.toString.call(Le),"date");if(ye(Le))return O(Le)}var Qe="",Et=!1,Tt=["{","}"];if(k(Le)&&(Et=!0,Tt=["[","]"]),Pe(Le)){var Zt=Le.name?": "+Le.name:"";Qe=" [Function"+Zt+"]"}if(z(Le)&&(Qe=" "+RegExp.prototype.toString.call(Le)),me(Le)&&(Qe=" "+Date.prototype.toUTCString.call(Le)),ye(Le)&&(Qe=" "+O(Le)),mt.length===0&&(!Et||Le.length==0))return Tt[0]+Qe+Tt[1];if(We<0)return z(Le)?Ee.stylize(RegExp.prototype.toString.call(Le),"regexp"):Ee.stylize("[Object]","special");Ee.seen.push(Le);var $t;return Et?$t=A(Ee,Le,We,It,mt):$t=mt.map(function(pt){return w(Ee,Le,We,It,pt,Et)}),Ee.seen.pop(),V($t,Qe,Tt)}function C(Ee,Le){if(_(Le))return Ee.stylize("undefined","undefined");if(P(Le)){var We="'"+JSON.stringify(Le).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return Ee.stylize(We,"string")}if(H(Le))return Ee.stylize(""+Le,"number");if(M(Le))return Ee.stylize(""+Le,"boolean");if(W(Le))return Ee.stylize("null","null")}function O(Ee){return"["+Error.prototype.toString.call(Ee)+"]"}function A(Ee,Le,We,ut,bt){for(var mt=[],It=0,Ge=Le.length;It<Ge;++It)De(Le,String(It))?mt.push(w(Ee,Le,We,ut,String(It),!0)):mt.push("");return bt.forEach(function(Qe){Qe.match(/^\d+$/)||mt.push(w(Ee,Le,We,ut,Qe,!0))}),mt}function w(Ee,Le,We,ut,bt,mt){var It,Ge,Qe;if(Qe=Object.getOwnPropertyDescriptor(Le,bt)||{value:Le[bt]},Qe.get?Qe.set?Ge=Ee.stylize("[Getter/Setter]","special"):Ge=Ee.stylize("[Getter]","special"):Qe.set&&(Ge=Ee.stylize("[Setter]","special")),De(ut,bt)||(It="["+bt+"]"),Ge||(Ee.seen.indexOf(Qe.value)<0?(W(We)?Ge=S(Ee,Qe.value,null):Ge=S(Ee,Qe.value,We-1),Ge.indexOf(`
`)>-1&&(mt?Ge=Ge.split(`
`).map(function(Et){return"  "+Et}).join(`
`).substr(2):Ge=`
`+Ge.split(`
`).map(function(Et){return"   "+Et}).join(`
`))):Ge=Ee.stylize("[Circular]","special")),_(It)){if(mt&&bt.match(/^\d+$/))return Ge;It=JSON.stringify(""+bt),It.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(It=It.substr(1,It.length-2),It=Ee.stylize(It,"name")):(It=It.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),It=Ee.stylize(It,"string"))}return It+": "+Ge}function V(Ee,Le,We){var ut=Ee.reduce(function(bt,mt){return mt.indexOf(`
`)>=0,bt+mt.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ut>60?We[0]+(Le===""?"":Le+`
 `)+" "+Ee.join(`,
  `)+" "+We[1]:We[0]+Le+" "+Ee.join(", ")+" "+We[1]}function k(Ee){return Array.isArray(Ee)}r.isArray=k;function M(Ee){return typeof Ee=="boolean"}r.isBoolean=M;function W(Ee){return Ee===null}r.isNull=W;function Y(Ee){return Ee==null}r.isNullOrUndefined=Y;function H(Ee){return typeof Ee=="number"}r.isNumber=H;function P(Ee){return typeof Ee=="string"}r.isString=P;function j(Ee){return typeof Ee=="symbol"}r.isSymbol=j;function _(Ee){return Ee===void 0}r.isUndefined=_;function z(Ee){return ae(Ee)&&Ue(Ee)==="[object RegExp]"}r.isRegExp=z;function ae(Ee){return typeof Ee=="object"&&Ee!==null}r.isObject=ae;function me(Ee){return ae(Ee)&&Ue(Ee)==="[object Date]"}r.isDate=me;function ye(Ee){return ae(Ee)&&(Ue(Ee)==="[object Error]"||Ee instanceof Error)}r.isError=ye;function Pe(Ee){return typeof Ee=="function"}r.isFunction=Pe;function Te(Ee){return Ee===null||typeof Ee=="boolean"||typeof Ee=="number"||typeof Ee=="string"||typeof Ee=="symbol"||typeof Ee>"u"}r.isPrimitive=Te,r.isBuffer=e(581);function Ue(Ee){return Object.prototype.toString.call(Ee)}function _e(Ee){return Ee<10?"0"+Ee.toString(10):Ee.toString(10)}var je=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Ke(){var Ee=new Date,Le=[_e(Ee.getHours()),_e(Ee.getMinutes()),_e(Ee.getSeconds())].join(":");return[Ee.getDate(),je[Ee.getMonth()],Le].join(" ")}r.log=function(){console.log("%s - %s",Ke(),r.format.apply(r,arguments))},r.inherits=e(582),r._extend=function(Ee,Le){if(!Le||!ae(Le))return Ee;for(var We=Object.keys(Le),ut=We.length;ut--;)Ee[We[ut]]=Le[We[ut]];return Ee};function De(Ee,Le){return Object.prototype.hasOwnProperty.call(Ee,Le)}var Ze=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(Le){if(typeof Le!="function")throw new TypeError('The "original" argument must be of type Function');if(Ze&&Le[Ze]){var We=Le[Ze];if(typeof We!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(We,Ze,{value:We,enumerable:!1,writable:!1,configurable:!0}),We}function We(){for(var ut,bt,mt=new o(function(Qe,Et){ut=Qe,bt=Et}),It=[],Ge=0;Ge<arguments.length;Ge++)It.push(arguments[Ge]);It.push(function(Qe,Et){Qe?bt(Qe):ut(Et)});try{Le.apply(this,It)}catch(Qe){bt(Qe)}return mt}return Object.setPrototypeOf(We,Object.getPrototypeOf(Le)),Ze&&Object.defineProperty(We,Ze,{value:We,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(We,a(Le))},r.promisify.custom=Ze;function tt(Ee,Le){if(!Ee){var We=new Error("Promise was rejected with a falsy value");We.reason=Ee,Ee=We}return Le(Ee)}function gt(Ee){if(typeof Ee!="function")throw new TypeError('The "original" argument must be of type Function');function Le(){for(var We=[],ut=0;ut<arguments.length;ut++)We.push(arguments[ut]);var bt=We.pop();if(typeof bt!="function")throw new TypeError("The last argument must be of type Function");var mt=this,It=function(){return bt.apply(mt,arguments)};Ee.apply(this,We).then(function(Ge){n.nextTick(It,null,Ge)},function(Ge){n.nextTick(tt,Ge,It)})}return Object.setPrototypeOf(Le,Object.getPrototypeOf(Ee)),Object.defineProperties(Le,a(Ee)),Le}r.callbackify=gt}).call(this,e(44),e(1))},function(t,r){t.exports=function(n){return n&&typeof n=="object"&&typeof n.copy=="function"&&typeof n.fill=="function"&&typeof n.readUInt8=="function"}},function(t,r){typeof Object.create=="function"?t.exports=function(n,o){n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(n,o){n.super_=o;var a=function(){};a.prototype=o.prototype,n.prototype=new a,n.prototype.constructor=n}},function(t,r,e){var n=e(584),o=e(262),a=e(263),c=e(61);function u(l){return function(f){f=c(f);var g=o(f)?a(f):void 0,v=g?g[0]:f.charAt(0),b=g?n(g,1).join(""):f.slice(1);return v[l]()+b}}t.exports=u},function(t,r,e){var n=e(261);function o(a,c,u){var l=a.length;return u=u===void 0?l:u,!c&&u>=l?a:n(a,c,u)}t.exports=o},function(t,r){function e(n){return n.split("")}t.exports=e},function(t,r){var e="\\ud800-\\udfff",n="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",c=n+o+a,u="\\ufe0e\\ufe0f",l="["+e+"]",f="["+c+"]",g="\\ud83c[\\udffb-\\udfff]",v="(?:"+f+"|"+g+")",b="[^"+e+"]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",C="[\\ud800-\\udbff][\\udc00-\\udfff]",O="\\u200d",A=v+"?",w="["+u+"]?",V="(?:"+O+"(?:"+[b,S,C].join("|")+")"+w+A+")*",k=w+A+V,M="(?:"+[b+f+"?",f,S,C,l].join("|")+")",W=RegExp(g+"(?="+g+")|"+M+k,"g");function Y(H){return H.match(W)||[]}t.exports=Y},function(t,r,e){t.exports=["screen","window","tab","browser","application"]},function(t,r,e){const n=e(2),o=e(35)(),a=e(51),c=e(123),u=e(590),l=e(593),f="/opentok/webrtc/docs/js/release-notes.html",g=o.onlyLocal(),v=n("setLogLevel"),b=`
          
   
               
               
              
                   `,S=a(()=>{v.info(`%c${b}`,'font-family: "Fire Code", Courier, "Courier New", Consolas, "DejaVu Sans Mono"'),v.info(`OpenTok JS SDK ${g.version}`),v.info(`Release notes: ${g.websiteUrl}${f}`),v.info(`Known issues: ${g.websiteUrl}${f}l#knownIssues`)});function C(O){if(O===void 0||!u(c,{priority:O})&&O!==0){const w=l(c,(V,k)=>`OT.${k.toUpperCase()} = ${V.priority}`).join(", ");v.error(`level must be one of: OT.NONE = 0, ${w}`),v.warn("Using OT.WARN instead"),O=c.warn.priority}n.setLogLevel(O),O>=c.debug.priority&&S();const A="https://www.npmjs.com/package/debug#browser-support";return v.info(`OpenTok JS SDK now uses the debug library. More info at ${A}`),v.info(`Changed log level to: ${O}`),O}C(g.debug?c.debug.priority:c.warn.priority),t.exports=C},function(t,r,e){var n=e(97),o="Expected a function";function a(c,u){var l;if(typeof u!="function")throw new TypeError(o);return c=n(c),function(){return--c>0&&(l=u.apply(this,arguments)),c<=1&&(u=void 0),l}}t.exports=a},function(t,r,e){var n=e(232),o=e(36),a=e(591),c=e(12),u=e(126);function l(f,g,v){var b=c(f)?n:a;return v&&u(f,g,v)&&(g=void 0),b(f,o(g,3))}t.exports=l},function(t,r,e){var n=e(266);function o(a,c){var u;return n(a,function(l,f,g){return u=c(l,f,g),!u}),!!u}t.exports=o},function(t,r,e){var n=e(25);function o(a,c){return function(u,l){if(u==null)return u;if(!n(u))return a(u,l);for(var f=u.length,g=c?f:-1,v=Object(u);(c?g--:++g<f)&&l(v[g],g,v)!==!1;);return u}}t.exports=o},function(t,r,e){var n=e(34),o=e(36),a=e(594),c=e(12);function u(l,f){var g=c(l)?n:a;return g(l,o(f,3))}t.exports=u},function(t,r,e){var n=e(266),o=e(25);function a(c,u){var l=-1,f=o(c)?Array(c.length):[];return n(c,function(g,v,b){f[++l]=u(g,v,b)}),f}t.exports=a},function(t,r,e){t.exports=function(o){return o.substr(0,5)!=="http:"&&o.substr(0,6)!=="https:"&&o.substr(0,22)!=="data:image/png;base64,"?`data:image/png;base64,${o}`:o}},function(t,r,e){const n=e(58),o=e(2)("Style");t.exports=function(c,u){const l=this,f={},g={buttonDisplayMode:["auto","mini","mini-auto","off","on"],nameDisplayMode:["auto","off","on"],audioLevelDisplayMode:["auto","off","on"],showSettingsButton:[!0,!1],showSpeakerButton:null,showMicButton:[!0,!1],backgroundImageURI:null,showControlBar:[!0,!1],showArchiveStatus:[!0,!1],archiveStatusDisplayMode:["auto","off","on"],videoDisabledDisplayMode:["auto","off","on"],audioBlockedDisplayMode:["auto","off","on"]},v=function(C,O){const A=g[C];return A===void 0?!1:A===null?!0:A.indexOf(O)!==-1},b=function(C){switch(C){case"true":return!0;case"false":return!1;default:return C}};l.getAll=function(){return n(f)},l.get=function(S){return S?f[S]:l.getAll()},l.setAll=function(S,C){return Object.keys(S).forEach(O=>{l.set(O,S[O],C)}),l},l.set=function(S,C,O){o.debug(`setStyle: ${S.toString()}`);let A;const w=b(C);return v(S,w)?(A=f[S],w!==A&&(f[S]=w,O||u(S,C,A)),l):(o.warn(`Style.set::Invalid style property passed ${S} : ${w}`),l)},c&&l.setAll(c,!0)}},function(t,r,e){const n=e(3),o=e(270),a=()=>n.isIosWebView?!1:o()?!0:(typeof window!==void 0?window:commonjsGlobal).navigator.mediaDevices&&(typeof window!==void 0?window:commonjsGlobal).navigator.mediaDevices.getUserMedia||(typeof window!==void 0?window:commonjsGlobal).navigator.webkitGetUserMedia||(typeof window!==void 0?window:commonjsGlobal).navigator.mozGetUserMedia;t.exports=()=>Boolean(n.name!=="Node"&&a())},function(t,r,e){const n=e(3);t.exports=()=>n.name==="Node"?!1:typeof(typeof window!==void 0?window:commonjsGlobal).webkitRTCPeerConnection=="function"&&(typeof window!==void 0?window:commonjsGlobal).webkitRTCPeerConnection.prototype.addTrack||typeof(typeof window!==void 0?window:commonjsGlobal).RTCPeerConnection=="function"?!0:typeof(typeof window!==void 0?window:commonjsGlobal).mozRTCPeerConnection=="function"&&n.version>20},function(t,r,e){t.exports=(typeof window!==void 0?window:commonjsGlobal).WebSocket!==void 0},function(t,r){t.exports=`<div id="tb_alert"><div id="section-normal-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div></div><div id="section-upgrade-install" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com/chrome/">Google Chrome</a>, <a target="_blank" href="http://www.mozilla.org/firefox">Firefox</a>, <a target="_blank" href="https://www.microsoft.com/en-us/edge">Edge</a>, or <a target="_blank" href="https://www.apple.com/safari/">Safari</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-supported-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application requires a newer version of <a target="_blank" href="https://www.google.com.au/chrome/browser/mobile/">Google Chrome</a>.</div><div class="continue-text"><a href="#" role="OT_close">Continue at my own risk.</a></div></div><div id="section-mobile-browser" class="OT_alert"><div class="OT_alert-exclamation">!</div><button class="OT_alert-close-button" role="OT_close">&#x00D7;</button><div class="OT_alert-header" data-text="Incompatible Browser">Incompatible Browser</div><div class="OT_alert-body">The video component of this application is not supported on your mobile device's browser at this time.</div></div></div>`},function(t,r,e){var n=e(0),o=n(e(37));const a=e(28);t.exports=function(c){(0,o.default)(u,c);function u(f,g){var v;let b=g===void 0?{}:g,S=b.destroyOnClose,C=S===void 0?!0:S;v=c.call(this)||this,v.modalDiv=document.createElement("div"),v.modalDiv.classList.add("OT_ModalDialog"),v.modalDiv.innerHTML=f;const O=v.modalDiv.querySelectorAll("[role=OT_close]");return[].forEach.call(O,A=>A.addEventListener("click",w=>{w.preventDefault(),v.close()})),v.close(),document.body.appendChild(v.modalDiv),C&&v.on("closed",()=>v.destroy()),v}var l=u.prototype;return l.open=function(){this.modalDiv.style.display="block",this.emit("opened")},l.close=function(){this.modalDiv.style.display="none",this.emit("closed")},l.destroy=function(){this.modalDiv.innerHTML="",this.modalDiv.parentNode.removeChild(this.modalDiv),this.emit("destroyed")},l.el=function(g){return this.modalDiv.querySelector(g)},u}(a)},function(t,r,e){const n=e(26);t.exports=function(o){o===void 0&&(o={});const a=o.env||e(3),c=o.analytics||new n;c.logEvent({action:"UserAgentParsing",variation:"Attempt",payload:{userAgent:a.userAgent}}),c.logEvent({action:"UserAgentParsing",variation:a.error?"Failure":"Success",payload:{userAgent:a.userAgent}})}},function(t,r,e){var n=e(604),o=e(271),a=e(605),c=e(606);function u(l){var f=typeof Map=="function"?new Map:void 0;return t.exports=u=function(v){if(v===null||!a(v))return v;if(typeof v!="function")throw new TypeError("Super expression must either be null or a function");if(typeof f<"u"){if(f.has(v))return f.get(v);f.set(v,b)}function b(){return c(v,arguments,n(this).constructor)}return b.prototype=Object.create(v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),o(b,v)},u(l)}t.exports=u},function(t,r){function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},e(n)}t.exports=e},function(t,r){function e(n){return Function.toString.call(n).indexOf("[native code]")!==-1}t.exports=e},function(t,r,e){var n=e(271);function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function a(c,u,l){return o()?t.exports=a=Reflect.construct:t.exports=a=function(g,v,b){var S=[null];S.push.apply(S,v);var C=Function.bind.apply(g,S),O=new C;return b&&n(O,b.prototype),O},a.apply(null,arguments)}t.exports=a},function(t,r,e){(function(n){t.exports=(o,a)=>(a=a||(()=>{}),o.then(c=>new n(u=>{u(a())}).then(()=>c),c=>new n(u=>{u(a())}).then(()=>{throw c})))}).call(this,e(1))},function(t,r,e){var n=e(60),o=e(609),a=e(610),c=e(48);function u(l,f){return f=n(f,l),l=a(l,f),l==null||delete l[c(o(f))]}t.exports=u},function(t,r){function e(n){var o=n==null?0:n.length;return o?n[o-1]:void 0}t.exports=e},function(t,r,e){var n=e(99),o=e(261);function a(c,u){return u.length<2?c:n(c,o(u,0,-1))}t.exports=a},function(t,r,e){var n=e(139);function o(a){return n(a)?void 0:a}t.exports=o},function(t,r,e){var n=e(36),o=e(25),a=e(31);function c(u){return function(l,f,g){var v=Object(l);if(!o(l)){var b=n(f,3);l=a(l),f=function(C){return b(v[C],C,v)}}var S=u(l,f,g);return S>-1?v[b?l[S]:S]:void 0}}t.exports=c},function(t,r,e){var n=e(93),o=e(94),a=e(132),c=e(95),u=e(614),l=e(98),f=200;function g(v,b,S){var C=-1,O=o,A=v.length,w=!0,V=[],k=V;if(S)w=!1,O=a;else if(A>=f){var M=b?null:u(v);if(M)return l(M);w=!1,O=c,k=new n}else k=b?[]:V;e:for(;++C<A;){var W=v[C],Y=b?b(W):W;if(W=S||W!==0?W:0,w&&Y===Y){for(var H=k.length;H--;)if(k[H]===Y)continue e;b&&k.push(Y),V.push(W)}else O(k,Y,S)||(k!==V&&k.push(Y),V.push(W))}return V}t.exports=g},function(t,r,e){var n=e(186),o=e(224),a=e(98),c=1/0,u=n&&1/a(new n([,-0]))[1]==c?function(l){return new n(l)}:o;t.exports=u},function(t,r,e){const n=c=>c&&c.replace(/\D+/g,"")||"0",o=c=>c.substring(0,9),a=c=>parseInt(c,10);t.exports=c=>a(o(n(c)))},function(t,r,e){(function(n){var o=e(0),a=o(e(4)),c=o(e(5));const l=e(2)("hasValidPeerConnection");function f(b){return new n(S=>{b.addEventListener("signalingstatechange",()=>S(!0)),b.createOffer({offerToReceiveAudio:1}).then(C=>b.setLocalDescription(C)).then(()=>setTimeout(()=>{S(!1)},1e3))})}function g(b){return v.apply(this,arguments)}function v(){return v=(0,c.default)(a.default.mark(function b(S){var C;return a.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:A.prev=0,C=new S({iceServers:[]}),A.next=8;break;case 4:return A.prev=4,A.t0=A.catch(0),l.error("Error occurred creating PeerConnection",A.t0),A.abrupt("return",!1);case 8:return A.prev=8,A.next=11,f(C);case 11:A.next=18;break;case 13:A.prev=13,A.t1=A.catch(8),l.error("Error occurred checking the validity of the PeerConnection",A.t1);try{C.close()}catch{}return A.abrupt("return",!1);case 18:A.prev=18,C.close(),A.next=26;break;case 22:return A.prev=22,A.t2=A.catch(18),l.error("Error occurred closing PeerConnection",A.t2),A.abrupt("return",!1);case 26:return A.abrupt("return",!0);case 27:case"end":return A.stop()}},b,null,[[0,4],[8,13],[18,22]])})),v.apply(this,arguments)}t.exports=g}).call(this,e(1))},function(t,r,e){(function(n){const o=e(39),a=e(3),c=e(618),u=e(74),l=e(2)("createPeerConnection");t.exports=function(g){let v=g.window,b=g.config,S=g.constraints;l.debug("called");const C=o(b);C.iceServers=c(a,C.iceServers),u()&&(C.sdpSemantics="plan-b");const O=new v.RTCPeerConnection(C,S);return n.resolve(O)}}).call(this,e(1))},function(t,r,e){const n=e(9),o=e(272),a={Edge(c){let u=!1;return c.map(l=>{if(!l)return;const f=l.urls||l.url&&[l.url];if(!f)return;const g=f.filter(v=>v.indexOf("turn:")===0&&v.indexOf("transport=udp")!==-1&&v.indexOf("turn:[")===-1&&!u?(u=!0,!0):v.indexOf("stun:")===0);if(g.length!==0)return n(o(l,["url","urls"]),{urls:g})}).filter(l=>l!==void 0)},Safari(c){return c.map(u=>{if(u.urls!==void 0&&u.url===void 0)return u;const l=u.urls||u.url&&[u.url];return n(o(u,["url","urls"]),{urls:l})})}};t.exports=function(u,l){let f=u.name;u.isEdge&&(f=u.isLegacyEdge?"Edge":"ChromiumEdge");const g=a[f];return g?g(l):l}},function(t,r,e){const n=e(53),o=e(3),a={h264:{baseline:"42001f",constBaseline:"42e01f"}},c=u=>{let l=u.sdp,f=u.from,g=u.to;return l.replace(new RegExp(`^(a=fmtp:\\d+ .*profile-level-id=)${f}`,"gmi"),`$1${g}`)};t.exports={local:{offer:function(l,f){let g=l===void 0?{}:l,v=g.numSimulcastStreams,b=g.audioBitrate,S=g.priorityVideoCodec,C=S===void 0?"":S,O=g.codecFlags,A=O===void 0?{}:O,w=g.enableStereo,V=w===void 0?!1:w,k=g.enableDtx,M=k===void 0?!1:k,W=g.replaceBaselineProfile,Y=W===void 0?!1:W,H=g.removeVideoOrientation,P=H===void 0?!1:H,j=n.filterExcessSSRCs(f);v>1&&(j=n.enableSimulcast(j,v)),b>0&&(j=n.setAudioBitrate(j,b)),P&&(j=n.removeVideoOrientation(j)),j=n.modifyReceiveStereo(j,!1),j=n.modifySendStereo(j,Boolean(V)),j=n.modifyDtx(j,Boolean(M)),o.isLegacyEdge||Object.keys(A).filter(z=>A[z]===!1).forEach(z=>{j=n.removeVideoCodec(j,z)}),C&&!o.isLegacyEdge?j=n.reprioritizeVideoCodec(j,C,"top"):C!=="h264"&&(j=n.reprioritizeVideoCodec(j,"h264","bottom"));let _=j;return Y&&(_=c({sdp:_,from:a.h264.baseline,to:a.h264.constBaseline})),{local:j,remote:_}},answer:function(l,f){let g=l===void 0?{}:l,v=g.audioBitrate,b=g.codecFlags,S=g.enableStereo,C=S===void 0?!1:S,O=g.enableDtx,A=O===void 0?!1:O,w=g.replaceBaselineProfile,V=w===void 0?!1:w,k=g.sourceStreamId,M=f;v>0&&(M=n.setAudioBitrate(M,v)),M=n.modifyReceiveStereo(M,Boolean(C)),M=n.modifySendStereo(M,!1),M=n.modifyDtx(M,Boolean(A)),k==="MANTIS"&&n.getSetupRole(M)==="passive"&&(M=n.setSetupRole(M,"active")),b&&Object.keys(b).filter(Y=>b[Y]===!1).forEach(Y=>{M=n.removeVideoCodec(M,Y)});let W=M;return V&&(W=c({sdp:W,from:a.h264.baseline,to:a.h264.constBaseline})),{local:M,remote:W}}},remote:{offer:(u,l)=>{let f=u.replaceBaselineProfile,g=f===void 0?!1:f,v=l;if(v.indexOf("a=rtcp-fb")===-1){const b=`a=rtcp-fb:* ccm fir\r
a=rtcp-fb:* nack `;v=v.replace(/^m=video(.*)$/gmi,`m=video$1\r
${b}`)}return g&&(v=c({sdp:v,from:a.h264.constBaseline,to:a.h264.baseline})),{local:v}},answer:function(l,f){let g=l===void 0?{}:l,v=g.audioBitrate,b=g.replaceBaselineProfile,S=b===void 0?!1:b,C=f;return v>0&&(C=n.setAudioBitrate(C,v)),S&&(C=c({sdp:C,from:a.h264.constBaseline,to:a.h264.baseline})),{local:C}}}}},function(t,r,e){var n=e(41),o=e(56),a=e(43),c=e(25),u=e(276),l=e(621),f=e(233),g=e(98),v=e(263),b=e(277),S="[object Map]",C="[object Set]",O=n?n.iterator:void 0;function A(w){if(!w)return[];if(c(w))return u(w)?v(w):o(w);if(O&&w[O])return l(w[O]());var V=a(w),k=V==S?f:V==C?g:b;return k(w)}t.exports=A},function(t,r){function e(n){for(var o,a=[];!(o=n.next()).done;)a.push(o.value);return a}t.exports=e},function(t,r,e){var n=e(34);function o(a,c){return n(c,function(u){return a[u]})}t.exports=o},function(t,r,e){t.exports=(n,o)=>{let a=[],c=null;if(typeof n.getReceivers=="function"){const u=n.getReceivers().find(l=>l.track.kind==="audio");u&&(a=u.getSynchronizationSources())}else c=new Error("peerConnection does not support getReceivers function");o&&o(c,a)}},function(t,r,e){(function(n){const o=e(625),a=function(u){this.pending=[],this._processBinding=this.maybeProcessPending.bind(this),u&&this.setPeerConnection(u)};a.prototype.setPeerConnection=function(u){if(this.pc)throw new Error("Peer connection already set");this.pc=u,this._forwardIceCandidate=o(this.pc,"addIceCandidate"),this.pc.addEventListener("signalingstatechange",this._processBinding),this.maybeProcessPending()},a.prototype.canAddCandidates=function(){return!!(this.pc&&this.pc.iceConnectionState!=="closed"&&this.pc.remoteDescription&&this.pc.remoteDescription.type&&this.pc.localDescription&&this.pc.localDescription.type)},a.prototype.addIceCandidate=function(u){if(this.canAddCandidates())return this._forwardIceCandidate(u);const l=this.pending;return new n((f,g)=>{l.push({iceCandidate:u,resolve:f,reject:g})})},a.prototype.maybeProcessPending=function(){this.canAddCandidates()&&this.process()},a.prototype.process=function(){for(;this.pending.length;){const u=this.pending.shift();this._forwardIceCandidate(u.iceCandidate).then(u.resolve).catch(u.reject)}},a.prototype.destroy=function(){this.pc&&this.pc.removeEventListener("signalingstatechange",this._processBinding),this._processBinding=null,this.pc=null},t.exports=a}).call(this,e(1))},function(t,r,e){(function(n){t.exports=function(a,c){const u=a[c];return function(l){return new n((f,g)=>{const v=u.apply(a,[l,f,g]);v&&typeof v.then=="function"&&f(v)})}}}).call(this,e(1))},function(t,r,e){const n=e(157),o=e(3),a=e(2)("offerProcessor"),c=e(53),u=e(627);t.exports=function(f,g,v,b,S,C,O,A,w,V,k,M,W){const Y=(ae,me)=>ye=>{a.error(ae),a.error(ye),V&&V(ae,ye,me)},H=ae=>{const me=c.hasSendStereo(C.sdp),ye=c.hasSendDtx(C.sdp),Pe=c.getAudioBitrate(C.sdp),Te=n(S,"local","answer",{enableStereo:me,enableDtx:ye,audioBitrate:Pe,replaceBaselineProfile:M,codecFlags:O,sourceStreamId:W},ae.sdp),Ue=new b({type:ae.type,sdp:Te.local}),_e={type:ae.type,sdp:Te.remote};return f.setLocalDescription(Ue).then(()=>w(_e)).catch(Y("Error while setting LocalDescription","SetLocalDescription"))},P=()=>f.createAnswer().then(H).catch(Y("Error while setting createAnswer","CreateAnswer")),j=new b({type:C.type,sdp:n(S,"remote","offer",{replaceBaselineProfile:M},C.sdp).local}),_=Y("Error while setting RemoteDescription","SetRemoteDescription");return u(j,A,o,g,v).then(()=>(k(!0),j)).catch(ae=>{if(k(!1),!c.hasMediaType(j.sdp,"audio"))throw new Error("Unsupported video without audio for fallback");a.debug("Couldn't set remote description",j,ae,", trying without video");const me=new b({type:C.type,sdp:c.disableMediaType(j.sdp,"video")});return a.debug("offer without video",me.sdp),me}).then(ae=>f.setRemoteDescription(ae)).then(P).catch(_)}},function(t,r,e){(function(n){const o=e(74),a=(c,u,l,f,g)=>{if(!f)return n.resolve(!0);const v={iceServers:[]};o()&&(v.sdpSemantics="plan-b");const b=new f(v),S=()=>{try{b.close()}catch{}};return b.setRemoteDescription(new g(c)).then(()=>{S()}).catch(C=>{throw S(),C})};t.exports=a}).call(this,e(1))},function(t,r,e){const n=e(62),o=e(629);t.exports=function(c){let u=[];const l={};let f={sentMessages:0,recvMessages:0};const g=function(S){u.filter(C=>S!==C)},v=function(S){const C=new o(S);return u.push(C),C.on("close",()=>{g(C)}),C};return l.add=function(b,S){return v(c.createDataChannel(b,S))},l.addMany=function(b){for(const S in b)b.hasOwnProperty(S)&&l.add(S,b[S])},l.get=function(b,S){return n(u,C=>C.equals(b,S))},l.getOrAdd=function(b,S){let C=l.get(b,S);return C||(C=l.add(b,S)),C},l.getQosData=function(){const b={sentMessages:0,recvMessages:0};return u.forEach(S=>{b.sentMessages+=S.getQosData().sentMessages,b.recvMessages+=S.getQosData().recvMessages}),b},l.sampleQos=function(){const b=l.getQosData(),S={sentMessages:b.sentMessages-f.sentMessages,recvMessages:b.recvMessages-f.recvMessages};return f=b,S},l.destroy=function(){u.forEach(b=>{b.close()}),u=[]},c.addEventListener("datachannel",b=>{v(b.channel)}),l}},function(t,r,e){const n=e(6),o=e(2)("DataChannel"),a=function(u){this.data=u.data,this.source=u.source,this.lastEventId=u.lastEventId,this.origin=u.origin,this.timeStamp=u.timeStamp,this.type=u.type,this.ports=u.ports,this.path=u.path};t.exports=function(u){const l={},f=[],g={sentMessages:0,recvMessages:0},v=function(k){return f.push(k),l},b=function(k){return u.send(k),g.sentMessages++,l},S=function(){let k;for(;k=f.shift();)l.send(k)},C=function(){l.send=b,S()},O=function(k){l.send=v,l.trigger("close",k)},A=function(k){o.error(k)},w=function(k){const M=new a(k);g.recvMessages++,l.trigger("message",M)};return n(l,!0),l.label=u.label,l.id=u.id,l.reliable=u.reliable,l.negotiated=u.negotiated,l.ordered=u.ordered,l.protocol=u.protocol,l._channel=u,l.close=function(){u.close()},l.equals=function(V,k){if(l.label!==V)return!1;for(const M in k)if(k.hasOwnProperty(M)&&l[M]!==k[M])return!1;return!0},l.getQosData=function(){return g},l.send=v,u.addEventListener("open",C,!1),u.addEventListener("close",O,!1),u.addEventListener("error",A,!1),u.addEventListener("message",w,!1),l}},function(t,r,e){const n=e(9),o=e(157),a=e(2)("subscribeProcessor");t.exports=function(u){let l=u.peerConnection,f=u.NativeRTCSessionDescription,g=u.sdpTransforms,v=u.numSimulcastStreams,b=u.offerOverrides,S=u.offerConstraints,C=u.replaceBaselineProfile,O=u.removeVideoOrientation;const A=(V,k)=>M=>{a.error(V,M);const W=new Error(V);throw W.reason=M,W.prefix=k,W},w=V=>{a.debug("subscribeProcessor: offer created",V);const k=o(g,"local","offer",n({numSimulcastStreams:v,replaceBaselineProfile:C,removeVideoOrientation:O},b),V.sdp),M=new f({type:V.type,sdp:k.local}),W=new f({type:V.type,sdp:k.remote});return a.debug("subscribeProcessor: setting local description"),l.setLocalDescription(M).then(()=>W,A("Error while setting LocalDescription","SetLocalDescription"))};return a.debug("subscribeProcessor: creating offer"),l.createOffer(S).then(w,A("Error while creating Offer","CreateOffer")).then(V=>({sdp:V.sdp,type:V.type}))}},function(t,r,e){const n=e(632);let o=function(){function a(u){this.state=n.RESOLVED,this.offerAnswerQueue=[],this.logAnalyticsEvent=u}var c=a.prototype;return c.setPending=function(){this.state=n.PENDING},c.setResolved=function(){this.state=n.RESOLVED;const l=this.offerAnswerQueue.shift();l&&(this.logAnalyticsEvent("dequeueOfferAnswer","Event"),this.setPending(),l())},c.isPending=function(){return this.state===n.PENDING},c.enqueueOfferAnswer=function(l){this.isPending()?(this.offerAnswerQueue.push(l),this.logAnalyticsEvent("enqueueOfferAnswer","Event")):(this.setPending(),l())},a}();t.exports=o},function(t,r,e){t.exports={PENDING:"pending",RESOLVED:"resolved"}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));const c=e(53),u=c.mediaDirections,l=u.RECVONLY,f=u.INACTIVE,g=function(){var v=(0,a.default)(o.default.mark(function b(S,C){var O,A,w;return o.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(S){k.next=2;break}return k.abrupt("return");case 2:return k.next=4,S.createOffer();case 4:return O=k.sent,k.next=7,S.setLocalDescription(O);case 7:A=S.remoteDescription.sdp,w=c.changeMediaDirection(A,C),S.setRemoteDescription({type:S.remoteDescription.type,sdp:w});case 10:case"end":return k.stop()}},b)}));return function(S,C){return v.apply(this,arguments)}}();t.exports={changeMediaDirectionToInactive:v=>g(v,f),changeMediaDirectionToRecvOnly:v=>g(v,l)}},function(t,r,e){r.__esModule=!0,r.parseStatsOldAPI=V,r.parseStatsNewAPI=k,r.default=M;function n(Y,H){var P;if(typeof Symbol>"u"||Y[Symbol.iterator]==null){if(Array.isArray(Y)||(P=o(Y))||H&&Y&&typeof Y.length=="number"){P&&(Y=P);var j=0;return function(){return j>=Y.length?{done:!0}:{done:!1,value:Y[j++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return P=Y[Symbol.iterator](),P.next.bind(P)}function o(Y,H){if(Y){if(typeof Y=="string")return a(Y,H);var P=Object.prototype.toString.call(Y).slice(8,-1);if(P==="Object"&&Y.constructor&&(P=Y.constructor.name),P==="Map"||P==="Set")return Array.from(Y);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return a(Y,H)}}function a(Y,H){(H==null||H>Y.length)&&(H=Y.length);for(var P=0,j=new Array(H);P<H;P++)j[P]=Y[P];return j}const c=e(3),u=e(8),l=e(2)("QoS"),f=e(53),g=e(280),v=e(635),b=e(104)(),S=e(158),C=["audioCodec","audioSentBytes","audioSentPackets","audioSentPacketsLost","audioRtt","videoCodec","videoHeight","videoHeightInput","videoSentBytes","videoFrameRateSent","videoSentPackets","videoRtt","videoSentPacketsLost","videoWidthInput","videoWidth","srtpCipher"],O=["audioCodec","audioRecvBytes","audioRecvPackets","audioRecvPacketsLost","videoCodec","videoHeight","videoRecvBytes","videoRecvPackets","videoRecvPacketsLost","videoFrameRateReceived","videoWidth","srtpCipher"],A=(Y,H)=>l.debug(`Raw stats for peer conn ${Y.id}:`,H),w=Y=>{const H=Y.portNumber||Y.port;return`${Y.ipAddress||Y.address||Y.ip}:${H}`};function V(Y,H,P,j,_){const z=ye=>(Number(ye.stat("googFrameRateSent"))>0?(P.videoSentBytes=Number(ye.stat("bytesSent")),P.videoSentPackets=Number(ye.stat("packetsSent")),P.videoSentPacketsLost=Number(ye.stat("packetsLost")),P.videoRtt=Number(ye.stat("googRtt"))/1e3,P.videoFrameRate=Number(ye.stat("googFrameRateInput")),P.videoWidth=Number(ye.stat("googFrameWidthSent")),P.videoHeight=Number(ye.stat("googFrameHeightSent")),P.videoFrameRateSent=Number(ye.stat("googFrameRateSent")),P.videoWidthInput=Number(ye.stat("googFrameWidthInput")),P.videoHeightInput=Number(ye.stat("googFrameHeightInput")),P.videoCodec=ye.stat("googCodecName"),P.videoBandwidthLimitedResolution=ye.stat("googBandwidthLimitedResolution")==="true",P.cpuLimitedResolution=ye.stat("googCpuLimitedResolution")==="true"):Number(ye.stat("googFrameRateReceived"))>0&&(P.videoRecvBytes=Number(ye.stat("bytesReceived")),P.videoRecvPackets=Number(ye.stat("packetsReceived")),P.videoRecvPacketsLost=Number(ye.stat("packetsLost")),P.videoFrameRate=Number(ye.stat("googFrameRateOutput")),P.videoFrameRateReceived=Number(ye.stat("googFrameRateReceived")),P.videoFrameRateDecoded=Number(ye.stat("googFrameRateDecoded")),P.videoWidth=Number(ye.stat("googFrameWidthReceived")),P.videoHeight=Number(ye.stat("googFrameHeightReceived")),P.videoCodec=ye.stat("googCodecName")),null),ae=ye=>{Number(ye.stat("audioInputLevel"))>0?(P.audioSentPackets=Number(ye.stat("packetsSent")),P.audioSentPacketsLost=Number(ye.stat("packetsLost")),P.audioSentBytes=Number(ye.stat("bytesSent")),P.audioCodec=ye.stat("googCodecName"),P.audioRtt=Number(ye.stat("googRtt"))/1e3):Number(ye.stat("audioOutputLevel"))>0&&(P.audioRecvPackets=Number(ye.stat("packetsReceived")),P.audioRecvPacketsLost=Number(ye.stat("packetsLost")),P.audioRecvBytes=Number(ye.stat("bytesReceived")),P.audioCodec=ye.stat("googCodecName"))},me=ye=>{if(ye.result){const Pe=ye.result();A(Y,Pe);const Te=(je,Ke)=>Pe.filter(De=>De.id===Ke.stat(je))[0],Ue=je=>Te("localCandidateId",je),_e=je=>Te("remoteCandidateId",je);for(let je=0;je<Pe.length;je++){const Ke=Pe[je];Ke.stat&&(Ke.stat("googActiveConnection")==="true"&&(Ke.stat("googChannelId").indexOf("audio")>-1?(P.audioLocalAddress=Ke.stat("googLocalAddress"),P.audioRemoteAddress=Ke.stat("googRemoteAddress"),P.audioLocalCandidateType=Ke.stat("googLocalCandidateType"),P.audioRemoteCandidateType=Ke.stat("googRemoteCandidateType"),P.audioTransportType=Ke.stat("googTransportType"),P.audioLocalRelayProtocol=g(Ue(Ke).stat("priority")),P.audioRemoteRelayProtocol=g(_e(Ke).stat("priority"))):Ke.stat("googChannelId").indexOf("video")>-1&&(P.videoLocalAddress=Ke.stat("googLocalAddress"),P.videoRemoteAddress=Ke.stat("googRemoteAddress"),P.videoLocalCandidateType=Ke.stat("googLocalCandidateType"),P.videoRemoteCandidateType=Ke.stat("googRemoteCandidateType"),P.videoTransportType=Ke.stat("googTransportType"),P.videoLocalRelayProtocol=g(Ue(Ke).stat("priority")),P.videoRemoteRelayProtocol=g(_e(Ke).stat("priority")))),Number(Ke.stat("googAvailableSendBandwidth"))>0&&(P.videoSentEstimatedBandwidth=Number(Ke.stat("googAvailableSendBandwidth"))),Number(Ke.stat("googAvailableReceiveBandwidth"))>0&&(P.videoRecvEstimatedBandwidth=Number(Ke.stat("googAvailableReceiveBandwidth"))),ae(Ke),z(Ke))}"videoCodec"in P&&!P.videoLocalAddress&&["LocalAddress","RemoteAddress","LocalCandidateType","RemoteCandidateType","TransportType","LocalRelayProtocol","RemoteRelayProtocol"].forEach(je=>{P[`video${je}`]=P[`audio${je}`]})}_(null,P)};Y.getStats(me)}function k(Y,H,P,j,_){const z=function(Te){_(Te)},ae=(Pe,Te)=>{if(Te==="outboundrtp"?(P.audioSentPackets=Pe.packetsSent,P.audioSentPacketsLost=Pe.packetsLost,P.audioSentBytes=Pe.bytesSent):Te==="inboundrtp"&&(P.audioRecvPackets=Pe.packetsReceived,P.audioRecvPacketsLost=Pe.packetsLost,P.audioRecvBytes=Pe.bytesReceived),P.audioCodec===void 0&&["Safari"].indexOf(u.env.name)!==-1&&Pe.codecId!==void 0){const Ue=Y.remoteDescription.type==="answer"?Y.remoteDescription:Y.localDescription,_e=Ue.sdp,je=Pe.codecId.lastIndexOf("_"),Ke=f.getCodecsAndCodecMap(_e,"audio");je!==-1&&Ke!==void 0&&(P.audioCodec=Ke.codecMap[Pe.codecId.substring(je+1)])}},me=Pe=>{const Te={packetsSent:"videoSentPackets",packetsLost:"videoSentPacketsLost",bytesSent:"videoSentBytes",framesPerSecond:"videoFrameRate",framesSent:"videoFrameRateSent",framesReceived:"videoFramesReceived",frameWidth:"videoWidth",frameHeight:"videoHeight"},Ue=["videoSentPackets","videoSentBytes"];for(const _e in Te)if(_e in Pe){const je=Te[_e];Ue.includes(je)&&Number.isSafeInteger(P[je])?P[je]+=Pe[_e]:P[je]=Pe[_e]}},ye=(Pe,Te)=>{const Ue=()=>{if(!("videoSentBytes"in P?P.videoSentBytes>0:P.videoRecvBytes>0))return 0;let je=0;if(c.isFirefox&&c.version<96)je=Number(Pe.framerateMean);else{const Ke=Te==="outboundrtp"?"framesEncoded":"framesDecoded";P[Ke]=Pe[Ke],je=S({currentStatFrames:Pe[Ke],currentTimestamp:Pe.timestamp,prevStatFrames:H[Ke],prevTimestamp:H.timeStamp||Date.now()})}return je};if(Te==="outboundrtp"?(Pe.hasOwnProperty("qualityLimitationReason")&&(P.videoBandwidthLimitedResolution=Pe.qualityLimitationReason==="bandwidth",P.cpuLimitedResolution=Pe.qualityLimitationReason==="cpu"),me(Pe)):Te==="inboundrtp"&&(P.videoRecvPackets=Pe.packetsReceived,P.videoRecvPacketsLost=Pe.packetsLost,P.videoRecvBytes=Pe.bytesReceived),(c.isFirefox&&["outboundrtp","inboundrtp"].includes(Te)||!j&&Te==="inboundrtp")&&(P.videoFrameRate=Ue()),P.videoCodec===void 0&&["Safari"].indexOf(u.env.name)!==-1&&Pe.codecId!==void 0){const _e=Y.remoteDescription.type==="answer"?Y.remoteDescription:Y.localDescription,je=_e.sdp,Ke=Pe.codecId.lastIndexOf("_"),De=f.getCodecsAndCodecMap(je,"video");Ke!==-1&&De!==void 0&&(P.videoCodec=De.codecMap[Pe.codecId.substring(Ke+1)])}};Y.getStats(null).then(Pe=>{let Te,Ue,_e,je,Ke,De,Ze,tt;const gt=[],Ee=()=>{if(gt.length===0)return null;const mt=gt.filter(Qe=>Qe>0),It=mt.reduce((Qe,Et)=>Qe+Et,0);return mt.length?It/mt.length:0},Le=mt=>mt.toLowerCase().replace(/[^a-z]/g,""),We=mt=>{const It=Le(mt.type),Ge=mt.id.toLowerCase();if(/(in|out)boundrtp$/.test(It)){const Qe=/rtp/.test(Ge),Et=Qe&&/audio/.test(Ge),Tt=Qe&&/video/.test(Ge),Zt=Et||mt.kind==="audio",$t=Tt||mt.kind==="video";if(Zt?ae(mt,It):$t&&ye(mt,It),mt.hasOwnProperty("roundTripTime")){const pt=mt.mediaType||mt.kind;pt==="video"?gt.push(mt.roundTripTime):pt==="audio"&&(P.audioRtt=mt.roundTripTime)}if(It==="remoteinboundrtp"&&mt.hasOwnProperty("packetsLost")){const ft=`${mt.kind}SentPacketsLost`;P[ft]||(P[ft]=0),P[ft]+=mt.packetsLost}}else if(It==="transport"){const Qe=mt.selectedCandidatePairId,Et=mt.srtpCipher;P.srtpCipher=Et,Qe&&(je=v(Qe,Pe))}else if(It==="localcandidate")Te=mt.candidateType,_e=w(mt),De=mt.protocol||mt.transport;else if(It==="remotecandidate")Ue=mt.candidateType,Ke=w(mt);else if(It==="track"&&Ge.indexOf("video")!==0)Ze=mt.frameWidth,tt=mt.frameHeight,me(mt);else if(It==="mediasource")mt.hasOwnProperty("framesPerSecond")&&(P.videoFrameRate=mt.framesPerSecond),mt.hasOwnProperty("width")&&(P.videoWidthInput=mt.width),mt.hasOwnProperty("height")&&(P.videoHeightInput=mt.height);else if(It==="candidatepair"&&mt.hasOwnProperty("availableOutgoingBitrate")){const Qe=`video${j?"Sent":"Recv"}EstimatedBandwidth`;P[Qe]=parseInt(mt.availableOutgoingBitrate,10)}};if(typeof Pe[Symbol.iterator]=="function"){A(Y,Array.from(Pe));for(var ut=n(Pe),bt;!(bt=ut()).done;){const mt=bt.value,It=Array.isArray(mt)?mt[1]:mt;We(It)}}else{A(Y,Pe);for(const mt in Pe)Pe.hasOwnProperty(mt)&&We(Pe[mt])}if(Y.currentRemoteDescription&&(P.useDtx=f.hasSendDtx(Y.currentRemoteDescription.sdp)),j&&(P.videoRtt=Ee()),(P.audioRecvBytes||P.audioSentBytes)&&(P.audioLocalCandidateType=Te,P.audioLocalAddress=_e,P.audioRemoteCandidateType=Ue,P.audioRemoteAddress=Ke,P.audioTransportType=De,P.audioLocalRelayProtocol=je,P.audioCodec===void 0)){const mt=Y.remoteDescription.type==="answer"?Y.remoteDescription:Y.localDescription,It=mt.sdp,Ge=f.getCodecs(It,"audio");P.audioCodec=Ge[0]}if((P.videoRecvBytes||P.videoSentBytes)&&(P.videoLocalCandidateType=Te,P.videoLocalAddress=_e,P.videoRemoteCandidateType=Ue,P.videoRemoteAddress=Ke,P.videoTransportType=De,P.videoLocalRelayProtocol=je,P.videoCodec===void 0)){const mt=Y.remoteDescription.type==="answer"?Y.remoteDescription:Y.localDescription,It=mt.sdp,Ge=f.getCodecs(It,"video");P.videoCodec=Ge[0]}W(P,j),P.videoWidth=P.videoWidth||Ze,P.videoHeight=P.videoHeight||tt,_(null,P)}).catch(z)}function M(Y,H,P,j,_){return b?k(Y,H,P,j,_):V(Y,H,P,j,_)}function W(Y,H){(H?C:O).forEach(j=>{Y.hasOwnProperty(j)||(Y[j]=null)})}},function(t,r,e){const n=e(280);t.exports=(o,a)=>{let c="";if(!o||!a)return c;const u=a.get(o);if(u){const l=u.localCandidateId;if(l){const f=a.get(l);if(f){const g=f.relayProtocol,v=f.priority;g?c=`TURN/${g.toUpperCase()}`:c=n(v)}}}return c}},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(14));let a=function(){function c(){(0,o.default)(this,"value",null),(0,o.default)(this,"changeCount",0)}var u=c.prototype;return u.onValue=function(f){f&&f!==this.value&&(this.value&&(this.changeCount+=1),this.value=f)},c}();r.default=a},function(t,r,e){var n=e(11),o=e(638),a=e(229),c="Expected a function",u=Math.max,l=Math.min;function f(g,v,b){var S,C,O,A,w,V,k=0,M=!1,W=!1,Y=!0;if(typeof g!="function")throw new TypeError(c);v=a(v)||0,n(b)&&(M=!!b.leading,W="maxWait"in b,O=W?u(a(b.maxWait)||0,v):O,Y="trailing"in b?!!b.trailing:Y);function H(Te){var Ue=S,_e=C;return S=C=void 0,k=Te,A=g.apply(_e,Ue),A}function P(Te){return k=Te,w=setTimeout(z,v),M?H(Te):A}function j(Te){var Ue=Te-V,_e=Te-k,je=v-Ue;return W?l(je,O-_e):je}function _(Te){var Ue=Te-V,_e=Te-k;return V===void 0||Ue>=v||Ue<0||W&&_e>=O}function z(){var Te=o();if(_(Te))return ae(Te);w=setTimeout(z,j(Te))}function ae(Te){return w=void 0,Y&&S?H(Te):(S=C=void 0,A)}function me(){w!==void 0&&clearTimeout(w),k=0,S=V=C=w=void 0}function ye(){return w===void 0?A:ae(o())}function Pe(){var Te=o(),Ue=_(Te);if(S=arguments,C=this,V=Te,Ue){if(w===void 0)return P(V);if(W)return clearTimeout(w),w=setTimeout(z,v),H(V)}return w===void 0&&(w=setTimeout(z,v)),A}return Pe.cancel=me,Pe.flush=ye,Pe}t.exports=f},function(t,r,e){var n=e(15),o=function(){return n.Date.now()};t.exports=o},function(t,r,e){const n=e(51);r.check=function(o){o===void 0&&(o={});const a=o.env||e(3);return a.name==="Chrome"&&a.userAgent.toLowerCase().indexOf("android")>-1&&a.version<65},r.once=n(()=>r.check())},function(t,r,e){const n=e(3);t.exports=function(o){o===void 0&&(o={});const a=o,c=a.env,u=c===void 0?n:c;return!!(u.isiOS&&u.iOSVersion>10)}},function(t,r,e){const n=e(38),o=e(8);t.exports=function(c){let u,l,f,g,v;const b=this;let S=c.archiving;const C=c.archivingStarted||"Archiving on",O=c.archivingEnded||"Archiving off";let A=!0;const w=function(M){g.nodeValue=M,u.setAttribute("title",M)},V=function(){v&&(clearTimeout(v),v=null),S?o.addClass(l,"OT_active"):o.removeClass(l,"OT_active"),o.removeClass(b.domElement,`OT_archiving-${S?"off":"on"}`),o.addClass(b.domElement,`OT_archiving-${S?"on":"off"}`),c.show&&S?(w(C),o.addClass(f,"OT_mode-on"),o.removeClass(f,"OT_mode-auto"),b.setDisplayMode("on"),v=setTimeout(()=>{o.addClass(f,"OT_mode-auto"),o.removeClass(f,"OT_mode-on")},5e3)):c.show&&!A?(o.addClass(f,"OT_mode-on"),o.removeClass(f,"OT_mode-auto"),b.setDisplayMode("on"),w(O),v=setTimeout(()=>{b.setDisplayMode("off")},5e3)):b.setDisplayMode("off")};n(this,{mode:S&&c.show&&"on"||"off",nodeName:"h1",htmlAttributes:{className:"OT_archiving OT_edge-bar-item OT_edge-bottom"},onCreate(){u=o.createElement("div",{className:"OT_archiving-light-box"},""),l=o.createElement("div",{className:"OT_archiving-light"},""),u.appendChild(l),f=o.createElement("div",{className:"OT_archiving-status OT_mode-on OT_edge-bar-item OT_edge-bottom"},""),g=document.createTextNode(""),f.appendChild(g),b.domElement.appendChild(u),b.domElement.appendChild(f),V()}}),this.setShowArchiveStatus=function(k){c.show=k,b.domElement&&V.call(b)},this.setArchiving=function(k){S=k,A=!1,b.domElement&&V.call(b)}}},function(t,r,e){t.exports=function(n){n===void 0&&(n={});const o=n.global||(typeof window!==void 0?window:commonjsGlobal);return()=>o.navigator&&o.navigator.mediaDevices}},function(t,r,e){(function(n){const o=e(9),a=e(11),c=e(109),u=e(644),l=e(26),f=e(22),g=e(6);t.exports=function(b){b===void 0&&(b={});const S=b.env||e(3),C=b.Errors||e(7),O=b.otError||e(13)(),A=b.logging||e(2)("getUserMedia"),w=b.screenSharing||e(162)(),V=b.getDisplayMediaExtensionHelper||e(289),k=b.customGetUserMedia,M=b.global||(typeof window!==void 0?window:commonjsGlobal),W=b.analytics||new l,Y=M.navigator,H=M.location,P=()=>{if(k)return k;if(Y.mediaDevices){var Te;return(Te=Y.mediaDevices).getUserMedia.bind(Te)}},j=function(){const Ue=P();return Ue?Ue(...arguments):n.reject(new Error("Cannot find getUserMedia"))},_=()=>{if(k)return k;if(Y.mediaDevices&&Y.getDisplayMedia)return Y.getDisplayMedia.bind(Y);if(Y.mediaDevices&&Y.mediaDevices.getDisplayMedia){var Te;return(Te=Y.mediaDevices).getDisplayMedia.bind(Te)}},z=function(){const Ue=_();return Ue?Ue(...arguments):n.reject(new Error("Cannot find getDisplayMedia"))},ae=(()=>{const Te={name:C.USER_MEDIA_ACCESS_DENIED,message:"End-user denied permission to hardware devices"},Ue={name:C.NOT_SUPPORTED,message:"A constraint specified is not supported by the browser."},_e={name:C.CONSTRAINTS_NOT_SATISFIED,message:"It's not possible to satisfy one or more constraints passed into the getUserMedia function"},je={name:C.NO_DEVICES_FOUND,message:"No voice or video input devices are available on this machine."},Ke={name:C.HARDWARE_UNAVAILABLE,message:"The selected voice or video devices are unavailable. Verify that the chosen devices are not in use by another application."},De={name:C.UNABLE_TO_CAPTURE_SCREEN,message:"Unable to capture screen. Unknown error occurred"},tt={AbortError:{name:C.UNABLE_TO_CAPTURE_MEDIA,message:"Unable to capture media. Unknown error occurred"},NotAllowedError:Te,NotFoundError:je,NotReadableError:Ke,OverconstrainedError:_e,SecurityError:o({},Te,{message:"End-user denied permission to hardware devices or user media support may be disabled on this page"}),TypeError:_e,PermissionDeniedError:Te,PermissionDismissedError:Te,NotSupportedError:Ue,ConstraintNotSatisfiedError:_e,MandatoryUnsatisfiedError:_e,OverConstrainedError:_e,DevicesNotFoundError:je,NoDevicesFoundError:je,HardwareUnavailableError:Ke,SourceUnavailableError:Ke,TrackStartError:Ke,ScreenCaptureError:De,TabCaptureError:De};return u({objectToTrack:tt,keys:["PermissionDeniedError","PermissionDismissedError","NotSupportedError","ConstraintNotSatisfiedError","MandatoryUnsatisfiedError","OverConstrainedError","DevicesNotFoundError","NoDevicesFoundError","HardwareUnavailableError","SourceUnavailableError","TrackStartError","ScreenCaptureError","TabCaptureError"],onUsage(gt){W.logEvent({action:"DeprecatedPropertyUsage:getUserMedia:errorMap",variation:"Event",payload:{key:gt}})}}),tt})(),me=(Te,Ue)=>{let _e=Te;_e==="AbortError"&&typeof Ue=="string"&&Ue.match(/(screen|tab).?capture/i)&&(_e="ScreenCaptureError");const je=ae[_e];let Ke;return je?Ke=O(je.name,new Error(`${je.message} (getUserMedia error: ${Te})`)):Ke=new Error(`Unknown error while getting user media: ${Te}`),Ke.originalMessage=Ue,Ke.originalName=Te,Ke},ye=Te=>{if(a(Te)&&Te.name){let Ue=Te.name,_e=Te.message;if((_e==="Cannot find getUserMedia"||_e==="Cannot find getDisplayMedia")&&(S.name==="Chrome"&&S.version>73&&M.location.protocol!=="https:"?Ue="NotAllowedError":Ue="NotSupportedError"),S.name==="Safari"&&Ue==="Error"){const De=Object.prototype.toString.call(Te).match(/^\[object (\w+Error)\]$/);De&&(Ue=De[1])}const je=me(Ue,_e);return je.constraintName=Te.constraint||Te.constraintName,je instanceof f||W.logEvent({action:"UnexpectedError:getUserMedia:parseErrorEvent",variation:"Event",payload:{name:je.name,message:je.message,originalMessage:je.originalMessage}}),je}if(typeof Te=="string"){const Ue=me(Te);return W.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error is string",error:Te}}),Ue}return W.logEvent({action:"CheckUnreachable:getUserMedia:parseErrorEvent",variation:"Event",payload:{info:"error was not string or object with name property",error:Te}}),new Error("Unknown error type while getting media")},Pe=function(Ue){if(!Ue||!a(Ue))return!0;for(const _e in Ue)if(Ue.hasOwnProperty(_e)&&Ue[_e])return!1;return!0};return function(Te,Ue){if(Ue===void 0&&(Ue=!1),A.debug("getUserMedia wrapper called with",Te),Pe(Te))return A.error("Couldn't get UserMedia: All constraints were false"),g(n.reject(O(C.NO_VALID_CONSTRAINTS,new Error("Video and Audio was disabled, you need to enable at least one"))));const _e=Ue&&V.isSupportedInThisBrowser?z:j,je=g(_e(Te).catch(tt=>{const gt=ye(tt);if(gt.name===C.UNABLE_TO_CAPTURE_SCREEN)return new n((Ee,Le)=>{w.checkCapability(We=>{if(We.extensionRequired==="chrome"){if(We.extensionRegistered&&!We.extensionInstalled){const ut=O(C.SCREEN_SHARING_EXTENSION_NOT_INSTALLED,gt);ut.message="Screen sharing extension not installed see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",Le(ut)}else if(!We.extensionRegistered){const ut=O(C.SCREEN_SHARING_EXTENSION_NOT_REGISTERED,gt);ut.message="Screen sharing extension not registered see https://tokbox.com/developer/guides/screen-sharing/js/#chrome-extension",Le(ut)}}else Le(gt)})});throw gt}).then(tt=>(A.debug("got stream:",{stream:tt,tracks:tt.getTracks(),trackLabels:tt.getTracks().map(gt=>gt.label)}),tt))),Ke=H.protocol.indexOf("https")!==-1?500:100;let De=!0;const Ze=()=>{De=!1};return je.then(Ze,Ze),c(Ke).then(()=>{if(!De)return;const tt=()=>{je.emit("accessDialogClosed")};je.emit("accessDialogOpened"),je.then(tt,tt)}),je}}}).call(this,e(1))},function(t,r,e){t.exports=function(n){let o=n===void 0?{}:n,a=o.objectToTrack,c=o.keys,u=o.onUsage;if(!Array.isArray(c)&&c!==void 0)throw new Error("keys must be an array, or undefined");if(typeof u!="function")throw new Error("onUsage must be a function");if(a==null)throw new Error("Expected objectToTrack to be a trackable object");Object.keys(a).forEach(l=>{if(c!==void 0&&c.indexOf(l)===-1)return;let f=a[l];Object.defineProperty(a,l,{get(){return u(l),f},set(g){f=g,u(l,f)},enumerable:!0})})}},function(t,r,e){const n=e(3),o=e(646),a=o.isCallbackBasedAPI;let c=e(265),u=null;const l=(b,S)=>{u.getSources(b,S)},f=(b,S)=>{u.getSources(b).then(C=>{S(void 0,C)},S)},g=()=>a?l:f,v=(b,S)=>{g()({types:[b]},(O,A)=>{if(O){S(O);return}const w=A[0];if(!w){S(new Error("Could not find Electron source for screensharing"));return}const V={audio:!1,video:{mandatory:{chromeMediaSource:b,chromeMediaSourceId:w.id}}};S(void 0,V)})};t.exports=function(S){S===void 0&&(S={});try{const C=()=>{let A=typeof window!==void 0?window:commonjsGlobal;for(;typeof A.require!="function"&&A.parent&&A.parent!==A;)A=A.parent;return A},O=()=>{const A=C();return(A.require?A.require("electron"):A.electron).desktopCapturer};u=S.desktopCapturer||(n.isElectron?O():null),c=S.isElectronScreenSharingSource||c}catch{}return{isSupportedInThisBrowser:u!==null,autoRegisters:!0,extensionRequired:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!0,window:!0,browser:!0},register:()=>({isInstalled:C=>C(!0),getConstraints(C,O,A){c(C)?A(void 0,{audio:!0,video:!1}):v(C,A)}})}}},function(t,r,e){const o=e(3).version<78,a=!o;t.exports={isCallbackBasedAPI:o,isPromiseBasedAPI:a}},function(t,r,e){const n=e(3),o=e(160).default,a=()=>n.isFirefox?!o:!1;t.exports={isSupportedInThisBrowser:a(),autoRegisters:!0,extensionRequired:!1,extensionInstalled:!1,getConstraintsShowsPermissionUI:!1,sources:{screen:!0,application:!1,window:!0,browser:!1},register(){return{isInstalled(c){c(typeof OTScreenSharing=="object")},getConstraints(c,u,l){u.video={mediaSource:c},u.browserWindow&&(u.video.browserWindow=u.browserWindow,delete u.browserWindow),typeof u.scrollWithPage<"u"&&(u.video.scrollWithPage=u.scrollWithPage,delete u.scrollWithPage),l(void 0,u)}}}}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5)),c=n(e(16));const u=e(649),l=u.normaliseOptions,f=e(290),g=f.isMediaStreamTrack,v=e(149),b=e(9),S=e(142),C=e(291).default,O=e(7),A=e(49),w=e(13)(),V=e(292),k=V.isValidVideoContentHint,M=e(6),W=e(150),Y=e(3),H=e(264),P="getUserMedia request was aborted";t.exports=function(_){_===void 0&&(_={}),["deviceHelpers","getUserMediaHelper"].forEach(De=>{v(_[De],`${De} dependency must be injected into processPubOptions`)});const z=_.generateConstraintInfo||e(254),ae=_.global||(typeof window!==void 0?window:commonjsGlobal),me=_.logging||e(2)("processPubOptions"),ye=_.navigator||ae.navigator,Pe=_.screenSharing||e(162)(),Te=_.env||Y,Ue=e(650)({navigator:ye||{}}),_e=_,je=_e.deviceHelpers,Ke=_e.getUserMediaHelper;return(De,Ze,tt)=>{var gt,Ee,Le;const We=l(De,Ze,me),ut=W(We.videoSource),bt=g(We.audioSource),mt=g(We.videoSource),It=!bt&&We.audioSource!==null,Ge=!mt&&We.videoSource!==null,Qe=It||Ge,Et=it=>typeof it=="boolean",Tt=!ut||bt||H,Zt=S(We,{mirror:!ut&&!mt,publishAudio:!0,publishVideo:!0,showControls:!0,fitMode:ut?"contain":"cover",insertDefaultUI:!0,enableRenegotiation:!1,enableStereo:!1,enableDtx:!1,disableAudioProcessing:!1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}),$t=We.audioFallback,pt=$t===void 0?{}:$t,ft=We.audioFallbackEnabled;if(Zt.publisherAudioFallbackEnabled=(gt=pt.publisher)!=null?gt:!1,Zt.subscriberAudioFallbackEnabled=(Ee=(Le=pt.subscriber)!=null?Le:ft)!=null?Ee:!ut,Zt.videoContentHint!==void 0&&!k(Zt.videoContentHint)&&(me.warn(`${Ze}: Invalid content hint. Valid content hints are "text", "detail", "motion", or ""`),Zt.videoContentHint=""),Zt.name&&(Zt.name=String(Zt.name)),Et(Zt.enableDtx)||(Zt.enableDtx=!1),Et(Zt.enableStereo)||(Zt.enableStereo=!1),Zt.constraints)me.warn(`${Ze}: You have passed your own constraints not using ours`);else{const it=z((0,c.default)({isScreenSharing:ut,isCustomAudioTrack:bt,isCustomVideoTrack:mt},A(Zt,["audioSource","publishAudio","videoSource","publishVideo","resolution","maxResolution","frameRate","facingMode","enableRenegotiation","enableStereo","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl"]),{env:Te,usingOptionalMandatoryStyle:Ue(ut)}));b(Zt,it)}const et={isScreenSharing:ut,isCustomAudioTrack:bt,isCustomVideoTrack:mt,shouldAllowAudio:Tt,properties:Zt};return M(et),et.getUserMedia=(0,a.default)(o.default.mark(function it(){var Pt,nn,Ut,xt,Wt,tn,mn,Dn,er;return o.default.wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:if(Pt=function(){for(var Bn=arguments.length,Jn=new Array(Bn),Dt=0;Dt<Bn;Dt++)Jn[Dt]=arguments[Dt];return et.emit("accessDialogOpened",...Jn)},nn=function(){for(var Bn=arguments.length,Jn=new Array(Bn),Dt=0;Dt<Bn;Dt++)Jn[Dt]=arguments[Dt];return et.emit("accessDialogClosed",...Jn)},Qe){dr.next=7;break}return Ut=new ae.MediaStream,bt&&Ut.addTrack(We.audioSource),mt&&Ut.addTrack(We.videoSource),dr.abrupt("return",Ut);case 7:if(!ut){dr.next=15;break}return dr.next=10,Pe.getConstraints({onAccessDialogOpened:Pt,onAccessDialogClosed:nn,videoSource:We.videoSource,constraints:Zt.constraints});case 10:if(Zt.constraints=dr.sent,!tt()){dr.next=13;break}throw w(O.CANCEL,new Error(P));case 13:dr.next=25;break;case 15:return dr.next=17,je.shouldAskForDevices();case 17:if(xt=dr.sent,!tt()){dr.next=20;break}throw w(O.CANCEL,new Error(P));case 20:me.debug(`${Ze}: shouldAskForDevices:`,xt),xt.video||(me.warn(`${Ze}: Setting video constraint to false, there are no video sources`),Zt.constraints.video=!1),xt.audio||(me.warn(`${Ze}: Setting audio constraint to false, there are no audio sources`),Zt.constraints.audio=!1),et.videoDevices=xt.videoDevices,et.audioDevices=xt.audioDevices;case 25:if(Wt=Zt.constraints,me.debug(`${Ze}: onConstraintsFound`,Wt),!tt()){dr.next=29;break}throw w(O.CANCEL,new Error(P));case 29:return tn="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=188088",mn="Failed to acquire functional stream, this might be caused by the following iOS bug: https://bugs.webkit.org/show_bug.cgi?id=204106",Dn=pr=>pr.originalName==="NotReadableError"&&pr.originalMessage==="Failed starting capture of a video track",er=function(){var pr=(0,a.default)(o.default.mark(function Bn(){var Jn,Dt,Ii,ti,ci;return o.default.wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:return Jn=Ke(Wt,ut),Jn.on("accessDialogOpened",Pt),Jn.on("accessDialogClosed",nn),Vr.prev=3,Vr.next=6,Jn;case 6:if(Dt=Vr.sent,!(Te.isiOS&&Zt.publishVideo&&Dt.getVideoTracks().length&&Dt.getVideoTracks()[0].readyState==="ended")){Vr.next=11;break}throw Dt.getTracks().forEach(ui=>ui.stop()),Ii=new Error(tn),Ii;case 11:return Vr.abrupt("return",Dt);case 14:if(Vr.prev=14,Vr.t0=Vr.catch(3),!Te.isiOS){Vr.next=34;break}if(!(Dn(Vr.t0)&&Te.iOSVersion>=13&&Te.iOSVersion<13.4)){Vr.next=32;break}return Vr.prev=18,ti=Ke({audio:!0,video:!1},!1),Vr.next=22,ti;case 22:ci=Vr.sent,ci.getTracks().forEach(ui=>ui.stop()),Vr.next=29;break;case 26:Vr.prev=26,Vr.t1=Vr.catch(18),me.debug(`${Ze}: error disposing audio track`,Vr.t1);case 29:throw new Error(mn);case 32:if(Vr.t0.name!==O.HARDWARE_UNAVAILABLE){Vr.next=34;break}throw new Error(tn);case 34:throw Vr.t0;case 35:return Vr.prev=35,setTimeout(()=>{Jn.off("accessDialogOpened",Pt),Jn.off("accessDialogClosed",nn)}),Vr.finish(35);case 38:case"end":return Vr.stop()}},Bn,null,[[3,14,35,38],[18,26]])}));return function(){return pr.apply(this,arguments)}}(),dr.next=35,C(er,(pr,Bn)=>[tn,mn].includes(pr.message)&&Bn===1&&!tt()?1e3:!1)();case 35:if(Ut=dr.sent,!tt()){dr.next=39;break}throw Ut.getTracks().forEach(pr=>{pr.stop()}),w(O.CANCEL,new Error(P));case 39:return bt&&Ut.addTrack(We.audioSource),mt&&Ut.addTrack(We.videoSource),dr.abrupt("return",Ut);case 42:case"end":return dr.stop()}},it)})),et}}},function(t,r,e){const n=e(290),o=n.isMediaStreamTrack,a=e(39),c=e(3),u=(l,f,g)=>{const v=l&&typeof l=="object"?a(l):{};if(v.audioSource===!1&&(v.audioSource=null),v.videoSource===!1&&(v.videoSource=null),v.minVideoBitrate!==void 0&&!(typeof v.minVideoBitrate=="number"&&v.minVideoBitrate>0)&&(g.warn(`${f}: Invalid minVideoBitrate in publisher properties. minVideoBitrate must be a positive number`),delete v.minVideoBitrate),v.audioBitrate!==void 0&&!(v.audioBitrate>=6*1e3&&v.audioBitrate<=510*1e3)&&(g.warn(`${f}: Invalid audioBitrate in publisher properties. audioBitrate must be a number between ${6*1e3} and ${510*1e3} bits per second`),delete v.audioBitrate),c.name==="Firefox"&&c.version<49){const b="Firefox 48 and below";o(v.audioSource)&&(v.audioSource=null,g.warn(`${f}: Cannot use custom tracks with ${b}. Setting audioSource to null`)),o(v.videoSource)&&(v.videoSource=null,g.warn(`${f}: Cannot use custom tracks with ${b}. Setting videoSource to null`))}return v};r.normaliseOptions=u},function(t,r,e){const n=e(3),o=n.name,a=n.version,c=e(258);t.exports=function(l){let f=l===void 0?{}:l,g=f.navigator,v=g===void 0?window.navigator:g;return function(S){return S&&!c||!(v.mediaDevices&&v.mediaDevices.getUserMedia)||o==="Chrome"&&a<61}}},function(t,r,e){t.exports=function(o){o===void 0&&(o={}),["processPubOptions"].forEach(f=>{if(!o[f])throw new Error(`${f} dependency must be injected into OT.getUserMedia`)});const a=o.logging||e(2)("getUserMedia"),c=o,u=c.processPubOptions;return function(g){return g===void 0&&(g={}),u(g,"OT.getUserMedia",()=>!1).getUserMedia().catch(b=>{throw a.error(`OT.getUserMedia failed to getUserMedia: ${b}`),b})}}},function(t,r,e){t.exports=function(o,a){const c=(u,l)=>()=>{throw new Error(`Cannot ${u} ${l}, ${o} is destroyed`)};Object.keys(a).forEach(u=>{typeof a[u]=="function"?a[u]=c("call",u):Object.defineProperty(a,u,{get:c("get",u),set:c("set",u)})})}},function(t,r,e){t.exports=n=>{if("srcObject"in n)return;const o=window&&window.URL;"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(n,"srcObject",{get(){return this._srcObject},set(a){const c=this;if(this._srcObject=a,this.src&&o.revokeObjectURL(this.src),!a){this.src="";return}return this.src=o.createObjectURL(a),a.addEventListener("addtrack",()=>{c.src&&o.revokeObjectURL(c.src),c.src=o.createObjectURL(a)}),a.addEventListener("removetrack",()=>{c.src&&o.revokeObjectURL(c.src),c.src=o.createObjectURL(a)}),this._srcObject}})}},function(t,r,e){const n=c=>!(!c||typeof c.getBoundingClientRect!="function"),o=c=>{const u=c.getBoundingClientRect(),l=window.innerHeight||document.documentElement.clientHeight,f=window.innerWidth||document.documentElement.clientWidth,g=u.top<=l&&u.top+u.height>=0,v=u.left<=f&&u.left+u.width>=0;return g&&v},a=c=>{const u=l=>l.style&&l.style.visibility==="hidden"?!0:l.parentNode?u(l.parentNode):!1;return c.offsetParent!==null&&!u(c)};t.exports=c=>n(c)&&o(c)&&a(c)},function(t,r,e){const n=e(107),o=e(8),a={0:"rotate(0deg)",270:"rotate(90deg)",90:"rotate(-90deg)",180:"rotate(180deg)"};t.exports=function(u,l,f){let g=f;n(u,{isRotated:{get(){return this.orientation()&&(this.orientation().videoOrientation===270||this.orientation().videoOrientation===90)}},orientation:{get(){return g},set(v){g=v;const b=a[v.videoOrientation]||a.ROTATED_NORMAL;switch(o.env.name){case"Chrome":case"Safari":l().style.webkitTransform=b;break;default:l().style.transform=b}u.trigger("orientationChanged",g)}},audioChannelType:{get(){return"mozAudioChannelType"in this.domElement?this.domElement.mozAudioChannelType:"unknown"},set(v){"mozAudioChannelType"in this.domElement&&(this.domElement.mozAudioChannelType=v)}}})}},function(t,r,e){t.exports=function(){function o(a){return a.getTracks().every(c=>c.readyState==="ended")}return function(c,u,l){const f=[];function g(C){setTimeout(()=>{if(f.length)if(o(c))b(),typeof u=="function"&&u();else{const O=C.target;v(O),typeof l=="function"&&l(O)}},100)}function v(C){C.onended===g&&(C.onended=null);const O=f.indexOf(C);O>=0&&f.splice(O,1)}function b(){f.slice().forEach(v)}function S(){c.getTracks().forEach(C=>{f.push(C),C.onended=g})}return S(),{stop:b,refresh:()=>{b(),S()}}}}},function(t,r,e){const n=o=>o>=15&&o<15.4;t.exports=o=>(o=o||e(3),o.isiPad?!0:o.isiPhone?n(o.iOSVersion):o.isSafari?n(o.version):!1)},function(t,r,e){const n=[{width:320,height:180,maxBitrate:3e5},{width:320,height:240,maxBitrate:4e5},{width:352,height:288,maxBitrate:5e5},{width:480,height:270,maxBitrate:55e4},{width:640,height:360,maxBitrate:8e5},{width:640,height:480,maxBitrate:8e5},{width:960,height:540,maxBitrate:11e5},{width:1280,height:720,maxBitrate:25e5},{width:1920,height:1080,maxBitrate:45e5}].sort((c,u)=>c.maxBitrate-u.maxBitrate),o=45e5,a=(c,u)=>{var l;return!c||!u?o:((l=n.find(g=>{let v=g.height,b=g.width;return u*c<=v*b}))==null?void 0:l.maxBitrate)||o};t.exports=a},function(t,r,e){var n=e(64),o=e(100),a=e(36);function c(u,l){var f={};return l=a(l,3),o(u,function(g,v,b){n(f,v,l(g,v,b))}),f}t.exports=c},function(t,r,e){t.exports=function(o,a){const c=setTimeout(()=>{o((u,l)=>{if(!u)for(let f=0;f<l.length;f+=1){const g=l[f];g.id.indexOf("_send")!==-1&&g.type==="ssrc"&&(g.kind==="audio"||g.mediaType==="audio")&&parseInt(g.bytesSent,10)===0&&a()}})},3e3);return function(){clearTimeout(c)}}},function(t,r,e){const n=e(6),o=e(301),a=e(17);t.exports=function(){return function(l,f){const g={},v=[];let b=!1,S=!1;this._id=a();const C=()=>{this.trigger("iceConnected"),b=!0},O=()=>this.trigger("close"),A=P=>this.trigger("remoteVideoSupported",P),w=P=>{let j=P.reason,_=P.prefix;return this.trigger("error",j,_)},V=P=>this.trigger("iceConnectionStateChange",P),k=P=>this.trigger("signalingStateChange",P),M=P=>this.trigger("signalingStateStable",P),W=()=>{S&&(S=!1,f.removeFromSinglePeerConnection(this._id))};n(this);const Y=f.getPeerConnection(l,this);Y.on({iceConnected:C,close:O,signalingStateChange:k,signalingStateStable:M,error:w,qos:P=>this.trigger("qos",P),iceConnectionStateChange:V,remoteVideoSupported:A,negotiationNeeded:W},this);const H=()=>Y.iceConnectionStateIsConnected()&&!b;this._onTrackAdded=P=>{const j=P.track,_=P.transceiver;g[j.id]=_.mid,v.push(j),H()&&C(),this.trigger("trackAdded",P)},this.disconnect=()=>{S=!0,f.removeSubscriber(this._id,Object.values(g))},this.removeTrack=P=>{g[P.id]&&f.removeSubscriber(this._id,[g[P.id]]),o(v,P),f.removeTrack(P,this._id)},this.remoteTracks=()=>v,this.getDataChannel=(P,j,_)=>{Y.getDataChannel(P,j,_)},this.getSourceStreamId=()=>Y.getSourceStreamId(),this.processMessage=(P,j)=>{Y.processMessage(P,j)},this.remoteDescription=()=>Y.remoteDescription(),this.getStats=P=>{Y.getStats(P)},this.getSynchronizationSources=P=>{Y.getSynchronizationSources(P)},this.getRtcStatsReport=P=>{Y.getRtcStatsReport(P)},this.remoteStreams=()=>Y.remoteStreams(),this.hasRelayCandidates=()=>Y.hasRelayCandidates(),this.iceRestart=()=>Y.iceRestart(),this.iceConnectionStateIsConnected=()=>Y.iceConnectionStateIsConnected()}}},function(t,r,e){t.exports=function(a,c,u){u===void 0&&(u=!1);let l=null,f=0,g=null,v=u;const b=V=>V.type==="inbound-rtp"&&(V.kind||V.mediaType)==="audio",S=V=>V.id===g&&V.type==="track"&&(V.kind||V.mediaType)==="audio",C=(V,k)=>V===l&&k===f,O=(V,k)=>!v&&V===0&&l===0&&k>f,A=()=>{setTimeout(()=>{v=!0},3e3)},w=setInterval(()=>{a((V,k)=>{if(V)return;g=(k.find(b)||{}).trackId;const W=k.find(S);if(W){const Y=W.audioLevel,H=W.totalSamplesReceived;if(Y===void 0)return;C(Y,H)?(clearInterval(w),c("audioLevelStuck")):O(Y,H)&&(clearInterval(w),c("audioLevelStuckAt0")),l=Y,f=H}})},500);return u||A(),{stop:()=>{clearInterval(w)}}}},function(t,r,e){(function(n){const o=e(26),a=new o;t.exports=function(u){u===void 0&&(u={});const l=u.analytics||a,f=u.errors||e(7),g=u.ExceptionCodes||e(10),v=u.otError||e(13)(),b=u.sessionObjects||e(21),S=u.uuid||e(17);return function(O){O===void 0&&(O=()=>{});const A=S();function w(V){V?O(v(f.REPORT_ISSUE_FAILED,new Error("Error calling OT.reportIssue(). Check the client's network connection."),g.REPORT_ISSUE_ERROR)):O(null,A)}b.sessions.length()===0?l.logEvent({action:"ReportIssue",variation:"Event",payload:{reportIssueId:A}},null,w):n.all(b.sessions.map(V=>V.reportIssue({id:A}))).then(()=>w(),V=>w(V))}}}).call(this,e(1))},function(t,r,e){t.exports=n=>{let o=n.window,a=!1;try{const c=Object.defineProperty({},"passive",{get(){a=!0}});o.addEventListener("testPassive",null,c),o.removeEventListener("testPassive",null,c)}catch{}return a}},function(t,r,e){Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function g(v,b){for(var S=0;S<b.length;S++){var C=b[S];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(v,C.key,C)}}return function(v,b,S){return b&&g(v.prototype,b),S&&g(v,S),v}}(),o=e(303),a=c(o);function c(g){return g&&g.__esModule?g:{default:g}}function u(g,v){if(!(g instanceof v))throw new TypeError("Cannot call a class as a function")}var l=function(){},f=function(){function g(){u(this,g),this.internalIsCanceled=!1,this.listeners=[]}return n(g,[{key:"isCanceled",value:function(){return this.internalIsCanceled}},{key:"cancel",value:function(){this.internalIsCanceled||(this.internalIsCanceled=!0,this.listeners.forEach(function(b){return b()}),this.listeners=null)}},{key:"throwIfCanceled",value:function(){if(this.internalIsCanceled)throw new a.default("Operation has been canceled.")}},{key:"onCancel",value:function(b){var S=this;return this.internalIsCanceled?l:(this.listeners.push(b),function(){if(S.listeners){var C=S.listeners.indexOf(b);C!==-1&&S.listeners.splice(C,1)}})}},{key:"fork",value:function(){if(this.internalIsCanceled)return g.CANCELED;var b=new g;return this.onCancel(function(){return b.cancel()}),b}}]),g}();r.default=f,f.CANCELED=new f,f.CANCELED.internalIsCanceled=!0},function(t,r,e){(function(n){const o=e(63),a=e(304).default,c=e(155);e(110)();function u(l,f){const g=o(l),v=new n(b=>{const S=()=>{(l.videoWidth()>2||l.videoHeight()>2)&&b(!0)};g.on("videoDimensionsChanged",S),S()});return a(c(v,f,()=>!1),()=>g.removeAll())}t.exports=u}).call(this,e(1))},function(t,r,e){(function(n){const o=e(63),a=e(304).default,c=e(155);e(110)();function u(l,f){f===void 0&&(f=5e3);const g=o(l),v=new n(b=>{g.on("timeupdate",b),g.on("loadedmetadata",b)});return a(c(v,f,()=>!1),()=>g.removeAll())}t.exports=u}).call(this,e(1))},function(t,r,e){const n=e(2)("WidgetView:fixMini"),o=128,a=128,c=64,u=64;t.exports=function(f){const g=f.clientWidth,v=f.clientHeight;f.classList.remove("OT_micro"),f.classList.remove("OT_mini"),(g<c||v<u)&&(f.classList.add("OT_micro"),n.debug("OT_micro class added",{clientWidth:g,clientHeight:v,microWidth:c,microHeight:u})),(g<o||v<a)&&(f.classList.add("OT_mini"),n.debug("OT_mini class added",{clientWidth:g,clientHeight:v,miniWidth:o,miniHeight:a}))}},function(t,r,e){const n=e(17);t.exports=function(a,c){let u,l;if(a&&a.nodeName?(u=a,(!u.getAttribute("id")||u.getAttribute("id").length===0)&&u.setAttribute("id",`OT_${n()}`),l=u.getAttribute("id")):a&&(u=document.getElementById(a),u&&(l=a)),l||(l=`OT_${n().replace(/-/g,"_")}`),!u)return u=document.createElement("div"),u.id=l,u.setAttribute("id",l),u.style.backgroundColor="#000000",document.body.appendChild(u),u;const f=document.createElement("div");switch(f.id=`OT_${n()}`,c){case"append":return u.appendChild(f),f;case"before":return u.parentNode.insertBefore(f,u),f;case"after":return u.parentNode.insertBefore(f,u.nextSibling),f;case"replace":default:for(;u.firstChild;)u.removeChild(u.firstChild);return u}}},function(t,r,e){t.exports=function(o,a){return a===void 0&&(a="px"),String(parseFloat(o,10))===String(o).trim()?`${String(o).trim()}${a}`:o}},function(t,r,e){(function(n){const o=e(75);t.exports=function(c,u){let l=u===void 0?{}:u,f=l.frequency,g=f===void 0?60:f,v=l.timeout,b=v===void 0?2e3:v;return new n((S,C)=>{let O;const A=new o(()=>{function w(){try{return c()}catch{return!1}}w()&&(clearTimeout(O),A.stop(),S())},g);O=setTimeout(()=>{A.stop(),C(new Error("TIMEOUT"))},b),A.start()})}}).call(this,e(1))},function(t,r,e){const n=e(13)(),o=e(7),a=e(10);t.exports=c=>String(c.code)==="404"?n(o.STREAM_NOT_FOUND,new Error("stream not found"),a.UNABLE_TO_SUBSCRIBE):String(c.code)==="409"&&c.message==="streamLimitExceeded"?n(o.STREAM_LIMIT_EXCEEDED,new Error("The limit for concurrent streams in the session has been reached"),a.STREAM_LIMIT_EXCEEDED):String(c.code)==="405"&&c.message==="IncompatibleEncryptionSettings"?n(o.UNABLE_TO_SUBSCRIBE,new Error("Tried to subscribe to an encrypted stream without enabling encryption"),a.UNABLE_TO_SUBSCRIBE):String(c.code)==="500"&&c.message==="Not connected."?n(o.UNABLE_TO_SUBSCRIBE,new Error("Tried to subscribe to a stream while disconnected."),a.UNABLE_TO_SUBSCRIBE):n(o.UNABLE_TO_SUBSCRIBE,new Error(`subscriberCreate failed with unexpected code ${c.code}: ${c.message}`),a.UNEXPECTED_SERVER_RESPONSE)},function(t,r,e){const n=e(27),o=e(50),a=e(106),c=e(23)();t.exports=u=>{let l=u.subscriber,f=u.audioLevelSampler,g=0,v=0;const b=new a(()=>{const S=l.listenerCount(n.AUDIO_LEVEL_UPDATED);if((()=>o()-v>1e4&&S===0)()){b.stop();return}g=f.sample(),S>0&&l.dispatchEvent(new c.AudioLevelUpdatedEvent(g))});return Object.defineProperty(l,"loudness",{get(){return b.start(),v=o(),g},set(){throw new TypeError("Cannot set readonly property loudness")},configurable:!0}),l.listenerCount(n.AUDIO_LEVEL_UPDATED)&&b.start(),l.on("audioLevelUpdated:added",()=>{b.start()}),l.once(n.SUBSCRIBER_DESTROYED,()=>{b.stop()}),{destroy(){f.destroy(),b.stop()}}}},function(t,r,e){const n=e(253),o=e(147),a=e(675),c=e(306),u=e(307),l=e(159)(),f=e(676),g=e(2)("Subscriber");t.exports=function(v,b){b===void 0&&(b={});const S=b.hasGetSynchronizationSupport;if(v){if(a({hasGetSynchronizationSupport:S}))return new n(v.getSynchronizationSources);if(c())return new n(v.getStats);if(u()){let C;try{C=b.audioContext||l()}catch(O){g.warn("Failed to get AudioContext()",O)}if(f(C))return new o(C)}}}},function(t,r,e){const n=e(3),o=()=>window.RTCRtpReceiver&&"getSynchronizationSources"in window.RTCRtpReceiver.prototype;t.exports=function(a){return a===void 0&&(a={}),(a.hasGetSynchronizationSupport||o)()&&!n.isFirefox}},function(t,r,e){t.exports=n=>(typeof window!==void 0?window:commonjsGlobal).AudioContext&&n instanceof(typeof window!==void 0?window:commonjsGlobal).AudioContext||(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext&&n instanceof(typeof window!==void 0?window:commonjsGlobal).webkitAudioContext},function(t,r,e){const n=e(38),o=e(8);t.exports=function(c){let u=!1;const l=g=>{const v=["auto","on"].indexOf(this.getDisplayMode())>-1;o.removeClass(g,["OT_audio-blocked","OT_active"].join(" ")),v&&(u&&o.addClass(g,"OT_audio-blocked"),o.addClass(g,"OT_active"))};this.setAudioBlocked=g=>{u=g,l(this.domElement)},n(this,{mode:c.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_audio-blocked-indicator"}});const f=this.setDisplayMode.bind(this);this.setDisplayMode=g=>{f(g),l(this.domElement)}}},function(t,r,e){const n=e(38),o=e(8);t.exports=function(c){let u=!1;const l=g=>{const v=["auto","on"].indexOf(this.getDisplayMode())>-1;o.removeClass(g,["OT_active"].join(" ")),!(!v||!u)&&o.addClass(g,"OT_active")};this.setVideoUnsupported=g=>{u=g,l(this.domElement)},n(this,{mode:c.mode||"auto",nodeName:"div",htmlAttributes:{className:"OT_video-unsupported"},htmlContent:'<div class="OT_video-unsupported-bar"></div><div class="OT_video-unsupported-img"></div><span class="OT_video-unsupported-text">Video format not supported</span>'});const f=this.setDisplayMode.bind(this);this.setDisplayMode=g=>{f(g),l(this.domElement)}}},function(t,r,e){const n=e(49),o=e(9),a=e(62),c=e(76),u=e(158),l=function(g,v){v===void 0&&(v=5e3);let b,S=!1;const C={},O=function(V){return V===void 0&&(V=[]),a(V,k=>c.isVideoInboundRtpStat(k))},A=()=>{S||g((w,V)=>{if(!S){if(!w){const k=O(V);k?o(C,n(k,["timestamp","framesDecoded"])):C.timestamp||o(C,{timestamp:Date.now(),framesDecoded:0})}b=setTimeout(A,v)}})};return A(),{getFrameRateFromStat(w){return u({currentStatFrames:w.framesDecoded,currentTimestamp:w.timestamp,prevStatFrames:C.framesDecoded,prevTimestamp:C.timestamp})},destroy(){S=!0,b&&(clearTimeout(b),b=null)}}};t.exports=l},function(t,r,e){t.exports=n=>{let o=n.connectivityState,a=n.onWarning,c=n.onTimeout,u=n.warningMs,l=n.timeoutMs;const f=[],g=()=>{f.forEach(v=>clearTimeout(v))};o.observe({onEnterConnecting(){f.push(setTimeout(a,u),setTimeout(c,l))},onEnterConnected:g,onEnterDisconnected:g})}},function(t,r,e){const n=e(310);t.exports=o=>{let a=o.onInvalidTransition;return new n({init:"disconnected",transitions:[{name:"beginConnect",from:"disconnected",to:"connecting"},{name:"connect",from:"connecting",to:"connected"},{name:"fail",from:["connecting","connected"],to:"disconnected"},{name:"cancel",from:["connecting","connected"],to:"disconnected"},{name:"disconnect",from:["connecting","connected"],to:"disconnected"}],methods:{onInvalidTransition:a}})}},function(t,r,e){const n=e(75);t.exports=o=>{let a=o.connectivityState,c=o.logAttempt;const u=new n(c,1/5,6);a.observe({onEnterConnecting(){u.start()},onEnterDisconnected(){u.stop()},onEnterConnected(){u.stop()}})}},function(t,r,e){var n=e(684),o=e(260),a=n(function(c,u,l){return c+(l?" ":"")+o(u)});t.exports=a},function(t,r,e){var n=e(685),o=e(686),a=e(689),c="[']",u=RegExp(c,"g");function l(f){return function(g){return n(a(o(g).replace(u,"")),f,"")}}t.exports=l},function(t,r){function e(n,o,a,c){var u=-1,l=n==null?0:n.length;for(c&&l&&(a=n[++u]);++u<l;)a=o(a,n[u],u,n);return a}t.exports=e},function(t,r,e){var n=e(687),o=e(61),a=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,c="\\u0300-\\u036f",u="\\ufe20-\\ufe2f",l="\\u20d0-\\u20ff",f=c+u+l,g="["+f+"]",v=RegExp(g,"g");function b(S){return S=o(S),S&&S.replace(a,n).replace(v,"")}t.exports=b},function(t,r,e){var n=e(688),o={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},a=n(o);t.exports=a},function(t,r){function e(n){return function(o){return n==null?void 0:n[o]}}t.exports=e},function(t,r,e){var n=e(690),o=e(691),a=e(61),c=e(692);function u(l,f,g){return l=a(l),f=g?void 0:f,f===void 0?o(l)?c(l):n(l):l.match(f)||[]}t.exports=u},function(t,r){var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function n(o){return o.match(e)||[]}t.exports=n},function(t,r){var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function n(o){return e.test(o)}t.exports=n},function(t,r){var e="\\ud800-\\udfff",n="\\u0300-\\u036f",o="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",c=n+o+a,u="\\u2700-\\u27bf",l="a-z\\xdf-\\xf6\\xf8-\\xff",f="\\xac\\xb1\\xd7\\xf7",g="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",v="\\u2000-\\u206f",b=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",S="A-Z\\xc0-\\xd6\\xd8-\\xde",C="\\ufe0e\\ufe0f",O=f+g+v+b,A="[']",w="["+O+"]",V="["+c+"]",k="\\d+",M="["+u+"]",W="["+l+"]",Y="[^"+e+O+k+u+l+S+"]",H="\\ud83c[\\udffb-\\udfff]",P="(?:"+V+"|"+H+")",j="[^"+e+"]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",z="[\\ud800-\\udbff][\\udc00-\\udfff]",ae="["+S+"]",me="\\u200d",ye="(?:"+W+"|"+Y+")",Pe="(?:"+ae+"|"+Y+")",Te="(?:"+A+"(?:d|ll|m|re|s|t|ve))?",Ue="(?:"+A+"(?:D|LL|M|RE|S|T|VE))?",_e=P+"?",je="["+C+"]?",Ke="(?:"+me+"(?:"+[j,_,z].join("|")+")"+je+_e+")*",De="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ze="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tt=je+_e+Ke,gt="(?:"+[M,_,z].join("|")+")"+tt,Ee=RegExp([ae+"?"+W+"+"+Te+"(?="+[w,ae,"$"].join("|")+")",Pe+"+"+Ue+"(?="+[w,ae+ye,"$"].join("|")+")",ae+"?"+ye+"+"+Te,ae+"+"+Ue,Ze,De,k,gt].join("|"),"g");function Le(We){return We.match(Ee)||[]}t.exports=Le},function(t,r,e){t.exports=(n,o)=>{const a=n.getSenders().find(u=>u.track.kind==="video"),c=a.getParameters();c.encodings.forEach(u=>{u.active=o}),a.setParameters(c)}},function(t,r,e){const n=e(49),o=e(269);t.exports=a=>{const c=n(a,["audioDeviceId","audioFallback","audioFallbackEnabled","audioSource","channels","classNames","constraints","disableAudioProcessing","echoCancellation","noiseSuppression","autoGainControl","enableRenegotiation","enableStereo","facingMode","fitMode","frameRate","height","insertDefaultUI","insertMode","audioBitrate","maxResolution","minVideoBitrate","mirror","name","publishAudio","publishVideo","resolution","showControls","style","videoContentHint","videoDeviceId","videoDimensions","videoFilter","videoSource","width"]);return c.style&&(c.style=o(c.style)),c}},function(t,r,e){const n=e(27),o=e(50),a=e(106),c=e(23)();t.exports=u=>{let l=u.publisher,f=u.widgetView,g=0,v=0;const b=new a(()=>{const S=l.listenerCount(n.AUDIO_LEVEL_UPDATED);if((()=>o()-v>1e4&&S===0)()){b.stop();return}const O=f&&f.video();if(O){const A=O.getAudioInputLevel();g=A,S>0&&l.dispatchEvent(new c.AudioLevelUpdatedEvent(A))}});Object.defineProperty(l,"loudness",{get(){return b.start(),v=o(),g},set(){throw new TypeError("Cannot set readonly property loudness")}}),l.listenerCount(n.AUDIO_LEVEL_UPDATED)&&b.start(),l.on("audioLevelUpdated:added",()=>{b.start()}),l.once(n.PUBLISHER_DESTROYED,()=>{b.stop()})}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));t.exports=function(u){let l=!1;return function(){var f=(0,a.default)(o.default.mark(function v(){var b,S,C,O=arguments;return o.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!l){w.next=2;break}throw new Error("The previous call to this function has not yet completed.");case 2:for(l=!0,w.prev=3,b=O.length,S=new Array(b),C=0;C<b;C++)S[C]=O[C];return w.next=7,u.call(this,...S);case 7:return w.abrupt("return",w.sent);case 8:return w.prev=8,l=!1,w.finish(8);case 11:case"end":return w.stop()}},v,this,[[3,,8,11]])}));function g(){return f.apply(this,arguments)}return g}()}},function(t,r,e){const n=e(13)(),o=e(7);t.exports=function(c){const u=document.createElement("canvas");if(!u.captureStream)throw n(o.NOT_SUPPORTED,new Error("Your browser does not support HTMLCanvasElement.captureStream()"));u.width=c.width,u.height=c.height,u.getContext("2d").fillRect(0,0,1,1);const l=u.captureStream().getVideoTracks(),f=l[0];return f.isCreatedCanvas=!0,f.enabled=!1,f}},function(t,r,e){const n=u=>u.getSettings&&u.getSettings().deviceId,o=u=>{let l;return u.getConstraints&&u.getConstraints().deviceId&&(l=u.getConstraints().deviceId.exact),l},a=(u,l)=>{let f;if(l&&l.length){const g=l.find(v=>v.label===u.label);g&&(f=g.deviceId)}return f},c=(u,l)=>n(u)||o(u)||a(u,l);t.exports=(u,l)=>{if(!u)return null;const f=u.getVideoTracks(),g=f[0];return g?c(g,l):null}},function(t,r,e){const n=e(7),o=e(10),a=e(13)();t.exports=c=>{const u=["403","404","409"],l=String(c.code);return l==="405"&&c.message==="IncompatibleEncryptionSettings"?a(n.STREAM_CREATE_FAILED,new Error("IncompatibleEncryptionSettings: Tried to publish a stream to an encrypted session without enabling encryption"),o.UNABLE_TO_PUBLISH):u.includes(l)?a(n.STREAM_CREATE_FAILED,new Error(`Failed to create stream in server model: ${c.message}`),o.UNABLE_TO_PUBLISH):a(n.UNEXPECTED_SERVER_RESPONSE,new Error(`Unexpected server response: ${c.message}`),o.UNEXPECTED_SERVER_RESPONSE)}},function(t,r,e){var n=e(0),o=n(e(105)),a=n(e(37)),c=n(e(14));const u=e(28),l=e(2)("AudioFallbackState"),f={ACTIVE_VIDEO:"activeVideo",ACTIVE_VIDEO_WITH_WARNING:"activeVideoWithWarning",SUSPENDED_VIDEO:"suspendedVideo"},g={LOW:"low",MEDIUM:"medium",CRITICAL:"critical"};let v=function(b){(0,a.default)(S,b);function S(){var O;return O=b.call(this)||this,(0,c.default)((0,o.default)(O),"_setVideoState",A=>{const w=O.videoState;O.videoState=A,O.emit("stateChange",{previousState:w,state:A})}),(0,c.default)((0,o.default)(O),"_transitionToLow",()=>{O.congestionLevel=g.LOW,O._setVideoState(f.ACTIVE_VIDEO)}),(0,c.default)((0,o.default)(O),"_transitionToMedium",()=>{O.congestionLevel===g.LOW&&O._setVideoState(f.ACTIVE_VIDEO_WITH_WARNING),O.congestionLevel=g.MEDIUM}),(0,c.default)((0,o.default)(O),"_transitionToCritical",()=>{O.congestionLevel=g.CRITICAL,O._setVideoState(f.SUSPENDED_VIDEO)}),O._setInitialState(),O._transitions={[g.LOW]:O._transitionToLow,[g.MEDIUM]:O._transitionToMedium,[g.CRITICAL]:O._transitionToCritical},O}var C=S.prototype;return C.setCongestionLevel=function(A){if(this.congestionLevel===A){l.warn(`Congestion level already set: ${A}`);return}const w=this._transitions[A];w?w():l.warn(`Invalid congestion level: ${A}`)},C._setInitialState=function(){this.congestionLevel=g.LOW,this.videoState=f.ACTIVE_VIDEO},C.reset=function(){this._setInitialState()},S}(u);t.exports={AudioFallbackStateMachine:v,AudioFallbackVideoStates:f,CongestionLevels:g}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(16)),c=n(e(5));const u=e(3),l=e(314),f=e(703),g=e(2)("MediaProcessor"),v=e(102),b=v.getProxyUrl;function S(C){var O=this;C===void 0&&(C={});const A=C,w=A.ML,V=w===void 0?l:w,k=A.MediaTransform,M=k===void 0?f:k,W=A.getProxyUrl,Y=W===void 0?b:W;let H,P,j,_;this.isValidVideoFilter=z=>{const ae=z.type;return M.isSupported(ae)&&M.isValidConfig(z)},this.canUpdateVideoFilter=z=>["backgroundBlur","backgroundReplacement"].includes(z),this.updateVideoFilter=function(){var z=(0,c.default)(o.default.mark(function ae(me){var ye,Pe,Te;return o.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(ye=me.type,O.canUpdateVideoFilter(ye)){_e.next=4;break}return g.warn(`Ignoring: filter "${ye}" doesn't support real-time updates`),_e.abrupt("return");case 4:return Pe=M.getConfigurator(ye),Te=Pe.getConfig((0,a.default)({proxyUrl:Y()},me)),_e.next=8,P.setBackgroundOptions(Te);case 8:j=me;case 9:case"end":return _e.stop()}},ae)}));return function(ae){return z.apply(this,arguments)}}(),this.setVideoFilter=function(){var z=(0,c.default)(o.default.mark(function ae(me){var ye,Pe,Te,Ue;return o.default.wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(ye=me.type,Pe=M.getConfigurator(ye),Pe){je.next=5;break}return g.warn(`Ignoring: filter "${ye}" isn't supported`),je.abrupt("return");case 5:if(Te=Pe.getConfig((0,a.default)({proxyUrl:Y()},me)),Te){je.next=9;break}return g.warn(`Ignoring: couldn't configure filter ${ye}`),je.abrupt("return");case 9:if(Ue=!!O.getVideoFilter(),!Ue){je.next=20;break}return je.prev=11,je.next=14,O.destroy();case 14:je.next=20;break;case 16:return je.prev=16,je.t0=je.catch(11),g.warn(`Ignoring, couldn't remove previous filter: ${je.t0}`),je.abrupt("return");case 20:return je.next=22,V.createProcessor(Te);case 22:return P=je.sent,je.next=25,P.getConnector();case 25:H=je.sent,j=me;case 27:case"end":return je.stop()}},ae,null,[[11,16]])}));return function(ae){return z.apply(this,arguments)}}(),this.getVideoFilter=()=>j,this.getOriginalVideoTrack=()=>_,this.setMediaStream=function(){var z=(0,c.default)(o.default.mark(function ae(me){var ye,Pe,Te;return o.default.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:if(ye=me.getVideoTracks(),Pe=ye[0],Pe){_e.next=4;break}return g.warn("Ignoring. No video track found"),_e.abrupt("return",null);case 4:return Te=null,_e.prev=5,_e.next=8,H.setTrack(Pe);case 8:Te=_e.sent,_=Pe,_e.next=15;break;case 12:_e.prev=12,_e.t0=_e.catch(5),g.error(`Error setting media stream: ${_e.t0}`);case 15:return _e.abrupt("return",Te);case 16:case"end":return _e.stop()}},ae,null,[[5,12]])}));return function(ae){return z.apply(this,arguments)}}(),this.setVideoTrack=function(){var z=(0,c.default)(o.default.mark(function ae(me){var ye;return o.default.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return ye=null,Te.prev=1,Te.next=4,H.setTrack(me);case 4:ye=Te.sent,_=me,Te.next=11;break;case 8:Te.prev=8,Te.t0=Te.catch(1),g.error(`Error setting video track: ${Te.t0}`);case 11:return Te.abrupt("return",ye);case 12:case"end":return Te.stop()}},ae,null,[[1,8]])}));return function(ae){return z.apply(this,arguments)}}(),this._setConnector=z=>{H=z},this.destroy=(0,c.default)(o.default.mark(function z(){return o.default.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.prev=0,me.next=3,H.destroy();case 3:me.next=8;break;case 5:me.prev=5,me.t0=me.catch(0),g.warn(`Error destroying connector: ${me.t0}`);case 8:H=null,j=null,_=null;case 11:case"end":return me.stop()}},z,null,[[0,5]])})),this.enableLogging=z=>{if(!z){g.warn("Error enabling logging: invalid API key");return}const ae={appId:z,sourceType:"video"},me=Y();me&&(ae.proxyUrl=me),V.setMetadata(ae)},this.disableLogging=()=>{V.setMetadata()}}S.isSupported=function(C){C===void 0&&(C={});const O=C,A=O.env,w=A===void 0?u:A,V=O.ML,k=V===void 0?l:V;return!!w.isChromium&&k.isSupported()},t.exports=S},function(t,r,e){e.r(r),function(n,o){e.d(r,"ErrorFunction",function(){return ic}),e.d(r,"MediaProcessor",function(){return qa}),e.d(r,"MediaProcessorConnector",function(){return _s}),e.d(r,"PipelineInfoData",function(){return Qa}),e.d(r,"VonageSourceType",function(){return en}),e.d(r,"WarningType",function(){return $a}),e.d(r,"getVonageMetadata",function(){return Cn}),e.d(r,"isSupported",function(){return a}),e.d(r,"setVonageMetadata",function(){return Jt});function a(){return new n((dt,Ce)=>{typeof MediaStreamTrackProcessor>"u"||typeof MediaStreamTrackGenerator>"u"?Ce("Your browser does not support the MediaStreamTrack API for Insertable Streams of Media."):dt()})}class c{}c.updates={transformer_new:"New transformer",transformer_null:"Null transformer"},c.errors={transformer_none:"No transformers provided",transformer_start:"Cannot start transformer",transformer_transform:"Cannot transform frame",transformer_flush:"Cannot flush transformer",readable_null:"Readable is null",writable_null:"Writable is null"};var u={exports:{}},l=function(Ce,ct){return function(){for(var Ft=new Array(arguments.length),Nn=0;Nn<Ft.length;Nn++)Ft[Nn]=arguments[Nn];return Ce.apply(ct,Ft)}},f=l,g=Object.prototype.toString;function v(dt){return Array.isArray(dt)}function b(dt){return typeof dt>"u"}function S(dt){return dt!==null&&!b(dt)&&dt.constructor!==null&&!b(dt.constructor)&&typeof dt.constructor.isBuffer=="function"&&dt.constructor.isBuffer(dt)}function C(dt){return g.call(dt)==="[object ArrayBuffer]"}function O(dt){return g.call(dt)==="[object FormData]"}function A(dt){var Ce;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?Ce=ArrayBuffer.isView(dt):Ce=dt&&dt.buffer&&C(dt.buffer),Ce}function w(dt){return typeof dt=="string"}function V(dt){return typeof dt=="number"}function k(dt){return dt!==null&&typeof dt=="object"}function M(dt){if(g.call(dt)!=="[object Object]")return!1;var Ce=Object.getPrototypeOf(dt);return Ce===null||Ce===Object.prototype}function W(dt){return g.call(dt)==="[object Date]"}function Y(dt){return g.call(dt)==="[object File]"}function H(dt){return g.call(dt)==="[object Blob]"}function P(dt){return g.call(dt)==="[object Function]"}function j(dt){return k(dt)&&P(dt.pipe)}function _(dt){return g.call(dt)==="[object URLSearchParams]"}function z(dt){return dt.trim?dt.trim():dt.replace(/^\s+|\s+$/g,"")}function ae(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function me(dt,Ce){if(!(dt===null||typeof dt>"u"))if(typeof dt!="object"&&(dt=[dt]),v(dt))for(var ct=0,Lt=dt.length;ct<Lt;ct++)Ce.call(null,dt[ct],ct,dt);else for(var Ft in dt)Object.prototype.hasOwnProperty.call(dt,Ft)&&Ce.call(null,dt[Ft],Ft,dt)}function ye(){var dt={};function Ce(Ft,Nn){M(dt[Nn])&&M(Ft)?dt[Nn]=ye(dt[Nn],Ft):M(Ft)?dt[Nn]=ye({},Ft):v(Ft)?dt[Nn]=Ft.slice():dt[Nn]=Ft}for(var ct=0,Lt=arguments.length;ct<Lt;ct++)me(arguments[ct],Ce);return dt}function Pe(dt,Ce,ct){return me(Ce,function(Ft,Nn){ct&&typeof Ft=="function"?dt[Nn]=f(Ft,ct):dt[Nn]=Ft}),dt}function Te(dt){return dt.charCodeAt(0)===65279&&(dt=dt.slice(1)),dt}var Ue={isArray:v,isArrayBuffer:C,isBuffer:S,isFormData:O,isArrayBufferView:A,isString:w,isNumber:V,isObject:k,isPlainObject:M,isUndefined:b,isDate:W,isFile:Y,isBlob:H,isFunction:P,isStream:j,isURLSearchParams:_,isStandardBrowserEnv:ae,forEach:me,merge:ye,extend:Pe,trim:z,stripBOM:Te},_e=Ue;function je(dt){return encodeURIComponent(dt).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ke=function(Ce,ct,Lt){if(!ct)return Ce;var Ft;if(Lt)Ft=Lt(ct);else if(_e.isURLSearchParams(ct))Ft=ct.toString();else{var Nn=[];_e.forEach(ct,function(Un,Qo){Un===null||typeof Un>"u"||(_e.isArray(Un)?Qo=Qo+"[]":Un=[Un],_e.forEach(Un,function(_i){_e.isDate(_i)?_i=_i.toISOString():_e.isObject(_i)&&(_i=JSON.stringify(_i)),Nn.push(je(Qo)+"="+je(_i))}))}),Ft=Nn.join("&")}if(Ft){var Fn=Ce.indexOf("#");Fn!==-1&&(Ce=Ce.slice(0,Fn)),Ce+=(Ce.indexOf("?")===-1?"?":"&")+Ft}return Ce},De=Ue;function Ze(){this.handlers=[]}Ze.prototype.use=function(Ce,ct,Lt){return this.handlers.push({fulfilled:Ce,rejected:ct,synchronous:Lt?Lt.synchronous:!1,runWhen:Lt?Lt.runWhen:null}),this.handlers.length-1},Ze.prototype.eject=function(Ce){this.handlers[Ce]&&(this.handlers[Ce]=null)},Ze.prototype.forEach=function(Ce){De.forEach(this.handlers,function(Lt){Lt!==null&&Ce(Lt)})};var tt=Ze,gt=Ue,Ee=function(Ce,ct){gt.forEach(Ce,function(Ft,Nn){Nn!==ct&&Nn.toUpperCase()===ct.toUpperCase()&&(Ce[ct]=Ft,delete Ce[Nn])})},Le=function(Ce,ct,Lt,Ft,Nn){return Ce.config=ct,Lt&&(Ce.code=Lt),Ce.request=Ft,Ce.response=Nn,Ce.isAxiosError=!0,Ce.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},Ce},We=Le,ut=function(Ce,ct,Lt,Ft,Nn){var Fn=new Error(Ce);return We(Fn,ct,Lt,Ft,Nn)},bt=ut,mt=function(Ce,ct,Lt){var Ft=Lt.config.validateStatus;!Lt.status||!Ft||Ft(Lt.status)?Ce(Lt):ct(bt("Request failed with status code "+Lt.status,Lt.config,null,Lt.request,Lt))},It=Ue,Ge=It.isStandardBrowserEnv()?function(){return{write:function(ct,Lt,Ft,Nn,Fn,Hn){var Un=[];Un.push(ct+"="+encodeURIComponent(Lt)),It.isNumber(Ft)&&Un.push("expires="+new Date(Ft).toGMTString()),It.isString(Nn)&&Un.push("path="+Nn),It.isString(Fn)&&Un.push("domain="+Fn),Hn===!0&&Un.push("secure"),document.cookie=Un.join("; ")},read:function(ct){var Lt=document.cookie.match(new RegExp("(^|;\\s*)("+ct+")=([^;]*)"));return Lt?decodeURIComponent(Lt[3]):null},remove:function(ct){this.write(ct,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Qe=function(Ce){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(Ce)},Et=function(Ce,ct){return ct?Ce.replace(/\/+$/,"")+"/"+ct.replace(/^\/+/,""):Ce},Tt=Qe,Zt=Et,$t=function(Ce,ct){return Ce&&!Tt(ct)?Zt(Ce,ct):ct},pt=Ue,ft=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],et=function(Ce){var ct={},Lt,Ft,Nn;return Ce&&pt.forEach(Ce.split(`
`),function(Hn){if(Nn=Hn.indexOf(":"),Lt=pt.trim(Hn.substr(0,Nn)).toLowerCase(),Ft=pt.trim(Hn.substr(Nn+1)),Lt){if(ct[Lt]&&ft.indexOf(Lt)>=0)return;Lt==="set-cookie"?ct[Lt]=(ct[Lt]?ct[Lt]:[]).concat([Ft]):ct[Lt]=ct[Lt]?ct[Lt]+", "+Ft:Ft}}),ct},it=Ue,Pt=it.isStandardBrowserEnv()?function(){var Ce=/(msie|trident)/i.test(navigator.userAgent),ct=document.createElement("a"),Lt;function Ft(Nn){var Fn=Nn;return Ce&&(ct.setAttribute("href",Fn),Fn=ct.href),ct.setAttribute("href",Fn),{href:ct.href,protocol:ct.protocol?ct.protocol.replace(/:$/,""):"",host:ct.host,search:ct.search?ct.search.replace(/^\?/,""):"",hash:ct.hash?ct.hash.replace(/^#/,""):"",hostname:ct.hostname,port:ct.port,pathname:ct.pathname.charAt(0)==="/"?ct.pathname:"/"+ct.pathname}}return Lt=Ft(window.location.href),function(Fn){var Hn=it.isString(Fn)?Ft(Fn):Fn;return Hn.protocol===Lt.protocol&&Hn.host===Lt.host}}():function(){return function(){return!0}}();function nn(dt){this.message=dt}nn.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},nn.prototype.__CANCEL__=!0;var Ut=nn,xt=Ue,Wt=mt,tn=Ge,mn=Ke,Dn=$t,er=et,Zn=Pt,dr=ut,pr=Os,Bn=Ut,Jn=function(Ce){return new n(function(Lt,Ft){var Nn=Ce.data,Fn=Ce.headers,Hn=Ce.responseType,Un;function Qo(){Ce.cancelToken&&Ce.cancelToken.unsubscribe(Un),Ce.signal&&Ce.signal.removeEventListener("abort",Un)}xt.isFormData(Nn)&&delete Fn["Content-Type"];var cr=new XMLHttpRequest;if(Ce.auth){var _i=Ce.auth.username||"",Va=Ce.auth.password?unescape(encodeURIComponent(Ce.auth.password)):"";Fn.Authorization="Basic "+btoa(_i+":"+Va)}var wi=Dn(Ce.baseURL,Ce.url);cr.open(Ce.method.toUpperCase(),mn(wi,Ce.params,Ce.paramsSerializer),!0),cr.timeout=Ce.timeout;function da(){if(cr){var hs="getAllResponseHeaders"in cr?er(cr.getAllResponseHeaders()):null,Sa=!Hn||Hn==="text"||Hn==="json"?cr.responseText:cr.response,ha={data:Sa,status:cr.status,statusText:cr.statusText,headers:hs,config:Ce,request:cr};Wt(function(Ca){Lt(Ca),Qo()},function(Ca){Ft(Ca),Qo()},ha),cr=null}}if("onloadend"in cr?cr.onloadend=da:cr.onreadystatechange=function(){!cr||cr.readyState!==4||cr.status===0&&!(cr.responseURL&&cr.responseURL.indexOf("file:")===0)||setTimeout(da)},cr.onabort=function(){cr&&(Ft(dr("Request aborted",Ce,"ECONNABORTED",cr)),cr=null)},cr.onerror=function(){Ft(dr("Network Error",Ce,null,cr)),cr=null},cr.ontimeout=function(){var Sa=Ce.timeout?"timeout of "+Ce.timeout+"ms exceeded":"timeout exceeded",ha=Ce.transitional||pr.transitional;Ce.timeoutErrorMessage&&(Sa=Ce.timeoutErrorMessage),Ft(dr(Sa,Ce,ha.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",cr)),cr=null},xt.isStandardBrowserEnv()){var fa=(Ce.withCredentials||Zn(wi))&&Ce.xsrfCookieName?tn.read(Ce.xsrfCookieName):void 0;fa&&(Fn[Ce.xsrfHeaderName]=fa)}"setRequestHeader"in cr&&xt.forEach(Fn,function(Sa,ha){typeof Nn>"u"&&ha.toLowerCase()==="content-type"?delete Fn[ha]:cr.setRequestHeader(ha,Sa)}),xt.isUndefined(Ce.withCredentials)||(cr.withCredentials=!!Ce.withCredentials),Hn&&Hn!=="json"&&(cr.responseType=Ce.responseType),typeof Ce.onDownloadProgress=="function"&&cr.addEventListener("progress",Ce.onDownloadProgress),typeof Ce.onUploadProgress=="function"&&cr.upload&&cr.upload.addEventListener("progress",Ce.onUploadProgress),(Ce.cancelToken||Ce.signal)&&(Un=function(hs){cr&&(Ft(!hs||hs&&hs.type?new Bn("canceled"):hs),cr.abort(),cr=null)},Ce.cancelToken&&Ce.cancelToken.subscribe(Un),Ce.signal&&(Ce.signal.aborted?Un():Ce.signal.addEventListener("abort",Un))),Nn||(Nn=null),cr.send(Nn)})},Dt=Ue,Ii=Ee,ti=Le,ci={"Content-Type":"application/x-www-form-urlencoded"};function Rr(dt,Ce){!Dt.isUndefined(dt)&&Dt.isUndefined(dt["Content-Type"])&&(dt["Content-Type"]=Ce)}function Vr(){var dt;return(typeof XMLHttpRequest<"u"||typeof o<"u"&&Object.prototype.toString.call(o)==="[object process]")&&(dt=Jn),dt}function ui(dt,Ce,ct){if(Dt.isString(dt))try{return(Ce||JSON.parse)(dt),Dt.trim(dt)}catch(Lt){if(Lt.name!=="SyntaxError")throw Lt}return(ct||JSON.stringify)(dt)}var Vi={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:Vr(),transformRequest:[function(Ce,ct){return Ii(ct,"Accept"),Ii(ct,"Content-Type"),Dt.isFormData(Ce)||Dt.isArrayBuffer(Ce)||Dt.isBuffer(Ce)||Dt.isStream(Ce)||Dt.isFile(Ce)||Dt.isBlob(Ce)?Ce:Dt.isArrayBufferView(Ce)?Ce.buffer:Dt.isURLSearchParams(Ce)?(Rr(ct,"application/x-www-form-urlencoded;charset=utf-8"),Ce.toString()):Dt.isObject(Ce)||ct&&ct["Content-Type"]==="application/json"?(Rr(ct,"application/json"),ui(Ce)):Ce}],transformResponse:[function(Ce){var ct=this.transitional||Vi.transitional,Lt=ct&&ct.silentJSONParsing,Ft=ct&&ct.forcedJSONParsing,Nn=!Lt&&this.responseType==="json";if(Nn||Ft&&Dt.isString(Ce)&&Ce.length)try{return JSON.parse(Ce)}catch(Fn){if(Nn)throw Fn.name==="SyntaxError"?ti(Fn,this,"E_JSON_PARSE"):Fn}return Ce}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(Ce){return Ce>=200&&Ce<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Dt.forEach(["delete","get","head"],function(Ce){Vi.headers[Ce]={}}),Dt.forEach(["post","put","patch"],function(Ce){Vi.headers[Ce]=Dt.merge(ci)});var Os=Vi,ii=Ue,xo=Os,Ws=function(Ce,ct,Lt){var Ft=this||xo;return ii.forEach(Lt,function(Fn){Ce=Fn.call(Ft,Ce,ct)}),Ce},ga=function(Ce){return!!(Ce&&Ce.__CANCEL__)},Kn=Ue,mi=Ws,ya=ga,ki=Os,Ao=Ut;function Ln(dt){if(dt.cancelToken&&dt.cancelToken.throwIfRequested(),dt.signal&&dt.signal.aborted)throw new Ao("canceled")}var Uo=function(Ce){Ln(Ce),Ce.headers=Ce.headers||{},Ce.data=mi.call(Ce,Ce.data,Ce.headers,Ce.transformRequest),Ce.headers=Kn.merge(Ce.headers.common||{},Ce.headers[Ce.method]||{},Ce.headers),Kn.forEach(["delete","get","head","post","put","patch","common"],function(Ft){delete Ce.headers[Ft]});var ct=Ce.adapter||ki.adapter;return ct(Ce).then(function(Ft){return Ln(Ce),Ft.data=mi.call(Ce,Ft.data,Ft.headers,Ce.transformResponse),Ft},function(Ft){return ya(Ft)||(Ln(Ce),Ft&&Ft.response&&(Ft.response.data=mi.call(Ce,Ft.response.data,Ft.response.headers,Ce.transformResponse))),n.reject(Ft)})},Xr=Ue,bs=function(Ce,ct){ct=ct||{};var Lt={};function Ft(cr,_i){return Xr.isPlainObject(cr)&&Xr.isPlainObject(_i)?Xr.merge(cr,_i):Xr.isPlainObject(_i)?Xr.merge({},_i):Xr.isArray(_i)?_i.slice():_i}function Nn(cr){if(Xr.isUndefined(ct[cr])){if(!Xr.isUndefined(Ce[cr]))return Ft(void 0,Ce[cr])}else return Ft(Ce[cr],ct[cr])}function Fn(cr){if(!Xr.isUndefined(ct[cr]))return Ft(void 0,ct[cr])}function Hn(cr){if(Xr.isUndefined(ct[cr])){if(!Xr.isUndefined(Ce[cr]))return Ft(void 0,Ce[cr])}else return Ft(void 0,ct[cr])}function Un(cr){if(cr in ct)return Ft(Ce[cr],ct[cr]);if(cr in Ce)return Ft(void 0,Ce[cr])}var Qo={url:Fn,method:Fn,data:Fn,baseURL:Hn,transformRequest:Hn,transformResponse:Hn,paramsSerializer:Hn,timeout:Hn,timeoutMessage:Hn,withCredentials:Hn,adapter:Hn,responseType:Hn,xsrfCookieName:Hn,xsrfHeaderName:Hn,onUploadProgress:Hn,onDownloadProgress:Hn,decompress:Hn,maxContentLength:Hn,maxBodyLength:Hn,transport:Hn,httpAgent:Hn,httpsAgent:Hn,cancelToken:Hn,socketPath:Hn,responseEncoding:Hn,validateStatus:Un};return Xr.forEach(Object.keys(Ce).concat(Object.keys(ct)),function(_i){var Va=Qo[_i]||Nn,wi=Va(_i);Xr.isUndefined(wi)&&Va!==Un||(Lt[_i]=wi)}),Lt},Xs={version:"0.25.0"},rr=Xs.version,oi={};["object","boolean","number","function","string","symbol"].forEach(function(dt,Ce){oi[dt]=function(Lt){return typeof Lt===dt||"a"+(Ce<1?"n ":" ")+dt}});var Ds={};oi.transitional=function(Ce,ct,Lt){function Ft(Nn,Fn){return"[Axios v"+rr+"] Transitional option '"+Nn+"'"+Fn+(Lt?". "+Lt:"")}return function(Nn,Fn,Hn){if(Ce===!1)throw new Error(Ft(Fn," has been removed"+(ct?" in "+ct:"")));return ct&&!Ds[Fn]&&(Ds[Fn]=!0,console.warn(Ft(Fn," has been deprecated since v"+ct+" and will be removed in the near future"))),Ce?Ce(Nn,Fn,Hn):!0}};function ea(dt,Ce,ct){if(typeof dt!="object")throw new TypeError("options must be an object");for(var Lt=Object.keys(dt),Ft=Lt.length;Ft-- >0;){var Nn=Lt[Ft],Fn=Ce[Nn];if(Fn){var Hn=dt[Nn],Un=Hn===void 0||Fn(Hn,Nn,dt);if(Un!==!0)throw new TypeError("option "+Nn+" must be "+Un);continue}if(ct!==!0)throw Error("Unknown option "+Nn)}}var Ji={assertOptions:ea,validators:oi},mr=Ue,Da=Ke,ca=tt,Ss=Uo,kr=bs,zs=Ji,Vn=zs.validators;function Cs(dt){this.defaults=dt,this.interceptors={request:new ca,response:new ca}}Cs.prototype.request=function(Ce,ct){if(typeof Ce=="string"?(ct=ct||{},ct.url=Ce):ct=Ce||{},!ct.url)throw new Error("Provided config url is not valid");ct=kr(this.defaults,ct),ct.method?ct.method=ct.method.toLowerCase():this.defaults.method?ct.method=this.defaults.method.toLowerCase():ct.method="get";var Lt=ct.transitional;Lt!==void 0&&zs.assertOptions(Lt,{silentJSONParsing:Vn.transitional(Vn.boolean),forcedJSONParsing:Vn.transitional(Vn.boolean),clarifyTimeoutError:Vn.transitional(Vn.boolean)},!1);var Ft=[],Nn=!0;this.interceptors.request.forEach(function(wi){typeof wi.runWhen=="function"&&wi.runWhen(ct)===!1||(Nn=Nn&&wi.synchronous,Ft.unshift(wi.fulfilled,wi.rejected))});var Fn=[];this.interceptors.response.forEach(function(wi){Fn.push(wi.fulfilled,wi.rejected)});var Hn;if(!Nn){var Un=[Ss,void 0];for(Array.prototype.unshift.apply(Un,Ft),Un=Un.concat(Fn),Hn=n.resolve(ct);Un.length;)Hn=Hn.then(Un.shift(),Un.shift());return Hn}for(var Qo=ct;Ft.length;){var cr=Ft.shift(),_i=Ft.shift();try{Qo=cr(Qo)}catch(Va){_i(Va);break}}try{Hn=Ss(Qo)}catch(Va){return n.reject(Va)}for(;Fn.length;)Hn=Hn.then(Fn.shift(),Fn.shift());return Hn},Cs.prototype.getUri=function(Ce){if(!Ce.url)throw new Error("Provided config url is not valid");return Ce=kr(this.defaults,Ce),Da(Ce.url,Ce.params,Ce.paramsSerializer).replace(/^\?/,"")},mr.forEach(["delete","get","head","options"],function(Ce){Cs.prototype[Ce]=function(ct,Lt){return this.request(kr(Lt||{},{method:Ce,url:ct,data:(Lt||{}).data}))}}),mr.forEach(["post","put","patch"],function(Ce){Cs.prototype[Ce]=function(ct,Lt,Ft){return this.request(kr(Ft||{},{method:Ce,url:ct,data:Lt}))}});var $o=Cs,Bs=Ut;function Zr(dt){if(typeof dt!="function")throw new TypeError("executor must be a function.");var Ce;this.promise=new n(function(Ft){Ce=Ft});var ct=this;this.promise.then(function(Lt){if(ct._listeners){var Ft,Nn=ct._listeners.length;for(Ft=0;Ft<Nn;Ft++)ct._listeners[Ft](Lt);ct._listeners=null}}),this.promise.then=function(Lt){var Ft,Nn=new n(function(Fn){ct.subscribe(Fn),Ft=Fn}).then(Lt);return Nn.cancel=function(){ct.unsubscribe(Ft)},Nn},dt(function(Ft){ct.reason||(ct.reason=new Bs(Ft),Ce(ct.reason))})}Zr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Zr.prototype.subscribe=function(Ce){if(this.reason){Ce(this.reason);return}this._listeners?this._listeners.push(Ce):this._listeners=[Ce]},Zr.prototype.unsubscribe=function(Ce){if(this._listeners){var ct=this._listeners.indexOf(Ce);ct!==-1&&this._listeners.splice(ct,1)}},Zr.source=function(){var Ce,ct=new Zr(function(Ft){Ce=Ft});return{token:ct,cancel:Ce}};var Ba=Zr,rc=function(Ce){return function(Lt){return Ce.apply(null,Lt)}},Js=Ue,Ra=function(Ce){return Js.isObject(Ce)&&Ce.isAxiosError===!0},va=Ue,za=l,xa=$o,Ua=bs,ds=Os;function un(dt){var Ce=new xa(dt),ct=za(xa.prototype.request,Ce);return va.extend(ct,xa.prototype,Ce),va.extend(ct,Ce),ct.create=function(Ft){return un(Ua(dt,Ft))},ct}var yn=un(ds);yn.Axios=xa,yn.Cancel=Ut,yn.CancelToken=Ba,yn.isCancel=ga,yn.VERSION=Xs.version,yn.all=function(Ce){return n.all(Ce)},yn.spread=rc,yn.isAxiosError=Ra,u.exports=yn,u.exports.default=yn;var En=u.exports;class Sn{isEmpty(){return!this.isPresent()}static of(Ce){if(Ce!=null)return new xr(Ce);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(Ce){return Sn.of(Ce)}static ofNullable(Ce){return Ce!=null?new xr(Ce):new li}static empty(){return new li}static from(Ce){switch(Ce.kind){case"present":return Sn.of(Ce.value);case"empty":return Sn.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class xr extends Sn{constructor(Ce){super(),this.payload=Ce}isPresent(){return!0}get(){return this.payload}ifPresent(Ce){Ce(this.payload)}ifPresentOrElse(Ce,ct){Ce(this.payload)}filter(Ce){return Ce(this.payload)?this:Sn.empty()}map(Ce){const ct=Ce(this.payload);return Sn.ofNullable(ct)}flatMap(Ce){return Ce(this.payload)}or(Ce){return this}orElse(Ce){return this.payload}orElseGet(Ce){return this.payload}orElseThrow(Ce){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(Ce){return Ce.present(this.payload)}toJSON(Ce){return this.payload}}class li extends Sn{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(Ce){}ifPresentOrElse(Ce,ct){ct()}filter(Ce){return this}map(Ce){return Sn.empty()}flatMap(Ce){return Sn.empty()}or(Ce){return Ce()}orElse(Ce){return Ce}orElseGet(Ce){return this.orElse(Ce())}orElseThrow(Ce){throw Ce()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(Ce){return Ce.empty()}toJSON(Ce){return null}}const At="2.0.0";var en=(dt=>(dt.automation="automation",dt.test="test",dt.vbc="vbc",dt.video="video",dt.voice="voice",dt))(en||{});function Jt(dt){globalThis._vonageMediaProcessorMetadata=dt}function Cn(){return globalThis._vonageMediaProcessorMetadata}class On{constructor(){const Ce=Cn();this._report={action:Sn.empty(),applicationId:Sn.ofNullable(Ce!==void 0&&Ce!=null?Ce.appId:null),timestamp:Date.now(),fps:Sn.empty(),framesTransformed:Sn.empty(),guid:Sn.empty(),highestFrameTransformCpu:Sn.empty(),message:Sn.empty(),source:Sn.ofNullable(Ce!==void 0&&Ce!=null?Ce.sourceType:null),transformedFps:Sn.empty(),transformerType:Sn.empty(),variation:Sn.empty(),videoHeight:Sn.empty(),videoWidth:Sn.empty(),version:At,error:Sn.empty(),proxyUrl:Sn.ofNullable(Ce!==void 0&&Ce!=null?Ce.proxyUrl:null)}}action(Ce){return this._report.action=Sn.ofNullable(Ce),this}framesTransformed(Ce){return this._report.framesTransformed=Sn.ofNullable(Ce),this}fps(Ce){return this._report.fps=Sn.ofNullable(Ce),this}guid(Ce){return this._report.guid=Sn.ofNullable(Ce),this}message(Ce){return this._report.message=Sn.ofNullable(Ce),this}transformedFps(Ce){return this._report.transformedFps=Sn.ofNullable(Ce),this}transformerType(Ce){return this._report.transformerType=Sn.ofNullable(Ce),this}variation(Ce){return this._report.variation=Sn.ofNullable(Ce),this}videoHeight(Ce){return this._report.videoHeight=Sn.ofNullable(Ce),this}videoWidth(Ce){return this._report.videoWidth=Sn.ofNullable(Ce),this}error(Ce){return this._report.error=Sn.ofNullable(Ce),this}build(){return this._report}}const Pn=dt=>JSON.stringify(dt,(Ce,ct)=>{if(ct!==null)return ct});class yr{static report(Ce){return new n((ct,Lt)=>{if(Ce.applicationId.isEmpty()||Ce.source.isEmpty()){ct("success");return}let Ft=En.create(),Nn={timeout:1e4,timeoutErrorMessage:"Request timeout",headers:{"Content-Type":"application/json"}},Fn="hlg.tokbox.com/prod/logging/vcp_webrtc";if(Ce.proxyUrl.isEmpty())Fn="https://"+Fn;else{let Hn;Ce.proxyUrl.get().slice(Ce.proxyUrl.get().length-1)!=="/"?Hn=Ce.proxyUrl.get()+"/":Hn=Ce.proxyUrl.get(),Fn=Hn+Fn}Ft.post(Fn,Pn(Ce),Nn).then(Hn=>{console.log(Hn),ct("success")}).catch(Hn=>{console.log(Hn),Lt(Hn)})})}}var Cr,Kr=new Uint8Array(16);function ko(){if(!Cr&&(Cr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Cr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cr(Kr)}var Si=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Ia(dt){return typeof dt=="string"&&Si.test(dt)}for(var Li=[],wa=0;wa<256;++wa)Li.push((wa+256).toString(16).substr(1));function or(dt){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,ct=(Li[dt[Ce+0]]+Li[dt[Ce+1]]+Li[dt[Ce+2]]+Li[dt[Ce+3]]+"-"+Li[dt[Ce+4]]+Li[dt[Ce+5]]+"-"+Li[dt[Ce+6]]+Li[dt[Ce+7]]+"-"+Li[dt[Ce+8]]+Li[dt[Ce+9]]+"-"+Li[dt[Ce+10]]+Li[dt[Ce+11]]+Li[dt[Ce+12]]+Li[dt[Ce+13]]+Li[dt[Ce+14]]+Li[dt[Ce+15]]).toLowerCase();if(!Ia(ct))throw TypeError("Stringified UUID is invalid");return ct}function As(dt,Ce,ct){dt=dt||{};var Lt=dt.random||(dt.rng||ko)();if(Lt[6]=Lt[6]&15|64,Lt[8]=Lt[8]&63|128,Ce){ct=ct||0;for(var Ft=0;Ft<16;++Ft)Ce[ct+Ft]=Lt[Ft];return Ce}return or(Lt)}const Ri=new WeakMap,ua=new WeakMap,Zo=new WeakMap,ta=Symbol("anyProducer"),Pi=n.resolve(),na=Symbol("listenerAdded"),fs=Symbol("listenerRemoved");let Ga=!1;function Fo(dt){if(typeof dt!="string"&&typeof dt!="symbol")throw new TypeError("eventName must be a string or a symbol")}function jn(dt){if(typeof dt!="function")throw new TypeError("listener must be a function")}function gn(dt,Ce){const ct=ua.get(dt);return ct.has(Ce)||ct.set(Ce,new Set),ct.get(Ce)}function ra(dt,Ce){const ct=typeof Ce=="string"||typeof Ce=="symbol"?Ce:ta,Lt=Zo.get(dt);return Lt.has(ct)||Lt.set(ct,new Set),Lt.get(ct)}function Vs(dt,Ce,ct){const Lt=Zo.get(dt);if(Lt.has(Ce))for(const Ft of Lt.get(Ce))Ft.enqueue(ct);if(Lt.has(ta)){const Ft=n.all([Ce,ct]);for(const Nn of Lt.get(ta))Nn.enqueue(Ft)}}function Ma(dt,Ce){Ce=Array.isArray(Ce)?Ce:[Ce];let ct=!1,Lt=()=>{},Ft=[];const Nn={enqueue(Fn){Ft.push(Fn),Lt()},finish(){ct=!0,Lt()}};for(const Fn of Ce)ra(dt,Fn).add(Nn);return{async next(){return Ft?Ft.length===0?ct?(Ft=void 0,this.next()):(await new n(Fn=>{Lt=Fn}),this.next()):{done:!1,value:await Ft.shift()}:{done:!0}},async return(Fn){Ft=void 0;for(const Hn of Ce)ra(dt,Hn).delete(Nn);return Lt(),arguments.length>0?{done:!0,value:await Fn}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Ai(dt){if(dt===void 0)return Ho;if(!Array.isArray(dt))throw new TypeError("`methodNames` must be an array of strings");for(const Ce of dt)if(!Ho.includes(Ce))throw typeof Ce!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${Ce} is not Emittery method`);return dt}const fr=dt=>dt===na||dt===fs;class Oa{static mixin(Ce,ct){return ct=Ai(ct),Lt=>{if(typeof Lt!="function")throw new TypeError("`target` must be function");for(const Fn of ct)if(Lt.prototype[Fn]!==void 0)throw new Error(`The property \`${Fn}\` already exists on \`target\``);function Ft(){return Object.defineProperty(this,Ce,{enumerable:!1,value:new Oa}),this[Ce]}Object.defineProperty(Lt.prototype,Ce,{enumerable:!1,get:Ft});const Nn=Fn=>function(...Hn){return this[Ce][Fn](...Hn)};for(const Fn of ct)Object.defineProperty(Lt.prototype,Fn,{enumerable:!1,value:Nn(Fn)});return Lt}}static get isDebugEnabled(){if(typeof o!="object")return Ga;const{env:Ce}=o||{env:{}};return Ce.DEBUG==="emittery"||Ce.DEBUG==="*"||Ga}static set isDebugEnabled(Ce){Ga=Ce}constructor(Ce={}){Ri.set(this,new Set),ua.set(this,new Map),Zo.set(this,new Map),this.debug=Ce.debug||{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(ct,Lt,Ft,Nn)=>{Nn=JSON.stringify(Nn),typeof Ft=="symbol"&&(Ft=Ft.toString());const Fn=new Date,Hn=`${Fn.getHours()}:${Fn.getMinutes()}:${Fn.getSeconds()}.${Fn.getMilliseconds()}`;console.log(`[${Hn}][emittery:${ct}][${Lt}] Event Name: ${Ft}
	data: ${Nn}`)})}logIfDebugEnabled(Ce,ct,Lt){(Oa.isDebugEnabled||this.debug.enabled)&&this.debug.logger(Ce,this.debug.name,ct,Lt)}on(Ce,ct){jn(ct),Ce=Array.isArray(Ce)?Ce:[Ce];for(const Lt of Ce)Fo(Lt),gn(this,Lt).add(ct),this.logIfDebugEnabled("subscribe",Lt,void 0),fr(Lt)||this.emit(na,{eventName:Lt,listener:ct});return this.off.bind(this,Ce,ct)}off(Ce,ct){jn(ct),Ce=Array.isArray(Ce)?Ce:[Ce];for(const Lt of Ce)Fo(Lt),gn(this,Lt).delete(ct),this.logIfDebugEnabled("unsubscribe",Lt,void 0),fr(Lt)||this.emit(fs,{eventName:Lt,listener:ct})}once(Ce){return new n(ct=>{const Lt=this.on(Ce,Ft=>{Lt(),ct(Ft)})})}events(Ce){Ce=Array.isArray(Ce)?Ce:[Ce];for(const ct of Ce)Fo(ct);return Ma(this,Ce)}async emit(Ce,ct){Fo(Ce),this.logIfDebugEnabled("emit",Ce,ct),Vs(this,Ce,ct);const Lt=gn(this,Ce),Ft=Ri.get(this),Nn=[...Lt],Fn=fr(Ce)?[]:[...Ft];await Pi,await n.all([...Nn.map(async Hn=>{if(Lt.has(Hn))return Hn(ct)}),...Fn.map(async Hn=>{if(Ft.has(Hn))return Hn(Ce,ct)})])}async emitSerial(Ce,ct){Fo(Ce),this.logIfDebugEnabled("emitSerial",Ce,ct);const Lt=gn(this,Ce),Ft=Ri.get(this),Nn=[...Lt],Fn=[...Ft];await Pi;for(const Hn of Nn)Lt.has(Hn)&&await Hn(ct);for(const Hn of Fn)Ft.has(Hn)&&await Hn(Ce,ct)}onAny(Ce){return jn(Ce),this.logIfDebugEnabled("subscribeAny",void 0,void 0),Ri.get(this).add(Ce),this.emit(na,{listener:Ce}),this.offAny.bind(this,Ce)}anyEvent(){return Ma(this)}offAny(Ce){jn(Ce),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),this.emit(fs,{listener:Ce}),Ri.get(this).delete(Ce)}clearListeners(Ce){Ce=Array.isArray(Ce)?Ce:[Ce];for(const ct of Ce)if(this.logIfDebugEnabled("clear",ct,void 0),typeof ct=="string"||typeof ct=="symbol"){gn(this,ct).clear();const Lt=ra(this,ct);for(const Ft of Lt)Ft.finish();Lt.clear()}else{Ri.get(this).clear();for(const Lt of ua.get(this).values())Lt.clear();for(const Lt of Zo.get(this).values()){for(const Ft of Lt)Ft.finish();Lt.clear()}}}listenerCount(Ce){Ce=Array.isArray(Ce)?Ce:[Ce];let ct=0;for(const Lt of Ce){if(typeof Lt=="string"){ct+=Ri.get(this).size+gn(this,Lt).size+ra(this,Lt).size+ra(this).size;continue}typeof Lt<"u"&&Fo(Lt),ct+=Ri.get(this).size;for(const Ft of ua.get(this).values())ct+=Ft.size;for(const Ft of Zo.get(this).values())ct+=Ft.size}return ct}bindMethods(Ce,ct){if(typeof Ce!="object"||Ce===null)throw new TypeError("`target` must be an object");ct=Ai(ct);for(const Lt of ct){if(Ce[Lt]!==void 0)throw new Error(`The property \`${Lt}\` already exists on \`target\``);Object.defineProperty(Ce,Lt,{enumerable:!1,value:this[Lt].bind(this)})}}}const Ho=Object.getOwnPropertyNames(Oa.prototype).filter(dt=>dt!=="constructor");Object.defineProperty(Oa,"listenerAdded",{value:na,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(Oa,"listenerRemoved",{value:fs,writable:!1,enumerable:!0,configurable:!1});var la=Oa;function Ja(dt){return typeof dt=="object"&&dt!==null&&"message"in dt&&typeof dt.message=="string"}function ja(dt){if(Ja(dt))return dt;try{return new Error(JSON.stringify(dt))}catch{return new Error(String(dt))}}function Ha(dt){return ja(dt).message}var $a=(dt=>(dt.FPS_DROP="fps_drop",dt))($a||{}),ic=(dt=>(dt.start="start",dt.transform="transform",dt.flush="flush",dt))(ic||{}),Qa=(dt=>(dt.pipeline_ended="pipeline_ended",dt.pipeline_ended_with_error="pipeline_ended_with_error",dt.pipeline_started="pipeline_started",dt.pipeline_started_with_error="pipeline_started_with_error",dt.pipeline_restarted="pipeline_restarted",dt.pipeline_restarted_with_error="pipeline_restarted_with_error",dt))(Qa||{});const Lr=500,sr=.8;class Bc extends la{constructor(Ce,ct){super(),this.index_=ct,this.uuid_=As(),this.framesTransformed_=0,this.transformer_=Ce,this.shouldStop_=!1,this.isFlashed_=!1,this.framesFromSource_=0,this.fps_=0,this.mediaTransformerQosReportStartTimestamp_=0,this.videoHeight_=0,this.videoWidth_=0,this.trackExpectedRate_=-1,this.transformerType_="Custom","getTransformerType"in Ce&&(this.transformerType_=Ce.getTransformerType());const Lt=new On().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Create").build();yr.report(Lt)}setTrackExpectedRate(Ce){this.trackExpectedRate_=Ce}async start(Ce){if(this.controller_=Ce,this.transformer_&&typeof this.transformer_.start=="function")try{await this.transformer_.start(Ce)}catch(ct){const Lt=new On().action("MediaTransformer").guid(this.uuid_).message(c.errors.transformer_start).transformerType(this.transformerType_).variation("Error").error(Ha(ct)).build();yr.report(Lt);const Ft={eventMetaData:{transformerIndex:this.index_},error:ct,function:"start"};this.emit("error",Ft)}}async transform(Ce,ct){var Lt,Ft,Nn,Fn;if(this.mediaTransformerQosReportStartTimestamp_===0&&(this.mediaTransformerQosReportStartTimestamp_=Date.now()),Ce instanceof VideoFrame&&(this.videoHeight_=(Lt=Ce==null?void 0:Ce.displayHeight)!=null?Lt:0,this.videoWidth_=(Ft=Ce==null?void 0:Ce.displayWidth)!=null?Ft:0),++this.framesFromSource_,this.transformer_)if(this.shouldStop_)console.warn("[Pipeline] flush from transform"),Ce.close(),this.flush(ct),ct.terminate();else try{await((Fn=(Nn=this.transformer_).transform)==null?void 0:Fn.call(Nn,Ce,ct)),++this.framesTransformed_,this.framesTransformed_===Lr&&this.mediaTransformerQosReport()}catch(Hn){const Un=new On().action("MediaTransformer").guid(this.uuid_).message(c.errors.transformer_transform).transformerType(this.transformerType_).variation("Error").error(Ha(Hn)).build();yr.report(Un);const Qo={eventMetaData:{transformerIndex:this.index_},error:Hn,function:"transform"};this.emit("error",Qo)}}async flush(Ce){if(this.transformer_&&typeof this.transformer_.flush=="function"&&!this.isFlashed_){this.isFlashed_=!0;try{await this.transformer_.flush(Ce)}catch(Lt){const Ft=new On().action("MediaTransformer").guid(this.uuid_).message(c.errors.transformer_flush).transformerType(this.transformerType_).variation("Error").error(Ha(Lt)).build();yr.report(Ft);const Nn={eventMetaData:{transformerIndex:this.index_},error:Lt,function:"flush"};this.emit("error",Nn)}}this.mediaTransformerQosReport();const ct=new On().action("MediaTransformer").guid(this.uuid_).transformerType(this.transformerType_).variation("Delete").build();yr.report(ct)}stop(){console.log("[Pipeline] Stop stream."),this.controller_&&(this.flush(this.controller_),this.controller_.terminate()),this.shouldStop_=!0}mediaTransformerQosReport(){let Ce=(Date.now()-this.mediaTransformerQosReportStartTimestamp_)/1e3,ct=this.framesFromSource_/Ce,Lt=this.framesTransformed_/Ce;if(this.trackExpectedRate_!=-1&&this.trackExpectedRate_*sr>ct){const Nn={eventMetaData:{transformerIndex:this.index_},warningType:"fps_drop",dropInfo:{requested:this.trackExpectedRate_,current:ct}};this.emit("warn",Nn)}const Ft=new On().action("MediaTransformer").fps(ct).transformedFps(Lt).framesTransformed(this.framesTransformed_).guid(this.uuid_).transformerType(this.transformerType_).videoHeight(this.videoHeight_).videoWidth(this.videoWidth_).variation("QoS").build();yr.report(Ft),this.mediaTransformerQosReportStartTimestamp_=0,this.framesFromSource_=0,this.framesTransformed_=0}}class gc extends la{constructor(Ce){super(),this.transformers_=[],this.trackExpectedRate_=-1;for(let ct=0;ct<Ce.length;ct++){let Lt=new Bc(Ce[ct],ct);Lt.on("error",Ft=>{this.emit("error",Ft)}),Lt.on("warn",Ft=>{this.emit("warn",Ft)}),this.transformers_.push(Lt)}}setTrackExpectedRate(Ce){this.trackExpectedRate_=Ce;for(let ct of this.transformers_)ct.setTrackExpectedRate(this.trackExpectedRate_)}async start(Ce,ct){if(!this.transformers_||this.transformers_.length===0){console.log("[Pipeline] No transformers.");return}try{let Lt=Ce;for(let Ft of this.transformers_)Ce=Ce.pipeThrough(new TransformStream(Ft));Ce.pipeTo(ct).then(async()=>{console.log("[Pipeline] Setup."),await ct.abort(),await Lt.cancel(),this.emit("pipelineInfo","pipeline_ended")}).catch(async Ft=>{Ce.cancel().then(()=>{console.log("[Pipeline] Shutting down streams after abort.")}).catch(Nn=>{console.error("[Pipeline] Error from stream transform:",Nn)}),await ct.abort(Ft),await Lt.cancel(Ft),this.emit("pipelineInfo","pipeline_ended_with_error")})}catch{this.emit("pipelineInfo","pipeline_started_with_error"),this.destroy();return}this.emit("pipelineInfo","pipeline_started"),console.log("[Pipeline] Pipeline started.")}async destroy(){console.log("[Pipeline] Destroying Pipeline.");for(let Ce of this.transformers_)Ce.stop()}}class qa extends la{constructor(){super(),this.uuid_=As(),this.trackExpectedRate_=-1;const Ce=new On().action("MediaProcessor").guid(this.uuid_).variation("Create").build();yr.report(Ce)}setTrackExpectedRate(Ce){this.trackExpectedRate_=Ce,this.pipeline_&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_)}transform(Ce,ct){return this.readable_=Ce,this.writable_=ct,this.transformInternal()}transformInternal(){return new n((Ce,ct)=>{if(!this.transformers_||this.transformers_.length===0){const Ft=new On().action("MediaProcessor").guid(this.uuid_).message(c.errors.transformer_none).variation("Error").build();yr.report(Ft),ct("[MediaProcessor] Need to set transformers.");return}if(!this.readable_){const Ft=new On().action("MediaProcessor").guid(this.uuid_).message(c.errors.readable_null).variation("Error").build();yr.report(Ft),ct("[MediaProcessor] Readable is null.");return}if(!this.writable_){const Ft=new On().action("MediaProcessor").guid(this.uuid_).message(c.errors.writable_null).variation("Error").build();yr.report(Ft),ct("[MediaProcessor] Writable is null.");return}let Lt=!1;this.pipeline_&&(Lt=!0,this.pipeline_.clearListeners(),this.pipeline_.destroy()),this.pipeline_=new gc(this.transformers_),this.pipeline_.on("warn",Ft=>{this.emit("warn",Ft)}),this.pipeline_.on("error",Ft=>{this.emit("error",Ft)}),this.pipeline_.on("pipelineInfo",Ft=>{Lt&&(Ft==="pipeline_started"?Ft=Qa.pipeline_restarted:Ft==="pipeline_started_with_error"&&(Ft=Qa.pipeline_restarted_with_error)),this.emit("pipelineInfo",Ft)}),this.trackExpectedRate_!=-1&&this.pipeline_.setTrackExpectedRate(this.trackExpectedRate_),this.pipeline_.start(this.readable_,this.writable_).then(()=>{Ce()}).catch(Ft=>{ct(Ft)})})}setTransformers(Ce){const ct=new On().action("MediaProcessor").guid(this.uuid_).message(c.updates.transformer_new).variation("Update").build();return yr.report(ct),this.transformers_=Ce,this.readable_&&this.writable_?this.transformInternal():n.resolve()}destroy(){return new n(Ce=>{this.pipeline_&&this.pipeline_.destroy();const ct=new On().action("MediaProcessor").guid(this.uuid_).variation("Delete").build();yr.report(ct),Ce()})}}class ba{constructor(){this.processor_=null,this.generator_=null}init(Ce){return new n((ct,Lt)=>{try{this.processor_=new MediaStreamTrackProcessor(Ce)}catch(Ft){console.log(`[InsertableStreamHelper] MediaStreamTrackProcessor failed: ${Ft}`),Lt(Ft)}try{Ce.kind==="audio"?this.generator_=new MediaStreamTrackGenerator({kind:"audio"}):Ce.kind==="video"?this.generator_=new MediaStreamTrackGenerator({kind:"video"}):Lt("kind not supported")}catch(Ft){console.log(`[InsertableStreamHelper] MediaStreamTrackGenerator failed: ${Ft}`),Lt(Ft)}ct()})}getReadable(){return this.processor_.readable}getWriteable(){return this.generator_.writable}getProccesorTrack(){return this.generator_}}class _s{constructor(Ce){this.insertableStreamHelper_=new ba,this.mediaProcessor_=Ce}setTrack(Ce){return new n((ct,Lt)=>{this.insertableStreamHelper_.init(Ce).then(()=>{this.mediaProcessor_.transform(this.insertableStreamHelper_.getReadable(),this.insertableStreamHelper_.getWriteable()).then(()=>{ct(this.insertableStreamHelper_.getProccesorTrack())}).catch(Ft=>{Lt(Ft)})}).catch(Ft=>{Lt(Ft)})})}destroy(){return new n((Ce,ct)=>{this.mediaProcessor_?this.mediaProcessor_.destroy().then(()=>{Ce()}).catch(Lt=>{ct(Lt)}):ct("no processor")})}}}.call(this,e(1),e(44))},function(t,r,e){const n={backgroundBlur:e(704),backgroundReplacement:e(705)},o=l=>!!n[l],a=l=>o(l)?n[l]:null,u={isSupported:o,getConfigurator:a,isValidConfig:l=>{const f=l.type;return o(f)?a(f).isValidConfig(l):!1}};t.exports=u},function(t,r,e){var n=e(0),o=n(e(16));const a=e(315).BlurRadius,c=e(316),u=a.High,l=S=>(0,o.default)({},c.getConfig(S),{transformerType:"BackgroundBlur",radius:u}),f=S=>S==="low"||S==="high",g=S=>S==="low"?a.Low:a.High,b={isValidConfig:S=>{if((S==null?void 0:S.type)!=="backgroundBlur")return!1;const C=S.blurStrength;return C?f(C):!0},getConfig:function(C){C===void 0&&(C={});const O=l(C),A=C,w=A.blurStrength;return f(w)&&(O.radius=g(w)),O}};t.exports=b},function(t,r,e){var n=e(0),o=n(e(16));const a=e(316),c=g=>(0,o.default)({},a.getConfig(g),{transformerType:"VirtualBackground"}),u=g=>/^data:image\/(?:png|jpeg|bmp|gif);base64/.test(g)||/\.(?:png|jpe?g|bmp|gif)$/i.test(g),f={isValidConfig:g=>{if((g==null?void 0:g.type)!=="backgroundReplacement")return!1;const v=g.backgroundImgUrl;return u(v)},getConfig:function(v){v===void 0&&(v={});const b=c(v),S=v,C=S.backgroundImgUrl;return u(C)&&(b.backgroundAssetUri=C),b}};t.exports=f},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5)),c=n(e(14));const u=e(2)("MediaProcessorConnector");let l=function(g){var v=this;(0,c.default)(this,"setTrack",function(){var b=(0,a.default)(o.default.mark(function S(C){var O;return o.default.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return O=null,w.prev=1,w.next=4,v.connector.setTrack(C);case 4:O=w.sent,v.originalTrack=C,w.next=11;break;case 8:w.prev=8,w.t0=w.catch(1),u.error(`Error setting track: ${w.t0}`);case 11:return w.abrupt("return",O);case 12:case"end":return w.stop()}},S,null,[[1,8]])}));return function(S){return b.apply(this,arguments)}}()),(0,c.default)(this,"destroy",(0,a.default)(o.default.mark(function b(){return o.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,C.next=3,v.connector.destroy();case 3:C.next=8;break;case 5:C.prev=5,C.t0=C.catch(0),u.warn(`Error destroying connector: ${C.t0}`);case 8:case"end":return C.stop()}},b,null,[[0,5]])}))),(0,c.default)(this,"stopOriginalTrack",()=>{this.originalTrack&&(this.originalTrack.stop(),this.originalTrack=null)}),this.connector=g};(0,c.default)(l,"isValidConnector",f=>typeof(f==null?void 0:f.setTrack)=="function"&&typeof(f==null?void 0:f.destroy)=="function"),t.exports=l},function(t,r,e){t.exports=n=>n?!!n.apiKey:!1},function(t,r,e){const n=o=>o===null||o===!1;t.exports=n},function(t,r,e){t.exports=n=>{var o;const a=!!(n&&((o=n.videoSource)!=null&&o.canvas)),c=!!(n&&"videoContentHint"in n);a&&!c&&(n.videoContentHint="detail")}},function(t,r,e){const n=e(150),o=a=>!!(a!=null&&a.scalableScreenshare);t.exports=a=>{var c;a||(a={});const u=!!n((c=a)==null?void 0:c.videoSource);a.capableSimulcastScreenshare=u&&o(a)}},function(t,r,e){var n=e(712),o=e(100),a=e(36);function c(u,l){return n(u,a(l,3),o)}t.exports=c},function(t,r){function e(n,o,a){var c;return a(n,function(u,l,f){if(o(u,l,f))return c=l,!1}),c}t.exports=e},function(t,r,e){(function(n){const o=e(53),a=e(74);t.exports=c=>{let u=c.RTCPeerConnection,l=c.env,f=c.stream,g=c.codecFlags;if(l.isLegacyEdge)return!0;let v,b;const S=()=>{try{v.close()}catch{}try{b.close()}catch{}v=null,b=null};try{const C={iceServers:[]};a()&&(C.sdpSemantics="plan-b"),v=new u(C),b=new u(C),f.getTracks().forEach(O=>v.addTrack(O,f))}catch{return S(),n.resolve(!1)}return v.createOffer().then(C=>{const O={type:C.type,sdp:C.sdp};return Object.keys(g).forEach(A=>{g[A]||(O.sdp=o.removeVideoCodec(O.sdp,A))}),b.setRemoteDescription(O)}).then(()=>!0).catch(()=>!1).then(C=>(S(),C))}}).call(this,e(1))},function(t,r,e){const n=e(7),o=n.INVALID_PARAMETER;t.exports=a=>{let c=a.otError;return u=>{if(!u)return;const l=(f,g)=>{if(!f)throw c(o,new Error(`iceConfig invalid: ${g}`))};"includeServers"in u&&l(["all","custom"].indexOf(u.includeServers)!==-1,".includeServers must be all or custom"),"transportPolicy"in u&&l(["all","relay"].indexOf(u.transportPolicy)!==-1,".transportPolicy must be all or relay"),l(Array.isArray(u.customServers),".customServers must be an array"),u.customServers.forEach(f=>{l(f.urls||!("url"in f),"ice servers need .urls, not .url"),l(typeof f.urls=="string"||Array.isArray(f.urls),"ice server .urls must be a string or an array"),l(!f.username||typeof f.username=="string","ice server .username must be a string if present"),l(!f.credential||typeof f.credential=="string","ice server .credential must be a string if present")})}}},function(t,r,e){const n=e(3),o=()=>n.isChrome&&n.version>=98;t.exports=(a,c)=>a.p2pEnabled?!1:c===!0&&o()},function(t,r,e){const a=c=>{if(typeof c!="string")throw new Error("secret must be a string");if(c.length<8)throw new Error("secret must have at least 8 characters");if(c.length>256)throw new Error("secret must not exceed 256 characters")};t.exports=a},function(t,r,e){const n=e(10);t.exports=function(a){switch(a){case n.AUTHENTICATION_ERROR:case n.INVALID_SESSION_ID:case n.TERMS_OF_SERVICE_FAILURE:case n.UNEXPECTED_SERVER_RESPONSE:return a;case n.ANVIL_EMPTY_RESPONSE_BODY:case n.ANVIL_CONNECT_FAILED:return n.CONNECT_FAILED;case n.ANVIL_BADLY_FORMED_RESPONSE:case n.ANVIL_INVALID_HTTP_STATUS:case n.ANVIL_XDOMAIN_OR_PARSING_ERROR:case n.ANVIL_UNKNOWN_HTTP_ERROR:case n.ANVIL_UNEXPECTED_ERROR_CODE:default:return n.UNEXPECTED_SERVER_RESPONSE}}},function(t,r,e){const n=e(10),o=e(7);t.exports={NOT_CONNECTED:{code:o.NOT_CONNECTED,message:"Cannot use forceMute functionality. You are not connected to the session.",exceptionCode:n.NOT_CONNECTED},PERMISSION_DENIED:{code:o.PERMISSION_DENIED,message:"This token does not allow forceMute usage. The role must be at least `moderator` to enable this functionality",exceptionCode:n.UNABLE_TO_FORCE_MUTE},INVALID_PARAMETER:{code:o.INVALID_PARAMETER,message:"Invalid Parameter. Check that you have passed valid parameter values into the method call.",exceptionCode:n.INVALID_PARAMETER},NOT_FOUND:{code:o.NOT_FOUND,message:"The stream does not exist."},UNEXPECTED_SERVER_RESPONSE:{code:o.UNEXPECTED_SERVER_RESPONSE,message:"An unexpected error occurred.",exceptionCode:n.UNEXPECTED_SERVER_RESPONSE}}},function(t,r,e){(function(n){var o=e(0);r.__esModule=!0,r.default=b;var a=o(e(16)),c=o(e(18)),u=o(e(9)),l=o(e(51)),f=o(e(17)),g=o(e(321)),v=o(e(720));function b(S){S===void 0&&(S={});const C=S.convertRumorError||e(319),O=S.Dispatcher||e(323),A=S.ExceptionCodes||e(10),w=S.hasIceRestartsCapability||e(320),V=S.hasRenegotiationCapability||e(736),k=S.hasE2eeCapability||e(111),M=S.logging||e(2)("RaptorSocket"),W=S.Message||e(324),Y=S.OTHelpers||e(8),H=S.RumorSocket||(0,v.default)(),P=S.Signal||e(325),j=S.SignalError||e(741),_=function z(ae,me,ye,Pe,Te,Ue,_e){var je=this;_e===void 0&&(_e=[]);let Ke,De,Ze,tt,gt,Ee,Le,We;const ut=["disconnected","connecting","connected","error","disconnecting"],bt=Te||new O,mt=Y.statable(this,ut,"disconnected"),It=function(et){(!et.action||!et.variation)&&M.debug("Expected action and variation"),Ue.logEvent((0,u.default)({sessionId:De,partnerId:Ke,p2p:Ee,messagingServer:Le,connectionId:ae},et))},Ge=function(){for(var et=arguments.length,it=new Array(et),Pt=0;Pt<et;Pt++)it[Pt]=arguments[Pt];const nn=it[0];mt(nn?"error":"connected"),gt(...it)},Qe=ft=>{let et="clientDisconnected";!this.is("disconnecting")&&We&&(et="networkDisconnected"),ft&&ft.code===4001&&(et="networkTimedout"),mt("disconnected"),bt.onClose(et)},Et=ft=>{We=!0,M.error(ft)},Tt=()=>{bt.onReconnecting()},Zt=()=>{It({action:"Reconnect",variation:"Success",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId}),bt.onReconnected()},$t=()=>{It({action:"Reconnect",variation:"Attempt",retries:this._rumor.reconnectRetriesCount(),messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})},pt=ft=>{ft.message==="connectionLimitExceeded"&&(ft.code=A.CONNECTION_LIMIT_EXCEEDED),ft.reason="ConnectToSession";const et=C(ft);It({action:"Reconnect",variation:"Failure",failureReason:ft.reason,failureCode:et.code,failureMessage:et.message,messageQueueSize:this._rumor.messageQueueSize(),socketId:this.socketId})};Object.defineProperty(this,"socketId",{get(){return this._rumor.socketID}}),this.connect=function(et,it,Pt,nn){if(!this.is("disconnected","error")){M.warn("Cannot connect the Raptor Socket as it is currently connected. You should disconnect first.");return}mt("connecting"),Ke=it.partnerId,De=it.sessionId,Ee=it.p2pEnabled,Le=it.messagingServer,Ze=et,gt=nn,tt={apiKey:Ke,sessionId:De};const Ut=`/v2/partner/${Ke}/session/${De}`;this._rumor=new z.RumorSocket({messagingURL:ye,notifyDisconnectAddress:Pe,connectionId:ae,enableReconnection:it.reconnection}),this._rumor.on("close",Qe),this._rumor.on("error",Et),this._rumor.on("reconnecting",Tt),this._rumor.on("reconnectAttempt",$t),this._rumor.on("reconnectFailure",pt),this._rumor.on("reconnected",Zt),this._rumor.on("message",bt.dispatch.bind(bt));const xt=Wt=>{Ge({reason:"WebSocketConnection",code:Wt.code,message:Wt.message})};this._rumor.once("error",xt),this._rumor.once("open",()=>{this._rumor.removeListener("error",xt),M.debug(`connected. Subscribing to ${Ut} on ${ye}`),this._rumor.subscribe([Ut]);const Wt=_e;(z.hasIceRestartsCapability()||z.hasRenegotiationCapability())&&it.renegotiation&&Wt.push("renegotiation"),z.hasE2eeCapability()&&it.e2ee&&Wt.push("e2ee");const Dn=W.connections.create({apiKey:Ke,sessionId:De,connectionId:this._rumor.id,connectionEventsSuppressed:Pt.connectionEventsSuppressed,capabilities:Wt}),er=new n(Zn=>{const dr=pr=>{pr.id===this._rumor.id&&(Zn(pr),Te.off("connection#created",dr))};Te.on("connection#created",dr)});this.publish(Dn,{"X-TB-TOKEN-AUTH":Ze},!0,(Zn,dr)=>{if(Zn){Zn.message==="connectionLimitExceeded"&&(Zn.code=A.CONNECTION_LIMIT_EXCEEDED),Ge({reason:"ConnectToSession",code:Zn.code,message:Zn.message,socketId:this.socketId});return}const pr=dr&&dr.data?JSON.parse(dr.data):null;pr&&(!pr.connection||pr.connection.length===0)&&(pr.connection=[],Array.isArray(pr.stream)&&pr.stream.forEach(Jn=>{let Dt=Jn.connection;return pr.connection.push(Dt)}));const Bn=(Jn,Dt)=>{Jn?Ge({reason:"GetSessionState",code:Jn.code,message:Jn.message,socketId:this.socketId}):Ge(void 0,Dt)};er.then(Jn=>{pr.connection.some(Ii=>Ii.id===Jn.id)||pr.connection.unshift(Jn);const Dt=(0,f.default)();bt.registerCallback(Dt,Bn),bt.emit("session#read",pr,Dt)})})})},this.disconnect=function(){this.is("disconnected")||(mt("disconnecting"),this._rumor.disconnect())},this.publish=function(ft,et,it,Pt){Pt=Pt||function(){};const nn=(0,l.default)(Pt),Ut=(0,f.default)();if(M.debug(`Publish (ID:${Ut}) ${ft}`),this._rumor.readyState!==H.OPEN||this._rumor.reconnecting&&!it){const xt=new Error("Not connected.");xt.code=500,nn(xt),M.error("cannot publish until the socket is connected.");return}return bt.registerCallback(Ut,nn),this._rumor.publish([Pe],ft,(0,u.default)({},et,{"Content-Type":"application/x-raptor+v2","TRANSACTION-ID":Ut,"X-TB-FROM-ADDRESS":this._rumor.id}),it,function(xt){xt&&nn(...arguments)}),Ut},this.send=function(ft,et,it,Pt){it===void 0&&(it=!0),Pt===void 0&&(Pt=()=>{}),je.publish((0,g.default)(ft),et,it,Pt)},this.streamCreate=function(ft,et){ft===void 0&&(ft={}),et===void 0&&(et=()=>{});const it=ft,Pt=it.name,nn=it.streamId,Ut=it.subscriberAudioFallbackEnabled,xt=it.channels,Wt=it.minBitrate,tn=it.maxBitrate,mn=it.sourceStreamId,Dn=it.e2ee,er=it.publisherAudioFallbackEnabled,Zn={apiKey:Ke,sessionId:De,streamId:nn,name:Pt,audioFallbackEnabled:Ut,subscriberAudioFallbackEnabled:Ut,channels:xt,minBitrate:Wt,maxBitrate:tn,sourceStreamId:mn,e2ee:Dn,publisherAudioFallbackEnabled:er},dr=W.streams.create(Zn);this.publish(dr,{},!0,(pr,Bn)=>{et(pr,nn,Bn)})},this.streamDestroy=function(ft,et){this.publish(W.streams.destroy(Ke,De,ft,et),{},!0)},this.streamChannelUpdate=function(ft,et,it){this.publish(W.streamChannels.update(Ke,De,ft,et,it),{},!0)},this.subscriberCreate=function(ft,et,it,Pt,nn,Ut){const xt={apiKey:Ke,sessionId:De,streamId:ft,subscriberId:et,connectionId:this._rumor.id,channelsToSubscribeTo:it,sourceStreamId:Pt,e2ee:nn};this.publish(W.subscribers.create(xt),{},!0,Ut)},this.subscriberDestroy=function(ft,et){this.publish(W.subscribers.destroy(Ke,De,ft,et),{},!0)},this.subscriberUpdate=function(ft,et,it){this.publish(W.subscribers.update(Ke,De,ft,et,it),{},!0)},this.subscriberChannelUpdate=function(ft,et,it,Pt){this.publish(W.subscriberChannels.update(Ke,De,ft,et,it,Pt),{},!0)},this.forceDisconnect=function(ft,et){this.publish(W.connections.destroy({apiKey:Ke,sessionId:De,connectionId:ft}),{},!0,et)},this.forceUnpublish=function(ft,et){this.publish(W.streams.destroy(Ke,De,ft),{},!0,et)},this.forceMuteStream=function(ft,et){const it={streamId:ft,active:!0};this.publish(W.forceMute.update((0,a.default)({},tt,it)),{},!0,et)},this.forceMuteAll=function(ft,et,it){const Pt={excludedStreamIds:ft,active:et};this.publish(W.forceMute.update((0,a.default)({},tt,Pt)),{},!0,it)},this.signal=function(ft,et,it){const Pt=new P(De,this._rumor.id,ft||{});if(!Pt.valid){et&&(0,c.default)(et)&&et(new j(Pt.error.code,Pt.error.reason),Pt.toHash());return}this.publish(Pt.toRaptorMessage(),{},Pt.retryAfterReconnect,nn=>{let Ut,xt,Wt;const tn=[400,403,404,413,500];if(nn){const mn=parseInt(nn.code,10);tn.includes(mn)?(xt=mn,Wt=nn.message):(xt=A.UNEXPECTED_SERVER_RESPONSE,Wt="Unexpected server response. Try this operation again later."),Ut=new j(xt,Wt)}else{const mn=Pt.data?typeof Pt.data:null;it("signal","send",{type:mn})}et&&(0,c.default)(et)&&et(Ut,Pt.toHash())})},this.id=function(){return this._rumor&&this._rumor.id}};return _.hasIceRestartsCapability=w,_.hasRenegotiationCapability=V,_.hasE2eeCapability=k,_.RumorSocket=H,_}}).call(this,e(1))},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=g;var o=n(e(28)),a=n(e(721)),c=n(e(2)),u=n(e(722)),l=n(e(727)),f=n(e(732));function g(v){let b=v===void 0?{}:v,S=b.WebSocket,C=S===void 0?f.default:S;const O=(0,a.default)(),A=(0,u.default)({EventEmitter:o.default,WebSocket:C,logging:c.default,allocateId:O});return(0,l.default)({EventEmitter:o.default,ReconnectableSocket:A,logging:c.default,allocateId:O})}},function(t,r,e){r.__esModule=!0,r.default=n;function n(){let o=0;return()=>(o+=1,o)}},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(4)),a=n(e(5)),c=n(e(105)),u=n(e(47)),l=n(e(37)),f=n(e(14)),g=n(e(322)),v=e(77),b=n(e(723)),S=n(e(63)),C=n(e(724)),O=n(e(726));const A=M=>function(){M(...arguments)},w=M=>M===1e3||M>=3e3&&M<=4999,V=v.codes.CLOSE_TIMEOUT;var k=M=>{var W,Y;let H=M.EventEmitter,P=M.WebSocket,j=M.logging,_=M.allocateId,z=M.BUFFER_DRAIN_INTERVAL,ae=z===void 0?100:z,me=M.BUFFER_DRAIN_MAX_RETRIES,ye=me===void 0?10:me;return Y=W=function(Pe){(0,l.default)(Te,Pe),(0,u.default)(Te,[{key:"url",get:function(){return typeof this._url=="function"?this._url():this._url}},{key:"reconnecting",get:function(){return this.readyStateMachine.state==="reconnecting"}},{key:"binaryType",get:function(){return this._webSocket.binaryType}},{key:"bufferedAmount",get:function(){return this._webSocket.bufferedAmount}},{key:"protocol",get:function(){return this._webSocket.protocol}},{key:"extensions",get:function(){return this._webSocket.extensions}},{key:"readyState",get:function(){return{reconnecting:Te.OPEN,open:Te.OPEN,closing:Te.CLOSING,closed:Te.CLOSED,connecting:Te.CONNECTING}[this.readyStateMachine.state]}}]);function Te(_e){var je;const Ke=typeof _e=="string"?{url:_e}:_e,De=Ke.url,Ze=Ke.connectTimeout,tt=Ze===void 0?15e3:Ze,gt=Ke.pingThreshold,Ee=gt===void 0?3e3:gt,Le=Ke.pingWarningDelay,We=Le===void 0?100:Le,ut=Ke.disconnectThreshold,bt=ut===void 0?5900:ut,mt=Ke.reconnectMaxDuration,It=mt===void 0?6e4:mt;if(!De)throw new Error("Must provide url");je=Pe.call(this)||this,(0,f.default)((0,c.default)(je),"_url",void 0),(0,f.default)((0,c.default)(je),"_id",_()),(0,f.default)((0,c.default)(je),"_logger",j(`ReconnectableSocket:${je._id}`)),(0,f.default)((0,c.default)(je),"_webSocket",void 0),(0,f.default)((0,c.default)(je),"_connectTimer",void 0),(0,f.default)((0,c.default)(je),"_pingTimer",void 0),(0,f.default)((0,c.default)(je),"_pingWarningTimer",void 0),(0,f.default)((0,c.default)(je),"_disconnectTimer",void 0),(0,f.default)((0,c.default)(je),"_queuedMessages",[]),(0,f.default)((0,c.default)(je),"_draining",!1),je.readyStateMachine=(0,C.default)({reconnectMaxDuration:It,CLOSED:Te.CLOSED,CLOSING:Te.CLOSING}),je._url=De,(0,g.default)({logger:je._logger,obj:(0,c.default)(je),eventNames:["error","open","message","needsPing","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),je.readyStateMachine.observe("onEnterOpen",Qe=>{let Et=Qe.from;je._resetPingTimers(),je._resetDisconnectTimer(),je._connectTimer.clear(),Et==="reconnecting"?(je._queuedMessages.forEach(Tt=>je.send(Tt,!0)),je._queuedMessages=[],je.emit("reconnected")):je.emit("open")}),je.readyStateMachine.observe("onEnterClosed",(Qe,Et)=>{je.emit("close",Et)}),je.readyStateMachine.observe("onEnterClosing",A(function(){var Qe=(0,a.default)(o.default.mark(function Et(Tt,Zt){var $t,pt,ft;return o.default.wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return $t=Tt.from,pt=Zt.code,ft=Zt.reason,je._clearTimers(),it.next=5,je._clearSocket({drain:$t==="open",code:pt,reason:ft});case 5:$t==="reconnecting"&&je.emit("reconnectFailure",{code:pt,reason:ft}),setTimeout(()=>{je.readyStateMachine.closed({code:pt,reason:ft})});case 7:case"end":return it.stop()}},Et)}));return function(Et,Tt){return Qe.apply(this,arguments)}}())),je.readyStateMachine.observe("onEnterReconnecting",()=>{je.emit("reconnecting")}),je.readyStateMachine.observe("onDisconnect",A(function(){var Qe=(0,a.default)(o.default.mark(function Et(Tt,Zt){var $t,pt,ft,et;return o.default.wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if($t=Tt.from,pt=Tt.to,ft=Zt.code,et=Zt.reason,pt!=="reconnecting"){Pt.next=10;break}if(!je._draining){Pt.next=5;break}return Pt.abrupt("return");case 5:return je._clearTimers(),je.emit("reconnectAttempt"),Pt.next=9,je._clearSocket({drain:$t==="open",code:ft,reason:et});case 9:je._createSocket();case 10:case"end":return Pt.stop()}},Et)}));return function(Et,Tt){return Qe.apply(this,arguments)}}()));const Ge=(Qe,Et)=>new b.default({name:Qe,duration:Et,logger:je._logger});return je._connectTimer=Ge("connect",tt),je._pingTimer=Ge("ping",Ee),je._pingWarningTimer=Ge("pingWarning",We),je._disconnectTimer=Ge("disconnect",bt),je._createSocket(),je}var Ue=Te.prototype;return Ue._createSocket=function(){const je=new P(this.url);je.binaryType="arraybuffer";const Ke=(0,S.default)(je);Ke.on("open",()=>{this.readyStateMachine.open()}),Ke.on("close",De=>{let Ze=De.code,tt=De.reason;this.readyStateMachine.disconnect({code:Ze,reason:tt})}),Ke.on("error",De=>{this.emit("error",De)}),Ke.on("message",De=>{this.readyState!==Te.CLOSING&&this._resetDisconnectTimer(),this.emit("message",De)}),this._webSocket=je,this._webSocketEvents=Ke,this._connectTimer.reset(()=>{const De={code:V,reason:"Timeout while opening connection"},Ze=new Error(De.reason);Ze.code=V,this.emit("error",Ze),this.readyStateMachine.disconnect(De)})},Ue._clearSocket=function(){var _e=(0,a.default)(o.default.mark(function Ke(De){var Ze,tt,gt,Ee,Le;return o.default.wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(Ze=De===void 0?{}:De,tt=Ze.drain,gt=tt===void 0?!1:tt,Ee=Ze.code,Le=Ze.reason,this._draining=!0,this._webSocketEvents&&this._webSocketEvents.removeAll(),this._webSocket.readyState===Te.CLOSED){ut.next=8;break}if(!gt){ut.next=7;break}return ut.next=7,(0,O.default)(this._webSocket,{BUFFER_DRAIN_INTERVAL:ae,BUFFER_DRAIN_MAX_RETRIES:ye});case 7:try{!w(Ee)||Ee===void 0&&Le===void 0?this._webSocket.close():this._webSocket.close(Ee,Le)}catch(bt){j.error("Could not close websocket",bt)}case 8:this._draining=!1;case 9:case"end":return ut.stop()}},Ke,this)}));function je(Ke){return _e.apply(this,arguments)}return je}(),Ue.send=function(je,Ke){Ke===void 0&&(Ke=!0),this.readyState===Te.OPEN&&this._resetPingTimers();const De=()=>{try{return this._webSocket.send(je),"sent"}catch(Ze){if(this._webSocket.readyState===P.OPEN)return this._logger.debug("webSocket.send threw exception even though it was open:",Ze),"dropped";throw Ze}};if(this.readyStateMachine.state==="reconnecting"){if(this._webSocket.readyState===P.OPEN)try{De()}catch{}return Ke?(this._queuedMessages.push(je),"queued"):(this._logger.debug("Dropping message during reconnection since retryAfterReconnect is false:",je),"dropped")}return De()},Ue.close=function(je,Ke){if(this.readyState===Te.CLOSING)throw new Error("Can not call close on a closing ReconnectableSocket");if(this.readyState===Te.CLOSED)throw new Error("Can not call close on an already closed ReconnectableSocket");this.readyStateMachine.close({code:je,reason:Ke})},Ue._resetPingTimers=function(){this._pingWarningTimer.clear(),this._pingTimer.reset(()=>{this._pingWarningTimer.reset(()=>{this._logger.warn("Did not send message after needsPing event. Other side may disconnect.")}),this.emit("needsPing")})},Ue._resetDisconnectTimer=function(){this._disconnectTimer.reset(()=>this.readyStateMachine.disconnect({code:V,reason:"No activity"}))},Ue._clearTimers=function(){[this._disconnectTimer,this._connectTimer,this._pingTimer,this._pingWarningTimer].forEach(je=>je.clear())},Te}(H),(0,f.default)(W,"CONNECTING",P.CONNECTING),(0,f.default)(W,"OPEN",P.OPEN),(0,f.default)(W,"CLOSING",P.CLOSING),(0,f.default)(W,"CLOSED",P.CLOSED),Y};r.default=k},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(14));let a=function(){function c(l){let f=l.name,g=l.logger,v=l.duration;(0,o.default)(this,"name",void 0),(0,o.default)(this,"logger",void 0),(0,o.default)(this,"duration",void 0),(0,o.default)(this,"currId",void 0),this.name=f,this.logger=g,this.duration=v}var u=c.prototype;return u.reset=function(f){this.clear();const g=setTimeout(()=>{this.currId!==void 0&&(this.logger.spam(`${this.name} timer with id ${this.currId} expired, entering callback`),this.currId=void 0,f())},this.duration);this.currId=g,this.logger.spam(`Started ${this.name} timer with id ${this.currId}, expires in ${this.duration}ms`)},u.clear=function(){this.currId!==void 0&&(clearTimeout(this.currId),this.logger.spam(`Cleared ${this.name} timer with id ${this.currId}`),this.currId=void 0)},u.isRunning=function(){return this.currId!==void 0},c}();r.default=a},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(310)),a=n(e(725)),c=e(77),u=n(e(2));const l=(0,u.default)("ReconnectableSocketStateMachine"),f=c.codes.CLOSE_UNSUPPORTED,g=c.codes.CLOSE_UNEXPECTED_CONDITION;var v=b=>{let S=b.reconnectMaxDuration,C=b.CLOSED,O=b.CLOSING,A;function w(V){let k=V.code;return(this.state==="open"||!A)&&(A=(0,a.default)(S)),S>0&&!A()&&[f,g].indexOf(k)===-1&&[C,O].indexOf(this.readyState)===-1?"reconnecting":"closing"}return new o.default({init:"connecting",methods:{onInvalidTransition(V,k,M){l.error("Invalid state transition",{transition:V,from:k,to:M})}},transitions:[{name:"open",from:["connecting","reconnecting"],to:"open"},{name:"close",from:["connecting","reconnecting","open"],to:"closing"},{name:"closed",from:"closing",to:"closed"},{name:"disconnect",from:["reconnecting","open","connecting"],to:w}]})};r.default=v},function(t,r,e){t.exports=n=>{let o=!1;return setTimeout(()=>{o=!0},n),()=>o}},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(4)),a=n(e(5)),c=n(e(109)),u=function(){var l=(0,a.default)(o.default.mark(function f(g,v){var b,S,C,O,A,w;return o.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:b=v===void 0?{}:v,S=b.BUFFER_DRAIN_INTERVAL,C=S===void 0?100:S,O=b.BUFFER_DRAIN_MAX_RETRIES,A=O===void 0?10:O,w=0;case 2:if(!(w<A)){k.next=10;break}if(g.bufferedAmount!==0){k.next=5;break}return k.abrupt("break",10);case 5:return k.next=7,(0,c.default)(C);case 7:w+=1,k.next=2;break;case 10:case"end":return k.stop()}},f)}));return function(f,g){return l.apply(this,arguments)}}();r.default=u},function(t,r,e){var n=e(112),o=e(0);r.__esModule=!0,r.default=void 0;var a=o(e(105)),c=o(e(47)),u=o(e(37)),l=o(e(14)),f=o(e(17)),g=o(e(322)),v=o(e(728)),b=n(e(172)),S=o(e(731)),C=e(77),O=A=>{var w,V;let k=A.EventEmitter,M=A.ReconnectableSocket,W=A.logging,Y=A.allocateId;return V=w=function(H){(0,u.default)(P,H),(0,c.default)(P,[{key:"readyState",get:function(){return this._socket?this._socket.readyState:M.CONNECTING}},{key:"reconnecting",get:function(){return this._opened&&this._socket&&this._socket.reconnecting}}]);function P(_){var z;let ae=_.messagingURL,me=_.notifyDisconnectAddress,ye=_.connectionId,Pe=_.enableReconnection,Te=_.pingThreshold,Ue=Te===void 0?2e3:Te,_e=_.disconnectThreshold,je=_e===void 0?(Pe?3:25)*Ue-100:_e,Ke=_.reconnectMaxDuration,De=Ke===void 0?Pe?6e4:0:Ke;z=H.call(this)||this,(0,l.default)((0,a.default)(z),"url",void 0),(0,l.default)((0,a.default)(z),"id",void 0),(0,l.default)((0,a.default)(z),"_opened",!1),(0,l.default)((0,a.default)(z),"_socket",void 0),(0,l.default)((0,a.default)(z),"_reconnectAttempts",0),(0,l.default)((0,a.default)(z),"_socketID",(0,f.default)()),(0,l.default)((0,a.default)(z),"_receivedTransactionIDs",[]),(0,l.default)((0,a.default)(z),"_notifyDisconnectAddress",void 0),(0,l.default)((0,a.default)(z),"_enableReconnection",void 0),(0,l.default)((0,a.default)(z),"_pendingMessages",[]),(0,l.default)((0,a.default)(z),"_logger",W(`RumorSocket:${Y()}`)),(0,g.default)({logger:z._logger,obj:(0,a.default)(z),eventNames:["open","message","error","reconnecting","reconnectAttempt","reconnectFailure","reconnected","close"]}),z.url=ae,z.id=ye,z._notifyDisconnectAddress=me,z._enableReconnection=Pe,z.on("error",tt=>{z._logger.error(tt.message)});try{z._socket=new M({url:()=>z._enableReconnection?[z.url,z.url.indexOf("?")>=0?"&":"?",`socketId=${z._socketID}`,z._socket&&z._socket.reconnecting?"&reconnect=true":"",`&attempt=${(0,f.default)()}`].join(""):z.url,pingThreshold:Ue,disconnectThreshold:je,reconnectMaxDuration:De})}catch(tt){z._logger.error(tt),z.emit("error",new S.default(C.codes.CLOSE_CONNECT_EXCEPTION))}const Ze=()=>{z._opened=!0,z._socket.send(v.default.Connect(z.id,me).serialize()),z.emit("open",z.id)};return z._socket.once("open",Ze),z._socket.on("message",tt=>z._receiveMessage(tt)),z._socket.once("close",tt=>{z._logger.debug(`ReconnectableSocket closed (code: ${tt.code})`),z._clearPendingMessages();const gt=C.codes.CLOSE_NORMAL,Ee=C.codes.CLOSE_GOING_AWAY,Le=C.codes.CLOSE_TIMEOUT;[gt,Ee,Le].indexOf(tt.code)===-1&&z.emit("error",new S.default(tt.code)),z.emit("close",tt)}),z._socket.on("error",tt=>{let gt=tt.code;return z.emit("error",new S.default(gt))}),z._socket.on("needsPing",()=>{z._socket.send(v.default.Ping().serialize())}),z._socket.on("reconnecting",()=>{z._opened&&(z._clearPendingMessagesWhichShouldntRetry(),z.emit("reconnecting"),z._reconnectAttempts=0)}),z._socket.on("reconnectAttempt",()=>{z._opened&&(z._reconnectAttempts+=1,z._socket.send(v.default.Disconnect("1").serialize(),!1),z.emit("reconnectAttempt"))}),z._socket.on("reconnected",()=>{if(!z._opened){Ze();return}z._pendingMessages.forEach(tt=>{z._socket.send(tt.rumorMessage.serialize())}),z.emit("reconnected")}),z._socket.on("reconnectFailure",()=>{z._opened&&(z._logger.debug(`Reconnecting failed as connectivity was not restored within ${De}ms`),z.emit("reconnectFailure",new S.default))}),z}var j=P.prototype;return j._clearPendingMessagesWhichShouldntRetry=function(){const z=this._pendingMessages.filter(ae=>!ae.retryAfterReconnect);this._pendingMessages=this._pendingMessages.filter(ae=>ae.retryAfterReconnect),z.forEach(ae=>{const me=new Error("Not connected.");me.code=500,ae.completion(me)})},j._clearPendingMessages=function(){this._pendingMessages.forEach(z=>{const ae=new Error("Not connected.");ae.code=500,z.completion(ae)}),this._pendingMessages=[]},j._sendAck=function(z){this._socket.send(v.default.Status([z.fromAddress],{"TRANSACTION-ID":z.headers["TRANSACTION-ID"],"X-TB-FROM-ADDRESS":this.id}).serialize())},j._receiveMessage=function(z){const ae=v.default.deserialize(z.data);if(ae.type!==b.PONG){if(this._logger.debug("Received:",ae),ae.transactionId&&(this._pendingMessages=this._pendingMessages.filter(me=>(me.rumorMessage.transactionId===ae.transactionId&&(this._logger.debug("Marking",ae.transactionId," as received"),me.completion(void 0,ae)),me.rumorMessage.transactionId!==ae.transactionId))),ae.transactionId&&ae.type!==b.STATUS){if(this._sendAck(ae),this._receivedTransactionIDs.indexOf(ae.transactionId)>=0)return;this._receivedTransactionIDs.push(ae.transactionId)}this.emit("message",ae)}},j.publish=function(z,ae,me,ye,Pe){Pe===void 0&&(Pe=()=>{});const Te=v.default.Publish(z,ae,me);if(this._socket.send(Te.serialize(),!1)==="dropped"&&!ye){const _e=new Error("Not connected.");_e.code=500,Pe(_e);return}this._pendingMessages.push({rumorMessage:Te,retryAfterReconnect:ye,completion:Pe})},j.subscribe=function(z){this._socket.send(v.default.Subscribe(z).serialize())},j.unsubscribe=function(z){this._socket.send(v.default.Unsubscribe(z).serialize())},j.disconnect=function(){if(this.readyState===P.OPEN&&this._socket.send(v.default.Disconnect().serialize()),this._socket.readyState!==M.CLOSED&&this._socket.readyState!==M.CLOSING){const z=C.codes.CLOSE_NORMAL;this._socket.close(z,C.messages[z])}},j.status=function(z,ae){this._socket.send(v.default.Status(z,{"TRANSACTION-ID":ae,"X-TB-FROM-ADDRESS":this.id}).serialize())},j.reconnectRetriesCount=function(){return this._reconnectAttempts},j.messageQueueSize=function(){return this._pendingMessages.length},(0,c.default)(P,[{key:"socketID",get:function(){return this._socketID}}]),P}(k),(0,l.default)(w,"CONNECTING",M.CONNECTING),(0,l.default)(w,"OPEN",M.OPEN),(0,l.default)(w,"CLOSING",M.CLOSING),(0,l.default)(w,"CLOSED",M.CLOSED),V};r.default=O},function(t,r,e){var n=e(112),o=e(0);r.__esModule=!0,r.default=void 0;var a=o(e(14)),c=o(e(17)),u=e(729),l=n(e(172));const f=v=>{const b=new ArrayBuffer(v.length),S=new Uint8Array(b);for(let C=0;C<v.length;++C)S[C]=v[C];return b};let g=function(){function v(S,C,O,A){(0,a.default)(this,"type",void 0),(0,a.default)(this,"toAddress",void 0),(0,a.default)(this,"headers",void 0),(0,a.default)(this,"data",void 0),this.type=S,this.toAddress=C,this.headers=O,this.data=A,this.fromAddress=this.headers["X-TB-FROM-ADDRESS"],this.transactionId=this.headers["TRANSACTION-ID"],this.status=this.headers.STATUS,this.isError=this.status&&this.status[0]!=="2"}var b=v.prototype;return b.serialize=function(){let C,O,A,w,V=8,k=7;const M=[],W=[],Y=[];for(k++,A=0;A<this.toAddress.length;A++)M.push(new u.TextEncoder("utf-8").encode(this.toAddress[A])),k+=2,k+=M[A].length;k++,A=0;for(const j in this.headers)this.headers.hasOwnProperty(j)&&(W.push(new u.TextEncoder("utf-8").encode(j)),Y.push(new u.TextEncoder("utf-8").encode(this.headers[j])),k+=4,k+=W[A].length,k+=Y[A].length,A++);O=new u.TextEncoder("utf-8").encode(this.data),k+=O.length;const H=new ArrayBuffer(k),P=new Uint8Array(H,0,k);for(k-=4,P[0]=(k&4278190080)>>>24,P[1]=(k&16711680)>>>16,P[2]=(k&65280)>>>8,P[3]=(k&255)>>>0,P[4]=0,P[5]=0,P[6]=this.type,P[7]=this.toAddress.length,A=0;A<M.length;A++)for(C=M[A],P[V++]=C.length>>8&255,P[V++]=C.length>>0&255,w=0;w<C.length;w++)P[V++]=C[w];for(P[V++]=W.length,A=0;A<W.length;A++){for(C=W[A],P[V++]=C.length>>8&255,P[V++]=C.length>>0&255,w=0;w<C.length;w++)P[V++]=C[w];for(C=Y[A],P[V++]=C.length>>8&255,P[V++]=C.length>>0&255,w=0;w<C.length;w++)P[V++]=C[w]}for(A=0;A<O.length;A++)P[V++]=O[A];return H},v.deserialize=function(C){(typeof window!==void 0?window:commonjsGlobal).Buffer&&(typeof window!==void 0?window:commonjsGlobal).Buffer.isBuffer(C)&&(C=f(C));let O,A,w,V,k,M,W,Y,H=8;const P=new Uint8Array(C);O=P[6];const j=[];for(Y=0;Y<P[7];Y++)W=P[H++]<<8,W+=P[H++],A=new Uint8Array(C,H,W),j[Y]=new u.TextDecoder("utf-8").decode(A),H+=W;for(w=P[H++],V={},Y=0;Y<w;Y++)W=P[H++]<<8,W+=P[H++],A=new Uint8Array(C,H,W),k=new u.TextDecoder("utf-8").decode(A),H+=W,W=P[H++]<<8,W+=P[H++],A=new Uint8Array(C,H,W),M=new u.TextDecoder("utf-8").decode(A),V[k]=M,H+=W;const _=new Uint8Array(C,H),z=new u.TextDecoder("utf-8").decode(_);return new v(O,j,V,z)},v.Connect=function(C,O){const A={uniqueId:C,"TRANSACTION-ID":(0,c.default)(),notifyDisconnectAddress:O};return new v(l.CONNECT,[],A,"")},v.Disconnect=function(C){return new v(l.DISCONNECT,[],{reconnect:C},"")},v.Subscribe=function(C){return new v(l.SUBSCRIBE,C,{},"")},v.Unsubscribe=function(C){return new v(l.UNSUBSCRIBE,C,{},"")},v.Publish=function(C,O,A){return new v(l.MESSAGE,C,A||{},O||"")},v.Status=function(C,O){return new v(l.STATUS,C,O||{},"")},v.Ping=function(){return new v(l.PING,[],{},"")},v}();r.default=g},function(t,r,e){var n=e(112);r.__esModule=!0,r.TextDecoder=r.TextEncoder=void 0;var o=n(e(730));const a=(typeof window!==void 0?window:commonjsGlobal).TextEncoder||o.TextEncoder;r.TextEncoder=a;const c=(typeof window!==void 0?window:commonjsGlobal).TextDecoder||o.TextDecoder;r.TextDecoder=c},function(t,r,e){e.r(r),e.d(r,"TextEncoder",function(){return S}),e.d(r,"TextDecoder",function(){return b});function n(A,w,V){return w<=A&&A<=V}function o(A){if(A===void 0)return{};if(A===Object(A))return A;throw TypeError("Could not convert argument to dictionary")}function a(A){for(var w=String(A),V=w.length,k=0,M=[];k<V;){var W=w.charCodeAt(k);if(W<55296||W>57343)M.push(W);else if(56320<=W&&W<=57343)M.push(65533);else if(55296<=W&&W<=56319)if(k===V-1)M.push(65533);else{var Y=A.charCodeAt(k+1);if(56320<=Y&&Y<=57343){var H=W&1023,P=Y&1023;M.push(65536+(H<<10)+P),k+=1}else M.push(65533)}k+=1}return M}function c(A){for(var w="",V=0;V<A.length;++V){var k=A[V];k<=65535?w+=String.fromCharCode(k):(k-=65536,w+=String.fromCharCode((k>>10)+55296,(k&1023)+56320))}return w}var u=-1;function l(A){this.tokens=[].slice.call(A)}l.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():u},prepend:function(A){if(Array.isArray(A))for(var w=A;w.length;)this.tokens.unshift(w.pop());else this.tokens.unshift(A)},push:function(A){if(Array.isArray(A))for(var w=A;w.length;)this.tokens.push(w.shift());else this.tokens.push(A)}};var f=-1;function g(A,w){if(A)throw TypeError("Decoder error");return w||65533}var v="utf-8";function b(A,w){if(!(this instanceof b))return new b(A,w);if(A=A!==void 0?String(A).toLowerCase():v,A!==v)throw new Error("Encoding not supported. Only utf-8 is supported");w=o(w),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(w.fatal),this._ignoreBOM=Boolean(w.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}b.prototype={decode:function(w,V){var k;typeof w=="object"&&w instanceof ArrayBuffer?k=new Uint8Array(w):typeof w=="object"&&"buffer"in w&&w.buffer instanceof ArrayBuffer?k=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):k=new Uint8Array(0),V=o(V),this._streaming||(this._decoder=new C({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(V.stream);for(var M=new l(k),W=[],Y;!M.endOfStream()&&(Y=this._decoder.handler(M,M.read()),Y!==f);)Y!==null&&(Array.isArray(Y)?W.push.apply(W,Y):W.push(Y));if(!this._streaming){do{if(Y=this._decoder.handler(M,M.read()),Y===f)break;Y!==null&&(Array.isArray(Y)?W.push.apply(W,Y):W.push(Y))}while(!M.endOfStream());this._decoder=null}return W.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(W[0]===65279?(this._BOMseen=!0,W.shift()):this._BOMseen=!0),c(W)}};function S(A,w){if(!(this instanceof S))return new S(A,w);if(A=A!==void 0?String(A).toLowerCase():v,A!==v)throw new Error("Encoding not supported. Only utf-8 is supported");w=o(w),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(w.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}S.prototype={encode:function(w,V){w=w?String(w):"",V=o(V),this._streaming||(this._encoder=new O(this._options)),this._streaming=Boolean(V.stream);for(var k=[],M=new l(a(w)),W;!M.endOfStream()&&(W=this._encoder.handler(M,M.read()),W!==f);)Array.isArray(W)?k.push.apply(k,W):k.push(W);if(!this._streaming){for(;W=this._encoder.handler(M,M.read()),W!==f;)Array.isArray(W)?k.push.apply(k,W):k.push(W);this._encoder=null}return new Uint8Array(k)}};function C(A){var w=A.fatal,V=0,k=0,M=0,W=128,Y=191;this.handler=function(H,P){if(P===u&&M!==0)return M=0,g(w);if(P===u)return f;if(M===0){if(n(P,0,127))return P;if(n(P,194,223))M=1,V=P-192;else if(n(P,224,239))P===224&&(W=160),P===237&&(Y=159),M=2,V=P-224;else if(n(P,240,244))P===240&&(W=144),P===244&&(Y=143),M=3,V=P-240;else return g(w);return V=V<<6*M,null}if(!n(P,W,Y))return V=M=k=0,W=128,Y=191,H.prepend(P),g(w);if(W=128,Y=191,k+=1,V+=P-128<<6*(M-k),k!==M)return null;var j=V;return V=M=k=0,j}}function O(A){A.fatal,this.handler=function(w,V){if(V===u)return f;if(n(V,0,127))return V;var k,M;n(V,128,2047)?(k=1,M=192):n(V,2048,65535)?(k=2,M=224):n(V,65536,1114111)&&(k=3,M=240);for(var W=[(V>>6*k)+M];k>0;){var Y=V>>6*(k-1);W.push(128|Y&63),k-=1}return W}}},function(t,r,e){var n=e(112),o=e(0);r.__esModule=!0,r.default=void 0;var a=o(e(14)),c=n(e(77));const u=e(7);let l=function(g){if((0,a.default)(this,"code",void 0),(0,a.default)(this,"message",void 0),(0,a.default)(this,"name",void 0),this.code=c.codes.CLOSE_FALLBACK_CODE,Object.values(c.codes).includes(g))switch(this.code=g,this.code){case c.codes.CLOSE_GOING_AWAY:case c.codes.CLOSE_PROTOCOL_ERROR:case c.codes.CLOSE_UNSUPPORTED:case c.codes.CLOSE_NO_STATUS:case c.codes.CLOSE_ABNORMAL:case c.codes.CLOSE_INCONSISTENT_DATA:case c.codes.CLOSE_POLICY_VIOLATION:case c.codes.CLOSE_TOO_LARGE:case c.codes.CLOSE_UNEXPECTED_CONDITION:case c.codes.CLOSE_CONNECTIVITY_LOSS:case c.codes.CLOSE_CONNECT_EXCEPTION:case c.codes.CLOSE_TIMEOUT:this.name=u.DISCONNECTED,this.message="Action failed due to session disconnection.";return}this.message=c.messages[this.code]||"No message available from code."};r.default=l},function(t,r,e){var n=e(0);r.__esModule=!0,r.default=void 0;var o=n(e(733)),a=(()=>(typeof window!==void 0?window:commonjsGlobal).WebSocket?(typeof window!==void 0?window:commonjsGlobal).WebSocket:o.default)();r.default=a},function(t,r,e){t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(t,r,e){const n=e(735);t.exports=function(a){const c=n(a.data);return c.transactionId=a.transactionId,c.fromAddress=a.headers["X-TB-FROM-ADDRESS"],c}},function(t,r,e){t.exports=function(o){if(o.length===0)return{};const a=JSON.parse(o),c=a.uri.substr(1).split("/");c.shift(),c[c.length-1]===""&&c.pop(),a.params={};for(let u=0,l=c.length;u<l-1;u+=2)a.params[c[u]]=c[u+1];return c.length%2===0?c[c.length-2]==="channel"&&c.length>6?a.resource=`${c[c.length-4]}_${c[c.length-2]}`:a.resource=c[c.length-2]:c[c.length-1]==="channel"&&c.length>5?a.resource=`${c[c.length-3]}_${c[c.length-1]}`:a.resource=c[c.length-1],a.signature=`${a.resource}#${a.method}`,a}},function(t,r,e){const n=e(3),o=n.name,a=e(52).once;t.exports=()=>a()&&["Chrome","Firefox","Safari"].indexOf(o)>-1},function(t,r,e){const n=e(3),o=e(52).once;t.exports=()=>o()&&(n.name==="Chrome"||n.name==="Firefox"||n.name==="Node"||n.name==="Safari"||n.name==="Edge")},function(t,r,e){const n=e(52).once;t.exports=()=>n()},function(t,r,e){t.exports="DTLS_SRTP"},function(t,r,e){t.exports=function(o){let a=o.supportsWebRTC;return{supportsWebRTC:a==="true"||a===!0}}},function(t,r,e){t.exports=function(o,a){this.code=o,this.message=a,this.reason=a}},function(t,r,e){const n=function(a){const c=[];this.enqueue=function(){c.push(Array.prototype.slice.call(arguments))},this.triggerAll=function(){let l;for(;l=c.shift();)a.trigger(...l)}};t.exports=n},function(t,r,e){var n=e(0),o=n(e(16));const a=e(207),c=e(240),u=e(59),l=e(9),f=e(143),g=e(10),v=e(744),b=e(745),S=e(291).default,C={EMPTY_RESPONSE:"Response body was empty, probably due to connectivity loss",BADLY_FORMED:"Unknown error: JSON response was badly formed",NO_ERROR:"No error message",UNEXPECTED_SERVER_RESPONSE:w=>`Unexpected server response (${w}). Try this operation again later.`},O=[0,600,1200];function A(w){let V=w===void 0?{}:w,k=V.axios,M=k===void 0?a:k,W=V.retryDelays,Y=W===void 0?O:W;function H(j){let _=j.anvilUrl,z=j.sessionId,ae=j.token,me=j.clientVersion,ye=j.connectionId;const Pe=c.parse(_,!0),Te=c.format({protocol:Pe.protocol,auth:Pe.auth,host:Pe.host,pathname:c.resolve((Pe.pathname||"").replace(/\/?$/,"/"),`session/${z}`),query:(0,o.default)({},Pe.query,{extended:!0})});return M.get(Te,{validateStatus:Ue=>Ue>=200&&Ue<300,headers:{"X-OPENTOK-AUTH":ae,"X-TB-VERSION":1,"X-TB-CLIENT-VERSION":me,"X-TB-CONNECTIONID":ye,Accept:"application/json"}}).catch(Ue=>{if(Ue.response){const _e=new Error(C.UNEXPECTED_SERVER_RESPONSE(`${Ue.response.statusCode}${Ue.response.status?` ${Ue.response.status}`:""}`));throw _e.code=g.ANVIL_INVALID_HTTP_STATUS,_e.name=v(_e.code),_e}else if(Ue.request){const _e=new Error(C.CONNECT_FAILED);throw _e.code=g.ANVIL_CONNECT_FAILED,_e.name=v(_e.code),_e}else{const _e=g.ANVIL_UNKNOWN_HTTP_ERROR,je=v(Ue.code);throw l(Ue,{code:_e,name:je}),Ue}}).then(Ue=>{let _e=Ue.data;if(typeof _e=="string"){if(_e.length>0)try{JSON.parse(_e)}catch(Ze){throw Ze.message=C.UNEXPECTED_SERVER_RESPONSE(Ze.toString()),Ze.code=g.ANVIL_XDOMAIN_OR_PARSING_ERROR,Ze.name=v(Ze.code),Ze}const De=new Error(_e.length===0?C.EMPTY_RESPONSE:C.BADLY_FORMED);throw De.code=_e.length===0?g.ANVIL_EMPTY_RESPONSE_BODY:g.ANVIL_BADLY_FORMED_RESPONSE,De.name=v(De.code),De}if(_e===null||_e.length===0){const De=new Error(C.EMPTY_RESPONSE);throw De.code=g.ANVIL_EMPTY_RESPONSE_BODY,De.name=v(De.code),De}const je=_e.filter(De=>De.error!=null),Ke=je[0];if(Ke){const De=b(u(Ke,"error.code","500"));u(Ke,"error.errorMessage.message")==="Invalid token format"&&(Ke.error.errorMessage.message+=` Token: ${ae}`);const Ze=new Error(u(Ke,"error.errorMessage.message",De===void 0?`Unknown error: ${Ke.error.code}`:C.NO_ERROR));throw Ze.code=De||g.ANVIL_UNEXPECTED_ERROR_CODE,Ze.name=v(Ze.code),Ze}return new f(_e[0])})}return S(H,(j,_)=>j.code&&j.code>=3e3&&j.code<=3007&&Y[_])}t.exports=A},function(t,r,e){const n=e(10),o=e(7),a={[n.ANVIL_BADLY_FORMED_RESPONSE]:o.BADLY_FORMED_RESPONSE,[n.ANVIL_INVALID_HTTP_STATUS]:o.INVALID_HTTP_STATUS,[n.ANVIL_XDOMAIN_OR_PARSING_ERROR]:o.XDOMAIN_OR_PARSING_ERROR,[n.ANVIL_UNKNOWN_HTTP_ERROR]:o.UNKNOWN_HTTP_ERROR,[n.ANVIL_UNEXPECTED_ERROR_CODE]:o.UNEXPECTED_ERROR_CODE,[n.ANVIL_EMPTY_RESPONSE_BODY]:o.EMPTY_RESPONSE_BODY,[n.ANVIL_CONNECT_FAILED]:o.CONNECT_FAILED,[n.AUTHENTICATION_ERROR]:o.AUTHENTICATION_ERROR,[n.INVALID_SESSION_ID]:o.INVALID_SESSION_ID,[n.TERMS_OF_SERVICE_FAILURE]:o.TERMS_OF_SERVICE_FAILURE,[n.UNEXPECTED_SERVER_RESPONSE]:o.UNEXPECTED_SERVER_RESPONSE};function c(u){return a[u]}t.exports=c},function(t,r,e){const n=e(10),o={400:n.INVALID_SESSION_ID,403:n.AUTHENTICATION_ERROR,404:n.INVALID_SESSION_ID,409:n.TERMS_OF_SERVICE_FAILURE,500:n.UNEXPECTED_SERVER_RESPONSE};function a(c){return o[c]}t.exports=a},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5)),c=n(e(37));const u=e(28),l=e(747);let f=function(g){(0,c.default)(v,g);function v(S){var C;return S===void 0&&(S={}),C=g.call(this)||this,C._generateKey=S.generateKey||l,C}var b=v.prototype;return b.set=function(){var S=(0,a.default)(o.default.mark(function O(A,w){var V;return o.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return this.keyPromise=this._generateKey(A,w),M.next=3,this.keyPromise;case 3:V=M.sent,this.emit("keyChanged",V);case 5:case"end":return M.stop()}},O,this)}));function C(O,A){return S.apply(this,arguments)}return C}(),b.get=function(){var S=(0,a.default)(o.default.mark(function O(){var A;return o.default.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,this.keyPromise;case 2:return A=V.sent,V.abrupt("return",A);case 4:case"end":return V.stop()}},O,this)}));function C(){return S.apply(this,arguments)}return C}(),b.clear=function(){this.keyPromise=void 0},v}(u);t.exports=f},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));const c=function(){var u=(0,a.default)(o.default.mark(function l(f,g){var v,b,S,C;return o.default.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return v=!1,b=!0,S=new TextEncoder,A.next=5,window.crypto.subtle.importKey("raw",S.encode(g),{name:"PBKDF2"},v,["deriveBits","deriveKey"]);case 5:return C=A.sent,A.abrupt("return",window.crypto.subtle.deriveKey({name:"PBKDF2",salt:S.encode(f),iterations:1e5,hash:"SHA-256"},C,{name:"AES-CTR",length:256},b,["encrypt","decrypt"]));case 7:case"end":return A.stop()}},l)}));return function(f,g){return u.apply(this,arguments)}}();t.exports=c},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));const c=e(3);let u={SFrame:{}};c.isNode||(u=e(749));const l=u,f=l.SFrame,g=b=>f.createClient(b,{skipVp8PayloadHeader:!0});let v=function(){function b(){this._clientStore={}}var S=b.prototype;return S.createSender=function(){var C=(0,a.default)(o.default.mark(function A(w){return o.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(w===void 0&&(w=0),!this.getSender(w)){k.next=3;break}return k.abrupt("return",this.getSender(w));case 3:return this._clientStore[w]||(this._clientStore[w]={}),k.next=6,g(w);case 6:return this._clientStore[w].sender=k.sent,k.abrupt("return",this.getSender(w));case 8:case"end":return k.stop()}},A,this)}));function O(A){return C.apply(this,arguments)}return O}(),S.createReceiver=function(){var C=(0,a.default)(o.default.mark(function A(w){return o.default.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(!this.getReceiver(w)){k.next=2;break}return k.abrupt("return",this.getReceiver(w));case 2:return this._clientStore[w]||(this._clientStore[w]={}),k.next=5,g(w);case 5:return this._clientStore[w].receiver=k.sent,k.abrupt("return",this.getReceiver(w));case 7:case"end":return k.stop()}},A,this)}));function O(A){return C.apply(this,arguments)}return O}(),S.getSender=function(O){var A;return(A=this._clientStore[O])==null?void 0:A.sender},S.getReceiver=function(O){var A;return(A=this._clientStore[O])==null?void 0:A.receiver},S.deleteReceiver=function(O){this.getReceiver(O)&&(this._clientStore[O].receiver.deleteReceiver(O),delete this._clientStore[O].receiver)},S.deleteSender=function(O){var A;(A=this._clientStore[O])==null||delete A.sender},b}();t.exports=v},function(t,r,e){(function(n){(function(a,c){t.exports=c()})(this,function(){return function(o){var a={};function c(u){if(a[u])return a[u].exports;var l=a[u]={i:u,l:!1,exports:{}};return o[u].call(l.exports,l,l.exports,c),l.l=!0,l.exports}return c.m=o,c.c=a,c.d=function(u,l,f){c.o(u,l)||Object.defineProperty(u,l,{enumerable:!0,get:f})},c.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},c.t=function(u,l){if(l&1&&(u=c(u)),l&8||l&4&&typeof u=="object"&&u&&u.__esModule)return u;var f=Object.create(null);if(c.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:u}),l&2&&typeof u!="string")for(var g in u)c.d(f,g,function(v){return u[v]}.bind(null,g));return f},c.n=function(u){var l=u&&u.__esModule?function(){return u.default}:function(){return u};return c.d(l,"a",l),l},c.o=function(u,l){return Object.prototype.hasOwnProperty.call(u,l)},c.p="",c(c.s="./index.js")}({"./Client.js":function(o,a,c){c.r(a),c.d(a,"SFrame",function(){return l});var u=c("./Worker.js");const l={createClient:async function(v,b){const S=new g;return await S.init(v,b),S}};async function f(v){return v instanceof CryptoKey&&v.type=="private"?await crypto.subtle.exportKey("pkcs8",v):v instanceof CryptoKey?await crypto.subtle.exportKey("raw",v):v instanceof Uint8Array?v.buffer.slice(0):v.slice(0)}class g extends EventTarget{constructor(){super(),this.worker=new u.default,this.transId=1,this.transactions=new Map,this.worker.addEventListener("message",async b=>{const S=b.data;if(S.transId){const C=this.transactions.get(S.transId);this.transactions.delete(S.transId),S.error?C.reject(new Error(S.error)):C.resolve(S.result)}else if(S.event){const C=new Event(S.event.name);C.id=S.event.data.id,C.senderId=S.event.data.senderId,this.dispatchEvent(C)}}),this.postMessage=(b,S,C)=>new n((O,A)=>{const w=this.transId++;this.worker.postMessage({transId:w,cmd:b,args:S},C),this.transactions.set(w,{resolve:O,reject:A})})}async init(b,S){return this.postMessage("init",{senderId:b,config:S})}async setSenderEncryptionKey(b){const S=await f(b);return this.postMessage("setSenderEncryptionKey",[S],[S])}async ratchetSenderEncryptionKey(){return this.postMessage("ratchetSenderEncryptionKey")}async setSenderSigningKey(b){const S=await f(b);return this.postMessage("setSenderSigningKey",[S])}async addReceiver(b){return this.postMessage("addReceiver",[b])}async setReceiverEncryptionKey(b,S){const C=await f(S);return this.postMessage("setReceiverEncryptionKey",[b,C],[C])}async setReceiverVerifyKey(b,S){const C=await f(S);return this.postMessage("setReceiverVerifyKey",[b,C],[C])}deleteReceiver(b){return this.postMessage("deleteReceiver",[b])}async encrypt(b,S){const C=S.track.kind,{readable:O,writable:A}=S.createEncodedStreams?S.createEncodedStreams():S.createEncodedVideoStreams?S.createEncodedVideoStreams():S.createEncodedAudioStreams();return this.postMessage("encrypt",{id:b,kind:C,readableStream:O,writableStream:A},[O,A])}async decrypt(b,S){const C=S.track.kind,{readable:O,writable:A}=S.createEncodedStreams?S.createEncodedStreams():S.createEncodedVideoStreams?S.createEncodedVideoStreams():S.createEncodedAudioStreams();return this.postMessage("decrypt",{id:b,kind:C,readableStream:O,writableStream:A},[O,A])}close(){this.worker.terminate();for(let b of this.transactions.values())b.reject(new Error("Client closed"));this.transactions.clear()}}},"./Worker.js":function(o,a,c){c.r(a),c.d(a,"default",function(){return f});var u=c("./node_modules/worker-loader/dist/runtime/inline.js"),l=c.n(u);function f(){return l()(`/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./Worker.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./Worker.js":
/*!*******************!*\\
  !*** ./Worker.js ***!
  \\*******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash/debounce */ "./node_modules/lodash/debounce.js");
/* harmony import */ var lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash_debounce__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/Context.js */ "./lib/Context.js");
/* harmony import */ var _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/VP8PayloadHeader.js */ "./lib/VP8PayloadHeader.js");
/* harmony import */ var _lib_Utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/Utils.js */ "./lib/Utils.js");
/* harmony import */ var _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./lib/TaskQueue.js */ "./lib/TaskQueue.js");






const postDecryptStatusMessage = lodash_debounce__WEBPACK_IMPORTED_MODULE_0___default()((message) => {
	postMessage(message)
},  1000, { leading: false, trailing: true });

let context; 

onmessage = async (event) => {
	//Get data
	const {transId,cmd,args} = event.data;
	
	try {
		let result = true;
		
		//Depending on the cmd
		switch(event.data.cmd)
		{
			case "init":
			{
				//Get info
				const {senderId, config} = args;
				//Crate context
				context = new _lib_Context_js__WEBPACK_IMPORTED_MODULE_1__["Context"](senderId, config);
				break;
			}
			case "encrypt":
			{
				//The recrypt queue
				const tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();
				//Get event data
				const{id, kind, readableStream, writableStream} = args;
				//Create transform stream foo encrypting
				const transformStream = new TransformStream({
					transform: async (chunk, controller)=>{
						//Nothing in clear
						let skip = 0;
						//Check if it is video and we are skipping vp8 payload header
						if (kind=="video" && context.isSkippingVp8PayloadHeader())
						{
							//Get VP8 header
							const vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);
							//Skip it
							skip = vp8.byteLength;
						}
						//Enqueue task
						tasks.enqueue (
							context.encrypt(kind, id, chunk.data, skip),
							(encrypted) => {
								//Set back encrypted payload
								chunk.data = encrypted.buffer;
								//write back
								controller.enqueue(chunk);
							},
							(error)=>{
								//TODO: handle errors
							}
						);
					}
				});
				//Encrypt
				readableStream
					.pipeThrough(transformStream)
					.pipeTo(writableStream);
				break;
			}
			case "decrypt":
			{
				//The recrypt queue
				const tasks = new _lib_TaskQueue_js__WEBPACK_IMPORTED_MODULE_4__["TaskQueue"]();
				//Last reveiced senderId
				let senderId = -1;
				//Get event data
				const{id, kind, readableStream, writableStream} = args;
				//Create transform stream for encrypting
				const transformStream = new TransformStream({
					transform: async (chunk, controller)=>{
						//Nothing in clear
						let skip = 0;
						//Check if it is video and we are skipping vp8 payload header
						if (kind=="video" && context.isSkippingVp8PayloadHeader())
						{
							//Get VP8 header
							const vp8 = _lib_VP8PayloadHeader_js__WEBPACK_IMPORTED_MODULE_2__["VP8PayloadHeader"].parse(chunk.data);
							//Skip it
							skip = vp8.byteLength;
						}

						//Enqueue task
						tasks.enqueue(
							context.decrypt(kind, id, chunk.data, skip),
							(decrypted) => {
								//Set back decrypted payload
								chunk.data = decrypted.buffer;
								//write back
								controller.enqueue(chunk);
								//If it is a sender
								if (decrypted.senderId!=senderId)
								{
									//Store it
									senderId = decrypted.senderId;
									//Launch event
									postMessage ({event: {
										name	: "authenticated",
										data	: {
											id	 : id,
											senderId : senderId
										}
									}});
								}
								if (decrypted.decryptionRestored) {
									postDecryptStatusMessage({
										event: {
											name: "decryptionRestored",
											data: {
												id,
												senderId,
											},
										},
									});
								}
							},
							(error) => {
								if (error.message === 'decryptFailed') {
									postDecryptStatusMessage({
										event: {
											name: "decryptFailed",
											data: {
												id,
												senderId,
											},
										},
								});
								}
							}
						);
					}
				});
				//Decrypt
				readableStream
					.pipeThrough(transformStream)
					.pipeTo(writableStream);
				break;
			}
			default:
				//Excute "cmd" method on context
				result = await context[cmd](...args || []);
		}
		//Send result back
		postMessage ({transId,result});
	} catch (error) {
		console.error(error);
		//Send error back
		postMessage({transId,error});
	}
};


/***/ }),

/***/ "./lib/AesCm128HmacSha256EncryptionKey.js":
/*!************************************************!*\\
  !*** ./lib/AesCm128HmacSha256EncryptionKey.js ***!
  \\************************************************/
/*! exports provided: AesCm128HmacSha256EncryptionKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AesCm128HmacSha256EncryptionKey", function() { return AesCm128HmacSha256EncryptionKey; });
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");
/* harmony import */ var _Salts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Salts.js */ "./lib/Salts.js");
/* harmony import */ var _IV_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./IV.js */ "./lib/IV.js");




const ratchetKey = (key) => 
	crypto.subtle.deriveBits(
		{
			name : "HKDF",
			hash : "SHA-256",
			salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].RatchetKey,
			info : new ArrayBuffer()
		},
		key,
		256
	);

class AesCm128HmacSha256EncryptionKey 
{
	constructor(){
		this.ratchets = [];
	}

	async setKey(key)
	{
		if (key instanceof CryptoKey)
		{
			//Check private key algorithm
			if (key.algorithm.name!="HKDF")
				//Error
				throw new Error("Invalid key");
		} else {
			//Import key
			key = await crypto.subtle.importKey(
				"raw",
				key,
				"HKDF",
				false,
				["deriveBits", "deriveKey"]
			);
		}
		this.key = key;
		
		//Get salt key
		this.saltKey = new Uint8Array(await crypto.subtle.deriveBits(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].SaltKey,
				info : new ArrayBuffer()
			},
			key,
			128
		));
	
		//Get encryption key
		this.encryptionKey = await crypto.subtle.deriveKey(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].EncryptionKey,
				info : new ArrayBuffer()
			},
			key,
			{
				name : "AES-CTR",
				length : 128
			},
			false,
			["encrypt","decrypt"]
		);
	
		//Get authentication key
		this.authKey = await crypto.subtle.deriveKey(
			{
				name : "HKDF",
				hash : "SHA-256",
				salt : _Salts_js__WEBPACK_IMPORTED_MODULE_1__["Salts"].AuthenticationKey,
				info : new ArrayBuffer()
			},
			key,
			{
				name : "HMAC",
				hash : "SHA-256",
				length : 256
			},
			false,
			["sign","verify"]
		);
	}

	
	async encrypt(type,header,payload,extraBytes,skip)
	{
		//Encure int
		skip = skip ? skip : 0;
		
		//Create IV
		const iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);
		
		//Encrypt
		const encrypted = await crypto.subtle.encrypt(
			{
				name	: "AES-CTR",
				counter : iv,
				length  : 128
			},
			this.encryptionKey,
			payload
		);
	
		//Get auth tag length from media type
		const authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);
		
		//Create encrypted frame
		const encryptedFrame = new Uint8Array(header.byteLength + payload.byteLength + authTagLength + extraBytes + skip);
		
		//Set header and encrypted payolad
		encryptedFrame.set(header, skip);
		encryptedFrame.set(new Uint8Array(encrypted), skip + header.length);
		
		//Authenticate
		const signature = new Uint8Array(await crypto.subtle.sign(
			"HMAC",
			this.authKey, 
			encryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)
		));
	
		//Truncate
		const authTag = signature.subarray(0, authTagLength);
	
		//Append authentication tag
		encryptedFrame.set(authTag, skip + encrypted.byteLength + header.byteLength );
		
		//Done
		return [encryptedFrame,authTag];
		
	}
	
	async decrypt(type, header, encryptedFrame, extrabytes, skip)
	{
		//Encure int
		skip = skip ? skip : 0;
		
		//Create IV
		const iv = _IV_js__WEBPACK_IMPORTED_MODULE_2__["IV"].generate(header.keyId, header.counter, this.saltKey);
		
		//Get auth tag length from media type
		const authTagLength = AesCm128HmacSha256EncryptionKey.getAuthTagLen(type);
		
		//Get encrypted frame length (without extra bytes from signature)
		const frameLength = encryptedFrame.byteLength - extrabytes - skip;
		
		//Get authentication tag
		const authTag = encryptedFrame.subarray(skip + frameLength - authTagLength, skip + frameLength);
		
		//Get encrypted payload
		const encrypted = encryptedFrame.subarray(skip + header.byteLength, skip + frameLength - authTagLength);
		
		//Calculate signature
		const signature = new Uint8Array(await crypto.subtle.sign(
			"HMAC",
			this.authKey, 
			encryptedFrame.subarray(skip, skip + header.byteLength + encrypted.byteLength)
		));
	
		//Authenticate authTag
		let authenticated = true;
		//Avoid timimg attacks by iterating over all bytes
		for (let i=0;i<authTagLength;++i)
			//check signature
			authenticated &= authTag[i]===signature[i];
		
		//If not all where equal
		if (!authenticated)
			//Authentication error
			throw new Error("Authentication error");
		
		//Decrypt
		const payload = new Uint8Array (await crypto.subtle.decrypt(
			{
				name	: "AES-CTR",
				counter : iv,
				length  : 128
			},
			this.encryptionKey,
			encrypted
		));
		
		//Done
		return [payload, authTag];
	}
	
	async ratchet(index)
	{
		// return stored key if exists
		if (this.ratchets[index]) {
			return this.ratchets[index];
		}
		
		//Create new key
		const key = new AesCm128HmacSha256EncryptionKey();

		// Get previous ratchet
		const previousRatchetKey = index === 0 ? this.key : this.ratchets[index - 1].key;
		
		//Set ratchet key
		await key.setKey(await ratchetKey(previousRatchetKey));
		
		this.ratchets[index] = key;
		//Done
		return key;
	}
	
	static getAuthTagLen(type)
	{
		return type.toLowerCase()==="video" ? 10 : 4;
	};
	
	static async create(raw) 
	{
		//Create new key
		const key = new AesCm128HmacSha256EncryptionKey();
		//Set raw key
		await key.setKey(raw);
		//Done
		return key;
	}
};



/***/ }),

/***/ "./lib/Context.js":
/*!************************!*\\
  !*** ./lib/Context.js ***!
  \\************************/
/*! exports provided: Context */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Context", function() { return Context; });
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _Sender_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Sender.js */ "./lib/Sender.js");
/* harmony import */ var _Receiver_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Receiver.js */ "./lib/Receiver.js");




class Context
{
	
	constructor(senderId, config)
	{
		//Store config
		this.config = Object.assign({}, config);
		//Only one sender per context
		this.sender = new _Sender_js__WEBPACK_IMPORTED_MODULE_1__["Sender"](senderId);
		
		//The map of known remote senders
		this.receivers = new Map();
	}
	
	isSkippingVp8PayloadHeader()
	{
		return !!this.config.skipVp8PayloadHeader;
	}
		
	async setSenderEncryptionKey(key)
	{
		//Set it
		return this.sender.setEncryptionKey(key);
	}
	
	async ratchetSenderEncryptionKey()
	{
		//Set it
		return this.sender.ratchetEncryptionKey();
	}
	
	async setSenderSigningKey(key)
	{
		//Set it
		return this.sender.setSigningKey(key);
	}
	
	addReceiver(receiverkKeyId)
	{
		//Check we don't have a receiver already for that id
		if(this.receivers.has(receiverkKeyId))
			//Error
			throw new Error("There was already a receiver for keyId "+receiverkKeyId);
		//Add new
		this.receivers.set(receiverkKeyId, new _Receiver_js__WEBPACK_IMPORTED_MODULE_2__["Receiver"](receiverkKeyId));
	}
	
	async setReceiverEncryptionKey(receiverkKeyId, key)
	{
		//Get receiver for the sender
		const receiver = this.receivers.get(receiverkKeyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId "+receiverkKeyId);
		
		//Rachet
		return receiver.setEncryptionKey(key);
	}
	
	async setReceiverVerifyKey(receiverkKeyId,key)
	{
		//Get receiver for the sender
		const receiver = this.receivers.get(receiverkKeyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId "+receiverkKeyId);
		
		//Rachet
		return receiver.setVerifyKey(key);
	}
	
	deleteReceiver(receiverkKeyId)
	{
		//Delete receiver
		return this.receivers.delete(receiverkKeyId);
	}
	
	async encrypt(type, ssrcId, frame, skip)
	{
		//Encrypt it
		return this.sender.encrypt(type, ssrcId, frame, skip);
	}
	
	async decrypt(type, ssrcId, encryptedFrame, skip)
	{
		//convert if needed
		if (!(encryptedFrame instanceof Uint8Array))
			encryptedFrame = new Uint8Array (encryptedFrame);
		
		//Parse encrypted payload
		const header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].parse(encryptedFrame.subarray(skip));
		
		//Get receiver for the sender
		const receiver = this.receivers.get(header.keyId);
		
		//IF not found
		if (!receiver)
			//Error
			throw new Error("No receiver found for keyId " + header.keyId);
		
		//Decrypt it
		return receiver.decrypt(type, ssrcId, header, encryptedFrame, skip);
	}
	
};


/***/ }),

/***/ "./lib/EcdsaSignKey.js":
/*!*****************************!*\\
  !*** ./lib/EcdsaSignKey.js ***!
  \\*****************************/
/*! exports provided: EcdsaSignKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaSignKey", function() { return EcdsaSignKey; });
//TODO: Update to Ed25519 when available
// https://chromestatus.com/features/4913922408710144
// https://chromium.googlesource.com/chromium/src/+log/master/components/webcrypto/algorithms/ed25519.cc

class EcdsaSignKey
{
	
	async setKey(privKey)
	{
		//If it is a crypto key already
		if (privKey instanceof CryptoKey)
		{
			//Check private key algorithm
			if (privKey.algorithm.name!="ECDSA" || !privKey.usages.includes("sign"))
				//Error
				throw new Error("Invalid key");
			//Set it
			this.privKey = privKey;
		} else {
			//Import it
			this.privKey = await crypto.subtle.importKey(
				"pkcs8",
				privKey,
				{
					name		: "ECDSA",
					namedCurve	: "P-521"
				},
				false,
				["sign"]
			);
		}
	}
	
	async sign(authTags)
	{
		//Verify
		return new Uint8Array(await crypto.subtle.sign(
			{
			  name: "ECDSA",
			  hash: "SHA-512"
			},
			this.privKey,
			authTags
		));
	}
	
	static getSignatureLen()
	{
		return 64;
	}
	
	static async create(privKey)
	{
		//Craete key
		const key = new EcdsaSignKey();
		//Set key
		await key.setKey(privKey);
		//Done
		return key;
		
	}
};


/***/ }),

/***/ "./lib/EcdsaVerifyKey.js":
/*!*******************************!*\\
  !*** ./lib/EcdsaVerifyKey.js ***!
  \\*******************************/
/*! exports provided: EcdsaVerifyKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "EcdsaVerifyKey", function() { return EcdsaVerifyKey; });

class EcdsaVerifyKey
{
	async setKey(pubKey)
	{
		//If it is a crypto key already
		if (pubKey instanceof CryptoKey)
		{
			//Check 
			if (pubKey.algorithm.name!="ECDSA" || !pubKey.usages.includes("verify"))
				//Error
				throw new Error("Invalid key");
			//Set it
			this.pubKey = pubKey;
		} else {
			//Import it
			this.pubKey = await crypto.subtle.importKey(
				"raw",
				pubKey,
				{
					name		: "ECDSA",
					namedCurve	: "P-521"
				},
				false,
				["verify"]
			);
		}
	}
	
	async verify(signed,signature)
	{
		//Verify
		return await window.crypto.subtle.verify(
			{
				name: "ECDSA",
				hash: "SHA-512"
			},
			this.pubKey,
			signature,
			signed
		);
	}
	
	static getSignatureLen()
	{
		return 64;
	}
	
	static async create(pubKey)
	{
		//Craete key
		const key = new EcdsaVerifyKey();
		//Set key
		await key.setKey(pubKey);
		//Done
		return key;
		
	}
};


/***/ }),

/***/ "./lib/Header.js":
/*!***********************!*\\
  !*** ./lib/Header.js ***!
  \\***********************/
/*! exports provided: Header */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Header", function() { return Header; });
/*
	0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+
	|S|LEN  |X|  K  |
	+-+-+-+-+-+-+-+-+
	SFrame header metadata

	Signature flag (S): 1 bit This field indicates the payload contains a signature of set. Counter Length (LEN): 3 bits This field indicates the length of the CTR fields in bytes. Extended Key Id Flag (X): 1 bit
	Indicates if the key field contains the key id or the key length. Key or Key Length: 3 bits This field contains the key id (KID) if the X flag is set to 0, or the key length (KLEN) if set to 1.

	If X flag is 0 then the KID is in the range of 0-7 and the frame counter (CTR) is found in the next LEN bytes:

	 0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+---------------------------------+
	|S|LEN  |0| KID |    CTR... (length=LEN)          |
	+-+-+-+-+-+-+-+-+---------------------------------+
	Key id (KID): 3 bits The key id (0-7). Frame counter (CTR): (Variable length) Frame counter value up to 8 bytes long.

	if X flag is 1 then KLEN is the length of the key (KID), that is found after the SFrame header metadata byte. After the key id (KID), the frame counter (CTR) will be found in the next LEN bytes:

	 0 1 2 3 4 5 6 7
	+-+-+-+-+-+-+-+-+---------------------------+---------------------------+
	|S|LEN  |1|KLEN |   KID... (length=KLEN)    |    CTR... (length=LEN)    |
	+-+-+-+-+-+-+-+-+---------------------------+---------------------------+
*/
const Header = {
	
	parse : function(buffer) 
	{
		//Create uint view
		const view = new Uint8Array(buffer);
		
		//Get metadata
		const metadata = view[0];
		
		//Get values
		const s		= !!(metadata & 0x80);
		const len	= (metadata >> 4) & 0x07;
		const x		= !!(metadata & 0x08);
		const k		= metadata & 0x07;
		
		//Get key id
		let keyId = 0;
		//Check if it is the extented key format
		if (x)
		{
			//Read length
			for (let i=0;i<k;i++)
				keyId = (keyId * 256) + view[i+1];
		} else {
			//Short version
			keyId = k;
		}
		
		//Get ctr
		const ini = x ? k + 1 : 1;
		let counter = 0;
		//Read length
		for (let i=0;i<len;i++)
			counter = (counter * 256) + view[ini+i];
		
		//Get header buffer view
		const header = view.subarray(0, x ? k + len + 1 : len + 1);
		
		//Add parsed atributes
		header.signature   = s;
		header.keyId	   = keyId;
		header.counter	   = counter;
		
		//Done
		return header; 
	},
	generate: function(signature,keyId,counter)
	{
		//Check keyId
		Header.checkKeyId(keyId);
		
		//Calcultate variavle length
		const varlen = (x) => x ? parseInt(Math.log(x) / Math.log(256))+1 : 1;
		
		//Get key extension and length
		const x = keyId > 7;
		const k = x ? varlen(keyId) : keyId;
		
		//Get counter length
		const len = varlen(counter);
		
		//Ensure counter is not huge
		if (len>7)
			//Error
			throw new Error("Counter is too big");
		
		//Generate header
		const header = new Uint8Array( x ? 1 + k + len : 1 + len);
		
		//Set metadata header
		header[0] = !!signature;
		header[0] = header[0] << 3  | ( len & 0x07);
		header[0] = header[0] << 1  | x;
		header[0] = header[0] << 3  | ( k & 0x07);
		
		//Add parsed atributes
		header.signature   = !!signature;
		header.keyId	   = keyId;
		header.counter	   = counter;
		
		//If extended key
		if (x)
			//Add key id
			for (let i=0; i<k; ++i)
				header[i+1] = (keyId >> (k-1-i)*8) & 0xff;
		//The coutner init
		const ini = x ? k + 1 : 1;
		//Add counter
		for (let i=0; i<len; ++i)
			header[ini+i] = (counter >> (len-1-i)*8) & 0xff;
			
		
		//Done
		return header;
	}
};

Header.MaxKeyId = 0xFFFFFFFFFF;

Header.checkKeyId = function(keyId)
{
	//Check it is possitive
	if (keyId<0)
		//Error
		throw new Error("keyId must be possitive");
	//Check it is possitive
	if (keyId>Header.MaxKeyId)
		//Error
		throw new Error("keyId must be 5 bytes long at most");
};


/***/ }),

/***/ "./lib/IV.js":
/*!*******************!*\\
  !*** ./lib/IV.js ***!
  \\*******************/
/*! exports provided: IV */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "IV", function() { return IV; });
const IV = 
{
	generate : function(keyId,counter,salt)
	{
		//128 bits
		const iv = new Uint8Array (16);
		//Get view
		const view = new DataView(iv.buffer);
		//Set keyId
		view.setBigUint64(0, BigInt(counter));
		//Set coutner
		view.setBigUint64(8, BigInt(keyId));
		//Xor with salt key
		for (let i=0; i<iv.byteLength; ++i)
			//xor
			view.setUint8(i,iv[i]^salt[i]); 
		//return buffer
		return iv;
	}
};


/***/ }),

/***/ "./lib/Receiver.js":
/*!*************************!*\\
  !*** ./lib/Receiver.js ***!
  \\*************************/
/*! exports provided: Receiver */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Receiver", function() { return Receiver; });
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Utils.js */ "./lib/Utils.js");
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EcdsaVerifyKey.js */ "./lib/EcdsaVerifyKey.js");
/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");





const MaxRatchetAttempts = 5;
const ReplayWindow = 128;
const KeyTimeout = 1000;

class Receiver
{
	constructor(senderId)
	{
		//Check keyId
		_Header_js__WEBPACK_IMPORTED_MODULE_1__["Header"].checkKeyId(senderId);
		
		//Store sender id
		this.senderId = senderId;
		//Last received counter
		this.maxReceivedCounter = -1;
		//Number or ratchets of current key
		this.numKeyRatchets = 0;
		//Create keyring
		this.keyring = [];
		//Pending verified tags
		this.pending = new Map();
		// has failed decryption
		this.keyFailing = false;

		//Scheduled keys
		this.scheduledKeys = new WeakSet ();

		//Function to clear up keys up to given one
		this.schedulePreviousKeysTimeout = (key) =>{
			//If this is the only key
			if (this.keyring.length==1 && this.keyring[0]===key)
				//Do nothing
				return;
			//If has been already scheduled
			if (this.scheduledKeys.has(key))
				//Not do it twice
				return;
			//Add it
			this.scheduledKeys.add(key);
			//Schedule key timeout of previous keys
			setTimeout(()=>{
				//Find key index
				const i = this.keyring.findIndex(k=>k===key);
				//Remove previous keys
				this.keyring = this.keyring.splice(i);
			}, KeyTimeout);
		};
	}
	
	async decrypt(type, ssrcId, header, encryptedFrame, skip)
	{
		let authTag, payload, extrabytes = 0, signature, signed;
		const prevAuthTags = [];
		
		//convert if needed
		if (!(encryptedFrame instanceof Uint8Array))
			encryptedFrame = new Uint8Array (encryptedFrame);

		// Replay attack protection
		if (header.counter < this.maxReceivedCounter && (this.maxReceivedCounter - header.counter) > ReplayWindow) {
			//Error
			throw new Error("Replay check failed, frame counter too old");
		}
		
		//Check if frame contains signature
		if (header.signature)
		{
			//Start from the end
			let end = encryptedFrame.byteLength;
			
			//Get lengths
			const singatureLength = ECDSAVerifyKey.getSignatureLen();
			const authTagLength   = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);
			
			//Get signature
			signature = encryptedFrame.subarray(end - singatureLength, end);
			//Move backward
			end -= singatureLength;
			
			//Get number of tags
			const num = encryptedFrame[end--];
			
			//Read all tags
			for (let i=0; i<num; ++i)
			{
				//Get previous tag
				const prevTag = encryptedFrame.subarray(end - authTagLength, end);
				//Move backward
				end -= authTagLength;
				//Add tag to previous tags in hex
				prevAuthTags.push(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(prevTag))
			}
			//Get the extra bytes
			extrabytes = encryptedFrame.byteLength - end;
			
			//Move backward to start oth current frame auth tag
			end -= authTagLength;
			
			//Get singed part
			signed = encryptedFrame.subarray(end, encryptedFrame.byteLength - singatureLength)
		}

		//For each key in key ring
		for (let i=0;i<this.keyring.length;++i)
		{
			//Get key from ring
			const key = this.keyring[i];
			try {
				//Try to decrypt payload
				[payload, authTag] = await key.decrypt(type, header, encryptedFrame, extrabytes, skip);
				//Done
				break;
			} catch(e) {
				
			}
		}

		//If not found yet
		if (!payload)
		{
			//Get last key
			const key = this.keyring[this.keyring.length-1];
			//Try ratchet last key
			for (let i = 0; i < MaxRatchetAttempts; ++i)
			{
				//Ratchet key
				const ratchetKey = await key.ratchet(i);
				try {
					//Try to decrypt payload
					[payload, authTag] = await ratchetKey.decrypt(type, header, encryptedFrame, extrabytes, skip);
					// Set working ratchet as new key
					this.keyring.push(ratchetKey);
					this.schedulePreviousKeysTimeout(ratchetKey);
					//Done
					break;
				} catch(e) {

				}
			}
		}

		//Last check
		if (!payload) {
			//Decryption failed
			if (this.keyFailing)  {
				throw new Error('decryptStillFailing')
			} else {
				this.keyFailing = true;
				throw new Error("decryptFailed");
			}
		}

		//If we are sending part of the frame in clear
		if (skip)
			//Copy skiped payload
			payload.set(encryptedFrame.subarray(0,skip),0);

		//Check if have received anything from this ssrc before
		if (!this.pending.has(ssrcId))
			//Add it
			this.pending.set(ssrcId,new Set());

		//Get pending list
		const pending = this.pending.get(ssrcId);

		//Check if it constains signatures
		if (header.signed)
		{
			//try to verify list
			if (!await this.verifyKey.verify(signed,signature))
				//Error
				throw new Error("Could not verify signature");
			//For each signed tag
			for (const tag in prevAuthTags)
				//Delete from pending to be verified tags
				pending.delete(tag);
		} else {
			//Push this tag to
			pending.add(_Utils_js__WEBPACK_IMPORTED_MODULE_0__["Utils"].toHex(authTag));
		}

		//Set authenticated sender id and frame Id
		payload.senderId = header.keyId;
		payload.frameId  = header.counter;

		// inform that decryption is working after previously failing
		if (this.keyFailing) {
			payload.decryptionRestored = true;
			this.keyFailing = false;
		}

		//Store last received counter
		this.maxReceivedCounter = Math.max(header.counter, this.maxReceivedCounter);

		//Return decrypted payload
		return payload;
	}

	async setVerifyKey(key)
	{
		//Create new singing key
		this.verifyKey = _EcdsaVerifyKey_js__WEBPACK_IMPORTED_MODULE_2__["EcdsaVerifyKey"].create(key);
	}

	async setEncryptionKey(raw)
	{
		//Create new encryption key
		const key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_3__["AesCm128HmacSha256EncryptionKey"].create(raw);
		//Append to the keyring
		this.keyring.push(key);
		//Restart ratchet count number
		this.numKeyRatchets = 0;
		//Activate
		this.schedulePreviousKeysTimeout(key);
	}
};


/***/ }),

/***/ "./lib/Salts.js":
/*!**********************!*\\
  !*** ./lib/Salts.js ***!
  \\**********************/
/*! exports provided: Salts */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Salts", function() { return Salts; });
const textEncoder = new TextEncoder()

const Salts =  {
	"SaltKey"		: textEncoder.encode("SFrameSaltKey"),
	"EncryptionKey"		: textEncoder.encode("SFrameEncryptionKey"),
	"AuthenticationKey"	: textEncoder.encode("SFrameAuthenticationKey"),
	"RatchetKey"		: textEncoder.encode("SFrameRatchetKey")
};


/***/ }),

/***/ "./lib/Sender.js":
/*!***********************!*\\
  !*** ./lib/Sender.js ***!
  \\***********************/
/*! exports provided: Sender */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Sender", function() { return Sender; });
/* harmony import */ var _Header_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Header.js */ "./lib/Header.js");
/* harmony import */ var _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./EcdsaSignKey.js */ "./lib/EcdsaSignKey.js");
/* harmony import */ var _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./AesCm128HmacSha256EncryptionKey.js */ "./lib/AesCm128HmacSha256EncryptionKey.js");





const SigningFrameInterval = 10;

class Sender
{
	constructor(senderId)
	{
		//Check keyId
		_Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].checkKeyId(senderId);
		
		//The global frame counter
		this.counter = 0;
		
		//Store senderId/keyId
		this.senderId = senderId;
		
		//Pending frames for signing
		this.pending = new Map();
	}
	
	async encrypt(type, ssrcId, payload, skip)
	{
		//Check we have a valid key
		if (!this.key)
			throw Error("Encryption key not set");
		
		//convert if needed
		if (!(payload instanceof Uint8Array))
			payload = new Uint8Array (payload);
		
		//Encure int
		skip = skip ? skip : 0;
		
		//Get counter for frame
		const counter = this.counter++;
		
		//If we don't have the ssrc
		// TODO FIX https://github.com/medooze/sframe/issues/15 and uncomment line below
		// if (!this.pending.has(ssrcId))
		//Create new pending frames array
			this.pending.set(ssrcId,[]);
		
		//Get pending frames for signature
		const pending = this.pending.get(ssrcId);		
		
		//Do we need to sign the frames?
		const signing = this.signingKey && pending.length > SigningFrameInterval;
		
		//Get auth tag len for type
		const authTagLen = _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type);
		
		//Calculae extra bytes
		const extraBytes = signing ? pending.length * _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].getAuthTagLen(type) + 1 + _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].getSignatureLen() : 0;
		
		//Generate header
		const header = _Header_js__WEBPACK_IMPORTED_MODULE_0__["Header"].generate(signing,this.senderId,counter);
		
		//Encrypt frame
		const [encryptedFrame,authTag] = await this.key.encrypt(type, header, payload, extraBytes, skip);
		
		//If we are sending part of the frame in clear
		if (skip)
			//Copy skiped payload
			encryptedFrame.set(payload.subarray(0,skip),0);
		
		//If we need to sign the frame
		if (signing)
		{
			//Append after auth tag
			let ini = skip + encryptedFrame.byteLength - extraBytes;
			
			//Get tag list view
			const authTags = encryptedFrame.subarray(ini - authTagLen, (pending.length + 1) * authTagLen);
			
			//Add all previous tags 
			for (const previousTag of pending)
			{
				//Append to frame
				encryptedFrame.set(previousTag, ini);
				//Move
				ini += authTagLen;
			}
			
			//Add number of bytes
			encryptedFrame[ini++] = pending.length;
			
			//Create signature with all auth tags (including this frame's one)
			const signature = await this.signingKey.sign(authTags);
			
			//Add signature
			encryptedFrame.set(signature, ini);
			
			//Empty pending list 
			this.pending.set(ssrcId,[]);
			
		//If we can sign
		} else if (this.signingKey) {
			//Append a copy of current tag at the begining
			pending.unshift(authTag.slice());
		}
		
		//Set authenticated sender id and frame Id
		encryptedFrame.senderId = header.keyId;
		encryptedFrame.frameId  = header.counter;
		
		//Done
		return encryptedFrame;
	}
	
	async setSigningKey(key)
	{
		//Create new singing key
		this.signingKey = await _EcdsaSignKey_js__WEBPACK_IMPORTED_MODULE_1__["EcdsaSignKey"].create(key);
	}
	
	async setEncryptionKey(key)
	{
		//Create new encryption key
		this.key = await _AesCm128HmacSha256EncryptionKey_js__WEBPACK_IMPORTED_MODULE_2__["AesCm128HmacSha256EncryptionKey"].create(key);
	}
	
	async ratchetEncryptionKey()
	{
		//Check we have a valid key
		if (!this.key)
			throw Error("Encryption key not set");
		
		//Rachet the key and store it
		this.key = await this.key.ratchet();
	}
};


/***/ }),

/***/ "./lib/TaskQueue.js":
/*!**************************!*\\
  !*** ./lib/TaskQueue.js ***!
  \\**************************/
/*! exports provided: TaskQueue */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TaskQueue", function() { return TaskQueue; });
class TaskQueue
{
	constructor()
	{
		this.tasks = [];
		this.running = false;
	}
	
	enqueue(promise,callback,error)
	{
		//enqueue task
		this.tasks.push({promise,callback,error});
		//Try run 
		this.run();
	}
	
	async run()
	{
		//If already running 
		if (this.running)
			//Nothing
			return;
		//Running
		this.running = true;
		//Run all pending tasks
		while(this.tasks.length)
		{
			try {
				//Wait for first promise to finish
				const result = await this.tasks[0].promise;
				//Run callback
				this.tasks[0].callback(result); 
			} catch(e) {
				//Run error callback
				this.tasks[0].error(e); 
			}
			//Remove task from queue
			this.tasks.shift();
		}
		//Ended
		this.running = false;
	}
}


/***/ }),

/***/ "./lib/Utils.js":
/*!**********************!*\\
  !*** ./lib/Utils.js ***!
  \\**********************/
/*! exports provided: Utils */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Utils", function() { return Utils; });
const Utils = 
{
	toHex : function(buffer)
	{
		return Array.prototype.map.call(buffer instanceof Uint8Array ? buffer : new Uint8Array (buffer), x =>x.toString(16).padStart(2,"0")).join("");
	},
	fromHex: function(str)
	{
		const bytes = [];
		for (let i=0;i<str.length/2;++i)
			bytes.push(parseInt(str.substring(i*2, (i+1)*2), 16));

		return new Uint8Array(bytes);
	},
	equals : function(a,b)
	{
		if (a.byteLength != b.byteLength) return false;
		for (let i = 0 ; i != a.byteLength ; i++)
			if (a[i] != b[i]) return false;
		return true;
	}
};


/***/ }),

/***/ "./lib/VP8PayloadHeader.js":
/*!*********************************!*\\
  !*** ./lib/VP8PayloadHeader.js ***!
  \\*********************************/
/*! exports provided: VP8PayloadHeader */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "VP8PayloadHeader", function() { return VP8PayloadHeader; });

const VP8PayloadHeader = {
	
	parse : function(buffer) 
	{
		//Check size
		if (buffer.byteLength<3)
			//Invalid
			return null;
		
		//Create uint view
		const view = new Uint8Array(buffer);
		
		//Read comon 3 bytes
		//   0 1 2 3 4 5 6 7
                //  +-+-+-+-+-+-+-+-+
                //  |Size0|H| VER |P|
                //  +-+-+-+-+-+-+-+-+
                //  |     Size1     |
                //  +-+-+-+-+-+-+-+-+
                //  |     Size2     |
                //  +-+-+-+-+-+-+-+-+
		const firstPartitionSize	= view[0] >> 5;
		const showFrame			= view[0] >> 4 & 0x01;
		const version			= view[0] >> 1 & 0x07;
		const isKeyFrame		= (view[0] & 0x01) == 0;

		//check if more
		if (isKeyFrame)
		{
			//Check size
			if (buffer.byteLength<10)
				//Invalid
				return null;
			//Get size in le
			const hor = view[7]<<8 | view[6];
			const ver = view[9]<<8 | view[8];
			//Get dimensions and scale
			const width		= hor & 0x3fff;
			const horizontalScale   = hor >> 14;
			const height		= ver & 0x3fff;
			const verticalScale	= ver >> 14;
			//Key frame
			return view.subarray (0,10);
		}
		
		//No key frame
		return view.subarray (0,3);
	}
};

		


/***/ }),

/***/ "./node_modules/lodash/_Symbol.js":
/*!****************************************!*\\
  !*** ./node_modules/lodash/_Symbol.js ***!
  \\****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/** Built-in value references. */
var Symbol = root.Symbol;

module.exports = Symbol;


/***/ }),

/***/ "./node_modules/lodash/_baseGetTag.js":
/*!********************************************!*\\
  !*** ./node_modules/lodash/_baseGetTag.js ***!
  \\********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js"),
    getRawTag = __webpack_require__(/*! ./_getRawTag */ "./node_modules/lodash/_getRawTag.js"),
    objectToString = __webpack_require__(/*! ./_objectToString */ "./node_modules/lodash/_objectToString.js");

/** \`Object#toString\` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of \`getTag\` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the \`toStringTag\`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

module.exports = baseGetTag;


/***/ }),

/***/ "./node_modules/lodash/_baseTrim.js":
/*!******************************************!*\\
  !*** ./node_modules/lodash/_baseTrim.js ***!
  \\******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var trimmedEndIndex = __webpack_require__(/*! ./_trimmedEndIndex */ "./node_modules/lodash/_trimmedEndIndex.js");

/** Used to match leading whitespace. */
var reTrimStart = /^\\s+/;

/**
 * The base implementation of \`_.trim\`.
 *
 * @private
 * @param {string} string The string to trim.
 * @returns {string} Returns the trimmed string.
 */
function baseTrim(string) {
  return string
    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')
    : string;
}

module.exports = baseTrim;


/***/ }),

/***/ "./node_modules/lodash/_freeGlobal.js":
/*!********************************************!*\\
  !*** ./node_modules/lodash/_freeGlobal.js ***!
  \\********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable \`global\` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

module.exports = freeGlobal;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../webpack/buildin/global.js */ "./node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "./node_modules/lodash/_getRawTag.js":
/*!*******************************************!*\\
  !*** ./node_modules/lodash/_getRawTag.js ***!
  \\*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [\`toStringTag\`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of \`baseGetTag\` which ignores \`Symbol.toStringTag\` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw \`toStringTag\`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

module.exports = getRawTag;


/***/ }),

/***/ "./node_modules/lodash/_objectToString.js":
/*!************************************************!*\\
  !*** ./node_modules/lodash/_objectToString.js ***!
  \\************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [\`toStringTag\`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/**
 * Converts \`value\` to a string using \`Object.prototype.toString\`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

module.exports = objectToString;


/***/ }),

/***/ "./node_modules/lodash/_root.js":
/*!**************************************!*\\
  !*** ./node_modules/lodash/_root.js ***!
  \\**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var freeGlobal = __webpack_require__(/*! ./_freeGlobal */ "./node_modules/lodash/_freeGlobal.js");

/** Detect free variable \`self\`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

module.exports = root;


/***/ }),

/***/ "./node_modules/lodash/_trimmedEndIndex.js":
/*!*************************************************!*\\
  !*** ./node_modules/lodash/_trimmedEndIndex.js ***!
  \\*************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/** Used to match a single whitespace character. */
var reWhitespace = /\\s/;

/**
 * Used by \`_.trim\` and \`_.trimEnd\` to get the index of the last non-whitespace
 * character of \`string\`.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {number} Returns the index of the last non-whitespace character.
 */
function trimmedEndIndex(string) {
  var index = string.length;

  while (index-- && reWhitespace.test(string.charAt(index))) {}
  return index;
}

module.exports = trimmedEndIndex;


/***/ }),

/***/ "./node_modules/lodash/debounce.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/debounce.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),
    now = __webpack_require__(/*! ./now */ "./node_modules/lodash/now.js"),
    toNumber = __webpack_require__(/*! ./toNumber */ "./node_modules/lodash/toNumber.js");

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/* Built-in method references for those with the same name as other \`lodash\` methods. */
var nativeMax = Math.max,
    nativeMin = Math.min;

/**
 * Creates a debounced function that delays invoking \`func\` until after \`wait\`
 * milliseconds have elapsed since the last time the debounced function was
 * invoked. The debounced function comes with a \`cancel\` method to cancel
 * delayed \`func\` invocations and a \`flush\` method to immediately invoke them.
 * Provide \`options\` to indicate whether \`func\` should be invoked on the
 * leading and/or trailing edge of the \`wait\` timeout. The \`func\` is invoked
 * with the last arguments provided to the debounced function. Subsequent
 * calls to the debounced function return the result of the last \`func\`
 * invocation.
 *
 * **Note:** If \`leading\` and \`trailing\` options are \`true\`, \`func\` is
 * invoked on the trailing edge of the timeout only if the debounced function
 * is invoked more than once during the \`wait\` timeout.
 *
 * If \`wait\` is \`0\` and \`leading\` is \`false\`, \`func\` invocation is deferred
 * until to the next tick, similar to \`setTimeout\` with a timeout of \`0\`.
 *
 * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)
 * for details over the differences between \`_.debounce\` and \`_.throttle\`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to debounce.
 * @param {number} [wait=0] The number of milliseconds to delay.
 * @param {Object} [options={}] The options object.
 * @param {boolean} [options.leading=false]
 *  Specify invoking on the leading edge of the timeout.
 * @param {number} [options.maxWait]
 *  The maximum time \`func\` is allowed to be delayed before it's invoked.
 * @param {boolean} [options.trailing=true]
 *  Specify invoking on the trailing edge of the timeout.
 * @returns {Function} Returns the new debounced function.
 * @example
 *
 * // Avoid costly calculations while the window size is in flux.
 * jQuery(window).on('resize', _.debounce(calculateLayout, 150));
 *
 * // Invoke \`sendMail\` when clicked, debouncing subsequent calls.
 * jQuery(element).on('click', _.debounce(sendMail, 300, {
 *   'leading': true,
 *   'trailing': false
 * }));
 *
 * // Ensure \`batchLog\` is invoked once after 1 second of debounced calls.
 * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });
 * var source = new EventSource('/stream');
 * jQuery(source).on('message', debounced);
 *
 * // Cancel the trailing debounced invocation.
 * jQuery(window).on('popstate', debounced.cancel);
 */
function debounce(func, wait, options) {
  var lastArgs,
      lastThis,
      maxWait,
      result,
      timerId,
      lastCallTime,
      lastInvokeTime = 0,
      leading = false,
      maxing = false,
      trailing = true;

  if (typeof func != 'function') {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  wait = toNumber(wait) || 0;
  if (isObject(options)) {
    leading = !!options.leading;
    maxing = 'maxWait' in options;
    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;
    trailing = 'trailing' in options ? !!options.trailing : trailing;
  }

  function invokeFunc(time) {
    var args = lastArgs,
        thisArg = lastThis;

    lastArgs = lastThis = undefined;
    lastInvokeTime = time;
    result = func.apply(thisArg, args);
    return result;
  }

  function leadingEdge(time) {
    // Reset any \`maxWait\` timer.
    lastInvokeTime = time;
    // Start the timer for the trailing edge.
    timerId = setTimeout(timerExpired, wait);
    // Invoke the leading edge.
    return leading ? invokeFunc(time) : result;
  }

  function remainingWait(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime,
        timeWaiting = wait - timeSinceLastCall;

    return maxing
      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)
      : timeWaiting;
  }

  function shouldInvoke(time) {
    var timeSinceLastCall = time - lastCallTime,
        timeSinceLastInvoke = time - lastInvokeTime;

    // Either this is the first call, activity has stopped and we're at the
    // trailing edge, the system time has gone backwards and we're treating
    // it as the trailing edge, or we've hit the \`maxWait\` limit.
    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||
      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));
  }

  function timerExpired() {
    var time = now();
    if (shouldInvoke(time)) {
      return trailingEdge(time);
    }
    // Restart the timer.
    timerId = setTimeout(timerExpired, remainingWait(time));
  }

  function trailingEdge(time) {
    timerId = undefined;

    // Only invoke if we have \`lastArgs\` which means \`func\` has been
    // debounced at least once.
    if (trailing && lastArgs) {
      return invokeFunc(time);
    }
    lastArgs = lastThis = undefined;
    return result;
  }

  function cancel() {
    if (timerId !== undefined) {
      clearTimeout(timerId);
    }
    lastInvokeTime = 0;
    lastArgs = lastCallTime = lastThis = timerId = undefined;
  }

  function flush() {
    return timerId === undefined ? result : trailingEdge(now());
  }

  function debounced() {
    var time = now(),
        isInvoking = shouldInvoke(time);

    lastArgs = arguments;
    lastThis = this;
    lastCallTime = time;

    if (isInvoking) {
      if (timerId === undefined) {
        return leadingEdge(lastCallTime);
      }
      if (maxing) {
        // Handle invocations in a tight loop.
        clearTimeout(timerId);
        timerId = setTimeout(timerExpired, wait);
        return invokeFunc(lastCallTime);
      }
    }
    if (timerId === undefined) {
      timerId = setTimeout(timerExpired, wait);
    }
    return result;
  }
  debounced.cancel = cancel;
  debounced.flush = flush;
  return debounced;
}

module.exports = debounce;


/***/ }),

/***/ "./node_modules/lodash/isObject.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/isObject.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Checks if \`value\` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of \`Object\`. (e.g. arrays, functions, objects, regexes, \`new Number(0)\`, and \`new String('')\`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is an object, else \`false\`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

module.exports = isObject;


/***/ }),

/***/ "./node_modules/lodash/isObjectLike.js":
/*!*********************************************!*\\
  !*** ./node_modules/lodash/isObjectLike.js ***!
  \\*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Checks if \`value\` is object-like. A value is object-like if it's not \`null\`
 * and has a \`typeof\` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is object-like, else \`false\`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

module.exports = isObjectLike;


/***/ }),

/***/ "./node_modules/lodash/isSymbol.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/isSymbol.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__(/*! ./_baseGetTag */ "./node_modules/lodash/_baseGetTag.js"),
    isObjectLike = __webpack_require__(/*! ./isObjectLike */ "./node_modules/lodash/isObjectLike.js");

/** \`Object#toString\` result references. */
var symbolTag = '[object Symbol]';

/**
 * Checks if \`value\` is classified as a \`Symbol\` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns \`true\` if \`value\` is a symbol, else \`false\`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag);
}

module.exports = isSymbol;


/***/ }),

/***/ "./node_modules/lodash/now.js":
/*!************************************!*\\
  !*** ./node_modules/lodash/now.js ***!
  \\************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");

/**
 * Gets the timestamp of the number of milliseconds that have elapsed since
 * the Unix epoch (1 January 1970 00:00:00 UTC).
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Date
 * @returns {number} Returns the timestamp.
 * @example
 *
 * _.defer(function(stamp) {
 *   console.log(_.now() - stamp);
 * }, _.now());
 * // => Logs the number of milliseconds it took for the deferred invocation.
 */
var now = function() {
  return root.Date.now();
};

module.exports = now;


/***/ }),

/***/ "./node_modules/lodash/toNumber.js":
/*!*****************************************!*\\
  !*** ./node_modules/lodash/toNumber.js ***!
  \\*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var baseTrim = __webpack_require__(/*! ./_baseTrim */ "./node_modules/lodash/_baseTrim.js"),
    isObject = __webpack_require__(/*! ./isObject */ "./node_modules/lodash/isObject.js"),
    isSymbol = __webpack_require__(/*! ./isSymbol */ "./node_modules/lodash/isSymbol.js");

/** Used as references for various \`Number\` constants. */
var NAN = 0 / 0;

/** Used to detect bad signed hexadecimal string values. */
var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;

/** Used to detect binary string values. */
var reIsBinary = /^0b[01]+$/i;

/** Used to detect octal string values. */
var reIsOctal = /^0o[0-7]+$/i;

/** Built-in method references without a dependency on \`root\`. */
var freeParseInt = parseInt;

/**
 * Converts \`value\` to a number.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to process.
 * @returns {number} Returns the number.
 * @example
 *
 * _.toNumber(3.2);
 * // => 3.2
 *
 * _.toNumber(Number.MIN_VALUE);
 * // => 5e-324
 *
 * _.toNumber(Infinity);
 * // => Infinity
 *
 * _.toNumber('3.2');
 * // => 3.2
 */
function toNumber(value) {
  if (typeof value == 'number') {
    return value;
  }
  if (isSymbol(value)) {
    return NAN;
  }
  if (isObject(value)) {
    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;
    value = isObject(other) ? (other + '') : other;
  }
  if (typeof value != 'string') {
    return value === 0 ? value : +value;
  }
  value = baseTrim(value);
  var isBinary = reIsBinary.test(value);
  return (isBinary || reIsOctal.test(value))
    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)
    : (reIsBadHex.test(value) ? NAN : +value);
}

module.exports = toNumber;


/***/ }),

/***/ "./node_modules/webpack/buildin/global.js":
/*!***********************************!*\\
  !*** (webpack)/buildin/global.js ***!
  \\***********************************/
/*! no static exports found */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ })

/******/ });
`,"Worker",void 0,void 0)}},"./index.js":function(o,a,c){c.r(a);var u=c("./lib/Utils.js");c.d(a,"Utils",function(){return u.Utils});var l=c("./Client.js");c.d(a,"SFrame",function(){return l.SFrame})},"./lib/Utils.js":function(o,a,c){c.r(a),c.d(a,"Utils",function(){return u});const u={toHex:function(l){return Array.prototype.map.call(l instanceof Uint8Array?l:new Uint8Array(l),f=>f.toString(16).padStart(2,"0")).join("")},fromHex:function(l){const f=[];for(let g=0;g<l.length/2;++g)f.push(parseInt(l.substring(g*2,(g+1)*2),16));return new Uint8Array(f)},equals:function(l,f){if(l.byteLength!=f.byteLength)return!1;for(let g=0;g!=l.byteLength;g++)if(l[g]!=f[g])return!1;return!0}}},"./node_modules/worker-loader/dist/runtime/inline.js":function(o,a,c){o.exports=function(u,l,f,g){var v=self||window;try{try{var b;try{b=new v.Blob([u])}catch{var S=v.BlobBuilder||v.WebKitBlobBuilder||v.MozBlobBuilder||v.MSBlobBuilder;b=new S,b.append(u),b=b.getBlob()}var C=v.URL||v.webkitURL,O=C.createObjectURL(b),A=new v[l](O,f);return C.revokeObjectURL(O),A}catch{return new v[l]("data:application/javascript,".concat(encodeURIComponent(u)),f)}}catch{if(!g)throw Error("Inline worker is not supported");return new v[l](g,f)}}}})})}).call(this,e(1))},function(t,r,e){var n=e(0),o=n(e(16));const a=e(6),c=e(301),u=e(73)(),l=e(751);let f=function(){function g(b,S){S===void 0&&(S={}),this._session=b,this.PeerConnection=S.PeerConnection||u,this._subscriberCreateQueue=new l,this._originalSendMessages={},this._tracks=[],this._subscriberPcs={},this._sendMessage=()=>{},a(this)}var v=g.prototype;return v.parseOptions=function(S){return(0,o.default)({},S,{sendMessage:(C,O)=>this.trigger("sendMessage",C,O)})},v.addTrackAddedListener=function(){this._peerConnection&&this._peerConnection.on("trackAdded",S=>{const C=S.track;this._tracks.includes(C.id)||(this._subscriberPcs[this._subscriberPcToAdd._id].push(C.id),this._tracks.push(C.id),this._subscriberPcToAdd._onTrackAdded(S))})},v.getPeerConnection=function(S,C){if(this._subscriberPcToAdd=C,this._sendMessage=S.sendMessage,this._originalSendMessages[C._id]=this._sendMessage,this._peerConnection)this._peerConnection.addOptions(S);else{this._firstSubscriberPc=C._id,this.on("sendMessage",(A,w)=>{this._sendMessage(A,w)});const O=this.parseOptions(S);this._peerConnection=new this.PeerConnection(O),this.addTrackAddedListener()}return this._subscriberPcs[C._id]=[],this._peerConnection},v.removeMessageSender=function(S){delete this._originalSendMessages[S];const C=Object.values(this._originalSendMessages);this._sendMessage=C[C.length-1]||function(){}},v.removeSubscriber=function(S,C){this._firstSubscriberPc===S&&this._peerConnection.iceRestart(),this.removeMessageSender(S),this._peerConnection.stopTransceivers(C)},v.removeFromSinglePeerConnection=function(S){this._peerConnection.generateOffer(),delete this._subscriberPcs[S],Object.keys(this._subscriberPcs).length||(this._peerConnection.disconnect(),this._peerConnection=null)},v.removeTrack=function(S,C){c(this._tracks,S.id),c(this._subscriberPcs[C]||[],S.id)},v.destroy=function(){this._subscriberPcToAdd=null,this._subscriberPcs=null,this._session=null,this._tracks=null,this._peerConnection&&(this._peerConnection.disconnect(),this._peerConnection=null)},v.addSubscriber=function(S){this._subscriberCreateQueue.add(S)},v.subscriberComplete=function(){this._subscriberCreateQueue.next()},g}();t.exports=f},function(t,r,e){let n=function(){function o(){this.queue=[],this.isAddingSubscriber=!1}var a=o.prototype;return a.add=function(u){this.isAddingSubscriber?this.queue.push(u):(this.isAddingSubscriber=!0,u())},a.next=function(){const u=this.queue.shift();u?u():this.isAddingSubscriber=!1},o}();t.exports=n},function(t,r,e){t.exports=function(o){o===void 0&&(o={});const a=o.Session||e(318)(),c=o.sessionObjects||e(21);return function(l,f,g){f==null&&(f=l,l=null),Array.isArray(f)&&f.length===1&&(f=f[0]);let v=c.sessions.get(f);return v||(v=new a(l,f,g),c.sessions.add(v)),v}}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));const c=e(754),u=e(274),l=e(3),f=e(7),g=e(10),v=e(13)(),b=e(53),S=e(74),C=e(144)(typeof window!==void 0?window:commonjsGlobal);function O(w){return u(c(w,["AV1X","AV1","VP9","rtx","red","ulpfec","H265","X-H264UC","x-ulpfecuc"]))}const A=function(){var w=(0,a.default)(o.default.mark(function V(){var k,M,W,Y,H,P,j;return o.default.wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!(typeof window>"u")){z.next=2;break}return z.abrupt("return",{videoEncoders:[],videoDecoders:[]});case 2:if(k=C.RTCPeerConnection,!(window.RTCRtpSender&&"getCapabilities"in window.RTCRtpSender)){z.next=7;break}return M=window.RTCRtpSender.getCapabilities("video").codecs.map(ae=>ae.mimeType||ae.name).map(ae=>ae.replace("video/","")),M=O(M),z.abrupt("return",{videoEncoders:M,videoDecoders:M});case 7:if(!(l.name==="Chrome"&&!("captureStream"in window.HTMLCanvasElement.prototype))){z.next=9;break}return z.abrupt("return",{videoEncoders:["VP8"],videoDecoders:["VP8"]});case 9:if(!l.isLegacyEdge){z.next=11;break}return z.abrupt("return",{videoEncoders:["H264","VP8"],videoDecoders:["H264","VP8"]});case 11:return W=window.document.createElement("canvas"),W.getContext("2d"),Y=W.captureStream(),z.prev=14,P={iceServers:[]},S()&&(P.sdpSemantics="plan-b"),H=new k(P),H.addTrack?H.addTrack(Y.getVideoTracks()[0],Y):H.addStream&&H.addStream(Y),z.next=21,H.createOffer();case 21:return j=z.sent,M=b.getCodecs(j.sdp,"video")||[],M=O(M),z.abrupt("return",{videoEncoders:M,videoDecoders:M});case 27:throw z.prev=27,z.t0=z.catch(14),v(f.UNABLE_TO_ACCESS_MEDIA_ENGINE,new Error("OT.getSupportedCodecs was not able to get the list of supported codecs"),g.UNABLE_TO_ACCESS_MEDIA_ENGINE);case 30:return z.prev=30,H.close(),z.finish(30);case 33:case"end":return z.stop()}},V,null,[[14,27,30,33]])}));return function(){return w.apply(this,arguments)}}();t.exports=A},function(t,r,e){var n=e(755),o=e(238),a=e(88),c=e(133),u=a(function(l,f){return c(l)?n(l,o(f,1,c,!0)):[]});t.exports=u},function(t,r,e){var n=e(93),o=e(94),a=e(132),c=e(34),u=e(68),l=e(95),f=200;function g(v,b,S,C){var O=-1,A=o,w=!0,V=v.length,k=[],M=b.length;if(!V)return k;S&&(b=c(b,u(S))),C?(A=a,w=!1):b.length>=f&&(A=l,w=!1,b=new n(b));e:for(;++O<V;){var W=v[O],Y=S==null?W:S(W);if(W=C||W!==0?W:0,w&&Y===Y){for(var H=M;H--;)if(b[H]===Y)continue e;k.push(W)}else A(b,Y,C)||k.push(W)}return k}t.exports=g},function(t,r,e){const n=e(314),o=n.isSupported;t.exports=o},function(t,r,e){const n=e(111);t.exports=n},function(t,r,e){const n=e(24)(),o=n.getInputMediaDevices;t.exports=function(c){o().then(u=>c(void 0,u),c)}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));t.exports=function(c){c===void 0&&(c={});const u=c.deviceHelpers||e(24)(),l=u.hasAudioOutputApiSupport,f=u.hasDevice,g=c.getAudioOutputDevices||e(329),v=c.updateSubscribersSinkId||e(331),b=e(13)(),S=e(7);return function(){var O=(0,a.default)(o.default.mark(function A(w){var V,k;return o.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(l()){W.next=2;break}throw b(S.UNSUPPORTED_BROWSER,new Error("setAudioOutputDevice is not supported in your browser."));case 2:return W.next=4,g();case 4:if(V=W.sent,k=f(V,w),k){W.next=8;break}throw b(S.INVALID_AUDIO_OUTPUT_SOURCE,new Error("The requested device is not valid."));case 8:return W.prev=8,W.next=11,v(w);case 11:W.next=16;break;case 13:throw W.prev=13,W.t0=W.catch(8),b(S.REQUESTED_DEVICE_PERMISSION_DENIED,new Error("No permission to use the requested device."));case 16:case"end":return W.stop()}},A,null,[[8,13]])}));return function(w){return O.apply(this,arguments)}}()}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));const c=e(761)(),u=e(24)(),l=u.hasAudioOutputApiSupport,f=u.getNativeMediaDevices;t.exports=()=>{if(l()){const g=f();let v=!1;g.addEventListener("devicechange",(0,a.default)(o.default.mark(function b(){return o.default.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!v){C.next=2;break}return C.abrupt("return");case 2:return v=!0,C.next=5,c();case 5:v=!1;case 6:case"end":return C.stop()}},b)})))}}},function(t,r,e){var n=e(0),o=n(e(4)),a=n(e(5));t.exports=function(c){c===void 0&&(c={});const u=c.deviceHelpers||e(24)(),l=u.getAudioOutputMediaDevices,f=u.getDefaultAudioOutputDeviceId,g=u.hasDevice,v=c.currentAudioOutputDevice||e(108),b=v.getCurrentAudioOutputDeviceId,S=v.setCurrentAudioOutputDeviceId,C=c.updateSubscribersSinkId||e(331),O=c.logging||e(2)("currentAudioOutputDevice");return function(){var w=(0,a.default)(o.default.mark(function V(){var k,M,W;return o.default.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,l();case 2:if(k=H.sent,k.length!==0){H.next=6;break}return S(""),H.abrupt("return");case 6:if(M=g(k,b()),!M){H.next=9;break}return H.abrupt("return");case 9:return W=f(k),S(W),H.prev=11,H.next=14,C(W);case 14:H.next=19;break;case 16:H.prev=16,H.t0=H.catch(11),O.debug("Failed to set the default audio output device.",H.t0);case 19:case"end":return H.stop()}},V,null,[[11,16]])}));return function(){return w.apply(this,arguments)}}()}}])})})(opentok);const OT$1=getDefaultExportFromCjs(opentokExports);function _typeof(t){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(t)}function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,r,e){return r&&_defineProperties(t.prototype,r),e&&_defineProperties(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function _extends(){return _extends=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},_extends.apply(this,arguments)}function _inherits(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(t)}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n},_setPrototypeOf(t,r)}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _assertThisInitialized(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _createSuper(t){var r=_isNativeReflectConstruct();return function(){var n=_getPrototypeOf(t),o;if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(n,arguments,a)}else o=n.apply(this,arguments);return _possibleConstructorReturn(this,o)}}var Channel=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"listenForWhisper",value:function(e,n){return this.listen(".client-"+e,n)}},{key:"notification",value:function(e){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",e)}},{key:"stopListeningForWhisper",value:function(e,n){return this.stopListening(".client-"+e,n)}}]),t}(),EventFormatter=function(){function t(r){_classCallCheck(this,t),this.setNamespace(r)}return _createClass(t,[{key:"format",value:function(e){return e.charAt(0)==="."||e.charAt(0)==="\\"?e.substr(1):(this.namespace&&(e=this.namespace+"."+e),e.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(e){this.namespace=e}}]),t}(),PusherChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(n,o,a){var c;return _classCallCheck(this,e),c=r.call(this),c.name=o,c.pusher=n,c.options=a,c.eventFormatter=new EventFormatter(c.options.namespace),c.subscribe(),c}return _createClass(e,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(o,a){return this.on(this.eventFormatter.format(o),a),this}},{key:"listenToAll",value:function(o){var a=this;return this.subscription.bind_global(function(c,u){if(!c.startsWith("pusher:")){var l=a.options.namespace.replace(/\./g,"\\"),f=c.startsWith(l)?c.substring(l.length+1):"."+c;o(f,u)}}),this}},{key:"stopListening",value:function(o,a){return a?this.subscription.unbind(this.eventFormatter.format(o),a):this.subscription.unbind(this.eventFormatter.format(o)),this}},{key:"stopListeningToAll",value:function(o){return o?this.subscription.unbind_global(o):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(o){return this.on("pusher:subscription_succeeded",function(){o()}),this}},{key:"error",value:function(o){return this.on("pusher:subscription_error",function(a){o(a)}),this}},{key:"on",value:function(o,a){return this.subscription.bind(o,a),this}}]),e}(Channel),PusherPrivateChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"whisper",value:function(o,a){return this.pusher.channels.channels[this.name].trigger("client-".concat(o),a),this}}]),e}(PusherChannel),PusherEncryptedPrivateChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"whisper",value:function(o,a){return this.pusher.channels.channels[this.name].trigger("client-".concat(o),a),this}}]),e}(PusherChannel),PusherPresenceChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"here",value:function(o){return this.on("pusher:subscription_succeeded",function(a){o(Object.keys(a.members).map(function(c){return a.members[c]}))}),this}},{key:"joining",value:function(o){return this.on("pusher:member_added",function(a){o(a.info)}),this}},{key:"leaving",value:function(o){return this.on("pusher:member_removed",function(a){o(a.info)}),this}},{key:"whisper",value:function(o,a){return this.pusher.channels.channels[this.name].trigger("client-".concat(o),a),this}}]),e}(PusherChannel),SocketIoChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(n,o,a){var c;return _classCallCheck(this,e),c=r.call(this),c.events={},c.listeners={},c.name=o,c.socket=n,c.options=a,c.eventFormatter=new EventFormatter(c.options.namespace),c.subscribe(),c}return _createClass(e,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(o,a){return this.on(this.eventFormatter.format(o),a),this}},{key:"stopListening",value:function(o,a){return this.unbindEvent(this.eventFormatter.format(o),a),this}},{key:"subscribed",value:function(o){return this.on("connect",function(a){o(a)}),this}},{key:"error",value:function(o){return this}},{key:"on",value:function(o,a){var c=this;return this.listeners[o]=this.listeners[o]||[],this.events[o]||(this.events[o]=function(u,l){c.name===u&&c.listeners[o]&&c.listeners[o].forEach(function(f){return f(l)})},this.socket.on(o,this.events[o])),this.listeners[o].push(a),this}},{key:"unbind",value:function(){var o=this;Object.keys(this.events).forEach(function(a){o.unbindEvent(a)})}},{key:"unbindEvent",value:function(o,a){this.listeners[o]=this.listeners[o]||[],a&&(this.listeners[o]=this.listeners[o].filter(function(c){return c!==a})),(!a||this.listeners[o].length===0)&&(this.events[o]&&(this.socket.removeListener(o,this.events[o]),delete this.events[o]),delete this.listeners[o])}}]),e}(Channel),SocketIoPrivateChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"whisper",value:function(o,a){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(o),data:a}),this}}]),e}(SocketIoChannel),SocketIoPresenceChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"here",value:function(o){return this.on("presence:subscribed",function(a){o(a.map(function(c){return c.user_info}))}),this}},{key:"joining",value:function(o){return this.on("presence:joining",function(a){return o(a.user_info)}),this}},{key:"leaving",value:function(o){return this.on("presence:leaving",function(a){return o(a.user_info)}),this}}]),e}(SocketIoPrivateChannel),NullChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(o,a){return this}},{key:"listenToAll",value:function(o){return this}},{key:"stopListening",value:function(o,a){return this}},{key:"subscribed",value:function(o){return this}},{key:"error",value:function(o){return this}},{key:"on",value:function(o,a){return this}}]),e}(Channel),NullPrivateChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"whisper",value:function(o,a){return this}}]),e}(NullChannel),NullPresenceChannel=function(t){_inherits(e,t);var r=_createSuper(e);function e(){return _classCallCheck(this,e),r.apply(this,arguments)}return _createClass(e,[{key:"here",value:function(o){return this}},{key:"joining",value:function(o){return this}},{key:"leaving",value:function(o){return this}},{key:"whisper",value:function(o,a){return this}}]),e}(NullChannel),Connector=function(){function t(r){_classCallCheck(this,t),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(r),this.connect()}return _createClass(t,[{key:"setOptions",value:function(e){this.options=_extends(this._defaultOptions,e);var n=this.csrfToken();return n&&(this.options.auth.headers["X-CSRF-TOKEN"]=n,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=n),n=this.options.bearerToken,n&&(this.options.auth.headers.Authorization="Bearer "+n,this.options.userAuthentication.headers.Authorization="Bearer "+n),e}},{key:"csrfToken",value:function(){var e;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(e=document.querySelector('meta[name="csrf-token"]'))?e.getAttribute("content"):null}}]),t}(),PusherConnector=function(t){_inherits(e,t);var r=_createSuper(e);function e(){var n;return _classCallCheck(this,e),n=r.apply(this,arguments),n.channels={},n}return _createClass(e,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(o,a,c){return this.channel(o).listen(a,c)}},{key:"channel",value:function(o){return this.channels[o]||(this.channels[o]=new PusherChannel(this.pusher,o,this.options)),this.channels[o]}},{key:"privateChannel",value:function(o){return this.channels["private-"+o]||(this.channels["private-"+o]=new PusherPrivateChannel(this.pusher,"private-"+o,this.options)),this.channels["private-"+o]}},{key:"encryptedPrivateChannel",value:function(o){return this.channels["private-encrypted-"+o]||(this.channels["private-encrypted-"+o]=new PusherEncryptedPrivateChannel(this.pusher,"private-encrypted-"+o,this.options)),this.channels["private-encrypted-"+o]}},{key:"presenceChannel",value:function(o){return this.channels["presence-"+o]||(this.channels["presence-"+o]=new PusherPresenceChannel(this.pusher,"presence-"+o,this.options)),this.channels["presence-"+o]}},{key:"leave",value:function(o){var a=this,c=[o,"private-"+o,"private-encrypted-"+o,"presence-"+o];c.forEach(function(u,l){a.leaveChannel(u)})}},{key:"leaveChannel",value:function(o){this.channels[o]&&(this.channels[o].unsubscribe(),delete this.channels[o])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),e}(Connector),SocketIoConnector=function(t){_inherits(e,t);var r=_createSuper(e);function e(){var n;return _classCallCheck(this,e),n=r.apply(this,arguments),n.channels={},n}return _createClass(e,[{key:"connect",value:function(){var o=this,a=this.getSocketIO();return this.socket=a(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(o.channels).forEach(function(c){c.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(o,a,c){return this.channel(o).listen(a,c)}},{key:"channel",value:function(o){return this.channels[o]||(this.channels[o]=new SocketIoChannel(this.socket,o,this.options)),this.channels[o]}},{key:"privateChannel",value:function(o){return this.channels["private-"+o]||(this.channels["private-"+o]=new SocketIoPrivateChannel(this.socket,"private-"+o,this.options)),this.channels["private-"+o]}},{key:"presenceChannel",value:function(o){return this.channels["presence-"+o]||(this.channels["presence-"+o]=new SocketIoPresenceChannel(this.socket,"presence-"+o,this.options)),this.channels["presence-"+o]}},{key:"leave",value:function(o){var a=this,c=[o,"private-"+o,"presence-"+o];c.forEach(function(u){a.leaveChannel(u)})}},{key:"leaveChannel",value:function(o){this.channels[o]&&(this.channels[o].unsubscribe(),delete this.channels[o])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),e}(Connector),NullConnector=function(t){_inherits(e,t);var r=_createSuper(e);function e(){var n;return _classCallCheck(this,e),n=r.apply(this,arguments),n.channels={},n}return _createClass(e,[{key:"connect",value:function(){}},{key:"listen",value:function(o,a,c){return new NullChannel}},{key:"channel",value:function(o){return new NullChannel}},{key:"privateChannel",value:function(o){return new NullPrivateChannel}},{key:"encryptedPrivateChannel",value:function(o){return new NullPrivateChannel}},{key:"presenceChannel",value:function(o){return new NullPresenceChannel}},{key:"leave",value:function(o){}},{key:"leaveChannel",value:function(o){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),e}(Connector),Echo=function(){function t(r){_classCallCheck(this,t),this.options=r,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return _createClass(t,[{key:"channel",value:function(e){return this.connector.channel(e)}},{key:"connect",value:function(){this.options.broadcaster=="pusher"?this.connector=new PusherConnector(this.options):this.options.broadcaster=="socket.io"?this.connector=new SocketIoConnector(this.options):this.options.broadcaster=="null"?this.connector=new NullConnector(this.options):typeof this.options.broadcaster=="function"&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(e){return this.connector.presenceChannel(e)}},{key:"leave",value:function(e){this.connector.leave(e)}},{key:"leaveChannel",value:function(e){this.connector.leaveChannel(e)}},{key:"leaveAllChannels",value:function(){for(var e in this.connector.channels)this.leaveChannel(e)}},{key:"listen",value:function(e,n,o){return this.connector.listen(e,n,o)}},{key:"private",value:function(e){return this.connector.privateChannel(e)}},{key:"encryptedPrivate",value:function(e){return this.connector.encryptedPrivateChannel(e)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":_typeof(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var e=this;Vue.http.interceptors.push(function(n,o){e.socketId()&&n.headers.set("X-Socket-ID",e.socketId()),o()})}},{key:"registerAxiosRequestInterceptor",value:function(){var e=this;axios.interceptors.request.use(function(n){return e.socketId()&&(n.headers["X-Socket-Id"]=e.socketId()),n})}},{key:"registerjQueryAjaxSetup",value:function(){var e=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(n,o,a){e.socketId()&&a.setRequestHeader("X-Socket-Id",e.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var e=this;document.addEventListener("turbo:before-fetch-request",function(n){n.detail.fetchOptions.headers["X-Socket-Id"]=e.socketId()})}}]),t}();function render$j(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})])}function render$i(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"})])}function render$h(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 011.037-.443 48.282 48.282 0 005.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})])}function render$g(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})])}function render$f(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5"})])}function render$e(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"})])}function render$d(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function render$c(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})])}function render$b(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 20.25h12m-7.5-3v3m3-3v3m-10.125-3h17.25c.621 0 1.125-.504 1.125-1.125V4.875c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125z"})])}function render$a(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})])}function render$9(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M12 18.75H4.5a2.25 2.25 0 01-2.25-2.25V9m12.841 9.091L16.5 19.5m-1.409-1.409c.407-.407.659-.97.659-1.591v-9a2.25 2.25 0 00-2.25-2.25h-9c-.621 0-1.184.252-1.591.659m12.182 12.182L2.909 5.909M1.5 4.5l1.409 1.409"})])}function render$8(t,r){return openBlock(),createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[createBaseVNode("path",{"stroke-linecap":"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"})])}const _hoisted_1$g={class:"relative aspect-video rounded-lg bg-slate-400"},_hoisted_2$b={key:0,class:"absolute right-0 inline-flex items-center cursor-pointer m-1.5"},_hoisted_3$9=createBaseVNode("div",{class:"w-8 h-4 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:left-[0px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-red-600"},null,-1),_sfc_main$i={__name:"PreviewStream",props:{person:{type:Object,required:!0},fake:{type:Boolean,default:!1}},setup(t){const r=t,e=useStore(),n=ref(null);r.fake||(e.vonage.localAudio=r.person.stream.hasAudio,r.person.local&&r.person.publisher.session.on("streamPropertyChanged",c=>{console.log("StreamPropertyChangedEvent"),c.changedProperty==="hasAudio"&&(e.vonage.localAudio=c.newValue)}));const o=()=>{e.vonage.focusedSpeaker===r.person.stream.id?(e.vonage.focusedSpeaker=null,e.session.signal({type:"focused-speaker",data:""}),e.vonage.layout==="focused-speaker"&&(e.vonage.layout="default",e.session.signal({type:"change-layout",data:"default"}))):(e.vonage.focusedSpeaker=r.person.stream.id,e.session.signal({type:"focused-speaker",data:r.person.stream.id}))},a=()=>{r.person.stream.videoType==="screen"?(console.log(r.person.onCamera),r.person.onCamera?(console.log(r.person.stream.id),e.vonage.activeScreen=r.person.stream.id,e.session.signal({type:"screen-sharing",data:r.person.stream.id})):(e.vonage.activeScreen=null,e.session.signal({type:"screen-sharing",data:""}))):r.person.stream.videoType==="camera"&&e.session.signal({type:r.person.onCamera?"on-camera":"off-camera",data:r.person.stream.id})};return onMounted(()=>{r.fake||n.value.appendChild(r.person.element)}),onUpdated(()=>{r.fake||n.value.appendChild(r.person.element)}),(c,u)=>(openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",{class:"absolute w-full h-6 top-0 rounded-b-lg opacity-60",ref_key:"preview",ref:n},null,512),createBaseVNode("div",{class:"absolute m-1 cursor-pointer",onClick:u[0]||(u[0]=l=>c.$emit("toggle-audio"))},[createVNode(unref(render$e),{class:normalizeClass(["w-5 h-5",unref(e).vonage.localAudio?"text-white":"text-red-700"])},null,8,["class"])]),unref(e).mode==="host"?(openBlock(),createElementBlock("label",_hoisted_2$b,[withDirectives(createBaseVNode("input",{type:"checkbox","onUpdate:modelValue":u[1]||(u[1]=l=>t.person.onCamera=l),class:"sr-only peer",onChange:a},null,544),[[vModelCheckbox,t.person.onCamera]]),_hoisted_3$9])):createCommentVNode("",!0),unref(e).mode==="host"?(openBlock(),createElementBlock("label",{key:1,class:"absolute bottom-7 right-0 inline-flex items-center cursor-pointer mr-1.5",onClick:o},[createVNode(unref(render$i),{class:normalizeClass(["w-5 h-5",unref(e).vonage.focusedSpeaker===t.person.stream.id?"text-yellow-300":"text-slate-500"])},null,8,["class"])])):createCommentVNode("",!0),t.fake?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["absolute w-full h-6 bottom-0 bg-red-200 text-slate-800 text-sm text-left font-bold px-3 rounded-b-lg",t.person.local?"cursor-pointer":""]),onClick:u[2]||(u[2]=l=>t.person.local&&c.$emit("name-change"))},toDisplayString(t.person.stream.name+(t.person.stream.videoType!=="camera"?"'s Share":"")),3))]))}},_hoisted_1$f={class:"flex flex-col bg-slate-900 p-3 gap-2 shrink min-w-[205px] w-[205px]"},_hoisted_2$a={class:"flex flex-row bg-slate-700 rounded-lg text-white p-3 cursor-pointer"},_sfc_main$h={__name:"LeftSide",props:{fake:{type:Boolean,default:!1}},setup(t){const r=useStore();return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$f,[createBaseVNode("div",_hoisted_2$a,[createVNode(unref(render$a),{class:"h-6 w-6 mr-1"}),createTextVNode(" Invitar huspedes ")]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).streams,o=>(openBlock(),createBlock(_sfc_main$i,{person:o,onNameChange:n[0]||(n[0]=a=>unref(r).setName(e.event.target.value)),fake:t.fake},null,8,["person","fake"]))),256))]))}},_hoisted_1$e={class:"flex flex-row text-white"},_hoisted_2$9={class:"bg-black p-2 text-center"},_sfc_main$g={__name:"DefaultName",props:{name:{type:String,required:!0}},setup(t){const r=useStore();return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$e,[createBaseVNode("div",{class:"w-2",style:normalizeStyle({background:unref(r).color})},null,4),createBaseVNode("div",_hoisted_2$9,toDisplayString(t.name),1)]))}},_sfc_main$f={__name:"BlockName",props:{name:{type:String,required:!0}},setup(t){const r=useStore();return(e,n)=>(openBlock(),createElementBlock("div",{class:"p-2 min-w-[5rem] text-center text-white",style:normalizeStyle({background:unref(r).color})},toDisplayString(t.name),5))}},_sfc_main$e={__name:"RoundedName",props:{name:{type:String,required:!0}},setup(t){const r=useStore();return(e,n)=>(openBlock(),createElementBlock("div",{class:"bg-black p-2 rounded-full border-b-2 border-r-2 text-white text-center",style:normalizeStyle({borderColor:unref(r).color})},toDisplayString(t.name),5))}},_sfc_main$d={__name:"Stream",props:{person:{type:Object,required:!0},width:{type:Number,default:30},fake:{type:Boolean,default:!1}},setup(t){const r=t,e=useStore(),n=ref(null),o=computed(()=>e.streams.filter(u=>u.onCamera&&u.stream.videoType==="camera")),a=computed(()=>{switch(e.vonage.layout){case"default":if(o.value.length>=5)return 31;if(o.value.length>=2)return 48;if(o.value.length==1)return 100;break;case"vertical":return 100/e.streams.length;case"focused-speaker":case"vertical-sharing":return 100}}),c=computed(()=>{switch(e.vonage.layout){case"default":if(o.value.length>=5)return"w-[31%]";if(o.value.length>=2)return"w-[48%]";break;case"focused-speaker":return"";case"vertical-sharing":return"";case"horizontal-sharing":return""}});return onMounted(()=>{if(!r.fake){const u=document.createElement("video");u.srcObject=r.person.element.srcObject.clone(),u.autoplay=!0,u.controls=!1,u.muted=!1,n.value.appendChild(u)}}),(u,l)=>(openBlock(),createElementBlock("div",{ref_key:"stream",ref:n,class:normalizeClass(["relative",t.fake?"aspect-video w-full bg-pink-900":"",unref(c)]),style:normalizeStyle({width:`${unref(a)}%`})},[unref(e).buttonTheme=="default"?(openBlock(),createBlock(_sfc_main$g,{key:0,name:t.person.stream.name,class:"absolute bottom-2"},null,8,["name"])):createCommentVNode("",!0),unref(e).buttonTheme=="block"?(openBlock(),createBlock(_sfc_main$f,{key:1,name:t.person.stream.name,class:"absolute bottom-2"},null,8,["name"])):createCommentVNode("",!0),unref(e).buttonTheme=="rounded"?(openBlock(),createBlock(_sfc_main$e,{key:2,name:t.person.stream.name,class:"absolute bottom-2 left-2"},null,8,["name"])):createCommentVNode("",!0)],6))}},_sfc_main$c={__name:"Streams",props:{fake:{type:Boolean,default:!1}},setup(t){const r=t,e=useStore(),n=computed(()=>e.streams.filter(f=>{if(!f.onCamera)return!1;if(f.stream){if(e.vonage.layout==="focused-speaker"&&e.vonage.focusedSpeaker===f.stream.id)return!1;if(f.stream.videoType==="camera"&&f.stream.videoType!=="screen")return!0}else if(r.fake)return!0;return!1})),o=computed(()=>e.streams.find(f=>f.stream.id===e.vonage.focusedSpeaker)),a=computed(()=>e.streams.find(f=>f.stream.id===e.vonage.activeScreen)),c=()=>{switch(e.vonage.layout){case"default":return"";case"focused-speaker":return"flex flex-row";case"full-screen":return"";case"vertical-sharing":return"flex flex-row"}},u=()=>{switch(e.vonage.layout){case"default":return"flex flex-row flex-wrap gap-x-4 justify-center items-center h-full";case"focused-speaker":return"flex flex-col gap-2 w-[14%] p-2";case"full-screen":return"";case"vertical-sharing":return"flex flex-col gap-2 w-[14%] p-2"}},l=()=>{switch(e.vonage.layout){case"horizontal-sharing":return"h-[83%]";case"focused-speaker":case"vertical-sharing":return"w-[85%]";case"full-screen":return"p-2"}};return(f,g)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["w-full h-full",c()])},[unref(e).vonage.layout!=="full-screen"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["",u()])},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(n),v=>(openBlock(),createBlock(_sfc_main$d,{key:v.stream.id,person:v,fake:t.fake},null,8,["person","fake"]))),128))],2)):createCommentVNode("",!0),unref(e).vonage.layout==="focused-speaker"&&unref(e).vonage.focusedSpeaker?(openBlock(),createElementBlock("div",{key:1,id:"focused-speaker",class:normalizeClass(["flex flex-col justify-center aspect-video",l()])},[createVNode(_sfc_main$d,{person:unref(o),fake:t.fake},null,8,["person","fake"])],2)):createCommentVNode("",!0),unref(e).vonage.activeScreen&&["full-screen","vertical-sharing"].includes(unref(e).vonage.layout)?(openBlock(),createElementBlock("div",{key:2,id:"screen-sharing",class:normalizeClass(["flex flex-col justify-center aspect-video",l()])},[createVNode(_sfc_main$d,{person:unref(a),fake:t.fake},null,8,["person","fake"])],2)):createCommentVNode("",!0)],2))}},_hoisted_1$d={key:0},_sfc_main$b={__name:"RoundButton",props:{name:{type:String},active:{type:Boolean,default:!0},color:{type:String,default:"bg-red-700"}},setup(t){return(r,e)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["relative flex flex-col w-14 h-14 rounded-full text-gray-300 justify-center items-center cursor-pointer",t.active?"bg-slate-700":"bg-red-700 "+t.color])},[t.name?(openBlock(),createElementBlock("div",_hoisted_1$d,toDisplayString(t.name),1)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass([t.active?"":"opacity-60"])},[renderSlot(r.$slots,"default")],2)],2))}},Banner_vue_vue_type_style_index_0_scoped_63c9a42b_lang="",_export_sfc=(t,r)=>{const e=t.__vccOpts||t;for(const[n,o]of r)e[n]=o;return e},_hoisted_1$c={key:0,class:"flex flex-col rounded-xl max-w-[85%]"},_hoisted_2$8={class:"rounded-br-xl bg-slate-800 px-10 py-2 text-gray-300 text-lg"},_hoisted_3$8={class:"marquee text-white text-xl justify-center translate-x-full flex flex-row"},_hoisted_4$7={class:"min-w-full"},_sfc_main$a={__name:"Banner",props:{banner:{type:Object,required:!0}},setup(t){const r=useStore();return(e,n)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["absolute bottom-0 w-full",t.banner.type==="box"?"mb-6":""])},[t.banner.type=="box"?(openBlock(),createElementBlock("div",_hoisted_1$c,[createBaseVNode("div",{class:"rounded-tr-xl px-8 py-2 text-white text-2xl font-bold",style:normalizeStyle({backgroundColor:unref(r).color})},toDisplayString(t.banner.title),5),createBaseVNode("div",_hoisted_2$8,toDisplayString(t.banner.text),1)])):createCommentVNode("",!0),t.banner.type=="ticker"?(openBlock(),createElementBlock("div",{key:1,class:"overflow-hidden py-2",style:normalizeStyle({backgroundColor:unref(r).color})},[createBaseVNode("div",_hoisted_3$8,[(openBlock(),createElementBlock(Fragment,null,renderList(10,o=>createBaseVNode("span",_hoisted_4$7,toDisplayString(t.banner.title),1)),64))])],4)):createCommentVNode("",!0)],2))}},Banner=_export_sfc(_sfc_main$a,[["__scopeId","data-v-63c9a42b"]]),Banners_vue_vue_type_style_index_0_lang="",_hoisted_1$b={class:"relative"},_sfc_main$9={__name:"Banners",setup(t){const r=useStore();return(e,n)=>(openBlock(),createElementBlock("div",_hoisted_1$b,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).banners,o=>(openBlock(),createBlock(Transition,null,{default:withCtx(()=>[withDirectives(createVNode(Banner,{banner:o},null,8,["banner"]),[[vShow,o.shown]])]),_:2},1024))),256))]))}},_hoisted_1$a={class:"relative grow p-4 flex flex-col w-full h-full"},_hoisted_2$7={class:"flex flex-row pb-4 text-white"},_hoisted_3$7={class:"text-3xl"},_hoisted_4$6=createBaseVNode("div",{class:"grow"},null,-1),_hoisted_5$6={class:"flex flex-row gap-2"},_hoisted_6$5={key:0,class:"flex flex-row bg-gray-700 p-2 rounded-lg cursor-pointer"},_hoisted_7$5={class:"relative aspect-video bg-slate-700 rounded-lg"},_hoisted_8$5={key:0,class:"absolute top-0 left-0"},_hoisted_9$4=["src"],_hoisted_10$3={class:"absolute top-0 left-0 w-full h-full"},_hoisted_11$2={key:1,class:"absolute top-0 left-0"},_hoisted_12$2=["src"],_hoisted_13$2={key:2,class:"absolute top-4 left-4"},_hoisted_14$2=["src"],_hoisted_15$2={class:"absolute bottom-0 w-full"},_hoisted_16$2={key:0,class:"flex flex-row mt-4 justify-center gap-4"},_hoisted_17$1={class:"absolute bottom-0 right-5 z-50"},_hoisted_18$1={class:"bg-slate-600 rounded border border-white p-2"},_hoisted_19$1={class:"text-white text-lg mb-3"},_hoisted_20$1={class:"flex flex-row italic w-full mb-1"},_hoisted_21$1=["onClick"],_hoisted_22$1={class:"text-slate-300"},_hoisted_23$1={class:"text-slate-100 ml-1"},_hoisted_24$1=createBaseVNode("div",{class:"grow min-w-[4rem]"},null,-1),_hoisted_25$1={class:"text-md text-blue-200"},_sfc_main$8={__name:"Middle",props:{fake:{type:Boolean,default:!1}},setup(t){const r=t,e=useStore(),n=useAuth(),o=()=>{fake?e.vonage.localAudio=!e.vonage.localAudio:r.person.local&&r.person.publisher.publishAudio(!e.vonage.localAudio)},a=()=>{console.log("video: "+!0),fake.value||e.vonage.publisher.publishVideo(!0),e.vonage.localVideo=!0},c=()=>{console.log("video: "+!1),fake.value||e.vonage.publisher.publishVideo(!1),e.vonage.localVideo=!1},u=async()=>{OT.checkScreenSharingCapability(function(v){!v.supported||v.extensionRegistered===!1||v.extensionInstalled===!1||(e.vonage.screenPublisher=OT.initPublisher(null,{videoSource:"screen",insertDefaultUI:!1},function(b){b||session.publish(e.vonage.screenPublisher,function(S){S||(e.vonage.screenSharing=!0,console.log("Screen sharing published"))})}).on({videoElementCreated:b=>{localStream.value={element:b.element}},streamCreated:b=>{console.log("Local screen stream"),localStream.value.stream=b.stream,localStream.value.publisher=b.target,e.vonage.screenSharing=!0,e.streams.push({...localStream.value,local:!0,onCamera:!1})}}),e.vonage.screenPublisher.on({streamDestroyed:b=>{console.log("Local screen stopped"),e.streams=e.streams.filter(S=>S.stream.id!==b.stream.id),e.vonage.screenSharing=!1,e.vonage.activeScreen=null}}))})},l=()=>{e.vonage.screenSharing=!1,e.vonage.activeScreen=null,e.vonage.screenPublisher.destroy()},f=(v,b=!1)=>{switch(v){case"default":e.vonage.layout="default",b||e.session.signal({type:"change-layout",data:"default"});break;case"focused-speaker":e.vonage.focusedSpeaker===null&&(e.vonage.focusedSpeaker=e.streams[0].stream.id,b||e.session.signal({type:"focused-speaker",data:e.vonage.focusedSpeaker})),e.streams.filter(S=>S.stream.videoType==="camera").length===1?(e.vonage.layout="default",b||e.session.signal({type:"change-layout",data:"default"})):(e.vonage.layout="focused-speaker",b||(e.session.signal({type:"focused-speaker",data:e.vonage.focusedSpeaker}),e.session.signal({type:"change-layout",data:"focused-speaker"})));break;case"vertical-sharing":e.vonage.activeScreen?(e.vonage.layout="vertical-sharing",b||e.session.signal({type:"change-layout",data:"vertical-sharing"})):(e.vonage.layout="default",b||e.session.signal({type:"change-layout",data:"default"}));break;case"full-screen":e.vonage.activeScreen?(e.vonage.layout="full-screen",b||e.session.signal({type:"change-layout",data:"full-screen"})):(e.vonage.layout="default",b||e.session.signal({type:"change-layout",data:"default"}));break}},g=v=>{e.questions[0].options.filter(b=>b.text===v)[0].selected+=1,window.Echo.private(`event.${n.user().event_id}`).whisper("poll.vote",{text:v})};return(v,b)=>(openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$7,toDisplayString(unref(e).eventName??"Titulo Desconocido"),1),_hoisted_4$6,createBaseVNode("div",_hoisted_5$6,[unref(e).mode==="host"?(openBlock(),createElementBlock("div",_hoisted_6$5,[createVNode(unref(render$g),{class:"w-6 h-6 mr-1"}),createTextVNode(" DESTINO ")])):createCommentVNode("",!0),unref(e).onAir&&unref(e).mode==="host"?(openBlock(),createElementBlock("div",{key:1,class:"flex flex-row bg-red-700 p-2 rounded-lg cursor-pointer w-36",onClick:b[0]||(b[0]=S=>unref(e).onAir=!1)},[createVNode(unref(render$9),{class:"w-6 h-6 mr-1"}),createTextVNode(" TERMINAR ")])):!unref(e).onAir&&unref(e).mode==="host"?(openBlock(),createElementBlock("div",{key:2,class:"flex flex-row bg-green-600 p-2 rounded-lg cursor-pointer w-36",onClick:b[1]||(b[1]=S=>unref(e).onAir=!0)},[createVNode(unref(render$8),{class:"w-6 h-6 mr-1"}),createTextVNode(" COMENZAR ")])):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_7$5,[unref(e).mode!=="participant"?(openBlock(),createElementBlock(Fragment,{key:0},[unref(e).bg?(openBlock(),createElementBlock("div",_hoisted_8$5,[createBaseVNode("img",{src:`/${unref(e).bg}`,class:"object-contain"},null,8,_hoisted_9$4)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10$3,[createVNode(_sfc_main$c,{onNameChange:b[2]||(b[2]=S=>v.$emit("name-change")),fake:t.fake},null,8,["fake"])]),unref(e).overlay?(openBlock(),createElementBlock("div",_hoisted_11$2,[createBaseVNode("img",{src:`/${unref(e).overlay}`,class:"object-contain"},null,8,_hoisted_12$2)])):createCommentVNode("",!0),unref(e).logo?(openBlock(),createElementBlock("div",_hoisted_13$2,[createBaseVNode("img",{src:`/${unref(e).logo}`},null,8,_hoisted_14$2)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_15$2,[createVNode(_sfc_main$9)])],64)):createCommentVNode("",!0)]),unref(e).mode!=="participant"?(openBlock(),createElementBlock("div",_hoisted_16$2,[createVNode(_sfc_main$b,{active:unref(e).vonage.localAudio,onClick:o},{default:withCtx(()=>[createVNode(unref(render$e),{class:"w-6 h-6"})]),_:1},8,["active"]),unref(e).vonage.localVideo?(openBlock(),createBlock(_sfc_main$b,{key:1,active:!0,onClick:c},{default:withCtx(()=>[createVNode(unref(render$8),{class:"w-6 h-6"})]),_:1})):(openBlock(),createBlock(_sfc_main$b,{key:0,active:!1,onClick:a},{default:withCtx(()=>[createVNode(unref(render$8),{class:"w-6 h-6"})]),_:1})),unref(e).vonage.screenSharing?(openBlock(),createBlock(_sfc_main$b,{key:2,active:!1,onClick:l,color:"bg-green-700",class:"mr-10"},{default:withCtx(()=>[createVNode(unref(render$b),{class:"w-6 h-6"})]),_:1})):(openBlock(),createBlock(_sfc_main$b,{key:3,active:!0,onClick:u,class:"mr-10"},{default:withCtx(()=>[createVNode(unref(render$b),{class:"w-6 h-6"})]),_:1})),unref(e).mode==="host"?(openBlock(),createElementBlock(Fragment,{key:4},[createVNode(_sfc_main$b,{onClick:b[3]||(b[3]=S=>f("default"))},{default:withCtx(()=>[createTextVNode("1")]),_:1}),createVNode(_sfc_main$b,{onClick:b[4]||(b[4]=S=>f("focused-speaker"))},{default:withCtx(()=>[createTextVNode("2")]),_:1}),createVNode(_sfc_main$b,{onClick:b[5]||(b[5]=S=>f("vertical-sharing"))},{default:withCtx(()=>[createTextVNode("3")]),_:1}),createVNode(_sfc_main$b,{onClick:b[6]||(b[6]=S=>f("full-screen"))},{default:withCtx(()=>[createTextVNode("4")]),_:1})],64)):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_17$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).questions.filter(S=>S.status==="active"),S=>(openBlock(),createElementBlock("div",_hoisted_18$1,[createBaseVNode("div",_hoisted_19$1,toDisplayString(S.title),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(S.options,(C,O)=>(openBlock(),createElementBlock("div",_hoisted_20$1,[createBaseVNode("div",{class:"select-none cursor-pointer bg-slate-500 p-1 px-3 rounded border border-slate-800",onClick:A=>g(C.text)},[createBaseVNode("span",_hoisted_22$1,toDisplayString(O+1)+".",1),createBaseVNode("span",_hoisted_23$1,toDisplayString(C.text),1)],8,_hoisted_21$1),_hoisted_24$1,createBaseVNode("div",_hoisted_25$1,toDisplayString(C.selected),1)]))),256))]))),256))])]))}},_sfc_main$7={name:"line-scale",props:{color:{type:String,default:"#CCC"},size:{type:String,default:"40px"},duration:{type:String,default:"0.6s"}}},_hoisted_1$9=["width","height"],_hoisted_2$6=["fill"],_hoisted_3$6=["dur"],_hoisted_4$5=["dur"],_hoisted_5$5=["fill"],_hoisted_6$4=["dur"],_hoisted_7$4=["dur"],_hoisted_8$4=["fill"],_hoisted_9$3=["dur"],_hoisted_10$2=["dur"];function _sfc_render$2(t,r,e,n,o,a){return openBlock(),createElementBlock("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:e.size,height:e.size,viewBox:"0 0 24 30",style:{"enable-background":"new 0 0 50 50"},"xml:space":"preserve"},[createBaseVNode("rect",{x:"0",y:"13",width:"4",height:"5",fill:e.color},[createBaseVNode("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0s",dur:e.duration,repeatCount:"indefinite"},null,8,_hoisted_3$6),createBaseVNode("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0s",dur:e.duration,repeatCount:"indefinite"},null,8,_hoisted_4$5)],8,_hoisted_2$6),createBaseVNode("rect",{x:"10",y:"13",width:"4",height:"5",fill:e.color},[createBaseVNode("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.15s",dur:e.duration,repeatCount:"indefinite"},null,8,_hoisted_6$4),createBaseVNode("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.15s",dur:e.duration,repeatCount:"indefinite"},null,8,_hoisted_7$4)],8,_hoisted_5$5),createBaseVNode("rect",{x:"20",y:"13",width:"4",height:"5",fill:e.color},[createBaseVNode("animate",{attributeName:"height",attributeType:"XML",values:"5;21;5",begin:"0.3s",dur:e.duration,repeatCount:"indefinite"},null,8,_hoisted_9$3),createBaseVNode("animate",{attributeName:"y",attributeType:"XML",values:"13; 5; 13",begin:"0.3s",dur:e.duration,repeatCount:"indefinite"},null,8,_hoisted_10$2)],8,_hoisted_8$4)],8,_hoisted_1$9)}const LineScale=_export_sfc(_sfc_main$7,[["render",_sfc_render$2]]),Loaders={LineScale},index_vue_vue_type_style_index_0_scoped_82159762_lang="",index_vue_vue_type_style_index_1_lang="",_sfc_main$6={name:"vue-element-loading",props:{active:Boolean,spinner:{type:String,default:"spinner"},text:{type:String,default:""},textStyle:{type:Object,default:function(){return{}}},color:{type:String,default:"#000"},isFullScreen:{type:Boolean,default:!1},backgroundColor:{type:String,default:"rgba(255, 255, 255, .9)"},size:{type:String,default:"40"},duration:{type:String,default:"0.6"},delay:{type:[String,Number],default:0}},data(){return{isActive:this.active||!1,isActiveDelay:!1}},mounted(){if(this.$refs.velmld.parentNode.classList.add("velmld-parent"),this.delay){const t=+this.delay*1e3;this.delayActive(t)}},methods:{delayActive(t){this.isActiveDelay=!0,setTimeout(()=>{this.isActiveDelay=!1},t)}},watch:{active(t){this.isActive=t,t&&this.$refs.velmld.parentNode.classList.add("velmld-parent")}},components:Loaders},_hoisted_1$8={class:"velmld-spinner"};function _sfc_render$1(t,r,e,n,o,a){return openBlock(),createBlock(Transition,{name:"fade"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{class:normalizeClass([{"velmld-full-screen":e.isFullScreen},"velmld-overlay"]),style:normalizeStyle({backgroundColor:e.backgroundColor}),ref:"velmld"},[createBaseVNode("div",_hoisted_1$8,[renderSlot(t.$slots,"default",{},()=>[(openBlock(),createBlock(resolveDynamicComponent(e.spinner),{color:e.color,size:`${e.size}px`,duration:`${e.duration}s`},null,8,["color","size","duration"]))],!0),e.text.length?(openBlock(),createElementBlock("div",{key:0,style:normalizeStyle({color:e.color,...e.textStyle})},toDisplayString(e.text),5)):createCommentVNode("",!0)])],6),[[vShow,o.isActive||o.isActiveDelay]])]),_:3})}const Loader=_export_sfc(_sfc_main$6,[["render",_sfc_render$1],["__scopeId","data-v-82159762"]]),Uploader_vue_vue_type_style_index_0_scoped_1238f422_lang="",_sfc_main$5={props:{server:{type:String,default:"/api/upload"},isInvalid:{type:Boolean,default:!1},media:{type:Array,default:[]},location:{type:String,default:""},max:{type:Number,default:null},maxFilesize:{type:Number,default:4},warnings:{type:Boolean,default:!0}},mounted(){this.init()},data(){return{addedMedia:[],savedMedia:[],removedMedia:[],isLoading:!0}},methods:{init(){this.savedMedia=this.media,this.savedMedia.forEach((t,r)=>{this.savedMedia[r].url||(this.savedMedia[r].url=this.location+"/"+t.name)}),setTimeout(()=>this.isLoading=!1,1e3),this.$emit("init",this.allMedia)},async fileChange(t){this.isLoading=!0;let r=t.target.files;for(var e=0;e<r.length;e++)if(!this.max||this.allMedia.length<this.max)if(r[e].size<=this.maxFilesize*1e6){let n=new FormData,o=URL.createObjectURL(r[e]);n.set("image",r[e]);const{data:a}=await axios$2.post(this.server,n);let c={url:o,name:a.name,size:r[e].size,type:r[e].type};this.addedMedia.push(c),this.$emit("change",this.allMedia),this.$emit("add",c,this.addedMedia)}else{this.$emit("maxFilesize",r[e].size),this.warnings&&alert(`The file you are trying to upload is too big. 
Maximum Filesize: `+this.maxFilesize+"MB");break}else{this.$emit("max"),this.warnings&&alert(`You have reached the maximum number of files that you can upload. 
Maximum Files: `+this.max);break}t.target.value=null,this.isLoading=!1},removeAddedMedia(t){let r=this.addedMedia[t];this.addedMedia.splice(t,1),this.$emit("change",this.allMedia),this.$emit("remove",r,this.removedMedia)},removeSavedMedia(t){let r=this.savedMedia[t];this.removedMedia.push(r),this.savedMedia.splice(t,1),this.$emit("change",this.allMedia),this.$emit("remove",r,this.removedMedia)}},computed:{allMedia(){return[...this.savedMedia,...this.addedMedia]}},emits:["init","change","add","remove","max","maxFilesize"],components:{Loader}},_withScopeId=t=>(pushScopeId("data-v-1238f422"),t=t(),popScopeId(),t),_hoisted_1$7={class:"mu-elements-wraper"},_hoisted_2$5={class:"mu-plusbox-container"},_hoisted_3$5=_withScopeId(()=>createBaseVNode("label",{for:"mu-file-input",class:"mu-plusbox"},[createBaseVNode("svg",{class:"mu-plus-icon",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[createBaseVNode("g",{fill:"none"},[createBaseVNode("path",{d:"M12 1C5.925 1 1 5.925 1 12s4.925 11 11 11s11-4.925 11-11S18.075 1 12 1zm1 15a1 1 0 1 1-2 0v-3H8a1 1 0 1 1 0-2h3V8a1 1 0 1 1 2 0v3h3a1 1 0 1 1 0 2h-3v3z",fill:"currentColor"})])])],-1)),_hoisted_4$4=["src"],_hoisted_5$4=["onClick"],_hoisted_6$3=_withScopeId(()=>createBaseVNode("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[createBaseVNode("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),_hoisted_7$3=[_hoisted_6$3],_hoisted_8$3=["src"],_hoisted_9$2=["onClick"],_hoisted_10$1=_withScopeId(()=>createBaseVNode("svg",{class:"mu-times-icon",xmlns:"http://www.w3.org/2000/svg",width:"0.65em",height:"0.65em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 352 512"},[createBaseVNode("path",{d:"m242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28L75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256L9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",fill:"currentColor"})],-1)),_hoisted_11$1=[_hoisted_10$1],_hoisted_12$1=["value"],_hoisted_13$1=["value"],_hoisted_14$1={key:0,class:"mu-mt-1"},_hoisted_15$1=_withScopeId(()=>createBaseVNode("input",{type:"text",name:"media",value:"1",hidden:""},null,-1)),_hoisted_16$1=[_hoisted_15$1];function _sfc_render(t,r,e,n,o,a){const c=resolveComponent("Loader");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:normalizeClass(["mu-container",e.isInvalid?"mu-red-border":""])},[createVNode(c,{color:"#0275d8",active:o.isLoading,spinner:"line-scale","background-color":"rgba(255, 255, 255, .4)"},null,8,["active"]),createBaseVNode("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$5,[_hoisted_3$5,createBaseVNode("input",{onChange:r[0]||(r[0]=(...u)=>a.fileChange&&a.fileChange(...u)),id:"mu-file-input",type:"file",accept:"image/*",multiple:"",hidden:""},null,32)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.savedMedia,(u,l)=>(openBlock(),createElementBlock("div",{key:l,class:"mu-image-container"},[createBaseVNode("img",{src:e.location+"/"+u.name,alt:"",class:"mu-images-preview"},null,8,_hoisted_4$4),createBaseVNode("button",{onClick:f=>a.removeSavedMedia(l),class:"mu-close-btn",type:"button"},_hoisted_7$3,8,_hoisted_5$4)]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.addedMedia,(u,l)=>(openBlock(),createElementBlock("div",{key:l,class:"mu-image-container"},[createBaseVNode("img",{src:u.url,alt:"",class:"mu-images-preview"},null,8,_hoisted_8$3),createBaseVNode("button",{onClick:f=>a.removeAddedMedia(l),class:"mu-close-btn",type:"button"},_hoisted_11$1,8,_hoisted_9$2)]))),128))])],2),createBaseVNode("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.addedMedia,(u,l)=>(openBlock(),createElementBlock("div",{key:l,class:"mu-mt-1"},[createBaseVNode("input",{type:"text",name:"added_media[]",value:u.name,hidden:""},null,8,_hoisted_12$1)]))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(o.removedMedia,(u,l)=>(openBlock(),createElementBlock("div",{key:l,class:"mu-mt-1"},[createBaseVNode("input",{type:"text",name:"removed_media[]",value:u.name,hidden:""},null,8,_hoisted_13$1)]))),128)),a.allMedia.length?(openBlock(),createElementBlock("div",_hoisted_14$1,_hoisted_16$1)):createCommentVNode("",!0)])])}const Uploader=_export_sfc(_sfc_main$5,[["render",_sfc_render],["__scopeId","data-v-1238f422"]]);/*!
  * vue-color-kit v1.0.4
  * (c) 2021 
  * @license MIT
  */function setColorValue(t){let r={r:0,g:0,b:0,a:1};/#/.test(t)?r=hex2rgb(t):/rgb/.test(t)?r=rgb2rgba(t):typeof t=="string"?r=rgb2rgba(`rgba(${t})`):Object.prototype.toString.call(t)==="[object Object]"&&(r=t);const{r:e,g:n,b:o,a}=r,{h:c,s:u,v:l}=rgb2hsv(r);return{r:e,g:n,b:o,a:a===void 0?1:a,h:c,s:u,v:l}}function createAlphaSquare(t){const r=document.createElement("canvas"),e=r.getContext("2d"),n=t*2;return r.width=n,r.height=n,e.fillStyle="#ffffff",e.fillRect(0,0,n,n),e.fillStyle="#ccd5db",e.fillRect(0,0,t,t),e.fillRect(t,t,t,t),r}function createLinearGradient(t,r,e,n,o,a){const c=t==="l",u=r.createLinearGradient(0,0,c?e:0,c?0:n);u.addColorStop(.01,o),u.addColorStop(.99,a),r.fillStyle=u,r.fillRect(0,0,e,n)}function rgb2hex({r:t,g:r,b:e},n){const o=c=>("0"+Number(c).toString(16)).slice(-2),a=`#${o(t)}${o(r)}${o(e)}`;return n?a.toUpperCase():a}function hex2rgb(t){t=t.slice(1);const r=e=>parseInt(e,16)||0;return{r:r(t.slice(0,2)),g:r(t.slice(2,4)),b:r(t.slice(4,6))}}function rgb2rgba(t){return typeof t=="string"?(t=(/rgba?\((.*?)\)/.exec(t)||["","0,0,0,1"])[1].split(","),{r:Number(t[0])||0,g:Number(t[1])||0,b:Number(t[2])||0,a:Number(t[3]?t[3]:1)}):t}function rgb2hsv({r:t,g:r,b:e}){t=t/255,r=r/255,e=e/255;const n=Math.max(t,r,e),o=Math.min(t,r,e),a=n-o;let c=0;n===o?c=0:n===t?r>=e?c=60*(r-e)/a:c=60*(r-e)/a+360:n===r?c=60*(e-t)/a+120:n===e&&(c=60*(t-r)/a+240),c=Math.floor(c);let u=parseFloat((n===0?0:1-o/n).toFixed(2)),l=parseFloat(n.toFixed(2));return{h:c,s:u,v:l}}var script=defineComponent({props:{color:{type:String,default:"#000000"},hsv:{type:Object,default:null},size:{type:Number,default:152}},emits:["selectSaturation"],data(){return{slideSaturationStyle:{}}},mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const t=this.$refs.canvasSaturation,r=this.size,e=t.getContext("2d");t.width=r,t.height=r,e.fillStyle=this.color,e.fillRect(0,0,r,r),createLinearGradient("l",e,r,r,"#FFFFFF","rgba(255,255,255,0)"),createLinearGradient("p",e,r,r,"rgba(0,0,0,0)","#000000")},renderSlide(){this.slideSaturationStyle={left:this.hsv.s*this.size-5+"px",top:(1-this.hsv.v)*this.size-5+"px"}},selectSaturation(t){const{top:r,left:e}=this.$el.getBoundingClientRect(),n=t.target.getContext("2d"),o=c=>{let u=c.clientX-e,l=c.clientY-r;u<0&&(u=0),l<0&&(l=0),u>this.size&&(u=this.size),l>this.size&&(l=this.size),this.slideSaturationStyle={left:u-5+"px",top:l-5+"px"};const f=n.getImageData(Math.min(u,this.size-1),Math.min(l,this.size-1),1,1),[g,v,b]=f.data;this.$emit("selectSaturation",{r:g,g:v,b})};o(t);const a=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",o),document.addEventListener("mouseup",a)}}});const _hoisted_1$5={ref:"canvasSaturation"};function render(t,r,e,n,o,a){return openBlock(),createBlock("div",{class:"saturation",onMousedown:r[1]||(r[1]=withModifiers((...c)=>t.selectSaturation&&t.selectSaturation(...c),["prevent","stop"]))},[createVNode("canvas",_hoisted_1$5,null,512),createVNode("div",{style:t.slideSaturationStyle,class:"slide"},null,4)],32)}script.render=render;script.__file="src/color/Saturation.vue";var script$1=defineComponent({props:{hsv:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},emits:["selectHue"],data(){return{slideHueStyle:{}}},mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const t=this.$refs.canvasHue,r=this.width,e=this.height,n=t.getContext("2d");t.width=r,t.height=e;const o=n.createLinearGradient(0,0,0,e);o.addColorStop(0,"#FF0000"),o.addColorStop(.17*1,"#FF00FF"),o.addColorStop(.17*2,"#0000FF"),o.addColorStop(.17*3,"#00FFFF"),o.addColorStop(.17*4,"#00FF00"),o.addColorStop(.17*5,"#FFFF00"),o.addColorStop(1,"#FF0000"),n.fillStyle=o,n.fillRect(0,0,r,e)},renderSlide(){this.slideHueStyle={top:(1-this.hsv.h/360)*this.height-2+"px"}},selectHue(t){const{top:r}=this.$el.getBoundingClientRect(),e=t.target.getContext("2d"),n=a=>{let c=a.clientY-r;c<0&&(c=0),c>this.height&&(c=this.height),this.slideHueStyle={top:c-2+"px"};const u=e.getImageData(0,Math.min(c,this.height-1),1,1),[l,f,g]=u.data;this.$emit("selectHue",{r:l,g:f,b:g})};n(t);const o=()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",o)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",o)}}});const _hoisted_1$1$1={ref:"canvasHue"};function render$1(t,r,e,n,o,a){return openBlock(),createBlock("div",{class:"hue",onMousedown:r[1]||(r[1]=withModifiers((...c)=>t.selectHue&&t.selectHue(...c),["prevent","stop"]))},[createVNode("canvas",_hoisted_1$1$1,null,512),createVNode("div",{style:t.slideHueStyle,class:"slide"},null,4)],32)}script$1.render=render$1;script$1.__file="src/color/Hue.vue";var script$2=defineComponent({props:{color:{type:String,default:"#000000"},rgba:{type:Object,default:null},width:{type:Number,default:15},height:{type:Number,default:152}},emits:["selectAlpha"],data(){return{slideAlphaStyle:{},alphaSize:5}},watch:{color(){this.renderColor()},"rgba.a"(){this.renderSlide()}},mounted(){this.renderColor(),this.renderSlide()},methods:{renderColor(){const t=this.$refs.canvasAlpha,r=this.width,e=this.height,n=this.alphaSize,o=createAlphaSquare(n),a=t.getContext("2d");t.width=r,t.height=e,a.fillStyle=a.createPattern(o,"repeat"),a.fillRect(0,0,r,e),createLinearGradient("p",a,r,e,"rgba(255,255,255,0)",this.color)},renderSlide(){this.slideAlphaStyle={top:this.rgba.a*this.height-2+"px"}},selectAlpha(t){const{top:r}=this.$el.getBoundingClientRect(),e=o=>{let a=o.clientY-r;a<0&&(a=0),a>this.height&&(a=this.height);let c=parseFloat((a/this.height).toFixed(2));this.$emit("selectAlpha",c)};e(t);const n=()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",e),document.addEventListener("mouseup",n)}}});const _hoisted_1$2$1={ref:"canvasAlpha"};function render$2(t,r,e,n,o,a){return openBlock(),createBlock("div",{class:"color-alpha",onMousedown:r[1]||(r[1]=withModifiers((...c)=>t.selectAlpha&&t.selectAlpha(...c),["prevent","stop"]))},[createVNode("canvas",_hoisted_1$2$1,null,512),createVNode("div",{style:t.slideAlphaStyle,class:"slide"},null,4)],32)}script$2.render=render$2;script$2.__file="src/color/Alpha.vue";var script$3=defineComponent({props:{color:{type:String,default:"#000000"},width:{type:Number,default:100},height:{type:Number,default:30}},data(){return{alphaSize:5}},watch:{color(){this.renderColor()}},mounted(){this.renderColor()},methods:{renderColor(){const t=this.$el,r=this.width,e=this.height,n=this.alphaSize,o=createAlphaSquare(n),a=t.getContext("2d");t.width=r,t.height=e,a.fillStyle=a.createPattern(o,"repeat"),a.fillRect(0,0,r,e),a.fillStyle=this.color,a.fillRect(0,0,r,e)}}});function render$3(t,r,e,n,o,a){return openBlock(),createBlock("canvas")}script$3.render=render$3;script$3.__file="src/color/Preview.vue";var script$4=defineComponent({props:{suckerCanvas:{type:Object,default:null},suckerArea:{type:Array,default:()=>[]}},data(){return{isOpenSucker:!1,suckerPreview:null,isSucking:!1}},watch:{suckerCanvas(t){this.isSucking=!1,this.suckColor(t)}},methods:{openSucker(){this.isOpenSucker?this.keydownHandler({keyCode:27}):(this.isOpenSucker=!0,this.isSucking=!0,this.$emit("openSucker",!0),document.addEventListener("keydown",this.keydownHandler))},keydownHandler(t){t.keyCode===27&&(this.isOpenSucker=!1,this.isSucking=!1,this.$emit("openSucker",!1),document.removeEventListener("keydown",this.keydownHandler),document.removeEventListener("mousemove",this.mousemoveHandler),document.removeEventListener("mouseup",this.mousemoveHandler),this.suckerPreview&&(document.body.removeChild(this.suckerPreview),this.suckerPreview=null))},mousemoveHandler(t){const{clientX:r,clientY:e}=t,{top:n,left:o,width:a,height:c}=this.suckerCanvas.getBoundingClientRect(),u=r-o,l=e-n,g=this.suckerCanvas.getContext("2d").getImageData(Math.min(u,a-1),Math.min(l,c-1),1,1);let[v,b,S,C]=g.data;C=parseFloat((C/255).toFixed(2));const O=this.suckerPreview.style;Object.assign(O,{position:"absolute",left:r+20+"px",top:e-36+"px",width:"24px",height:"24px",borderRadius:"50%",border:"2px solid #fff",boxShadow:"0 0 8px 0 rgba(0, 0, 0, 0.16)",background:`rgba(${v}, ${b}, ${S}, ${C})`,zIndex:95}),this.suckerArea.length&&r>=this.suckerArea[0]&&e>=this.suckerArea[1]&&r<=this.suckerArea[2]&&e<=this.suckerArea[3]?O.display="":O.display="none"},suckColor(t){t&&t.tagName!=="CANVAS"||(this.suckerPreview=document.createElement("div"),this.suckerPreview&&document.body.appendChild(this.suckerPreview),document.addEventListener("mousemove",this.mousemoveHandler),document.addEventListener("mouseup",this.mousemoveHandler),t.addEventListener("click",r=>{const{clientX:e,clientY:n}=r,{top:o,left:a,width:c,height:u}=t.getBoundingClientRect(),l=e-a,f=n-o,v=t.getContext("2d").getImageData(Math.min(l,c-1),Math.min(f,u-1),1,1);let[b,S,C,O]=v.data;O=parseFloat((O/255).toFixed(2)),this.$emit("selectSucker",{r:b,g:S,b:C,a:O})}))}}});const _hoisted_1$3$1=createVNode("path",{d:"M13.1,8.2l5.6,5.6c0.4,0.4,0.5,1.1,0.1,1.5s-1.1,0.5-1.5,0.1c0,0-0.1,0-0.1-0.1l-1.4-1.4l-7.7,7.7C7.9,21.9,7.6,22,7.3,22H3.1C2.5,22,2,21.5,2,20.9l0,0v-4.2c0-0.3,0.1-0.6,0.3-0.8l5.8-5.8C8.5,9.7,9.2,9.6,9.7,10s0.5,1.1,0.1,1.5c0,0,0,0.1-0.1,0.1l-5.5,5.5v2.7h2.7l7.4-7.4L8.7,6.8c-0.5-0.4-0.5-1-0.1-1.5s1.1-0.5,1.5-0.1c0,0,0.1,0,0.1,0.1l1.4,1.4l3.5-3.5c1.6-1.6,4.1-1.6,5.8-0.1c1.6,1.6,1.6,4.1,0.1,5.8L20.9,9l-3.6,3.6c-0.4,0.4-1.1,0.5-1.5,0.1"},null,-1),_hoisted_2$4={key:1,class:"sucker",viewBox:"-16 -16 68 68",xmlns:"http://www.w3.org/2000/svg",stroke:"#9099a4"},_hoisted_3$4=createVNode("g",{fill:"none","fill-rule":"evenodd"},[createVNode("g",{transform:"translate(1 1)","stroke-width":"4"},[createVNode("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),createVNode("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[createVNode("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])],-1);function render$4(t,r,e,n,o,a){return openBlock(),createBlock("div",null,[t.isSucking?createCommentVNode("v-if",!0):(openBlock(),createBlock("svg",{key:0,class:[{active:t.isOpenSucker},"sucker"],xmlns:"http://www.w3.org/2000/svg",viewBox:"-12 -12 48 48",onClick:r[1]||(r[1]=(...c)=>t.openSucker&&t.openSucker(...c))},[_hoisted_1$3$1],2)),t.isSucking?(openBlock(),createBlock("svg",_hoisted_2$4,[_hoisted_3$4])):createCommentVNode("v-if",!0)])}script$4.render=render$4;script$4.__file="src/color/Sucker.vue";var script$5=defineComponent({props:{name:{type:String,default:""},color:{type:String,default:""}},emits:["inputColor"],setup(t,{emit:r}){return{modelColor:computed({get(){return t.color||""},set(n){r("inputColor",n)}})}}});const _hoisted_1$4$1={class:"color-type"},_hoisted_2$1$1={class:"name"};function render$5(t,r,e,n,o,a){return openBlock(),createBlock("div",_hoisted_1$4$1,[createVNode("span",_hoisted_2$1$1,toDisplayString(t.name),1),withDirectives(createVNode("input",{"onUpdate:modelValue":r[1]||(r[1]=c=>t.modelColor=c),class:"value"},null,512),[[vModelText,t.modelColor]])])}script$5.render=render$5;script$5.__file="src/color/Box.vue";var script$6=defineComponent({name:"ColorPicker",props:{color:{type:String,default:"#000000"},colorsDefault:{type:Array,default:()=>[]},colorsHistoryKey:{type:String,default:""}},emits:["selectColor"],setup(t,{emit:r}){const e=ref(),n=ref([]),o=ref();t.colorsHistoryKey&&localStorage&&(n.value=JSON.parse(localStorage.getItem(t.colorsHistoryKey))||[]),o.value=createAlphaSquare(4).toDataURL(),onUnmounted(()=>{a(e.value)});function a(u){if(!u)return;const l=n.value||[],f=l.indexOf(u);f>=0&&l.splice(f,1),l.length>=8&&(l.length=7),l.unshift(u),n.value=l||[],localStorage&&t.colorsHistoryKey&&localStorage.setItem(t.colorsHistoryKey,JSON.stringify(l))}function c(u){r("selectColor",u)}return{setColorsHistory:a,colorsHistory:n,color:e,imgAlphaBase64:o,selectColor:c}}});const _hoisted_1$5$1={class:"colors"},_hoisted_2$2$1={key:0,class:"colors history"};function render$6(t,r,e,n,o,a){return openBlock(),createBlock("div",null,[createVNode("ul",_hoisted_1$5$1,[(openBlock(!0),createBlock(Fragment,null,renderList(t.colorsDefault,c=>(openBlock(),createBlock("li",{key:c,class:"item",onClick:u=>t.selectColor(c)},[createVNode("div",{style:{background:`url(${t.imgAlphaBase64})`},class:"alpha"},null,4),createVNode("div",{style:{background:c},class:"color"},null,4)],8,["onClick"]))),128))]),t.colorsHistory.length?(openBlock(),createBlock("ul",_hoisted_2$2$1,[(openBlock(!0),createBlock(Fragment,null,renderList(t.colorsHistory,c=>(openBlock(),createBlock("li",{key:c,class:"item",onClick:u=>t.selectColor(c)},[createVNode("div",{style:{background:`url(${t.imgAlphaBase64})`},class:"alpha"},null,4),createVNode("div",{style:{background:c},class:"color"},null,4)],8,["onClick"]))),128))])):createCommentVNode("v-if",!0)])}script$6.render=render$6;script$6.__file="src/color/Colors.vue";var script$7=defineComponent({components:{Saturation:script,Hue:script$1,Alpha:script$2,Preview:script$3,Sucker:script$4,Box:script$5,Colors:script$6},emits:["changeColor","openSucker"],props:{color:{type:String,default:"#000000"},theme:{type:String,default:"dark"},suckerHide:{type:Boolean,default:!0},suckerCanvas:{type:null,default:null},suckerArea:{type:Array,default:()=>[]},colorsDefault:{type:Array,default:()=>["#000000","#FFFFFF","#FF1900","#F47365","#FFB243","#FFE623","#6EFF2A","#1BC7B1","#00BEFF","#2E81FF","#5D61FF","#FF89CF","#FC3CAD","#BF3DCE","#8E00A7","rgba(0,0,0,0)"]},colorsHistoryKey:{type:String,default:"vue-colorpicker-history"}},data(){return{hueWidth:15,hueHeight:152,previewHeight:30,modelRgba:"",modelHex:"",r:0,g:0,b:0,a:1,h:0,s:0,v:0}},computed:{isLightTheme(){return this.theme==="light"},totalWidth(){return this.hueHeight+(this.hueWidth+8)*2},previewWidth(){return this.totalWidth-(this.suckerHide?0:this.previewHeight)},rgba(){return{r:this.r,g:this.g,b:this.b,a:this.a}},hsv(){return{h:this.h,s:this.s,v:this.v}},rgbString(){return`rgb(${this.r}, ${this.g}, ${this.b})`},rgbaStringShort(){return`${this.r}, ${this.g}, ${this.b}, ${this.a}`},rgbaString(){return`rgba(${this.rgbaStringShort})`},hexString(){return rgb2hex(this.rgba,!0)}},created(){Object.assign(this,setColorValue(this.color)),this.setText(),this.$watch("rgba",()=>{this.$emit("changeColor",{rgba:this.rgba,hsv:this.hsv,hex:this.modelHex})})},methods:{selectSaturation(t){const{r,g:e,b:n,h:o,s:a,v:c}=setColorValue(t);Object.assign(this,{r,g:e,b:n,h:o,s:a,v:c}),this.setText()},selectHue(t){const{r,g:e,b:n,h:o,s:a,v:c}=setColorValue(t);Object.assign(this,{r,g:e,b:n,h:o,s:a,v:c}),this.setText(),this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide()})},selectAlpha(t){this.a=t,this.setText()},inputHex(t){const{r,g:e,b:n,a:o,h:a,s:c,v:u}=setColorValue(t);Object.assign(this,{r,g:e,b:n,a:o,h:a,s:c,v:u}),this.modelHex=t,this.modelRgba=this.rgbaStringShort,this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})},inputRgba(t){const{r,g:e,b:n,a:o,h:a,s:c,v:u}=setColorValue(t);Object.assign(this,{r,g:e,b:n,a:o,h:a,s:c,v:u}),this.modelHex=this.hexString,this.modelRgba=t,this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})},setText(){this.modelHex=this.hexString,this.modelRgba=this.rgbaStringShort},openSucker(t){this.$emit("openSucker",t)},selectSucker(t){const{r,g:e,b:n,a:o,h:a,s:c,v:u}=setColorValue(t);Object.assign(this,{r,g:e,b:n,a:o,h:a,s:c,v:u}),this.setText(),this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})},selectColor(t){const{r,g:e,b:n,a:o,h:a,s:c,v:u}=setColorValue(t);Object.assign(this,{r,g:e,b:n,a:o,h:a,s:c,v:u}),this.setText(),this.$nextTick(()=>{this.$refs.saturation.renderColor(),this.$refs.saturation.renderSlide(),this.$refs.hue.renderSlide()})}}});const _hoisted_1$6={class:"color-set"};function render$7(t,r,e,n,o,a){const c=resolveComponent("Saturation"),u=resolveComponent("Hue"),l=resolveComponent("Alpha"),f=resolveComponent("Preview"),g=resolveComponent("Sucker"),v=resolveComponent("Box"),b=resolveComponent("Colors");return openBlock(),createBlock("div",{class:["hu-color-picker",{light:t.isLightTheme}],style:{width:t.totalWidth+"px"}},[createVNode("div",_hoisted_1$6,[createVNode(c,{ref:"saturation",color:t.rgbString,hsv:t.hsv,size:t.hueHeight,onSelectSaturation:t.selectSaturation},null,8,["color","hsv","size","onSelectSaturation"]),createVNode(u,{ref:"hue",hsv:t.hsv,width:t.hueWidth,height:t.hueHeight,onSelectHue:t.selectHue},null,8,["hsv","width","height","onSelectHue"]),createVNode(l,{ref:"alpha",color:t.rgbString,rgba:t.rgba,width:t.hueWidth,height:t.hueHeight,onSelectAlpha:t.selectAlpha},null,8,["color","rgba","width","height","onSelectAlpha"])]),createVNode("div",{style:{height:t.previewHeight+"px"},class:"color-show"},[createVNode(f,{color:t.rgbaString,width:t.previewWidth,height:t.previewHeight},null,8,["color","width","height"]),t.suckerHide?createCommentVNode("v-if",!0):(openBlock(),createBlock(g,{key:0,"sucker-canvas":t.suckerCanvas,"sucker-area":t.suckerArea,onOpenSucker:t.openSucker,onSelectSucker:t.selectSucker},null,8,["sucker-canvas","sucker-area","onOpenSucker","onSelectSucker"]))],4),createVNode(v,{name:"HEX",color:t.modelHex,onInputColor:t.inputHex},null,8,["color","onInputColor"]),createVNode(v,{name:"RGBA",color:t.modelRgba,onInputColor:t.inputRgba},null,8,["color","onInputColor"]),createVNode(b,{color:t.rgbaString,"colors-default":t.colorsDefault,"colors-history-key":t.colorsHistoryKey,onSelectColor:t.selectColor},null,8,["color","colors-default","colors-history-key","onSelectColor"]),createCommentVNode(" custom options "),renderSlot(t.$slots,"default")],6)}script$7.render=render$7;script$7.__file="src/color/ColorPicker.vue";script$7.install=t=>{t.component(script$7.name,script$7)};const _hoisted_1$4={class:"text-lg"},_hoisted_2$3={class:"text-sm text-gray-400"},_hoisted_3$3={class:"flex flex-row justify-around mt-4"},_hoisted_4$3=createBaseVNode("label",{class:"ml-2 text-sm font-medium text-gray-300 cursor-pointer"},"Caja",-1),_hoisted_5$3=createBaseVNode("label",{class:"ml-2 text-sm font-medium text-gray-300 cursor-pointer"},"Ticker",-1),_sfc_main$4={__name:"BannerButton",props:{banner:{type:Object,required:!0}},setup(t){const r=t,e=useStore(),n=o=>{r.banner.type=o,e.session.signal({type:"banner-type-change",data:JSON.stringify({index:e.banners.indexOf(r.banner),type:o})})};return(o,a)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["flex flex-col p-4 rounded bg-slate-700 text-white border-2 cursor-pointer",t.banner.shown?"border-white":"border-transparent"])},[createBaseVNode("div",_hoisted_1$4,toDisplayString(t.banner.title),1),createBaseVNode("div",_hoisted_2$3,toDisplayString(t.banner.text),1),createBaseVNode("div",_hoisted_3$3,[createBaseVNode("div",{class:"flex items-center p-1 px-3 border rounded cursor-pointer",onClick:a[1]||(a[1]=withModifiers(c=>n("box"),["stop"]))},[withDirectives(createBaseVNode("input",{type:"radio",value:"box","onUpdate:modelValue":a[0]||(a[0]=c=>t.banner.type=c),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 cursor-pointer"},null,512),[[vModelRadio,t.banner.type]]),_hoisted_4$3]),createBaseVNode("div",{class:"flex items-center p-1 px-3 border rounded cursor-pointer",onClick:a[3]||(a[3]=withModifiers(c=>n("ticker"),["stop"]))},[withDirectives(createBaseVNode("input",{type:"radio",value:"ticker","onUpdate:modelValue":a[2]||(a[2]=c=>t.banner.type=c),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 cursor-pointer"},null,512),[[vModelRadio,t.banner.type]]),_hoisted_5$3])])],2))}},_hoisted_1$3={class:"font-bold leading-1"},_hoisted_2$2={class:"italic leading-none text-sm pl-2"},_hoisted_3$2={key:0,class:"relative"},_hoisted_4$2=["onClick"],_hoisted_5$2=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"})],-1),_hoisted_6$2=[_hoisted_5$2],_hoisted_7$2={class:"absolute bottom-3 w-full pr-4"},_hoisted_8$2=["onKeyup"],_sfc_main$3={__name:"Chat",setup(t){const r=useStore(),e=useAuth(),n=ref(""),o=()=>{n.value&&(window.Echo.private(`event.${e.user().event_id}`).whisper("chat.message",{from:r.name,text:n.value}),r.chatMessages.push({from:r.name,text:n.value,mine:!0}),n.value=null)},a=c=>{r.session.signal({type:"add-banner",data:JSON.stringify({title:`Pregunta de ${c.from}`,text:c.text,type:"box"})}),r.banners=[...r.banners,{title:`Pregunta de ${c.from}`,text:c.text,type:"box"}]};return(c,u)=>(openBlock(),createElementBlock("div",{class:"relative flex flex-col bg-slate-800 h-full rounded-lg border-2 p-2 gap-y-2",style:normalizeStyle({borderColor:unref(r).color+"55"})},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).chatMessages,l=>(openBlock(),createElementBlock("div",{class:normalizeClass(["flex flex-col w-fit text-black py-1 px-2 rounded-xl border border-black/50",`bg-${[unref(r).color]}`,l.mine?"self-end":"self-start"]),style:normalizeStyle({backgroundColor:l.mine?"#41B883":"#74EBB6"})},[createBaseVNode("div",_hoisted_1$3,toDisplayString(l.from),1),createBaseVNode("div",_hoisted_2$2,toDisplayString(l.text),1),unref(r).mode==="host"?(openBlock(),createElementBlock("div",_hoisted_3$2,[createBaseVNode("div",{class:"absolute rounded-full bg-blue-900 text-white -left-4 -bottom-2 cursor-pointer",onClick:f=>a(l)},_hoisted_6$2,8,_hoisted_4$2)])):createCommentVNode("",!0)],6))),256)),createBaseVNode("div",_hoisted_7$2,[withDirectives(createBaseVNode("input",{type:"text",class:"bg-gray-800 border border-gray-600 text-gray-50 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Mensaje...","onUpdate:modelValue":u[0]||(u[0]=l=>n.value=l),onKeyup:withKeys(o,["enter"])},null,40,_hoisted_8$2),[[vModelText,n.value]])])],4))}},_hoisted_1$2={class:"flex flex-col gap-2"},_hoisted_2$1={class:"flex flex-col bg-slate-600 rounded-lg text-white p-3 cursor-pointer justify-center font-bold"},_hoisted_3$1={class:"text-xl"},_hoisted_4$1=createBaseVNode("span",{class:"text-slate-300"},"Q.",-1),_hoisted_5$1={class:"flex flex-row text-sm italic w-full"},_hoisted_6$1={class:"text-slate-300"},_hoisted_7$1=createBaseVNode("div",{class:"grow"},null,-1),_hoisted_8$1={class:"text-md text-blue-200"},_hoisted_9$1=["onClick"],_sfc_main$2={__name:"Questions",setup(t){const r=useAuth(),e=useStore(),n=a=>{switch(a){case"idle":return"Iniciar";case"active":return"Terminar";case"done":return"Mostrar";case"shown":return"Esconder"}},o=a=>{switch(a.status){case"idle":a.status="active",window.Echo.private(`event.${r.user().event_id}`).whisper("poll.start",{});break;case"active":a.status="done",window.Echo.private(`event.${r.user().event_id}`).whisper("poll.close",{});break;case"done":a.status="shown";break;case"shown":a.status="done";break}};return(a,c)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",{class:"flex flex-row bg-green-400 rounded-lg text-black p-3 cursor-pointer justify-center font-bold",onClick:c[0]||(c[0]=u=>{unref(e).banner=null,unref(e).lastBanner=null})}," Nueva Pregunta "),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e).questions,u=>(openBlock(),createElementBlock("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[_hoisted_4$1,createTextVNode(" "+toDisplayString(u.title),1)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(u.options,(l,f)=>(openBlock(),createElementBlock("div",_hoisted_5$1,[createBaseVNode("div",null,[createBaseVNode("span",_hoisted_6$1,toDisplayString(f+1)+".",1),createTextVNode(" "+toDisplayString(l.text),1)]),_hoisted_7$1,createBaseVNode("div",_hoisted_8$1,toDisplayString(l.selected),1)]))),256)),createBaseVNode("div",{class:"bg-yellow-600 w-full p-2 text-center rounded-lg mt-3",onClick:l=>o(u)},toDisplayString(n(u.status)),9,_hoisted_9$1)]))),256))]))}},_hoisted_1$1={class:"flex flex-col bg-slate-900 p-4 text-white gap-4 min-w-[340px] w-[340px] h-screen"},_hoisted_2={class:"flex flex-row flex-wrap justify-evenly gap-x-4 gap-y-2"},_hoisted_3={key:1,class:"flex flex-col gap-2"},_hoisted_4={key:3},_hoisted_5={class:"flex flex-col"},_hoisted_6=createBaseVNode("div",null,"Marca",-1),_hoisted_7={class:"flex flex-row bg-slate-700 p-2 rounded-lg justify-around"},_hoisted_8={id:"countries",class:"border rounded-lg block w-full p-2.5 bg-gray-700 border-gray-600 placeholder-gray-400 text-white focus:ring-blue-500 focus:border-blue-500"},_hoisted_9=["value","selected"],_hoisted_10=createBaseVNode("div",{class:"mt-3"},"Theme",-1),_hoisted_11={class:"flex flex-row bg-slate-700 p-2 rounded-lg justify-around"},_hoisted_12={class:"flex flex-col mt-3"},_hoisted_13={class:"mb-3"},_hoisted_14=createBaseVNode("label",{for:"default-input",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Color",-1),_hoisted_15={class:"flex flex-col mb-3"},_hoisted_16=createBaseVNode("div",{class:"mb-1"},"Logo",-1),_hoisted_17={class:"flex flex-row flex-wrap gap-2"},_hoisted_18=["onClick"],_hoisted_19=["src"],_hoisted_20={class:"flex flex-col mb-3"},_hoisted_21=createBaseVNode("div",{class:"mb-1"},"Overlay",-1),_hoisted_22={class:"flex flex-row flex-wrap gap-2"},_hoisted_23=["onClick"],_hoisted_24=["src"],_hoisted_25={class:"flex flex-col"},_hoisted_26=createBaseVNode("div",{class:"mb-1"},"Background",-1),_hoisted_27={class:"flex flex-row gap-2"},_hoisted_28=["onClick"],_hoisted_29=["src"],_hoisted_30={class:"flex flex-col rounded-2xl bg-red-700 border-2 px-8 py-10 gap-4 max-w-lg max-h-min"},_sfc_main$1={__name:"RightSide",props:{fake:{type:Boolean,default:!1}},setup(t){const r=useStore(),e=ref(!1),n=ref(""),o=v=>{r.buttonTheme=v,r.session.signal({type:"change-button-theme",data:v})},a=v=>{r.color=v.hex},c=v=>{switch(v){case"logo":n.value="Escoja Logo para subir";break;case"overlay":n.value="Escoja Overlay para subir";break;case"bg":n.value="Escoja Background para subir";break}e.value=!0},u=v=>{v===r.logo?(r.logo=null,r.session.signal({type:"change-logo",data:""})):(r.logo=v,r.session.signal({type:"change-logo",data:v}))},l=v=>{v===r.overlay?(r.overlay=null,r.session.signal({type:"change-overlay",data:""})):(r.overlay=v,r.session.signal({type:"change-overlay",data:v}))},f=v=>{v===r.bg?(r.bg=null,r.session.signal({type:"change-bg",data:""})):(r.bg=v,r.session.signal({type:"change-bg",data:v}))},g=v=>{if(!v){for(const b of r.banners)b.shown=!1;r.session.signal({type:"banner-hide",data:""});return}if(v.shown)v.shown=!1,r.session.signal({type:"banner-hide",data:""});else{for(const b of r.banners)b.shown=b===v;r.session.signal({type:"banner-show",data:r.banners.indexOf(v).toString()})}};return(v,b)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",{class:normalizeClass(["flex flex-row p-2 rounded-lg cursor-pointer",unref(r).tab=="chat"?"bg-gray-500":"bg-gray-700"]),onClick:b[0]||(b[0]=S=>unref(r).tab="chat")},[createVNode(unref(render$h),{class:"w-6 h-6 mr-1"}),createTextVNode(" Chat ")],2),unref(r).mode==="host"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["flex flex-row p-2 rounded-lg cursor-pointer",unref(r).tab=="banners"?"bg-gray-500":"bg-gray-700"]),onClick:b[1]||(b[1]=S=>unref(r).tab="banners")},[createVNode(unref(render$j),{class:"w-6 h-6 mr-1"}),createTextVNode(" Banners ")],2)):createCommentVNode("",!0),unref(r).mode==="host"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["flex flex-row p-2 rounded-lg cursor-pointer",unref(r).tab=="media"?"bg-gray-500":"bg-gray-700"]),onClick:b[2]||(b[2]=S=>unref(r).tab="questions")},[createVNode(unref(render$c),{class:"w-6 h-6 mr-1"}),createTextVNode(" Preguntas ")],2)):createCommentVNode("",!0),unref(r).mode==="host"?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["flex flex-row p-2 rounded-lg cursor-pointer",unref(r).tab=="media"?"bg-gray-500":"bg-gray-700"]),onClick:b[3]||(b[3]=S=>unref(r).tab="media")},[createVNode(unref(render$f),{class:"w-6 h-6 mr-1"}),createTextVNode(" Graficos ")],2)):createCommentVNode("",!0)]),unref(r).tab=="chat"?(openBlock(),createBlock(_sfc_main$3,{key:0})):createCommentVNode("",!0),unref(r).tab=="banners"?(openBlock(),createElementBlock("div",_hoisted_3,[createBaseVNode("div",{class:"flex flex-row bg-slate-700 rounded-lg text-white p-3 cursor-pointer justify-center font-bold",onClick:b[4]||(b[4]=S=>g(null))}," Limpiar "),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).banners,S=>(openBlock(),createBlock(_sfc_main$4,{banner:S,onClick:C=>g(S)},null,8,["banner","onClick"]))),256))])):createCommentVNode("",!0),unref(r).tab=="questions"?(openBlock(),createBlock(_sfc_main$2,{key:2})):createCommentVNode("",!0),unref(r).tab=="media"?(openBlock(),createElementBlock("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,[_hoisted_6,createBaseVNode("div",_hoisted_7,[createBaseVNode("select",_hoisted_8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).brands,S=>(openBlock(),createElementBlock("option",{value:S.name,selected:unref(r).brand==S.name},toDisplayString(S.name),9,_hoisted_9))),256))])]),_hoisted_10,createBaseVNode("div",_hoisted_11,[createBaseVNode("div",{class:normalizeClass(["cursor-pointer",unref(r).buttonTheme=="default"?"border-2 border-white/60":"border-2 border-transparent"])},[createVNode(_sfc_main$g,{name:"Default",onClick:b[5]||(b[5]=S=>o("default"))})],2),createBaseVNode("div",{class:normalizeClass(["cursor-pointer",unref(r).buttonTheme=="block"?"border-2 border-white/60":"border-2 border-transparent"])},[createVNode(_sfc_main$f,{name:"Block",onClick:b[6]||(b[6]=S=>o("block"))})],2),createBaseVNode("div",{class:normalizeClass(["cursor-pointer",unref(r).buttonTheme=="rounded"?"border-2 border-white/60":"border-2 border-transparent"])},[createVNode(_sfc_main$e,{name:"Rounded",onClick:b[7]||(b[7]=S=>o("rounded"))})],2)])]),createBaseVNode("div",_hoisted_12,[createBaseVNode("div",_hoisted_13,[_hoisted_14,createVNode(unref(script$7),{buttonTheme:"dark",color:unref(r).color,"sucker-hide":!1,onChangeColor:a},null,8,["color"])])]),createBaseVNode("div",_hoisted_15,[_hoisted_16,createBaseVNode("div",_hoisted_17,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).logos,S=>(openBlock(),createElementBlock("div",{class:"w-12 h-12 border-2 rounded-lg cursor-pointer",style:normalizeStyle({borderColor:unref(r).logo===S?unref(r).color:unref(r).color+"55"}),onClick:C=>u(S)},[createBaseVNode("img",{src:`/${S}`,class:"object-contain"},null,8,_hoisted_19)],12,_hoisted_18))),256)),createBaseVNode("div",{class:"flex justify-center items-center w-12 h-12 border-2 rounded-lg cursor-pointer",style:normalizeStyle({borderColor:unref(r).color+"55"}),onClick:b[8]||(b[8]=S=>c("logo"))},[createVNode(unref(render$d),{class:"w-6 h-6 opacity-50"})],4)])]),createBaseVNode("div",_hoisted_20,[_hoisted_21,createBaseVNode("div",_hoisted_22,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).overlays,S=>(openBlock(),createElementBlock("div",{class:"h-12 aspect-video border-2 rounded-lg cursor-pointer overflow-hidden",style:normalizeStyle({borderColor:unref(r).overlay===S?unref(r).color:unref(r).color+"55"}),onClick:C=>l(S)},[createBaseVNode("img",{src:`/${S}`,class:"w-full object-cover"},null,8,_hoisted_24)],12,_hoisted_23))),256)),createBaseVNode("div",{class:"flex justify-center items-center h-12 aspect-video border-2 rounded-lg cursor-pointer",style:normalizeStyle({borderColor:unref(r).color+"55"}),onClick:b[9]||(b[9]=S=>c("overlay"))},[createVNode(unref(render$d),{class:"w-6 h-6 opacity-50"})],4)])]),createBaseVNode("div",_hoisted_25,[_hoisted_26,createBaseVNode("div",_hoisted_27,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(r).bgs,S=>(openBlock(),createElementBlock("div",{class:"h-12 aspect-video border-2 rounded-lg cursor-pointer overflow-hidden",style:normalizeStyle({borderColor:unref(r).bg===S?unref(r).color:unref(r).color+"55"}),onClick:C=>f(S)},[createBaseVNode("img",{src:`/${S}`,class:"w-full object-cover"},null,8,_hoisted_29)],12,_hoisted_28))),256)),createBaseVNode("div",{class:"flex justify-center items-center h-12 aspect-video border-2 rounded-lg cursor-pointer",style:normalizeStyle({borderColor:unref(r).color+"55"}),onClick:b[10]||(b[10]=S=>c("bg"))},[createVNode(unref(render$d),{class:"w-6 h-6 opacity-50"})],4)])])])):createCommentVNode("",!0),createVNode(unref(Oo),{modelValue:e.value,"onUpdate:modelValue":b[11]||(b[11]=S=>e.value=S),class:"text-white flex justify-center items-center"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_30,[createBaseVNode("h1",null,toDisplayString(n.value),1),createVNode(unref(Uploader),{server:"/api/upload",onChange:v.changeMedia},null,8,["onChange"])])]),_:1},8,["modelValue"])]))}},Main_vue_vue_type_style_index_0_scoped_5f3b973b_lang="",_hoisted_1={class:"flex flex-row w-full h-full"},_sfc_main={__name:"Main",setup(t){const r=useAuth(),e=useStore(),n=ref(!1),o=ref(null),a=e.vonage.apiKey,c=e.vonage.sessionID,u=e.mode==="host"?e.vonage.moderatorToken:e.vonage.publisherToken,l=b=>{b&&alert(b.message)},f=b=>{g.subscribe(b.stream,null,{insertDefaultUI:!1},l).on({videoElementCreated:S=>{console.log("Remote stream started"),e.streams.push({element:S.element,stream:S.target.stream,subscriber:S.target,local:!1})}})},g=OT$1.initSession(a,c);e.session=g,g.on({streamCreated:b=>{f(b)},streamDestroyed:b=>{console.log("Remote stream stopped"),e.streams=e.streams.filter(S=>S.stream.id!==b.stream.id)}}).on("signal:change-layout",b=>{b.from.connectionId!==g.connection.id&&e.changeLayout(b.data,!0)}).on("signal:focused-speaker",b=>{b.from.connectionId!==g.connection.id&&(e.vonage.focusedSpeaker=b.data)}).on("signal:change-logo",b=>{b.data?e.logo=b.data:e.logo=null}).on("signal:change-bg",b=>{b.data?e.bg=b.data:e.bg=null}).on("signal:change-banner",b=>{b.data?e.layout=b.data:e.layout=null}).on("signal:add-banner",b=>{b.from.connectionId!==g.connection.id&&(e.banners=[...e.banners,JSON.parse(b.data)])}).on("signal:banner-show",b=>{if(b.from.connectionId===g.connection.id)return;const S=e.banners[Number(b.data)];for(const C of e.banners)C.shown=C===S}).on("signal:banner-hide",b=>{if(console.log("banner.hide"),b.from.connectionId!==g.connection.id)for(const S of e.banners)S.shown=!1}).on("signal:banner-type-change",b=>{const S=JSON.parse(b.data),C=e.banners[S.index];C.type=S.type}).on("signal:change-button-theme",b=>{e.theme=b.data}).on("signal:on-camera",b=>{const S=e.streams.findIndex(C=>C.stream.id===b.data);e.streams[S].onCamera=!0}).on("signal:off-camera",b=>{const S=e.streams.findIndex(C=>C.stream.id===b.data);e.streams[S].onCamera=!1}).on("signal:screen-sharing",b=>{b.data?e.vonage.activateScreen=b.data:e.vonage.activateScreen=null});const v=()=>{g.connect(u,function(b){b?v():(g.capabilities.forceMute&&(console.log("Mutting Session..."),g.forceMuteAll()),console.log("Publishing..."),e.vonage.publisher=OT$1.initPublisher(null,{insertDefaultUI:!1,name:e.name},l).on({videoElementCreated:S=>{o.value={element:S.element}},streamCreated:S=>{o.value.stream=S.stream,o.value.publisher=S.target,e.streams.push({...o.value,local:!0,onCamera:!1})},muteForced:S=>{console.log("Forced Mute")}}),g.publish(e.vonage.publisher,l),console.log("Successfully published"))})};return onMounted(async()=>{v(),window.Echo=new Echo({broadcaster:"socket.io",host:window.location.hostname+"",path:"/ws/socket.io/",auth:{headers:{Accept:"application/json",Authorization:"Bearer "+r.token()}}}),axios$2.interceptors.request.use(function(b){return b.headers["X-Socket-Id"]=window.Echo.socketId(),b}),window.Echo.join(`event.${r.user().event_id}`),window.Echo.private(`event.${r.user().event_id}`).listenForWhisper("chat.message",b=>{e.chatMessages.push({from:b.from,text:b.text,mine:!1})}).listenForWhisper("poll.start",b=>{e.questions[0].status="active"}).listenForWhisper("poll.vote",b=>{e.questions[0].options.filter(S=>S.text===b.text)[0].selected+=1}).listenForWhisper("poll.close",b=>{e.questions[0].status="done"}).listenForWhisper("poll.show",b=>{e.questions[0].status="shown"})}),(b,S)=>(openBlock(),createElementBlock("div",_hoisted_1,[unref(e).isHost?(openBlock(),createBlock(_sfc_main$h,{key:0,fake:n.value},null,8,["fake"])):createCommentVNode("",!0),createVNode(_sfc_main$8,{fake:n.value},null,8,["fake"]),createVNode(_sfc_main$1,{fake:n.value},null,8,["fake"])]))}},Main=_export_sfc(_sfc_main,[["__scopeId","data-v-5f3b973b"]]),routes=[{path:"/",component:Main}],router$1=createRouter({history:createWebHistory("venoot-webinar"),routes}),auth=createAuth({plugins:{http:instance,router:router$1},drivers:{http:axios_1_x,auth:bearer,router:vueRouter_2_x},options:{loginData:{url:"chatter/auth/login",fetchUser:!0,rememberMe:!0},logoutData:{url:"chatter/auth/logout",method:"POST",makeRequest:!0},fetchData:{url:"chatter/auth/me",method:"GET",enabled:!0},refreshData:{url:"chatter/auth/refresh",enabled:!1,interval:15}}}),style="",vueColorKit="",pinia=createPinia(),vfm=jo();window.io=__require2import__1__;const app=createApp(_sfc_main$j);app.use(auth);app.use(router$1);app.use(pinia);app.use(vfm);app.mount("#app");
